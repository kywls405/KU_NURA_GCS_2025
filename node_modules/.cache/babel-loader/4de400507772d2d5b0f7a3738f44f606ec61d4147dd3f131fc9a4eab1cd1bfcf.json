{"ast":null,"code":"/*!\n * maptalks v1.0.0-rc.25\n * LICENSE : BSD-3-Clause\n * (c) 2016-2023 maptalks.org\n */\nimport Zousan from 'zousan';\nimport rbush from 'rbush';\nimport simplify from 'simplify-js';\nimport { intersectsBox } from 'frustum-intersects';\nvar version = \"1.0.0-rc.25\";\nvar INTERNAL_LAYER_PREFIX = '_maptalks__internal_layer_';\nvar GEOMETRY_COLLECTION_TYPES = ['MultiPoint', 'MultiLineString', 'MultiPolygon', 'GeometryCollection'];\nvar GEOJSON_TYPES = ['FeatureCollection', 'Feature', 'Point', 'LineString', 'Polygon'].concat(GEOMETRY_COLLECTION_TYPES);\nvar RESOURCE_PROPERTIES = ['markerFile', 'polygonPatternFile', 'linePatternFile', 'markerFillPatternFile', 'markerLinePatternFile'];\nvar RESOURCE_SIZE_PROPERTIES = [['markerWidth', 'markerHeight'], [], [null, 'lineWidth'], [], [null, 'markerLineWidth']];\nvar NUMERICAL_PROPERTIES = {\n  'lineWidth': 1,\n  'lineOpacity': 1,\n  'lineDx': 1,\n  'lineDy': 1,\n  'polygonOpacity': 1,\n  'markerWidth': 1,\n  'markerHeight': 1,\n  'markerDx': 1,\n  'markerDy': 1,\n  'markerOpacity': 1,\n  'markerFillOpacity': 1,\n  'markerLineWidth': 1,\n  'markerLineOpacity': 1,\n  'textSize': 1,\n  'textOpacity': 1,\n  'textHaloRadius': 1,\n  'textWrapWidth': 1,\n  'textLineSpacing': 1,\n  'textDx': 1,\n  'textDy': 1\n};\nvar COLOR_PROPERTIES = ['lineColor', 'polygonFill', 'markerFill', 'markerLineColor', 'textFill'];\nvar DEFAULT_TEXT_SIZE = 14;\nfunction now() {\n  return Date.now();\n}\nfunction extend(dest) {\n  for (var i = 1; i < arguments.length; i++) {\n    var src = arguments[i];\n    for (var k in src) {\n      dest[k] = src[k];\n    }\n  }\n  return dest;\n}\nfunction isNil(obj) {\n  return obj == null;\n}\nfunction isNumber(val) {\n  return typeof val === 'number' && !isNaN(val);\n}\nfunction isInteger(n) {\n  return (n | 0) === n;\n}\nfunction isObject(obj) {\n  return typeof obj === 'object' && !!obj;\n}\nfunction isString(obj) {\n  if (isNil(obj)) {\n    return false;\n  }\n  return typeof obj === 'string' || obj.constructor !== null && obj.constructor === String;\n}\nfunction isFunction(obj) {\n  if (isNil(obj)) {\n    return false;\n  }\n  return typeof obj === 'function' || obj.constructor !== null && obj.constructor === Function;\n}\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nfunction hasOwn(obj, key) {\n  return hasOwnProperty.call(obj, key);\n}\nfunction join(arr, seperator) {\n  if (arr.join) {\n    return arr.join(seperator || ',');\n  } else {\n    return Array.prototype.join.call(arr, seperator || ',');\n  }\n}\nfunction isEmpty(object) {\n  var property;\n  for (property in object) {\n    return false;\n  }\n  return !property;\n}\nvar pi = Math.PI / 180;\nfunction toRadian(d) {\n  return d * pi;\n}\nfunction toDegree(r) {\n  return r / pi;\n}\nvar IS_NODE = Object.prototype.toString.call(typeof process !== 'undefined' ? process : 0) === '[object process]' && !process.versions['electron'] && !process.versions['nw'] && !process.versions['node-webkit'];\nvar Browser = {};\nvar maps = {};\nfunction getDevicePixelRatio() {\n  return window.devicePixelRatio || window.screen.deviceXDPI / window.screen.logicalXDPI;\n}\nif (!IS_NODE) {\n  var ua = navigator.userAgent.toLowerCase(),\n    doc = document.documentElement || {\n      style: {}\n    },\n    ie = ('ActiveXObject' in window),\n    webkit = ua.indexOf('webkit') !== -1,\n    phantomjs = ua.indexOf('phantom') !== -1,\n    android23 = ua.search('android [23]') !== -1,\n    chrome = ua.indexOf('chrome') !== -1,\n    gecko = ua.indexOf('gecko') !== -1 && !webkit && !window.opera && !ie,\n    iosWeixin = /iphone/i.test(ua) && /micromessenger/i.test(ua),\n    mobile = typeof orientation !== 'undefined' || ua.indexOf('mobile') !== -1,\n    msPointer = !window.PointerEvent && window.MSPointerEvent,\n    pointer = window.PointerEvent && navigator.pointerEnabled || msPointer,\n    ie3d = ie && 'transition' in doc.style,\n    webkit3d = 'WebKitCSSMatrix' in window && 'm11' in new window.WebKitCSSMatrix() && !android23,\n    gecko3d = ('MozPerspective' in doc.style),\n    opera12 = ('OTransition' in doc.style),\n    any3d = (ie3d || webkit3d || gecko3d) && !opera12 && !phantomjs,\n    imageBitMap = typeof window !== 'undefined' && isFunction(window.createImageBitmap),\n    resizeObserver = typeof window !== 'undefined' && isFunction(window.ResizeObserver),\n    btoa = typeof window !== 'undefined' && isFunction(window.btoa),\n    proxy = typeof window !== 'undefined' && isFunction(window.Proxy);\n  var chromeVersion = 0;\n  if (chrome) {\n    chromeVersion = ua.match(/chrome\\/([\\d.]+)/)[1];\n  }\n  var touch = !phantomjs && (pointer || 'ontouchstart' in window || window.DocumentTouch && document instanceof window.DocumentTouch);\n  var webgl = typeof window !== 'undefined' && 'WebGLRenderingContext' in window;\n  var devicePixelRatio = getDevicePixelRatio();\n  var decodeImageInWorker = false;\n  try {\n    var offCanvas = new OffscreenCanvas(2, 2);\n    offCanvas.getContext('2d');\n    decodeImageInWorker = true;\n  } catch (err) {\n    decodeImageInWorker = false;\n  }\n  var supportsPassive = false;\n  try {\n    window.addEventListener('testPassive', function () {}, {\n      get passive() {\n        supportsPassive = true;\n      }\n    });\n  } catch (e) {}\n  Browser = {\n    ie: ie,\n    ielt9: ie && !document.addEventListener,\n    edge: 'msLaunchUri' in navigator && !('documentMode' in document),\n    webkit: webkit,\n    gecko: gecko,\n    android: ua.indexOf('android') !== -1,\n    android23: android23,\n    chrome: chrome,\n    chromeVersion: chromeVersion,\n    safari: !chrome && ua.indexOf('safari') !== -1,\n    phantomjs: phantomjs,\n    ie3d: ie3d,\n    webkit3d: webkit3d,\n    gecko3d: gecko3d,\n    opera12: opera12,\n    any3d: any3d,\n    iosWeixin: iosWeixin,\n    mobile: mobile,\n    mobileWebkit: mobile && webkit,\n    mobileWebkit3d: mobile && webkit3d,\n    mobileOpera: mobile && window.opera,\n    mobileGecko: mobile && gecko,\n    touch: !!touch,\n    msPointer: !!msPointer,\n    pointer: !!pointer,\n    retina: devicePixelRatio > 1,\n    devicePixelRatio: devicePixelRatio,\n    language: navigator.browserLanguage ? navigator.browserLanguage : navigator.language,\n    ie9: ie && document.documentMode === 9,\n    ie10: ie && document.documentMode === 10,\n    webgl: webgl,\n    imageBitMap: imageBitMap,\n    resizeObserver: resizeObserver,\n    btoa: btoa,\n    decodeImageInWorker: decodeImageInWorker,\n    monitorDPRChange: true,\n    supportsPassive: supportsPassive,\n    proxy: proxy,\n    removeDPRListening: function removeDPRListening(map) {\n      if (map) {\n        delete maps[map.id];\n      }\n    },\n    checkDevicePixelRatio: function checkDevicePixelRatio() {\n      if (typeof window !== 'undefined' && Browser.monitorDPRChange) {\n        var _devicePixelRatio = getDevicePixelRatio();\n        var changed = _devicePixelRatio !== Browser.devicePixelRatio;\n        if (changed) {\n          Browser.devicePixelRatio = _devicePixelRatio;\n        }\n        return changed;\n      }\n      return false;\n    },\n    addDPRListening: function addDPRListening(map) {\n      if (map) {\n        maps[map.id] = map;\n      }\n    }\n  };\n  if (typeof window !== 'undefined' && window.matchMedia) {\n    for (var i = 1; i < 500; i++) {\n      var dpi = (i * 0.01).toFixed(2);\n      var screen$1 = window.matchMedia(\"screen and (resolution: \" + dpi + \"dppx)\");\n      if (screen$1) {\n        if (screen$1.addEventListener) {\n          screen$1.addEventListener('change', Browser.checkDevicePixelRatio);\n        } else if (screen$1.addListener) {\n          screen$1.addListener(Browser.checkDevicePixelRatio);\n        }\n      }\n    }\n  }\n  if (Browser.devicePixelRatio) {\n    var tempDPI = Browser.devicePixelRatio;\n    Object.defineProperty(Browser, 'devicePixelRatio', {\n      get: function get() {\n        return tempDPI;\n      },\n      set: function set(value) {\n        if (value === tempDPI) {\n          return;\n        }\n        tempDPI = value;\n        if (!Browser.monitorDPRChange) {\n          return;\n        }\n        for (var mapId in maps) {\n          var map = maps[mapId];\n          if (!map || !map.options || map.options['devicePixelRatio'] || !map.checkSize || !map.getRenderer) {\n            continue;\n          }\n          var renderer = map.getRenderer();\n          if (renderer) {\n            map.checkSize(true);\n          }\n        }\n      }\n    });\n  }\n}\nvar Browser$1 = Browser;\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  _setPrototypeOf(subClass, superClass);\n}\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return self;\n}\nfunction _toPrimitive(input, hint) {\n  if (typeof input !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (typeof res !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n  return typeof key === \"symbol\" ? key : String(key);\n}\nvar Position = function () {\n  function Position(x, y, z) {\n    if (!isNil(x) && !isNil(y)) {\n      this.x = +x;\n      this.y = +y;\n      this.z = z;\n    } else if (!isNil(x.x) && !isNil(x.y)) {\n      this.x = +x.x;\n      this.y = +x.y;\n      this.z = x.z;\n    } else if (Array.isArray(x)) {\n      this.x = +x[0];\n      this.y = +x[1];\n      this.z = x[2];\n    }\n    if (this._isNaN()) {\n      throw new Error('Position is NaN');\n    }\n  }\n  var _proto = Position.prototype;\n  _proto.set = function set(x, y, z) {\n    this.x = x;\n    this.y = y;\n    this.z = z || 0;\n    return this;\n  };\n  _proto.abs = function abs() {\n    return new this.constructor(Math.abs(this.x), Math.abs(this.y));\n  };\n  _proto._abs = function _abs() {\n    this.x = Math.abs(this.x);\n    this.y = Math.abs(this.y);\n    return this;\n  };\n  _proto._round = function _round() {\n    this.x = Math.round(this.x);\n    this.y = Math.round(this.y);\n    return this;\n  };\n  _proto.round = function round() {\n    return new this.constructor(Math.round(this.x), Math.round(this.y));\n  };\n  _proto._ceil = function _ceil() {\n    this.x = Math.ceil(this.x);\n    this.y = Math.ceil(this.y);\n    return this;\n  };\n  _proto.ceil = function ceil() {\n    return new this.constructor(Math.ceil(this.x), Math.ceil(this.y));\n  };\n  _proto.distanceTo = function distanceTo(point) {\n    var x = point.x - this.x,\n      y = point.y - this.y;\n    return Math.sqrt(x * x + y * y);\n  };\n  _proto.mag = function mag() {\n    return Math.sqrt(this.x * this.x + this.y * this.y);\n  };\n  _proto._floor = function _floor() {\n    this.x = Math.floor(this.x);\n    this.y = Math.floor(this.y);\n    return this;\n  };\n  _proto.floor = function floor() {\n    return new this.constructor(Math.floor(this.x), Math.floor(this.y));\n  };\n  _proto.copy = function copy() {\n    return new this.constructor(this.x, this.y, this.z);\n  };\n  _proto._add = function _add(x, y) {\n    if (!isNil(x.x)) {\n      this.x += x.x;\n      this.y += x.y;\n    } else if (!isNil(x[0])) {\n      this.x += x[0];\n      this.y += x[1];\n    } else {\n      this.x += x;\n      this.y += y;\n    }\n    return this;\n  };\n  _proto.add = function add(x, y) {\n    var nx, ny;\n    if (!isNil(x.x)) {\n      nx = this.x + x.x;\n      ny = this.y + x.y;\n    } else if (!isNil(x[0])) {\n      nx = this.x + x[0];\n      ny = this.y + x[1];\n    } else {\n      nx = this.x + x;\n      ny = this.y + y;\n    }\n    return new this.constructor(nx, ny);\n  };\n  _proto._sub = function _sub(x, y) {\n    if (!isNil(x.x)) {\n      this.x -= x.x;\n      this.y -= x.y;\n    } else if (!isNil(x[0])) {\n      this.x -= x[0];\n      this.y -= x[1];\n    } else {\n      this.x -= x;\n      this.y -= y;\n    }\n    return this;\n  };\n  _proto._substract = function _substract() {\n    return this._sub.apply(this, arguments);\n  };\n  _proto.sub = function sub(x, y) {\n    var nx, ny;\n    if (!isNil(x.x)) {\n      nx = this.x - x.x;\n      ny = this.y - x.y;\n    } else if (!isNil(x[0])) {\n      nx = this.x - x[0];\n      ny = this.y - x[1];\n    } else {\n      nx = this.x - x;\n      ny = this.y - y;\n    }\n    return new this.constructor(nx, ny);\n  };\n  _proto.substract = function substract() {\n    return this.sub.apply(this, arguments);\n  };\n  _proto.multi = function multi(ratio) {\n    return new this.constructor(this.x * ratio, this.y * ratio);\n  };\n  _proto._multi = function _multi(ratio) {\n    this.x *= ratio;\n    this.y *= ratio;\n    return this;\n  };\n  _proto.div = function div(n) {\n    return this.multi(1 / n);\n  };\n  _proto._div = function _div(n) {\n    return this._multi(1 / n);\n  };\n  _proto.equals = function equals(c) {\n    if (!(c instanceof this.constructor)) {\n      return false;\n    }\n    return this.x === c.x && this.y === c.y && this.z === c.z;\n  };\n  _proto._isNaN = function _isNaN() {\n    return isNaN(this.x) || isNaN(this.y) || isNumber(this.z) && isNaN(this.z);\n  };\n  _proto.isZero = function isZero() {\n    return this.x === 0 && this.y === 0;\n  };\n  _proto.toArray = function toArray() {\n    if (isNumber(this.z)) {\n      return [this.x, this.y, this.z];\n    }\n    return [this.x, this.y];\n  };\n  _proto.toFixed = function toFixed(n) {\n    return new this.constructor(this.x.toFixed(n), this.y.toFixed(n), isNumber(this.z) ? this.z.toFixed : undefined);\n  };\n  _proto.toJSON = function toJSON() {\n    var json = {\n      x: this.x,\n      y: this.y\n    };\n    if (isNumber(this.z)) {\n      json.z = this.z;\n    }\n    return json;\n  };\n  return Position;\n}();\nvar Point = function (_Position) {\n  _inheritsLoose(Point, _Position);\n  function Point() {\n    return _Position.apply(this, arguments) || this;\n  }\n  var _proto = Point.prototype;\n  _proto.closeTo = function closeTo(p, delta) {\n    if (!delta) {\n      delta = 0;\n    }\n    return this.x >= p.x - delta && this.x <= p.x + delta && this.y >= p.y - delta && this.y <= p.y + delta;\n  };\n  _proto.mag = function mag() {\n    return Math.sqrt(this.x * this.x + this.y * this.y);\n  };\n  _proto.unit = function unit() {\n    return this.copy()._unit();\n  };\n  _proto._unit = function _unit() {\n    this._div(this.mag());\n    return this;\n  };\n  _proto.perp = function perp() {\n    return this.copy()._perp();\n  };\n  _proto._perp = function _perp() {\n    var y = this.y;\n    this.y = this.x;\n    this.x = -y;\n    return this;\n  };\n  _proto.angleWith = function angleWith(b) {\n    return this.angleWithSep(b.x, b.y);\n  };\n  _proto.angleWithSep = function angleWithSep(x, y) {\n    return Math.atan2(this.x * y - this.y * x, this.x * x + this.y * y);\n  };\n  _proto._rotate = function _rotate(angle) {\n    var cos = Math.cos(angle),\n      sin = Math.sin(angle),\n      x = cos * this.x - sin * this.y,\n      y = sin * this.x + cos * this.y;\n    this.x = x;\n    this.y = y;\n    return this;\n  };\n  _proto.rotate = function rotate(a) {\n    return this.copy()._rotate(a);\n  };\n  return Point;\n}(Position);\nvar requestAnimFrame, cancelAnimFrame;\n(function () {\n  if (IS_NODE) {\n    requestAnimFrame = function requestAnimFrame(fn) {\n      return setTimeout(fn, 16);\n    };\n    cancelAnimFrame = clearTimeout;\n    return;\n  }\n  var requestFn, cancelFn;\n  var timeToCall = 1000 / 30;\n  function timeoutDefer(fn) {\n    return setTimeout(fn, timeToCall);\n  }\n  function getPrefixed(name) {\n    return window['webkit' + name] || window['moz' + name] || window['ms' + name];\n  }\n  if (typeof window != 'undefined') {\n    requestFn = window['requestAnimationFrame'] || getPrefixed('RequestAnimationFrame') || timeoutDefer;\n    cancelFn = window['cancelAnimationFrame'] || getPrefixed('CancelAnimationFrame') || getPrefixed('CancelRequestAnimationFrame') || function (id) {\n      window.clearTimeout(id);\n    };\n  } else {\n    requestFn = timeoutDefer;\n    cancelFn = clearTimeout;\n  }\n  requestAnimFrame = function requestAnimFrame(fn) {\n    return requestFn(fn);\n  };\n  cancelAnimFrame = function cancelAnimFrame(id) {\n    if (id) {\n      cancelFn(id);\n    }\n  };\n})();\nfunction isSVG(url) {\n  var prefix = 'data:image/svg+xml';\n  if (url.length > 4 && url.slice(-4) === '.svg') {\n    return 1;\n  } else if (url.slice(0, prefix.length) === prefix) {\n    return 2;\n  }\n  return 0;\n}\nfunction loadImage(img, imgDesc) {\n  if (IS_NODE && loadImage.node) {\n    loadImage.node(img, imgDesc);\n    return;\n  }\n  img.src = imgDesc[0];\n}\nvar uid = 0;\nfunction UID() {\n  return uid++;\n}\nvar GUID = UID;\nfunction parseJSON(str) {\n  if (!str || !isString(str)) {\n    return str;\n  }\n  return JSON.parse(str);\n}\nfunction pushIn(dest) {\n  for (var i = 1; i < arguments.length; i++) {\n    var src = arguments[i];\n    if (src) {\n      for (var ii = 0, ll = src.length; ii < ll; ii++) {\n        dest.push(src[ii]);\n      }\n    }\n  }\n  return dest.length;\n}\nfunction removeFromArray(obj, array) {\n  var i = array.indexOf(obj);\n  if (i > -1) {\n    array.splice(i, 1);\n  }\n}\nfunction forEachCoord(arr, fn, context) {\n  if (!Array.isArray(arr)) {\n    return context ? fn.call(context, arr) : fn(arr);\n  }\n  var result = [];\n  var p, pp;\n  for (var i = 0, len = arr.length; i < len; i++) {\n    p = arr[i];\n    if (isNil(p)) {\n      result.push(null);\n      continue;\n    }\n    if (Array.isArray(p)) {\n      result.push(forEachCoord(p, fn, context));\n    } else {\n      pp = context ? fn.call(context, p) : fn(p);\n      result.push(pp);\n    }\n  }\n  return result;\n}\nfunction getValueOrDefault(v, d) {\n  return v === undefined ? d : v;\n}\nfunction sign(x) {\n  if (Math.sign) {\n    return Math.sign(x);\n  }\n  x = +x;\n  if (x === 0 || isNaN(x)) {\n    return Number(x);\n  }\n  return x > 0 ? 1 : -1;\n}\nfunction log2(x) {\n  if (Math.log2) {\n    return Math.log2(x);\n  }\n  var v = Math.log(x) * Math.LOG2E;\n  var rounded = Math.round(v);\n  if (Math.abs(rounded - v) < 1E-14) {\n    return rounded;\n  } else {\n    return v;\n  }\n}\nfunction interpolate(a, b, t) {\n  return a * (1 - t) + b * t;\n}\nfunction wrap(n, min, max) {\n  if (n === max || n === min) {\n    return n;\n  }\n  var d = max - min;\n  var w = ((n - min) % d + d) % d + min;\n  return w;\n}\nfunction clamp(n, min, max) {\n  return Math.min(max, Math.max(min, n));\n}\nfunction isArrayHasData(obj) {\n  return Array.isArray(obj) && obj.length > 0;\n}\nvar urlPattern = /^([a-z][a-z\\d+\\-.]*:)?\\/\\//i;\nfunction isURL(url) {\n  return urlPattern.test(url);\n}\nvar cssUrlReWithQuote = /^url\\((['\"])(.+)\\1\\)$/i;\nvar cssUrlRe = /^url\\(([^'\"].*[^'\"])\\)$/i;\nfunction isCssUrl(str) {\n  if (!isString(str)) {\n    return 0;\n  }\n  if (cssUrlRe.test(str)) {\n    return 1;\n  }\n  if (cssUrlReWithQuote.test(str)) {\n    return 2;\n  }\n  return 3;\n}\nfunction extractCssUrl(str) {\n  var test = isCssUrl(str);\n  var matches;\n  if (test === 3) {\n    return str;\n  } else if (test === 1) {\n    matches = cssUrlRe.exec(str);\n    return matches[1];\n  } else if (test === 2) {\n    matches = cssUrlReWithQuote.exec(str);\n    return matches[2];\n  } else {\n    return str;\n  }\n}\nvar b64chrs = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\nfunction btoa$1(input) {\n  if (Browser$1.btoa) {\n    return window.btoa(input);\n  }\n  var str = String(input);\n  var output = '';\n  for (var block, charCode, idx = 0, map = b64chrs; str.charAt(idx | 0) || (map = '=', idx % 1); output += map.charAt(63 & block >> 8 - idx % 1 * 8)) {\n    charCode = str.charCodeAt(idx += 3 / 4);\n    if (charCode > 0xFF) {\n      throw new Error('\\'btoa\\' failed: The string to be encoded contains characters outside of the Latin1 range.');\n    }\n    block = block << 8 | charCode;\n  }\n  return output;\n}\nfunction b64toBlob(b64Data, contentType) {\n  var byteCharacters = atob(b64Data);\n  var arraybuffer = new ArrayBuffer(byteCharacters.length);\n  var view = new Uint8Array(arraybuffer);\n  for (var i = 0; i < byteCharacters.length; i++) {\n    view[i] = byteCharacters.charCodeAt(i) & 0xff;\n  }\n  var blob = new Blob([arraybuffer], {\n    type: contentType\n  });\n  return blob;\n}\nfunction computeDegree(x0, y0, x1, y1) {\n  var dx = x1 - x0;\n  var dy = y1 - y0;\n  return Math.atan2(dy, dx);\n}\nvar emptyImageUrl = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7';\nfunction equalMapView(obj1, obj2) {\n  if (!obj1 && !obj2) {\n    return true;\n  } else if (!obj1 || !obj2) {\n    return false;\n  }\n  for (var p in obj1) {\n    if (p === 'center') {\n      if (!obj2[p] || !approx(obj1[p][0], obj2[p][0]) || !approx(obj1[p][1], obj2[p][1])) {\n        return false;\n      }\n    } else if (obj1[p] !== obj2[p]) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction approx(val, expected, delta) {\n  if (delta == null) {\n    delta = 1e-6;\n  }\n  return val >= expected - delta && val <= expected + delta;\n}\nfunction flash(interval, count, cb, context) {\n  if (!interval) {\n    interval = 100;\n  }\n  if (!count) {\n    count = 4;\n  }\n  var me = this;\n  var initVisible = this.isVisible();\n  count *= 2;\n  if (this._flashTimeout) {\n    clearTimeout(this._flashTimeout);\n  }\n  function flashGeo() {\n    if (count === 0) {\n      if (initVisible) {\n        me.show();\n      } else {\n        me.hide();\n      }\n      if (cb) {\n        if (context) {\n          cb.call(context);\n        } else {\n          cb();\n        }\n      }\n      return;\n    }\n    if (count % 2 === 0) {\n      me.hide();\n    } else {\n      me.show();\n    }\n    count--;\n    me._flashTimeout = setTimeout(flashGeo, interval);\n  }\n  this._flashTimeout = setTimeout(flashGeo, interval);\n  return this;\n}\nfunction _defaults$1(obj, defaults) {\n  var keys = Object.getOwnPropertyNames(defaults);\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    var value = Object.getOwnPropertyDescriptor(defaults, key);\n    if (value && value.configurable && obj[key] === undefined) {\n      Object.defineProperty(obj, key, value);\n    }\n  }\n  return obj;\n}\nfunction getPointsResultPts(points, ptKey) {\n  if (points === void 0) {\n    points = [];\n  }\n  if (ptKey === void 0) {\n    ptKey = '_pt';\n  }\n  var resultPoints = [];\n  for (var i = 0, len = points.length; i < len; i++) {\n    var point = points[i];\n    if (!point) {\n      resultPoints.push(null);\n      continue;\n    }\n    if (!point[ptKey]) {\n      point[ptKey] = new Point(0, 0);\n    }\n    var pt = point[ptKey];\n    pt.x = 0;\n    pt.y = 0;\n    resultPoints.push(pt);\n  }\n  return resultPoints;\n}\nfunction getImageBitMap(data, cb) {\n  cb(data.data);\n}\nfunction getAbsoluteURL(url) {\n  if (url && url.indexOf('http://') === 0 || url.indexOf('https://') === 0) {\n    return url;\n  }\n  var a = document.createElement('a');\n  a.href = url;\n  url = a.href;\n  a = null;\n  return url;\n}\nvar CANVAS_SIZE_TEMP = {\n  cssWidth: '1px',\n  cssHeight: '1px',\n  width: 1,\n  height: 1\n};\nfunction calCanvasSize(size, devicePixelRatio) {\n  if (devicePixelRatio === void 0) {\n    devicePixelRatio = 1;\n  }\n  var width = size.width,\n    height = size.height;\n  CANVAS_SIZE_TEMP.cssWidth = width + 'px';\n  CANVAS_SIZE_TEMP.cssHeight = height + 'px';\n  CANVAS_SIZE_TEMP.width = Math.round(width * devicePixelRatio);\n  CANVAS_SIZE_TEMP.height = Math.round(height * devicePixelRatio);\n  return CANVAS_SIZE_TEMP;\n}\nvar canvas;\nvar OPTIONS = {\n  width: 100,\n  height: 10\n};\nfunction getCanvas() {\n  if (!canvas) {\n    var width = OPTIONS.width,\n      height = OPTIONS.height;\n    if (OffscreenCanvas) {\n      canvas = new OffscreenCanvas(width, height);\n    } else {\n      canvas = document.createElement('canvas');\n      canvas.width = width;\n      canvas.height = height;\n    }\n  }\n  return canvas;\n}\nvar ColorIn = function () {\n  function ColorIn(colors, options) {\n    if (options === void 0) {\n      options = {};\n    }\n    if (!Array.isArray(colors)) {\n      console.error('colors is not array');\n      return;\n    }\n    if (colors.length < 2) {\n      console.error('colors.length should >1');\n      return;\n    }\n    this.colors = colors;\n    var min = Infinity,\n      max = -Infinity;\n    for (var i = 0, len = colors.length; i < len; i++) {\n      var value = colors[i][0];\n      min = Math.min(value, min);\n      max = Math.max(value, max);\n    }\n    this.min = min;\n    this.max = max;\n    this.valueOffset = this.max - this.min;\n    this.options = Object.assign({}, OPTIONS, options);\n    this._initImgData();\n  }\n  var _proto = ColorIn.prototype;\n  _proto.getImageData = function getImageData() {\n    return this.imgData;\n  };\n  _proto._initImgData = function _initImgData() {\n    var canvas = getCanvas();\n    var _this$options = this.options,\n      width = _this$options.width,\n      height = _this$options.height;\n    canvas.width = width;\n    canvas.height = height;\n    var ctx = canvas.getContext('2d');\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    var gradient = ctx.createLinearGradient(0, 0, canvas.width, 0);\n    var colors = this.colors,\n      valueOffset = this.valueOffset;\n    for (var i = 0, len = colors.length; i < len; i++) {\n      var _colors$i = colors[i],\n        stop = _colors$i[0],\n        color = _colors$i[1];\n      var s = (stop - this.min) / valueOffset;\n      gradient.addColorStop(s, color);\n    }\n    ctx.fillStyle = gradient;\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n    this.imgData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n  };\n  _proto.getColor = function getColor(stop) {\n    stop = Math.max(this.min, stop);\n    stop = Math.min(stop, this.max);\n    var s = (stop - this.min) / this.valueOffset;\n    var x = Math.round(s * this.imgData.width);\n    x = Math.min(x, this.imgData.width - 1);\n    var idx = x * 4;\n    var r = this.imgData.data[idx];\n    var g = this.imgData.data[idx + 1];\n    var b = this.imgData.data[idx + 2];\n    var a = this.imgData.data[idx + 3];\n    return [r, g, b, a];\n  };\n  return ColorIn;\n}();\nvar isMapSupported = typeof Map === 'function';\nvar colorInCache;\nif (isMapSupported) {\n  colorInCache = new Map();\n}\nfunction createFunction(parameters, defaultType) {\n  var fun;\n  var isFeatureConstant, isZoomConstant;\n  if (!isFunctionDefinition(parameters)) {\n    fun = function fun() {\n      return parameters;\n    };\n    isFeatureConstant = true;\n    isZoomConstant = true;\n  } else {\n    var zoomAndFeatureDependent = parameters.stops && typeof parameters.stops[0][0] === 'object';\n    var featureDependent = zoomAndFeatureDependent || parameters.property !== undefined;\n    var zoomDependent = zoomAndFeatureDependent || !featureDependent;\n    var type = parameters.type || defaultType || 'exponential';\n    var innerFun;\n    if (type === 'exponential') {\n      innerFun = evaluateExponentialFunction;\n    } else if (type === 'interval') {\n      innerFun = evaluateIntervalFunction;\n    } else if (type === 'categorical') {\n      innerFun = evaluateCategoricalFunction;\n    } else if (type === 'identity') {\n      innerFun = evaluateIdentityFunction;\n    } else if (type === 'color-interpolate') {\n      innerFun = evaluateColorInterpolateFunction;\n    } else {\n      throw new Error('Unknown function type \"' + type + '\"');\n    }\n    if (zoomAndFeatureDependent) {\n      var featureFunctions = {};\n      var featureFunctionStops = [];\n      for (var s = 0; s < parameters.stops.length; s++) {\n        var stop = parameters.stops[s];\n        if (featureFunctions[stop[0].zoom] === undefined) {\n          featureFunctions[stop[0].zoom] = {\n            zoom: stop[0].zoom,\n            type: parameters.type,\n            property: parameters.property,\n            default: parameters.default,\n            stops: []\n          };\n        }\n        featureFunctions[stop[0].zoom].stops.push([stop[0].value, stop[1]]);\n      }\n      for (var z in featureFunctions) {\n        featureFunctionStops.push([featureFunctions[z].zoom, createFunction(featureFunctions[z])]);\n      }\n      fun = function fun(zoom, feature) {\n        var value = evaluateExponentialFunction({\n          stops: featureFunctionStops,\n          base: parameters.base\n        }, zoom)(zoom, feature);\n        return typeof value === 'function' ? value(zoom, feature) : value;\n      };\n      isFeatureConstant = false;\n      isZoomConstant = false;\n    } else if (zoomDependent) {\n      fun = function fun(zoom) {\n        var value = innerFun(parameters, zoom);\n        return typeof value === 'function' ? value(zoom) : value;\n      };\n      isFeatureConstant = true;\n      isZoomConstant = false;\n    } else {\n      fun = function fun(zoom, feature) {\n        var value = innerFun(parameters, feature ? feature[parameters.property] : null);\n        return typeof value === 'function' ? value(zoom, feature) : value;\n      };\n      isFeatureConstant = false;\n      isZoomConstant = true;\n    }\n  }\n  fun.isZoomConstant = isZoomConstant;\n  fun.isFeatureConstant = isFeatureConstant;\n  return fun;\n}\nfunction coalesce(a, b, c) {\n  if (a !== undefined) return a;\n  if (b !== undefined) return b;\n  if (c !== undefined) return c;\n  return null;\n}\nfunction evaluateCategoricalFunction(parameters, input) {\n  for (var i = 0; i < parameters.stops.length; i++) {\n    if (input === parameters.stops[i][0]) {\n      return parameters.stops[i][1];\n    }\n  }\n  return parameters.default;\n}\nfunction evaluateIntervalFunction(parameters, input) {\n  for (var i = 0; i < parameters.stops.length; i++) {\n    if (input < parameters.stops[i][0]) break;\n  }\n  return parameters.stops[Math.max(i - 1, 0)][1];\n}\nfunction evaluateExponentialFunction(parameters, input) {\n  var base = parameters.base !== undefined ? parameters.base : 1;\n  var i = 0;\n  while (true) {\n    if (i >= parameters.stops.length) break;else if (input <= parameters.stops[i][0]) break;else i++;\n  }\n  if (i === 0) {\n    return parameters.stops[i][1];\n  } else if (i === parameters.stops.length) {\n    return parameters.stops[i - 1][1];\n  } else {\n    return interpolate$1(input, base, parameters.stops[i - 1][0], parameters.stops[i][0], parameters.stops[i - 1][1], parameters.stops[i][1]);\n  }\n}\nvar COLORIN_OPTIONS = {\n  width: 100,\n  height: 1\n};\nfunction evaluateColorInterpolateFunction(parameters, input) {\n  var stops = parameters.stops;\n  if (stops && stops.length > 1) {\n    var colorIn;\n    if (colorInCache) {\n      var key = JSON.stringify(stops);\n      if (!colorInCache.has(key)) {\n        var _colorIn = new ColorIn(stops, COLORIN_OPTIONS);\n        colorInCache.set(key, _colorIn);\n      }\n      colorIn = colorInCache.get(key);\n    } else {\n      colorIn = new ColorIn(stops, COLORIN_OPTIONS);\n    }\n    var _colorIn$getColor = colorIn.getColor(input),\n      r = _colorIn$getColor[0],\n      g = _colorIn$getColor[1],\n      b = _colorIn$getColor[2],\n      a = _colorIn$getColor[3];\n    return [r / 255, g / 255, b / 255, a / 255];\n  } else if (stops && stops.length === 1) {\n    return stops[0][1];\n  }\n  return null;\n}\nfunction evaluateIdentityFunction(parameters, input) {\n  return coalesce(input, parameters.default);\n}\nfunction interpolate$1(input, base, inputLower, inputUpper, outputLower, outputUpper) {\n  if (typeof outputLower === 'function') {\n    return function () {\n      var evaluatedLower = outputLower.apply(undefined, arguments);\n      var evaluatedUpper = outputUpper.apply(undefined, arguments);\n      return interpolate$1(input, base, inputLower, inputUpper, evaluatedLower, evaluatedUpper);\n    };\n  } else if (outputLower.length) {\n    return interpolateArray(input, base, inputLower, inputUpper, outputLower, outputUpper);\n  } else {\n    return interpolateNumber(input, base, inputLower, inputUpper, outputLower, outputUpper);\n  }\n}\nfunction interpolateNumber(input, base, inputLower, inputUpper, outputLower, outputUpper) {\n  var difference = inputUpper - inputLower;\n  var progress = input - inputLower;\n  var ratio;\n  if (base === 1) {\n    ratio = progress / difference;\n  } else {\n    ratio = (Math.pow(base, progress) - 1) / (Math.pow(base, difference) - 1);\n  }\n  return outputLower * (1 - ratio) + outputUpper * ratio;\n}\nfunction interpolateArray(input, base, inputLower, inputUpper, outputLower, outputUpper) {\n  var output = [];\n  for (var i = 0; i < outputLower.length; i++) {\n    output[i] = interpolateNumber(input, base, inputLower, inputUpper, outputLower[i], outputUpper[i]);\n  }\n  return output;\n}\nfunction isFunctionDefinition(obj) {\n  return obj && typeof obj === 'object' && (obj.stops || obj.property && obj.type === 'identity');\n}\nfunction hasFunctionDefinition(obj) {\n  for (var p in obj) {\n    if (isFunctionDefinition(obj[p])) {\n      return true;\n    }\n  }\n  return false;\n}\nfunction interpolated(parameters) {\n  return createFunction1(parameters, 'exponential');\n}\nfunction piecewiseConstant(parameters) {\n  return createFunction1(parameters, 'interval');\n}\nfunction loadFunctionTypes(obj, argFn) {\n  if (!obj) {\n    return null;\n  }\n  var hit = false;\n  if (Array.isArray(obj)) {\n    var multResult = [],\n      loaded;\n    for (var i = 0; i < obj.length; i++) {\n      loaded = loadFunctionTypes(obj[i], argFn);\n      if (!loaded) {\n        multResult.push(obj[i]);\n      } else {\n        multResult.push(loaded);\n        hit = true;\n      }\n    }\n    return hit ? multResult : obj;\n  }\n  var result = {\n      '__fn_types_loaded': true\n    },\n    props = [],\n    p;\n  for (p in obj) {\n    if (obj.hasOwnProperty(p)) {\n      props.push(p);\n    }\n  }\n  var buildFn = function buildFn(p) {\n    Object.defineProperty(result, p, {\n      get: function get() {\n        if (!this['__fn_' + p]) {\n          this['__fn_' + p] = interpolated(this['_' + p]);\n        }\n        return this['__fn_' + p].apply(this, argFn());\n      },\n      set: function set(v) {\n        this['_' + p] = v;\n      },\n      configurable: true,\n      enumerable: true\n    });\n  };\n  for (var _i = 0, len = props.length; _i < len; _i++) {\n    p = props[_i];\n    if (isFunctionDefinition(obj[p])) {\n      hit = true;\n      result['_' + p] = obj[p];\n      buildFn(p);\n    } else {\n      result[p] = obj[p];\n    }\n  }\n  return hit ? result : obj;\n}\nfunction getFunctionTypeResources(t) {\n  if (!t || !t.stops) {\n    return [];\n  }\n  var res = [];\n  for (var i = 0, l = t.stops.length; i < l; i++) {\n    res.push(t.stops[i][1]);\n  }\n  return res;\n}\nfunction createFunction1(parameters, defaultType) {\n  if (!isFunctionDefinition(parameters)) {\n    return function () {\n      return parameters;\n    };\n  }\n  parameters = JSON.parse(JSON.stringify(parameters));\n  var isZoomConstant = true;\n  var isFeatureConstant = true;\n  var stops = parameters.stops;\n  if (stops) {\n    for (var i = 0; i < stops.length; i++) {\n      if (isFunctionDefinition(stops[i][1])) {\n        var _fn = createFunction1(stops[i][1], defaultType);\n        isZoomConstant = isZoomConstant && _fn.isZoomConstant;\n        isFeatureConstant = isFeatureConstant && _fn.isFeatureConstant;\n        stops[i] = [stops[i][0], _fn];\n      }\n    }\n  }\n  var fn = createFunction(parameters, defaultType);\n  fn.isZoomConstant = isZoomConstant && fn.isZoomConstant;\n  fn.isFeatureConstant = isFeatureConstant && fn.isFeatureConstant;\n  return fn;\n}\nvar types = ['Unknown', 'Point', 'LineString', 'Polygon', 'MultiPoint', 'MultiLineString', 'MultiPolygon', 'GeometryCollection'];\nfunction isObject$1(obj) {\n  return typeof obj === 'object' && !!obj;\n}\nfunction createFilter(filter) {\n  return new Function('f', \"var p = (f && f.properties || {}); return \" + compile(filter));\n}\nfunction isFeatureFilter(filter) {\n  if (filter === true || filter === false) {\n    return true;\n  }\n  if (!Array.isArray(filter) || filter.length === 0) {\n    return false;\n  }\n  switch (filter[0]) {\n    case 'has':\n    case '!has':\n      return filter.length === 2 && (typeof filter[1] === 'string' || filter[1].property && filter[1].op);\n    case 'in':\n    case '!in':\n      return filter.length >= 2 && (typeof filter[1] === 'string' || filter[1].property && filter[1].op);\n    case '==':\n    case '!=':\n    case '>':\n    case '>=':\n    case '<':\n    case '<=':\n      return filter.length === 3 && (typeof filter[1] === 'string' || filter[1].property && filter[1].op);\n    case 'none':\n    case 'any':\n    case 'all':\n      for (var _iterator = filter.slice(1), _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n        var _ref;\n        if (_isArray) {\n          if (_i >= _iterator.length) break;\n          _ref = _iterator[_i++];\n        } else {\n          _i = _iterator.next();\n          if (_i.done) break;\n          _ref = _i.value;\n        }\n        var f = _ref;\n        if (!isFeatureFilter(f) && typeof f !== 'boolean') {\n          return false;\n        }\n      }\n      return true;\n    case 'contains':\n      return true;\n    default:\n      return false;\n  }\n}\nfunction compile(filter) {\n  if (!filter) return 'true';\n  var op = filter[0];\n  if (filter.length <= 1) return op === 'any' ? 'false' : 'true';\n  var str = op === '==' ? compileComparisonOp(filter[1], filter[2], '===', false) : op === '!=' ? compileComparisonOp(filter[1], filter[2], '!==', false) : op === '<' || op === '>' || op === '<=' || op === '>=' ? compileComparisonOp(filter[1], filter[2], op, true) : op === 'any' ? compileLogicalOp(filter.slice(1), '||') : op === 'all' ? compileLogicalOp(filter.slice(1), '&&') : op === 'none' ? compileNegation(compileLogicalOp(filter.slice(1), '||')) : op === 'in' ? compileInOp(filter[1], filter.slice(2)) : op === '!in' ? compileNegation(compileInOp(filter[1], filter.slice(2))) : op === 'has' ? compileHasOp(filter[1]) : op === '!has' ? compileNegation(compileHasOp(filter[1])) : op === 'contains' ? compileContains(filter[1], filter[2], filter[3]) : 'true';\n  return \"(\" + str + \")\";\n}\nfunction compileFunction(propertyObj, value, op, checkType) {\n  var property = propertyObj.property,\n    funName = propertyObj.op;\n  var left = compilePropertyReference(property);\n  if (funName === 'length') {\n    left = \"((\" + left + \"+='').length)\";\n  } else {\n    console.error(\"not support \" + funName + \" op\");\n    return 'false';\n  }\n  return getComparisonCode(left, property, value, op, checkType);\n}\nfunction compileContains(property, str, index) {\n  var prop = compilePropertyReference(property);\n  if (index !== undefined) {\n    return \"(\" + prop + \" + '').indexOf(\\\"\" + str + \"\\\") === \" + index;\n  } else {\n    return \"(\" + prop + \" + '').indexOf(\\\"\" + str + \"\\\") >= 0\";\n  }\n}\nfunction compilePropertyReference(property) {\n  return property[0] === '$' ? 'f.' + property.substring(1) : 'p[' + JSON.stringify(property) + ']';\n}\nfunction compileComparisonOp(property, value, op, checkType) {\n  if (isObject$1(property) && property.op) {\n    return compileFunction(property, value, op, checkType);\n  }\n  var left = compilePropertyReference(property);\n  return getComparisonCode(left, property, value, op, checkType);\n}\nfunction getComparisonCode(left, property, value, op, checkType) {\n  var right = property === '$type' ? types.indexOf(value) : JSON.stringify(value);\n  return (checkType ? \"typeof \" + left + \"=== typeof \" + right + \"&&\" : '') + left + op + right;\n}\nfunction compileLogicalOp(expressions, op) {\n  return expressions.map(compile).join(op);\n}\nfunction compileInOp(property, values) {\n  if (property === '$type') values = values.map(function (value) {\n    return types.indexOf(value);\n  });\n  var left = JSON.stringify(values.sort(compare));\n  var right = compilePropertyReference(property);\n  if (values.length <= 200) return left + \".indexOf(\" + right + \") !== -1\";\n  return \"function(v, a, i, j) {\\n        while (i <= j) { var m = (i + j) >> 1;\\n            if (a[m] === v) return true; if (a[m] > v) j = m - 1; else i = m + 1;\\n        }\\n    return false; }(\" + right + \", \" + left + \",0,\" + (values.length - 1) + \")\";\n}\nfunction compileHasOp(property) {\n  return property === '$id' ? '\"id\" in f' : JSON.stringify(property) + \" in p\";\n}\nfunction compileNegation(expression) {\n  return \"!(\" + expression + \")\";\n}\nfunction compare(a, b) {\n  return a < b ? -1 : a > b ? 1 : 0;\n}\nfunction getFilterFeature(geometry) {\n  var json = geometry._toJSON(),\n    g = json['feature'];\n  g['type'] = types.indexOf(g['geometry']['type']);\n  g['subType'] = json['subType'];\n  return g;\n}\nfunction compileStyle(styles) {\n  if (!Array.isArray(styles)) {\n    return compileStyle([styles]);\n  }\n  var compiled = [];\n  for (var i = 0; i < styles.length; i++) {\n    var filter = void 0;\n    if (styles[i]['filter'] === true) {\n      filter = function filter() {\n        return true;\n      };\n    } else {\n      filter = createFilter(styles[i]['filter']);\n    }\n    compiled.push(extend$1({}, styles[i], {\n      filter: filter\n    }));\n  }\n  return compiled;\n}\nfunction extend$1(dest) {\n  for (var i = 1; i < arguments.length; i++) {\n    var src = arguments[i];\n    for (var k in src) {\n      dest[k] = src[k];\n    }\n  }\n  return dest;\n}\nvar arr = [],\n  prop = {};\nfunction loadGeoSymbol(symbol, geo) {\n  return loadFunctionTypes(symbol, function () {\n    var map = geo.getMap();\n    return set$1(arr, map ? map.getZoom() : 12, extend({}, geo.getProperties(), setProp(prop, map && map.getBearing() || 0, map && map.getPitch() || 0, map ? map.getZoom() : 10)));\n  });\n}\nfunction set$1(arr, a0, a1) {\n  arr[0] = a0;\n  arr[1] = a1;\n  return arr;\n}\nfunction setProp(prop, b, p, z) {\n  prop['{bearing}'] = b;\n  prop['{pitch}'] = p;\n  prop['{zoom}'] = z;\n  return prop;\n}\nvar index = /*#__PURE__*/Object.freeze({\n  loadGeoSymbol: loadGeoSymbol,\n  createFilter: createFilter,\n  isFeatureFilter: isFeatureFilter,\n  getFilterFeature: getFilterFeature,\n  compileStyle: compileStyle,\n  isFunctionDefinition: isFunctionDefinition,\n  hasFunctionDefinition: hasFunctionDefinition,\n  interpolated: interpolated,\n  piecewiseConstant: piecewiseConstant,\n  loadFunctionTypes: loadFunctionTypes,\n  getFunctionTypeResources: getFunctionTypeResources\n});\nfunction translateToSVGStyles(s) {\n  var result = {\n    'stroke': {\n      'stroke': s['markerLineColor'],\n      'stroke-width': s['markerLineWidth'],\n      'stroke-opacity': s['markerLineOpacity'],\n      'stroke-dasharray': null,\n      'stroke-linecap': 'butt',\n      'stroke-linejoin': 'round'\n    },\n    'fill': {\n      'fill': s['markerFill'],\n      'fill-opacity': s['markerFillOpacity']\n    }\n  };\n  if (result['stroke']['stroke-width'] === 0) {\n    result['stroke']['stroke-opacity'] = 0;\n  }\n  return result;\n}\nfunction getMarkerPathBase64(symbol, width, height) {\n  if (!symbol['markerPath']) {\n    return null;\n  }\n  var op = 1;\n  var styles = translateToSVGStyles(symbol);\n  if (isNumber(symbol['markerOpacity'])) {\n    op = symbol['markerOpacity'];\n  }\n  if (isNumber(symbol['opacity'])) {\n    op *= symbol['opacity'];\n  }\n  var svgStyles = {};\n  if (styles) {\n    for (var p in styles['stroke']) {\n      if (styles['stroke'].hasOwnProperty(p)) {\n        if (!isNil(styles['stroke'][p])) {\n          svgStyles[p] = styles['stroke'][p];\n        }\n      }\n    }\n    for (var _p in styles['fill']) {\n      if (styles['fill'].hasOwnProperty(_p)) {\n        if (!isNil(styles['fill'][_p])) {\n          svgStyles[_p] = styles['fill'][_p];\n        }\n      }\n    }\n  }\n  var pathes = Array.isArray(symbol['markerPath']) ? symbol['markerPath'] : [symbol['markerPath']];\n  var path;\n  var pathesToRender = [];\n  for (var i = 0; i < pathes.length; i++) {\n    path = isString(pathes[i]) ? {\n      'path': pathes[i]\n    } : pathes[i];\n    path = extend({}, path, svgStyles);\n    path['d'] = path['path'];\n    delete path['path'];\n    pathesToRender.push(path);\n  }\n  var svg = ['<svg version=\"1.1\"', 'xmlns=\"http://www.w3.org/2000/svg\"'];\n  if (op < 1) {\n    svg.push('opacity=\"' + op + '\"');\n  }\n  if (symbol['markerPathWidth'] && symbol['markerPathHeight']) {\n    svg.push('viewBox=\"0 0 ' + symbol['markerPathWidth'] + ' ' + symbol['markerPathHeight'] + '\"');\n  }\n  svg.push('preserveAspectRatio=\"none\"');\n  if (width) {\n    svg.push('width=\"' + width + '\"');\n  }\n  if (height) {\n    svg.push('height=\"' + height + '\"');\n  }\n  svg.push('><defs></defs>');\n  for (var _i = 0; _i < pathesToRender.length; _i++) {\n    var strPath = '<path ';\n    for (var _p2 in pathesToRender[_i]) {\n      if (pathesToRender[_i].hasOwnProperty(_p2)) {\n        strPath += ' ' + _p2 + '=\"' + pathesToRender[_i][_p2] + '\"';\n      }\n    }\n    strPath += '></path>';\n    svg.push(strPath);\n  }\n  svg.push('</svg>');\n  var b64 = 'data:image/svg+xml;base64,' + btoa$1(svg.join(' '));\n  return b64;\n}\nfunction getExternalResources(symbol, toAbsolute) {\n  if (!symbol) {\n    return [];\n  }\n  var symbols = symbol;\n  if (!Array.isArray(symbol)) {\n    symbols = [symbol];\n  }\n  var resources = [];\n  var props = RESOURCE_PROPERTIES;\n  var res, resSizeProp;\n  var w, h;\n  for (var i = symbols.length - 1; i >= 0; i--) {\n    symbol = symbols[i];\n    if (!symbol) {\n      continue;\n    }\n    if (toAbsolute) {\n      symbol = convertResourceUrl(symbol);\n    }\n    for (var ii = 0; ii < props.length; ii++) {\n      res = symbol[props[ii]];\n      if (isFunctionDefinition(res)) {\n        res = getFunctionTypeResources(res);\n      }\n      if (!res) {\n        continue;\n      }\n      if (!Array.isArray(res)) {\n        res = [res];\n      }\n      for (var iii = 0; iii < res.length; iii++) {\n        if (res[iii].slice(0, 4) === 'url(') {\n          res[iii] = extractCssUrl(res[iii]);\n        }\n        resSizeProp = RESOURCE_SIZE_PROPERTIES[ii];\n        resources.push([res[iii], symbol[resSizeProp[0]], symbol[resSizeProp[1]]]);\n      }\n    }\n    if (symbol['markerType'] === 'path' && symbol['markerPath']) {\n      w = isFunctionDefinition(symbol['markerWidth']) ? 200 : symbol['markerWidth'];\n      h = isFunctionDefinition(symbol['markerHeight']) ? 200 : symbol['markerHeight'];\n      if (isFunctionDefinition(symbol['markerPath'])) {\n        res = getFunctionTypeResources(symbol['markerPath']);\n        var path = symbol['markerPath'];\n        for (var _iii = 0; _iii < res.length; _iii++) {\n          symbol['markerPath'] = res[_iii];\n          resources.push([getMarkerPathBase64(symbol), w, h]);\n        }\n        symbol['markerPath'] = path;\n      } else {\n        resources.push([getMarkerPathBase64(symbol), w, h]);\n      }\n    }\n  }\n  return resources;\n}\nfunction convertResourceUrl(symbol) {\n  if (!symbol) {\n    return null;\n  }\n  var s = symbol;\n  if (IS_NODE) {\n    return s;\n  }\n  var props = RESOURCE_PROPERTIES;\n  var res;\n  for (var ii = 0, len = props.length; ii < len; ii++) {\n    res = s[props[ii]];\n    if (!res) {\n      continue;\n    }\n    s[props[ii]] = _convertUrl(res);\n  }\n  return s;\n}\nfunction _convertUrl(res) {\n  if (isFunctionDefinition(res)) {\n    var stops = res.stops;\n    for (var i = 0; i < stops.length; i++) {\n      stops[i][1] = _convertUrl(stops[i][1]);\n    }\n    return res;\n  }\n  if (res.slice(0, 4) === 'url(') {\n    res = extractCssUrl(res);\n  }\n  return res;\n}\nvar Size = function () {\n  function Size(width, height) {\n    if (isNumber(width) && isNumber(height)) {\n      this.width = width;\n      this.height = height;\n    } else if (isNumber(width['width'])) {\n      this.width = width.width;\n      this.height = width.height;\n    } else if (Array.isArray(width)) {\n      this.width = width[0];\n      this.height = width[1];\n    }\n  }\n  var _proto = Size.prototype;\n  _proto.copy = function copy() {\n    return new Size(this['width'], this['height']);\n  };\n  _proto.add = function add(x, y) {\n    var w, h;\n    if (x instanceof Size) {\n      w = this.width + x.width;\n      h = this.height + x.height;\n    } else {\n      w = this.width + x;\n      h = this.height + y;\n    }\n    return new Size(w, h);\n  };\n  _proto.equals = function equals(size) {\n    return this['width'] === size['width'] && this['height'] === size['height'];\n  };\n  _proto.multi = function multi(ratio) {\n    return new Size(this['width'] * ratio, this['height'] * ratio);\n  };\n  _proto._multi = function _multi(ratio) {\n    this['width'] *= ratio;\n    this['height'] *= ratio;\n    return this;\n  };\n  _proto._round = function _round() {\n    this['width'] = Math.round(this['width']);\n    this['height'] = Math.round(this['height']);\n    return this;\n  };\n  _proto.toPoint = function toPoint() {\n    return new Point(this['width'], this['height']);\n  };\n  _proto.toArray = function toArray() {\n    return [this['width'], this['height']];\n  };\n  _proto.toJSON = function toJSON() {\n    return {\n      'width': this['width'],\n      'height': this['height']\n    };\n  };\n  return Size;\n}();\nfunction trim(str) {\n  return str.trim ? str.trim() : str.replace(/^\\s+|\\s+$/g, '');\n}\nvar specialPattern = /[\\b\\t\\r\\v\\f]/igm;\nfunction escapeSpecialChars(str) {\n  if (!isString(str)) {\n    return str;\n  }\n  return str.replace(specialPattern, '');\n}\nfunction splitWords(chr) {\n  return trim(chr).split(/\\s+/);\n}\nvar rulerCtx = typeof document !== 'undefined' ? document.createElement('canvas').getContext('2d') : null;\nfunction stringWidth(text, font) {\n  if (stringWidth.node) {\n    return stringWidth.node(text, font);\n  }\n  rulerCtx.font = font;\n  return rulerCtx.measureText(text).width;\n}\nfunction stringLength(text, font, size) {\n  var w = stringWidth(text, font);\n  return new Size(w, size || DEFAULT_TEXT_SIZE);\n}\nfunction splitContent(content, font, wrapWidth, textWidth) {\n  if (!content || content.length === 0) {\n    return [{\n      'text': '',\n      'width': 0\n    }];\n  }\n  var width = isNil(textWidth) ? stringWidth(content, font) : textWidth;\n  var chrWidth = width / content.length,\n    minChrCount = Math.floor(wrapWidth / chrWidth / 2);\n  if (chrWidth >= wrapWidth || minChrCount <= 0) {\n    return [{\n      'text': '',\n      'width': wrapWidth\n    }];\n  }\n  if (width <= wrapWidth) return [{\n    'text': content,\n    'width': width\n  }];\n  var result = [];\n  var testStr = content.substring(0, minChrCount),\n    prew = chrWidth * minChrCount;\n  for (var i = minChrCount, l = content.length; i < l; i++) {\n    var chr = content[i];\n    var w = stringWidth(testStr + chr);\n    if (w >= wrapWidth) {\n      result.push({\n        'text': testStr,\n        'width': prew\n      });\n      testStr = content.substring(i, minChrCount + i);\n      i += minChrCount - 1;\n      prew = chrWidth * minChrCount;\n    } else {\n      testStr += chr;\n      prew = w;\n    }\n    if (i >= l - 1) {\n      prew = stringWidth(testStr);\n      result.push({\n        'text': testStr,\n        'width': prew\n      });\n    }\n  }\n  return result;\n}\nvar CONTENT_EXPRE = /\\{([\\w_]+)\\}/g;\nfunction replaceVariable(str, props) {\n  if (!isString(str)) {\n    return str;\n  }\n  return str.replace(CONTENT_EXPRE, function (str, key) {\n    if (!props) {\n      return '';\n    }\n    var value = props[key];\n    if (isNil(value)) {\n      return '';\n    } else if (Array.isArray(value)) {\n      return value.join();\n    }\n    return value;\n  });\n}\nfunction describeText(textContent, symbol) {\n  if (isNumber(textContent)) {\n    textContent += '';\n  }\n  textContent = textContent || '';\n  var maxHeight = symbol['textMaxHeight'] || 0;\n  var textDesc = splitTextToRow(textContent, symbol);\n  if (maxHeight && maxHeight < textDesc.size.height) {\n    textDesc.size.height = maxHeight;\n  }\n  return textDesc;\n}\nfunction getAlignPoint(size, horizontalAlignment, verticalAlignment) {\n  var width = size['width'],\n    height = size['height'];\n  var alignW, alignH;\n  if (horizontalAlignment === 'left') {\n    alignW = -width;\n  } else if (horizontalAlignment === 'right') {\n    alignW = 0;\n  } else {\n    alignW = -width / 2;\n  }\n  if (verticalAlignment === 'top') {\n    alignH = -height;\n  } else if (verticalAlignment === 'bottom') {\n    alignH = 0;\n  } else {\n    alignH = -height / 2;\n  }\n  return new Point(alignW, alignH);\n}\nvar DEFAULT_FONT = 'monospace';\nfunction getFont(style) {\n  if (style['textFont']) {\n    return style['textFont'];\n  } else {\n    return (style['textStyle'] && style['textStyle'] !== 'normal' ? style['textStyle'] + ' ' : '') + (style['textWeight'] && style['textWeight'] !== 'normal' ? style['textWeight'] + ' ' : '') + style['textSize'] + 'px ' + (!style['textFaceName'] ? DEFAULT_FONT : style['textFaceName'][0] === '\"' ? style['textFaceName'] : '\"' + style['textFaceName'] + '\"');\n  }\n}\nfunction splitTextToRow(text, style) {\n  var font = getFont(style),\n    lineSpacing = style['textLineSpacing'] || 0,\n    size = stringLength(text, font, style['textSize']),\n    textWidth = size['width'],\n    textHeight = size['height'],\n    wrapChar = style['textWrapCharacter'],\n    textRows = [];\n  var wrapWidth = style['textWrapWidth'];\n  if (!wrapWidth || wrapWidth > textWidth) {\n    wrapWidth = textWidth;\n  }\n  if (!isString(text)) {\n    text += '';\n  }\n  var actualWidth = 0;\n  if (wrapChar && text.indexOf(wrapChar) >= 0) {\n    var texts = text.split(wrapChar);\n    for (var i = 0, l = texts.length; i < l; i++) {\n      var t = texts[i];\n      var tWidth = stringWidth(t, font);\n      if (tWidth > wrapWidth) {\n        var contents = splitContent(t, font, wrapWidth, tWidth);\n        for (var ii = 0, ll = contents.length; ii < ll; ii++) {\n          var w = contents[ii].width;\n          if (w > actualWidth) {\n            actualWidth = w;\n          }\n          textRows.push({\n            'text': contents[ii].text,\n            'size': new Size(w, textHeight)\n          });\n        }\n      } else {\n        if (tWidth > actualWidth) {\n          actualWidth = tWidth;\n        }\n        textRows.push({\n          'text': t,\n          'size': new Size(tWidth, textHeight)\n        });\n      }\n    }\n  } else if (textWidth > wrapWidth) {\n    var _contents = splitContent(text, font, wrapWidth, textWidth);\n    for (var _i = 0; _i < _contents.length; _i++) {\n      var _w = _contents[_i].width;\n      if (_w > actualWidth) {\n        actualWidth = _w;\n      }\n      textRows.push({\n        'text': _contents[_i].text,\n        'size': new Size(_w, textHeight)\n      });\n    }\n  } else {\n    if (textWidth > actualWidth) {\n      actualWidth = textWidth;\n    }\n    textRows.push({\n      'text': text,\n      'size': size\n    });\n  }\n  var rowNum = textRows.length;\n  var textSize = new Size(actualWidth, textHeight * rowNum + lineSpacing * (rowNum - 1));\n  return {\n    'total': rowNum,\n    'size': textSize,\n    'rows': textRows,\n    'rawSize': size\n  };\n}\nfunction hashCode(s) {\n  var hash = 0;\n  var strlen = s && s.length || 0;\n  if (!strlen) {\n    return hash;\n  }\n  var c;\n  for (var i = 0; i < strlen; i++) {\n    c = s.charCodeAt(i);\n    hash = (hash << 5) - hash + c;\n    hash = hash & hash;\n  }\n  return hash;\n}\nvar strings = /*#__PURE__*/Object.freeze({\n  trim: trim,\n  escapeSpecialChars: escapeSpecialChars,\n  splitWords: splitWords,\n  stringWidth: stringWidth,\n  stringLength: stringLength,\n  splitContent: splitContent,\n  CONTENT_EXPRE: CONTENT_EXPRE,\n  replaceVariable: replaceVariable,\n  describeText: describeText,\n  getAlignPoint: getAlignPoint,\n  getFont: getFont,\n  splitTextToRow: splitTextToRow,\n  hashCode: hashCode\n});\nfunction isGradient(g) {\n  return g && g['colorStops'];\n}\nfunction getGradientStamp(g) {\n  var keys = [g['type']];\n  if (g['places']) {\n    keys.push(g['places'].join());\n  }\n  if (g['colorStops']) {\n    var stops = [];\n    for (var i = g['colorStops'].length - 1; i >= 0; i--) {\n      stops.push(g['colorStops'][i].join());\n    }\n    keys.push(stops.join(','));\n  }\n  return keys.join('_');\n}\nfunction getSymbolStamp(symbol, prefix) {\n  return getSymbolHash(symbol, prefix);\n}\nfunction getSymbolHash(symbol, prefix) {\n  if (!symbol) {\n    return 1;\n  }\n  var keys = [];\n  if (Array.isArray(symbol)) {\n    for (var i = 0; i < symbol.length; i++) {\n      keys.push(getSymbolHash(symbol[i], prefix));\n    }\n    return keys.sort().join(',');\n  }\n  var sortedKeys = Object.keys(symbol).sort();\n  var sortedSymbol = sortedKeys.reduce(function (accumulator, curValue) {\n    if (!prefix || curValue.indexOf(prefix) === 0) {\n      accumulator[curValue] = symbol[curValue];\n    }\n    return accumulator;\n  }, {});\n  var hash = hashCode(JSON.stringify(sortedSymbol));\n  return hash;\n}\nfunction lowerSymbolOpacity(symbol, ratio) {\n  function s(_symbol, _ratio) {\n    var op = _symbol['opacity'];\n    if (isNil(op)) {\n      _symbol['opacity'] = _ratio;\n    } else {\n      _symbol['opacity'] *= _ratio;\n    }\n  }\n  var lower;\n  if (Array.isArray(symbol)) {\n    lower = [];\n    for (var i = 0; i < symbol.length; i++) {\n      var d = extend({}, symbol[i]);\n      s(d, ratio);\n      lower.push(d);\n    }\n  } else {\n    lower = extend({}, symbol);\n    s(lower, ratio);\n  }\n  return lower;\n}\nfunction extendSymbol(symbol) {\n  var sources = Array.prototype.slice.call(arguments, 1);\n  if (!sources || !sources.length) {\n    sources = [{}];\n  }\n  if (Array.isArray(symbol)) {\n    var s, dest;\n    var result = [];\n    for (var i = 0, l = symbol.length; i < l; i++) {\n      s = symbol[i];\n      dest = {};\n      for (var ii = 0, ll = sources.length; ii < ll; ii++) {\n        if (!Array.isArray(sources[ii])) {\n          extend(dest, s, sources[ii] ? sources[ii] : {});\n        } else if (!isNil(sources[ii][i])) {\n          extend(dest, s, sources[ii][i]);\n        } else {\n          extend(dest, s ? s : {});\n        }\n      }\n      result.push(dest);\n    }\n    return result;\n  } else {\n    var args = [{}, symbol];\n    args.push.apply(args, sources);\n    return extend.apply(this, args);\n  }\n}\nfunction parseStyleRootPath(style) {\n  if (style.symbol) {\n    style = [style];\n  }\n  if (Array.isArray(style)) {\n    return style;\n  }\n  var root = style['$root'];\n  var iconset = style['$iconset'];\n  style = style.style;\n  if (root || iconset) {\n    if (root && root[root.length - 1] === '/') {\n      root = root.substring(0, root.length - 1);\n    }\n    if (iconset && iconset[iconset.length - 1] === '/') {\n      iconset = iconset.substring(0, iconset.length - 1);\n    }\n    var replacer = function replacer(match) {\n      if (match === '{$root}') {\n        return root;\n      } else if (match === '{$iconset}') {\n        return iconset;\n      }\n      return null;\n    };\n    convertStylePath(style, replacer);\n  }\n  return style;\n}\nfunction convertStylePath(styles, replacer) {\n  for (var i = 0; i < styles.length; i++) {\n    var symbol = styles[i].symbol;\n    if (symbol) {\n      parseSymbolPath(symbol, replacer);\n    }\n  }\n}\nvar URL_PATTERN = /(\\{\\$root\\}|\\{\\$iconset\\})/g;\nfunction parseSymbolPath(symbol, replacer) {\n  for (var p in symbol) {\n    if (symbol.hasOwnProperty(p) && p !== 'textName') {\n      if (isString(symbol[p]) && symbol[p].length > 2) {\n        symbol[p] = symbol[p].replace(URL_PATTERN, replacer);\n      } else if (isFunctionDefinition(symbol[p])) {\n        symbol[p] = parseStops(symbol[p], replacer);\n      } else if (isObject(symbol[p])) {\n        parseSymbolPath(symbol[p], replacer);\n      }\n    }\n  }\n}\nfunction parseStops(value, replacer) {\n  var defaultValue = value['default'];\n  if (isString(defaultValue)) {\n    value['default'] = defaultValue.replace(URL_PATTERN, replacer);\n  }\n  var stops = value.stops;\n  for (var i = 0; i < stops.length; i++) {\n    if (!Array.isArray(stops[i])) {\n      continue;\n    }\n    if (isString(stops[i][1])) {\n      stops[i][1] = stops[i][1].replace(URL_PATTERN, replacer);\n    } else if (isFunctionDefinition(stops[i][1])) {\n      stops[i][1] = parseStops(stops[i][1], replacer);\n    }\n  }\n  return value;\n}\nfunction isDashLine(symbolizers) {\n  if (symbolizers === void 0) {\n    symbolizers = [];\n  }\n  if (!Array.isArray(symbolizers)) {\n    symbolizers = [symbolizers];\n  }\n  var len = symbolizers.length;\n  for (var i = 0; i < len; i++) {\n    var symbolizer = symbolizers[i];\n    if (!symbolizer.style) {\n      continue;\n    }\n    var _symbolizer$style = symbolizer.style,\n      lineDasharray = _symbolizer$style.lineDasharray,\n      lineWidth = _symbolizer$style.lineWidth;\n    if (lineWidth && isNumber(lineWidth) && lineWidth > 0 && lineDasharray && Array.isArray(lineDasharray) && lineDasharray.length) {\n      return true;\n    }\n  }\n  return false;\n}\nvar index$1 = /*#__PURE__*/Object.freeze({\n  now: now,\n  extend: extend,\n  isNil: isNil,\n  isNumber: isNumber,\n  isInteger: isInteger,\n  isObject: isObject,\n  isString: isString,\n  isFunction: isFunction,\n  hasOwn: hasOwn,\n  join: join,\n  isEmpty: isEmpty,\n  toRadian: toRadian,\n  toDegree: toDegree,\n  IS_NODE: IS_NODE,\n  get requestAnimFrame() {\n    return requestAnimFrame;\n  },\n  get cancelAnimFrame() {\n    return cancelAnimFrame;\n  },\n  isSVG: isSVG,\n  loadImage: loadImage,\n  UID: UID,\n  GUID: GUID,\n  parseJSON: parseJSON,\n  pushIn: pushIn,\n  removeFromArray: removeFromArray,\n  forEachCoord: forEachCoord,\n  getValueOrDefault: getValueOrDefault,\n  sign: sign,\n  log2: log2,\n  interpolate: interpolate,\n  wrap: wrap,\n  clamp: clamp,\n  isArrayHasData: isArrayHasData,\n  isURL: isURL,\n  isCssUrl: isCssUrl,\n  extractCssUrl: extractCssUrl,\n  btoa: btoa$1,\n  b64toBlob: b64toBlob,\n  computeDegree: computeDegree,\n  emptyImageUrl: emptyImageUrl,\n  equalMapView: equalMapView,\n  flash: flash,\n  _defaults: _defaults$1,\n  getPointsResultPts: getPointsResultPts,\n  getImageBitMap: getImageBitMap,\n  getAbsoluteURL: getAbsoluteURL,\n  calCanvasSize: calCanvasSize,\n  translateToSVGStyles: translateToSVGStyles,\n  getMarkerPathBase64: getMarkerPathBase64,\n  getExternalResources: getExternalResources,\n  convertResourceUrl: convertResourceUrl,\n  isGradient: isGradient,\n  getGradientStamp: getGradientStamp,\n  getSymbolStamp: getSymbolStamp,\n  getSymbolHash: getSymbolHash,\n  lowerSymbolOpacity: lowerSymbolOpacity,\n  extendSymbol: extendSymbol,\n  parseStyleRootPath: parseStyleRootPath,\n  convertStylePath: convertStylePath,\n  parseSymbolPath: parseSymbolPath,\n  isDashLine: isDashLine,\n  trim: trim,\n  escapeSpecialChars: escapeSpecialChars,\n  splitWords: splitWords,\n  stringWidth: stringWidth,\n  stringLength: stringLength,\n  splitContent: splitContent,\n  CONTENT_EXPRE: CONTENT_EXPRE,\n  replaceVariable: replaceVariable,\n  describeText: describeText,\n  getAlignPoint: getAlignPoint,\n  getFont: getFont,\n  splitTextToRow: splitTextToRow,\n  hashCode: hashCode\n});\nvar first = function first(props) {\n  return props[0];\n};\nvar testProp = IS_NODE ? first : function (props) {\n  var style = document.documentElement && document.documentElement.style || {};\n  for (var i = 0; i < props.length; i++) {\n    if (props[i] in style) {\n      return props[i];\n    }\n  }\n  return false;\n};\nvar TRANSFORM = testProp(['transform', 'WebkitTransform', 'OTransform', 'MozTransform', 'msTransform']);\nvar TRANSFORMORIGIN = testProp(['transformOrigin', 'WebkitTransformOrigin', 'OTransformOrigin', 'MozTransformOrigin', 'msTransformOrigin']);\nvar TRANSITION = testProp(['transition', 'WebkitTransition', 'OTransition', 'MozTransition', 'msTransition']);\nvar CSSFILTER = testProp(['filter', 'WebkitFilter', 'OFilter', 'MozFilter', 'msFilter']);\nfunction createEl(tagName, className) {\n  var el = document.createElement(tagName);\n  if (className) {\n    setClass(el, className);\n  }\n  return el;\n}\nfunction createElOn(tagName, style, container) {\n  var el = createEl(tagName);\n  if (style) {\n    setStyle(el, style);\n  }\n  if (container) {\n    container.appendChild(el);\n  }\n  return el;\n}\nfunction removeDomNode(node) {\n  if (!node) {\n    return this;\n  }\n  if (Browser$1.ielt9 || Browser$1.ie9) {\n    var d = createEl('div');\n    d.appendChild(node);\n    d.innerHTML = '';\n    d = null;\n  } else if (node.parentNode) {\n    node.parentNode.removeChild(node);\n  }\n  return this;\n}\nfunction addDomEvent(obj, typeArr, handler, context) {\n  if (!obj || !obj.addEventListener || !typeArr || !handler) {\n    return this;\n  }\n  var eventHandler = function eventHandler(e) {\n    if (!e) {\n      e = window.event;\n    }\n    handler.call(context || obj, e);\n    return;\n  };\n  var types = typeArr.split(' ');\n  for (var i = types.length - 1; i >= 0; i--) {\n    var type = types[i];\n    if (!type) {\n      continue;\n    }\n    if (!obj['Z__' + type]) {\n      obj['Z__' + type] = [];\n    }\n    var hit = listensDomEvent(obj, type, handler);\n    if (hit >= 0) {\n      console.warn(obj, \"find '\" + type + \"' handler:\", handler, ' The old listener function will be removed');\n      removeDomEvent(obj, type, handler);\n    }\n    obj['Z__' + type].push({\n      callback: eventHandler,\n      src: handler\n    });\n    obj.addEventListener(type, eventHandler, Browser$1.supportsPassive ? {\n      capture: false,\n      passive: false\n    } : false);\n  }\n  return this;\n}\nfunction removeDomEvent(obj, typeArr, handler) {\n  function doRemove(type, callback) {\n    if (type === 'mousewheel' && Browser$1.gecko) {\n      type = 'DOMMouseScroll';\n    }\n    obj.removeEventListener(type, callback, false);\n  }\n  if (!obj || !obj.removeEventListener || !typeArr) {\n    return this;\n  }\n  var types = typeArr.split(' ');\n  for (var i = types.length - 1; i >= 0; i--) {\n    var type = types[i];\n    if (!type) {\n      continue;\n    }\n    if (!handler && obj['Z__' + type]) {\n      var handlers = obj['Z__' + type];\n      for (var j = 0, jlen = handlers.length; j < jlen; j++) {\n        doRemove(handlers[j].callback);\n      }\n      delete obj['Z__' + type];\n      return this;\n    }\n    var hit = listensDomEvent(obj, type, handler);\n    if (hit < 0) {\n      return this;\n    }\n    var hitHandler = obj['Z__' + type][hit];\n    doRemove(type, hitHandler.callback);\n    obj['Z__' + type].splice(hit, 1);\n  }\n  return this;\n}\nfunction listensDomEvent(obj, type, handler) {\n  if (!obj || !obj['Z__' + type] || !handler) {\n    return -1;\n  }\n  var handlers = obj['Z__' + type];\n  for (var i = 0, len = handlers.length; i < len; i++) {\n    if (handlers[i].src === handler) {\n      return i;\n    }\n  }\n  return -1;\n}\nfunction preventDefault(event) {\n  if (event.preventDefault) {\n    event.preventDefault();\n  } else {\n    event.returnValue = false;\n  }\n  return this;\n}\nfunction stopPropagation(e) {\n  e._cancelBubble = true;\n  if (e.stopPropagation) {\n    e.stopPropagation();\n  } else {\n    e.cancelBubble = true;\n  }\n  return this;\n}\nfunction preventSelection(dom) {\n  dom.onselectstart = function () {\n    return false;\n  };\n  dom.ondragstart = function () {\n    return false;\n  };\n  dom.setAttribute('unselectable', 'on');\n  return this;\n}\nfunction offsetDom(dom, offset) {\n  if (!dom) {\n    return null;\n  }\n  if (Browser$1.any3d) {\n    setTransform(dom, offset);\n  } else {\n    dom.style.left = offset.x + 'px';\n    dom.style.top = offset.y + 'px';\n  }\n  return offset;\n}\nfunction computeDomPosition(dom) {\n  var style = window.getComputedStyle(dom);\n  var padding = [parseInt(style['padding-left']), parseInt(style['padding-top'])];\n  var rect = dom.getBoundingClientRect();\n  var offsetWidth = dom.offsetWidth,\n    offsetHeight = dom.offsetHeight;\n  var scaleX = offsetWidth ? rect.width / offsetWidth : 1,\n    scaleY = offsetHeight ? rect.height / offsetHeight : 1;\n  dom.__position = [rect.left + padding[0], rect.top + padding[1], scaleX, scaleY];\n  return dom.__position;\n}\nfunction getEventContainerPoint(ev, dom) {\n  if (!ev) {\n    ev = window.event;\n  }\n  var domPos = dom.__position;\n  if (!domPos) {\n    domPos = computeDomPosition(dom);\n  }\n  return new Point((ev.clientX - domPos[0] - dom.clientLeft) / domPos[2], (ev.clientY - domPos[1] - dom.clientTop) / domPos[3]);\n}\nfunction endsWith(str, suffix) {\n  var l = str.length - suffix.length;\n  return l >= 0 && str.indexOf(suffix, l) === l;\n}\nfunction setStyle(dom, strCss) {\n  var cssText = dom.style.cssText;\n  if (!endsWith(cssText, ';')) {\n    cssText += ';';\n  }\n  dom.style.cssText = cssText + strCss;\n  return this;\n}\nfunction hasClass(el, name) {\n  if (el.classList !== undefined) {\n    return el.classList.contains(name);\n  }\n  var className = getClass(el);\n  return className.length > 0 && new RegExp('(^|\\\\s)' + name + '(\\\\s|$)').test(className);\n}\nfunction addClass(el, name) {\n  if (el.classList !== undefined && !hasClass(el, name)) {\n    var classes = splitWords(name);\n    for (var i = 0, len = classes.length; i < len; i++) {\n      el.classList.add(classes[i]);\n    }\n  } else {\n    var className = getClass(el);\n    setClass(el, (className ? className + ' ' : '') + name);\n  }\n  return this;\n}\nfunction setClass(el, name) {\n  if (isNil(el.className.baseVal)) {\n    el.className = name;\n  } else {\n    el.className.baseVal = name;\n  }\n  return this;\n}\nfunction getClass(el) {\n  return isNil(el.className.baseVal) ? el.className : el.className.baseVal;\n}\nfunction setOpacity(el, value) {\n  el.style.opacity = value;\n  return this;\n}\nfunction setTransform(el, offset) {\n  var pos = offset || new Point(0, 0);\n  el.style[TRANSFORM] = Browser$1.any3d ? 'translate3d(' + pos.x + 'px,' + pos.y + 'px,0px)' : 'translate(' + pos.x + 'px,' + pos.y + 'px)';\n  return this;\n}\nfunction setTransformMatrix(el, m) {\n  var text = 'matrix(' + (isString(m) ? m : m.join()) + ')';\n  if (el.style[TRANSFORM] !== text) {\n    el.style[TRANSFORM] = text;\n  }\n  return this;\n}\nfunction removeTransform(el) {\n  if (el.style[TRANSFORM]) {\n    el.style[TRANSFORM] = '';\n  }\n  return this;\n}\nfunction isHTML(str) {\n  return /<[a-z\\][\\s\\S]*>/i.test(str);\n}\nfunction measureDom(parentTag, dom) {\n  var ruler = getDomRuler(parentTag);\n  if (isString(dom)) {\n    ruler.innerHTML = dom;\n  } else {\n    ruler.appendChild(dom);\n  }\n  var result = new Size(ruler.clientWidth, ruler.clientHeight);\n  removeDomNode(ruler);\n  return result;\n}\nfunction getDomRuler(tag) {\n  var span = document.createElement(tag);\n  span.style.cssText = 'position:absolute;left:-10000px;top:-10000px;';\n  document.body.appendChild(span);\n  return span;\n}\nvar on = addDomEvent;\nvar off = removeDomEvent;\nfunction isMoveEvent(type) {\n  return type && (type === 'mousemove' || type === 'touchmove');\n}\nvar dom = /*#__PURE__*/Object.freeze({\n  TRANSFORM: TRANSFORM,\n  TRANSFORMORIGIN: TRANSFORMORIGIN,\n  TRANSITION: TRANSITION,\n  CSSFILTER: CSSFILTER,\n  createEl: createEl,\n  createElOn: createElOn,\n  removeDomNode: removeDomNode,\n  addDomEvent: addDomEvent,\n  removeDomEvent: removeDomEvent,\n  listensDomEvent: listensDomEvent,\n  preventDefault: preventDefault,\n  stopPropagation: stopPropagation,\n  preventSelection: preventSelection,\n  offsetDom: offsetDom,\n  computeDomPosition: computeDomPosition,\n  getEventContainerPoint: getEventContainerPoint,\n  setStyle: setStyle,\n  hasClass: hasClass,\n  addClass: addClass,\n  setClass: setClass,\n  getClass: getClass,\n  setOpacity: setOpacity,\n  setTransform: setTransform,\n  setTransformMatrix: setTransformMatrix,\n  removeTransform: removeTransform,\n  isHTML: isHTML,\n  measureDom: measureDom,\n  getDomRuler: getDomRuler,\n  on: on,\n  off: off,\n  isMoveEvent: isMoveEvent\n});\nvar isMapSupported$1 = typeof Map === 'function';\nvar nullOnRemove = function nullOnRemove() {};\nvar ArrayLRUCache = function () {\n  function ArrayLRUCache(max, onRemove) {\n    this.max = max;\n    this.onRemove = onRemove || nullOnRemove;\n    this.reset();\n  }\n  var _proto = ArrayLRUCache.prototype;\n  _proto.reset = function reset() {\n    for (var key in this.data) {\n      this.onRemove(this.data[key]);\n    }\n    this.data = {};\n    this.order = [];\n    return this;\n  };\n  _proto.clear = function clear() {\n    this.reset();\n    delete this.onRemove;\n  };\n  _proto.add = function add(key, data) {\n    if (this.has(key)) {\n      this.order.splice(this.order.indexOf(key), 1);\n      this.data[key] = data;\n      this.order.push(key);\n    } else {\n      this.data[key] = data;\n      this.order.push(key);\n      if (this.order.length > this.max) {\n        var removedData = this.getAndRemove(this.order[0]);\n        if (removedData) this.onRemove(removedData);\n      }\n    }\n    return this;\n  };\n  _proto.has = function has(key) {\n    return key in this.data;\n  };\n  _proto.keys = function keys() {\n    return this.order;\n  };\n  _proto.getAndRemove = function getAndRemove(key) {\n    if (!this.has(key)) {\n      return null;\n    }\n    var data = this.data[key];\n    delete this.data[key];\n    this.order.splice(this.order.indexOf(key), 1);\n    return data;\n  };\n  _proto.get = function get(key) {\n    if (!this.has(key)) {\n      return null;\n    }\n    var data = this.data[key];\n    return data;\n  };\n  _proto.remove = function remove(key) {\n    if (!this.has(key)) {\n      return this;\n    }\n    var data = this.data[key];\n    delete this.data[key];\n    this.onRemove(data);\n    this.order.splice(this.order.indexOf(key), 1);\n    return this;\n  };\n  _proto.setMaxSize = function setMaxSize(max) {\n    this.max = max;\n    while (this.order.length > this.max) {\n      var removedData = this.getAndRemove(this.order[0]);\n      if (removedData) this.onRemove(removedData);\n    }\n    return this;\n  };\n  return ArrayLRUCache;\n}();\nvar MapLRUCache;\nif (isMapSupported$1) {\n  MapLRUCache = function () {\n    function MapLRUCache(max, onRemove) {\n      this.max = max;\n      this.onRemove = onRemove || nullOnRemove;\n      this.reset();\n    }\n    var _proto2 = MapLRUCache.prototype;\n    _proto2.reset = function reset() {\n      if (this.data) {\n        var values = this.data.values();\n        for (var _iterator = values, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n          var _ref;\n          if (_isArray) {\n            if (_i >= _iterator.length) break;\n            _ref = _iterator[_i++];\n          } else {\n            _i = _iterator.next();\n            if (_i.done) break;\n            _ref = _i.value;\n          }\n          var p = _ref;\n          this.onRemove(p);\n        }\n      }\n      this.data = new Map();\n      return this;\n    };\n    _proto2.clear = function clear() {\n      this.reset();\n      delete this.onRemove;\n    };\n    _proto2.add = function add(key, data) {\n      if (!data) {\n        return this;\n      }\n      if (this.has(key)) {\n        this.data.delete(key);\n        this.data.set(key, data);\n      } else {\n        this.data.set(key, data);\n      }\n      return this;\n    };\n    _proto2.keys = function keys() {\n      var keys = new Array(this.data.size);\n      var i = 0;\n      var iterator = this.data.keys();\n      for (var _iterator2 = iterator, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {\n        var _ref2;\n        if (_isArray2) {\n          if (_i2 >= _iterator2.length) break;\n          _ref2 = _iterator2[_i2++];\n        } else {\n          _i2 = _iterator2.next();\n          if (_i2.done) break;\n          _ref2 = _i2.value;\n        }\n        var k = _ref2;\n        keys[i++] = k;\n      }\n      return keys;\n    };\n    _proto2.shrink = function shrink() {\n      var iterator = this.data.keys();\n      var item = iterator.next();\n      while (this.data.size > this.max) {\n        var removedData = this.getAndRemove(item.value);\n        if (removedData) {\n          this.onRemove(removedData);\n        }\n        item = iterator.next();\n      }\n    };\n    _proto2.has = function has(key) {\n      return this.data.has(key);\n    };\n    _proto2.getAndRemove = function getAndRemove(key) {\n      if (!this.has(key)) {\n        return null;\n      }\n      var data = this.data.get(key);\n      this.data.delete(key);\n      return data;\n    };\n    _proto2.get = function get(key) {\n      if (!this.has(key)) {\n        return null;\n      }\n      var data = this.data.get(key);\n      return data;\n    };\n    _proto2.remove = function remove(key) {\n      if (!this.has(key)) {\n        return this;\n      }\n      var data = this.data.get(key);\n      this.data.delete(key);\n      this.onRemove(data);\n      return this;\n    };\n    _proto2.setMaxSize = function setMaxSize(max) {\n      this.max = max;\n      if (this.data.size > this.max) {\n        this.shrink();\n      }\n      return this;\n    };\n    return MapLRUCache;\n  }();\n}\nvar LRUCache = isMapSupported$1 ? MapLRUCache : ArrayLRUCache;\nvar Ajax = {\n  jsonp: function jsonp(url, callback) {\n    var name = '_maptalks_jsonp_' + UID();\n    if (url.match(/\\?/)) url += '&callback=' + name;else url += '?callback=' + name;\n    var script = document.createElement('script');\n    script.type = 'text/javascript';\n    script.src = url;\n    window[name] = function (data) {\n      callback(null, data);\n      document.getElementsByTagName('head')[0].removeChild(script);\n      script = null;\n      delete window[name];\n    };\n    document.getElementsByTagName('head')[0].appendChild(script);\n    return this;\n  },\n  get: function get(url, options, cb) {\n    if (isFunction(options)) {\n      var t = cb;\n      cb = options;\n      options = t;\n    }\n    if (IS_NODE && Ajax.get.node) {\n      return Ajax.get.node(url, cb, options);\n    }\n    var client = Ajax._getClient(cb);\n    client.open('GET', url, true);\n    if (options) {\n      for (var k in options.headers) {\n        client.setRequestHeader(k, options.headers[k]);\n      }\n      client.withCredentials = options.credentials === 'include';\n      if (options['responseType']) {\n        client.responseType = options['responseType'];\n      }\n    }\n    client.send(null);\n    return client;\n  },\n  post: function post(url, options, cb) {\n    var postData;\n    if (!isString(url)) {\n      var t = cb;\n      postData = options;\n      options = url;\n      url = options.url;\n      cb = t;\n    } else {\n      if (isFunction(options)) {\n        var _t = cb;\n        cb = options;\n        options = _t;\n      }\n      options = options || {};\n      postData = options.postData;\n    }\n    if (IS_NODE && Ajax.post.node) {\n      options.url = url;\n      return Ajax.post.node(options, postData, cb);\n    }\n    var client = Ajax._getClient(cb);\n    client.open('POST', options.url, true);\n    if (!options.headers) {\n      options.headers = {};\n    }\n    if (!options.headers['Content-Type']) {\n      options.headers['Content-Type'] = 'application/x-www-form-urlencoded';\n    }\n    if ('setRequestHeader' in client) {\n      for (var p in options.headers) {\n        if (options.headers.hasOwnProperty(p)) {\n          client.setRequestHeader(p, options.headers[p]);\n        }\n      }\n    }\n    if (!isString(postData)) {\n      postData = JSON.stringify(postData);\n    }\n    client.send(postData);\n    return client;\n  },\n  _wrapCallback: function _wrapCallback(client, cb) {\n    return function () {\n      if (client.readyState === 4) {\n        if (client.status === 200) {\n          if (client.responseType === 'arraybuffer') {\n            var response = client.response;\n            if (response.byteLength === 0) {\n              cb(new Error('http status 200 returned without content.'));\n            } else {\n              cb(null, {\n                data: client.response,\n                cacheControl: client.getResponseHeader('Cache-Control'),\n                expires: client.getResponseHeader('Expires'),\n                contentType: client.getResponseHeader('Content-Type')\n              });\n            }\n          } else {\n            cb(null, client.responseText);\n          }\n        } else {\n          cb(new Error(client.statusText + ',' + client.status));\n        }\n      }\n    };\n  },\n  _getClient: function _getClient(cb) {\n    var client;\n    try {\n      client = new XMLHttpRequest();\n    } catch (e) {\n      try {\n        client = new ActiveXObject('Msxml2.XMLHTTP');\n      } catch (e) {\n        try {\n          client = new ActiveXObject('Microsoft.XMLHTTP');\n        } catch (e) {}\n      }\n    }\n    client.onreadystatechange = Ajax._wrapCallback(client, cb);\n    return client;\n  },\n  getArrayBuffer: function getArrayBuffer(url, options, cb) {\n    if (isFunction(options)) {\n      var t = cb;\n      cb = options;\n      options = t;\n    }\n    if (!options) {\n      options = {};\n    }\n    options['responseType'] = 'arraybuffer';\n    return Ajax.get(url, options, cb);\n  },\n  getImage: function getImage(img, url, options) {\n    return Ajax.getArrayBuffer(url, options, function (err, imgData) {\n      if (err) {\n        if (img.onerror) {\n          img.onerror(err);\n        }\n      } else if (imgData) {\n        var URL = window.URL || window.webkitURL;\n        var onload = img.onload;\n        img.onload = function () {\n          if (onload) {\n            onload();\n          }\n          URL.revokeObjectURL(img.src);\n        };\n        var blob = new Blob([new Uint8Array(imgData.data)], {\n          type: imgData.contentType\n        });\n        img.cacheControl = imgData.cacheControl;\n        img.expires = imgData.expires;\n        img.src = imgData.data.byteLength ? URL.createObjectURL(blob) : emptyImageUrl;\n      }\n    });\n  }\n};\nAjax.getJSON = function (url, options, cb) {\n  if (isFunction(options)) {\n    var t = cb;\n    cb = options;\n    options = t;\n  }\n  var callback = function callback(err, resp) {\n    var data = resp ? parseJSON(resp) : null;\n    cb(err, data);\n  };\n  if (options && options['jsonp']) {\n    return Ajax.jsonp(url, callback);\n  }\n  return Ajax.get(url, options, callback);\n};\nvar minx = Infinity,\n  miny = Infinity,\n  maxx = -Infinity,\n  maxy = -Infinity;\nfunction getDefaultBBOX() {\n  return [minx, miny, maxx, maxy];\n}\nvar BBOX_TEMP = getDefaultBBOX();\nfunction resetBBOX(bbox) {\n  bbox[0] = minx;\n  bbox[1] = miny;\n  bbox[2] = maxx;\n  bbox[3] = maxy;\n}\nfunction pointsBBOX(points, out) {\n  if (!points) {\n    return;\n  }\n  if (Array.isArray(points[0])) {\n    for (var i = 0, len = points.length; i < len; i++) {\n      pointsBBOX(points[i], out);\n    }\n  } else if (Array.isArray(points)) {\n    for (var _i = 0, _len = points.length; _i < _len; _i++) {\n      var _points$_i = points[_i],\n        x = _points$_i.x,\n        y = _points$_i.y;\n      out[0] = Math.min(x, out[0]);\n      out[1] = Math.min(y, out[1]);\n      out[2] = Math.max(x, out[2]);\n      out[3] = Math.max(y, out[3]);\n    }\n  } else {\n    var x = points.x,\n      y = points.y;\n    out[0] = Math.min(x, out[0]);\n    out[1] = Math.min(y, out[1]);\n    out[2] = Math.max(x, out[2]);\n    out[3] = Math.max(y, out[3]);\n  }\n}\nfunction setBBOX(bbox, x1, y1, x2, y2) {\n  if (x1 !== 0 && !x1) {\n    return;\n  }\n  if (Array.isArray(x1)) {\n    y1 = x1[1];\n    x2 = x1[2];\n    y2 = x1[3];\n    x1 = x1[0];\n  }\n  bbox[0] = Math.min(x1, bbox[0]);\n  bbox[1] = Math.min(y1, bbox[1]);\n  bbox[2] = Math.max(x2, bbox[2]);\n  bbox[3] = Math.max(y2, bbox[3]);\n}\nfunction validateBBOX(bbox) {\n  return bbox && bbox[0] !== Infinity && bbox[0] !== undefined;\n}\nfunction bufferBBOX(bbox, bufferSize) {\n  if (bufferSize === void 0) {\n    bufferSize = 0;\n  }\n  bbox[0] -= bufferSize;\n  bbox[1] -= bufferSize;\n  bbox[2] += bufferSize;\n  bbox[3] += bufferSize;\n}\nvar DEFAULT_STROKE_COLOR = '#000';\nvar DEFAULT_FILL_COLOR = 'rgba(255,255,255,0)';\nvar DEFAULT_TEXT_COLOR = '#000';\nvar hitTesting = false;\nvar TEMP_CANVAS = null;\nvar RADIAN = Math.PI / 180;\nvar textOffsetY = 1;\nvar Canvas = {\n  getCanvas2DContext: function getCanvas2DContext(canvas) {\n    return canvas.getContext('2d', {\n      willReadFrequently: true\n    });\n  },\n  setHitTesting: function setHitTesting(testing) {\n    hitTesting = testing;\n  },\n  createCanvas: function createCanvas(width, height, canvasClass) {\n    var canvas;\n    if (!IS_NODE) {\n      canvas = createEl('canvas');\n      canvas.width = width;\n      canvas.height = height;\n    } else {\n      canvas = new canvasClass(width, height);\n    }\n    return canvas;\n  },\n  prepareCanvasFont: function prepareCanvasFont(ctx, style) {\n    ctx.textBaseline = 'top';\n    ctx.font = getFont(style);\n    var fill = style['textFill'];\n    if (!fill) {\n      fill = DEFAULT_TEXT_COLOR;\n    }\n    ctx.fillStyle = Canvas.getRgba(fill, style['textOpacity']);\n  },\n  prepareCanvas: function prepareCanvas(ctx, style, resources, testing) {\n    if (!style) {\n      return;\n    }\n    var strokeWidth = style['lineWidth'];\n    if (!isNil(strokeWidth) && ctx.lineWidth !== strokeWidth) {\n      ctx.lineWidth = strokeWidth;\n    }\n    var strokePattern = style['linePatternFile'];\n    var strokeColor = style['lineColor'] || DEFAULT_STROKE_COLOR;\n    if (testing) {\n      ctx.strokeStyle = '#000';\n    } else if (strokePattern && resources) {\n      var patternOffset;\n      if (style['linePatternDx'] || style['linePatternDy']) {\n        patternOffset = [style['linePatternDx'], style['linePatternDy']];\n      }\n      Canvas._setStrokePattern(ctx, strokePattern, strokeWidth, patternOffset, resources);\n      style['lineDasharray'] = [];\n    } else if (isGradient(strokeColor)) {\n      if (style['lineGradientExtent']) {\n        ctx.strokeStyle = Canvas._createGradient(ctx, strokeColor, style['lineGradientExtent']);\n      } else {\n        ctx.strokeStyle = DEFAULT_STROKE_COLOR;\n      }\n    } else {\n      if (Array.isArray(strokeColor)) {\n        strokeColor = Canvas.normalizeColorToRGBA(strokeColor);\n      }\n      ctx.strokeStyle = strokeColor;\n    }\n    if (style['lineJoin']) {\n      ctx.lineJoin = style['lineJoin'];\n    }\n    if (style['lineCap']) {\n      ctx.lineCap = style['lineCap'];\n    }\n    if (ctx.setLineDash && isArrayHasData(style['lineDasharray'])) {\n      ctx.setLineDash(style['lineDasharray']);\n    }\n    var polygonPattern = style['polygonPatternFile'];\n    var fill = style['polygonFill'] || DEFAULT_FILL_COLOR;\n    if (testing) {\n      ctx.fillStyle = '#000';\n    } else if (polygonPattern && resources) {\n      var fillImgUrl = extractImageUrl(polygonPattern);\n      var fillTexture = resources.getImage([fillImgUrl, null, null]);\n      if (!fillTexture) {\n        fillTexture = resources.getImage([fillImgUrl + '-texture', null, strokeWidth]);\n      }\n      if (isSVG(fillImgUrl) && fillTexture instanceof Image && (Browser$1.edge || Browser$1.ie)) {\n        var w = fillTexture.width || 20,\n          h = fillTexture.height || 20;\n        var canvas = Canvas.createCanvas(w, h);\n        Canvas.image(canvas.getContext('2d'), fillTexture, 0, 0, w, h);\n        fillTexture = canvas;\n      }\n      if (!fillTexture) {\n        if (typeof console !== 'undefined') {\n          console.warn('img not found for', fillImgUrl);\n        }\n      } else {\n        ctx.fillStyle = ctx.createPattern(fillTexture, 'repeat');\n        if (style['polygonPatternDx'] || style['polygonPatternDy']) {\n          ctx.fillStyle['polygonPatternOffset'] = [style['polygonPatternDx'], style['polygonPatternDy']];\n        }\n      }\n    } else if (isGradient(fill)) {\n      if (style['polygonGradientExtent']) {\n        ctx.fillStyle = Canvas._createGradient(ctx, fill, style['polygonGradientExtent']);\n      } else {\n        ctx.fillStyle = 'rgba(255,255,255,0)';\n      }\n    } else {\n      if (Array.isArray(fill)) {\n        fill = Canvas.normalizeColorToRGBA(fill);\n      }\n      ctx.fillStyle = fill;\n    }\n  },\n  _createGradient: function _createGradient(ctx, g, extent) {\n    var gradient = null,\n      places = g['places'];\n    var min = extent.getMin(),\n      max = extent.getMax(),\n      width = extent.getWidth(),\n      height = extent.getHeight();\n    if (!g['type'] || g['type'] === 'linear') {\n      if (!places) {\n        places = [min.x, min.y, max.x, min.y];\n      } else {\n        if (places.length !== 4) {\n          throw new Error('A linear gradient\\'s places should have 4 numbers.');\n        }\n        places = [min.x + places[0] * width, min.y + places[1] * height, min.x + places[2] * width, min.y + places[3] * height];\n      }\n      gradient = ctx.createLinearGradient.apply(ctx, places);\n    } else if (g['type'] === 'radial') {\n      if (!places) {\n        var c = extent.getCenter()._round();\n        places = [c.x, c.y, Math.abs(c.x - min.x), c.x, c.y, 0];\n      } else {\n        if (places.length !== 6) {\n          throw new Error('A radial gradient\\'s places should have 6 numbers.');\n        }\n        places = [min.x + places[0] * width, min.y + places[1] * height, width * places[2], min.x + places[3] * width, min.y + places[4] * height, width * places[5]];\n      }\n      gradient = ctx.createRadialGradient.apply(ctx, places);\n    }\n    g['colorStops'].forEach(function (stop) {\n      gradient.addColorStop.apply(gradient, stop);\n    });\n    return gradient;\n  },\n  _setStrokePattern: function _setStrokePattern(ctx, strokePattern, strokeWidth, linePatternOffset, resources) {\n    var imgUrl = extractImageUrl(strokePattern);\n    var imageTexture;\n    if (IS_NODE) {\n      imageTexture = resources.getImage([imgUrl, null, strokeWidth]);\n    } else {\n      var key = imgUrl + '-texture-' + strokeWidth;\n      imageTexture = resources.getImage(key);\n      if (!imageTexture) {\n        var imageRes = resources.getImage([imgUrl, null, null]);\n        if (imageRes) {\n          var w;\n          if (!imageRes.width || !imageRes.height) {\n            w = strokeWidth;\n          } else {\n            w = Math.round(imageRes.width * strokeWidth / imageRes.height);\n          }\n          var patternCanvas = Canvas.createCanvas(w, strokeWidth, ctx.canvas.constructor);\n          Canvas.image(patternCanvas.getContext('2d'), imageRes, 0, 0, w, strokeWidth);\n          resources.addResource([key, null, strokeWidth], patternCanvas);\n          imageTexture = patternCanvas;\n        }\n      }\n    }\n    if (imageTexture) {\n      ctx.strokeStyle = ctx.createPattern(imageTexture, 'repeat');\n      ctx.strokeStyle['linePatternOffset'] = linePatternOffset;\n    } else if (typeof console !== 'undefined') {\n      console.warn('img not found for', imgUrl);\n    }\n  },\n  clearRect: function clearRect(ctx, x1, y1, x2, y2) {\n    ctx.canvas._drawn = false;\n    ctx.clearRect(x1, y1, x2, y2);\n  },\n  fillCanvas: function fillCanvas(ctx, fillOpacity, x, y) {\n    if (hitTesting) {\n      fillOpacity = 1;\n    }\n    ctx.canvas._drawn = true;\n    if (fillOpacity === 0) {\n      return;\n    }\n    var isPattern = Canvas._isPattern(ctx.fillStyle);\n    var offset = ctx.fillStyle && ctx.fillStyle['polygonPatternOffset'];\n    var dx = offset ? offset[0] : 0,\n      dy = offset ? offset[1] : 0;\n    if (isNil(fillOpacity)) {\n      fillOpacity = 1;\n    }\n    var alpha;\n    if (fillOpacity < 1) {\n      alpha = ctx.globalAlpha;\n      ctx.globalAlpha *= fillOpacity;\n    }\n    if (isPattern) {\n      x = x || 0;\n      y = y || 0;\n      ctx.translate(x + dx, y + dy);\n    }\n    ctx.fill();\n    if (isPattern) {\n      ctx.translate(-x - dx, -y - dy);\n    }\n    if (fillOpacity < 1) {\n      ctx.globalAlpha = alpha;\n    }\n  },\n  getRgba: function getRgba(color, op) {\n    if (isNil(op)) {\n      op = 1;\n    }\n    if (color[0] !== '#') {\n      if (Array.isArray(color)) {\n        color = Canvas.normalizeColorToRGBA(color, op);\n      }\n      return color;\n    }\n    var r, g, b;\n    if (color.length === 7) {\n      r = parseInt(color.substring(1, 3), 16);\n      g = parseInt(color.substring(3, 5), 16);\n      b = parseInt(color.substring(5, 7), 16);\n    } else {\n      r = parseInt(color.substring(1, 2), 16) * 17;\n      g = parseInt(color.substring(2, 3), 16) * 17;\n      b = parseInt(color.substring(3, 4), 16) * 17;\n    }\n    return 'rgba(' + r + ',' + g + ',' + b + ',' + op + ')';\n  },\n  normalizeColorToRGBA: function normalizeColorToRGBA(fill, opacity) {\n    if (opacity === void 0) {\n      opacity = 1;\n    }\n    return \"rgba(\" + fill[0] * 255 + \",\" + fill[1] * 255 + \",\" + fill[2] * 255 + \",\" + (fill.length === 4 ? fill[3] : 1) * opacity + \")\";\n  },\n  image: function image(ctx, img, x, y, width, height) {\n    ctx.canvas._drawn = true;\n    try {\n      if (isNumber(width) && isNumber(height)) {\n        ctx.drawImage(img, x, y, width, height);\n      } else {\n        ctx.drawImage(img, x, y);\n      }\n    } catch (error) {\n      if (console) {\n        console.warn('error when drawing image on canvas:', error);\n        console.warn(img);\n      }\n    }\n  },\n  text: function text(ctx, _text, pt, style, textDesc) {\n    return Canvas._textOnMultiRow(ctx, textDesc['rows'], style, pt, textDesc['size'], textDesc['rawSize']);\n  },\n  _textOnMultiRow: function _textOnMultiRow(ctx, texts, style, point, splitTextSize, textSize) {\n    var ptAlign = getAlignPoint(splitTextSize, style['textHorizontalAlignment'], style['textVerticalAlignment']),\n      lineHeight = textSize['height'] + style['textLineSpacing'],\n      basePoint = point.add(0, ptAlign.y),\n      maxHeight = style['textMaxHeight'];\n    var text,\n      rowAlign,\n      height = 0;\n    resetBBOX(BBOX_TEMP);\n    for (var i = 0, len = texts.length; i < len; i++) {\n      text = texts[i]['text'];\n      rowAlign = getAlignPoint(texts[i]['size'], style['textHorizontalAlignment'], style['textVerticalAlignment']);\n      var _point = basePoint.add(rowAlign.x, i * lineHeight);\n      Canvas._textOnLine(ctx, text, _point, style['textHaloRadius'], style['textHaloFill'], style['textHaloOpacity']);\n      var _textSize = texts[i].size;\n      var minx = _point.x,\n        miny = _point.y,\n        maxx = minx + _textSize.width,\n        maxy = miny + _textSize.height;\n      setBBOX(BBOX_TEMP, minx, miny, maxx, maxy);\n      if (maxHeight > 0) {\n        height += lineHeight;\n        if (height + _textSize['height'] >= maxHeight) {\n          break;\n        }\n      }\n    }\n    return BBOX_TEMP;\n  },\n  _textOnLine: function _textOnLine(ctx, text, pt, textHaloRadius, textHaloFill, textHaloAlpha) {\n    if (hitTesting) {\n      textHaloAlpha = 1;\n    }\n    var drawHalo = textHaloAlpha !== 0 && textHaloRadius !== 0;\n    ctx.textBaseline = 'top';\n    var gco, fill;\n    var shadowBlur = ctx.shadowBlur,\n      shadowOffsetX = ctx.shadowOffsetX,\n      shadowOffsetY = ctx.shadowOffsetY;\n    if (drawHalo) {\n      var alpha = ctx.globalAlpha;\n      ctx.globalAlpha *= textHaloAlpha;\n      ctx.miterLimit = 2;\n      ctx.lineJoin = 'round';\n      ctx.lineCap = 'round';\n      ctx.lineWidth = textHaloRadius * 2;\n      if (Array.isArray(textHaloFill)) {\n        textHaloFill = Canvas.normalizeColorToRGBA(textHaloFill);\n      }\n      ctx.strokeStyle = textHaloFill;\n      ctx.strokeText(text, pt.x, pt.y + textOffsetY);\n      ctx.miterLimit = 10;\n      ctx.globalAlpha = alpha;\n      gco = ctx.globalCompositeOperation;\n      ctx.globalCompositeOperation = 'destination-out';\n      fill = ctx.fillStyle;\n      ctx.fillStyle = '#000';\n    }\n    if (shadowBlur && drawHalo) {\n      ctx.shadowBlur = ctx.shadowOffsetX = ctx.shadowOffsetY = 0;\n    }\n    Canvas.fillText(ctx, text, pt);\n    if (gco) {\n      ctx.globalCompositeOperation = gco;\n      Canvas.fillText(ctx, text, pt, fill);\n      if (shadowBlur) {\n        ctx.shadowBlur = shadowBlur;\n        ctx.shadowOffsetX = shadowOffsetX;\n        ctx.shadowOffsetY = shadowOffsetY;\n      }\n    }\n  },\n  fillText: function fillText(ctx, text, pt, rgba) {\n    ctx.canvas._drawn = true;\n    if (rgba) {\n      ctx.fillStyle = rgba;\n    }\n    ctx.fillText(text, pt.x, pt.y + textOffsetY);\n  },\n  _stroke: function _stroke(ctx, strokeOpacity, x, y) {\n    if (hitTesting) {\n      strokeOpacity = 1;\n    }\n    ctx.canvas._drawn = true;\n    if (strokeOpacity === 0) {\n      return;\n    }\n    var offset = ctx.strokeStyle && ctx.strokeStyle['linePatternOffset'];\n    var dx = offset ? offset[0] : 0,\n      dy = offset ? offset[1] : 0;\n    var isPattern = Canvas._isPattern(ctx.strokeStyle) && (!isNil(x) && !isNil(y) || !isNil(dx) && !isNil(dy));\n    if (isNil(strokeOpacity)) {\n      strokeOpacity = 1;\n    }\n    var alpha;\n    if (strokeOpacity < 1) {\n      alpha = ctx.globalAlpha;\n      ctx.globalAlpha *= strokeOpacity;\n    }\n    if (isPattern) {\n      x = x || 0;\n      y = y || 0;\n      ctx.translate(x + dx, y + dy);\n    }\n    ctx.stroke();\n    if (isPattern) {\n      ctx.translate(-x - dx, -y - dy);\n    }\n    if (strokeOpacity < 1) {\n      ctx.globalAlpha = alpha;\n    }\n  },\n  _path: function _path(ctx, points, lineDashArray, lineOpacity, ignoreStrokePattern) {\n    if (!isArrayHasData(points)) {\n      return;\n    }\n    function fillWithPattern(p1, p2) {\n      var degree = computeDegree(p1.x, p1.y, p2.x, p2.y);\n      ctx.save();\n      var cosd = Math.cos(degree);\n      if (Math.abs(cosd) < 1E-7) {\n        ctx.translate(p1.x - ctx.lineWidth / 2, p1.y);\n      } else {\n        ctx.translate(p1.x, p1.y - ctx.lineWidth / 2 / cosd);\n      }\n      ctx.rotate(degree);\n      Canvas._stroke(ctx, lineOpacity);\n      ctx.restore();\n    }\n    var isDashed = isArrayHasData(lineDashArray);\n    var isPatternLine = ignoreStrokePattern === true ? false : Canvas._isPattern(ctx.strokeStyle);\n    var point, prePoint, nextPoint;\n    for (var i = 0, len = points.length; i < len; i++) {\n      point = points[i];\n      if (!isDashed || ctx.setLineDash) {\n        ctx.lineTo(point.x, point.y);\n        if (isPatternLine && i > 0) {\n          prePoint = points[i - 1];\n          fillWithPattern(prePoint, point);\n          ctx.beginPath();\n          ctx.moveTo(point.x, point.y);\n        }\n      } else if (isDashed) {\n        if (i === len - 1) {\n          break;\n        }\n        nextPoint = points[i + 1];\n        drawDashLine(ctx, point, nextPoint, lineDashArray, isPatternLine);\n      }\n    }\n  },\n  path: function path(ctx, points, lineOpacity, fillOpacity, lineDashArray) {\n    if (!isArrayHasData(points)) {\n      return;\n    }\n    ctx.beginPath();\n    ctx.moveTo(points[0].x, points[0].y);\n    Canvas._path(ctx, points, lineDashArray, lineOpacity);\n    Canvas._stroke(ctx, lineOpacity);\n  },\n  _multiClip: function _multiClip(ctx, points) {\n    if (!points || points.length === 0) return;\n    points = points[0];\n    for (var i = 0, len = points.length; i < len; i++) {\n      var point = points[i];\n      var x = point.x,\n        y = point.y;\n      if (i === 0) {\n        ctx.moveTo(x, y);\n      } else {\n        ctx.lineTo(x, y);\n      }\n      if (i === len - 1) {\n        x = points[0].x;\n        y = points[0].y;\n        ctx.lineTo(x, y);\n      }\n    }\n  },\n  polygon: function polygon(ctx, points, lineOpacity, fillOpacity, lineDashArray, smoothness) {\n    if (ctx.isMultiClip) {\n      Canvas._multiClip(ctx, points);\n      return;\n    }\n    if (ctx.isClip) {\n      Canvas._multiClip(ctx, Array.isArray(points[0]) ? points : [points]);\n      return;\n    }\n    if (!isArrayHasData(points)) {\n      return;\n    }\n    var isPatternLine = Canvas._isPattern(ctx.strokeStyle),\n      fillFirst = isArrayHasData(lineDashArray) && !ctx.setLineDash || isPatternLine && !smoothness;\n    if (!isArrayHasData(points[0])) {\n      points = [points];\n    }\n    var savedCtx = ctx;\n    if (points.length > 1 && !IS_NODE) {\n      if (!TEMP_CANVAS) {\n        TEMP_CANVAS = Canvas.createCanvas(1, 1);\n      }\n      ctx.canvas._drawn = false;\n      TEMP_CANVAS.width = ctx.canvas.width;\n      TEMP_CANVAS.height = ctx.canvas.height;\n      ctx = TEMP_CANVAS.getContext('2d');\n      copyProperties(ctx, savedCtx);\n    }\n    var op, i, len;\n    if (fillFirst) {\n      ctx.save();\n      for (i = 0, len = points.length; i < len; i++) {\n        if (!isArrayHasData(points[i])) {\n          continue;\n        }\n        Canvas._ring(ctx, points[i], null, 0, true);\n        op = fillOpacity;\n        if (i > 0) {\n          ctx.globalCompositeOperation = 'destination-out';\n          op = 1;\n        }\n        Canvas.fillCanvas(ctx, op, points[i][0].x, points[i][0].y);\n        if (i > 0) {\n          ctx.globalCompositeOperation = 'source-over';\n        } else if (len > 1) {\n          ctx.fillStyle = '#fff';\n        }\n        Canvas._stroke(ctx, 0);\n      }\n      ctx.restore();\n    }\n    var fillStyle = ctx.fillStyle;\n    for (i = 0, len = points.length; i < len; i++) {\n      if (!isArrayHasData(points[i])) {\n        continue;\n      }\n      if (smoothness) {\n        Canvas.paintSmoothLine(ctx, points[i], lineOpacity, smoothness, true);\n        ctx.closePath();\n      } else {\n        Canvas._ring(ctx, points[i], lineDashArray, lineOpacity);\n      }\n      if (!fillFirst) {\n        op = fillOpacity;\n        if (i > 0) {\n          ctx.globalCompositeOperation = 'destination-out';\n          op = 1;\n        }\n        Canvas.fillCanvas(ctx, op, points[i][0].x, points[i][0].y);\n        if (i > 0) {\n          ctx.globalCompositeOperation = 'source-over';\n        } else if (len > 1) {\n          ctx.fillStyle = '#fff';\n        }\n      }\n      Canvas._stroke(ctx, lineOpacity);\n    }\n    if (ctx.fillStyle !== fillStyle) {\n      ctx.fillStyle = fillStyle;\n    }\n    if (points.length > 1 && !IS_NODE) {\n      savedCtx.drawImage(TEMP_CANVAS, 0, 0);\n      savedCtx.canvas._drawn = ctx.canvas._drawn;\n      copyProperties(savedCtx, ctx);\n    }\n  },\n  _ring: function _ring(ctx, ring, lineDashArray, lineOpacity, ignorePattern) {\n    var isPattern = Canvas._isPattern(ctx.strokeStyle);\n    if (!ignorePattern && isPattern && !ring[0].equals(ring[ring.length - 1])) {\n      ring = ring.concat([ring[0]]);\n    }\n    ctx.beginPath();\n    ctx.moveTo(ring[0].x, ring[0].y);\n    Canvas._path(ctx, ring, lineDashArray, lineOpacity, ignorePattern);\n    if (!isPattern) {\n      ctx.closePath();\n    }\n  },\n  paintSmoothLine: function paintSmoothLine(ctx, points, lineOpacity, smoothValue, close, tailIdx, tailRatio) {\n    if (!points) {\n      return;\n    }\n    if (points.length <= 2 || !smoothValue) {\n      Canvas.path(ctx, points, lineOpacity);\n      return;\n    }\n    function interpolate$$1(t0, t1, x1, y1, bx1, by1, bx2, by2, x2, y2) {\n      var u0 = 1.0 - t0;\n      var u1 = 1.0 - t1;\n      var qxa = x1 * u0 * u0 + bx1 * 2 * t0 * u0 + bx2 * t0 * t0;\n      var qxb = x1 * u1 * u1 + bx1 * 2 * t1 * u1 + bx2 * t1 * t1;\n      var qxc = bx1 * u0 * u0 + bx2 * 2 * t0 * u0 + x2 * t0 * t0;\n      var qxd = bx1 * u1 * u1 + bx2 * 2 * t1 * u1 + x2 * t1 * t1;\n      var qya = y1 * u0 * u0 + by1 * 2 * t0 * u0 + by2 * t0 * t0;\n      var qyb = y1 * u1 * u1 + by1 * 2 * t1 * u1 + by2 * t1 * t1;\n      var qyc = by1 * u0 * u0 + by2 * 2 * t0 * u0 + y2 * t0 * t0;\n      var qyd = by1 * u1 * u1 + by2 * 2 * t1 * u1 + y2 * t1 * t1;\n      var xb = qxa * u1 + qxc * t1;\n      var xc = qxb * u0 + qxd * t0;\n      var xd = qxb * u1 + qxd * t1;\n      var yb = qya * u1 + qyc * t1;\n      var yc = qyb * u0 + qyd * t0;\n      var yd = qyb * u1 + qyd * t1;\n      return [xb, yb, xc, yc, xd, yd];\n    }\n    function getCubicControlPoints(x0, y0, x1, y1, x2, y2, x3, y3, smoothValue, t) {\n      var xc1 = (x0 + x1) / 2.0,\n        yc1 = (y0 + y1) / 2.0;\n      var xc2 = (x1 + x2) / 2.0,\n        yc2 = (y1 + y2) / 2.0;\n      var xc3 = (x2 + x3) / 2.0,\n        yc3 = (y2 + y3) / 2.0;\n      var len1 = Math.sqrt((x1 - x0) * (x1 - x0) + (y1 - y0) * (y1 - y0));\n      var len2 = Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\n      var len3 = Math.sqrt((x3 - x2) * (x3 - x2) + (y3 - y2) * (y3 - y2));\n      var k1 = len1 / (len1 + len2);\n      var k2 = len2 / (len2 + len3);\n      var xm1 = xc1 + (xc2 - xc1) * k1,\n        ym1 = yc1 + (yc2 - yc1) * k1;\n      var xm2 = xc2 + (xc3 - xc2) * k2,\n        ym2 = yc2 + (yc3 - yc2) * k2;\n      var ctrl1X = xm1 + (xc2 - xm1) * smoothValue + x1 - xm1,\n        ctrl1Y = ym1 + (yc2 - ym1) * smoothValue + y1 - ym1,\n        ctrl2X = xm2 + (xc2 - xm2) * smoothValue + x2 - xm2,\n        ctrl2Y = ym2 + (yc2 - ym2) * smoothValue + y2 - ym2;\n      var ctrlPoints = [ctrl1X, ctrl1Y, ctrl2X, ctrl2Y];\n      if (t < 1) {\n        return interpolate$$1(0, t, x1, y1, ctrl1X, ctrl1Y, ctrl2X, ctrl2Y, x2, y2);\n      } else {\n        return ctrlPoints;\n      }\n    }\n    var count = points.length;\n    var l = close ? count : count - 1;\n    ctx.beginPath();\n    ctx.moveTo(points[0].x, points[0].y);\n    if (tailRatio !== undefined) l -= Math.max(l - tailIdx - 1, 0);\n    var preCtrlPoints;\n    for (var i = 0; i < l; i++) {\n      var x1 = points[i].x,\n        y1 = points[i].y;\n      var x0 = void 0,\n        y0 = void 0,\n        x2 = void 0,\n        y2 = void 0,\n        x3 = void 0,\n        y3 = void 0;\n      if (i - 1 < 0) {\n        if (!close) {\n          x0 = points[i + 1].x;\n          y0 = points[i + 1].y;\n        } else {\n          x0 = points[l - 1].x;\n          y0 = points[l - 1].y;\n        }\n      } else {\n        x0 = points[i - 1].x;\n        y0 = points[i - 1].y;\n      }\n      if (i + 1 < count) {\n        x2 = points[i + 1].x;\n        y2 = points[i + 1].y;\n      } else {\n        x2 = points[i + 1 - count].x;\n        y2 = points[i + 1 - count].y;\n      }\n      if (i + 2 < count) {\n        x3 = points[i + 2].x;\n        y3 = points[i + 2].y;\n      } else if (!close) {\n        x3 = points[i].x;\n        y3 = points[i].y;\n      } else {\n        x3 = points[i + 2 - count].x;\n        y3 = points[i + 2 - count].y;\n      }\n      var ctrlPoints = getCubicControlPoints(x0, y0, x1, y1, x2, y2, x3, y3, smoothValue, i === l - 1 ? tailRatio : 1);\n      if (i === l - 1 && tailRatio >= 0 && tailRatio < 1) {\n        ctx.bezierCurveTo(ctrlPoints[0], ctrlPoints[1], ctrlPoints[2], ctrlPoints[3], ctrlPoints[4], ctrlPoints[5]);\n        points.splice(l - 1, count - (l - 1) - 1);\n        var lastPoint = new Point(ctrlPoints[4], ctrlPoints[5]);\n        lastPoint.prevCtrlPoint = new Point(ctrlPoints[2], ctrlPoints[3]);\n        points.push(lastPoint);\n        count = points.length;\n      } else {\n        ctx.bezierCurveTo(ctrlPoints[0], ctrlPoints[1], ctrlPoints[2], ctrlPoints[3], x2, y2);\n      }\n      points[i].nextCtrlPoint = ctrlPoints.slice(0, 2);\n      points[i].prevCtrlPoint = preCtrlPoints ? preCtrlPoints.slice(2) : null;\n      preCtrlPoints = ctrlPoints;\n    }\n    if (!close && points[1].prevCtrlPoint) {\n      points[0].nextCtrlPoint = points[1].prevCtrlPoint;\n      delete points[0].prevCtrlPoint;\n    }\n    if (!points[count - 1].prevCtrlPoint) {\n      points[count - 1].prevCtrlPoint = points[count - 2].nextCtrlPoint;\n    }\n    Canvas._stroke(ctx, lineOpacity);\n  },\n  _arcBetween: function _arcBetween(ctx, p1, p2, degree) {\n    var a = degree,\n      dist = p1.distanceTo(p2),\n      r = dist / 2 / Math.sin(a / 2);\n    var p1p2 = Math.asin((p2.y - p1.y) / dist);\n    if (p1.x > p2.x) {\n      p1p2 = Math.PI - p1p2;\n    }\n    var cp2 = 90 * RADIAN - a / 2,\n      da = p1p2 - cp2;\n    var dx = Math.cos(da) * r,\n      dy = Math.sin(da) * r,\n      cx = p1.x + dx,\n      cy = p1.y + dy;\n    var startAngle = Math.asin((p2.y - cy) / r);\n    if (cx > p2.x) {\n      startAngle = Math.PI - startAngle;\n    }\n    var endAngle = startAngle + a;\n    ctx.beginPath();\n    ctx.arc(cx, cy, r, startAngle, endAngle);\n    return [cx, cy];\n  },\n  _lineTo: function _lineTo(ctx, p) {\n    ctx.lineTo(p.x, p.y);\n  },\n  bezierCurveAndFill: function bezierCurveAndFill(ctx, points, lineOpacity, fillOpacity) {\n    ctx.beginPath();\n    var start = points[0];\n    ctx.moveTo(start.x, start.y);\n    var args = [ctx];\n    args.push.apply(args, points.splice(1));\n    Canvas._bezierCurveTo.apply(Canvas, args);\n    Canvas.fillCanvas(ctx, fillOpacity);\n    Canvas._stroke(ctx, lineOpacity);\n  },\n  _bezierCurveTo: function _bezierCurveTo(ctx, p1, p2, p3) {\n    ctx.bezierCurveTo(p1.x, p1.y, p2.x, p2.y, p3.x, p3.y);\n  },\n  ellipse: function ellipse(ctx, pt, width, heightTop, heightBottom, lineOpacity, fillOpacity) {\n    function bezierEllipse(x, y, a, b, b1) {\n      var k = 0.5522848,\n        ox = a * k,\n        oy = b * k,\n        oy1 = b1 * k;\n      ctx.moveTo(x - a, y);\n      ctx.bezierCurveTo(x - a, y - oy, x - ox, y - b, x, y - b);\n      ctx.bezierCurveTo(x + ox, y - b, x + a, y - oy, x + a, y);\n      ctx.bezierCurveTo(x + a, y + oy1, x + ox, y + b1, x, y + b1);\n      ctx.bezierCurveTo(x - ox, y + b1, x - a, y + oy1, x - a, y);\n      ctx.closePath();\n    }\n    ctx.beginPath();\n    if (width === heightTop && width === heightBottom) {\n      ctx.arc(pt.x, pt.y, width, 0, 2 * Math.PI);\n    } else if (ctx.ellipse) {\n      if (heightTop !== heightBottom) {\n        ctx.ellipse(pt.x, pt.y, width, heightTop, 0, RADIAN * 180, RADIAN * 360, false);\n        ctx.ellipse(pt.x, pt.y, width, heightBottom, 0, 0, RADIAN * 180, false);\n      } else {\n        ctx.ellipse(pt.x, pt.y, width, heightTop, 0, 0, RADIAN * 360, false);\n      }\n    } else {\n      bezierEllipse(pt.x, pt.y, width, heightTop, heightBottom);\n    }\n    Canvas.fillCanvas(ctx, fillOpacity, pt.x - width, pt.y - heightTop);\n    Canvas._stroke(ctx, lineOpacity, pt.x - width, pt.y - heightTop);\n  },\n  rectangle: function rectangle(ctx, pt, size, lineOpacity, fillOpacity) {\n    var x = pt.x,\n      y = pt.y;\n    ctx.beginPath();\n    ctx.rect(x, y, size['width'], size['height']);\n    Canvas.fillCanvas(ctx, fillOpacity, x, y);\n    Canvas._stroke(ctx, lineOpacity, x, y);\n  },\n  sector: function sector(ctx, pt, size, angles, lineOpacity, fillOpacity) {\n    var rad = RADIAN;\n    var startAngle = angles[0],\n      endAngle = angles[1];\n    function sector(ctx, x, y, radius, startAngle, endAngle) {\n      var sDeg = rad * -endAngle;\n      var eDeg = rad * -startAngle;\n      ctx.beginPath();\n      ctx.moveTo(x, y);\n      ctx.arc(x, y, radius, sDeg, eDeg);\n      ctx.lineTo(x, y);\n      Canvas.fillCanvas(ctx, fillOpacity, x - radius, y - radius);\n      Canvas._stroke(ctx, lineOpacity, x - radius, y - radius);\n    }\n    sector(ctx, pt.x, pt.y, size, startAngle, endAngle);\n  },\n  _isPattern: function _isPattern(style) {\n    return !isString(style) && !('addColorStop' in style);\n  },\n  drawCross: function drawCross(ctx, x, y, lineWidth, color) {\n    ctx.canvas._drawn = true;\n    ctx.strokeStyle = color;\n    ctx.lineWidth = lineWidth;\n    ctx.beginPath();\n    ctx.moveTo(x - 5, y);\n    ctx.lineTo(x + 5, y);\n    ctx.moveTo(x, y - 5);\n    ctx.lineTo(x, y + 5);\n    ctx.stroke();\n  },\n  copy: function copy(canvas, c) {\n    var target = c || createEl('canvas');\n    target.width = canvas.width;\n    target.height = canvas.height;\n    target.getContext('2d').drawImage(canvas, 0, 0);\n    return target;\n  },\n  pixelRect: function pixelRect(ctx, point, lineOpacity, fillOpacity) {\n    var lineWidth = ctx.lineWidth;\n    var alpha = ctx.globalAlpha;\n    var isStroke = false;\n    if (lineWidth > 0 && lineOpacity > 0) {\n      isStroke = true;\n      if (lineOpacity < 1) {\n        ctx.globalAlpha *= lineOpacity;\n      }\n    } else if (fillOpacity > 0) {\n      if (fillOpacity < 1) {\n        ctx.globalAlpha *= fillOpacity;\n      }\n    } else {\n      return;\n    }\n    ctx.canvas._drawn = true;\n    if (isStroke) {\n      ctx.strokeRect(point[0], point[1], 1, 1);\n    } else {\n      ctx.fillRect(point[0], point[1], 1, 1);\n    }\n    if (ctx.globalAlpha !== alpha) {\n      ctx.globalAlpha = alpha;\n    }\n  }\n};\nfunction drawDashLine(ctx, startPoint, endPoint, dashArray) {\n  var fromX = startPoint.x,\n    fromY = startPoint.y,\n    toX = endPoint.x,\n    toY = endPoint.y;\n  var pattern = dashArray;\n  var lt = function lt(a, b) {\n    return a <= b;\n  };\n  var gt = function gt(a, b) {\n    return a >= b;\n  };\n  var capmin = function capmin(a, b) {\n    return Math.min(a, b);\n  };\n  var capmax = function capmax(a, b) {\n    return Math.max(a, b);\n  };\n  var checkX = {\n    thereYet: gt,\n    cap: capmin\n  };\n  var checkY = {\n    thereYet: gt,\n    cap: capmin\n  };\n  if (fromY - toY > 0) {\n    checkY.thereYet = lt;\n    checkY.cap = capmax;\n  }\n  if (fromX - toX > 0) {\n    checkX.thereYet = lt;\n    checkX.cap = capmax;\n  }\n  ctx.moveTo(fromX, fromY);\n  var offsetX = fromX;\n  var offsetY = fromY;\n  var idx = 0,\n    dash = true;\n  var ang, len;\n  while (!(checkX.thereYet(offsetX, toX) && checkY.thereYet(offsetY, toY))) {\n    ang = Math.atan2(toY - fromY, toX - fromX);\n    len = pattern[idx];\n    offsetX = checkX.cap(toX, offsetX + Math.cos(ang) * len);\n    offsetY = checkY.cap(toY, offsetY + Math.sin(ang) * len);\n    if (dash) {\n      ctx.lineTo(offsetX, offsetY);\n    } else {\n      ctx.moveTo(offsetX, offsetY);\n    }\n    idx = (idx + 1) % pattern.length;\n    dash = !dash;\n  }\n}\nvar prefix = 'data:image/';\nfunction extractImageUrl(url) {\n  if (url.substring(0, prefix.length) === prefix) {\n    return url;\n  }\n  return extractCssUrl(url);\n}\nfunction copyProperties(ctx, savedCtx) {\n  ctx.filter = savedCtx.filter;\n  ctx.fillStyle = savedCtx.fillStyle;\n  ctx.globalAlpha = savedCtx.globalAlpha;\n  ctx.lineCap = savedCtx.lineCap;\n  ctx.lineDashOffset = savedCtx.lineDashOffset;\n  ctx.lineJoin = savedCtx.lineJoin;\n  ctx.lineWidth = savedCtx.lineWidth;\n  ctx.shadowBlur = savedCtx.shadowBlur;\n  ctx.shadowColor = savedCtx.shadowColor;\n  ctx.shadowOffsetX = savedCtx.shadowOffsetX;\n  ctx.shadowOffsetY = savedCtx.shadowOffsetY;\n  ctx.strokeStyle = savedCtx.strokeStyle;\n}\nvar promise;\nif (typeof Promise !== 'undefined') {\n  promise = Promise;\n} else {\n  promise = Zousan;\n}\nvar Promise$1 = promise;\nvar Eventable = function Eventable(Base) {\n  return function (_Base) {\n    _inheritsLoose(_class, _Base);\n    function _class() {\n      return _Base.apply(this, arguments) || this;\n    }\n    var _proto = _class.prototype;\n    _proto.on = function on$$1(eventsOn, handler, context) {\n      if (!eventsOn) {\n        return this;\n      }\n      if (!isString(eventsOn)) {\n        return this._switch('on', eventsOn, handler);\n      }\n      if (!handler) {\n        return this;\n      }\n      if (!this._eventMap) {\n        this._eventMap = {};\n      }\n      var eventTypes = eventsOn.toLowerCase().split(' ');\n      var evtType;\n      if (!context) {\n        context = this;\n      }\n      var handlerChain;\n      for (var ii = 0, ll = eventTypes.length; ii < ll; ii++) {\n        evtType = eventTypes[ii];\n        handlerChain = this._eventMap[evtType];\n        if (!handlerChain) {\n          handlerChain = [];\n          this._eventMap[evtType] = handlerChain;\n        }\n        var l = handlerChain.length;\n        if (l > 0) {\n          for (var i = 0; i < l; i++) {\n            if (handler === handlerChain[i].handler && handlerChain[i].context === context) {\n              if (!Browser$1.isTest) {\n                console.warn(this, \"find '\" + eventsOn + \"' handler:\", handler, ' The old listener function will be removed');\n              }\n              return this;\n            }\n          }\n        }\n        handlerChain.push({\n          handler: handler,\n          context: context\n        });\n      }\n      return this;\n    };\n    _proto.addEventListener = function addEventListener() {\n      return this.on.apply(this, arguments);\n    };\n    _proto.once = function once(eventTypes, handler, context) {\n      if (!isString(eventTypes)) {\n        var once = {};\n        for (var p in eventTypes) {\n          if (eventTypes.hasOwnProperty(p)) {\n            once[p] = this._wrapOnceHandler(p, eventTypes[p], context);\n          }\n        }\n        return this._switch('on', once);\n      }\n      var evetTypes = eventTypes.split(' ');\n      for (var i = 0, l = evetTypes.length; i < l; i++) {\n        this.on(evetTypes[i], this._wrapOnceHandler(evetTypes[i], handler, context));\n      }\n      return this;\n    };\n    _proto.off = function off$$1(eventsOff, handler, context) {\n      if (!this._eventMap || !eventsOff) {\n        return this;\n      }\n      if (!isString(eventsOff)) {\n        return this._switch('off', eventsOff, handler);\n      }\n      if (!handler) {\n        return this;\n      }\n      var eventTypes = eventsOff.split(' ');\n      var eventType, listeners, wrapKey;\n      if (!context) {\n        context = this;\n      }\n      for (var j = 0, jl = eventTypes.length; j < jl; j++) {\n        eventType = eventTypes[j].toLowerCase();\n        wrapKey = 'Z__' + eventType;\n        listeners = this._eventMap[eventType];\n        if (!listeners) {\n          return this;\n        }\n        for (var i = listeners.length - 1; i >= 0; i--) {\n          var listener = listeners[i];\n          if ((handler === listener.handler || handler === listener.handler[wrapKey]) && listener.context === context) {\n            delete listener.handler[wrapKey];\n            listeners.splice(i, 1);\n          }\n        }\n        if (!listeners.length) {\n          delete this._eventMap[eventType];\n        }\n      }\n      return this;\n    };\n    _proto.removeEventListener = function removeEventListener() {\n      return this.off.apply(this, arguments);\n    };\n    _proto.listens = function listens(eventType, handler, context) {\n      if (!this._eventMap || !isString(eventType)) {\n        return 0;\n      }\n      var handlerChain = this._eventMap[eventType.toLowerCase()];\n      if (!handlerChain || !handlerChain.length) {\n        return 0;\n      }\n      if (!handler) {\n        return handlerChain.length;\n      }\n      for (var i = 0, len = handlerChain.length; i < len; i++) {\n        if (handler === handlerChain[i].handler && (isNil(context) || handlerChain[i].context === context)) {\n          return 1;\n        }\n      }\n      return 0;\n    };\n    _proto.getListeningEvents = function getListeningEvents() {\n      if (!this._eventMap) {\n        return [];\n      }\n      return Object.keys(this._eventMap);\n    };\n    _proto.copyEventListeners = function copyEventListeners(target) {\n      var eventMap = target._eventMap;\n      if (!eventMap) {\n        return this;\n      }\n      var handlerChain;\n      for (var eventType in eventMap) {\n        handlerChain = eventMap[eventType];\n        for (var i = 0, len = handlerChain.length; i < len; i++) {\n          this.on(eventType, handlerChain[i].handler, handlerChain[i].context);\n        }\n      }\n      return this;\n    };\n    _proto.fire = function fire() {\n      if (this._eventParent) {\n        return this._eventParent.fire.apply(this._eventParent, arguments);\n      }\n      return this._fire.apply(this, arguments);\n    };\n    _proto._wrapOnceHandler = function _wrapOnceHandler(evtType, handler, context) {\n      var me = this;\n      var key = 'Z__' + evtType;\n      var called = false;\n      var fn = function onceHandler() {\n        if (called) {\n          return;\n        }\n        delete fn[key];\n        called = true;\n        if (context) {\n          handler.apply(context, arguments);\n        } else {\n          handler.apply(this, arguments);\n        }\n        me.off(evtType, onceHandler, this);\n      };\n      fn[key] = handler;\n      return fn;\n    };\n    _proto._switch = function _switch(to, eventKeys, context) {\n      for (var p in eventKeys) {\n        if (eventKeys.hasOwnProperty(p)) {\n          this[to](p, eventKeys[p], context);\n        }\n      }\n      return this;\n    };\n    _proto._clearListeners = function _clearListeners(eventType) {\n      if (!this._eventMap || !isString(eventType)) {\n        return;\n      }\n      var handlerChain = this._eventMap[eventType.toLowerCase()];\n      if (!handlerChain) {\n        return;\n      }\n      this._eventMap[eventType] = null;\n    };\n    _proto._clearAllListeners = function _clearAllListeners() {\n      this._eventMap = null;\n    };\n    _proto._setEventParent = function _setEventParent(parent) {\n      this._eventParent = parent;\n      return this;\n    };\n    _proto._setEventTarget = function _setEventTarget(target) {\n      this._eventTarget = target;\n      return this;\n    };\n    _proto._fire = function _fire(eventType, param) {\n      if (!this._eventMap) {\n        return this;\n      }\n      var handlerChain = this._eventMap[eventType.toLowerCase()];\n      if (!handlerChain) {\n        return this;\n      }\n      if (!param) {\n        param = {};\n      }\n      param['type'] = eventType;\n      param['target'] = this._eventTarget || this;\n      var queue = handlerChain.slice(0);\n      var context, bubble, passed;\n      for (var i = 0, len = queue.length; i < len; i++) {\n        if (!queue[i]) {\n          continue;\n        }\n        context = queue[i].context;\n        bubble = true;\n        passed = extend({}, param);\n        if (context) {\n          bubble = queue[i].handler.call(context, passed);\n        } else {\n          bubble = queue[i].handler(passed);\n        }\n        if (bubble === false) {\n          if (param['domEvent']) {\n            stopPropagation(param['domEvent']);\n          }\n        }\n      }\n      return this;\n    };\n    return _class;\n  }(Base);\n};\nvar Handler = function () {\n  function Handler(target) {\n    this.target = target;\n  }\n  var _proto = Handler.prototype;\n  _proto.enable = function enable() {\n    if (this._enabled) {\n      return this;\n    }\n    this._enabled = true;\n    this.addHooks();\n    return this;\n  };\n  _proto.disable = function disable() {\n    if (!this._enabled) {\n      return this;\n    }\n    this._enabled = false;\n    this.removeHooks();\n    return this;\n  };\n  _proto.enabled = function enabled() {\n    return !!this._enabled;\n  };\n  _proto.remove = function remove() {\n    this.disable();\n    delete this.target;\n    delete this.dom;\n  };\n  return Handler;\n}();\nvar Handler$1 = Eventable(Handler);\nvar Class = function () {\n  function Class(options) {\n    if (!this || !this.setOptions) {\n      throw new Error('Class instance is being created without \"new\" operator.');\n    }\n    this.setOptions(options);\n    this.callInitHooks();\n    this._isUpdatingOptions = false;\n  }\n  var _proto = Class.prototype;\n  _proto.proxyOptions = function proxyOptions() {\n    var _this = this;\n    if (!Browser$1.proxy) {\n      return this;\n    }\n    if (this.options.isExtensible) {\n      return this;\n    }\n    this.options = new Proxy(this.options, {\n      set: function set(target, key, value) {\n        if (target[key] === value) {\n          return true;\n        }\n        target[key] = value;\n        if (_this._isUpdatingOptions) {\n          return true;\n        }\n        var opts = {};\n        opts[key] = value;\n        _this.config(opts);\n        return true;\n      }\n    });\n    return this;\n  };\n  _proto.callInitHooks = function callInitHooks() {\n    var proto = Object.getPrototypeOf(this);\n    this._visitInitHooks(proto);\n    return this;\n  };\n  _proto.setOptions = function setOptions(options) {\n    if (!this.hasOwnProperty('options')) {\n      this.options = this.options ? Object.create(this.options) : {};\n    }\n    if (!options) {\n      return this;\n    }\n    for (var i in options) {\n      this.options[i] = options[i];\n    }\n    return this;\n  };\n  _proto.config = function config(conf) {\n    this._isUpdatingOptions = true;\n    if (!conf) {\n      var config = {};\n      for (var p in this.options) {\n        if (this.options.hasOwnProperty(p)) {\n          config[p] = this.options[p];\n        }\n      }\n      this._isUpdatingOptions = false;\n      return config;\n    } else {\n      if (arguments.length === 2) {\n        var t = {};\n        t[conf] = arguments[1];\n        conf = t;\n      }\n      for (var i in conf) {\n        this.options[i] = conf[i];\n        if (this[i] && this[i] instanceof Handler$1) {\n          if (conf[i]) {\n            this[i].enable();\n          } else {\n            this[i].disable();\n          }\n        }\n      }\n      this.onConfig(conf);\n      this._isUpdatingOptions = false;\n    }\n    return this;\n  };\n  _proto.onConfig = function onConfig() {};\n  _proto._visitInitHooks = function _visitInitHooks(proto) {\n    if (this._initHooksCalled) {\n      return;\n    }\n    var parentProto = Object.getPrototypeOf(proto);\n    if (parentProto._visitInitHooks) {\n      parentProto._visitInitHooks.call(this, parentProto);\n    }\n    this._initHooksCalled = true;\n    var hooks = proto._initHooks;\n    if (hooks && hooks !== parentProto._initHooks) {\n      for (var i = 0; i < hooks.length; i++) {\n        hooks[i].call(this);\n      }\n    }\n  };\n  Class.addInitHook = function addInitHook(fn) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n    var init = typeof fn === 'function' ? fn : function () {\n      this[fn].apply(this, args);\n    };\n    var proto = this.prototype;\n    var parentProto = Object.getPrototypeOf(proto);\n    if (!proto._initHooks || proto._initHooks === parentProto._initHooks) {\n      proto._initHooks = [];\n    }\n    proto._initHooks.push(init);\n    return this;\n  };\n  Class.include = function include() {\n    for (var i = 0; i < arguments.length; i++) {\n      extend(this.prototype, i < 0 || arguments.length <= i ? undefined : arguments[i]);\n    }\n    return this;\n  };\n  Class.mergeOptions = function mergeOptions(options) {\n    var proto = this.prototype;\n    var parentProto = Object.getPrototypeOf(proto);\n    if (!proto.options || proto.options === parentProto.options) {\n      proto.options = proto.options ? Object.create(proto.options) : {};\n    }\n    extend(proto.options, options);\n    return this;\n  };\n  return Class;\n}();\nvar registeredTypes = {};\nvar JSONAble = function JSONAble(Base) {\n  return function (_Base) {\n    _inheritsLoose(_class, _Base);\n    function _class() {\n      return _Base.apply(this, arguments) || this;\n    }\n    _class.registerJSONType = function registerJSONType(type) {\n      if (!type) {\n        return this;\n      }\n      if (registeredTypes[type]) {\n        console.error(type + \" has register. please use Different name for:\", this);\n        return this;\n      }\n      registeredTypes[type] = this;\n      return this;\n    };\n    _class.getJSONClass = function getJSONClass(type) {\n      if (!type) {\n        return null;\n      }\n      return registeredTypes[type];\n    };\n    var _proto = _class.prototype;\n    _proto.getJSONType = function getJSONType() {\n      if (this._jsonType === undefined) {\n        var clazz = Object.getPrototypeOf(this).constructor;\n        for (var p in registeredTypes) {\n          if (registeredTypes[p] === clazz) {\n            this._jsonType = p;\n            break;\n          }\n        }\n      }\n      if (!this._jsonType) {\n        throw new Error('Found an unregistered Layer/Geometry class!');\n      }\n      return this._jsonType;\n    };\n    return _class;\n  }(Base);\n};\nvar search = {};\nvar CollisionIndex = function () {\n  function CollisionIndex() {\n    this._tree = rbush(9, ['[0]', '[1]', '[2]', '[3]']);\n  }\n  var _proto = CollisionIndex.prototype;\n  _proto.collides = function collides(box) {\n    search.minX = box[0];\n    search.minY = box[1];\n    search.maxX = box[2];\n    search.maxY = box[3];\n    return this._tree.collides(search);\n  };\n  _proto.insertBox = function insertBox(box) {\n    var tree = this._tree;\n    tree.insert(box);\n    return this;\n  };\n  _proto.bulkInsertBox = function bulkInsertBox(boxes) {\n    this._tree.load(boxes);\n    return this;\n  };\n  _proto.clear = function clear() {\n    this._tree.clear();\n    return this;\n  };\n  return CollisionIndex;\n}();\nfunction Handlerable(Base) {\n  return function (_Base) {\n    _inheritsLoose(_class, _Base);\n    function _class() {\n      return _Base.apply(this, arguments) || this;\n    }\n    var _proto = _class.prototype;\n    _proto.addHandler = function addHandler(name, handlerClass) {\n      if (!handlerClass) {\n        return this;\n      }\n      if (!this._handlers) {\n        this._handlers = [];\n      }\n      if (this[name]) {\n        this[name].enable();\n        return this;\n      }\n      var handler = this[name] = new handlerClass(this);\n      this._handlers.push(handler);\n      if (this.options[name]) {\n        handler.enable();\n      }\n      return this;\n    };\n    _proto.removeHandler = function removeHandler(name) {\n      if (!name) {\n        return this;\n      }\n      var handler = this[name];\n      if (handler) {\n        var hit = this._handlers.indexOf(handler);\n        if (hit >= 0) {\n          this._handlers.splice(hit, 1);\n        }\n        this[name].remove();\n        delete this[name];\n      }\n      return this;\n    };\n    _proto._clearHandlers = function _clearHandlers() {\n      for (var i = 0, len = this._handlers.length; i < len; i++) {\n        this._handlers[i].remove();\n      }\n      this._handlers = [];\n    };\n    return _class;\n  }(Base);\n}\nvar START_EVENTS = 'touchstart mousedown';\nvar MOVE_EVENTS = {\n  mousedown: 'mousemove',\n  touchstart: 'touchmove',\n  pointerdown: 'touchmove',\n  MSPointerDown: 'touchmove'\n};\nvar END_EVENTS = {\n  mousedown: 'mouseup',\n  touchstart: 'touchend',\n  pointerdown: 'touchend',\n  MSPointerDown: 'touchend'\n};\nvar DragHandler = function (_Handler) {\n  _inheritsLoose(DragHandler, _Handler);\n  function DragHandler(dom, options) {\n    var _this;\n    if (options === void 0) {\n      options = {};\n    }\n    _this = _Handler.call(this, null) || this;\n    _this.dom = dom;\n    _this.options = options;\n    return _this;\n  }\n  var _proto = DragHandler.prototype;\n  _proto.enable = function enable() {\n    if (!this.dom) {\n      return this;\n    }\n    this._onMouseDown = function (e) {\n      return this.onMouseDown(e);\n    };\n    on(this.dom, START_EVENTS, this._onMouseDown, this);\n    return this;\n  };\n  _proto.disable = function disable() {\n    if (!this.dom) {\n      return this;\n    }\n    this._offEvents();\n    off(this.dom, START_EVENTS, this._onMouseDown);\n    delete this._onMouseDown;\n    return this;\n  };\n  _proto.onMouseDown = function onMouseDown(event) {\n    if (!this.options['rightclick'] && event.button === 2) {\n      return;\n    }\n    if (event.touches && event.touches.length > 1) {\n      return;\n    }\n    if (this.options['cancelOn'] && this.options['cancelOn'](event) === true) {\n      return;\n    }\n    var dom = this.dom;\n    if (dom.setCapture) {\n      dom.setCapture();\n    } else if (window.captureEvents) {\n      window.captureEvents(window['Event'].MOUSEMOVE | window['Event'].MOUSEUP);\n    }\n    dom['ondragstart'] = function () {\n      return false;\n    };\n    delete this.moved;\n    var actual = event.touches ? event.touches[0] : event;\n    this.startPos = new Point(actual.clientX, actual.clientY);\n    off(document, MOVE_EVENTS[event.type], this.onMouseMove, this);\n    off(document, END_EVENTS[event.type], this.onMouseUp, this);\n    on(document, MOVE_EVENTS[event.type], this.onMouseMove, this);\n    on(document, END_EVENTS[event.type], this.onMouseUp, this);\n    if (!this.options['ignoreMouseleave']) {\n      off(this.dom, 'mouseleave', this.onMouseUp, this);\n      on(this.dom, 'mouseleave', this.onMouseUp, this);\n    }\n    this.fire('mousedown', {\n      'domEvent': event,\n      'mousePos': new Point(actual.clientX, actual.clientY)\n    });\n  };\n  _proto.onMouseMove = function onMouseMove(event) {\n    if (event.touches && event.touches.length > 1) {\n      if (this.moved) {\n        this.interupted = true;\n        this.onMouseUp(event);\n      }\n      return;\n    }\n    var actual = event.touches ? event.touches[0] : event;\n    var newPos = new Point(actual.clientX, actual.clientY),\n      offset = newPos.sub(this.startPos);\n    if (!offset.x && !offset.y) {\n      return;\n    }\n    if (!this.moved) {\n      this.fire('dragstart', {\n        'domEvent': event,\n        'mousePos': this.startPos.copy()\n      });\n      this.moved = true;\n    } else {\n      this.fire('dragging', {\n        'domEvent': event,\n        'mousePos': new Point(actual.clientX, actual.clientY)\n      });\n    }\n  };\n  _proto.onMouseUp = function onMouseUp(event) {\n    var actual = event.changedTouches ? event.changedTouches[0] : event;\n    this._offEvents();\n    var param = {\n      'domEvent': event\n    };\n    if (isNumber(actual.clientX)) {\n      param['mousePos'] = new Point(parseInt(actual.clientX, 0), parseInt(actual.clientY, 0));\n    }\n    if (this.moved) {\n      param.interupted = this.interupted;\n      this.fire('dragend', param);\n      delete this.interupted;\n      delete this.moved;\n    }\n    this.fire('mouseup', param);\n  };\n  _proto._offEvents = function _offEvents() {\n    var dom = this.dom;\n    off(dom, 'mouseleave', this.onMouseUp, this);\n    if (typeof document === 'undefined' || typeof window === 'undefined') {\n      return;\n    }\n    for (var i in MOVE_EVENTS) {\n      off(document, MOVE_EVENTS[i], this.onMouseMove, this);\n      off(document, END_EVENTS[i], this.onMouseUp, this);\n    }\n    if (dom['releaseCapture']) {\n      dom['releaseCapture']();\n    } else if (window.captureEvents) {\n      window.captureEvents(window['Event'].MOUSEMOVE | window['Event'].MOUSEUP);\n    }\n  };\n  return DragHandler;\n}(Handler$1);\nvar Coordinate = function (_Position) {\n  _inheritsLoose(Coordinate, _Position);\n  function Coordinate() {\n    return _Position.apply(this, arguments) || this;\n  }\n  Coordinate.toNumberArrays = function toNumberArrays(coordinates) {\n    if (!Array.isArray(coordinates)) {\n      return [coordinates.x, coordinates.y];\n    }\n    return forEachCoord(coordinates, function (coord) {\n      return [coord.x, coord.y];\n    });\n  };\n  Coordinate.toCoordinates = function toCoordinates(coordinates) {\n    if (isNumber(coordinates[0]) && isNumber(coordinates[1])) {\n      return new Coordinate(coordinates);\n    }\n    if (coordinates instanceof Coordinate) {\n      return coordinates;\n    }\n    var result = [];\n    for (var i = 0, len = coordinates.length; i < len; i++) {\n      var child = coordinates[i];\n      if (Array.isArray(child)) {\n        if (isNumber(child[0])) {\n          result.push(new Coordinate(child));\n        } else {\n          result.push(Coordinate.toCoordinates(child));\n        }\n      } else if (child instanceof Coordinate) {\n        result.push(child);\n      } else {\n        result.push(new Coordinate(child));\n      }\n    }\n    return result;\n  };\n  return Coordinate;\n}(Position);\nvar CRS = function () {\n  function CRS(type, properties) {\n    this.type = type;\n    this.properties = properties;\n  }\n  CRS.createProj4 = function createProj4(proj) {\n    return new CRS('proj4', {\n      'proj': proj\n    });\n  };\n  CRS.fromProjectionCode = function fromProjectionCode(code) {\n    if (!code) {\n      return null;\n    }\n    code = code.toUpperCase().replace(':', '');\n    return CRS[code] || null;\n  };\n  return CRS;\n}();\nCRS.WGS84 = CRS.createProj4('+proj=longlat +datum=WGS84 +no_defs');\nCRS.EPSG4326 = CRS.WGS84;\nCRS.EPSG3857 = CRS.createProj4('+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs');\nCRS.IDENTITY = CRS.createProj4('+proj=identity +no_defs');\nCRS.CGCS2000 = CRS.createProj4('+proj=longlat +datum=CGCS2000');\nCRS.EPSG4490 = CRS.CGCS2000;\nCRS.BD09LL = CRS.createProj4('+proj=longlat +datum=BD09');\nCRS.GCJ02 = CRS.createProj4('+proj=longlat +datum=GCJ02');\nvar TEMP_POINT0 = new Point(0, 0);\nvar TEMP_COORD0 = new Coordinate(0, 0);\nvar TEMP_COORD1 = new Coordinate(0, 0);\nvar TEMP_COORD2 = new Coordinate(0, 0);\nvar TEMP_COORD3 = new Coordinate(0, 0);\nvar TEMP_COORD4 = new Coordinate(0, 0);\nvar TEMP_COORD5 = new Coordinate(0, 0);\nvar TEMP_COORD6 = new Coordinate(0, 0);\nvar TEMP_COORD7 = new Coordinate(0, 0);\nvar MINMAX = [];\nvar TEMP_EXTENT;\nvar TEMP_COMBINE = [];\nvar Extent = function () {\n  function Extent(p1, p2, p3, p4) {\n    this._clazz = Coordinate;\n    var l = arguments.length;\n    var proj = l > 0 ? arguments[l - 1] : null;\n    if (proj && proj.unproject) {\n      this.projection = arguments[l - 1];\n    }\n    this._dirty = true;\n    this._initialize(p1, p2, p3, p4);\n  }\n  var _proto = Extent.prototype;\n  _proto._initialize = function _initialize(p1, p2, p3, p4) {\n    this.xmin = null;\n    this.xmax = null;\n    this.ymin = null;\n    this.ymax = null;\n    if (isNil(p1)) {\n      return;\n    }\n    var projection = this.projection;\n    if (isNumber(p1) && isNumber(p2) && isNumber(p3) && isNumber(p4)) {\n      if (projection) {\n        this.set(p1, p2, p3, p4);\n      } else {\n        this.set(Math.min(p1, p3), Math.min(p2, p4), Math.max(p1, p3), Math.max(p2, p4));\n      }\n      return;\n    } else if (Array.isArray(p1)) {\n      if (projection) {\n        this.set(p1[0], p1[1], p1[2], p1[3]);\n      } else {\n        this.set(Math.min(p1[0], p1[2]), Math.min(p1[1], p1[3]), Math.max(p1[0], p1[2]), Math.max(p1[1], p1[3]));\n      }\n    } else if (isNumber(p1.x) && isNumber(p2.x) && isNumber(p1.y) && isNumber(p2.y)) {\n      if (projection) {\n        this.set(p1.x, p1.y, p2.x, p2.y);\n      } else {\n        if (p1.x > p2.x) {\n          this['xmin'] = p2.x;\n          this['xmax'] = p1.x;\n        } else {\n          this['xmin'] = p1.x;\n          this['xmax'] = p2.x;\n        }\n        if (p1.y > p2.y) {\n          this['ymin'] = p2.y;\n          this['ymax'] = p1.y;\n        } else {\n          this['ymin'] = p1.y;\n          this['ymax'] = p2.y;\n        }\n      }\n    } else if (isNumber(p1['xmin']) && isNumber(p1['xmax']) && isNumber(p1['ymin']) && isNumber(p1['ymax'])) {\n      this.set(p1['xmin'], p1['ymin'], p1['xmax'], p1['ymax']);\n    }\n  };\n  _proto._add = function _add(p) {\n    this._dirty = true;\n    if (!isNil(p.x)) {\n      this['xmin'] += p.x;\n      this['ymin'] += p.y;\n      this['xmax'] += p.x;\n      this['ymax'] += p.y;\n    } else if (!isNil(p.xmin)) {\n      this['xmin'] += p.xmin;\n      this['ymin'] += p.ymin;\n      this['xmax'] += p.xmax;\n      this['ymax'] += p.ymax;\n    } else if (!isNil(p[0])) {\n      this['xmin'] += p[0];\n      this['ymin'] += p[1];\n      this['xmax'] += p[0];\n      this['ymax'] += p[1];\n    }\n    return this;\n  };\n  _proto.add = function add() {\n    var e = new this.constructor(this['xmin'], this['ymin'], this['xmax'], this['ymax'], this.projection);\n    return e._add.apply(e, arguments);\n  };\n  _proto._scale = function _scale(s) {\n    this._dirty = true;\n    this['xmin'] *= s;\n    this['ymin'] *= s;\n    this['xmax'] *= s;\n    this['ymax'] *= s;\n    return this;\n  };\n  _proto._sub = function _sub(p) {\n    this._dirty = true;\n    if (!isNil(p.x)) {\n      this['xmin'] -= p.x;\n      this['ymin'] -= p.y;\n      this['xmax'] -= p.x;\n      this['ymax'] -= p.y;\n    } else if (!isNil(p.xmin)) {\n      this['xmin'] -= p.xmin;\n      this['ymin'] -= p.ymin;\n      this['xmax'] -= p.xmax;\n      this['ymax'] -= p.ymax;\n    } else if (!isNil(p[0])) {\n      this['xmin'] -= p[0];\n      this['ymin'] -= p[1];\n      this['xmax'] -= p[0];\n      this['ymax'] -= p[1];\n    }\n    return this;\n  };\n  _proto._substract = function _substract() {\n    return this._sub.apply(this, arguments);\n  };\n  _proto.sub = function sub() {\n    var e = new this.constructor(this['xmin'], this['ymin'], this['xmax'], this['ymax'], this.projection);\n    return e._sub.apply(e, arguments);\n  };\n  _proto.substract = function substract() {\n    return this.sub.apply(this, arguments);\n  };\n  _proto.round = function round() {\n    return new this.constructor(Math.round(this['xmin']), Math.round(this['ymin']), Math.round(this['xmax']), Math.round(this['ymax']), this.projection);\n  };\n  _proto._round = function _round() {\n    this._dirty = true;\n    this['xmin'] = Math.round(this['xmin']);\n    this['ymin'] = Math.round(this['ymin']);\n    this['xmax'] = Math.round(this['xmax']);\n    this['ymax'] = Math.round(this['ymax']);\n    return this;\n  };\n  _proto.getMin = function getMin(out) {\n    if (out) {\n      out.set(this['xmin'], this['ymin']);\n      return out;\n    }\n    return new this._clazz(this['xmin'], this['ymin']);\n  };\n  _proto.getMax = function getMax(out) {\n    if (out) {\n      out.set(this['xmax'], this['ymax']);\n      return out;\n    }\n    return new this._clazz(this['xmax'], this['ymax']);\n  };\n  _proto.getCenter = function getCenter(out) {\n    var x = (this['xmin'] + this['xmax']) / 2;\n    var y = (this['ymin'] + this['ymax']) / 2;\n    if (out) {\n      out.set(x, y);\n      return out;\n    }\n    return new this._clazz(x, y);\n  };\n  _proto.isValid = function isValid() {\n    return !isNil(this['xmin']) && !isNil(this['ymin']) && !isNil(this['xmax']) && !isNil(this['ymax']);\n  };\n  _proto.equals = function equals(ext2) {\n    return this['xmin'] === ext2['xmin'] && this['xmax'] === ext2['xmax'] && this['ymin'] === ext2['ymin'] && this['ymax'] === ext2['ymax'];\n  };\n  _proto.intersects = function intersects(ext2) {\n    this._project(this);\n    this._project(ext2);\n    var rxmin = Math.max(this['pxmin'], ext2['pxmin']);\n    var rymin = Math.max(this['pymin'], ext2['pymin']);\n    var rxmax = Math.min(this['pxmax'], ext2['pxmax']);\n    var rymax = Math.min(this['pymax'], ext2['pymax']);\n    var intersects = !(rxmin > rxmax || rymin > rymax);\n    return intersects;\n  };\n  _proto.within = function within(extent) {\n    this._project(this);\n    this._project(extent);\n    return this.pxmin >= extent.pxmin && this.pxmax <= extent.pxmax && this.pymin >= extent.pymin && this.pymax <= extent.pymax;\n  };\n  _proto.contains = function contains(c) {\n    if (!c) {\n      return false;\n    }\n    this._project(this);\n    var proj = this.projection;\n    if (proj) {\n      if (c.x !== undefined) {\n        var coord = TEMP_COORD0;\n        if (Array.isArray(c)) {\n          coord.x = c[0];\n          coord.y = c[1];\n        } else {\n          coord.x = c.x;\n          coord.y = c.y;\n        }\n        c = proj.project(coord, coord);\n      } else if (c.xmin !== undefined) {\n        this._project(c);\n      }\n    }\n    return (c.x || c.pxmin || 0) >= this.pxmin && (c.x || c.pxmax || 0) <= this.pxmax && (c.y || c.pymin || 0) >= this.pymin && (c.y || c.pymax || 0) <= this.pymax;\n  };\n  _proto.getWidth = function getWidth() {\n    return Math.abs(this['xmax'] - this['xmin']);\n  };\n  _proto.getHeight = function getHeight() {\n    return Math.abs(this['ymax'] - this['ymin']);\n  };\n  _proto.getSize = function getSize() {\n    return new Size(this.getWidth(), this.getHeight());\n  };\n  _proto.set = function set(xmin, ymin, xmax, ymax) {\n    this.xmin = xmin;\n    this.ymin = ymin;\n    this.xmax = xmax;\n    this.ymax = ymax;\n    this._dirty = true;\n    return this;\n  };\n  _proto.__combine = function __combine(extent) {\n    if (extent.x !== undefined) {\n      TEMP_EXTENT.xmin = TEMP_EXTENT.xmax = extent.x;\n      TEMP_EXTENT.ymin = TEMP_EXTENT.ymax = extent.y;\n      extent = TEMP_EXTENT;\n    }\n    this._project(extent);\n    this._project(this);\n    var inited = isNumber(this.pxmin);\n    var xmin, ymin, xmax, ymax;\n    if (!inited) {\n      xmin = extent['pxmin'];\n      ymin = extent['pymin'];\n      xmax = extent['pxmax'];\n      ymax = extent['pymax'];\n    } else {\n      xmin = Math.min(this['pxmin'], extent['pxmin']);\n      ymin = Math.min(this['pymin'], extent['pymin']);\n      xmax = Math.max(this['pxmax'], extent['pxmax']);\n      ymax = Math.max(this['pymax'], extent['pymax']);\n    }\n    var proj = this.projection;\n    if (proj) {\n      TEMP_COORD1.set(xmin, ymin);\n      TEMP_COORD2.set(xmax, ymax);\n      var min = proj.unproject(TEMP_COORD1, TEMP_COORD1),\n        max = proj.unproject(TEMP_COORD2, TEMP_COORD2);\n      xmin = min.x;\n      ymin = min.y;\n      xmax = max.x;\n      ymax = max.y;\n    }\n    TEMP_COMBINE[0] = xmin;\n    TEMP_COMBINE[1] = ymin;\n    TEMP_COMBINE[2] = xmax;\n    TEMP_COMBINE[3] = ymax;\n    return TEMP_COMBINE;\n  };\n  _proto._combine = function _combine(extent) {\n    if (!extent || extent.isValid && !extent.isValid()) {\n      return this;\n    }\n    var ext = this.__combine(extent);\n    this.set(ext[0], ext[1], ext[2], ext[3]);\n    this._dirty = true;\n    return this;\n  };\n  _proto.combine = function combine(extent) {\n    if (!extent || extent.isValid && !extent.isValid()) {\n      return this;\n    }\n    var ext = this.__combine(extent);\n    return new this.constructor(ext[0], ext[1], ext[2], ext[3], this.projection);\n  };\n  _proto.intersection = function intersection(extent) {\n    if (!this.intersects(extent)) {\n      return null;\n    }\n    TEMP_COORD3.x = Math.max(this['pxmin'], extent['pxmin']);\n    TEMP_COORD3.y = Math.max(this['pymin'], extent['pymin']);\n    TEMP_COORD4.x = Math.min(this['pxmax'], extent['pxmax']);\n    TEMP_COORD4.y = Math.min(this['pymax'], extent['pymax']);\n    var min = TEMP_COORD3,\n      max = TEMP_COORD4;\n    var proj = this.projection;\n    if (proj) {\n      min = proj.unproject(min, min);\n      max = proj.unproject(max, max);\n    }\n    return new this.constructor(min, max, proj);\n  };\n  _proto.expand = function expand(distance) {\n    var w, h;\n    if (!isNumber(distance)) {\n      w = distance['width'] || distance['x'] || distance[0] || 0;\n      h = distance['height'] || distance['y'] || distance[1] || 0;\n    } else {\n      w = h = distance;\n    }\n    return new this.constructor(this['xmin'] - w, this['ymin'] - h, this['xmax'] + w, this['ymax'] + h, this.projection);\n  };\n  _proto._expand = function _expand(distance) {\n    var w, h;\n    if (!isNumber(distance)) {\n      w = distance['width'] || distance['x'] || distance[0] || 0;\n      h = distance['height'] || distance['y'] || distance[1] || 0;\n    } else {\n      w = h = distance;\n    }\n    this['xmin'] -= w;\n    this['ymin'] -= h;\n    this['xmax'] += w;\n    this['ymax'] += h;\n    this._dirty = true;\n    return this;\n  };\n  _proto.toJSON = function toJSON() {\n    return {\n      'xmin': this['xmin'],\n      'ymin': this['ymin'],\n      'xmax': this['xmax'],\n      'ymax': this['ymax']\n    };\n  };\n  _proto.toArray = function toArray(out) {\n    var xmin = this['xmin'],\n      ymin = this['ymin'],\n      xmax = this['xmax'],\n      ymax = this['ymax'];\n    if (!out) {\n      return [new this._clazz([xmin, ymax]), new this._clazz([xmax, ymax]), new this._clazz([xmax, ymin]), new this._clazz([xmin, ymin]), new this._clazz([xmin, ymax])];\n    } else {\n      out[0].x = xmin;\n      out[0].y = ymax;\n      out[1].x = xmax;\n      out[1].y = ymax;\n      out[2].x = xmax;\n      out[2].y = ymin;\n      out[3].x = xmin;\n      out[3].y = ymin;\n      out[4].x = xmin;\n      out[4].y = ymax;\n      return out;\n    }\n  };\n  _proto.toString = function toString() {\n    return this.xmin + \",\" + this.ymin + \",\" + this.xmax + \",\" + this.ymax;\n  };\n  _proto.copy = function copy() {\n    return new this.constructor(this['xmin'], this['ymin'], this['xmax'], this['ymax'], this.projection);\n  };\n  _proto.convertTo = function convertTo(fn, out) {\n    if (!this.isValid()) {\n      return null;\n    }\n    var e = out || new this.constructor();\n    if (out) {\n      e.set(null, null, null, null);\n    }\n    var coord;\n    if (this._clazz === Coordinate) {\n      coord = TEMP_COORD5;\n    } else if (this._clazz === Point) {\n      coord = TEMP_POINT0;\n    }\n    coord.x = this.xmin;\n    coord.y = this.ymax;\n    e._combine(fn(coord));\n    coord.x = this.xmax;\n    e._combine(fn(coord));\n    coord.y = this.ymin;\n    e._combine(fn(coord));\n    coord.x = this.xmin;\n    e._combine(fn(coord));\n    return e;\n  };\n  _proto._project = function _project(ext) {\n    if (!ext || !ext.isValid()) {\n      if (ext) {\n        ext.pxmin = ext.pxmax = ext.pymin = ext.pymax = null;\n      }\n      return;\n    }\n    var proj = this.projection;\n    if (proj) {\n      if (ext._dirty) {\n        TEMP_COORD6.set(ext.xmax, ext.ymin);\n        TEMP_COORD7.set(ext.xmin, ext.ymax);\n        MINMAX[0] = TEMP_COORD6;\n        MINMAX[1] = TEMP_COORD7;\n        var minmax = proj.projectCoords(MINMAX);\n        var min = minmax[0],\n          max = minmax[1];\n        ext.pxmin = Math.min(min.x, max.x);\n        ext.pymin = Math.min(min.y, max.y);\n        ext.pxmax = Math.max(min.x, max.x);\n        ext.pymax = Math.max(min.y, max.y);\n      }\n      delete ext._dirty;\n    } else {\n      ext.pxmin = ext.xmin;\n      ext.pxmax = ext.xmax;\n      ext.pymin = ext.ymin;\n      ext.pymax = ext.ymax;\n    }\n  };\n  return Extent;\n}();\nTEMP_EXTENT = new Extent(0, 0, 0, 0);\nvar PointExtent = function (_Extent) {\n  _inheritsLoose(PointExtent, _Extent);\n  function PointExtent(p1, p2, p3, p4) {\n    var _this;\n    _this = _Extent.call(this, p1, p2, p3, p4) || this;\n    _this._clazz = Point;\n    return _this;\n  }\n  return PointExtent;\n}(Extent);\nvar Transformation = function () {\n  function Transformation(matrix) {\n    this.matrix = matrix;\n  }\n  var _proto = Transformation.prototype;\n  _proto.transform = function transform(coordinates, scale, out) {\n    var x = this.matrix[0] * (coordinates.x - this.matrix[2]) / scale;\n    var y = -this.matrix[1] * (coordinates.y - this.matrix[3]) / scale;\n    if (out) {\n      out.x = x;\n      out.y = y;\n      return out;\n    }\n    return new Point(x, y);\n  };\n  _proto.untransform = function untransform(point, scale, out) {\n    var x = point.x * scale / this.matrix[0] + this.matrix[2];\n    var y = point.y * scale / -this.matrix[1] + this.matrix[3];\n    if (out) {\n      out.x = x;\n      out.y = y;\n      return out;\n    }\n    return new Coordinate(x, y);\n  };\n  return Transformation;\n}();\nvar Common = {\n  project: function project() {},\n  unproject: function unproject() {},\n  projectCoords: function projectCoords(coordinates, antiMeridian) {\n    var _this = this;\n    if (!coordinates) {\n      return [];\n    }\n    if (!Array.isArray(coordinates)) {\n      return this.project(coordinates);\n    }\n    if (coordinates.length === 0) {\n      return [];\n    }\n    if (!this.isSphere()) {\n      return forEachCoord(coordinates, this.project, this);\n    }\n    if (Array.isArray(coordinates[0])) {\n      return coordinates.map(function (coords) {\n        return _this.projectCoords(coords, antiMeridian);\n      });\n    } else {\n      var antiMeridianEnable = antiMeridian !== false;\n      var circum = this.getCircum();\n      var extent = this.getSphereExtent(),\n        sx = extent.sx,\n        sy = extent.sy;\n      var wrapX, wrapY;\n      var pre = coordinates[0],\n        current,\n        dx,\n        dy,\n        p;\n      var prj = [this.project(pre)];\n      for (var i = 1, l = coordinates.length; i < l; i++) {\n        current = coordinates[i];\n        dx = current.x - pre.x;\n        dy = current.y - pre.y;\n        p = this.project(current);\n        if (Math.abs(dx) > 180 && antiMeridianEnable) {\n          if (wrapX === undefined) {\n            wrapX = current.x > pre.x;\n          }\n          if (wrapX) {\n            p._add(-circum.x * sign(dx) * sx, 0);\n            current._add(-360 * sign(dx), 0);\n          }\n        }\n        if (Math.abs(dy) > 90 && antiMeridianEnable) {\n          if (wrapY === undefined) {\n            wrapY = current.y < pre.y;\n          }\n          if (wrapY) {\n            p._add(0, -circum.y * sign(dy) * sy);\n            current._add(0, -180 * sign(dy));\n          }\n        }\n        pre = current;\n        prj.push(p);\n      }\n      return prj;\n    }\n  },\n  unprojectCoords: function unprojectCoords(projCoords) {\n    if (!projCoords) {\n      return [];\n    }\n    if (!Array.isArray(projCoords)) {\n      return this.unproject(projCoords);\n    }\n    return forEachCoord(projCoords, this.unproject, this);\n  },\n  isSphere: function isSphere() {\n    return !!this.sphere;\n  },\n  isOutSphere: function isOutSphere(pcoord) {\n    if (!this.isSphere()) {\n      return false;\n    }\n    var extent = this.getSphereExtent();\n    return !extent.contains(pcoord);\n  },\n  wrapCoord: function wrapCoord(pcoord) {\n    if (!this.isSphere()) {\n      return pcoord;\n    }\n    var extent = this.getSphereExtent();\n    var wrapped = new Coordinate(pcoord);\n    if (!extent.contains(wrapped)) {\n      wrapped.x = wrap(pcoord.x, extent.xmin, extent.xmax);\n      wrapped.y = wrap(pcoord.y, extent.ymin, extent.ymax);\n    }\n    return wrapped;\n  },\n  getCircum: function getCircum() {\n    if (!this.circum && this.isSphere()) {\n      var extent = this.getSphereExtent();\n      this.circum = {\n        x: extent.getWidth(),\n        y: extent.getHeight()\n      };\n    }\n    return this.circum;\n  },\n  getSphereExtent: function getSphereExtent() {\n    if (!this.extent && this.isSphere()) {\n      var max = this.project(new Coordinate(180, 90)),\n        min = this.project(new Coordinate(-180, -90));\n      this.extent = new Extent(min, max, this);\n      this.extent.sx = max.x > min.x ? 1 : -1;\n      this.extent.sy = max.y > min.y ? 1 : -1;\n    }\n    return this.extent;\n  }\n};\nvar Common$1 = {\n  measureLength: function measureLength(c1, c2) {\n    if (!Array.isArray(c1)) {\n      return this.measureLenBetween(c1, c2);\n    }\n    var len = 0;\n    for (var i = 0, l = c1.length; i < l - 1; i++) {\n      len += this.measureLenBetween(c1[i], c1[i + 1]);\n    }\n    return len;\n  }\n};\nvar Identity = extend({\n  'measure': 'IDENTITY',\n  measureLenBetween: function measureLenBetween(c1, c2) {\n    if (!c1 || !c2) {\n      return 0;\n    }\n    try {\n      return Math.sqrt(Math.pow(c1.x - c2.x, 2) + Math.pow(c1.y - c2.y, 2));\n    } catch (err) {\n      return 0;\n    }\n  },\n  measureArea: function measureArea(coordinates) {\n    if (!Array.isArray(coordinates)) {\n      return 0;\n    }\n    var area = 0;\n    for (var i = 0, len = coordinates.length; i < len; i++) {\n      var c1 = coordinates[i];\n      var c2 = null;\n      if (i === len - 1) {\n        c2 = coordinates[0];\n      } else {\n        c2 = coordinates[i + 1];\n      }\n      area += c1.x * c2.y - c1.y * c2.x;\n    }\n    return Math.abs(area / 2);\n  },\n  locate: function locate(c, xDist, yDist, out) {\n    out = out || new Coordinate(0, 0);\n    out.set(c.x, c.y);\n    return this._locate(out, xDist, yDist);\n  },\n  _locate: function _locate(c, xDist, yDist) {\n    if (!c) {\n      return null;\n    }\n    if (!xDist) {\n      xDist = 0;\n    }\n    if (!yDist) {\n      yDist = 0;\n    }\n    if (!xDist && !yDist) {\n      return c;\n    }\n    c.x = c.x + xDist;\n    c.y = c.y + yDist;\n    return c;\n  },\n  rotate: function rotate(c, pivot, angle) {\n    c = new Coordinate(c.x, c.y);\n    return this._rotate(c, pivot, angle);\n  },\n  _rotate: function () {\n    var tmp = new Point(0, 0);\n    return function (c, pivot, angle) {\n      tmp.x = c.x - pivot.x;\n      tmp.y = c.y - pivot.y;\n      tmp._rotate(angle * Math.PI / 180);\n      c.x = pivot.x + tmp.x;\n      c.y = pivot.y + tmp.y;\n      return c;\n    };\n  }()\n}, Common$1);\nvar Sphere = function () {\n  function Sphere(radius) {\n    this.radius = radius;\n  }\n  var _proto = Sphere.prototype;\n  _proto.measureLenBetween = function measureLenBetween(c1, c2) {\n    if (!c1 || !c2) {\n      return 0;\n    }\n    var b = toRadian(c1.y);\n    var d = toRadian(c2.y),\n      e = b - d,\n      f = toRadian(c1.x) - toRadian(c2.x);\n    b = 2 * Math.asin(Math.sqrt(Math.pow(Math.sin(e / 2), 2) + Math.cos(b) * Math.cos(d) * Math.pow(Math.sin(f / 2), 2)));\n    b *= this.radius;\n    return b;\n  };\n  _proto.measureArea = function measureArea(coordinates) {\n    var a = toRadian(this.radius);\n    var b = 0,\n      c = coordinates,\n      d = c.length;\n    if (d < 3) {\n      return 0;\n    }\n    var i;\n    for (i = 0; i < d - 1; i++) {\n      var e = c[i],\n        f = c[i + 1];\n      b += e.x * a * Math.cos(toRadian(e.y)) * f.y * a - f.x * a * Math.cos(toRadian(f.y)) * e.y * a;\n    }\n    d = c[i];\n    c = c[0];\n    b += d.x * a * Math.cos(toRadian(d.y)) * c.y * a - c.x * a * Math.cos(toRadian(c.y)) * d.y * a;\n    return 0.5 * Math.abs(b);\n  };\n  _proto.locate = function locate(c, xDist, yDist, out) {\n    out = out || new Coordinate(0, 0);\n    out.set(c.x, c.y);\n    return this._locate(out, xDist, yDist);\n  };\n  _proto._locate = function _locate(c, xDist, yDist) {\n    if (!c) {\n      return null;\n    }\n    if (!xDist) {\n      xDist = 0;\n    }\n    if (!yDist) {\n      yDist = 0;\n    }\n    if (!xDist && !yDist) {\n      return c;\n    }\n    var x, y;\n    var ry = toRadian(c.y);\n    if (yDist !== 0) {\n      var dy = Math.abs(yDist);\n      var sy = Math.sin(dy / (2 * this.radius)) * 2;\n      ry = ry + sy * (yDist > 0 ? 1 : -1);\n      y = wrap(ry * 180 / Math.PI, -90, 90);\n    } else {\n      y = c.y;\n    }\n    if (xDist !== 0) {\n      var dx = Math.abs(xDist);\n      var rx = toRadian(c.x);\n      var sx = 2 * Math.sqrt(Math.pow(Math.sin(dx / (2 * this.radius)), 2) / Math.pow(Math.cos(ry), 2));\n      rx = rx + sx * (xDist > 0 ? 1 : -1);\n      x = wrap(rx * 180 / Math.PI, -180, 180);\n    } else {\n      x = c.x;\n    }\n    c.x = x;\n    c.y = y;\n    return c;\n  };\n  _proto.rotate = function rotate(c, pivot, angle) {\n    c = new Coordinate(c);\n    return this._rotate(c, pivot, angle);\n  };\n  _proto._rotate = function _rotate(c, pivot, angle) {\n    var initialAngle = rhumbBearing(pivot, c);\n    var finalAngle = initialAngle - angle;\n    var distance = this.measureLenBetween(pivot, c);\n    c.x = pivot.x;\n    c.y = pivot.y;\n    return calculateRhumbDestination(c, distance, finalAngle, this.radius);\n  };\n  return Sphere;\n}();\nfunction rhumbBearing(start, end, options) {\n  if (options === void 0) {\n    options = {};\n  }\n  var bear360;\n  if (options.final) bear360 = calculateRhumbBearing(end, start);else bear360 = calculateRhumbBearing(start, end);\n  var bear180 = bear360 > 180 ? -(360 - bear360) : bear360;\n  return bear180;\n}\nfunction calculateRhumbBearing(from, to) {\n  var phi1 = toRadian(from.y);\n  var phi2 = toRadian(to.y);\n  var deltaLambda = toRadian(to.x - from.x);\n  if (deltaLambda > Math.PI) deltaLambda -= 2 * Math.PI;\n  if (deltaLambda < -Math.PI) deltaLambda += 2 * Math.PI;\n  var deltaPsi = Math.log(Math.tan(phi2 / 2 + Math.PI / 4) / Math.tan(phi1 / 2 + Math.PI / 4));\n  var theta = Math.atan2(deltaLambda, deltaPsi);\n  return (toDegree(theta) + 360) % 360;\n}\nfunction calculateRhumbDestination(origin, distance, bearing, radius) {\n  var delta = distance / radius;\n  var lambda1 = origin.x * Math.PI / 180;\n  var phi1 = toRadian(origin.y);\n  var theta = toRadian(bearing);\n  var DeltaPhi = delta * Math.cos(theta);\n  var phi2 = phi1 + DeltaPhi;\n  if (Math.abs(phi2) > Math.PI / 2) phi2 = phi2 > 0 ? Math.PI - phi2 : -Math.PI - phi2;\n  var DeltaPsi = Math.log(Math.tan(phi2 / 2 + Math.PI / 4) / Math.tan(phi1 / 2 + Math.PI / 4));\n  var q = Math.abs(DeltaPsi) > 10e-12 ? DeltaPhi / DeltaPsi : Math.cos(phi1);\n  var DeltaLambda = delta * Math.sin(theta) / q;\n  var lambda2 = lambda1 + DeltaLambda;\n  origin.x = (lambda2 * 180 / Math.PI + 540) % 360 - 180;\n  origin.y = phi2 * 180 / Math.PI;\n  return origin;\n}\nvar WGS84Sphere = extend({\n  'measure': 'EPSG:4326',\n  sphere: new Sphere(6378137),\n  measureLenBetween: function measureLenBetween() {\n    return this.sphere.measureLenBetween.apply(this.sphere, arguments);\n  },\n  measureArea: function measureArea() {\n    return this.sphere.measureArea.apply(this.sphere, arguments);\n  },\n  _locate: function _locate() {\n    return this.sphere._locate.apply(this.sphere, arguments);\n  },\n  locate: function locate() {\n    return this.sphere.locate.apply(this.sphere, arguments);\n  },\n  _rotate: function _rotate() {\n    return this.sphere._rotate.apply(this.sphere, arguments);\n  },\n  rotate: function rotate() {\n    return this.sphere.rotate.apply(this.sphere, arguments);\n  }\n}, Common$1);\nvar BaiduSphere = extend({\n  'measure': 'BAIDU',\n  sphere: new Sphere(6370996.81),\n  measureLenBetween: function measureLenBetween() {\n    return this.sphere.measureLenBetween.apply(this.sphere, arguments);\n  },\n  measureArea: function measureArea() {\n    return this.sphere.measureArea.apply(this.sphere, arguments);\n  },\n  _locate: function _locate() {\n    return this.sphere._locate.apply(this.sphere, arguments);\n  },\n  locate: function locate() {\n    return this.sphere.locate.apply(this.sphere, arguments);\n  },\n  _rotate: function _rotate() {\n    return this.sphere._rotate.apply(this.sphere, arguments);\n  },\n  rotate: function rotate() {\n    return this.sphere.rotate.apply(this.sphere, arguments);\n  }\n}, Common$1);\nvar DEFAULT = WGS84Sphere;\nvar measurers = {};\nfunction registerMeasurer(m) {\n  measurers[m.measure] = m;\n}\nregisterMeasurer(Identity);\nregisterMeasurer(WGS84Sphere);\nregisterMeasurer(BaiduSphere);\nvar Measurer = {\n  getInstance: function getInstance(name) {\n    if (!name) {\n      return DEFAULT;\n    }\n    for (var p in measurers) {\n      if (hasOwn(measurers, p)) {\n        var mName = measurers[p]['measure'];\n        if (!mName) {\n          continue;\n        }\n        if (name.toLowerCase() === mName.toLowerCase()) {\n          return measurers[p];\n        }\n      }\n    }\n    return null;\n  }\n};\nvar index$2 = /*#__PURE__*/Object.freeze({\n  Identity: Identity,\n  DEFAULT: DEFAULT,\n  Measurer: Measurer,\n  WGS84Sphere: WGS84Sphere,\n  BaiduSphere: BaiduSphere\n});\nvar delta = 1E-7;\nvar EPSG3857 = extend({}, Common, {\n  code: 'EPSG:3857',\n  rad: Math.PI / 180,\n  metersPerDegree: 6378137 * Math.PI / 180,\n  maxLatitude: 85.0511287798,\n  project: function project(lnglat, out) {\n    var rad = this.rad,\n      metersPerDegree = this.metersPerDegree,\n      max = this.maxLatitude;\n    var lng = lnglat.x,\n      lat = Math.max(Math.min(max, lnglat.y), -max);\n    var c;\n    if (lat === 0) {\n      c = 0;\n    } else {\n      c = Math.log(Math.tan((90 + lat) * rad / 2)) / rad;\n    }\n    var x = lng * metersPerDegree;\n    var y = c * metersPerDegree;\n    if (out) {\n      out.x = x;\n      out.y = y;\n      return out;\n    }\n    return new Coordinate(x, y);\n  },\n  unproject: function unproject(pLnglat, out) {\n    var rad = this.rad;\n    var metersPerDegree = this.metersPerDegree;\n    var x = pLnglat.x / metersPerDegree;\n    var y = pLnglat.y;\n    var c;\n    if (y === 0) {\n      c = 0;\n    } else {\n      c = y / metersPerDegree;\n      c = (2 * Math.atan(Math.exp(c * rad)) - Math.PI / 2) / rad;\n    }\n    if (Math.abs(Math.abs(x) - 180) < delta) {\n      x = sign(x) * 180;\n    }\n    if (Math.abs(Math.abs(c) - this.maxLatitude) < delta) {\n      c = sign(c) * this.maxLatitude;\n    }\n    var rx = wrap(x, -180, 180);\n    var ry = wrap(c, -this.maxLatitude, this.maxLatitude);\n    if (out) {\n      out.x = rx;\n      out.y = ry;\n      return out;\n    }\n    return new Coordinate(rx, ry);\n  }\n}, WGS84Sphere);\nvar PROJ4326 = extend({}, Common, {\n  code: 'EPSG:4326',\n  project: function project(p, out) {\n    if (out) {\n      out.x = p.x;\n      out.y = p.y;\n      return out;\n    }\n    return new Coordinate(p);\n  },\n  unproject: function unproject(p, out) {\n    if (out) {\n      out.x = p.x;\n      out.y = p.y;\n      return out;\n    }\n    return new Coordinate(p);\n  }\n}, WGS84Sphere);\nvar Projection_EPSG4490 = extend({}, PROJ4326, {\n  code: 'EPSG:4490'\n});\nvar Projection_Baidu = extend({}, Common, {\n  code: 'BAIDU',\n  project: function project(p, out) {\n    return this.convertLL2MC(p, out);\n  },\n  unproject: function unproject(p, out) {\n    return this.convertMC2LL(p, out);\n  }\n}, BaiduSphere, {\n  EARTHRADIUS: 6370996.81,\n  MCBAND: [12890594.86, 8362377.87, 5591021, 3481989.83, 1678043.12, 0],\n  LLBAND: [75, 60, 45, 30, 15, 0],\n  MC2LL: [[1.410526172116255e-8, 0.00000898305509648872, -1.9939833816331, 200.9824383106796, -187.2403703815547, 91.6087516669843, -23.38765649603339, 2.57121317296198, -0.03801003308653, 17337981.2], [-7.435856389565537e-9, 0.000008983055097726239, -0.78625201886289, 96.32687599759846, -1.85204757529826, -59.36935905485877, 47.40033549296737, -16.50741931063887, 2.28786674699375, 10260144.86], [-3.030883460898826e-8, 0.00000898305509983578, 0.30071316287616, 59.74293618442277, 7.357984074871, -25.38371002664745, 13.45380521110908, -3.29883767235584, 0.32710905363475, 6856817.37], [-1.981981304930552e-8, 0.000008983055099779535, 0.03278182852591, 40.31678527705744, 0.65659298677277, -4.44255534477492, 0.85341911805263, 0.12923347998204, -0.04625736007561, 4482777.06], [3.09191371068437e-9, 0.000008983055096812155, 0.00006995724062, 23.10934304144901, -0.00023663490511, -0.6321817810242, -0.00663494467273, 0.03430082397953, -0.00466043876332, 2555164.4], [2.890871144776878e-9, 0.000008983055095805407, -3.068298e-8, 7.47137025468032, -0.00000353937994, -0.02145144861037, -0.00001234426596, 0.00010322952773, -0.00000323890364, 826088.5]],\n  LL2MC: [[-0.0015702102444, 111320.7020616939, 1704480524535203, -10338987376042340, 26112667856603880, -35149669176653700, 26595700718403920, -10725012454188240, 1800819912950474, 82.5], [0.0008277824516172526, 111320.7020463578, 647795574.6671607, -4082003173.641316, 10774905663.51142, -15171875531.51559, 12053065338.62167, -5124939663.577472, 913311935.9512032, 67.5], [0.00337398766765, 111320.7020202162, 4481351.045890365, -23393751.19931662, 79682215.47186455, -115964993.2797253, 97236711.15602145, -43661946.33752821, 8477230.501135234, 52.5], [0.00220636496208, 111320.7020209128, 51751.86112841131, 3796837.749470245, 992013.7397791013, -1221952.21711287, 1340652.697009075, -620943.6990984312, 144416.9293806241, 37.5], [-0.0003441963504368392, 111320.7020576856, 278.2353980772752, 2485758.690035394, 6070.750963243378, 54821.18345352118, 9540.606633304236, -2710.55326746645, 1405.483844121726, 22.5], [-0.0003218135878613132, 111320.7020701615, 0.00369383431289, 823725.6402795718, 0.46104986909093, 2351.343141331292, 1.58060784298199, 8.77738589078284, 0.37238884252424, 7.45]],\n  convertMC2LL: function convertMC2LL(cB, out) {\n    var cE;\n    for (var cD = 0, len = this.MCBAND.length; cD < len; cD++) {\n      if (Math.abs(cB.y) >= this.MCBAND[cD]) {\n        cE = this.MC2LL[cD];\n        break;\n      }\n    }\n    var T = this.convertor(cB, cE, out);\n    return T;\n  },\n  convertLL2MC: function convertLL2MC(T, out) {\n    var cD, cC, len;\n    T.x = this.getLoop(T.x, -180, 180);\n    T.y = this.getRange(T.y, -74, 74);\n    var cB = new Coordinate(T.x, T.y);\n    for (cC = 0, len = this.LLBAND.length; cC < len; cC++) {\n      if (cB.y >= this.LLBAND[cC]) {\n        cD = this.LL2MC[cC];\n        break;\n      }\n    }\n    if (!cD) {\n      for (cC = this.LLBAND.length - 1; cC >= 0; cC--) {\n        if (cB.y <= -this.LLBAND[cC]) {\n          cD = this.LL2MC[cC];\n          break;\n        }\n      }\n    }\n    var cE = this.convertor(T, cD, out);\n    return cE;\n  },\n  convertor: function convertor(cC, cD, out) {\n    if (!cC || !cD) {\n      return null;\n    }\n    var T = cD[0] + cD[1] * Math.abs(cC.x);\n    var cB = Math.abs(cC.y) / cD[9];\n    var cE = cD[2] + cD[3] * cB + cD[4] * cB * cB + cD[5] * cB * cB * cB + cD[6] * cB * cB * cB * cB + cD[7] * cB * cB * cB * cB * cB + cD[8] * cB * cB * cB * cB * cB * cB;\n    T *= cC.x < 0 ? -1 : 1;\n    cE *= cC.y < 0 ? -1 : 1;\n    if (out) {\n      out.x = T;\n      out.y = cE;\n      return out;\n    }\n    return new Coordinate(T, cE);\n  },\n  toRadians: function toRadians(T) {\n    return Math.PI * T / 180;\n  },\n  toDegrees: function toDegrees(T) {\n    return 180 * T / Math.PI;\n  },\n  getRange: function getRange(cC, cB, T) {\n    if (cB != null) {\n      cC = Math.max(cC, cB);\n    }\n    if (T != null) {\n      cC = Math.min(cC, T);\n    }\n    return cC;\n  },\n  getLoop: function getLoop(cC, cB, T) {\n    if (cC === Infinity) {\n      return T;\n    } else if (cC === -Infinity) {\n      return cB;\n    }\n    while (cC > T) {\n      cC -= T - cB;\n    }\n    while (cC < cB) {\n      cC += T - cB;\n    }\n    return cC;\n  }\n});\nvar Projection_IDENTITY = extend({}, Common, {\n  code: 'IDENTITY',\n  project: function project(p, out) {\n    if (out) {\n      out.x = p.x;\n      out.y = p.y;\n      return out;\n    }\n    return p.copy();\n  },\n  unproject: function unproject(p, out) {\n    if (out) {\n      out.x = p.x;\n      out.y = p.y;\n      return out;\n    }\n    return p.copy();\n  }\n}, Identity);\nvar DEFAULT$1 = EPSG3857;\nvar projections = /*#__PURE__*/Object.freeze({\n  EPSG3857: EPSG3857,\n  DEFAULT: DEFAULT$1,\n  EPSG4326: PROJ4326,\n  EPSG4490: Projection_EPSG4490,\n  BAIDU: Projection_Baidu,\n  IDENTITY: Projection_IDENTITY,\n  Common: Common\n});\nvar Renderable = function Renderable(Base) {\n  return function (_Base) {\n    _inheritsLoose(_class, _Base);\n    function _class() {\n      return _Base.apply(this, arguments) || this;\n    }\n    _class.registerRenderer = function registerRenderer(name, clazz) {\n      var proto = this.prototype;\n      var parentProto = Object.getPrototypeOf(proto);\n      if (!proto._rendererClasses || proto._rendererClasses === parentProto._rendererClasses) {\n        proto._rendererClasses = proto._rendererClasses ? Object.create(proto._rendererClasses) : {};\n      }\n      proto._rendererClasses[name.toLowerCase()] = clazz;\n      return this;\n    };\n    _class.getRendererClass = function getRendererClass(name) {\n      var proto = this.prototype;\n      if (!proto._rendererClasses) {\n        return null;\n      }\n      return proto._rendererClasses[name.toLowerCase()];\n    };\n    return _class;\n  }(Base);\n};\nvar imageFetchWorkerKey = 'core-fetch-image';\nvar globalWorkerPool;\nfunction setWorkerPool(pool) {\n  globalWorkerPool = pool;\n}\nfunction getWorkerPool() {\n  return globalWorkerPool;\n}\nvar workersCreated = false;\nfunction setWorkersCreated() {\n  workersCreated = true;\n}\nfunction workersHasCreated() {\n  return workersCreated;\n}\nvar ADAPTER_CREATED_LIST = [];\nfunction adapterHasCreated(workerKey) {\n  return ADAPTER_CREATED_LIST.indexOf(workerKey) > -1;\n}\nfunction pushAdapterCreated(workerKey) {\n  if (!adapterHasCreated(workerKey)) {\n    ADAPTER_CREATED_LIST.push(workerKey);\n  }\n}\nvar adapters = {};\nfunction registerWorkerAdapter(workerKey, adapter) {\n  adapters[workerKey] = adapter;\n}\nvar header = \"\\n    var adapters = {};\\n    // Dynamic Create Adapter\\n    function createAdapter(key,code){\\n        if(adapters[key]||!code){\\n            return;\\n        }\\n        var func=new Function('exports',code+'(exports)');\\n        var workerExports={};\\n        func(workerExports,self);\\n        adapters[key]=workerExports;\\n        workerExports.initialize && workerExports.initialize(self);\\n        \\n    }\\n    onmessage = function (msg) {\\n        msg = msg.data;\\n        //createAdapter\\n        if (msg.messageType === 'createAdapter') {\\n           var key=msg.key;\\n           var code=msg.code;\\n           createAdapter(key,code);\\n           postMessage({adapterName:key});\\n           return;\\n        }\\n        if (msg.messageType === 'batch') {\\n            const messages = msg.messages;\\n            if (messages) {\\n                for (let i = 0; i < messages.length; i++) {\\n                    dispatch(messages[i]);\\n                }\\n            }\\n        } else {\\n            dispatch(msg);\\n        }\\n    };\\n\\n    function dispatch(msg) {\\n        var workerKey = msg.workerKey;\\n        var adapter = adapters[workerKey];\\n        if (!adapter) {\\n            post(msg.callback, 'Unregistered worker adapters for ' + workerKey);\\n            return;\\n        }\\n        try {\\n            adapter.onmessage(msg, wrap(msg.callback));\\n        } catch (err) {\\n            post(msg.callback, workerKey + ':' + err.message);\\n            console.error(err);\\n            throw err;\\n        }\\n    }\\n\\n    function post(callback, err, data, buffers) {\\n        var msg = {\\n            callback : callback\\n        };\\n        if (err) {\\n            msg.error = err;\\n        } else {\\n            msg.data = data;\\n        }\\n        if (buffers && buffers.length > 0) {\\n            postMessage(msg, buffers);\\n        } else {\\n            postMessage(msg);\\n        }\\n    }\\n    function wrap(callback) {\\n        return function (err, data, buffers) {\\n            post(callback, err, data, buffers);\\n        };\\n    }\\n    var workerExports;\\n\";\nvar footer = \"\\n    workerExports = null;\\n\";\nfunction compileWorkerSource() {\n  var source = header;\n  for (var p in adapters) {\n    var adapter = adapters[p];\n    pushAdapterCreated(p);\n    if (isFunction(adapter)) {\n      if (adapter.length === 0) {\n        adapter = adapter();\n      }\n    }\n    source += \"\\n    workerExports = {};\\n    (\" + adapter + \")(workerExports, self);\\n    adapters['\" + p + \"'] = workerExports\";\n    source += \"\\n    workerExports.initialize && workerExports.initialize(self);\\n        \";\n  }\n  source += footer;\n  return source;\n}\nvar url;\nfunction getWorkerSourcePath() {\n  if (typeof window === 'undefined') {\n    return null;\n  }\n  if (!url) {\n    var source = compileWorkerSource();\n    url = window.URL.createObjectURL(new Blob([source], {\n      type: 'text/javascript'\n    }));\n    adapters = {};\n  }\n  return url;\n}\nfunction createAdapter(key, cb) {\n  if (!adapters[key]) {\n    console.error(\"not find \" + key + \" adapter\");\n    return;\n  }\n  var adapter = adapters[key];\n  if (isFunction(adapter)) {\n    if (adapter.length === 0) {\n      adapter = adapter();\n    }\n  }\n  adapter = \"(\" + adapter + \")\";\n  var workerPool = getWorkerPool();\n  if (!workerPool) {\n    return;\n  }\n  var workers = workerPool.workers || [];\n  if (workers.length === 0) {\n    console.error('workerpool workers count is 0');\n  }\n  var count = 0;\n  var messageCB = function messageCB(msg) {\n    msg = msg.data || {};\n    if (msg.adapterName === key) {\n      count++;\n      if (count === workers.length) {\n        workers.forEach(function (worker) {\n          worker.removeEventListener('message', messageCB);\n        });\n        delete adapters[key];\n        cb();\n      }\n    }\n  };\n  workers.forEach(function (worker) {\n    worker.addEventListener('message', messageCB);\n    worker.postMessage({\n      key: key,\n      code: adapter,\n      messageType: 'createAdapter'\n    });\n  });\n}\nvar hardwareConcurrency = typeof window !== 'undefined' ? window.navigator.hardwareConcurrency || 4 : 0;\nvar workerCount = Math.max(Math.floor(hardwareConcurrency / 2), 1);\nvar MessageBatch = function () {\n  function MessageBatch(limit) {\n    if (limit === void 0) {\n      limit = 50;\n    }\n    this._limit = limit;\n    this._messages = [];\n    this.buffers = [];\n  }\n  var _proto = MessageBatch.prototype;\n  _proto.addMessage = function addMessage(msg, buffers) {\n    this._messages.push(msg);\n    if (!Array.isArray(buffers)) {\n      return;\n    }\n    for (var i = 0; i < buffers.length; i++) {\n      if (this.buffers.indexOf(buffers[i]) < 0) {\n        this.buffers.push(buffers[i]);\n      }\n    }\n  };\n  _proto.isFull = function isFull() {\n    return this._messages.length >= this._limit;\n  };\n  _proto.getMessage = function getMessage() {\n    return {\n      messageType: 'batch',\n      messages: this._messages\n    };\n  };\n  return MessageBatch;\n}();\nvar WorkerPool = function () {\n  function WorkerPool() {\n    this.active = {};\n    this.workerCount = typeof window !== 'undefined' ? window.MAPTALKS_WORKER_COUNT || workerCount : 0;\n    this._messages = [];\n    this._messageBuffers = [];\n  }\n  var _proto2 = WorkerPool.prototype;\n  _proto2.acquire = function acquire(id) {\n    if (!this.workers) {\n      this.workers = [];\n      var url = getWorkerSourcePath();\n      for (var i = 0; i < this.workerCount; i++) {\n        var worker = new Worker(url);\n        worker.id = i;\n        this.workers.push(worker);\n      }\n      URL.revokeObjectURL(url);\n      setWorkersCreated();\n    }\n    this.active[id] = true;\n    return this.workers.slice();\n  };\n  _proto2.release = function release(id) {\n    delete this.active[id];\n    if (Object.keys(this.active).length === 0) {\n      this.workers.forEach(function (w) {\n        w.terminate();\n      });\n      this.workers = null;\n    }\n  };\n  _proto2.addMessage = function addMessage(workerId, data, buffers) {\n    var batches = this._messages[workerId];\n    if (!batches || !batches.length) {\n      batches = this._messages[workerId] = [new MessageBatch()];\n    }\n    var batch = batches[batches.length - 1];\n    if (batch.isFull()) {\n      batch = new MessageBatch();\n      this._messages[workerId].push(batch);\n    }\n    batch.addMessage(data, buffers);\n  };\n  _proto2.commit = function commit() {\n    if (!this.workers) {\n      return;\n    }\n    if (this._messages.length) {\n      for (var i = 0; i < this._messages.length; i++) {\n        if (!this._messages[i] || !this._messages[i].length) {\n          continue;\n        }\n        var batch = this._messages[i].shift();\n        this.workers[i].postMessage(batch.getMessage(), batch.buffers);\n      }\n    }\n  };\n  return WorkerPool;\n}();\nvar globalWorkerPool$1;\nfunction getGlobalWorkerPool() {\n  if (!globalWorkerPool$1) {\n    globalWorkerPool$1 = new WorkerPool();\n    setWorkerPool(globalWorkerPool$1);\n  }\n  return globalWorkerPool$1;\n}\nfunction frameLoop() {\n  getGlobalWorkerPool().commit();\n  requestAnimFrame(frameLoop);\n}\nif (requestAnimFrame) {\n  requestAnimFrame(frameLoop);\n}\nvar dedicatedWorker = 0;\nvar EMPTY_BUFFERS = [];\nvar Actor = function () {\n  function Actor(workerKey) {\n    var _this = this;\n    this._delayMessages = [];\n    this.initializing = false;\n    var hasCreated = adapterHasCreated(workerKey);\n    if (workersHasCreated() && !hasCreated) {\n      this.initializing = true;\n      console.log(\"Injecting codes in worker with worker key: :\" + workerKey);\n      createAdapter(workerKey, function () {\n        _this.initializing = false;\n        _this.created();\n      });\n    }\n    this.workerKey = workerKey;\n    this.workerPool = getGlobalWorkerPool();\n    this.currentActor = 0;\n    this.actorId = UID();\n    this.workers = this.workerPool.acquire(this.actorId);\n    this.callbacks = {};\n    this.callbackID = 0;\n    this.receiveFn = this.receive.bind(this);\n    this.workers.forEach(function (w) {\n      w.addEventListener('message', _this.receiveFn, false);\n    });\n    pushAdapterCreated(workerKey);\n  }\n  var _proto = Actor.prototype;\n  _proto.created = function created() {\n    var _this2 = this;\n    this._delayMessages.forEach(function (message) {\n      var command = message.command,\n        data = message.data,\n        buffers = message.buffers,\n        cb = message.cb,\n        workerId = message.workerId;\n      _this2[command](data, buffers, cb, workerId);\n    });\n    this._delayMessages = [];\n  };\n  _proto.isActive = function isActive() {\n    return !!this.workers;\n  };\n  _proto.broadcast = function broadcast(data, buffers, cb) {\n    var _this3 = this;\n    if (this.initializing) {\n      this._delayMessages.push({\n        command: 'broadcast',\n        data: data,\n        buffers: buffers,\n        cb: cb\n      });\n      return this;\n    }\n    cb = cb || function () {};\n    asyncAll(this.workers, function (worker, done) {\n      _this3.send(data, buffers, done, worker.id);\n    }, cb);\n    return this;\n  };\n  _proto.send = function send(data, buffers, cb, workerId) {\n    if (this.initializing) {\n      this._delayMessages.push({\n        command: 'send',\n        data: data,\n        buffers: buffers,\n        cb: cb,\n        workerId: workerId\n      });\n      return this;\n    }\n    var id = cb ? this.actorId + \":\" + this.callbackID++ : null;\n    if (cb) this.callbacks[id] = cb;\n    this.post({\n      data: data,\n      callback: String(id)\n    }, buffers, workerId);\n    return this;\n  };\n  _proto.receive = function receive(message) {\n    var _this4 = this;\n    var data = message.data,\n      id = data.callback;\n    var callback = this.callbacks[id];\n    delete this.callbacks[id];\n    if (data.type === '<request>') {\n      if (this.actorId === data.actorId) {\n        this[data.command](data.params, function (err, cbData, buffers) {\n          var message = {\n            type: '<response>',\n            callback: data.callback\n          };\n          if (err) {\n            message.error = err.message;\n          } else {\n            message.data = cbData;\n          }\n          _this4.post(message, buffers || EMPTY_BUFFERS, data.workerId);\n        });\n      }\n    } else if (callback && data.error) {\n      callback(data.error);\n    } else if (callback) {\n      callback(null, data.data);\n    }\n  };\n  _proto.remove = function remove() {\n    var _this5 = this;\n    this.workers.forEach(function (w) {\n      w.removeEventListener('message', _this5.receiveFn, false);\n    });\n    delete this.receiveFn;\n    delete this.workers;\n    delete this.callbacks;\n    delete this.workerPool;\n  };\n  _proto.post = function post(data, buffers, targetID) {\n    if (typeof targetID !== 'number' || isNaN(targetID)) {\n      targetID = this.currentActor = (this.currentActor + 1) % this.workerPool.workerCount;\n    }\n    data.workerId = targetID;\n    data.workerKey = this.workerKey;\n    data.actorId = this.actorId;\n    this.workerPool.addMessage(targetID, data, buffers || EMPTY_BUFFERS);\n    return targetID;\n  };\n  _proto.getDedicatedWorker = function getDedicatedWorker() {\n    dedicatedWorker = (dedicatedWorker + 1) % this.workerPool.workerCount;\n    return dedicatedWorker;\n  };\n  return Actor;\n}();\nfunction asyncAll(array, fn, callback) {\n  if (!array.length) {\n    callback(null, []);\n  }\n  var remaining = array.length;\n  var results = new Array(array.length);\n  var error = null;\n  array.forEach(function (item, i) {\n    fn(item, function (err, result) {\n      if (err) error = err;\n      results[i] = result;\n      if (--remaining === 0) callback(error, results);\n    });\n  });\n}\nvar EMPTY_ARRAY = [];\nvar ResourceWorkerConnection = function (_Actor) {\n  _inheritsLoose(ResourceWorkerConnection, _Actor);\n  function ResourceWorkerConnection() {\n    return _Actor.call(this, imageFetchWorkerKey) || this;\n  }\n  var _proto = ResourceWorkerConnection.prototype;\n  _proto.fetchImage = function fetchImage(url, cb) {\n    var data = {\n      url: url\n    };\n    this.send(data, EMPTY_ARRAY, cb);\n  };\n  return ResourceWorkerConnection;\n}(Actor);\nvar CanvasRenderer = function (_Class) {\n  _inheritsLoose(CanvasRenderer, _Class);\n  function CanvasRenderer(layer) {\n    var _this;\n    _this = _Class.call(this) || this;\n    _this.layer = layer;\n    _this._painted = false;\n    _this._drawTime = 0;\n    if (Browser$1.decodeImageInWorker && !Browser$1.safari && !Browser$1.iosWeixin) {\n      _this._resWorkerConn = new ResourceWorkerConnection();\n    }\n    _this.setToRedraw();\n    return _this;\n  }\n  var _proto2 = CanvasRenderer.prototype;\n  _proto2.render = function render(framestamp) {\n    this.prepareRender();\n    if (!this.getMap() || !this.layer.isVisible()) {\n      return;\n    }\n    if (!this.resources) {\n      this.resources = new ResourceCache();\n    }\n    this.checkAndDraw(this._tryToDraw, framestamp);\n  };\n  _proto2.checkAndDraw = function checkAndDraw(drawFn) {\n    var _this2 = this;\n    this._toRedraw = false;\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n    if (this.checkResources) {\n      var resources = this.checkResources();\n      if (resources.length > 0) {\n        this._loadingResource = true;\n        this.loadResources(resources).then(function () {\n          _this2._loadingResource = false;\n          if (_this2.layer) {\n            _this2.layer.fire('resourceload');\n            var map = _this2.layer.getMap();\n            _this2.setToRedraw();\n            map.getRenderer().callInNextFrame(function () {\n              _this2.setToRedraw();\n            });\n          }\n        });\n      } else {\n        drawFn.call.apply(drawFn, [this].concat(args));\n      }\n    } else {\n      drawFn.call.apply(drawFn, [this].concat(args));\n    }\n  };\n  _proto2.testIfNeedRedraw = function testIfNeedRedraw() {\n    var map = this.getMap();\n    if (this._loadingResource) {\n      return false;\n    }\n    if (this._toRedraw) {\n      return true;\n    }\n    if (map.isInteracting() && !this.drawOnInteracting) {\n      return false;\n    }\n    if (this.needToRedraw()) {\n      return true;\n    }\n    return false;\n  };\n  _proto2.needToRedraw = function needToRedraw() {\n    var map = this.getMap();\n    if (map.isInteracting() || map.getRenderer().isViewChanged()) {\n      return !(!map.getPitch() && map.isMoving() && !map.isZooming() && !map.isRotating() && !this.layer.options['forceRenderOnMoving']);\n    }\n    return false;\n  };\n  _proto2.onSkipDrawOnInteracting = function onSkipDrawOnInteracting() {};\n  _proto2.isLoadingResource = function isLoadingResource() {\n    return this._loadingResource;\n  };\n  _proto2.isRenderComplete = function isRenderComplete() {\n    return !!this._renderComplete;\n  };\n  _proto2.mustRenderOnInteracting = function mustRenderOnInteracting() {\n    return !this._painted;\n  };\n  _proto2.setToRedraw = function setToRedraw() {\n    this._toRedraw = true;\n    return this;\n  };\n  _proto2.setCanvasUpdated = function setCanvasUpdated() {\n    this._canvasUpdated = true;\n    return this;\n  };\n  _proto2.isCanvasUpdated = function isCanvasUpdated() {\n    return !!this._canvasUpdated;\n  };\n  _proto2.remove = function remove() {\n    this.onRemove();\n    delete this._loadingResource;\n    delete this.southWest;\n    delete this.canvas;\n    delete this.context;\n    delete this.canvasExtent2D;\n    delete this._extent2D;\n    if (this.resources) {\n      this.resources.remove();\n    }\n    delete this.resources;\n    if (this._resWorkerConn) {\n      this._resWorkerConn.remove();\n      delete this._resWorkerConn;\n    }\n    delete this.layer;\n  };\n  _proto2.onRemove = function onRemove() {};\n  _proto2.onAdd = function onAdd() {};\n  _proto2.getMap = function getMap() {\n    if (!this.layer) {\n      return null;\n    }\n    return this.layer.getMap();\n  };\n  _proto2.getCanvasImage = function getCanvasImage() {\n    var map = this.getMap();\n    this._canvasUpdated = false;\n    if (this._renderZoom !== map.getZoom() || !this.canvas || !this._extent2D) {\n      return null;\n    }\n    if (this.isBlank()) {\n      return null;\n    }\n    if (this.layer.isEmpty && this.layer.isEmpty()) {\n      return null;\n    }\n    var containerPoint = map._pointToContainerPoint(this.southWest)._add(0, -map.height);\n    return {\n      'image': this.canvas,\n      'layer': this.layer,\n      'point': containerPoint\n    };\n  };\n  _proto2.clear = function clear() {\n    this.clearCanvas();\n  };\n  _proto2.isBlank = function isBlank() {\n    if (!this._painted) {\n      return true;\n    }\n    return false;\n  };\n  _proto2.show = function show() {\n    this.setToRedraw();\n  };\n  _proto2.hide = function hide() {\n    this.clear();\n    this.setToRedraw();\n  };\n  _proto2.setZIndex = function setZIndex() {\n    this.setToRedraw();\n  };\n  _proto2.hitDetect = function hitDetect(point) {\n    if (!this.context || this.layer.isEmpty && this.layer.isEmpty() || this.isBlank() || this._errorThrown || this.layer.isVisible && !this.layer.isVisible()) {\n      return false;\n    }\n    var map = this.getMap();\n    var r = map.getDevicePixelRatio();\n    var size = map.getSize();\n    if (point.x < 0 || point.x > size['width'] * r || point.y < 0 || point.y > size['height'] * r) {\n      return false;\n    }\n    var imageData = this.getImageData && this.getImageData();\n    if (imageData) {\n      var x = Math.round(r * point.x),\n        y = Math.round(r * point.y);\n      var idx = y * imageData.width * 4 + x * 4;\n      return imageData.data[idx + 3] > 0;\n    }\n    try {\n      var imgData = this.context.getImageData(r * point.x, r * point.y, 1, 1).data;\n      if (imgData[3] > 0) {\n        return true;\n      }\n    } catch (error) {\n      if (!this._errorThrown) {\n        if (console) {\n          console.warn('hit detect failed with tainted canvas, some geometries have external resources in another domain:\\n', error);\n        }\n        this._errorThrown = true;\n      }\n      return false;\n    }\n    return false;\n  };\n  _proto2.loadResources = function loadResources(resourceUrls) {\n    if (!this.resources) {\n      this.resources = new ResourceCache();\n    }\n    var resources = this.resources,\n      promises = [];\n    if (isArrayHasData(resourceUrls)) {\n      var cache = {};\n      for (var i = resourceUrls.length - 1; i >= 0; i--) {\n        var url = resourceUrls[i];\n        if (!url || !url.length || cache[url.join('-')]) {\n          continue;\n        }\n        cache[url.join('-')] = 1;\n        if (!resources.isResourceLoaded(url, true)) {\n          promises.push(new Promise$1(this._promiseResource(url)));\n        }\n      }\n    }\n    return Promise$1.all(promises);\n  };\n  _proto2.prepareRender = function prepareRender() {\n    delete this._renderComplete;\n    var map = this.getMap();\n    this._renderZoom = map.getZoom();\n    this.canvasExtent2D = this._extent2D = map._get2DExtent();\n    this.southWest = map._containerPointToPoint(new Point(0, map.height));\n  };\n  _proto2.createCanvas = function createCanvas() {\n    if (this.canvas) {\n      return;\n    }\n    var map = this.getMap();\n    var size = map.getSize();\n    var r = map.getDevicePixelRatio(),\n      w = Math.round(r * size.width),\n      h = Math.round(r * size.height);\n    if (this.layer._canvas) {\n      var canvas = this.layer._canvas;\n      canvas.width = w;\n      canvas.height = h;\n      if (canvas.style) {\n        canvas.style.width = size.width + 'px';\n        canvas.style.height = size.height + 'px';\n      }\n      this.canvas = this.layer._canvas;\n    } else {\n      this.canvas = Canvas.createCanvas(w, h, map.CanvasClass);\n    }\n    this.onCanvasCreate();\n  };\n  _proto2.onCanvasCreate = function onCanvasCreate() {};\n  _proto2.createContext = function createContext() {\n    if (this.gl && this.gl.canvas === this.canvas || this.context) {\n      return;\n    }\n    this.context = Canvas.getCanvas2DContext(this.canvas);\n    if (!this.context) {\n      return;\n    }\n    if (this.layer.options['globalCompositeOperation']) {\n      this.context.globalCompositeOperation = this.layer.options['globalCompositeOperation'];\n    }\n    var dpr = this.getMap().getDevicePixelRatio();\n    if (dpr !== 1) {\n      this.context.scale(dpr, dpr);\n    }\n  };\n  _proto2.resetCanvasTransform = function resetCanvasTransform() {\n    if (!this.context) {\n      return;\n    }\n    var dpr = this.getMap().getDevicePixelRatio();\n    this.context.setTransform(dpr, 0, 0, dpr, 0, 0);\n  };\n  _proto2.resizeCanvas = function resizeCanvas(canvasSize) {\n    var canvas = this.canvas;\n    if (!canvas) {\n      return;\n    }\n    var size = canvasSize || this.getMap().getSize();\n    var r = this.getMap().getDevicePixelRatio();\n    var _calCanvasSize = calCanvasSize(size, r),\n      width = _calCanvasSize.width,\n      height = _calCanvasSize.height,\n      cssWidth = _calCanvasSize.cssWidth,\n      cssHeight = _calCanvasSize.cssHeight;\n    if (this.layer._canvas && (canvas.style.width !== cssWidth || canvas.style.height !== cssHeight)) {\n      canvas.style.width = cssWidth;\n      canvas.style.height = cssHeight;\n    }\n    if (canvas.width === width && canvas.height === height) {\n      return;\n    }\n    canvas.height = height;\n    canvas.width = width;\n    if (r !== 1 && this.context) {\n      this.context.scale(r, r);\n    }\n  };\n  _proto2.clearCanvas = function clearCanvas() {\n    if (!this.context || !this.getMap()) {\n      return;\n    }\n    var r = this.getMap().getDevicePixelRatio();\n    var rScale = 1 / r;\n    var w = this.canvas.width * rScale,\n      h = this.canvas.height * rScale;\n    Canvas.clearRect(this.context, 0, 0, Math.max(w, this.canvas.width), Math.max(h, this.canvas.height));\n  };\n  _proto2.prepareCanvas = function prepareCanvas() {\n    if (!this.canvas) {\n      this.createCanvas();\n      this.createContext();\n      this.layer.onCanvasCreate();\n      this.layer.fire('canvascreate', {\n        'context': this.context,\n        'gl': this.gl\n      });\n    } else {\n      this.resetCanvasTransform();\n      this.clearCanvas();\n      this.resizeCanvas();\n    }\n    delete this._maskExtent;\n    var mask = this.layer.getMask();\n    if (!mask) {\n      this.layer.fire('renderstart', {\n        'context': this.context,\n        'gl': this.gl\n      });\n      return null;\n    }\n    var maskExtent2D = this._maskExtent = mask._getMaskPainter().get2DExtent();\n    if (!maskExtent2D.intersects(this._extent2D)) {\n      this.layer.fire('renderstart', {\n        'context': this.context,\n        'gl': this.gl\n      });\n      return maskExtent2D;\n    }\n    this.layer.fire('renderstart', {\n      'context': this.context,\n      'gl': this.gl\n    });\n    return maskExtent2D;\n  };\n  _proto2.clipCanvas = function clipCanvas(context) {\n    var mask = this.layer.getMask();\n    if (!mask) {\n      return false;\n    }\n    var old = this.southWest;\n    var map = this.getMap();\n    this.southWest = map._containerPointToPoint(new Point(0, map.height));\n    context.save();\n    var dpr = map.getDevicePixelRatio();\n    if (dpr !== 1) {\n      context.save();\n      context.scale(dpr, dpr);\n    }\n    if (mask.getGeometries) {\n      context.isMultiClip = true;\n      var masks = mask.getGeometries() || [];\n      context.beginPath();\n      masks.forEach(function (_mask) {\n        var painter = _mask._getMaskPainter();\n        painter.paint(null, context);\n      });\n      context.stroke();\n      context.isMultiClip = false;\n    } else {\n      context.isClip = true;\n      context.beginPath();\n      var painter = mask._getMaskPainter();\n      painter.paint(null, context);\n      context.isClip = false;\n    }\n    if (dpr !== 1) {\n      context.restore();\n    }\n    context.clip();\n    this.southWest = old;\n    return true;\n  };\n  _proto2.getViewExtent = function getViewExtent() {\n    return {\n      'extent': this._extent2D,\n      'maskExtent': this._maskExtent,\n      'zoom': this._renderZoom,\n      'southWest': this.southWest\n    };\n  };\n  _proto2.completeRender = function completeRender() {\n    if (this.getMap()) {\n      this._renderComplete = true;\n      this.layer.fire('renderend', {\n        'context': this.context,\n        'gl': this.gl\n      });\n      this.setCanvasUpdated();\n    }\n  };\n  _proto2.getEvents = function getEvents() {\n    return {\n      '_zoomstart': this.onZoomStart,\n      '_zooming': this.onZooming,\n      '_zoomend': this.onZoomEnd,\n      '_resize': this.onResize,\n      '_movestart': this.onMoveStart,\n      '_moving': this.onMoving,\n      '_moveend': this.onMoveEnd,\n      '_dragrotatestart': this.onDragRotateStart,\n      '_dragrotating': this.onDragRotating,\n      '_dragrotateend': this.onDragRotateEnd,\n      '_spatialreferencechange': this.onSpatialReferenceChange\n    };\n  };\n  _proto2.onZoomStart = function onZoomStart() {};\n  _proto2.onZoomEnd = function onZoomEnd() {\n    this.setToRedraw();\n  };\n  _proto2.onZooming = function onZooming() {};\n  _proto2.onMoveStart = function onMoveStart() {};\n  _proto2.onMoving = function onMoving() {};\n  _proto2.onMoveEnd = function onMoveEnd() {\n    this.setToRedraw();\n  };\n  _proto2.onResize = function onResize() {\n    delete this._extent2D;\n    this.resizeCanvas();\n    this.setToRedraw();\n  };\n  _proto2.onDragRotateStart = function onDragRotateStart() {};\n  _proto2.onDragRotating = function onDragRotating() {};\n  _proto2.onDragRotateEnd = function onDragRotateEnd() {\n    this.setToRedraw();\n  };\n  _proto2.onSpatialReferenceChange = function onSpatialReferenceChange() {};\n  _proto2.getDrawTime = function getDrawTime() {\n    return this._drawTime;\n  };\n  _proto2._tryToDraw = function _tryToDraw(framestamp) {\n    this._toRedraw = false;\n    if (!this.canvas && this.layer.isEmpty && this.layer.isEmpty()) {\n      this._renderComplete = true;\n      return;\n    }\n    this._drawAndRecord(framestamp);\n  };\n  _proto2._drawAndRecord = function _drawAndRecord(framestamp) {\n    if (!this.getMap()) {\n      return;\n    }\n    var painted = this._painted;\n    this._painted = true;\n    var t = now();\n    this.draw(framestamp);\n    t = now() - t;\n    this._drawTime = painted ? t : t / 2;\n    if (painted && this.layer && this.layer.options['logDrawTime']) {\n      console.log(this.layer.getId(), 'frameTimeStamp:', framestamp, 'drawTime:', this._drawTime);\n    }\n  };\n  _proto2._promiseResource = function _promiseResource(url) {\n    var layer = this.layer;\n    var me = this,\n      resources = this.resources,\n      crossOrigin = layer.options['crossOrigin'];\n    var renderer = layer.options['renderer'] || '';\n    return function (resolve) {\n      if (resources.isResourceLoaded(url, true)) {\n        resolve(url);\n        return;\n      }\n      var fetchInWorker = !isSVG(url[0]) && me._resWorkerConn && (layer.options['renderer'] !== 'canvas' || layer.options['decodeImageInWorker']);\n      if (fetchInWorker) {\n        var uri = getAbsoluteURL(url[0]);\n        me._resWorkerConn.fetchImage(uri, function (err, data) {\n          if (err) {\n            if (err && typeof console !== 'undefined') {\n              console.warn(err);\n            }\n            resolve(url);\n            return;\n          }\n          getImageBitMap(data, function (bitmap) {\n            me._cacheResource(url, bitmap);\n            resolve(url);\n          });\n        });\n      } else {\n        var img = new Image();\n        if (!isNil(crossOrigin)) {\n          img['crossOrigin'] = crossOrigin;\n        } else if (renderer !== 'canvas') {\n          img['crossOrigin'] = '';\n        }\n        if (isSVG(url[0]) && !IS_NODE) {\n          if (url[1]) {\n            url[1] *= 2;\n          }\n          if (url[2]) {\n            url[2] *= 2;\n          }\n        }\n        img.onload = function () {\n          me._cacheResource(url, img);\n          resolve(url);\n        };\n        img.onabort = function (err) {\n          if (console) {\n            console.warn('image loading aborted: ' + url[0]);\n          }\n          if (err) {\n            if (console) {\n              console.warn(err);\n            }\n          }\n          resolve(url);\n        };\n        img.onerror = function (err) {\n          if (err && typeof console !== 'undefined') {\n            console.warn(err);\n          }\n          resources.markErrorResource(url);\n          resolve(url);\n        };\n        loadImage(img, url);\n      }\n    };\n  };\n  _proto2._cacheResource = function _cacheResource(url, img) {\n    if (!this.layer || !this.resources) {\n      return;\n    }\n    var w = url[1],\n      h = url[2];\n    if (this.layer.options['cacheSvgOnCanvas'] && isSVG(url[0]) === 1 && (Browser$1.edge || Browser$1.ie)) {\n      if (isNil(w)) {\n        w = img.width || this.layer.options['defaultIconSize'][0];\n      }\n      if (isNil(h)) {\n        h = img.height || this.layer.options['defaultIconSize'][1];\n      }\n      var canvas = Canvas.createCanvas(w, h);\n      Canvas.image(canvas.getContext('2d'), img, 0, 0, w, h);\n      img = canvas;\n    }\n    this.resources.addResource(url, img);\n  };\n  return CanvasRenderer;\n}(Class);\nvar ResourceCache = function () {\n  function ResourceCache() {\n    this.resources = {};\n    this._errors = {};\n  }\n  var _proto3 = ResourceCache.prototype;\n  _proto3.addResource = function addResource(url, img) {\n    var _this3 = this;\n    this.resources[url[0]] = {\n      image: img,\n      width: +url[1],\n      height: +url[2],\n      refCnt: 0\n    };\n    if (img && img.width && img.height && !img.close && Browser$1.imageBitMap && !Browser$1.safari && !Browser$1.iosWeixin) {\n      if (img.src && isSVG(img.src)) {\n        return;\n      }\n      createImageBitmap(img).then(function (imageBitmap) {\n        if (!_this3.resources[url[0]]) {\n          return;\n        }\n        _this3.resources[url[0]].image = imageBitmap;\n      });\n    }\n  };\n  _proto3.isResourceLoaded = function isResourceLoaded(url, checkSVG) {\n    if (!url) {\n      return false;\n    }\n    var imgUrl = this._getImgUrl(url);\n    if (this._errors[imgUrl]) {\n      return true;\n    }\n    var img = this.resources[imgUrl];\n    if (!img) {\n      return false;\n    }\n    if (checkSVG && isSVG(url[0]) && (+url[1] > img.width || +url[2] > img.height)) {\n      return false;\n    }\n    return true;\n  };\n  _proto3.login = function login(url) {\n    var res = this.resources[url];\n    if (res) {\n      res.refCnt++;\n    }\n  };\n  _proto3.logout = function logout(url) {\n    var res = this.resources[url];\n    if (res && res.refCnt-- <= 0) {\n      if (res.image && res.image.close) {\n        res.image.close();\n      }\n      delete this.resources[url];\n    }\n  };\n  _proto3.getImage = function getImage(url) {\n    var imgUrl = this._getImgUrl(url);\n    if (!this.isResourceLoaded(url) || this._errors[imgUrl]) {\n      return null;\n    }\n    return this.resources[imgUrl].image;\n  };\n  _proto3.markErrorResource = function markErrorResource(url) {\n    this._errors[this._getImgUrl(url)] = 1;\n  };\n  _proto3.merge = function merge(res) {\n    if (!res) {\n      return this;\n    }\n    for (var p in res.resources) {\n      var img = res.resources[p];\n      this.addResource([p, img.width, img.height], img.image);\n    }\n    return this;\n  };\n  _proto3.forEach = function forEach(fn) {\n    if (!this.resources) {\n      return this;\n    }\n    for (var p in this.resources) {\n      if (hasOwn(this.resources, p)) {\n        fn(p, this.resources[p]);\n      }\n    }\n    return this;\n  };\n  _proto3._getImgUrl = function _getImgUrl(url) {\n    if (!Array.isArray(url)) {\n      return url;\n    }\n    return url[0];\n  };\n  _proto3.remove = function remove() {\n    for (var p in this.resources) {\n      var res = this.resources[p];\n      if (res && res.image && res.image.close) {\n        res.image.close();\n      }\n    }\n    this.resources = {};\n  };\n  return ResourceCache;\n}();\nvar workerSource = \"\\nfunction (exports) {\\n    exports.onmessage = function (msg, postResponse) {\\n        var url = msg.data.url;\\n        var fetchOptions = msg.data.fetchOptions;\\n        requestImageOffscreen(url, function (err, data) {\\n            var buffers = [];\\n            if (data && data.data) {\\n                buffers.push(data.data);\\n            }\\n            postResponse(err, data, buffers);\\n        }, fetchOptions);\\n    };\\n\\n    function requestImageOffscreen(url, cb, fetchOptions) {\\n        fetch(url, fetchOptions ? fetchOptions : {})\\n            .then(response => response.arrayBuffer())\\n            .then(arrayBuffer => {\\n                const blob=new Blob([arrayBuffer]);\\n                return createImageBitmap(blob);\\n            })\\n            .then(bitmap => {\\n                cb(null, {data:bitmap});\\n            }).catch(err => {\\n                console.warn('error when loading tile:', url);\\n                console.warn(err);\\n                cb(err);\\n            });\\n    }\\n}\";\nfunction registerWorkerSource() {\n  if (!Browser$1.decodeImageInWorker) {\n    return;\n  }\n  registerWorkerAdapter(imageFetchWorkerKey, function () {\n    return workerSource;\n  });\n}\nregisterWorkerSource();\nvar DEFAULT_MARKER_SYMBOLS = {\n  markerWidth: 10,\n  markerHeight: 10,\n  markerLineWidth: 1\n};\nvar TEMP_DXDYPOINT = new Point(0, 0);\nfunction getDxDyRad(dxdy) {\n  if (!dxdy) {\n    return 0;\n  }\n  var x = dxdy.x,\n    y = dxdy.y;\n  if (x === 0 && y === 0) {\n    return 0;\n  }\n  if (x === 0 || !x) {\n    if (y < 0) {\n      return -Math.PI / 2;\n    }\n    if (y > 0) {\n      return Math.PI / 2;\n    }\n  }\n  var tan = y / x;\n  if (y < 0 && x < 0) {\n    return Math.atan(tan) - Math.PI;\n  } else if (y > 0 && x < 0) {\n    return Math.atan(tan) + Math.PI;\n  }\n  return Math.atan(tan);\n}\nfunction getImageRotateBBOX(width, height, rad) {\n  var rad2 = Math.PI / 2 + rad;\n  var rad3 = Math.PI / 4 + rad;\n  var rad4 = rad;\n  var r2 = height;\n  var r3 = Math.sqrt(width * width + height * height);\n  var r4 = width;\n  var p1x = 0,\n    p1y = 0;\n  var p2x = Math.cos(rad2) * r2,\n    p2y = Math.sin(rad2) * r2;\n  var p3x = Math.cos(rad3) * r3,\n    p3y = Math.sin(rad3) * r3;\n  var p4x = Math.cos(rad4) * r4,\n    p4y = Math.sin(rad4) * r4;\n  var minx = Math.min(p2x, p3x, p4x, p1x);\n  var miny = Math.min(p2y, p3y, p4y, p1y);\n  var maxx = Math.max(p2x, p3x, p4x, p1x);\n  var maxy = Math.max(p2y, p3y, p4y, p1y);\n  return [minx, miny, maxx - minx, maxy - miny];\n}\nfunction getMarkerRotationExtent(out, rad, width, height, dxdy, alignPoint) {\n  var x = dxdy.x + alignPoint.x,\n    y = dxdy.y + alignPoint.y;\n  TEMP_DXDYPOINT.x = x;\n  TEMP_DXDYPOINT.y = y;\n  var dxdyRad = getDxDyRad(TEMP_DXDYPOINT);\n  var radius = Math.sqrt(x * x + y * y);\n  var rx = Math.cos(rad + dxdyRad) * radius,\n    ry = Math.sin(rad + dxdyRad) * radius;\n  var minx = 0,\n    miny = 0;\n  minx += rx;\n  miny += ry;\n  var _getImageRotateBBOX = getImageRotateBBOX(width, height, rad, alignPoint),\n    offsetX = _getImageRotateBBOX[0],\n    offsetY = _getImageRotateBBOX[1],\n    w = _getImageRotateBBOX[2],\n    h = _getImageRotateBBOX[3];\n  minx += offsetX;\n  miny += offsetY;\n  var maxx = minx + Math.max(width, w),\n    maxy = miny + Math.max(height, h);\n  out.set(minx, miny, maxx, maxy);\n  return out;\n}\nfunction getVectorPadding() {\n  return 0.5;\n}\nvar DXDY = new Point(0, 0);\nfunction getFixedExtent(out, dx, dy, rotation, alignPoint, w, h) {\n  var dxdy = DXDY.set(dx, dy);\n  if (rotation) {\n    return getMarkerRotationExtent(out, rotation, w, h, dxdy, alignPoint);\n  }\n  var result = out.set(dxdy.x, dxdy.y, dxdy.x + w, dxdy.y + h);\n  result._add(alignPoint);\n  if (rotation) {\n    rotateExtent(result, rotation);\n  }\n  return result;\n}\nvar SIZE = [];\nfunction getVectorMarkerFixedExtent(out, symbol, size) {\n  size = size || calVectorMarkerSize(SIZE, symbol);\n  var alignPoint = getVectorMarkerAnchor(symbol, size[0], size[1]);\n  return getFixedExtent(out, symbol['markerDx'] || 0, symbol['markerDy'] || 0, getMarkerRotation(symbol), alignPoint, size[0], size[1]);\n}\nfunction getDefaultHAlign(markerType) {\n  if (markerType === 'rectangle') {\n    return 'right';\n  } else {\n    return 'middle';\n  }\n}\nfunction getDefaultVAlign(markerType) {\n  if (markerType === 'bar' || markerType === 'pie' || markerType === 'pin') {\n    return 'top';\n  } else if (markerType === 'rectangle') {\n    return 'bottom';\n  } else {\n    return 'middle';\n  }\n}\nvar TEMP_SIZE = new Size(0, 0);\nfunction getVectorMarkerAnchor(symbol, w, h) {\n  var padding = getVectorPadding();\n  var shadow = 2 * (symbol['shadowBlur'] || 0),\n    margin = shadow + padding;\n  TEMP_SIZE.width = w;\n  TEMP_SIZE.height = h;\n  var markerType = symbol['markerType'];\n  var p = getAlignPoint(TEMP_SIZE, symbol['markerHorizontalAlignment'] || getDefaultHAlign(markerType), symbol['markerVerticalAlignment'] || getDefaultVAlign(markerType));\n  if (p.x !== -w / 2) {\n    p.x -= sign(p.x + w / 2) * margin;\n  }\n  if (p.y !== -h / 2) {\n    p.y -= sign(p.y + h / 2) * margin;\n  }\n  return p;\n}\nfunction calVectorMarkerSize(out, symbol) {\n  var padding = getVectorPadding(symbol);\n  var width = getValueOrDefault(symbol['markerWidth'], DEFAULT_MARKER_SYMBOLS.markerWidth);\n  var height = getValueOrDefault(symbol['markerHeight'], DEFAULT_MARKER_SYMBOLS.markerHeight);\n  var lineWidth = getValueOrDefault(symbol['markerLineWidth'], DEFAULT_MARKER_SYMBOLS.markerLineWidth),\n    shadow = 2 * ((symbol['shadowBlur'] || 0) + Math.max(Math.abs(symbol['shadowOffsetX'] || 0) + Math.abs(symbol['shadowOffsetY'] || 0))),\n    w = Math.round(width + lineWidth + shadow + padding * 2),\n    h = Math.round(height + lineWidth + shadow + padding * 2);\n  out[0] = w;\n  out[1] = h;\n  return out;\n}\nvar ROTATE_EXTENT = new PointExtent();\nfunction rotateExtent(fixedExtent, angle) {\n  var xmin = fixedExtent.xmin,\n    ymin = fixedExtent.ymin,\n    xmax = fixedExtent.xmax,\n    ymax = fixedExtent.ymax;\n  ROTATE_EXTENT.set(xmin, ymin, xmax, ymax);\n  return ROTATE_EXTENT.convertTo(function (p) {\n    return p._rotate(angle);\n  }, fixedExtent);\n}\nfunction getMarkerRotation(symbol, prop) {\n  if (prop === void 0) {\n    prop = 'markerRotation';\n  }\n  var r = symbol[prop];\n  if (!isNumber(r)) {\n    return 0;\n  }\n  return -r * Math.PI / 180;\n}\nfunction getImageMarkerFixedExtent(out, symbol, resources) {\n  var url = symbol['markerFile'],\n    img = resources ? resources.getImage(url) : null;\n  var width = symbol['markerWidth'] || (img ? img.width : 0),\n    height = symbol['markerHeight'] || (img ? img.height : 0);\n  TEMP_SIZE.width = width;\n  TEMP_SIZE.height = height;\n  var alignPoint = getAlignPoint(TEMP_SIZE, symbol['markerHorizontalAlignment'] || 'middle', symbol['markerVerticalAlignment'] || 'top');\n  return getFixedExtent(out, symbol['markerDx'] || 0, symbol['markerDy'] || 0, getMarkerRotation(symbol), alignPoint, width, height);\n}\nfunction getTextMarkerFixedExtent(out, symbol, textDesc) {\n  var size = textDesc['size'];\n  var alignPoint = getAlignPoint(size, symbol['textHorizontalAlignment'], symbol['textVerticalAlignment']);\n  if (symbol['textHaloRadius']) {\n    var r = symbol['textHaloRadius'];\n    size = size.add(r * 2, r * 2);\n  }\n  return getFixedExtent(out, symbol['textDx'] || 0, symbol['textDy'] || 0, getMarkerRotation(symbol, 'textRotation'), alignPoint, size.width, size.height);\n}\nvar FIXED_EXTENT = new PointExtent();\nfunction getMarkerFixedExtent(out, symbol, resources, textDesc) {\n  var extent = out || new PointExtent();\n  if (Array.isArray(symbol)) {\n    var symbols = symbol;\n    for (var i = 0; i < symbols.length; i++) {\n      getMarkerFixedExtent(extent, symbols[i], resources, textDesc[i]);\n    }\n    return extent;\n  }\n  if (isTextSymbol(symbol)) {\n    extent._combine(getTextMarkerFixedExtent(FIXED_EXTENT, symbol, textDesc));\n  }\n  if (isImageSymbol(symbol)) {\n    extent._combine(getImageMarkerFixedExtent(FIXED_EXTENT, symbol, resources));\n  }\n  if (isVectorSymbol(symbol)) {\n    extent._combine(getVectorMarkerFixedExtent(FIXED_EXTENT, symbol));\n  }\n  if (isPathSymbol(symbol)) {\n    extent._combine(getImageMarkerFixedExtent(FIXED_EXTENT, symbol));\n  }\n  return extent;\n}\nfunction isTextSymbol(symbol) {\n  if (!symbol) {\n    return false;\n  }\n  if (!isNil(symbol['textName'])) {\n    return true;\n  }\n  return false;\n}\nfunction isImageSymbol(symbol) {\n  if (!symbol) {\n    return false;\n  }\n  if (!isNil(symbol['markerFile'])) {\n    return true;\n  }\n  return false;\n}\nfunction isVectorSymbol(symbol) {\n  if (!symbol) {\n    return false;\n  }\n  if (isNil(symbol['markerFile']) && !isNil(symbol['markerType']) && symbol['markerType'] !== 'path') {\n    return true;\n  }\n  return false;\n}\nfunction isPathSymbol(symbol) {\n  if (!symbol) {\n    return false;\n  }\n  if (isNil(symbol['markerFile']) && symbol['markerType'] === 'path') {\n    return true;\n  }\n  return false;\n}\nvar DYNAMIC_SYMBOL_PROPS = ['markerWidth', 'markerHeight', 'markerHorizontalAlignment', 'markerVerticalAlignment', 'markerDx', 'markerDy', 'markerRotation', 'textName', 'textSize', 'textDx', 'textDy', 'textVerticalAlignment', 'textHorizontalAlignment', 'textRotation'];\nvar SIZE_SYMBOL_PROPS = ['textName', 'markerType', 'markerFile', 'textHaloRadius', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY', 'textWrapWidth'];\nfunction clipLine(points, bounds, round, noCut) {\n  var parts = [];\n  var k = 0,\n    segment;\n  for (var j = 0, l = points.length; j < l - 1; j++) {\n    segment = clipSegment(points[j], points[j + 1], bounds, j, round, noCut);\n    if (!segment) {\n      continue;\n    }\n    parts[k] = parts[k] || [];\n    parts[k].push({\n      'point': segment[0],\n      'index': j\n    });\n    if (segment[1] !== points[j + 1] || j === l - 2) {\n      parts[k].push({\n        'point': segment[1],\n        'index': j + 1\n      });\n      k++;\n    }\n  }\n  return parts;\n}\nvar _lastCode;\nfunction clipSegment(a, b, bounds, useLastCode, round, noCut) {\n  var codeA = useLastCode ? _lastCode : _getBitCode(a, bounds),\n    codeB = _getBitCode(b, bounds),\n    codeOut,\n    p,\n    newCode;\n  _lastCode = codeB;\n  while (true) {\n    if (!(codeA | codeB)) {\n      return [a, b];\n    }\n    if (codeA & codeB) {\n      return false;\n    }\n    if (noCut) {\n      return [a, b];\n    }\n    codeOut = codeA || codeB;\n    p = _getEdgeIntersection(a, b, codeOut, bounds, round);\n    newCode = _getBitCode(p, bounds);\n    if (codeOut === codeA) {\n      a = p;\n      codeA = newCode;\n    } else {\n      b = p;\n      codeB = newCode;\n    }\n  }\n}\nfunction clipPolygon(points, bounds, round) {\n  var edges = [1, 4, 2, 8];\n  var clippedPoints, i, j, k, a, b, len, edge, p;\n  for (i = 0, len = points.length; i < len; i++) {\n    points[i]._code = _getBitCode(points[i], bounds);\n  }\n  for (k = 0; k < 4; k++) {\n    edge = edges[k];\n    clippedPoints = [];\n    for (i = 0, len = points.length, j = len - 1; i < len; j = i++) {\n      a = points[i];\n      b = points[j];\n      if (!(a._code & edge)) {\n        if (b._code & edge) {\n          p = _getEdgeIntersection(b, a, edge, bounds, round);\n          p._code = _getBitCode(p, bounds);\n          clippedPoints.push(p);\n        }\n        clippedPoints.push(a);\n      } else if (!(b._code & edge)) {\n        p = _getEdgeIntersection(b, a, edge, bounds, round);\n        p._code = _getBitCode(p, bounds);\n        clippedPoints.push(p);\n      }\n    }\n    points = clippedPoints;\n  }\n  return points;\n}\nfunction _getEdgeIntersection(a, b, code, bounds, round) {\n  var dx = b.x - a.x,\n    dy = b.y - a.y,\n    min = bounds.getMin(),\n    max = bounds.getMax();\n  var x, y;\n  if (code & 8) {\n    x = a.x + dx * (max.y - a.y) / dy;\n    y = max.y;\n  } else if (code & 4) {\n    x = a.x + dx * (min.y - a.y) / dy;\n    y = min.y;\n  } else if (code & 2) {\n    x = max.x;\n    y = a.y + dy * (max.x - a.x) / dx;\n  } else if (code & 1) {\n    x = min.x;\n    y = a.y + dy * (min.x - a.x) / dx;\n  }\n  var p = new Point(x, y);\n  if (round) {\n    p._round();\n  }\n  return p;\n}\nfunction _getBitCode(p, bounds) {\n  var code = 0;\n  if (p.x < bounds.getMin().x) {\n    code |= 1;\n  } else if (p.x > bounds.getMax().x) {\n    code |= 2;\n  }\n  if (p.y < bounds.getMin().y) {\n    code |= 4;\n  } else if (p.y > bounds.getMax().y) {\n    code |= 8;\n  }\n  return code;\n}\nfunction withInEllipse(point, center, southeast, tolerance) {\n  point = new Point(point);\n  var a = Math.abs(southeast.x - center.x),\n    b = Math.abs(southeast.y - center.y),\n    c = Math.sqrt(Math.abs(a * a - b * b)),\n    xfocus = a >= b;\n  var f1, f2, d;\n  if (xfocus) {\n    f1 = new Point(center.x - c, center.y);\n    f2 = new Point(center.x + c, center.y);\n    d = a * 2;\n  } else {\n    f1 = new Point(center.x, center.y - c);\n    f2 = new Point(center.x, center.y + c);\n    d = b * 2;\n  }\n  return point.distanceTo(f1) + point.distanceTo(f2) <= d + 2 * tolerance;\n}\nvar Symbolizer = function () {\n  function Symbolizer() {\n    this.bbox = getDefaultBBOX();\n  }\n  var _proto = Symbolizer.prototype;\n  _proto._setBBOX = function _setBBOX(ctx, x1, y1, x2, y2) {\n    if (!ctx.isHitTesting) {\n      setBBOX(this.bbox, x1, y1, x2, y2);\n    }\n    return this;\n  };\n  _proto._bufferBBOX = function _bufferBBOX(ctx, bufferSize) {\n    if (bufferSize === void 0) {\n      bufferSize = 0;\n    }\n    if (!ctx.isHitTesting) {\n      bufferBBOX(this.bbox, bufferSize);\n    }\n    return this;\n  };\n  _proto.getMap = function getMap() {\n    return this.geometry.getMap();\n  };\n  _proto.getPainter = function getPainter() {\n    return this.painter;\n  };\n  _proto.isDynamicSize = function isDynamicSize() {\n    return false;\n  };\n  Symbolizer.testColor = function testColor(prop) {\n    if (!prop || !isString(prop)) {\n      return false;\n    }\n    if (COLOR_PROPERTIES.indexOf(prop) >= 0) {\n      return true;\n    }\n    return false;\n  };\n  return Symbolizer;\n}();\nvar CanvasSymbolizer = function (_Symbolizer) {\n  _inheritsLoose(CanvasSymbolizer, _Symbolizer);\n  function CanvasSymbolizer() {\n    return _Symbolizer.apply(this, arguments) || this;\n  }\n  var _proto = CanvasSymbolizer.prototype;\n  _proto._prepareContext = function _prepareContext(ctx) {\n    if (isFunctionDefinition(this.symbol['opacity'])) {\n      if (!this._opacityFn) {\n        this._opacityFn = interpolated(this.symbol['opacity']);\n      }\n    } else {\n      delete this._opacityFn;\n    }\n    if (isNumber(this.symbol['opacity'])) {\n      if (ctx.globalAlpha !== this.symbol['opacity']) {\n        ctx.globalAlpha = this.symbol['opacity'];\n      }\n    } else if (this._opacityFn) {\n      var map = this.getMap();\n      ctx.globalAlpha = this._opacityFn(map.getZoom());\n    } else if (ctx.globalAlpha !== 1) {\n      ctx.globalAlpha = 1;\n    }\n  };\n  _proto.prepareCanvas = function prepareCanvas(ctx, style, resources) {\n    if (ctx.setLineDash && isArrayHasData(style['lineDasharray'])) {\n      ctx.setLineDash(style['lineDasharray']);\n    }\n    var isHitTesting = this.getPainter().isHitTesting();\n    Canvas.prepareCanvas(ctx, style, resources, isHitTesting);\n  };\n  _proto.remove = function remove() {};\n  _proto.setZIndex = function setZIndex() {};\n  _proto.show = function show() {};\n  _proto.hide = function hide() {};\n  _proto._defineStyle = function _defineStyle(style) {\n    return loadGeoSymbol(style, this.geometry);\n  };\n  return CanvasSymbolizer;\n}(Symbolizer);\nfunction getImage(resources, url) {\n  var img = resources && resources.getImage(url);\n  return img || null;\n}\nfunction drawVectorMarker(ctx, point, symbol, resources) {\n  var strokeAndFill = translateMarkerLineAndFill(symbol);\n  var style = symbol,\n    markerType = style['markerType'].toLowerCase(),\n    vectorArray = getVectorMarkerPoints(markerType, style['markerWidth'], style['markerHeight']),\n    lineOpacity = strokeAndFill['lineOpacity'],\n    fillOpacity = strokeAndFill['polygonOpacity'];\n  var gradient = isGradient(strokeAndFill['polygonFill']);\n  if (gradient) {\n    var gradientExtent;\n    if (isGradient(strokeAndFill['polygonFill'])) {\n      if (!gradientExtent) {\n        gradientExtent = getGraidentExtent(point, style.markerWidth, style.markerHeight);\n      }\n      strokeAndFill['polygonGradientExtent'] = gradientExtent;\n    }\n  }\n  Canvas.prepareCanvas(ctx, strokeAndFill, resources);\n  var width = style['markerWidth'],\n    height = style['markerHeight'],\n    hLineWidth = style['markerLineWidth'] / 2;\n  if (markerType === 'ellipse') {\n    Canvas.ellipse(ctx, point, width / 2, height / 2, height / 2, lineOpacity, fillOpacity);\n  } else if (markerType === 'cross' || markerType === 'x') {\n    for (var j = vectorArray.length - 1; j >= 0; j--) {\n      vectorArray[j]._add(point);\n    }\n    Canvas.path(ctx, vectorArray.slice(0, 2), lineOpacity);\n    Canvas.path(ctx, vectorArray.slice(2, 4), lineOpacity);\n  } else if (markerType === 'diamond' || markerType === 'bar' || markerType === 'square' || markerType === 'rectangle' || markerType === 'triangle') {\n    if (markerType === 'bar') {\n      point = point.add(0, -hLineWidth);\n    } else if (markerType === 'rectangle') {\n      point = point.add(hLineWidth, hLineWidth);\n    }\n    for (var _j = vectorArray.length - 1; _j >= 0; _j--) {\n      vectorArray[_j]._add(point);\n    }\n    Canvas.polygon(ctx, vectorArray, lineOpacity, fillOpacity);\n  } else if (markerType === 'pin') {\n    point = point.add(0, -hLineWidth);\n    for (var _j2 = vectorArray.length - 1; _j2 >= 0; _j2--) {\n      vectorArray[_j2]._add(point);\n    }\n    var lineCap = ctx.lineCap;\n    ctx.lineCap = 'round';\n    Canvas.bezierCurveAndFill(ctx, vectorArray, lineOpacity, fillOpacity);\n    ctx.lineCap = lineCap;\n  } else if (markerType === 'pie') {\n    point = point.add(0, -hLineWidth);\n    var angle = Math.atan(width / 2 / height) * 180 / Math.PI;\n    var _lineCap = ctx.lineCap;\n    ctx.lineCap = 'round';\n    Canvas.sector(ctx, point, height, [90 - angle, 90 + angle], lineOpacity, fillOpacity);\n    ctx.lineCap = _lineCap;\n  } else {\n    throw new Error('unsupported markerType: ' + markerType);\n  }\n  return ctx.canvas;\n}\nfunction getGraidentExtent(point, w, h) {\n  var e = new PointExtent();\n  e._combine(point);\n  e['xmin'] += -w / 2;\n  e['ymin'] += -h / 2;\n  e['xmax'] += w / 2;\n  e['ymax'] += h / 2;\n  return e;\n}\nfunction translateMarkerLineAndFill(s) {\n  var result = {\n    'lineColor': s['markerLineColor'],\n    'linePatternFile': s['markerLinePatternFile'],\n    'lineWidth': s['markerLineWidth'],\n    'lineOpacity': s['markerLineOpacity'],\n    'lineDasharray': s['markerLineDasharray'],\n    'lineCap': 'butt',\n    'lineJoin': 'round',\n    'polygonFill': s['markerFill'],\n    'polygonPatternFile': s['markerFillPatternFile'],\n    'polygonOpacity': s['markerFillOpacity']\n  };\n  if (result['lineWidth'] === 0) {\n    result['lineOpacity'] = 0;\n  }\n  return result;\n}\nfunction getVectorMarkerPoints(markerType, width, height) {\n  var hh = height / 2,\n    hw = width / 2;\n  var left = 0,\n    top = 0;\n  var v0, v1, v2, v3;\n  if (markerType === 'triangle') {\n    v0 = new Point(left, top - hh);\n    v1 = new Point(left - hw, top + hh);\n    v2 = new Point(left + hw, top + hh);\n    return [v0, v1, v2];\n  } else if (markerType === 'cross') {\n    v0 = new Point(left - hw, top);\n    v1 = new Point(left + hw, top);\n    v2 = new Point(left, top - hh);\n    v3 = new Point(left, top + hh);\n    return [v0, v1, v2, v3];\n  } else if (markerType === 'diamond') {\n    v0 = new Point(left - hw, top);\n    v1 = new Point(left, top - hh);\n    v2 = new Point(left + hw, top);\n    v3 = new Point(left, top + hh);\n    return [v0, v1, v2, v3];\n  } else if (markerType === 'square') {\n    v0 = new Point(left - hw, top + hh);\n    v1 = new Point(left + hw, top + hh);\n    v2 = new Point(left + hw, top - hh);\n    v3 = new Point(left - hw, top - hh);\n    return [v0, v1, v2, v3];\n  } else if (markerType === 'rectangle') {\n    v0 = new Point(left, top);\n    v1 = v0.add(width, 0);\n    v2 = v0.add(width, height);\n    v3 = v0.add(0, height);\n    return [v0, v1, v2, v3];\n  } else if (markerType === 'x') {\n    v0 = new Point(left - hw, top + hh);\n    v1 = new Point(left + hw, top - hh);\n    v2 = new Point(left + hw, top + hh);\n    v3 = new Point(left - hw, top - hh);\n    return [v0, v1, v2, v3];\n  } else if (markerType === 'bar') {\n    v0 = new Point(left - hw, top - height);\n    v1 = new Point(left + hw, top - height);\n    v2 = new Point(left + hw, top);\n    v3 = new Point(left - hw, top);\n    return [v0, v1, v2, v3];\n  } else if (markerType === 'pin' || markerType === 'pie') {\n    var extWidth = height * Math.atan(hw / hh);\n    v0 = new Point(left, top);\n    v1 = new Point(left - extWidth, top - height);\n    v2 = new Point(left + extWidth, top - height);\n    v3 = new Point(left, top);\n    return [v0, v1, v2, v3];\n  }\n  return [];\n}\nvar TEMP_POINT0$1 = new Point(0, 0);\nvar TEMP_POINT1 = new Point(0, 0);\nvar TEMP_POINT2 = new Point(0, 0);\nvar TEMP_POINT3 = new Point(0, 0);\nvar PointSymbolizer = function (_CanvasSymbolizer) {\n  _inheritsLoose(PointSymbolizer, _CanvasSymbolizer);\n  function PointSymbolizer(symbol, geometry, painter) {\n    var _this;\n    _this = _CanvasSymbolizer.call(this) || this;\n    _this.symbol = symbol;\n    _this.geometry = geometry;\n    _this.painter = painter;\n    return _this;\n  }\n  var _proto = PointSymbolizer.prototype;\n  _proto.get2DExtent = function get2DExtent() {\n    var map = this.getMap();\n    var glRes = map.getGLRes();\n    var extent = new PointExtent();\n    var renderPoints = this._getRenderPoints()[0];\n    for (var i = renderPoints.length - 1; i >= 0; i--) {\n      if (renderPoints[i]) {\n        extent._combine(map._pointAtResToPoint(renderPoints[i], glRes));\n      }\n    }\n    return extent;\n  };\n  _proto.isDynamicSize = function isDynamicSize() {\n    var symbol = this.symbol;\n    return isFunctionDefinition(symbol['markerWidth']) || isFunctionDefinition(symbol['markerHeight']) || isFunctionDefinition(symbol['textSize']);\n  };\n  _proto._rotateExtent = function _rotateExtent(fixedExtent, angle) {\n    return fixedExtent.convertTo(function (p) {\n      return p._rotate(angle);\n    });\n  };\n  _proto._getRenderPoints = function _getRenderPoints() {\n    var painter = this.getPainter();\n    var placement = painter.isSpriting() ? 'center' : this.getPlacement();\n    return this.getPainter().getRenderPoints(placement);\n  };\n  _proto._getRenderContainerPoints = function _getRenderContainerPoints(ignoreAltitude) {\n    var painter = this.getPainter();\n    if (painter.isSpriting()) {\n      return this._getRenderPoints()[0];\n    }\n    var geometry = this.geometry;\n    var dxdy = this.getDxDy();\n    var cpoints;\n    if (geometry._cPoint && !ignoreAltitude) {\n      var p = ignoreAltitude ? TEMP_POINT2 : TEMP_POINT3;\n      p.set(geometry._cPoint.x, geometry._cPoint.y);\n      var containerOffset = painter.containerOffset;\n      p._sub(containerOffset);\n      var dx = dxdy.x,\n        dy = dxdy.y;\n      if (dx || dy) {\n        p._add(dx || 0, dy || 0);\n      }\n      cpoints = [p];\n    } else {\n      var points = this._getRenderPoints()[0];\n      cpoints = this.painter._pointContainerPoints(points, dxdy.x, dxdy.y, ignoreAltitude, true, this.getPlacement());\n    }\n    if (!cpoints || !Array.isArray(cpoints[0])) {\n      return cpoints;\n    }\n    var flat = [];\n    for (var i = 0, l = cpoints.length; i < l; i++) {\n      for (var ii = 0, ll = cpoints[i].length; ii < ll; ii++) {\n        flat.push(cpoints[i][ii]);\n      }\n    }\n    return flat;\n  };\n  _proto.getPlacement = function getPlacement() {\n    return this.symbol['markerPlacement'];\n  };\n  _proto.getRotation = function getRotation() {\n    return getMarkerRotation(this.style);\n  };\n  _proto.getDxDy = function getDxDy() {\n    var s = this.style;\n    var dx = s['markerDx'],\n      dy = s['markerDy'];\n    return new Point(dx, dy);\n  };\n  _proto._getRotationAt = function _getRotationAt(i) {\n    var r = this.getRotation();\n    if (!r) {\n      r = 0;\n    }\n    var rotations = this._getRenderPoints()[1];\n    if (!rotations || !rotations[i]) {\n      return r;\n    }\n    var map = this.getMap();\n    var p0 = rotations[i][0],\n      p1 = rotations[i][1];\n    if (map.isTransforming()) {\n      var glRes = map.getGLRes();\n      p0 = map._pointAtResToContainerPoint(rotations[i][0], glRes, 0, TEMP_POINT0$1);\n      p1 = map._pointAtResToContainerPoint(rotations[i][1], glRes, 0, TEMP_POINT1);\n      return r + computeDegree(p0.x, p0.y, p1.x, p1.y);\n    } else {\n      return r + -computeDegree(p0.x, p0.y, p1.x, p1.y);\n    }\n  };\n  _proto._rotate = function _rotate(ctx, origin, rotation) {\n    if (rotation) {\n      var dxdy = this.getDxDy();\n      var p = origin.sub(dxdy);\n      ctx.save();\n      ctx.translate(p.x, p.y);\n      ctx.rotate(rotation);\n      return dxdy;\n    }\n    return null;\n  };\n  return PointSymbolizer;\n}(CanvasSymbolizer);\nvar DebugSymbolizer = function (_PointSymbolizer) {\n  _inheritsLoose(DebugSymbolizer, _PointSymbolizer);\n  function DebugSymbolizer() {\n    return _PointSymbolizer.apply(this, arguments) || this;\n  }\n  var _proto = DebugSymbolizer.prototype;\n  _proto.getPlacement = function getPlacement() {\n    return 'point';\n  };\n  _proto.getDxDy = function getDxDy() {\n    return new Point(0, 0);\n  };\n  _proto.symbolize = function symbolize(ctx) {\n    var geometry = this.geometry,\n      layer = geometry.getLayer();\n    if (!geometry.options['debug'] && layer && !layer.options['debug']) {\n      return;\n    }\n    var map = this.getMap();\n    if (!map || map.isZooming()) {\n      return;\n    }\n    var color = layer.options['debugOutline'],\n      op = 1;\n    ctx.strokeStyle = color;\n    ctx.fillStyle = color;\n    var outline = geometry.getContainerExtent().toArray();\n    Canvas.polygon(ctx, [outline], op, 0);\n    var points = this._getRenderContainerPoints(),\n      id = this.geometry.getId(),\n      cross = getVectorMarkerPoints('cross', 10, 10);\n    for (var i = 0; i < points.length; i++) {\n      var p = points[i];\n      if (!isNil(id)) {\n        Canvas.fillText(ctx, id, p.add(8, -4), color);\n      }\n      var c = [];\n      for (var ii = 0; ii < cross.length; ii++) {\n        c.push(cross[ii].add(p));\n      }\n      Canvas.path(ctx, c.slice(0, 2), op);\n      Canvas.path(ctx, c.slice(2, 4), op);\n    }\n  };\n  return DebugSymbolizer;\n}(PointSymbolizer);\nvar TEMP_SIZE$1 = new Size(1, 1);\nvar TEMP_EXTENT$1 = new PointExtent();\nvar ImageMarkerSymbolizer = function (_PointSymbolizer) {\n  _inheritsLoose(ImageMarkerSymbolizer, _PointSymbolizer);\n  ImageMarkerSymbolizer.test = function test(symbol) {\n    return isImageSymbol(symbol);\n  };\n  function ImageMarkerSymbolizer(symbol, geometry, painter) {\n    var _this;\n    _this = _PointSymbolizer.call(this, symbol, geometry, painter) || this;\n    _this.style = _this._defineStyle(_this.translate());\n    return _this;\n  }\n  var _proto = ImageMarkerSymbolizer.prototype;\n  _proto.symbolize = function symbolize(ctx, resources) {\n    var style = this.style;\n    if (!this.painter.isHitTesting() && (style['markerWidth'] === 0 || style['markerHeight'] === 0 || style['markerOpacity'] === 0)) {\n      return;\n    }\n    var cookedPoints = this._getRenderContainerPoints();\n    if (!isArrayHasData(cookedPoints)) {\n      return;\n    }\n    var img = this._getImage(resources);\n    if (!img) {\n      if (typeof console !== 'undefined') {\n        console.warn('no img found for ' + (this.style['markerFile'] || this._url[0]));\n      }\n      return;\n    }\n    this._prepareContext(ctx);\n    var width = style['markerWidth'];\n    var height = style['markerHeight'];\n    if (!isNumber(width) || !isNumber(height)) {\n      width = img.width;\n      height = img.height;\n      style['markerWidth'] = width;\n      style['markerHeight'] = height;\n      var imgURL = style['markerFile'];\n      if (!resources.isResourceLoaded(imgURL)) {\n        resources.addResource(imgURL, img);\n      }\n      var painter = this.getPainter();\n      if (!painter.isSpriting()) {\n        painter.removeCache();\n      }\n    }\n    var alpha;\n    if (this.symbol['markerType'] !== 'path' && isNumber(style['markerOpacity']) && style['markerOpacity'] < 1) {\n      alpha = ctx.globalAlpha;\n      ctx.globalAlpha *= style['markerOpacity'];\n    }\n    TEMP_SIZE$1.width = width;\n    TEMP_SIZE$1.height = height;\n    var alignPoint = getAlignPoint(TEMP_SIZE$1, style['markerHorizontalAlignment'], style['markerVerticalAlignment']);\n    for (var i = 0, len = cookedPoints.length; i < len; i++) {\n      var p = cookedPoints[i];\n      var origin = this.getRotation() ? this._rotate(ctx, p, this._getRotationAt(i)) : null;\n      var extent = void 0;\n      if (origin) {\n        var pixel = p.sub(origin);\n        p = origin;\n        var rad = this._getRotationAt(i);\n        extent = getMarkerRotationExtent(TEMP_EXTENT$1, rad, width, height, p, alignPoint);\n        extent._add(pixel);\n      }\n      var x = p.x + alignPoint.x,\n        y = p.y + alignPoint.y;\n      Canvas.image(ctx, img, x, y, width, height);\n      if (origin) {\n        ctx.restore();\n      }\n      if (origin) {\n        this._setBBOX(ctx, extent.xmin, extent.ymin, extent.xmax, extent.ymax);\n      } else {\n        this._setBBOX(ctx, x, y, x + width, y + height);\n      }\n    }\n    if (alpha !== undefined) {\n      ctx.globalAlpha = alpha;\n    }\n  };\n  _proto._getImage = function _getImage(resources) {\n    return getImage(resources, this.style['markerFile']);\n  };\n  _proto.getFixedExtent = function getFixedExtent(resources) {\n    this._fixedExtent = this._fixedExtent || new PointExtent();\n    return getImageMarkerFixedExtent(this._fixedExtent, this.style, resources);\n  };\n  _proto.translate = function translate() {\n    var s = this.symbol;\n    return {\n      'markerFile': s['markerFile'],\n      'markerOpacity': getValueOrDefault(s['markerOpacity'], 1),\n      'markerWidth': getValueOrDefault(s['markerWidth'], null),\n      'markerHeight': getValueOrDefault(s['markerHeight'], null),\n      'markerRotation': getValueOrDefault(s['markerRotation'], 0),\n      'markerDx': getValueOrDefault(s['markerDx'], 0),\n      'markerDy': getValueOrDefault(s['markerDy'], 0),\n      'markerHorizontalAlignment': getValueOrDefault(s['markerHorizontalAlignment'], 'middle'),\n      'markerVerticalAlignment': getValueOrDefault(s['markerVerticalAlignment'], 'top')\n    };\n  };\n  return ImageMarkerSymbolizer;\n}(PointSymbolizer);\nvar TEMP_COORD0$1 = new Coordinate(0, 0);\nvar TEMP_COORD1$1 = new Coordinate(0, 0);\nvar StrokeAndFillSymbolizer = function (_CanvasSymbolizer) {\n  _inheritsLoose(StrokeAndFillSymbolizer, _CanvasSymbolizer);\n  StrokeAndFillSymbolizer.test = function test(symbol, geometry) {\n    if (!symbol) {\n      return false;\n    }\n    if (geometry && geometry.type === 'Point') {\n      return false;\n    }\n    for (var p in symbol) {\n      var f = p.slice(0, 4);\n      if (f === 'line' || f === 'poly') {\n        return true;\n      }\n    }\n    return false;\n  };\n  function StrokeAndFillSymbolizer(symbol, geometry, painter) {\n    var _this;\n    _this = _CanvasSymbolizer.call(this) || this;\n    _this.symbol = symbol;\n    _this.geometry = geometry;\n    _this.painter = painter;\n    if (geometry.type === 'Point') {\n      return _assertThisInitialized(_this);\n    }\n    _this.style = _this._defineStyle(_this.translate());\n    return _this;\n  }\n  var _proto = StrokeAndFillSymbolizer.prototype;\n  _proto.symbolize = function symbolize(ctx, resources) {\n    var style = this.style;\n    if (style['polygonOpacity'] === 0 && style['lineOpacity'] === 0 && !this.painter.isHitTesting()) {\n      return;\n    }\n    var paintParams = this._getPaintParams();\n    if (!paintParams) {\n      return;\n    }\n    this._prepareContext(ctx);\n    var isGradient$$1 = isGradient(style['lineColor']),\n      isPath = this.geometry.getJSONType() === 'Polygon' || this.geometry.type === 'LineString';\n    if (isGradient$$1 && (style['lineColor']['places'] || !isPath)) {\n      style['lineGradientExtent'] = this.geometry.getContainerExtent()._expand(style['lineWidth']);\n    }\n    if (isGradient(style['polygonFill'])) {\n      style['polygonGradientExtent'] = this.geometry.getContainerExtent();\n    }\n    var geometryEventTolerance = this.geometry.getLayer().options['geometryEventTolerance'] || 0;\n    var tolerance = this.geometry._hitTestTolerance() + geometryEventTolerance;\n    var points = paintParams[0],\n      isSplitted = this.geometry.getJSONType() === 'Polygon' && points.length > 0 && Array.isArray(points[0][0]) || this.geometry.type === 'LineString' && points.length > 0 && Array.isArray(points[0]);\n    if (isSplitted) {\n      for (var i = 0; i < points.length; i++) {\n        this.prepareCanvas(ctx, style, resources);\n        if (isGradient$$1 && isPath && !style['lineColor']['places']) {\n          this._createGradient(ctx, points[i], style['lineColor']);\n        }\n        var params = [ctx, points[i]];\n        if (paintParams.length > 1) {\n          params.push.apply(params, paintParams.slice(1));\n        }\n        params.push(style['lineOpacity'], style['polygonOpacity'], style['lineDasharray']);\n        var bbox = this.geometry._paintOn.apply(this.geometry, params);\n        this._setBBOX(ctx, bbox);\n        this._bufferBBOX(ctx, tolerance);\n      }\n    } else {\n      this.prepareCanvas(ctx, style, resources);\n      if (isGradient$$1 && isPath && !style['lineColor']['places']) {\n        this._createGradient(ctx, points, style['lineColor']);\n      }\n      var _params = [ctx];\n      _params.push.apply(_params, paintParams);\n      _params.push(style['lineOpacity'], style['polygonOpacity'], style['lineDasharray']);\n      var _bbox = this.geometry._paintOn.apply(this.geometry, _params);\n      this._setBBOX(ctx, _bbox);\n      this._bufferBBOX(ctx, tolerance);\n    }\n    if (ctx.setLineDash && Array.isArray(style['lineDasharray'])) {\n      ctx.setLineDash([]);\n    }\n  };\n  _proto.get2DExtent = function get2DExtent() {\n    var map = this.getMap();\n    var extent = this.geometry._getPrjExtent();\n    if (!extent) {\n      return null;\n    }\n    if (!this._extMin || !this._extMax) {\n      this._extMin = new Coordinate(0, 0);\n      this._extMax = new Coordinate(0, 0);\n    }\n    this._extMin.x = extent['xmin'];\n    this._extMin.y = extent['ymin'];\n    this._extMax.x = extent['xmax'];\n    this._extMax.y = extent['ymax'];\n    var min = map._prjToPoint(this._extMin, undefined, TEMP_COORD0$1),\n      max = map._prjToPoint(this._extMax, undefined, TEMP_COORD1$1);\n    if (!this._pxExtent) {\n      this._pxExtent = new PointExtent(min, max);\n    } else {\n      this._pxExtent.set(Math.min(min.x, max.x), Math.min(min.y, max.y), Math.max(min.x, max.x), Math.max(min.y, max.y));\n    }\n    return this._pxExtent;\n  };\n  _proto.getFixedExtent = function getFixedExtent() {\n    var t = this.style['lineWidth'] / 2;\n    return new PointExtent(-t, -t, t, t);\n  };\n  _proto._getPaintParams = function _getPaintParams() {\n    return this.getPainter().getPaintParams(this.style['lineDx'], this.style['lineDy']);\n  };\n  _proto.translate = function translate() {\n    var s = this.symbol;\n    var result = {\n      'lineColor': getValueOrDefault(s['lineColor'], '#000'),\n      'lineWidth': getValueOrDefault(s['lineWidth'], 2),\n      'lineOpacity': getValueOrDefault(s['lineOpacity'], 1),\n      'lineDasharray': getValueOrDefault(s['lineDasharray'], []),\n      'lineCap': getValueOrDefault(s['lineCap'], 'butt'),\n      'lineJoin': getValueOrDefault(s['lineJoin'], 'miter'),\n      'linePatternFile': getValueOrDefault(s['linePatternFile'], null),\n      'lineDx': getValueOrDefault(s['lineDx'], 0),\n      'lineDy': getValueOrDefault(s['lineDy'], 0),\n      'polygonFill': getValueOrDefault(s['polygonFill'], null),\n      'polygonOpacity': getValueOrDefault(s['polygonOpacity'], 1),\n      'polygonPatternFile': getValueOrDefault(s['polygonPatternFile'], null),\n      'polygonPatternDx': getValueOrDefault(s['polygonPatternDx'], 0),\n      'polygonPatternDy': getValueOrDefault(s['polygonPatternDy'], 0),\n      'linePatternDx': getValueOrDefault(s['linePatternDx'], 0),\n      'linePatternDy': getValueOrDefault(s['linePatternDy'], 0)\n    };\n    if (result['lineWidth'] === 0) {\n      result['lineOpacity'] = 0;\n    }\n    if (this.geometry.type === 'LineString' && !result['polygonFill']) {\n      result['polygonFill'] = result['lineColor'];\n    }\n    return result;\n  };\n  _proto._createGradient = function _createGradient(ctx, points, lineColor) {\n    if (!Array.isArray(points) || !points.length) {\n      return;\n    }\n    var len = points.length;\n    var grad = ctx.createLinearGradient(points[0].x, points[0].y, points[len - 1].x, points[len - 1].y);\n    lineColor['colorStops'].forEach(function (stop) {\n      grad.addColorStop.apply(grad, stop);\n    });\n    ctx.strokeStyle = grad;\n  };\n  return StrokeAndFillSymbolizer;\n}(CanvasSymbolizer);\nvar TextMarkerSymbolizer = function (_PointSymbolizer) {\n  _inheritsLoose(TextMarkerSymbolizer, _PointSymbolizer);\n  TextMarkerSymbolizer.test = function test(symbol) {\n    return isTextSymbol(symbol);\n  };\n  function TextMarkerSymbolizer(symbol, geometry, painter) {\n    var _this;\n    _this = _PointSymbolizer.call(this, symbol, geometry, painter) || this;\n    var style = _this.translate();\n    _this._dynamic = hasFunctionDefinition(style);\n    _this.style = _this._defineStyle(style);\n    if (_this.style['textWrapWidth'] === 0) {\n      return _assertThisInitialized(_this);\n    }\n    _this.strokeAndFill = _this._defineStyle(_this.translateLineAndFill(_this.style));\n    return _this;\n  }\n  var _proto = TextMarkerSymbolizer.prototype;\n  _proto.symbolize = function symbolize(ctx, resources) {\n    if (!this.painter.isHitTesting() && (this.style['textSize'] === 0 || !this.style['textOpacity'] && (!this.style['textHaloRadius'] || !this.style['textHaloOpacity']) || this.style['textWrapWidth'] === 0)) {\n      return;\n    }\n    var cookedPoints = this._getRenderContainerPoints();\n    if (!isArrayHasData(cookedPoints)) {\n      return;\n    }\n    var style = this.style,\n      strokeAndFill = this.strokeAndFill;\n    var textContent = replaceVariable(this.style['textName'], this.geometry.getProperties());\n    if (this._dynamic) {\n      delete this._textDesc;\n    }\n    var textDesc = this._textDesc = this._textDesc || describeText(textContent, this.style);\n    this._prepareContext(ctx);\n    this.prepareCanvas(ctx, strokeAndFill, resources);\n    Canvas.prepareCanvasFont(ctx, style);\n    for (var i = 0, len = cookedPoints.length; i < len; i++) {\n      var p = cookedPoints[i];\n      var origin = this.getRotation() ? this._rotate(ctx, p, this._getRotationAt(i)) : null;\n      if (origin) {\n        p = origin;\n      }\n      var bbox = Canvas.text(ctx, textContent, p, style, textDesc);\n      this._setBBOX(ctx, bbox);\n      if (origin) {\n        ctx.restore();\n      }\n    }\n  };\n  _proto.getPlacement = function getPlacement() {\n    return this.symbol['textPlacement'];\n  };\n  _proto.getRotation = function getRotation() {\n    var r = this.style['textRotation'];\n    if (!isNumber(r)) {\n      return null;\n    }\n    return -r * Math.PI / 180;\n  };\n  _proto.getDxDy = function getDxDy() {\n    var s = this.style;\n    return new Point(s['textDx'], s['textDy']);\n  };\n  _proto.getFixedExtent = function getFixedExtent() {\n    var textDesc = this.geometry.getTextDesc();\n    if (Array.isArray(textDesc)) {\n      textDesc = textDesc[this._index];\n    }\n    this._fixedExtent = this._fixedExtent || new PointExtent();\n    if (!textDesc) {\n      return this._fixedExtent;\n    }\n    return getTextMarkerFixedExtent(this._fixedExtent, this.style, textDesc);\n  };\n  _proto.translate = function translate() {\n    var s = this.symbol;\n    var result = {\n      'textName': s['textName'],\n      'textFaceName': getValueOrDefault(s['textFaceName'], 'monospace'),\n      'textWeight': getValueOrDefault(s['textWeight'], 'normal'),\n      'textStyle': getValueOrDefault(s['textStyle'], 'normal'),\n      'textSize': getValueOrDefault(s['textSize'], DEFAULT_TEXT_SIZE),\n      'textFont': getValueOrDefault(s['textFont'], null),\n      'textFill': getValueOrDefault(s['textFill'], '#000'),\n      'textOpacity': getValueOrDefault(s['textOpacity'], 1),\n      'textHaloFill': getValueOrDefault(s['textHaloFill'], '#ffffff'),\n      'textHaloRadius': getValueOrDefault(s['textHaloRadius'], 0),\n      'textHaloOpacity': getValueOrDefault(s['textHaloOpacity'], 1),\n      'textWrapWidth': getValueOrDefault(s['textWrapWidth'], null),\n      'textWrapCharacter': getValueOrDefault(s['textWrapCharacter'], '\\n'),\n      'textLineSpacing': getValueOrDefault(s['textLineSpacing'], 0),\n      'textDx': getValueOrDefault(s['textDx'], 0),\n      'textDy': getValueOrDefault(s['textDy'], 0),\n      'textHorizontalAlignment': getValueOrDefault(s['textHorizontalAlignment'], 'middle'),\n      'textVerticalAlignment': getValueOrDefault(s['textVerticalAlignment'], 'middle'),\n      'textAlign': getValueOrDefault(s['textAlign'], 'center'),\n      'textRotation': getValueOrDefault(s['textRotation'], 0),\n      'textMaxWidth': getValueOrDefault(s['textMaxWidth'], 0),\n      'textMaxHeight': getValueOrDefault(s['textMaxHeight'], 0)\n    };\n    if (result['textMaxWidth'] > 0 && (!result['textWrapWidth'] || result['textWrapWidth'] > result['textMaxWidth'])) {\n      if (!result['textWrapWidth']) {\n        result['textMaxHeight'] = 1;\n      }\n      result['textWrapWidth'] = result['textMaxWidth'];\n    }\n    return result;\n  };\n  _proto.translateLineAndFill = function translateLineAndFill(s) {\n    return {\n      'lineColor': s['textHaloRadius'] ? s['textHaloFill'] : s['textFill'],\n      'lineWidth': s['textHaloRadius'],\n      'lineOpacity': s['textOpacity'],\n      'lineDasharray': null,\n      'lineCap': 'butt',\n      'lineJoin': 'round',\n      'polygonFill': s['textFill'],\n      'polygonOpacity': s['textOpacity']\n    };\n  };\n  return TextMarkerSymbolizer;\n}(PointSymbolizer);\nvar MARKER_SIZE = [];\nvar TEMP_EXTENT$2 = new PointExtent();\nvar VectorMarkerSymbolizer = function (_PointSymbolizer) {\n  _inheritsLoose(VectorMarkerSymbolizer, _PointSymbolizer);\n  VectorMarkerSymbolizer.test = function test(symbol) {\n    return isVectorSymbol(symbol);\n  };\n  function VectorMarkerSymbolizer(symbol, geometry, painter) {\n    var _this;\n    _this = _PointSymbolizer.call(this, symbol, geometry, painter) || this;\n    var style = _this.translate();\n    _this._dynamic = hasFunctionDefinition(style);\n    _this.style = _this._defineStyle(style);\n    _this.strokeAndFill = _this._defineStyle(translateMarkerLineAndFill(_this.style));\n    _this.padding = 0;\n    return _this;\n  }\n  var _proto = VectorMarkerSymbolizer.prototype;\n  _proto.symbolize = function symbolize(ctx, resources) {\n    var style = this.style;\n    if (!this.painter.isHitTesting() && (style['markerWidth'] === 0 || style['markerHeight'] === 0 || style['polygonOpacity'] === 0 && style['lineOpacity'] === 0)) {\n      return;\n    }\n    var cookedPoints = this._getRenderContainerPoints();\n    if (!isArrayHasData(cookedPoints)) {\n      return;\n    }\n    this._prepareContext(ctx);\n    if (this.getPainter().isSpriting() || this.geometry.getLayer().getMask() === this.geometry || this._dynamic || this.geometry.getLayer().options['cacheVectorOnCanvas'] === false) {\n      this._drawMarkers(ctx, cookedPoints, resources);\n    } else {\n      this._drawMarkersWithCache(ctx, cookedPoints, resources);\n    }\n  };\n  _proto._drawMarkers = function _drawMarkers(ctx, cookedPoints, resources) {\n    for (var i = cookedPoints.length - 1; i >= 0; i--) {\n      var point = cookedPoints[i];\n      var origin = this.getRotation() ? this._rotate(ctx, point, this._getRotationAt(i)) : null;\n      if (origin) {\n        point = origin;\n      }\n      this._drawVectorMarker(ctx, point, resources);\n      if (origin) {\n        ctx.restore();\n      }\n    }\n  };\n  _proto._drawMarkersWithCache = function _drawMarkersWithCache(ctx, cookedPoints, resources) {\n    var stamp = this._stampSymbol();\n    var image = resources.getImage(stamp);\n    if (!image) {\n      image = this._createMarkerImage(ctx, resources);\n      resources.addResource([stamp, image.width, image.height], image);\n    }\n    var anchor = getVectorMarkerAnchor(this.style, image.width, image.height);\n    for (var i = cookedPoints.length - 1; i >= 0; i--) {\n      var point = cookedPoints[i];\n      var origin = this.getRotation() ? this._rotate(ctx, point, this._getRotationAt(i)) : null;\n      var extent = void 0;\n      if (origin) {\n        var pixel = point.sub(origin);\n        point = origin;\n        var rad = this._getRotationAt(i);\n        extent = getMarkerRotationExtent(TEMP_EXTENT$2, rad, image.width, image.height, point, anchor);\n        extent._add(pixel);\n      }\n      var x = point.x + anchor.x,\n        y = point.y + anchor.y;\n      Canvas.image(ctx, image, x, y);\n      if (origin) {\n        ctx.restore();\n        this._setBBOX(ctx, extent.xmin, extent.ymin, extent.xmax, extent.ymax);\n      } else {\n        this._setBBOX(ctx, x, y, x + image.width, y + image.height);\n      }\n    }\n  };\n  _proto._createMarkerImage = function _createMarkerImage(ctx, resources) {\n    var canvasClass = ctx.canvas.constructor,\n      size = calVectorMarkerSize(MARKER_SIZE, this.style),\n      canvas = Canvas.createCanvas(size[0], size[1], canvasClass),\n      point = this._getCacheImageAnchor(size[0], size[1]);\n    var context = canvas.getContext('2d');\n    this._drawVectorMarker(context, point, resources);\n    return canvas;\n  };\n  _proto._stampSymbol = function _stampSymbol() {\n    if (!this._stamp) {\n      this._stamp = hashCode([this.style['markerType'], isGradient(this.style['markerFill']) ? getGradientStamp(this.style['markerFill']) : this.style['markerFill'], this.style['markerFillOpacity'], this.style['markerFillPatternFile'], isGradient(this.style['markerLineColor']) ? getGradientStamp(this.style['markerLineColor']) : this.style['markerLineColor'], this.style['markerLineWidth'], this.style['markerLineOpacity'], this.style['markerLineDasharray'] ? this.style['markerLineDasharray'].join(',') : '', this.style['markerLinePatternFile'], this.style['markerWidth'], this.style['markerHeight'], this.style['markerHorizontalAlignment'], this.style['markerVerticalAlignment']].join('_'));\n    }\n    return this._stamp;\n  };\n  _proto._getCacheImageAnchor = function _getCacheImageAnchor(w, h) {\n    var shadow = 2 * (this.symbol['shadowBlur'] || 0),\n      margin = shadow + this.padding;\n    var markerType = this.style['markerType'];\n    if (markerType === 'bar' || markerType === 'pie' || markerType === 'pin') {\n      return new Point(w / 2, h - margin);\n    } else if (markerType === 'rectangle') {\n      return new Point(margin, margin);\n    } else {\n      return new Point(w / 2, h / 2);\n    }\n  };\n  _proto._getGraidentExtent = function _getGraidentExtent(points) {\n    var e = new PointExtent(),\n      dxdy = this.getDxDy(),\n      m = this.getFixedExtent();\n    if (Array.isArray(points)) {\n      for (var i = points.length - 1; i >= 0; i--) {\n        e._combine(points[i]);\n      }\n    } else {\n      e._combine(points);\n    }\n    e['xmin'] += m['xmin'] - dxdy.x;\n    e['ymin'] += m['ymin'] - dxdy.y;\n    e['xmax'] += m['xmax'] - dxdy.x;\n    e['ymax'] += m['ymax'] - dxdy.y;\n    return e;\n  };\n  _proto._drawVectorMarker = function _drawVectorMarker(ctx, point, resources) {\n    drawVectorMarker(ctx, point, this.style, resources);\n  };\n  _proto.getFixedExtent = function getFixedExtent() {\n    var isDynamic = this.isDynamicSize();\n    var w = this.style.markerWidth;\n    var h = this.style.markerHeight;\n    this._fixedExtent = this._fixedExtent || new PointExtent();\n    return getVectorMarkerFixedExtent(this._fixedExtent, this.style, isDynamic ? [128, 128 * (w === 0 ? 1 : h / w)] : null);\n  };\n  _proto.translate = function translate() {\n    var s = this.symbol;\n    var result = {\n      'markerType': getValueOrDefault(s['markerType'], 'ellipse'),\n      'markerFill': getValueOrDefault(s['markerFill'], '#00f'),\n      'markerFillOpacity': getValueOrDefault(s['markerFillOpacity'], 1),\n      'markerFillPatternFile': getValueOrDefault(s['markerFillPatternFile'], null),\n      'markerLineColor': getValueOrDefault(s['markerLineColor'], '#000'),\n      'markerLineWidth': getValueOrDefault(s['markerLineWidth'], DEFAULT_MARKER_SYMBOLS.markerLineWidth),\n      'markerLineOpacity': getValueOrDefault(s['markerLineOpacity'], 1),\n      'markerLineDasharray': getValueOrDefault(s['markerLineDasharray'], []),\n      'markerLinePatternFile': getValueOrDefault(s['markerLinePatternFile'], null),\n      'markerDx': getValueOrDefault(s['markerDx'], 0),\n      'markerDy': getValueOrDefault(s['markerDy'], 0),\n      'markerWidth': getValueOrDefault(s['markerWidth'], DEFAULT_MARKER_SYMBOLS.markerWidth),\n      'markerHeight': getValueOrDefault(s['markerHeight'], DEFAULT_MARKER_SYMBOLS.markerHeight),\n      'markerRotation': getValueOrDefault(s['markerRotation'], 0),\n      'shadowBlur': getValueOrDefault(s['shadowBlur'], 0),\n      'shadowOffsetX': getValueOrDefault(s['shadowOffsetX'], 0),\n      'shadowOffsetY': getValueOrDefault(s['shadowOffsetY'], 0)\n    };\n    var markerType = result['markerType'];\n    var ha = getDefaultHAlign(markerType);\n    var va = getDefaultVAlign(markerType);\n    result['markerHorizontalAlignment'] = getValueOrDefault(s['markerHorizontalAlignment'], ha);\n    result['markerVerticalAlignment'] = getValueOrDefault(s['markerVerticalAlignment'], va);\n    if (isNumber(s['markerOpacity'])) {\n      if (isNumber(s['markerFillOpacity'])) {\n        result['markerFillOpacity'] *= s['markerOpacity'];\n      }\n      if (isNumber(s['markerLineOpacity'])) {\n        result['markerLineOpacity'] *= s['markerOpacity'];\n      }\n    }\n    return result;\n  };\n  return VectorMarkerSymbolizer;\n}(PointSymbolizer);\nvar VectorPathMarkerSymbolizer = function (_ImageMarkerSymbolize) {\n  _inheritsLoose(VectorPathMarkerSymbolizer, _ImageMarkerSymbolize);\n  VectorPathMarkerSymbolizer.test = function test(symbol) {\n    return isPathSymbol(symbol);\n  };\n  function VectorPathMarkerSymbolizer(symbol, geometry, painter) {\n    var _this;\n    if (isNil(symbol['markerWidth'])) {\n      symbol['markerWidth'] = 80;\n    }\n    if (isNil(symbol['markerHeight'])) {\n      symbol['markerHeight'] = 80;\n    }\n    _this = _ImageMarkerSymbolize.call(this, symbol, geometry, painter) || this;\n    symbol = extend(symbol, _this.translate());\n    var style = _this.style = _this._defineStyle(symbol);\n    if (Browser$1.gecko) {\n      _this._url = [getMarkerPathBase64(style, style['markerWidth'], style['markerHeight']), style['markerWidth'], style['markerHeight']];\n    } else {\n      _this._url = [getMarkerPathBase64(style), style['markerWidth'], style['markerHeight']];\n    }\n    return _this;\n  }\n  var _proto = VectorPathMarkerSymbolizer.prototype;\n  _proto._prepareContext = function _prepareContext() {};\n  _proto._getImage = function _getImage(resources) {\n    var _this2 = this;\n    if (resources && resources.isResourceLoaded(this._url)) {\n      return resources.getImage(this._url);\n    }\n    var painter = this.painter;\n    var image = new Image();\n    image.onload = function () {\n      var renderer = painter.getLayer() && painter.getLayer().getRenderer();\n      if (renderer) {\n        renderer.setToRedraw();\n      }\n    };\n    image.onerror = function (err) {\n      if (err && typeof console !== 'undefined') {\n        console.warn(err);\n      }\n      resources.markErrorResource(_this2._url);\n    };\n    image.src = this._url[0];\n    if (resources) {\n      resources.addResource(this._url, image);\n    }\n    return image;\n  };\n  return VectorPathMarkerSymbolizer;\n}(ImageMarkerSymbolizer);\nvar defaultSymbol = {\n  lineWidth: 1,\n  polygonFill: '#fff',\n  polygonOpacity: 0.5\n};\nvar DrawAltitudeSymbolizer = function (_PointSymbolizer) {\n  _inheritsLoose(DrawAltitudeSymbolizer, _PointSymbolizer);\n  DrawAltitudeSymbolizer.test = function test(symbol, geometry) {\n    var layer = geometry.getLayer();\n    if (!layer) {\n      return false;\n    }\n    var type = geometry.getJSONType();\n    return type === 'Marker' || type === 'LineString';\n  };\n  function DrawAltitudeSymbolizer(symbol, geometry, painter) {\n    var _this;\n    _this = _PointSymbolizer.call(this, symbol, geometry, painter) || this;\n    _this.style = geometry.getLayer().options['drawAltitude'];\n    if (!_this.style || !isObject(_this.style)) {\n      _this.style = {\n        'lineWidth': 2\n      };\n    }\n    if (!_this.style['lineWidth']) {\n      _this.style['lineWidth'] = 0;\n    }\n    _this.dxdy = _this._defineStyle({\n      'dx': symbol['textDx'] || symbol['markerDx'],\n      'dy': symbol['textDy'] || symbol['markerDy']\n    });\n    return _this;\n  }\n  var _proto = DrawAltitudeSymbolizer.prototype;\n  _proto.symbolize = function symbolize(ctx) {\n    var layer = this.geometry.getLayer();\n    if (!layer.options['drawAltitude']) {\n      return;\n    }\n    var properties = this.geometry.getProperties();\n    if (!properties || !properties[layer.options['altitudeProperty']]) {\n      return;\n    }\n    var style = this._getStyle();\n    this._prepareContext(ctx);\n    if (this.geometry.type === 'LineString') {\n      var paintParams = this._getPaintParams(style['lineDx'], style['lineDy'], false, true);\n      if (!paintParams) {\n        return;\n      }\n      var groundPoints = this.getPainter().getPaintParams(style['lineDx'], style['lineDy'], true, true, '_groundpt')[0];\n      this._drawLineAltitude(ctx, paintParams[0], groundPoints);\n    } else {\n      var point = this._getRenderContainerPoints(),\n        groundPoint = this._getRenderContainerPoints(true);\n      if (!point || point.length === 0) {\n        return;\n      }\n      this._drawMarkerAltitude(ctx, point[0], groundPoint[0]);\n    }\n  };\n  _proto.getDxDy = function getDxDy() {\n    var s = this.dxdy;\n    return new Point(s['dx'] || 0, s['dy'] || 0);\n  };\n  _proto.get2DExtent = function get2DExtent() {\n    if (this.geometry.type === 'LineString') {\n      return StrokeAndFillSymbolizer.prototype.get2DExtent.apply(this);\n    } else {\n      return _PointSymbolizer.prototype.get2DExtent.call(this);\n    }\n  };\n  _proto.getPlacement = function getPlacement() {\n    return 'point';\n  };\n  _proto._getPaintParams = function _getPaintParams(dx, dy) {\n    return this.getPainter().getPaintParams(dx || 0, dy || 0, null, true, '_altpt');\n  };\n  _proto._drawMarkerAltitude = function _drawMarkerAltitude(ctx, point, groundPoint) {\n    var style = this._getStyle();\n    this.prepareCanvas(ctx, style);\n    Canvas.path(ctx, [point, groundPoint], style['lineOpacity'], null, style['lineDasharray']);\n  };\n  _proto._drawLineAltitude = function _drawLineAltitude(ctx, points, groundPoints) {\n    var style = this._getStyle();\n    var isSplitted = points.length > 0 && Array.isArray(points[0]);\n    if (isSplitted) {\n      for (var i = 0; i < points.length; i++) {\n        this._drawLine(ctx, points[i], groundPoints[i]);\n      }\n    } else {\n      this._drawLine(ctx, points, groundPoints);\n    }\n    if (ctx.setLineDash && Array.isArray(style['lineDasharray'])) {\n      ctx.setLineDash([]);\n    }\n  };\n  _proto._drawLine = function _drawLine(ctx, points, groundPoints) {\n    var style = this._getStyle();\n    this.prepareCanvas(ctx, style);\n    for (var i = 0, l = points.length - 1; i < l; i++) {\n      Canvas.polygon(ctx, [points[i], points[i + 1], groundPoints[i + 1], groundPoints[i]], style['lineOpacity'], style['polygonOpacity'], style['lineDasharray']);\n    }\n  };\n  _proto._getStyle = function _getStyle() {\n    var style = this.geometry.getLayer().options['drawAltitude'];\n    if (!isObject(style)) {\n      style = defaultSymbol;\n    }\n    if (!style['lineWidth']) {\n      style['lineWidth'] = 0;\n      style['lineOpacity'] = 0;\n    }\n    return style;\n  };\n  return DrawAltitudeSymbolizer;\n}(PointSymbolizer);\nvar index$3 = /*#__PURE__*/Object.freeze({\n  Symbolizer: Symbolizer,\n  CanvasSymbolizer: CanvasSymbolizer,\n  DebugSymbolizer: DebugSymbolizer,\n  ImageMarkerSymbolizer: ImageMarkerSymbolizer,\n  PointSymbolizer: PointSymbolizer,\n  StrokeAndFillSymbolizer: StrokeAndFillSymbolizer,\n  TextMarkerSymbolizer: TextMarkerSymbolizer,\n  VectorMarkerSymbolizer: VectorMarkerSymbolizer,\n  VectorPathMarkerSymbolizer: VectorPathMarkerSymbolizer,\n  DrawAltitudeSymbolizer: DrawAltitudeSymbolizer\n});\nvar registerSymbolizers = [DrawAltitudeSymbolizer, StrokeAndFillSymbolizer, ImageMarkerSymbolizer, VectorPathMarkerSymbolizer, VectorMarkerSymbolizer, TextMarkerSymbolizer];\nvar testCanvas;\nvar TEMP_POINT0$2 = new Point(0, 0);\nvar TEMP_PAINT_EXTENT = new PointExtent();\nvar TEMP_FIXED_EXTENT = new PointExtent();\nvar TEMP_CLIP_EXTENT0 = new PointExtent();\nvar TEMP_CLIP_EXTENT1 = new PointExtent();\nvar TEMP_CLIP_EXTENT2 = new PointExtent();\nvar PROJECTION = {};\nvar TEMP_BBOX = {\n  minx: Infinity,\n  miny: Infinity,\n  maxx: -Infinity,\n  maxy: -Infinity\n};\nvar Painter = function (_Class) {\n  _inheritsLoose(Painter, _Class);\n  function Painter(geometry) {\n    var _this;\n    _this = _Class.call(this) || this;\n    _this.geometry = geometry;\n    _this.symbolizers = _this._createSymbolizers();\n    _this._altAtGL = _this._getGeometryAltitude();\n    _this.bbox = getDefaultBBOX();\n    _this._drawTime = 0;\n    return _this;\n  }\n  var _proto = Painter.prototype;\n  _proto._setDrawTime = function _setDrawTime(time) {\n    this._drawTime = time;\n    return this;\n  };\n  _proto.getRenderBBOX = function getRenderBBOX() {\n    var layer = this.getLayer();\n    if (layer && layer._drawTime !== this._drawTime) {\n      return null;\n    }\n    resetBBOX(this.bbox);\n    for (var i = this.symbolizers.length - 1; i >= 0; i--) {\n      var symbolizer = this.symbolizers[i];\n      var bbox = symbolizer.bbox;\n      if (!validateBBOX(bbox)) {\n        continue;\n      }\n      setBBOX(this.bbox, bbox);\n    }\n    if (validateBBOX(this.bbox)) {\n      return this.bbox;\n    }\n    return null;\n  };\n  _proto.getMap = function getMap() {\n    return this.geometry.getMap();\n  };\n  _proto.getLayer = function getLayer() {\n    return this.geometry && this.geometry.getLayer();\n  };\n  _proto._createSymbolizers = function _createSymbolizers() {\n    var geoSymbol = this.getSymbol(),\n      symbolizers = [],\n      regSymbolizers = registerSymbolizers;\n    var symbols = geoSymbol;\n    if (!Array.isArray(geoSymbol)) {\n      symbols = [geoSymbol];\n    }\n    for (var ii = symbols.length - 1; ii >= 0; ii--) {\n      var symbol = symbols[ii];\n      for (var i = regSymbolizers.length - 1; i >= 0; i--) {\n        if (regSymbolizers[i].test(symbol, this.geometry)) {\n          var symbolizer = new regSymbolizers[i](symbol, this.geometry, this);\n          symbolizer._index = ii;\n          symbolizers.push(symbolizer);\n          if (symbolizer instanceof PointSymbolizer) {\n            this._hasPoint = true;\n          }\n        }\n      }\n    }\n    if (!symbolizers.length) {\n      if (console) {\n        var id = this.geometry.getId();\n        console.warn('invalid symbol for geometry(' + (this.geometry ? this.geometry.getType() + (id ? ':' + id : '') : '') + ') to draw : ' + JSON.stringify(geoSymbol));\n      }\n    }\n    this._debugSymbolizer = new DebugSymbolizer(geoSymbol, this.geometry, this);\n    return symbolizers;\n  };\n  _proto.hasPoint = function hasPoint() {\n    return !!this._hasPoint;\n  };\n  _proto.getRenderPoints = function getRenderPoints(placement) {\n    this._verifyProjection();\n    if (!this._renderPoints) {\n      this._renderPoints = {};\n    }\n    if (!placement) {\n      placement = 'center';\n    }\n    if (!this._renderPoints[placement]) {\n      this._renderPoints[placement] = this.geometry._getRenderPoints(placement);\n    }\n    return this._renderPoints[placement];\n  };\n  _proto.getPaintParams = function getPaintParams(dx, dy, ignoreAltitude, disableClip, ptkey) {\n    if (ptkey === void 0) {\n      ptkey = '_pt';\n    }\n    var renderer = this.getLayer()._getRenderer();\n    var mapStateCache = renderer.mapStateCache;\n    var resolution, pitch, bearing, glScale, containerExtent;\n    var map = this.getMap();\n    if (mapStateCache && !this._hitPoint) {\n      resolution = mapStateCache.resolution;\n      pitch = mapStateCache.pitch;\n      bearing = mapStateCache.bearing;\n      glScale = mapStateCache.glScale;\n      containerExtent = mapStateCache.containerExtent;\n    } else {\n      resolution = map.getResolution();\n      pitch = map.getPitch();\n      bearing = map.getBearing();\n      glScale = map.getGLScale();\n      containerExtent = map.getContainerExtent();\n    }\n    var geometry = this.geometry,\n      res = resolution,\n      pitched = pitch !== 0,\n      rotated = bearing !== 0;\n    var params = this._cachedParams;\n    var paintAsPath = geometry._paintAsPath && geometry._paintAsPath();\n    if (paintAsPath && this._unsimpledParams && res <= this._unsimpledParams._res) {\n      params = this._unsimpledParams;\n    } else if (!params || params._res !== resolution || this._pitched !== pitched && geometry._redrawWhenPitch() || this._rotated !== rotated && geometry._redrawWhenRotate()) {\n      params = geometry._getPaintParams();\n      if (!params) {\n        return null;\n      }\n      params._res = res;\n      if (!geometry._simplified && paintAsPath) {\n        if (!this._unsimpledParams) {\n          this._unsimpledParams = params;\n        }\n        if (res > this._unsimpledParams._res) {\n          this._unsimpledParams._res = res;\n        }\n      }\n      this._cachedParams = params;\n    }\n    if (!params) {\n      return null;\n    }\n    this._pitched = pitched;\n    this._rotated = rotated;\n    var zoomScale = glScale,\n      tr = [],\n      points = params[0];\n    var mapExtent = containerExtent;\n    var cPoints = this._pointContainerPoints(points, dx, dy, ignoreAltitude, disableClip || this._hitPoint && !mapExtent.contains(this._hitPoint), null, ptkey);\n    if (!cPoints) {\n      return null;\n    }\n    tr.push(cPoints);\n    for (var i = 1, l = params.length; i < l; i++) {\n      if (isNumber(params[i]) || params[i] instanceof Size) {\n        if (isNumber(params[i])) {\n          tr.push(params[i] / zoomScale);\n        } else {\n          tr.push(params[i].multi(1 / zoomScale));\n        }\n      } else {\n        tr.push(params[i]);\n      }\n    }\n    return tr;\n  };\n  _proto._pointContainerPoints = function _pointContainerPoints(points, dx, dy, ignoreAltitude, disableClip, pointPlacement, ptkey) {\n    if (ptkey === void 0) {\n      ptkey = '_pt';\n    }\n    if (this._aboveCamera()) {\n      return null;\n    }\n    var renderer = this.getLayer()._getRenderer();\n    var mapStateCache = renderer.mapStateCache;\n    var map = this.getMap(),\n      geometry = this.geometry,\n      containerOffset = this.containerOffset;\n    var glRes, containerExtent;\n    if (mapStateCache) {\n      glRes = mapStateCache.glRes;\n      containerExtent = mapStateCache.containerExtent;\n    } else {\n      glRes = map.getGLRes();\n      containerExtent = map.getContainerExtent();\n    }\n    var cPoints;\n    var roundPoint = this.getLayer().options['roundPoint'];\n    var minx = Infinity,\n      miny = Infinity,\n      maxx = -Infinity,\n      maxy = -Infinity;\n    var needClip = !disableClip;\n    var clipBBoxBufferSize = renderer.layer.options['clipBBoxBufferSize'] || 3;\n    var symbolizers = this.symbolizers;\n    function pointsContainerPoints(viewPoints, alts) {\n      if (viewPoints === void 0) {\n        viewPoints = [];\n      }\n      if (alts === void 0) {\n        alts = [];\n      }\n      var pts = getPointsResultPts(viewPoints, ptkey);\n      pts = map._pointsAtResToContainerPoints(viewPoints, glRes, alts, pts);\n      for (var i = 0, len = pts.length; i < len; i++) {\n        var p = pts[i];\n        p._sub(containerOffset);\n        if (dx || dy) {\n          p._add(dx || 0, dy || 0);\n        }\n        if (roundPoint) {\n          p.x = Math.ceil(p.x);\n          p.y = Math.ceil(p.y);\n        }\n        minx = Math.min(p.x, minx);\n        miny = Math.min(p.y, miny);\n        maxx = Math.max(p.x, maxx);\n        maxy = Math.max(p.y, maxy);\n      }\n      if (needClip && isDashLine(symbolizers)) {\n        TEMP_CLIP_EXTENT2.ymin = containerExtent.ymin;\n        if (TEMP_CLIP_EXTENT2.ymin < clipBBoxBufferSize) {\n          TEMP_CLIP_EXTENT2.ymin = containerExtent.ymin - clipBBoxBufferSize;\n        }\n        TEMP_CLIP_EXTENT2.xmin = containerExtent.xmin - clipBBoxBufferSize;\n        TEMP_CLIP_EXTENT2.xmax = containerExtent.xmax + clipBBoxBufferSize;\n        TEMP_CLIP_EXTENT2.ymax = containerExtent.ymax + clipBBoxBufferSize;\n        if (geometry.getShell && geometry.getHoles) {\n          return clipPolygon(pts, TEMP_CLIP_EXTENT2);\n        }\n        var clipPts = clipLine(pts, TEMP_CLIP_EXTENT2, false);\n        if (clipPts.length) {\n          var _points = [];\n          clipPts.forEach(function (clipPt) {\n            for (var _i = 0, _len = clipPt.length; _i < _len; _i++) {\n              _points.push(clipPt[_i].point);\n            }\n          });\n          return _points;\n        }\n      }\n      return pts;\n    }\n    var altitude = this.getAltitude();\n    if (Array.isArray(points)) {\n      var _geometry = this.geometry;\n      var clipped;\n      if (!disableClip && _geometry.options['enableClip']) {\n        clipped = this._clip(points, altitude);\n        if (clipped.inView) {\n          needClip = false;\n        }\n      } else {\n        clipped = {\n          points: points,\n          altitude: altitude\n        };\n      }\n      var clipPoints = clipped.points;\n      altitude = clipped.altitude;\n      if (ignoreAltitude) {\n        altitude = 0;\n      }\n      var alt = altitude;\n      cPoints = [];\n      var alts = [];\n      var altitudeIsNumber = isNumber(altitude);\n      for (var i = 0, l = clipPoints.length; i < l; i++) {\n        var c = clipPoints[i];\n        if (Array.isArray(c)) {\n          if (altitudeIsNumber) {\n            var _cring = pointsContainerPoints(c, altitude);\n            cPoints.push(_cring);\n            continue;\n          }\n          var altArray = [];\n          for (var ii = 0, ll = c.length; ii < ll; ii++) {\n            if (Array.isArray(altitude)) {\n              if (altitude[i]) {\n                alt = altitude[i][ii];\n              } else {\n                alt = 0;\n              }\n            }\n            altArray.push(alt);\n          }\n          var cring = pointsContainerPoints(c, altArray);\n          cPoints.push(cring);\n        } else {\n          if (Array.isArray(altitude)) {\n            if (pointPlacement === 'vertex-last') {\n              alt = altitude[altitude.length - 1 - i];\n            } else if (pointPlacement === 'line') {\n              alt = (altitude[i] + altitude[i + 1]) / 2;\n            } else {\n              alt = altitude[i];\n            }\n          }\n          alts.push(alt);\n        }\n      }\n      if (alts.length) {\n        cPoints = pointsContainerPoints(clipPoints, alts);\n      }\n    } else if (points instanceof Point) {\n      if (ignoreAltitude) {\n        altitude = 0;\n      }\n      cPoints = map._pointAtResToContainerPoint(points, glRes, altitude)._sub(containerOffset);\n      if (dx || dy) {\n        cPoints._add(dx, dy);\n      }\n    }\n    TEMP_BBOX.minx = minx;\n    TEMP_BBOX.miny = miny;\n    TEMP_BBOX.maxx = maxx;\n    TEMP_BBOX.maxy = maxy;\n    this._containerBbox = TEMP_BBOX;\n    return cPoints;\n  };\n  _proto._clip = function _clip(points, altitude) {\n    if (isNumber(altitude) && altitude !== 0) {\n      return {\n        points: points,\n        altitude: altitude\n      };\n    }\n    if (Array.isArray(altitude)) {\n      var hasAltitude = false;\n      for (var i = 0, len = altitude.length; i < len; i++) {\n        if (altitude[i] !== 0) {\n          hasAltitude = true;\n          break;\n        }\n      }\n      if (hasAltitude) {\n        return {\n          points: points,\n          altitude: altitude\n        };\n      }\n    }\n    var map = this.getMap(),\n      geometry = this.geometry;\n    var lineWidth = this.getSymbol()['lineWidth'];\n    if (!isNumber(lineWidth)) {\n      lineWidth = 4;\n    }\n    var renderer = this.getLayer()._getRenderer();\n    var mapStateCache = renderer.mapStateCache;\n    var _2DExtent, glExtent, pitch;\n    if (mapStateCache) {\n      _2DExtent = mapStateCache._2DExtent;\n      glExtent = mapStateCache.glExtent;\n      pitch = mapStateCache.pitch;\n    } else {\n      _2DExtent = map._get2DExtent();\n      glExtent = map._get2DExtentAtRes(map.getGLRes());\n      pitch = map.getPitch();\n    }\n    var extent2D = _2DExtent._expand(lineWidth);\n    if (pitch > 0 && altitude) {\n      var c = map.cameraLookAt;\n      var pos = map.cameraPosition;\n      TEMP_POINT0$2.set(pos.x, pos.y);\n      extent2D = extent2D._combine(TEMP_POINT0$2._add(sign(c[0] - pos[0]), sign(c[1] - pos[1])));\n    }\n    var e = this.get2DExtent(null, TEMP_CLIP_EXTENT1);\n    var clipPoints = points;\n    if (e.within(extent2D)) {\n      return {\n        points: clipPoints,\n        altitude: altitude,\n        inView: true\n      };\n    }\n    var glExtent2D = glExtent._expand(lineWidth * map._glScale);\n    TEMP_CLIP_EXTENT0.xmin = glExtent2D.xmin;\n    TEMP_CLIP_EXTENT0.xmax = glExtent2D.xmax;\n    TEMP_CLIP_EXTENT0.ymin = glExtent2D.ymin;\n    TEMP_CLIP_EXTENT0.ymax = glExtent2D.ymax;\n    var smoothness = geometry.options['smoothness'];\n    if (geometry.getShell && this.geometry.getHoles && !smoothness) {\n      var xmin = glExtent2D.xmin,\n        ymin = glExtent2D.ymin,\n        xmax = glExtent2D.xmax,\n        ymax = glExtent2D.ymax;\n      var dx = Math.abs(xmax - xmin),\n        dy = Math.abs(ymax - ymin);\n      var r = Math.sqrt(dx * dx + dy * dy);\n      var rx = (r - dx) / 2,\n        ry = (r - dy) / 2;\n      TEMP_CLIP_EXTENT0.xmin = glExtent2D.xmin - rx;\n      TEMP_CLIP_EXTENT0.xmax = glExtent2D.xmax + rx;\n      TEMP_CLIP_EXTENT0.ymin = glExtent2D.ymin - ry;\n      TEMP_CLIP_EXTENT0.ymax = glExtent2D.ymax + ry;\n      if (!Array.isArray(points[0])) {\n        clipPoints = clipPolygon(points, TEMP_CLIP_EXTENT0);\n      } else {\n        clipPoints = [];\n        for (var _i2 = 0; _i2 < points.length; _i2++) {\n          var part = clipPolygon(points[_i2], TEMP_CLIP_EXTENT0);\n          if (part.length) {\n            clipPoints.push(part);\n          }\n        }\n      }\n    } else if (geometry.getJSONType() === 'LineString' && !smoothness) {\n      if (!Array.isArray(points[0])) {\n        clipPoints = clipLine(points, TEMP_CLIP_EXTENT0, false, !!smoothness);\n      } else {\n        clipPoints = [];\n        for (var _i3 = 0; _i3 < points.length; _i3++) {\n          pushIn(clipPoints, clipLine(points[_i3], TEMP_CLIP_EXTENT0, false, !!smoothness));\n        }\n      }\n      return this._interpolateSegAlt(clipPoints, points, altitude);\n    }\n    return {\n      points: clipPoints,\n      altitude: altitude\n    };\n  };\n  _proto._interpolateSegAlt = function _interpolateSegAlt(clipSegs, orig, altitude) {\n    if (!Array.isArray(altitude)) {\n      var fn = function fn(cc) {\n        return cc.point;\n      };\n      return {\n        points: clipSegs.map(function (c) {\n          if (Array.isArray(c)) {\n            return c.map(fn);\n          }\n          return c.point;\n        }),\n        altitude: altitude\n      };\n    }\n    var segsWithAlt = interpolateAlt(clipSegs, orig, altitude);\n    altitude = [];\n    var points = segsWithAlt.map(function (p) {\n      if (Array.isArray(p)) {\n        var alt = [];\n        var cp = p.map(function (pp) {\n          alt.push(pp.altitude);\n          return pp.point;\n        });\n        altitude.push(alt);\n        return cp;\n      }\n      altitude.push(p.altitude);\n      return p.point;\n    });\n    return {\n      points: points,\n      altitude: altitude\n    };\n  };\n  _proto.getSymbol = function getSymbol() {\n    return this.geometry._getInternalSymbol();\n  };\n  _proto._resetSymbolizersBBOX = function _resetSymbolizersBBOX() {\n    for (var i = this.symbolizers.length - 1; i >= 0; i--) {\n      var symbolizer = this.symbolizers[i];\n      var bbox = symbolizer.bbox;\n      resetBBOX(bbox);\n    }\n    return this;\n  };\n  _proto.paint = function paint(extent, context, offset) {\n    if (!this.symbolizers) {\n      return;\n    }\n    var layer = this.getLayer();\n    var renderer = layer._getRenderer();\n    if (!renderer || !renderer.context && !context) {\n      return;\n    }\n    var mapStateCache = renderer.mapStateCache || {};\n    if (!this.geometry._isCheck) {\n      if (extent && !extent.intersects(this.get2DExtent(renderer.resources, TEMP_PAINT_EXTENT))) {\n        return;\n      }\n    }\n    var map = this.getMap();\n    if (this._aboveCamera()) {\n      return;\n    }\n    this.containerOffset = offset || mapStateCache.offset || map._pointToContainerPoint(renderer.southWest)._add(0, -map.height);\n    this._beforePaint();\n    var ctx = context || renderer.context;\n    if (!ctx.isHitTesting) {\n      this._resetSymbolizersBBOX();\n    }\n    var contexts = [ctx, renderer.resources];\n    for (var i = this.symbolizers.length - 1; i >= 0; i--) {\n      if (ctx.shadowBlur || this.symbolizers[i].symbol['shadowBlur']) {\n        this._prepareShadow(ctx, this.symbolizers[i].symbol);\n      }\n      this.symbolizers[i].symbolize.apply(this.symbolizers[i], contexts);\n    }\n    this._afterPaint();\n    this._painted = true;\n    if (this.geometry.options['debug'] || layer.options['debug']) {\n      this._debugSymbolizer.symbolize.apply(this._debugSymbolizer, contexts);\n    }\n  };\n  _proto.getSprite = function getSprite(resources, canvasClass) {\n    if (this.geometry.type !== 'Point') {\n      return null;\n    }\n    this._spriting = true;\n    if (!this._sprite && this.symbolizers.length > 0) {\n      var extent = new PointExtent();\n      this.symbolizers.forEach(function (s) {\n        var markerExtent = s.getFixedExtent(resources);\n        extent._combine(markerExtent);\n      });\n      var origin = extent.getMin().multi(-1);\n      var clazz = canvasClass || (this.getMap() ? this.getMap().CanvasClass : null);\n      var canvas = Canvas.createCanvas(extent.getWidth(), extent.getHeight(), clazz);\n      var bak;\n      if (this._renderPoints) {\n        bak = this._renderPoints;\n      }\n      var ctx = canvas.getContext('2d');\n      var contexts = [ctx, resources];\n      for (var i = this.symbolizers.length - 1; i >= 0; i--) {\n        var dxdy = this.symbolizers[i].getDxDy();\n        this._renderPoints = {\n          'center': [[origin.add(dxdy)]]\n        };\n        this._prepareShadow(ctx, this.symbolizers[i].symbol);\n        this.symbolizers[i].symbolize.apply(this.symbolizers[i], contexts);\n      }\n      if (bak) {\n        this._renderPoints = bak;\n      }\n      this._sprite = {\n        'canvas': canvas,\n        'offset': extent.getCenter()\n      };\n    }\n    this._spriting = false;\n    return this._sprite;\n  };\n  _proto.isSpriting = function isSpriting() {\n    return !!this._spriting;\n  };\n  _proto.hitTest = function hitTest(cp, tolerance) {\n    if (!tolerance || tolerance < 0.5) {\n      tolerance = 0.5;\n    }\n    this._hitPoint = cp.sub(tolerance, tolerance);\n    if (!testCanvas) {\n      var canvasClass = this.getMap() ? this.getMap().CanvasClass : null;\n      testCanvas = Canvas.createCanvas(1, 1, canvasClass);\n    }\n    Canvas.setHitTesting(true);\n    testCanvas.width = testCanvas.height = 2 * tolerance;\n    var ctx = Canvas.getCanvas2DContext(testCanvas);\n    ctx.isHitTesting = true;\n    try {\n      this.paint(null, ctx, this._hitPoint);\n    } catch (e) {\n      throw e;\n    } finally {\n      Canvas.setHitTesting(false);\n    }\n    delete this._hitPoint;\n    var imgData = ctx.getImageData(0, 0, testCanvas.width, testCanvas.height).data;\n    for (var i = 3, l = imgData.length; i < l; i += 4) {\n      if (imgData[i] > 0) {\n        return true;\n      }\n    }\n    return false;\n  };\n  _proto.isHitTesting = function isHitTesting() {\n    return !!this._hitPoint;\n  };\n  _proto._prepareShadow = function _prepareShadow(ctx, symbol) {\n    if (symbol['shadowBlur']) {\n      ctx.shadowBlur = this.isHitTesting() ? 0 : symbol['shadowBlur'];\n      ctx.shadowColor = symbol['shadowColor'] || '#000';\n      ctx.shadowOffsetX = symbol['shadowOffsetX'] || 0;\n      ctx.shadowOffsetY = symbol['shadowOffsetY'] || 0;\n    } else if (ctx.shadowBlur) {\n      ctx.shadowBlur = null;\n      ctx.shadowColor = null;\n      ctx.shadowOffsetX = null;\n      ctx.shadowOffsetY = null;\n    }\n  };\n  _proto._eachSymbolizer = function _eachSymbolizer(fn, context) {\n    if (!this.symbolizers) {\n      return;\n    }\n    if (!context) {\n      context = this;\n    }\n    for (var i = this.symbolizers.length - 1; i >= 0; i--) {\n      fn.apply(context, [this.symbolizers[i]]);\n    }\n  };\n  _proto.get2DExtent = function get2DExtent(resources, out) {\n    this._verifyProjection();\n    var map = this.getMap();\n    resources = resources || this.getLayer()._getRenderer().resources;\n    var zoom = map.getZoom();\n    var isDynamicSize = this._isDynamicSize();\n    if (!this._extent2D || this._extent2D._zoom !== zoom || !this._fixedExtent) {\n      if (this._extent2D && this._extent2D._zoom !== zoom) {\n        delete this._extent2D;\n      }\n      if (this.symbolizers) {\n        if (!this._extent2D) {\n          this._extent2D = this._computeExtent2D(new PointExtent());\n          this._extent2D._zoom = zoom;\n        }\n        if (!this._fixedExtent) {\n          this._fixedExtent = this._computeFixedExtent(resources, new PointExtent());\n        }\n      }\n    }\n    if (!this._extent2D) {\n      if (isDynamicSize) {\n        delete this._fixedExtent;\n      }\n      return null;\n    }\n    var _this$_fixedExtent = this._fixedExtent,\n      xmin = _this$_fixedExtent.xmin,\n      ymin = _this$_fixedExtent.ymin,\n      xmax = _this$_fixedExtent.xmax,\n      ymax = _this$_fixedExtent.ymax;\n    if (isDynamicSize) {\n      delete this._fixedExtent;\n    }\n    TEMP_FIXED_EXTENT.set(xmin, -ymax, xmax, -ymin);\n    if (out) {\n      out.set(this._extent2D['xmin'], this._extent2D['ymin'], this._extent2D['xmax'], this._extent2D['ymax']);\n      out._add(TEMP_FIXED_EXTENT);\n      return out;\n    }\n    return this._extent2D.add(TEMP_FIXED_EXTENT);\n  };\n  _proto._computeExtent2D = function _computeExtent2D(extent) {\n    for (var i = this.symbolizers.length - 1; i >= 0; i--) {\n      var symbolizer = this.symbolizers[i];\n      extent._combine(symbolizer.get2DExtent());\n    }\n    return extent;\n  };\n  _proto._computeFixedExtent = function _computeFixedExtent(resources, extent) {\n    for (var i = this.symbolizers.length - 1; i >= 0; i--) {\n      var symbolizer = this.symbolizers[i];\n      if (symbolizer.getFixedExtent) {\n        extent._combine(symbolizer.getFixedExtent(resources));\n      }\n    }\n    return extent;\n  };\n  _proto._isDynamicSize = function _isDynamicSize() {\n    for (var i = this.symbolizers.length - 1; i >= 0; i--) {\n      var symbolizer = this.symbolizers[i];\n      if (symbolizer.isDynamicSize()) {\n        return true;\n      }\n    }\n    return false;\n  };\n  _proto._aboveCamera = function _aboveCamera() {\n    var altitude = this.getMinAltitude();\n    var map = this.getMap();\n    var glRes = map.getGLRes();\n    altitude = map.altitudeToPoint(altitude, glRes) * sign(altitude);\n    var frustumAlt = map.getFrustumAltitude();\n    return altitude && frustumAlt && frustumAlt < altitude;\n  };\n  _proto.getFixedExtent = function getFixedExtent() {\n    var map = this.getMap();\n    var zoom = map.getZoom();\n    if (this._isDynamicSize()) {\n      return this._computeFixedExtent(null, new PointExtent());\n    }\n    if (!this._extent2D || this._extent2D._zoom !== zoom) {\n      this.get2DExtent(null, TEMP_FIXED_EXTENT);\n    }\n    return this._fixedExtent;\n  };\n  _proto.setZIndex = function setZIndex(change) {\n    this._eachSymbolizer(function (symbolizer) {\n      symbolizer.setZIndex(change);\n    });\n  };\n  _proto.show = function show() {\n    if (!this._painted) {\n      var layer = this.getLayer();\n      if (!layer.isCanvasRender()) {\n        this.paint();\n      }\n    } else {\n      this.removeCache();\n      this._eachSymbolizer(function (symbolizer) {\n        symbolizer.show();\n      });\n    }\n  };\n  _proto.hide = function hide() {\n    this._eachSymbolizer(function (symbolizer) {\n      symbolizer.hide();\n    });\n  };\n  _proto.repaint = function repaint() {\n    this._altAtGL = this._getGeometryAltitude();\n    this.removeCache();\n    var layer = this.getLayer();\n    if (!layer) {\n      return;\n    }\n    var renderer = layer.getRenderer();\n    if (!renderer || !renderer.setToRedraw()) {\n      return;\n    }\n    renderer.setToRedraw();\n  };\n  _proto.refreshSymbol = function refreshSymbol() {\n    this.removeCache();\n    this._removeSymbolizers();\n    this.symbolizers = this._createSymbolizers();\n  };\n  _proto.remove = function remove() {\n    this.removeCache();\n    this._removeSymbolizers();\n  };\n  _proto._removeSymbolizers = function _removeSymbolizers() {\n    this._eachSymbolizer(function (symbolizer) {\n      delete symbolizer.painter;\n      symbolizer.remove();\n    });\n    delete this.symbolizers;\n  };\n  _proto.removeCache = function removeCache() {\n    delete this._renderPoints;\n    delete this._paintParams;\n    delete this._sprite;\n    delete this._extent2D;\n    delete this._fixedExtent;\n    delete this._cachedParams;\n    delete this._unsimpledParams;\n  };\n  _proto.getAltitude = function getAltitude() {\n    var propAlt = this.geometry._getAltitude();\n    if (propAlt !== this._propAlt) {\n      this._altAtGL = this._getGeometryAltitude();\n    }\n    if (!this._altAtGL) {\n      return 0;\n    }\n    return this._altAtGL;\n  };\n  _proto.getMinAltitude = function getMinAltitude() {\n    if (!this.minAltitude) {\n      return 0;\n    }\n    return this.minAltitude;\n  };\n  _proto.getMaxAltitude = function getMaxAltitude() {\n    if (!this.maxAltitude) {\n      return 0;\n    }\n    return this.maxAltitude;\n  };\n  _proto._getGeometryAltitude = function _getGeometryAltitude() {\n    var _this2 = this;\n    var map = this.getMap();\n    if (!map) {\n      return 0;\n    }\n    var altitude = this.geometry._getAltitude();\n    this._propAlt = altitude;\n    if (!altitude) {\n      this.minAltitude = this.maxAltitude = 0;\n      return 0;\n    }\n    var center = this.geometry.getCenter();\n    if (!center) {\n      return 0;\n    }\n    if (Array.isArray(altitude)) {\n      this.minAltitude = Number.MAX_VALUE;\n      this.maxAltitude = Number.MIN_VALUE;\n      return altitude.map(function (alt) {\n        var a = alt;\n        if (a < _this2.minAltitude) {\n          _this2.minAltitude = a;\n        }\n        if (a > _this2.maxAltitude) {\n          _this2.maxAltitude = a;\n        }\n        return a;\n      });\n    } else {\n      this.minAltitude = this.maxAltitude = altitude;\n      return this.minAltitude;\n    }\n  };\n  _proto._verifyProjection = function _verifyProjection() {\n    var projection = this.geometry._getProjection() || PROJECTION;\n    if (this._projCode && this._projCode !== projection.code) {\n      this.removeCache();\n    }\n    this._projCode = projection.code;\n  };\n  _proto._beforePaint = function _beforePaint() {};\n  _proto._afterPaint = function _afterPaint() {};\n  return Painter;\n}(Class);\nfunction interpolateAlt(points, orig, altitude) {\n  if (!Array.isArray(altitude)) {\n    return points;\n  }\n  var parts = [];\n  for (var i = 0, l = points.length; i < l; i++) {\n    if (Array.isArray(points[i])) {\n      parts.push(interpolateAlt(points[i], orig, altitude));\n    } else {\n      var p = points[i];\n      if (!p.point.equals(orig[p.index])) {\n        var w0 = void 0,\n          w1 = void 0;\n        if (p.index === 0) {\n          w0 = p.index;\n          w1 = p.index + 1;\n        } else {\n          w0 = p.index - 1;\n          w1 = p.index;\n        }\n        var t0 = p.point.distanceTo(orig[w1]);\n        var t = t0 / (t0 + orig[w0].distanceTo(p.point));\n        var alt = interpolate(altitude[w0], altitude[w1], 1 - t);\n        p.altitude = alt;\n        parts.push(p);\n      } else {\n        p.altitude = altitude[p.index];\n        parts.push(p);\n      }\n    }\n  }\n  return parts;\n}\nvar TEMP_EXTENT$3 = new PointExtent();\nvar CollectionPainter = function (_Class) {\n  _inheritsLoose(CollectionPainter, _Class);\n  function CollectionPainter(geometry, isMask) {\n    var _this;\n    _this = _Class.call(this) || this;\n    _this.geometry = geometry;\n    _this.isMask = isMask;\n    _this.bbox = getDefaultBBOX();\n    _this._drawTime = 0;\n    return _this;\n  }\n  var _proto = CollectionPainter.prototype;\n  _proto._setDrawTime = function _setDrawTime(time) {\n    this._drawTime = time;\n    this._eachPainter(function (painter) {\n      painter._setDrawTime(time);\n    });\n    return this;\n  };\n  _proto.getRenderBBOX = function getRenderBBOX() {\n    var _this2 = this;\n    var layer = this.getLayer();\n    if (layer && layer._drawTime !== this._drawTime) {\n      return null;\n    }\n    resetBBOX(this.bbox);\n    this._eachPainter(function (painter) {\n      var bbox = painter.getRenderBBOX();\n      if (!validateBBOX(bbox)) {\n        return;\n      }\n      setBBOX(_this2.bbox, bbox);\n    });\n    if (validateBBOX(this.bbox)) {\n      return this.bbox;\n    }\n    return null;\n  };\n  _proto._eachPainter = function _eachPainter(fn) {\n    var geometries = this.geometry.getGeometries();\n    var painter;\n    for (var i = 0, len = geometries.length; i < len; i++) {\n      painter = this.isMask ? geometries[i]._getMaskPainter() : geometries[i]._getPainter();\n      if (!painter) {\n        continue;\n      }\n      if (painter) {\n        if (fn.call(this, painter) === false) {\n          break;\n        }\n      }\n    }\n  };\n  _proto.getLayer = function getLayer() {\n    return this.geometry && this.geometry.getLayer();\n  };\n  _proto.paint = function paint(extent) {\n    if (!this.geometry) {\n      return;\n    }\n    this._eachPainter(function (painter) {\n      painter.paint(extent);\n    });\n  };\n  _proto.get2DExtent = function get2DExtent(resources, out) {\n    if (out) {\n      out.set(null, null, null, null);\n    }\n    var extent = out || new PointExtent();\n    this._eachPainter(function (painter) {\n      extent = extent._combine(painter.get2DExtent(resources, TEMP_EXTENT$3));\n    });\n    return extent;\n  };\n  _proto.remove = function remove() {\n    var args = arguments;\n    this._eachPainter(function (painter) {\n      painter.remove.apply(painter, args);\n    });\n  };\n  _proto.setZIndex = function setZIndex() {\n    var args = arguments;\n    this._eachPainter(function (painter) {\n      painter.setZIndex.apply(painter, args);\n    });\n  };\n  _proto.show = function show() {\n    var args = arguments;\n    this._eachPainter(function (painter) {\n      painter.show.apply(painter, args);\n    });\n  };\n  _proto.hide = function hide() {\n    var args = arguments;\n    this._eachPainter(function (painter) {\n      painter.hide.apply(painter, args);\n    });\n  };\n  _proto.repaint = function repaint() {\n    var args = arguments;\n    this._eachPainter(function (painter) {\n      painter.repaint.apply(painter, args);\n    });\n  };\n  _proto.refreshSymbol = function refreshSymbol() {\n    var args = arguments;\n    this._eachPainter(function (painter) {\n      painter.refreshSymbol.apply(painter, args);\n    });\n  };\n  _proto.hasPoint = function hasPoint() {\n    var result = false;\n    this._eachPainter(function (painter) {\n      if (painter.hasPoint()) {\n        result = true;\n        return false;\n      }\n      return true;\n    });\n    return result;\n  };\n  _proto.getMinAltitude = function getMinAltitude() {\n    var first = true;\n    var result = 0;\n    this._eachPainter(function (painter) {\n      var alt = painter.getMinAltitude();\n      if (first || alt < result) {\n        first = false;\n        result = alt;\n      }\n    });\n    return result;\n  };\n  _proto.getMaxAltitude = function getMaxAltitude() {\n    var result = 0;\n    this._eachPainter(function (painter) {\n      var alt = painter.getMaxAltitude();\n      if (alt > result) {\n        result = alt;\n      }\n    });\n    return result;\n  };\n  return CollectionPainter;\n}(Class);\nvar MAX_ZOOM = 23;\nvar DefaultSpatialReference = {\n  'EPSG:3857': {\n    'projection': 'EPSG:3857',\n    'resolutions': function () {\n      var resolutions = [];\n      var d = 2 * 6378137 * Math.PI;\n      for (var i = 0; i < MAX_ZOOM; i++) {\n        resolutions[i] = d / (256 * Math.pow(2, i));\n      }\n      return resolutions;\n    }(),\n    'fullExtent': {\n      'top': 6378137 * Math.PI,\n      'left': -6378137 * Math.PI,\n      'bottom': -6378137 * Math.PI,\n      'right': 6378137 * Math.PI\n    }\n  },\n  'EPSG:4326': {\n    'projection': 'EPSG:4326',\n    'fullExtent': {\n      'top': 90,\n      'left': -180,\n      'bottom': -90,\n      'right': 180\n    },\n    'resolutions': function () {\n      var resolutions = [];\n      for (var i = 0; i < MAX_ZOOM; i++) {\n        resolutions[i] = 180 / (Math.pow(2, i) * 128);\n      }\n      return resolutions;\n    }()\n  },\n  'BAIDU': {\n    'projection': 'baidu',\n    'resolutions': function () {\n      var res = Math.pow(2, 18);\n      var resolutions = [];\n      for (var i = 0; i < MAX_ZOOM; i++) {\n        resolutions[i] = res;\n        res *= 0.5;\n      }\n      return resolutions;\n    }(),\n    'fullExtent': {\n      'top': 33554432,\n      'left': -33554432,\n      'bottom': -33554432,\n      'right': 33554432\n    }\n  },\n  'IDENTITY': {\n    'projection': 'identity',\n    'resolutions': function () {\n      var res = Math.pow(2, 8);\n      var resolutions = [];\n      for (var i = 0; i < MAX_ZOOM; i++) {\n        resolutions[i] = res;\n        res *= 0.5;\n      }\n      return resolutions;\n    }(),\n    'fullExtent': {\n      'top': 200000,\n      'left': -200000,\n      'bottom': -200000,\n      'right': 200000\n    }\n  },\n  'PRESET-VT-3857': {\n    'projection': 'EPSG:3857',\n    'resolutions': function () {\n      var resolutions = [];\n      var d = 6378137 * Math.PI;\n      for (var i = 0; i < MAX_ZOOM; i++) {\n        resolutions[i] = d / (256 * Math.pow(2, i));\n      }\n      return resolutions;\n    }(),\n    'fullExtent': {\n      'top': 6378137 * Math.PI,\n      'left': -6378137 * Math.PI,\n      'bottom': -6378137 * Math.PI,\n      'right': 6378137 * Math.PI\n    }\n  }\n};\nDefaultSpatialReference['EPSG:4490'] = DefaultSpatialReference['EPSG:4326'];\nvar SpatialReference = function () {\n  function SpatialReference(options) {\n    if (options === void 0) {\n      options = {};\n    }\n    this.options = options;\n    this._initSpatialRef();\n  }\n  SpatialReference.registerPreset = function registerPreset(name, value) {\n    name = name && name.toUpperCase();\n    if (DefaultSpatialReference[name]) {\n      throw new Error(\"Spatial reference \" + name + \" already existed.\");\n    }\n    DefaultSpatialReference[name] = value;\n  };\n  SpatialReference.getPreset = function getPreset(preset) {\n    return DefaultSpatialReference[preset.toUpperCase()];\n  };\n  SpatialReference.getAllPresets = function getAllPresets() {\n    return Object.keys(DefaultSpatialReference);\n  };\n  SpatialReference.getProjectionInstance = function getProjectionInstance(prjName) {\n    if (!prjName) {\n      return null;\n    }\n    if (isObject(prjName)) {\n      if (!prjName.locate) {\n        prjName = extend({}, prjName);\n        if (prjName.measure === 'identity') {\n          extend(prjName, Measurer.getInstance('IDENTITY'));\n        } else {\n          extend(prjName, Measurer.getInstance('EPSG:4326'));\n        }\n      }\n      return prjName;\n    }\n    prjName = (prjName + '').toLowerCase();\n    for (var p in projections) {\n      if (hasOwn(projections, p)) {\n        var code = projections[p]['code'];\n        if (code && code.toLowerCase() === prjName) {\n          return projections[p];\n        }\n      }\n    }\n    return null;\n  };\n  SpatialReference.equals = function equals(sp1, sp2) {\n    if (isString(sp1) || isString(sp2)) {\n      return sp1 === sp2;\n    }\n    if (!sp1 && !sp2) {\n      return true;\n    } else if (!sp1 || !sp2) {\n      return false;\n    }\n    if (sp1.projection !== sp2.projection) {\n      return false;\n    }\n    var f1 = sp1.fullExtent,\n      f2 = sp2.fullExtent;\n    if (f1 && !f2 || !f1 && f2) {\n      return false;\n    }\n    if (f1 && f2) {\n      if (f1.top !== f2.top || f1.bottom !== f2.bottom || f1.left !== f2.left || f1.right !== f2.right) {\n        return false;\n      }\n    }\n    var r1 = sp1.resolutions,\n      r2 = sp2.resolutions;\n    if (r1 && r2) {\n      if (r1.length !== r2.length) {\n        return false;\n      }\n      for (var i = 0; i < r1.length; i++) {\n        if (r1[i] !== r2[i]) {\n          return false;\n        }\n      }\n    } else if (r1 || r2) {\n      return false;\n    }\n    return true;\n  };\n  var _proto = SpatialReference.prototype;\n  _proto._initSpatialRef = function _initSpatialRef() {\n    var projection = this.options['projection'];\n    if (projection) {\n      projection = SpatialReference.getProjectionInstance(projection);\n    } else {\n      projection = DEFAULT$1;\n    }\n    if (!projection) {\n      throw new Error('must provide a valid projection in map\\'s spatial reference.');\n    }\n    projection = extend({}, Common, projection);\n    if (!projection.measureLength) {\n      extend(projection, Measurer.DEFAULT);\n    }\n    this._projection = projection;\n    var defaultSpatialRef,\n      resolutions = this.options['resolutions'];\n    if (!resolutions) {\n      if (projection['code']) {\n        defaultSpatialRef = DefaultSpatialReference[projection['code'].toUpperCase()];\n        if (defaultSpatialRef) {\n          resolutions = defaultSpatialRef['resolutions'];\n          this.isEPSG = projection['code'] !== 'IDENTITY';\n        }\n      }\n      if (!resolutions) {\n        throw new Error('must provide valid resolutions in map\\'s spatial reference.');\n      }\n    }\n    this._resolutions = resolutions;\n    this._pyramid = true;\n    if (this._pyramid) {\n      for (var i = 0; i < resolutions.length; i++) {\n        if (resolutions[i] && resolutions[i - 1]) {\n          if (resolutions[i - 1] / resolutions[i] !== 2) {\n            this._pyramid = false;\n            break;\n          }\n        }\n      }\n    }\n    var fullExtent = this.options['fullExtent'];\n    if (!fullExtent) {\n      if (projection['code']) {\n        defaultSpatialRef = DefaultSpatialReference[projection['code'].toUpperCase()];\n        if (defaultSpatialRef) {\n          fullExtent = defaultSpatialRef['fullExtent'];\n        }\n      }\n      if (!fullExtent) {\n        throw new Error('must provide a valid fullExtent in map\\'s spatial reference.');\n      }\n    }\n    if (!isNil(fullExtent['left'])) {\n      this._fullExtent = new Extent(new Coordinate(fullExtent['left'], fullExtent['top']), new Coordinate(fullExtent['right'], fullExtent['bottom']));\n    } else {\n      this._fullExtent = new Extent(fullExtent);\n      fullExtent['left'] = fullExtent['xmin'];\n      fullExtent['right'] = fullExtent['xmax'];\n      fullExtent['top'] = fullExtent['ymax'];\n      fullExtent['bottom'] = fullExtent['ymin'];\n    }\n    if (isNil(fullExtent['top']) || isNil(fullExtent['bottom']) || isNil(fullExtent['left']) || isNil(fullExtent['right'])) {\n      throw new Error('must provide valid top/bottom/left/right in fullExtent.');\n    }\n    extend(this._fullExtent, fullExtent);\n    this._projection.fullExtent = fullExtent;\n    var a = fullExtent['right'] >= fullExtent['left'] ? 1 : -1,\n      b = fullExtent['top'] >= fullExtent['bottom'] ? -1 : 1;\n    this._transformation = new Transformation([a, b, 0, 0]);\n  };\n  _proto.getResolutions = function getResolutions() {\n    return this._resolutions || [];\n  };\n  _proto.getResolution = function getResolution(zoom) {\n    var z = zoom | 0;\n    if (z < 0) {\n      z = 0;\n    } else if (z > this._resolutions.length - 1) {\n      z = this._resolutions.length - 1;\n    }\n    var res = this._resolutions[z];\n    if (z !== zoom && zoom > 0 && z < this._resolutions.length - 1) {\n      var next = this._resolutions[z + 1];\n      return res + (next - res) * (zoom - z);\n    }\n    return res;\n  };\n  _proto.getProjection = function getProjection() {\n    return this._projection;\n  };\n  _proto.getFullExtent = function getFullExtent() {\n    return this._fullExtent;\n  };\n  _proto.getTransformation = function getTransformation() {\n    return this._transformation;\n  };\n  _proto.getMinZoom = function getMinZoom() {\n    for (var i = 0; i < this._resolutions.length; i++) {\n      if (!isNil(this._resolutions[i])) {\n        return i;\n      }\n    }\n    return 0;\n  };\n  _proto.getMaxZoom = function getMaxZoom() {\n    for (var i = this._resolutions.length - 1; i >= 0; i--) {\n      if (!isNil(this._resolutions[i])) {\n        return i;\n      }\n    }\n    return this._resolutions.length - 1;\n  };\n  _proto.getZoomDirection = function getZoomDirection() {\n    return sign(this._resolutions[this.getMinZoom()] - this._resolutions[this.getMaxZoom()]);\n  };\n  _proto.toJSON = function toJSON() {\n    if (!this.json) {\n      this.json = {\n        'resolutions': this._resolutions,\n        'fullExtent': {\n          'top': this._fullExtent.top,\n          'left': this._fullExtent.left,\n          'bottom': this._fullExtent.bottom,\n          'right': this._fullExtent.right\n        },\n        'projection': this._projection.code\n      };\n    }\n    return this.json;\n  };\n  _proto.isPyramid = function isPyramid() {\n    return this._pyramid;\n  };\n  return SpatialReference;\n}();\nvar TEMP_POINT0$3 = new Point(0, 0);\nvar TEMP_EXTENT$4 = new PointExtent();\nvar TEMP_PROPERTIES = {};\nvar options = {\n  'id': null,\n  'visible': true,\n  'interactive': true,\n  'editable': true,\n  'cursor': null,\n  'antiMeridian': false,\n  'defaultProjection': 'EPSG:4326'\n};\nvar Geometry = function (_JSONAble) {\n  _inheritsLoose(Geometry, _JSONAble);\n  function Geometry(options) {\n    var _this;\n    var opts = extend({}, options);\n    var symbol = opts['symbol'];\n    var properties = opts['properties'];\n    var id = opts['id'];\n    delete opts['symbol'];\n    delete opts['id'];\n    delete opts['properties'];\n    _this = _JSONAble.call(this, opts) || this;\n    if (symbol) {\n      _this.setSymbol(symbol);\n    } else {\n      _this._genSizeSymbol();\n    }\n    if (properties) {\n      _this.setProperties(properties);\n    }\n    if (!isNil(id)) {\n      _this.setId(id);\n    }\n    return _this;\n  }\n  var _proto = Geometry.prototype;\n  _proto.getFirstCoordinate = function getFirstCoordinate() {\n    if (this.type === 'GeometryCollection') {\n      var geometries = this.getGeometries();\n      if (!geometries.length) {\n        return null;\n      }\n      return geometries[0].getFirstCoordinate();\n    }\n    var coordinates = this.getCoordinates();\n    if (!Array.isArray(coordinates)) {\n      return coordinates;\n    }\n    do {\n      coordinates = coordinates[0];\n    } while (Array.isArray(coordinates) && coordinates.length > 0);\n    return coordinates;\n  };\n  _proto.getLastCoordinate = function getLastCoordinate() {\n    if (this.type === 'GeometryCollection') {\n      var geometries = this.getGeometries();\n      if (!geometries.length) {\n        return null;\n      }\n      return geometries[geometries.length - 1].getLastCoordinate();\n    }\n    var coordinates = this.getCoordinates();\n    if (!Array.isArray(coordinates)) {\n      return coordinates;\n    }\n    do {\n      coordinates = coordinates[coordinates.length - 1];\n    } while (Array.isArray(coordinates) && coordinates.length > 0);\n    return coordinates;\n  };\n  _proto.addTo = function addTo(layer, fitview) {\n    layer.addGeometry(this, fitview);\n    return this;\n  };\n  _proto.getLayer = function getLayer() {\n    if (!this._layer) {\n      return null;\n    }\n    return this._layer;\n  };\n  _proto.getMap = function getMap() {\n    if (!this._layer) {\n      return null;\n    }\n    return this._layer.getMap();\n  };\n  _proto.getId = function getId() {\n    return this._id;\n  };\n  _proto.setId = function setId(id) {\n    var oldId = this.getId();\n    this._id = id;\n    this._fireEvent('idchange', {\n      'old': oldId,\n      'new': id\n    });\n    return this;\n  };\n  _proto.getProperties = function getProperties() {\n    if (!this.properties) {\n      if (this._getParent()) {\n        return this._getParent().getProperties();\n      }\n      return null;\n    }\n    return this.properties;\n  };\n  _proto.setProperties = function setProperties(properties) {\n    var old = this.properties;\n    this.properties = isObject(properties) ? extend({}, properties) : properties;\n    this._repaint();\n    this._fireEvent('propertieschange', {\n      'old': old,\n      'new': properties\n    });\n    return this;\n  };\n  _proto.getType = function getType() {\n    return this.type;\n  };\n  _proto.getSymbol = function getSymbol() {\n    var s = this._symbol;\n    if (s) {\n      if (!Array.isArray(s)) {\n        return extend({}, s);\n      } else {\n        return extendSymbol(s);\n      }\n    }\n    return null;\n  };\n  _proto.setSymbol = function setSymbol(symbol) {\n    this._symbolUpdated = symbol;\n    this._symbol = this._prepareSymbol(symbol);\n    this.onSymbolChanged();\n    delete this._compiledSymbol;\n    delete this._symbolHash;\n    return this;\n  };\n  _proto.getSymbolHash = function getSymbolHash$$1() {\n    if (!this._symbolHash) {\n      this._symbolHash = getSymbolHash(this._symbolUpdated);\n    }\n    return this._symbolHash;\n  };\n  _proto.updateSymbol = function updateSymbol(props) {\n    if (!props) {\n      return this;\n    }\n    var s = this._getSymbol();\n    if (Array.isArray(s)) {\n      if (!Array.isArray(props)) {\n        throw new Error('Parameter of updateSymbol is not an array.');\n      }\n      for (var i = 0; i < props.length; i++) {\n        if (isTextSymbol(props[i])) {\n          delete this._textDesc;\n        }\n        if (s[i] && props[i]) {\n          s[i] = extendSymbol(s[i], props[i]);\n        }\n      }\n    } else if (Array.isArray(props)) {\n      throw new Error('Geometry\\'s symbol is not an array to update.');\n    } else {\n      if (isTextSymbol(s)) {\n        delete this._textDesc;\n      }\n      if (s) {\n        s = extendSymbol(s, props);\n      } else {\n        s = extendSymbol(this._getInternalSymbol(), props);\n      }\n    }\n    this._eventSymbolProperties = props;\n    delete this._compiledSymbol;\n    return this.setSymbol(s);\n  };\n  _proto.getTextContent = function getTextContent() {\n    var symbol = this._getInternalSymbol();\n    if (Array.isArray(symbol)) {\n      var contents = [];\n      var has = false;\n      for (var i = 0; i < symbol.length; i++) {\n        contents[i] = replaceVariable(symbol[i] && symbol[i]['textName'], this.getProperties());\n        if (!isNil(contents[i])) {\n          has = true;\n        }\n      }\n      return has ? contents : null;\n    }\n    return replaceVariable(symbol && symbol['textName'], this.getProperties());\n  };\n  _proto.getTextDesc = function getTextDesc() {\n    if (!this._textDesc) {\n      var textContent = this.getTextContent();\n      var symbol = this._sizeSymbol;\n      var isArray = Array.isArray(textContent);\n      if (Array.isArray(symbol)) {\n        this._textDesc = symbol.map(function (s, i) {\n          return describeText(isArray ? textContent[i] : '', s);\n        });\n      } else {\n        this._textDesc = describeText(textContent, symbol);\n      }\n    }\n    return this._textDesc;\n  };\n  _proto.getCenter = function getCenter() {\n    return this._computeCenter(this._getMeasurer());\n  };\n  _proto.getExtent = function getExtent() {\n    var prjExt = this._getPrjExtent();\n    var projection = this._getProjection();\n    if (prjExt && projection) {\n      var min = projection.unproject(new Coordinate(prjExt['xmin'], prjExt['ymin'])),\n        max = projection.unproject(new Coordinate(prjExt['xmax'], prjExt['ymax']));\n      return new Extent(min, max, projection);\n    } else {\n      return this._computeExtent(this._getMeasurer());\n    }\n  };\n  _proto.getContainerExtent = function getContainerExtent(out) {\n    var extent2d = this.get2DExtent();\n    if (!extent2d || !extent2d.isValid()) {\n      return null;\n    }\n    var map = this.getMap();\n    var glRes = map.getGLRes();\n    var minAltitude = this.getMinAltitude();\n    var extent = extent2d.convertTo(function (c) {\n      return map._pointAtResToContainerPoint(c, glRes, minAltitude, TEMP_POINT0$3);\n    }, out);\n    var maxAltitude = this.getMaxAltitude();\n    if (maxAltitude !== minAltitude) {\n      var extent2 = extent2d.convertTo(function (c) {\n        return map._pointAtResToContainerPoint(c, glRes, maxAltitude, TEMP_POINT0$3);\n      }, TEMP_EXTENT$4);\n      extent._combine(extent2);\n    }\n    var layer = this.getLayer();\n    if (layer && this.type === 'LineString' && maxAltitude && layer.options['drawAltitude']) {\n      var groundExtent = extent2d.convertTo(function (c) {\n        return map._pointAtResToContainerPoint(c, glRes, 0, TEMP_POINT0$3);\n      }, TEMP_EXTENT$4);\n      extent._combine(groundExtent);\n    }\n    if (extent) {\n      extent._add(this._getFixedExtent());\n    }\n    var smoothness = this.options['smoothness'];\n    if (smoothness) {\n      extent._expand(extent.getWidth() * 0.15);\n    }\n    return extent;\n  };\n  _proto._getFixedExtent = function _getFixedExtent() {\n    if (!this._fixedExtent) {\n      this._fixedExtent = new PointExtent();\n    }\n    var symbol = this._sizeSymbol;\n    var t = (symbol && symbol['lineWidth'] || 1) / 2;\n    this._fixedExtent.set(-t, -t, t, t);\n    var dx = symbol && symbol['lineDx'] || 0;\n    this._fixedExtent._add([dx, 0]);\n    var dy = symbol && symbol['lineDy'] || 0;\n    this._fixedExtent._add([0, dy]);\n    return this._fixedExtent;\n  };\n  _proto.get2DExtent = function get2DExtent() {\n    var map = this.getMap();\n    if (!map) {\n      return null;\n    }\n    if (this._extent2d) {\n      return this._extent2d;\n    }\n    var extent = this._getPrjExtent();\n    if (!extent || !extent.isValid()) {\n      return null;\n    }\n    var min = extent.getMin();\n    var max = extent.getMax();\n    var glRes = map.getGLRes();\n    map._prjToPointAtRes(min, glRes, min);\n    map._prjToPointAtRes(max, glRes, max);\n    this._extent2d = new PointExtent(min, max);\n    this._extent2d.z = map.getZoom();\n    return this._extent2d;\n  };\n  _proto.getSize = function getSize() {\n    var extent = this.getContainerExtent();\n    return extent ? extent.getSize() : null;\n  };\n  _proto.containsPoint = function containsPoint(containerPoint, t) {\n    if (!this.getMap()) {\n      throw new Error('The geometry is required to be added on a map to perform \"containsPoint\".');\n    }\n    if (containerPoint instanceof Coordinate) {\n      containerPoint = this.getMap().coordToContainerPoint(containerPoint);\n    }\n    return this._containsPoint(containerPoint, t);\n  };\n  _proto._containsPoint = function _containsPoint(containerPoint, t) {\n    var painter = this._getPainter();\n    if (!painter) {\n      return false;\n    }\n    t = t || 0;\n    if (this._hitTestTolerance) {\n      t += this._hitTestTolerance();\n    }\n    return painter.hitTest(containerPoint, t);\n  };\n  _proto.show = function show() {\n    this.options['visible'] = true;\n    if (this.getMap()) {\n      var painter = this._getPainter();\n      if (painter) {\n        painter.show();\n      }\n      this._fireEvent('show');\n    }\n    return this;\n  };\n  _proto.hide = function hide() {\n    this.options['visible'] = false;\n    if (this.getMap()) {\n      this.onHide();\n      var painter = this._getPainter();\n      if (painter) {\n        painter.hide();\n      }\n      this._fireEvent('hide');\n    }\n    return this;\n  };\n  _proto.isVisible = function isVisible() {\n    if (!this.options['visible']) {\n      return false;\n    }\n    var symbol = this._getInternalSymbol();\n    if (!symbol) {\n      return true;\n    }\n    if (Array.isArray(symbol)) {\n      if (!symbol.length) {\n        return true;\n      }\n      for (var i = 0, l = symbol.length; i < l; i++) {\n        if (isNil(symbol[i]['opacity']) || symbol[i]['opacity'] > 0) {\n          return true;\n        }\n      }\n      return false;\n    } else {\n      return isNil(symbol['opacity']) || isObject(symbol['opacity']) || isNumber(symbol['opacity']) && symbol['opacity'] > 0;\n    }\n  };\n  _proto.getZIndex = function getZIndex() {\n    return this.options['zIndex'] || 0;\n  };\n  _proto.setZIndex = function setZIndex(zIndex) {\n    var old = this.options['zIndex'];\n    this.options['zIndex'] = zIndex;\n    this._fireEvent('zindexchange', {\n      'old': old,\n      'new': zIndex\n    });\n    return this;\n  };\n  _proto.setZIndexSilently = function setZIndexSilently(zIndex) {\n    this.options['zIndex'] = zIndex;\n    return this;\n  };\n  _proto.bringToFront = function bringToFront() {\n    var layer = this.getLayer();\n    if (!layer || !layer.getGeoMaxZIndex) {\n      return this;\n    }\n    var topZ = layer.getGeoMaxZIndex();\n    this.setZIndex(topZ + 1);\n    return this;\n  };\n  _proto.bringToBack = function bringToBack() {\n    var layer = this.getLayer();\n    if (!layer || !layer.getGeoMinZIndex) {\n      return this;\n    }\n    var bottomZ = layer.getGeoMinZIndex();\n    this.setZIndex(bottomZ - 1);\n    return this;\n  };\n  _proto.translate = function translate(x, y) {\n    if (isNil(x)) {\n      return this;\n    }\n    var offset = new Coordinate(x, y);\n    if (offset.x === 0 && offset.y === 0) {\n      return this;\n    }\n    var coordinates = this.getCoordinates();\n    this._silence = true;\n    if (coordinates) {\n      if (Array.isArray(coordinates)) {\n        var translated = forEachCoord(coordinates, function (coord) {\n          return coord.add(offset);\n        });\n        this.setCoordinates(translated);\n      } else {\n        this.setCoordinates(coordinates.add(offset));\n      }\n    }\n    this._silence = false;\n    this._fireEvent('positionchange');\n    return this;\n  };\n  _proto.flash = function flash$$1(interval, count, cb, context) {\n    return flash.call(this, interval, count, cb, context);\n  };\n  _proto.copy = function copy() {\n    var json = this.toJSON();\n    var ret = Geometry.fromJSON(json);\n    ret.options['visible'] = true;\n    return ret;\n  };\n  _proto.remove = function remove() {\n    var layer = this.getLayer();\n    if (!layer) {\n      return this;\n    }\n    this._fireEvent('removestart');\n    this._unbind();\n    this._fireEvent('removeend');\n    this._fireEvent('remove');\n    return this;\n  };\n  _proto.toGeoJSONGeometry = function toGeoJSONGeometry() {\n    var gJson = this._exportGeoJSONGeometry();\n    return gJson;\n  };\n  _proto.toGeoJSON = function toGeoJSON(opts) {\n    if (!opts) {\n      opts = {};\n    }\n    var feature = {\n      'type': 'Feature',\n      'geometry': null\n    };\n    if (isNil(opts['geometry']) || opts['geometry']) {\n      var geoJSON = this._exportGeoJSONGeometry();\n      feature['geometry'] = geoJSON;\n    }\n    var id = this.getId();\n    if (!isNil(id)) {\n      feature['id'] = id;\n    }\n    var properties;\n    if (isNil(opts['properties']) || opts['properties']) {\n      properties = this._exportProperties();\n    }\n    feature['properties'] = properties;\n    return feature;\n  };\n  _proto.toJSON = function toJSON(options) {\n    if (!options) {\n      options = {};\n    }\n    var json = this._toJSON(options);\n    var other = this._exportGraphicOptions(options);\n    extend(json, other);\n    return json;\n  };\n  _proto.getLength = function getLength() {\n    return this._computeGeodesicLength(this._getMeasurer());\n  };\n  _proto.getArea = function getArea() {\n    return this._computeGeodesicArea(this._getMeasurer());\n  };\n  _proto.rotate = function rotate(angle, pivot) {\n    if (this.type === 'GeometryCollection') {\n      var geometries = this.getGeometries();\n      geometries.forEach(function (g) {\n        return g.rotate(angle, pivot);\n      });\n      return this;\n    }\n    if (!pivot) {\n      pivot = this.getCenter();\n    } else {\n      pivot = new Coordinate(pivot);\n    }\n    var measurer = this._getMeasurer();\n    var coordinates = this.getCoordinates();\n    if (!Array.isArray(coordinates)) {\n      if (pivot.x !== coordinates.x || pivot.y !== coordinates.y) {\n        var c = measurer._rotate(coordinates, pivot, angle);\n        this.setCoordinates(c);\n      }\n      return this;\n    }\n    forEachCoord(coordinates, function (c) {\n      return measurer._rotate(c, pivot, angle);\n    });\n    this.setCoordinates(coordinates);\n    return this;\n  };\n  _proto._getConnectPoints = function _getConnectPoints() {\n    return [this.getCenter()];\n  };\n  _proto._initOptions = function _initOptions(options) {\n    var opts = extend({}, options);\n    var symbol = opts['symbol'];\n    var properties = opts['properties'];\n    var id = opts['id'];\n    delete opts['symbol'];\n    delete opts['id'];\n    delete opts['properties'];\n    this.setOptions(opts);\n    if (symbol) {\n      this.setSymbol(symbol);\n    }\n    if (properties) {\n      this.setProperties(properties);\n    }\n    if (!isNil(id)) {\n      this.setId(id);\n    }\n  };\n  _proto._bindLayer = function _bindLayer(layer) {\n    if (layer === this.getLayer()) {\n      return;\n    }\n    if (this.getLayer()) {\n      throw new Error('Geometry cannot be added to two or more layers at the same time.');\n    }\n    this._layer = layer;\n    this._clearCache();\n    this._bindInfoWindow();\n    this._bindMenu();\n  };\n  _proto._prepareSymbol = function _prepareSymbol(symbol) {\n    if (Array.isArray(symbol)) {\n      var cookedSymbols = [];\n      for (var i = 0; i < symbol.length; i++) {\n        cookedSymbols.push(convertResourceUrl(this._checkAndCopySymbol(symbol[i])));\n      }\n      return cookedSymbols;\n    } else if (symbol) {\n      symbol = this._checkAndCopySymbol(symbol);\n      return convertResourceUrl(symbol);\n    }\n    return null;\n  };\n  _proto._checkAndCopySymbol = function _checkAndCopySymbol(symbol) {\n    var s = {};\n    for (var i in symbol) {\n      if (NUMERICAL_PROPERTIES[i] && isString(symbol[i])) {\n        s[i] = +symbol[i];\n      } else {\n        s[i] = symbol[i];\n      }\n    }\n    return s;\n  };\n  _proto._getSymbol = function _getSymbol() {\n    return this._symbol;\n  };\n  _proto._setExternSymbol = function _setExternSymbol(symbol) {\n    this._eventSymbolProperties = symbol;\n    if (!this._symbol) {\n      delete this._textDesc;\n    }\n    this._externSymbol = this._prepareSymbol(symbol);\n    this.onSymbolChanged();\n    return this;\n  };\n  _proto._getInternalSymbol = function _getInternalSymbol() {\n    if (this._symbol) {\n      return this._symbol;\n    } else if (this._externSymbol) {\n      return this._externSymbol;\n    } else if (this.options['symbol']) {\n      return this.options['symbol'];\n    }\n    return null;\n  };\n  _proto._getPrjExtent = function _getPrjExtent() {\n    var p = this._getProjection();\n    this._verifyProjection();\n    if (!this._extent && p) {\n      this._extent = this._computePrjExtent(p);\n    }\n    return this._extent;\n  };\n  _proto._unbind = function _unbind() {\n    var layer = this.getLayer();\n    if (!layer) {\n      return;\n    }\n    if (this._animPlayer) {\n      this._animPlayer.finish();\n    }\n    this._unbindMenu();\n    this._unbindInfoWindow();\n    if (this.isEditing()) {\n      this.endEdit();\n    }\n    this._removePainter();\n    if (this.onRemove) {\n      this.onRemove();\n    }\n    if (layer.onRemoveGeometry) {\n      layer.onRemoveGeometry(this);\n    }\n    delete this._layer;\n    delete this._internalId;\n    delete this._extent;\n  };\n  _proto._getInternalId = function _getInternalId() {\n    return this._internalId;\n  };\n  _proto._setInternalId = function _setInternalId(id) {\n    this._internalId = id;\n  };\n  _proto._getMeasurer = function _getMeasurer() {\n    if (this._getProjection()) {\n      return this._getProjection();\n    }\n    return SpatialReference.getProjectionInstance(this.options['defaultProjection']);\n  };\n  _proto._getProjection = function _getProjection() {\n    var map = this.getMap();\n    if (map) {\n      return map.getProjection();\n    }\n    return null;\n  };\n  _proto._verifyProjection = function _verifyProjection() {\n    var projection = this._getProjection();\n    if (this._projCode && projection && this._projCode !== projection.code) {\n      this._clearProjection();\n    }\n    this._projCode = projection ? projection.code : this._projCode;\n  };\n  _proto._getExternalResources = function _getExternalResources() {\n    var symbol = this._getInternalSymbol();\n    return getExternalResources(symbol);\n  };\n  _proto._getPainter = function _getPainter() {\n    var layer = this.getLayer();\n    if (!this._painter && layer) {\n      if (GEOMETRY_COLLECTION_TYPES.indexOf(this.type) !== -1) {\n        if (layer.constructor.getCollectionPainterClass) {\n          var clazz = layer.constructor.getCollectionPainterClass();\n          if (clazz) {\n            this._painter = new clazz(this);\n          }\n        }\n      } else if (layer.constructor.getPainterClass) {\n        var _clazz = layer.constructor.getPainterClass();\n        if (_clazz) {\n          this._painter = new _clazz(this);\n        }\n      }\n    }\n    return this._painter;\n  };\n  _proto._getMaskPainter = function _getMaskPainter() {\n    if (this._maskPainter) {\n      return this._maskPainter;\n    }\n    this._maskPainter = this.getGeometries && this.getGeometries() ? new CollectionPainter(this, true) : new Painter(this);\n    return this._maskPainter;\n  };\n  _proto._removePainter = function _removePainter() {\n    if (this._painter) {\n      this._painter.remove();\n    }\n    delete this._painter;\n  };\n  _proto._paint = function _paint(extent) {\n    if (this._painter) {\n      if (this._dirtyCoords) {\n        delete this._dirtyCoords;\n        var projection = this._getProjection();\n        if (projection) {\n          this._pcenter = projection.project(this._coordinates);\n          this._clearCache();\n        }\n      }\n      this._painter.paint(extent);\n    }\n  };\n  _proto._clearCache = function _clearCache() {\n    delete this._extent;\n    delete this._extent2d;\n  };\n  _proto._clearProjection = function _clearProjection() {\n    delete this._extent;\n    delete this._extent2d;\n  };\n  _proto._repaint = function _repaint() {\n    if (this._painter) {\n      this._painter.repaint();\n    }\n  };\n  _proto.onHide = function onHide() {\n    this.closeMenu();\n    this.closeInfoWindow();\n  };\n  _proto.onShapeChanged = function onShapeChanged() {\n    this._clearCache();\n    this._repaint();\n    this._fireEvent('shapechange');\n  };\n  _proto.onPositionChanged = function onPositionChanged() {\n    this._clearCache();\n    this._repaint();\n    this._fireEvent('positionchange');\n  };\n  _proto.onSymbolChanged = function onSymbolChanged() {\n    if (this._painter) {\n      this._painter.refreshSymbol();\n    }\n    var e = {};\n    if (this._eventSymbolProperties) {\n      e.properties = JSON.parse(JSON.stringify(this._eventSymbolProperties));\n      delete this._eventSymbolProperties;\n    } else {\n      delete this._textDesc;\n    }\n    this._genSizeSymbol();\n    this._fireEvent('symbolchange', e);\n  };\n  _proto._genSizeSymbol = function _genSizeSymbol() {\n    var symbol = this._getInternalSymbol();\n    if (!symbol) {\n      delete this._sizeSymbol;\n      return;\n    }\n    if (Array.isArray(symbol)) {\n      this._sizeSymbol = [];\n      var dynamicSize = false;\n      for (var i = 0; i < symbol.length; i++) {\n        var s = this._sizeSymbol[i] = this._getSizeSymbol(symbol[i]);\n        if (!dynamicSize && s && s._dynamic) {\n          dynamicSize = true;\n        }\n      }\n      this._sizeSymbol._dynamic = dynamicSize;\n    } else {\n      this._sizeSymbol = this._getSizeSymbol(symbol);\n    }\n  };\n  _proto._getSizeSymbol = function _getSizeSymbol(symbol) {\n    var symbolSize = loadGeoSymbol({\n      lineWidth: symbol['lineWidth'],\n      lineDx: symbol['lineDx'],\n      lineDy: symbol['lineDy']\n    }, this);\n    if (isFunctionDefinition(symbol['lineWidth']) || isFunctionDefinition(symbol['lineDx']) || isFunctionDefinition(symbol['lineDy'])) {\n      symbolSize._dynamic = true;\n    }\n    return symbolSize;\n  };\n  _proto._getCompiledSymbol = function _getCompiledSymbol() {\n    if (this._compiledSymbol) {\n      return this._compiledSymbol;\n    }\n    this._compiledSymbol = loadGeoSymbol(this._getInternalSymbol(), this);\n    return this._compiledSymbol;\n  };\n  _proto.onConfig = function onConfig(conf) {\n    var properties;\n    if (conf['properties']) {\n      properties = conf['properties'];\n      delete conf['properties'];\n    }\n    var needRepaint = false;\n    for (var p in conf) {\n      if (conf.hasOwnProperty(p)) {\n        var prefix = p.slice(0, 5);\n        if (prefix === 'arrow' || prefix === 'smoot') {\n          needRepaint = true;\n          break;\n        }\n      }\n    }\n    if (properties) {\n      this.setProperties(properties);\n      this._repaint();\n    } else if (needRepaint) {\n      this._repaint();\n    }\n  };\n  _proto._setParent = function _setParent(geometry) {\n    if (geometry) {\n      this._parent = geometry;\n    }\n  };\n  _proto._getParent = function _getParent() {\n    return this._parent;\n  };\n  _proto._fireEvent = function _fireEvent(eventName, param) {\n    if (this._silence) {\n      return;\n    }\n    if (this.getLayer() && this.getLayer()._onGeometryEvent) {\n      if (!param) {\n        param = {};\n      }\n      param['type'] = eventName;\n      param['target'] = this;\n      this.getLayer()._onGeometryEvent(param);\n    }\n    this.fire(eventName, param);\n  };\n  _proto._toJSON = function _toJSON(options) {\n    return {\n      'feature': this.toGeoJSON(options)\n    };\n  };\n  _proto._exportGraphicOptions = function _exportGraphicOptions(options) {\n    var json = {};\n    if (isNil(options['options']) || options['options']) {\n      json['options'] = this.config();\n    }\n    if (isNil(options['symbol']) || options['symbol']) {\n      json['symbol'] = this.getSymbol();\n    }\n    if (isNil(options['infoWindow']) || options['infoWindow']) {\n      if (this._infoWinOptions) {\n        json['infoWindow'] = this._infoWinOptions;\n      }\n    }\n    return json;\n  };\n  _proto._exportGeoJSONGeometry = function _exportGeoJSONGeometry() {\n    var points = this.getCoordinates();\n    var coordinates = Coordinate.toNumberArrays(points);\n    return {\n      'type': this.getType(),\n      'coordinates': coordinates\n    };\n  };\n  _proto._exportProperties = function _exportProperties() {\n    var properties = null;\n    var geoProperties = this.getProperties();\n    if (!isNil(geoProperties)) {\n      if (isObject(geoProperties)) {\n        properties = extend({}, geoProperties);\n      } else {\n        properties = geoProperties;\n      }\n    }\n    return properties;\n  };\n  _proto._hitTestTolerance = function _hitTestTolerance() {\n    return 0;\n  };\n  _proto._getAltitude = function _getAltitude() {\n    var layer = this.getLayer();\n    if (!layer) {\n      return 0;\n    }\n    var layerOpts = layer.options;\n    var layerAltitude = layer.getAltitude ? layer.getAltitude() : 0;\n    var enableAltitude = layerOpts['enableAltitude'];\n    if (!enableAltitude) {\n      return layerAltitude;\n    }\n    var altitudeProperty = getAltitudeProperty(layer);\n    var properties = this.properties || TEMP_PROPERTIES;\n    var altitude = properties[altitudeProperty];\n    if (isNil(altitude)) {\n      var alts = getGeometryCoordinatesAlts(this, layerAltitude, enableAltitude);\n      if (!isNil(alts)) {\n        return alts;\n      }\n      return layerAltitude;\n    }\n    if (Array.isArray(altitude)) {\n      return altitude.map(function (alt) {\n        return alt + layerAltitude;\n      });\n    }\n    return altitude + layerAltitude;\n  };\n  _proto.getAltitude = function getAltitude() {\n    var layer = this.getLayer();\n    var altitudeProperty = getAltitudeProperty(layer);\n    var properties = this.properties || TEMP_PROPERTIES;\n    var altitude = properties[altitudeProperty];\n    if (!isNil(altitude)) {\n      return altitude;\n    }\n    var alts = getGeometryCoordinatesAlts(this, 0, false);\n    if (!isNil(alts)) {\n      return alts;\n    }\n    return 0;\n  };\n  _proto.setAltitude = function setAltitude(alt) {\n    if (!isNumber(alt)) {\n      return this;\n    }\n    var layer = this.getLayer();\n    var altitudeProperty = getAltitudeProperty(layer);\n    var properties = this.properties || TEMP_PROPERTIES;\n    var altitude = properties[altitudeProperty];\n    if (!isNil(altitude)) {\n      if (Array.isArray(altitude)) {\n        for (var i = 0, len = altitude.length; i < len; i++) {\n          altitude[i] = alt;\n        }\n      } else {\n        properties[altitudeProperty] = alt;\n      }\n    }\n    var coordinates = this.getCoordinates ? this.getCoordinates() : null;\n    if (!coordinates) {\n      return this;\n    }\n    setCoordinatesAlt(coordinates, alt);\n    if (layer) {\n      var render = layer.getRenderer();\n      if (render && render.gl) {\n        this.setCoordinates(coordinates);\n      } else if (render) {\n        this._repaint();\n      }\n    }\n    return this;\n  };\n  _proto._genMinMaxAlt = function _genMinMaxAlt() {\n    var _this2 = this;\n    var altitude = this._getAltitude();\n    if (Array.isArray(altitude)) {\n      this._minAlt = Number.MAX_VALUE;\n      this._maxAlt = Number.MIN_VALUE;\n      altitude.forEach(function (alt) {\n        var a = alt;\n        if (a < _this2._minAlt) {\n          _this2._minAlt = a;\n        }\n        if (a > _this2._maxAlt) {\n          _this2._maxAlt = a;\n        }\n      });\n    } else {\n      this._minAlt = this._maxAlt = altitude;\n    }\n  };\n  _proto.getMinAltitude = function getMinAltitude() {\n    if (this._minAlt === undefined) {\n      this._genMinMaxAlt();\n    }\n    if (!this._minAlt) {\n      return 0;\n    }\n    return this._minAlt;\n  };\n  _proto.getMaxAltitude = function getMaxAltitude() {\n    if (this._maxAlt === undefined) {\n      this._genMinMaxAlt();\n    }\n    if (!this._maxAlt) {\n      return 0;\n    }\n    return this._maxAlt;\n  };\n  return Geometry;\n}(JSONAble(Eventable(Handlerable(Class))));\nGeometry.mergeOptions(options);\nfunction getAltitudeProperty(layer) {\n  var altitudeProperty = 'altitude';\n  if (layer) {\n    var layerOpts = layer.options;\n    altitudeProperty = layerOpts['altitudeProperty'];\n  }\n  return altitudeProperty;\n}\nfunction getGeometryCoordinatesAlts(geometry, layerAlt, enableAltitude) {\n  var coordinates = geometry.getCoordinates ? geometry.getCoordinates() : null;\n  if (coordinates) {\n    var tempAlts = [];\n    coordinatesHasAlt(coordinates, tempAlts);\n    if (tempAlts.length) {\n      var alts = getCoordinatesAlts(coordinates, layerAlt, enableAltitude);\n      if (geometry.getShell) {\n        return alts[0][0];\n      }\n      return alts;\n    }\n  }\n  return null;\n}\nfunction setCoordinatesAlt(coordinates, alt) {\n  if (Array.isArray(coordinates)) {\n    for (var i = 0, len = coordinates.length; i < len; i++) {\n      setCoordinatesAlt(coordinates[i], alt);\n    }\n  } else {\n    coordinates.z = alt;\n  }\n}\nfunction coordinatesHasAlt(coordinates, tempAlts) {\n  if (tempAlts.length) {\n    return;\n  }\n  if (Array.isArray(coordinates)) {\n    for (var i = 0, len = coordinates.length; i < len; i++) {\n      coordinatesHasAlt(coordinates[i], tempAlts);\n    }\n  } else if (isNumber(coordinates.z)) {\n    tempAlts.push(coordinates.z);\n  }\n}\nfunction getCoordinatesAlts(coordinates, layerAlt, enableAltitude) {\n  if (Array.isArray(coordinates)) {\n    var alts = [];\n    for (var i = 0, len = coordinates.length; i < len; i++) {\n      alts.push(getCoordinatesAlts(coordinates[i], layerAlt, enableAltitude));\n    }\n    return alts;\n  }\n  if (isNumber(coordinates.z)) {\n    return enableAltitude ? layerAlt + coordinates.z : coordinates.z;\n  } else if (enableAltitude) {\n    return layerAlt;\n  } else {\n    return 0;\n  }\n}\nvar options$1 = {\n  'attribution': null,\n  'minZoom': null,\n  'maxZoom': null,\n  'visible': true,\n  'opacity': 1,\n  'globalCompositeOperation': null,\n  'renderer': 'canvas',\n  'debugOutline': '#0f0',\n  'cssFilter': null,\n  'forceRenderOnMoving': false,\n  'forceRenderOnZooming': false,\n  'forceRenderOnRotating': false,\n  'collision': false,\n  'collisionScope': 'layer',\n  'hitDetect': function () {\n    return !Browser$1.mobile;\n  }()\n};\nvar Layer = function (_JSONAble) {\n  _inheritsLoose(Layer, _JSONAble);\n  function Layer(id, options) {\n    var _this;\n    var canvas;\n    if (options) {\n      canvas = options.canvas;\n      delete options.canvas;\n    }\n    _this = _JSONAble.call(this, options) || this;\n    _this._canvas = canvas;\n    _this.setId(id);\n    if (options) {\n      _this.setZIndex(options.zIndex);\n      if (options.mask) {\n        _this.setMask(Geometry.fromJSON(options.mask));\n      }\n    }\n    _this.proxyOptions();\n    return _this;\n  }\n  var _proto = Layer.prototype;\n  _proto.load = function load() {\n    if (!this.getMap()) {\n      return this;\n    }\n    if (this.onLoad()) {\n      this._initRenderer();\n      var zIndex = this.getZIndex();\n      if (!isNil(zIndex)) {\n        this._renderer.setZIndex(zIndex);\n        if (!this.isCanvasRender()) {\n          this._renderer.render();\n        }\n      }\n      this.onLoadEnd();\n    }\n    return this;\n  };\n  _proto.getId = function getId() {\n    return this._id;\n  };\n  _proto.setId = function setId(id) {\n    var old = this._id;\n    if (!isNil(id)) {\n      id = id + '';\n    }\n    this._id = id;\n    this.fire('idchange', {\n      'old': old,\n      'new': id\n    });\n    return this;\n  };\n  _proto.addTo = function addTo(map) {\n    map.addLayer(this);\n    return this;\n  };\n  _proto.setZIndex = function setZIndex(zIndex) {\n    this._zIndex = zIndex;\n    if (isNil(zIndex)) {\n      delete this.options['zIndex'];\n    } else {\n      this.options.zIndex = zIndex;\n    }\n    if (this.map) {\n      this.map._sortLayersByZIndex();\n    }\n    if (this._renderer) {\n      this._renderer.setZIndex(zIndex);\n    }\n    this.fire('setzindex', {\n      zIndex: zIndex\n    });\n    return this;\n  };\n  _proto.getZIndex = function getZIndex() {\n    return this._zIndex || 0;\n  };\n  _proto.getMinZoom = function getMinZoom() {\n    var map = this.getMap();\n    var minZoom = this.options['minZoom'];\n    return map ? Math.max(map.getMinZoom(), minZoom || 0) : minZoom;\n  };\n  _proto.getMaxZoom = function getMaxZoom() {\n    var map = this.getMap();\n    var maxZoom = this.options['maxZoom'];\n    return map ? Math.min(map.getMaxZoom(), isNil(maxZoom) ? Infinity : maxZoom) : maxZoom;\n  };\n  _proto.getOpacity = function getOpacity() {\n    return this.options['opacity'];\n  };\n  _proto.setOpacity = function setOpacity(op) {\n    this.config('opacity', op);\n    this.fire('setopacity', {\n      opacity: op\n    });\n    return this;\n  };\n  _proto.isCanvasRender = function isCanvasRender() {\n    var renderer = this._getRenderer();\n    return renderer && renderer instanceof CanvasRenderer;\n  };\n  _proto.getMap = function getMap() {\n    if (this.map) {\n      return this.map;\n    }\n    return null;\n  };\n  _proto.getProjection = function getProjection() {\n    var map = this.getMap();\n    return map ? map.getProjection() : null;\n  };\n  _proto.bringToFront = function bringToFront() {\n    var layers = this._getLayerList();\n    if (!layers.length) {\n      return this;\n    }\n    var topLayer = layers[layers.length - 1];\n    if (layers.length === 1 || topLayer === this) {\n      return this;\n    }\n    var max = topLayer.getZIndex();\n    this.setZIndex(max + 1);\n    return this;\n  };\n  _proto.bringToBack = function bringToBack() {\n    var layers = this._getLayerList();\n    if (!layers.length) {\n      return this;\n    }\n    var bottomLayer = layers[0];\n    if (layers.length === 1 || bottomLayer === this) {\n      return this;\n    }\n    var min = bottomLayer.getZIndex();\n    this.setZIndex(min - 1);\n    return this;\n  };\n  _proto.show = function show() {\n    var _this2 = this;\n    if (!this.options['visible']) {\n      this.options['visible'] = true;\n      var renderer = this.getRenderer();\n      if (renderer) {\n        renderer.show();\n      }\n      var map = this.getMap();\n      if (renderer && map) {\n        map.once('renderend', function () {\n          _this2.fire('show');\n        });\n      } else {\n        this.fire('show');\n      }\n    }\n    return this;\n  };\n  _proto.hide = function hide() {\n    var _this3 = this;\n    if (this.options['visible']) {\n      this.options['visible'] = false;\n      var renderer = this.getRenderer();\n      if (renderer) {\n        renderer.hide();\n      }\n      var map = this.getMap();\n      if (renderer && map) {\n        map.once('renderend', function () {\n          _this3.fire('hide');\n        });\n      } else {\n        this.fire('hide');\n      }\n    }\n    return this;\n  };\n  _proto.isVisible = function isVisible() {\n    if (isNumber(this.options['opacity']) && this.options['opacity'] <= 0) {\n      return false;\n    }\n    var map = this.getMap();\n    if (map) {\n      var zoom = map.getZoom();\n      if (!isNil(this.options['maxZoom']) && this.options['maxZoom'] < zoom || !isNil(this.options['minZoom']) && this.options['minZoom'] > zoom) {\n        return false;\n      }\n    }\n    if (isNil(this.options['visible'])) {\n      this.options['visible'] = true;\n    }\n    return this.options['visible'];\n  };\n  _proto.remove = function remove() {\n    if (this.map) {\n      this.map.removeLayer(this);\n    }\n    return this;\n  };\n  _proto.getMask = function getMask() {\n    return this._mask;\n  };\n  _proto.setMask = function setMask(mask) {\n    if (!(mask.type === 'Point' && mask._isVectorMarker() || mask.type === 'Polygon' || mask.type === 'MultiPolygon')) {\n      throw new Error('Mask for a layer must be a marker with vector marker symbol or a Polygon(MultiPolygon).');\n    }\n    mask._bindLayer(this);\n    if (mask.type === 'Point') {\n      mask.updateSymbol({\n        'markerLineColor': 'rgba(0, 0, 0, 0)',\n        'markerFillOpacity': 0\n      });\n    } else {\n      mask.setSymbol({\n        'lineColor': 'rgba(0, 0, 0, 0)',\n        'polygonOpacity': 0\n      });\n    }\n    this._mask = mask;\n    this.options.mask = mask.toJSON();\n    if (!this.getMap() || this.getMap().isZooming()) {\n      return this;\n    }\n    var renderer = this._getRenderer();\n    if (renderer && renderer.setToRedraw) {\n      this._getRenderer().setToRedraw();\n    }\n    return this;\n  };\n  _proto.removeMask = function removeMask() {\n    delete this._mask;\n    delete this.options.mask;\n    if (!this.getMap() || this.getMap().isZooming()) {\n      return this;\n    }\n    var renderer = this._getRenderer();\n    if (renderer && renderer.setToRedraw) {\n      this._getRenderer().setToRedraw();\n    }\n    return this;\n  };\n  _proto.onLoad = function onLoad() {\n    return true;\n  };\n  _proto.onLoadEnd = function onLoadEnd() {};\n  _proto.isLoaded = function isLoaded() {\n    return !!this._loaded;\n  };\n  _proto.getCollisionIndex = function getCollisionIndex() {\n    if (this.options['collisionScope'] === 'layer') {\n      if (!this._collisionIndex) {\n        this._collisionIndex = new CollisionIndex();\n      }\n      return this._collisionIndex;\n    }\n    var map = this.getMap();\n    if (!map) {\n      return null;\n    }\n    return map.getCollisionIndex();\n  };\n  _proto.clearCollisionIndex = function clearCollisionIndex() {\n    if (this.options['collisionScope'] === 'layer' && this._collisionIndex) {\n      this._collisionIndex.clear();\n    }\n    return this;\n  };\n  _proto.getRenderer = function getRenderer() {\n    return this._getRenderer();\n  };\n  _proto.onConfig = function onConfig(conf) {\n    var needUpdate = conf && Object.keys && Object.keys(conf).length > 0;\n    if (needUpdate && isNil(conf['animation'])) {\n      if (this._optionsHook && isFunction(this._optionsHook)) {\n        this._optionsHook(conf);\n      }\n      if (this._silentConfig) {\n        return;\n      }\n      var renderer = this.getRenderer();\n      if (renderer && renderer.setToRedraw) {\n        renderer.setToRedraw();\n      }\n    }\n  };\n  _proto.onAdd = function onAdd() {};\n  _proto.onRendererCreate = function onRendererCreate() {};\n  _proto.onCanvasCreate = function onCanvasCreate() {};\n  _proto.onRemove = function onRemove() {};\n  _proto._bindMap = function _bindMap(map, zIndex) {\n    if (!map) {\n      return;\n    }\n    this.map = map;\n    if (!isNil(zIndex)) {\n      this.setZIndex(zIndex);\n    }\n    this._switchEvents('on', this);\n    this.onAdd();\n    this.fire('add');\n  };\n  _proto._initRenderer = function _initRenderer() {\n    var renderer = this.options['renderer'];\n    if (!this.constructor.getRendererClass) {\n      return;\n    }\n    var clazz = this.constructor.getRendererClass(renderer);\n    if (!clazz) {\n      throw new Error('Invalid renderer for Layer(' + this.getId() + '):' + renderer);\n    }\n    this._renderer = new clazz(this);\n    this._renderer.layer = this;\n    this._renderer.setZIndex(this.getZIndex());\n    this._switchEvents('on', this._renderer);\n    if (this._renderer.onAdd) {\n      this._renderer.onAdd();\n    }\n    this.onRendererCreate();\n    this.fire('renderercreate', {\n      'renderer': this._renderer\n    });\n  };\n  _proto._doRemove = function _doRemove() {\n    this._loaded = false;\n    this._switchEvents('off', this);\n    this.onRemove();\n    if (this._renderer) {\n      this._switchEvents('off', this._renderer);\n      this._renderer.remove();\n      delete this._renderer;\n    }\n    delete this.map;\n    delete this._collisionIndex;\n  };\n  _proto._switchEvents = function _switchEvents(to, emitter) {\n    if (emitter && emitter.getEvents && this.getMap()) {\n      this.getMap()[to](emitter.getEvents(), emitter);\n    }\n  };\n  _proto._getRenderer = function _getRenderer() {\n    return this._renderer;\n  };\n  _proto._getLayerList = function _getLayerList() {\n    if (!this.map) {\n      return [];\n    }\n    return this.map._layers;\n  };\n  _proto._getMask2DExtent = function _getMask2DExtent() {\n    if (!this._mask || !this.getMap()) {\n      return null;\n    }\n    var painter = this._mask._getMaskPainter();\n    if (!painter) {\n      return null;\n    }\n    return painter.get2DExtent();\n  };\n  return Layer;\n}(JSONAble(Eventable(Renderable(Class))));\nLayer.mergeOptions(options$1);\nvar fire = Layer.prototype.fire;\nLayer.prototype.fire = function (eventType, param) {\n  if (eventType === 'layerload') {\n    this._loaded = true;\n  }\n  if (this.map) {\n    if (!param) {\n      param = {};\n    }\n    param['type'] = eventType;\n    param['target'] = this;\n    this.map._onLayerEvent(param);\n  }\n  fire.apply(this, arguments);\n  if (['show', 'hide'].indexOf(eventType) > -1) {\n    this.fire('visiblechange', Object.assign({}, param, {\n      visible: this.options.visible\n    }));\n  }\n  return this;\n};\nvar TEMP_COORD = new Coordinate(0, 0);\nvar TEMP_POINT = new Point(0, 0);\nvar REDRAW_OPTIONS_PROPERTIES = ['centerCross', 'fog', 'fogColor', 'debugSky'];\nvar options$2 = {\n  'maxVisualPitch': 70,\n  'maxPitch': 80,\n  'centerCross': false,\n  'zoomInCenter': false,\n  'zoomOrigin': null,\n  'zoomAnimation': function () {\n    return !IS_NODE;\n  }(),\n  'zoomAnimationDuration': 330,\n  'panAnimation': function () {\n    return !IS_NODE;\n  }(),\n  'panAnimationDuration': 600,\n  'rotateAnimation': function () {\n    return !IS_NODE;\n  }(),\n  'zoomable': true,\n  'enableInfoWindow': true,\n  'hitDetect': function () {\n    return !Browser$1.mobile;\n  }(),\n  'hitDetectLimit': 5,\n  'fpsOnInteracting': 25,\n  'layerCanvasLimitOnInteracting': -1,\n  'maxZoom': null,\n  'minZoom': null,\n  'maxExtent': null,\n  'fixCenterOnResize': true,\n  'checkSize': true,\n  'checkSizeInterval': 1000,\n  'renderer': 'canvas',\n  'cascadePitches': [10, 60],\n  'renderable': true,\n  'clickTimeThreshold': 280,\n  'stopRenderOnOffscreen': true,\n  'preventWheelScroll': true,\n  'preventTouch': true,\n  'supportPluginEvent': true,\n  'switchDragButton': false\n};\nvar Map$1 = function (_Handlerable) {\n  _inheritsLoose(Map, _Handlerable);\n  function Map(container, options) {\n    var _this;\n    if (!options) {\n      throw new Error('Invalid options when creating map.');\n    }\n    if (!options['center']) {\n      throw new Error('Invalid center when creating map.');\n    }\n    var opts = extend({}, options);\n    var zoom = opts['zoom'];\n    delete opts['zoom'];\n    var center = new Coordinate(opts['center']);\n    delete opts['center'];\n    var baseLayer = opts['baseLayer'];\n    delete opts['baseLayer'];\n    var layers = opts['layers'];\n    delete opts['layers'];\n    _this = _Handlerable.call(this, opts) || this;\n    _this.VERSION = Map.VERSION;\n    Object.defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), 'id', {\n      value: UID(),\n      writable: false\n    });\n    _this._loaded = false;\n    _this._initContainer(container);\n    _this._panels = {};\n    _this._baseLayer = null;\n    _this._layers = [];\n    _this._zoomLevel = zoom;\n    _this._center = center;\n    _this.setSpatialReference(opts['spatialReference'] || opts['view']);\n    _this._mapViewPoint = new Point(0, 0);\n    _this._initRenderer();\n    _this._updateMapSize(_this._getContainerDomSize());\n    if (baseLayer) {\n      _this.setBaseLayer(baseLayer);\n    }\n    if (layers) {\n      _this.addLayer(layers);\n    }\n    _this.setMaxExtent(opts['maxExtent']);\n    _this._Load();\n    _this.proxyOptions();\n    return _this;\n  }\n  Map.addOnLoadHook = function addOnLoadHook(fn) {\n    var args = Array.prototype.slice.call(arguments, 1);\n    var onload = typeof fn === 'function' ? fn : function () {\n      this[fn].apply(this, args);\n    };\n    this.prototype._onLoadHooks = this.prototype._onLoadHooks || [];\n    this.prototype._onLoadHooks.push(onload);\n    return this;\n  };\n  var _proto = Map.prototype;\n  _proto.isLoaded = function isLoaded() {\n    return !!this._loaded;\n  };\n  _proto.getContainer = function getContainer() {\n    return this._containerDOM;\n  };\n  _proto.getSpatialReference = function getSpatialReference() {\n    return this._spatialReference;\n  };\n  _proto.setSpatialReference = function setSpatialReference(ref) {\n    var oldRef = this.options['spatialReference'];\n    if (this._loaded && SpatialReference.equals(oldRef, ref)) {\n      return this;\n    }\n    this._updateSpatialReference(ref, oldRef);\n    return this;\n  };\n  _proto._updateSpatialReference = function _updateSpatialReference(ref, oldRef) {\n    if (isString(ref)) {\n      ref = SpatialReference.getPreset(ref);\n    }\n    ref = extend({}, ref);\n    this._center = this.getCenter();\n    this.options['spatialReference'] = ref;\n    this._spatialReference = new SpatialReference(ref);\n    if (this.options['spatialReference'] && isFunction(this.options['spatialReference']['projection'])) {\n      var projection = this._spatialReference.getProjection();\n      this.options['spatialReference']['projection'] = projection['code'];\n    }\n    this._resetMapStatus();\n    this._fireEvent('spatialreferencechange', {\n      'old': oldRef,\n      'new': extend({}, this.options['spatialReference'])\n    });\n    return this;\n  };\n  _proto.onConfig = function onConfig(conf) {\n    var ref = conf['spatialReference'] || conf['view'];\n    if (!isNil(ref)) {\n      this._updateSpatialReference(ref, null);\n    }\n    var needUpdate = false;\n    for (var i = 0, len = REDRAW_OPTIONS_PROPERTIES.length; i < len; i++) {\n      var key = REDRAW_OPTIONS_PROPERTIES[i];\n      if (!isNil(conf[key])) {\n        needUpdate = true;\n        break;\n      }\n    }\n    if (!needUpdate) {\n      return this;\n    }\n    var renderer = this.getRenderer();\n    if (renderer) {\n      renderer.setToRedraw();\n    }\n    return this;\n  };\n  _proto.getProjection = function getProjection() {\n    if (!this._spatialReference) {\n      return null;\n    }\n    return this._spatialReference.getProjection();\n  };\n  _proto.getFullExtent = function getFullExtent() {\n    if (!this._spatialReference) {\n      return null;\n    }\n    return this._spatialReference.getFullExtent();\n  };\n  _proto.setCursor = function setCursor(cursor) {\n    delete this._cursor;\n    this._trySetCursor(cursor);\n    this._cursor = cursor;\n    return this;\n  };\n  _proto.resetCursor = function resetCursor() {\n    return this.setCursor(null);\n  };\n  _proto.getCenter = function getCenter() {\n    if (!this._loaded || !this._prjCenter) {\n      return this._center;\n    }\n    var projection = this.getProjection();\n    var center = projection.unproject(this._prjCenter);\n    center.x = Math.round(center.x * 1E8) / 1E8;\n    center.y = Math.round(center.y * 1E8) / 1E8;\n    if (this.centerAltitude) {\n      center.z = this.centerAltitude;\n    }\n    return center;\n  };\n  _proto.setCenter = function setCenter(center, padding) {\n    if (!center) {\n      return this;\n    }\n    center = new Coordinate(center);\n    if (padding) {\n      center = this._getCenterByPadding(center, this.getZoom(), padding);\n    }\n    var projection = this.getProjection();\n    var pcenter = projection.project(center);\n    if (!this._verifyExtent(pcenter)) {\n      return this;\n    }\n    if (!this._loaded) {\n      this._center = center;\n      return this;\n    }\n    this.onMoveStart();\n    this._setPrjCenter(pcenter);\n    this.onMoveEnd(this._parseEventFromCoord(this.getCenter()));\n    return this;\n  };\n  _proto.getSize = function getSize() {\n    if (isNil(this.width) || isNil(this.height)) {\n      return this._getContainerDomSize();\n    }\n    return new Size(this.width, this.height);\n  };\n  _proto.getContainerExtent = function getContainerExtent() {\n    var visualHeight = this.height;\n    var pitch = this.getPitch(),\n      maxVisualPitch = this.options['maxVisualPitch'];\n    if (maxVisualPitch && pitch > maxVisualPitch) {\n      visualHeight = this._getVisualHeight(maxVisualPitch);\n    }\n    return new PointExtent(0, this.height - visualHeight, this.width, this.height);\n  };\n  _proto._getVisualHeight = function _getVisualHeight(visualPitch) {\n    visualPitch = visualPitch || 1E-2;\n    var pitch = (90 - this.getPitch()) * Math.PI / 180;\n    var fov = this.getFov() * Math.PI / 180;\n    visualPitch *= Math.PI / 180;\n    var cameraToCenter = this.cameraCenterDistance / this.getGLScale();\n    var tanB = Math.tan(fov / 2);\n    var tanP = Math.tan(visualPitch);\n    var visualDistance = cameraToCenter * tanB / (1 / tanP - tanB) / Math.sin(visualPitch);\n    var x = cameraToCenter * (Math.sin(pitch) * visualDistance / (cameraToCenter + Math.cos(pitch) * visualDistance));\n    return this.height / 2 + x;\n  };\n  _proto.getExtent = function getExtent() {\n    return this._pointToExtent(this._get2DExtent());\n  };\n  _proto.getProjExtent = function getProjExtent() {\n    var extent2D = this._get2DExtent();\n    return new Extent(this._pointToPrj(extent2D.getMin()), this._pointToPrj(extent2D.getMax()));\n  };\n  _proto.getPrjExtent = function getPrjExtent() {\n    return this.getProjExtent();\n  };\n  _proto.getMaxExtent = function getMaxExtent() {\n    if (!this.options['maxExtent']) {\n      return null;\n    }\n    return new Extent(this.options['maxExtent'], this.getProjection());\n  };\n  _proto.setMaxExtent = function setMaxExtent(extent) {\n    if (extent) {\n      var maxExt = new Extent(extent, this.getProjection());\n      this.options['maxExtent'] = maxExt;\n      var projection = this.getProjection();\n      this._prjMaxExtent = maxExt.convertTo(function (c) {\n        return projection.project(c);\n      });\n      if (!this._verifyExtent(this._getPrjCenter())) {\n        if (this._loaded) {\n          this._panTo(this._prjMaxExtent.getCenter());\n        } else {\n          this._center = projection.unproject(this._prjMaxExtent.getCenter());\n        }\n      }\n    } else {\n      delete this.options['maxExtent'];\n      delete this._prjMaxExtent;\n    }\n    return this;\n  };\n  _proto.getZoom = function getZoom() {\n    return this._zoomLevel;\n  };\n  _proto.getZoomForScale = function getZoomForScale(scale, fromZoom, isFraction) {\n    var zoom = this.getZoom();\n    if (isNil(fromZoom)) {\n      fromZoom = zoom;\n    }\n    if (scale === 1 && fromZoom === zoom) {\n      return zoom;\n    }\n    var res = this._getResolution(fromZoom),\n      targetRes = res / scale;\n    var scaleZoom = this.getZoomFromRes(targetRes);\n    if (isFraction) {\n      return scaleZoom;\n    } else {\n      var delta = 1E-6;\n      return this.getSpatialReference().getZoomDirection() < 0 ? Math.ceil(scaleZoom - delta) : Math.floor(scaleZoom + delta);\n    }\n  };\n  _proto.getZoomFromRes = function getZoomFromRes(res) {\n    var resolutions = this._getResolutions(),\n      minRes = this._getResolution(this.getMinZoom()),\n      maxRes = this._getResolution(this.getMaxZoom());\n    if (minRes <= maxRes) {\n      if (res <= minRes) {\n        return this.getMinZoom();\n      } else if (res >= maxRes) {\n        return this.getMaxZoom();\n      }\n    } else if (res >= minRes) {\n      return this.getMinZoom();\n    } else if (res <= maxRes) {\n      return this.getMaxZoom();\n    }\n    var l = resolutions.length;\n    for (var i = 0; i < l - 1; i++) {\n      if (!resolutions[i]) {\n        continue;\n      }\n      var gap = resolutions[i + 1] - resolutions[i];\n      var test = res - resolutions[i];\n      if (sign(gap) === sign(test) && Math.abs(gap) >= Math.abs(test)) {\n        return i + test / gap;\n      }\n    }\n    return l - 1;\n  };\n  _proto.setZoom = function setZoom(zoom, options) {\n    if (options === void 0) {\n      options = {\n        'animation': true\n      };\n    }\n    if (isNaN(zoom) || isNil(zoom)) {\n      return this;\n    }\n    zoom = +zoom;\n    if (this._loaded && this.options['zoomAnimation'] && options['animation']) {\n      this._zoomAnimation(zoom);\n    } else {\n      this._zoom(zoom);\n    }\n    return this;\n  };\n  _proto.getMaxZoom = function getMaxZoom() {\n    if (!isNil(this.options['maxZoom'])) {\n      return this.options['maxZoom'];\n    }\n    return this.getMaxNativeZoom();\n  };\n  _proto.setMaxZoom = function setMaxZoom(maxZoom) {\n    var viewMaxZoom = this.getMaxNativeZoom();\n    if (maxZoom > viewMaxZoom) {\n      maxZoom = viewMaxZoom;\n    }\n    if (maxZoom !== null && maxZoom < this._zoomLevel) {\n      this.setZoom(maxZoom);\n      maxZoom = +maxZoom;\n    }\n    this.options['maxZoom'] = maxZoom;\n    return this;\n  };\n  _proto.getMinZoom = function getMinZoom() {\n    if (!isNil(this.options['minZoom'])) {\n      return this.options['minZoom'];\n    }\n    return this._spatialReference.getMinZoom();\n  };\n  _proto.setMinZoom = function setMinZoom(minZoom) {\n    if (minZoom !== null) {\n      minZoom = +minZoom;\n      var viewMinZoom = this._spatialReference.getMinZoom();\n      if (minZoom < viewMinZoom) {\n        minZoom = viewMinZoom;\n      }\n      if (minZoom > this._zoomLevel) {\n        this.setZoom(minZoom);\n      }\n    }\n    this.options['minZoom'] = minZoom;\n    return this;\n  };\n  _proto.getMaxNativeZoom = function getMaxNativeZoom() {\n    var ref = this.getSpatialReference();\n    if (!ref) {\n      return null;\n    }\n    return ref.getMaxZoom();\n  };\n  _proto.getGLRes = function getGLRes() {\n    if (this._glRes) {\n      return this._glRes;\n    }\n    var fullExtent = this.getSpatialReference().getFullExtent();\n    this._glRes = (fullExtent.right - fullExtent.left) / Math.pow(2, 19);\n    return this._glRes;\n  };\n  _proto.getGLScale = function getGLScale(zoom) {\n    if (isNil(zoom)) {\n      zoom = this.getZoom();\n    }\n    return this._getResolution(zoom) / this.getGLRes();\n  };\n  _proto.zoomIn = function zoomIn() {\n    return this.setZoom(this.getZoom() + 1);\n  };\n  _proto.zoomOut = function zoomOut() {\n    return this.setZoom(this.getZoom() - 1);\n  };\n  _proto.isZooming = function isZooming() {\n    return !!this._zooming;\n  };\n  _proto.isInteracting = function isInteracting() {\n    return this.isZooming() || this.isMoving() || this.isRotating();\n  };\n  _proto.setCenterAndZoom = function setCenterAndZoom(center, zoom) {\n    if (!isNil(zoom) && this._zoomLevel !== zoom) {\n      this.setCenter(center);\n      this.setZoom(zoom, {\n        animation: false\n      });\n    } else {\n      this.setCenter(center);\n    }\n    return this;\n  };\n  _proto._getPaddingSize = function _getPaddingSize(options) {\n    if (options === void 0) {\n      options = {};\n    }\n    if (options['paddingLeft'] || options['paddingTop'] || options['paddingRight'] || options['paddingBottom']) {\n      return {\n        width: (options['paddingLeft'] || 0) + (options['paddingRight'] || 0),\n        height: (options['paddingTop'] || 0) + (options['paddingBottom'] || 0)\n      };\n    }\n    return null;\n  };\n  _proto.getFitZoom = function getFitZoom(extent, isFraction, padding) {\n    var _this2 = this;\n    if (!extent || !(extent instanceof Extent)) {\n      return this._zoomLevel;\n    }\n    if (extent['xmin'] === extent['xmax'] && extent['ymin'] === extent['ymax']) {\n      return this.getMaxZoom();\n    }\n    var size = this.getSize();\n    var paddingSize = this._getPaddingSize(padding);\n    if (paddingSize) {\n      size = {\n        width: size.width - (paddingSize.width || 0),\n        height: size.height - (paddingSize.height || 0)\n      };\n    }\n    var containerExtent = extent.convertTo(function (p) {\n      return _this2.coordToPoint(p);\n    });\n    var w = containerExtent.getWidth(),\n      h = containerExtent.getHeight();\n    var scaleX = size['width'] / w,\n      scaleY = size['height'] / h;\n    var scale = this.getSpatialReference().getZoomDirection() < 0 ? Math.max(scaleX, scaleY) : Math.min(scaleX, scaleY);\n    var zoom = this.getZoomForScale(scale, null, isFraction);\n    return zoom;\n  };\n  _proto.getView = function getView() {\n    return {\n      'center': this.getCenter().toArray(),\n      'zoom': this.getZoom(),\n      'pitch': this.getPitch(),\n      'bearing': this.getBearing()\n    };\n  };\n  _proto.setView = function setView(view) {\n    if (!view) {\n      return this;\n    }\n    if (view['center']) {\n      this.setCenter(view['center']);\n    }\n    if (view['zoom'] !== null && !isNaN(+view['zoom'])) {\n      this.setZoom(+view['zoom'], {\n        'animation': false\n      });\n    }\n    if (view['pitch'] !== null && !isNaN(+view['pitch'])) {\n      this.setPitch(+view['pitch']);\n    }\n    if (view['pitch'] !== null && !isNaN(+view['bearing'])) {\n      this.setBearing(+view['bearing']);\n    }\n    return this;\n  };\n  _proto.getResolution = function getResolution(zoom) {\n    return this._getResolution(zoom);\n  };\n  _proto.getScale = function getScale(zoom) {\n    var z = isNil(zoom) ? this.getZoom() : zoom;\n    var max = this._getResolution(this.getMaxNativeZoom()),\n      res = this._getResolution(z);\n    return res / max;\n  };\n  _proto._getCenterByPadding = function _getCenterByPadding(center, zoom, padding) {\n    if (padding === void 0) {\n      padding = {};\n    }\n    var point = this.coordinateToPoint(center, zoom);\n    var _padding = padding,\n      _padding$paddingLeft = _padding.paddingLeft,\n      paddingLeft = _padding$paddingLeft === void 0 ? 0 : _padding$paddingLeft,\n      _padding$paddingRight = _padding.paddingRight,\n      paddingRight = _padding$paddingRight === void 0 ? 0 : _padding$paddingRight,\n      _padding$paddingTop = _padding.paddingTop,\n      paddingTop = _padding$paddingTop === void 0 ? 0 : _padding$paddingTop,\n      _padding$paddingBotto = _padding.paddingBottom,\n      paddingBottom = _padding$paddingBotto === void 0 ? 0 : _padding$paddingBotto;\n    var pX = 0;\n    var pY = 0;\n    if (paddingLeft || paddingRight) {\n      pX = (paddingRight - paddingLeft) / 2;\n    }\n    if (paddingTop || paddingBottom) {\n      pY = (paddingTop - paddingBottom) / 2;\n    }\n    var newPoint = new Point({\n      x: point.x + pX,\n      y: point.y + pY\n    });\n    return this.pointToCoordinate(newPoint, zoom);\n  };\n  _proto.fitExtent = function fitExtent(extent, zoomOffset, options, step) {\n    if (options === void 0) {\n      options = {};\n    }\n    if (!extent) {\n      return this;\n    }\n    extent = new Extent(extent, this.getProjection());\n    var zoom = this.getFitZoom(extent, options.isFraction || false, options) + (zoomOffset || 0);\n    var center = extent.getCenter();\n    if (this._getPaddingSize(options)) {\n      center = this._getCenterByPadding(center, zoom, options);\n    }\n    if (typeof options['animation'] === 'undefined' || options['animation']) return this._animateTo({\n      center: center,\n      zoom: zoom\n    }, {\n      'duration': options['duration'] || this.options['zoomAnimationDuration'],\n      'easing': options['easing'] || 'out'\n    }, step);else return this.setCenterAndZoom(center, zoom);\n  };\n  _proto.getBaseLayer = function getBaseLayer() {\n    return this._baseLayer;\n  };\n  _proto.setBaseLayer = function setBaseLayer(baseLayer) {\n    var isChange = false;\n    if (this._baseLayer) {\n      isChange = true;\n      this._fireEvent('baselayerchangestart');\n      this._baseLayer.remove();\n    }\n    if (!baseLayer) {\n      delete this._baseLayer;\n      this._fireEvent('baselayerchangeend');\n      this._fireEvent('setbaselayer');\n      return this;\n    }\n    this._baseLayer = baseLayer;\n    baseLayer._bindMap(this, -1);\n    function onbaseLayerload() {\n      this._fireEvent('baselayerload');\n      if (isChange) {\n        isChange = false;\n        this._fireEvent('baselayerchangeend');\n      }\n    }\n    this._baseLayer.on('layerload', onbaseLayerload, this);\n    if (this._loaded) {\n      this._baseLayer.load();\n    }\n    this._fireEvent('setbaselayer');\n    return this;\n  };\n  _proto.removeBaseLayer = function removeBaseLayer() {\n    if (this._baseLayer) {\n      this._baseLayer.remove();\n      delete this._baseLayer;\n      this._fireEvent('baselayerremove');\n    }\n    return this;\n  };\n  _proto.getLayers = function getLayers(filter) {\n    return this._getLayers(function (layer) {\n      if (layer === this._baseLayer || layer.getId().indexOf(INTERNAL_LAYER_PREFIX) >= 0) {\n        return false;\n      }\n      if (filter) {\n        return filter(layer);\n      }\n      return true;\n    });\n  };\n  _proto.getLayer = function getLayer(id) {\n    if (!id) {\n      return null;\n    }\n    var layer = this._layerCache ? this._layerCache[id] : null;\n    if (layer) {\n      return layer;\n    }\n    var baseLayer = this.getBaseLayer();\n    if (baseLayer && baseLayer.getId() === id) {\n      return baseLayer;\n    }\n    return null;\n  };\n  _proto.addLayer = function addLayer(layers) {\n    if (!layers) {\n      return this;\n    }\n    if (!Array.isArray(layers)) {\n      layers = Array.prototype.slice.call(arguments, 0);\n      return this.addLayer(layers);\n    }\n    if (!this._layerCache) {\n      this._layerCache = {};\n    }\n    var mapLayers = this._layers;\n    for (var i = 0, len = layers.length; i < len; i++) {\n      var layer = layers[i];\n      var id = layer.getId();\n      if (isNil(id)) {\n        throw new Error('Invalid id for the layer: ' + id);\n      }\n      if (layer.getMap() === this) {\n        continue;\n      }\n      if (this._layerCache[id]) {\n        throw new Error('Duplicate layer id in the map: ' + id);\n      }\n      this._layerCache[id] = layer;\n      layer._bindMap(this);\n      mapLayers.push(layer);\n      if (this._loaded) {\n        layer.load();\n      }\n    }\n    this._sortLayersByZIndex();\n    this._fireEvent('addlayer', {\n      'layers': layers\n    });\n    return this;\n  };\n  _proto.removeLayer = function removeLayer(layers) {\n    if (!layers) {\n      return this;\n    }\n    if (!Array.isArray(layers)) {\n      return this.removeLayer([layers]);\n    }\n    var removed = [];\n    for (var i = 0, len = layers.length; i < len; i++) {\n      var layer = layers[i];\n      if (!(layer instanceof Layer)) {\n        layer = this.getLayer(layer);\n      }\n      if (!layer) {\n        continue;\n      }\n      var map = layer.getMap();\n      if (!map || map !== this) {\n        continue;\n      }\n      removed.push(layer);\n      this._removeLayer(layer, this._layers);\n      if (this._loaded) {\n        layer._doRemove();\n      }\n      var id = layer.getId();\n      if (this._layerCache) {\n        delete this._layerCache[id];\n      }\n    }\n    if (removed.length > 0) {\n      var renderer = this.getRenderer();\n      if (renderer) {\n        renderer.setLayerCanvasUpdated();\n      }\n      removed.forEach(function (layer) {\n        layer.fire('remove');\n      });\n    }\n    this._fireEvent('removelayer', {\n      'layers': layers\n    });\n    return this;\n  };\n  _proto.sortLayers = function sortLayers(layers) {\n    if (!layers || !Array.isArray(layers)) {\n      return this;\n    }\n    var layersToOrder = [];\n    var minZ = Number.MAX_VALUE;\n    for (var i = 0, l = layers.length; i < l; i++) {\n      var layer = layers[i];\n      if (isString(layers[i])) {\n        layer = this.getLayer(layer);\n      }\n      if (!(layer instanceof Layer) || !layer.getMap() || layer.getMap() !== this) {\n        throw new Error('It must be a layer added to this map to order.');\n      }\n      if (layer.getZIndex() < minZ) {\n        minZ = layer.getZIndex();\n      }\n      layersToOrder.push(layer);\n    }\n    for (var _i = 0, _l = layersToOrder.length; _i < _l; _i++) {\n      layersToOrder[_i].setZIndex(minZ + _i);\n    }\n    return this;\n  };\n  _proto.toDataURL = function toDataURL(options) {\n    if (!options) {\n      options = {};\n    }\n    var mimeType = options['mimeType'];\n    if (!mimeType) {\n      mimeType = 'image/png';\n    }\n    var save = options['save'];\n    var renderer = this._getRenderer();\n    if (renderer && renderer.toDataURL) {\n      var file = options['fileName'];\n      if (!file) {\n        file = 'export';\n      }\n      var dataURL = renderer.toDataURL(mimeType, options.quality || 0.92);\n      if (save && dataURL) {\n        var imgURL;\n        if (typeof Blob !== 'undefined' && typeof atob !== 'undefined') {\n          var blob = b64toBlob(dataURL.replace(/^data:image\\/(png|jpeg|jpg|webp);base64,/, ''), mimeType);\n          imgURL = URL.createObjectURL(blob);\n        } else {\n          imgURL = dataURL;\n        }\n        var dlLink = document.createElement('a');\n        dlLink.download = file;\n        dlLink.href = imgURL;\n        document.body.appendChild(dlLink);\n        dlLink.click();\n        document.body.removeChild(dlLink);\n      }\n      return dataURL;\n    }\n    return null;\n  };\n  _proto.coordToPoint = function coordToPoint(coordinate, zoom, out) {\n    return this.coordinateToPoint(coordinate, zoom, out);\n  };\n  _proto.coordToPointAtRes = function coordToPointAtRes(coordinate, res, out) {\n    return this.coordinateToPointAtRes(coordinate, res, out);\n  };\n  _proto.pointToCoord = function pointToCoord(point, zoom, out) {\n    return this.pointToCoordinate(point, zoom, out);\n  };\n  _proto.pointAtResToCoord = function pointAtResToCoord(point, res, out) {\n    return this.pointAtResToCoordinate(point, res, out);\n  };\n  _proto.coordToViewPoint = function coordToViewPoint(coordinate, out, altitude) {\n    return this.coordinateToViewPoint(coordinate, out, altitude);\n  };\n  _proto.viewPointToCoord = function viewPointToCoord(viewPoint, out) {\n    return this.viewPointToCoordinate(viewPoint, out);\n  };\n  _proto.coordToContainerPoint = function coordToContainerPoint(coordinate, zoom, out) {\n    return this.coordinateToContainerPoint(coordinate, zoom, out);\n  };\n  _proto.containerPointToCoord = function containerPointToCoord(containerPoint, out) {\n    return this.containerPointToCoordinate(containerPoint, out);\n  };\n  _proto.containerPointToViewPoint = function containerPointToViewPoint(containerPoint, out) {\n    if (out) {\n      out.set(containerPoint.x, containerPoint.y);\n    } else {\n      out = containerPoint.copy();\n    }\n    return out._sub(this.getViewPoint());\n  };\n  _proto.viewPointToContainerPoint = function viewPointToContainerPoint(viewPoint, out) {\n    if (out) {\n      out.set(viewPoint.x, viewPoint.y);\n    } else {\n      out = viewPoint.copy();\n    }\n    return out._add(this.getViewPoint());\n  };\n  _proto.checkSize = function checkSize(force) {\n    var justStart = now() - this._initTime < 1500 && this.width === 0 || this.height === 0;\n    var watched = this._getContainerDomSize(),\n      oldHeight = this.height,\n      oldWidth = this.width;\n    if (!force && watched['width'] === oldWidth && watched['height'] === oldHeight) {\n      return this;\n    }\n    computeDomPosition(this._containerDOM);\n    var center = this.getCenter();\n    if (!this.options['fixCenterOnResize']) {\n      var vh = this._getVisualHeight(this.getPitch());\n      var nwCP = new Point(0, this.height - vh);\n      var nwCoord = this._containerPointToPrj(nwCP);\n      this._updateMapSize(watched);\n      var vhAfter = this._getVisualHeight(this.getPitch());\n      var nwCPAfter = new Point(0, this.height - vhAfter);\n      this._setPrjCoordAtContainerPoint(nwCoord, nwCPAfter);\n      this._mapViewCoord = this._getPrjCenter();\n    } else {\n      this._updateMapSize(watched);\n    }\n    var hided = watched['width'] === 0 || watched['height'] === 0 || oldWidth === 0 || oldHeight === 0;\n    if (justStart || hided) {\n      this._eventSilence = true;\n      this.setCenter(center);\n      delete this._eventSilence;\n    }\n    this._fireEvent('resize');\n    return this;\n  };\n  _proto.locate = function locate(coordinate, dx, dy) {\n    return this.getProjection()._locate(new Coordinate(coordinate), dx, dy);\n  };\n  _proto.getMainPanel = function getMainPanel() {\n    return this._getRenderer().getMainPanel();\n  };\n  _proto.getPanels = function getPanels() {\n    return this._panels;\n  };\n  _proto.remove = function remove() {\n    var _this3 = this;\n    if (this.isRemoved()) {\n      return this;\n    }\n    this._fireEvent('removestart');\n    this._removeDomEvents();\n    this._clearHandlers();\n    this.removeBaseLayer();\n    var layers = this.getLayers();\n    for (var i = 0; i < layers.length; i++) {\n      layers[i].remove();\n    }\n    if (this._getRenderer()) {\n      this._getRenderer().remove();\n    }\n    if (this._containerDOM.childNodes && this._containerDOM.childNodes.length > 0) {\n      Array.prototype.slice.call(this._containerDOM.childNodes, 0).filter(function (node) {\n        return node.className === 'maptalks-wrapper';\n      }).forEach(function (node) {\n        return _this3._containerDOM.removeChild(node);\n      });\n    }\n    delete this._panels;\n    delete this._containerDOM;\n    delete this.renderer;\n    this._fireEvent('removeend');\n    this._clearAllListeners();\n    if (Browser$1.removeDPRListening) {\n      Browser$1.removeDPRListening(this);\n    }\n    return this;\n  };\n  _proto.isRemoved = function isRemoved() {\n    return !this._containerDOM;\n  };\n  _proto.isMoving = function isMoving() {\n    return !!this._moving;\n  };\n  _proto.onMoveStart = function onMoveStart(param) {\n    if (this._mapAnimPlayer) {\n      this._stopAnim(this._mapAnimPlayer);\n    }\n    var prjCenter = this._getPrjCenter();\n    if (!this._originCenter || this._verifyExtent(prjCenter)) {\n      this._originCenter = prjCenter;\n    }\n    this._moving = true;\n    this._trySetCursor('move');\n    this._fireEvent('movestart', this._parseEvent(param ? param['domEvent'] : null, 'movestart'));\n  };\n  _proto.onMoving = function onMoving(param) {\n    this._fireEvent('moving', this._parseEvent(param ? param['domEvent'] : null, 'moving'));\n  };\n  _proto.onMoveEnd = function onMoveEnd(param) {\n    this._moving = false;\n    if (!this._suppressRecenter) {\n      this._recenterOnTerrain();\n    }\n    this._trySetCursor('default');\n    this._fireEvent('moveend', param && param['domEvent'] ? this._parseEvent(param['domEvent'], 'moveend') : param);\n    if (!this._verifyExtent(this._getPrjCenter()) && this._originCenter) {\n      var moveTo = this._originCenter;\n      this._panTo(moveTo);\n    }\n  };\n  _proto.onDragRotateStart = function onDragRotateStart(param) {\n    this._dragRotating = true;\n    this._fireEvent('dragrotatestart', this._parseEvent(param ? param['domEvent'] : null, 'dragrotatestart'));\n  };\n  _proto.onDragRotating = function onDragRotating(param) {\n    this._fireEvent('dragrotating', this._parseEvent(param ? param['domEvent'] : null, 'dragrotating'));\n  };\n  _proto.onDragRotateEnd = function onDragRotateEnd(param) {\n    this._dragRotating = false;\n    this._fireEvent('dragrotateend', this._parseEvent(param ? param['domEvent'] : null, 'dragrotateend'));\n  };\n  _proto.isDragRotating = function isDragRotating() {\n    return !!this._dragRotating;\n  };\n  _proto.isOffscreen = function isOffscreen(box, viewportPadding) {\n    if (viewportPadding === void 0) {\n      viewportPadding = 0;\n    }\n    var width = this.width,\n      height = this.height;\n    var screenRightBoundary = width + viewportPadding;\n    var screenBottomBoundary = height + viewportPadding;\n    var xmin = box.xmin,\n      ymin = box.ymin,\n      xmax = box.xmax,\n      ymax = box.ymax;\n    if (Array.isArray(box)) {\n      xmin = box[0];\n      ymin = box[1];\n      xmax = box[2];\n      ymax = box[3];\n    }\n    return xmax < viewportPadding || xmin >= screenRightBoundary || ymax < viewportPadding || ymin > screenBottomBoundary;\n  };\n  _proto.getRenderer = function getRenderer() {\n    return this._getRenderer();\n  };\n  _proto.getDevicePixelRatio = function getDevicePixelRatio() {\n    return this.options['devicePixelRatio'] || Browser$1.devicePixelRatio || 1;\n  };\n  _proto.setDevicePixelRatio = function setDevicePixelRatio(dpr) {\n    if (isNumber(dpr) && dpr > 0 && dpr !== this.options['devicePixelRatio']) {\n      this.options['devicePixelRatio'] = dpr;\n      this.checkSize(true);\n    }\n    return this;\n  };\n  _proto._initContainer = function _initContainer(container) {\n    if (isString(container)) {\n      this._containerDOM = document.getElementById(container);\n      if (!this._containerDOM) {\n        throw new Error('Invalid container when creating map: \\'' + container + '\\'');\n      }\n    } else {\n      this._containerDOM = container;\n      if (IS_NODE) {\n        this.CanvasClass = this._containerDOM.constructor;\n      }\n    }\n    if (this._containerDOM.childNodes && this._containerDOM.childNodes.length > 0) {\n      if (this._containerDOM.childNodes[0].className === 'maptalks-wrapper') {\n        throw new Error('Container is already loaded with another map instance, use map.remove() to clear it.');\n      }\n    }\n  };\n  _proto._trySetCursor = function _trySetCursor(cursor) {\n    if (!this._cursor && !this._priorityCursor) {\n      if (!cursor) {\n        cursor = 'default';\n      }\n      this._setCursorToPanel(cursor);\n    }\n    return this;\n  };\n  _proto._setPriorityCursor = function _setPriorityCursor(cursor) {\n    if (!cursor) {\n      var hasCursor = false;\n      if (this._priorityCursor) {\n        hasCursor = true;\n      }\n      delete this._priorityCursor;\n      if (hasCursor) {\n        this.setCursor(this._cursor);\n      }\n    } else {\n      this._priorityCursor = cursor;\n      this._setCursorToPanel(cursor);\n    }\n    return this;\n  };\n  _proto._setCursorToPanel = function _setCursorToPanel(cursor) {\n    var panel = this.getMainPanel();\n    if (panel && panel.style && panel.style.cursor !== cursor) {\n      panel.style.cursor = cursor;\n    }\n  };\n  _proto._removeLayer = function _removeLayer(layer, layerList) {\n    if (!layer || !layerList) {\n      return;\n    }\n    var index = layerList.indexOf(layer);\n    if (index > -1) {\n      layerList.splice(index, 1);\n    }\n  };\n  _proto._sortLayersByZIndex = function _sortLayersByZIndex() {\n    if (!this._layers) {\n      return;\n    }\n    for (var i = 0, l = this._layers.length; i < l; i++) {\n      this._layers[i]._order = i;\n      if (this._layers[i].sortLayersByZIndex) {\n        this._layers[i].sortLayersByZIndex();\n      }\n    }\n    this._layers.sort(function (a, b) {\n      var c = a.getZIndex() - b.getZIndex();\n      if (c === 0) {\n        return a._order - b._order;\n      }\n      return c;\n    });\n  };\n  _proto._fireEvent = function _fireEvent(eventName, param) {\n    if (this._eventSilence) {\n      return;\n    }\n    var underline = '_';\n    if (eventName[0] !== underline) {\n      this.fire(underline + eventName, param);\n    }\n    this.fire(eventName, param);\n  };\n  _proto._Load = function _Load() {\n    this._resetMapStatus();\n    if (this.options['pitch']) {\n      this.setPitch(this.options['pitch']);\n      delete this.options['pitch'];\n    }\n    if (this.options['bearing']) {\n      this.setBearing(this.options['bearing']);\n      delete this.options['bearing'];\n    }\n    delete this._glRes;\n    this._loadAllLayers();\n    this._getRenderer().onLoad();\n    this._loaded = true;\n    this._callOnLoadHooks();\n    this._initTime = now();\n  };\n  _proto._initRenderer = function _initRenderer() {\n    var renderer = this.options['renderer'];\n    var clazz = Map.getRendererClass(renderer);\n    this._renderer = new clazz(this);\n    this._renderer.load();\n  };\n  _proto._getRenderer = function _getRenderer() {\n    return this._renderer;\n  };\n  _proto._loadAllLayers = function _loadAllLayers() {\n    function loadLayer(layer) {\n      if (layer) {\n        layer.load();\n      }\n    }\n    if (this._baseLayer) {\n      this._baseLayer.load();\n    }\n    this._eachLayer(loadLayer, this.getLayers());\n  };\n  _proto._getLayers = function _getLayers(filter) {\n    var layers = this._baseLayer ? [this._baseLayer].concat(this._layers) : this._layers;\n    var result = [];\n    for (var i = 0; i < layers.length; i++) {\n      if (!filter || filter.call(this, layers[i])) {\n        result.push(layers[i]);\n      }\n    }\n    return result;\n  };\n  _proto._eachLayer = function _eachLayer(fn) {\n    if (arguments.length < 2) {\n      return;\n    }\n    var layerLists = Array.prototype.slice.call(arguments, 1);\n    if (layerLists && !Array.isArray(layerLists)) {\n      layerLists = [layerLists];\n    }\n    var layers = [];\n    for (var i = 0, len = layerLists.length; i < len; i++) {\n      layers = layers.concat(layerLists[i]);\n    }\n    for (var j = 0, jlen = layers.length; j < jlen; j++) {\n      fn.call(fn, layers[j]);\n    }\n  };\n  _proto._onLayerEvent = function _onLayerEvent(param) {\n    if (!param) {\n      return;\n    }\n    if (param['type'] === 'idchange') {\n      delete this._layerCache[param['old']];\n      this._layerCache[param['new']] = param['target'];\n    }\n  };\n  _proto._resetMapStatus = function _resetMapStatus() {\n    var maxZoom = this.getMaxZoom(),\n      minZoom = this.getMinZoom();\n    var viewMaxZoom = this._spatialReference.getMaxZoom(),\n      viewMinZoom = this._spatialReference.getMinZoom();\n    if (isNil(maxZoom) || maxZoom === -1 || maxZoom > viewMaxZoom) {\n      this.setMaxZoom(viewMaxZoom);\n    }\n    if (isNil(minZoom) || minZoom === -1 || minZoom < viewMinZoom) {\n      this.setMinZoom(viewMinZoom);\n    }\n    maxZoom = this.getMaxZoom();\n    minZoom = this.getMinZoom();\n    if (maxZoom < minZoom) {\n      this.setMaxZoom(minZoom);\n    }\n    if (isNil(this._zoomLevel) || this._zoomLevel > maxZoom) {\n      this._zoomLevel = maxZoom;\n    }\n    if (this._zoomLevel < minZoom) {\n      this._zoomLevel = minZoom;\n    }\n    delete this._prjCenter;\n    var projection = this.getProjection();\n    this._prjCenter = projection.project(this._center);\n    this._calcMatrices();\n    var renderer = this._getRenderer();\n    if (renderer) {\n      renderer.resetContainer();\n    }\n  };\n  _proto._getContainerDomSize = function _getContainerDomSize() {\n    if (!this._containerDOM) {\n      return null;\n    }\n    var containerDOM = this._containerDOM;\n    var width, height;\n    if (this._containerDomContentRect) {\n      width = this._containerDomContentRect.width;\n      height = this._containerDomContentRect.height;\n      return new Size(width, height);\n    }\n    if (!isNil(containerDOM.width) && !isNil(containerDOM.height)) {\n      width = containerDOM.width;\n      height = containerDOM.height;\n      var dpr = this.getDevicePixelRatio();\n      if (dpr !== 1 && containerDOM['layer']) {\n        width /= dpr;\n        height /= dpr;\n      }\n    } else if (!isNil(containerDOM.clientWidth) && !isNil(containerDOM.clientHeight)) {\n      width = parseInt(containerDOM.clientWidth, 0);\n      height = parseInt(containerDOM.clientHeight, 0);\n    } else {\n      throw new Error('can not get size of container');\n    }\n    return new Size(width, height);\n  };\n  _proto._updateMapSize = function _updateMapSize(mSize) {\n    this.width = mSize['width'];\n    this.height = mSize['height'];\n    this._getRenderer().updateMapSize(mSize);\n    this._calcMatrices();\n    return this;\n  };\n  _proto._getPrjCenter = function _getPrjCenter() {\n    return this._prjCenter;\n  };\n  _proto._setPrjCenter = function _setPrjCenter(pcenter) {\n    this._prjCenter = pcenter;\n    if (this.isInteracting() && !this.isMoving()) {\n      this._mapViewCoord = pcenter;\n    }\n    this._calcMatrices();\n  };\n  _proto._setPrjCoordAtContainerPoint = function _setPrjCoordAtContainerPoint(coordinate, point) {\n    if (!this.centerAltitude && point.x === this.width / 2 && point.y === this.height / 2) {\n      return this;\n    }\n    var t = this._containerPointToPoint(point)._sub(this._prjToPoint(this._getPrjCenter()));\n    var pcenter = this._pointToPrj(this._prjToPoint(coordinate).sub(t));\n    this._setPrjCenter(pcenter);\n    return this;\n  };\n  _proto._verifyExtent = function _verifyExtent(prjCenter) {\n    if (!prjCenter) {\n      return false;\n    }\n    var maxExt = this._prjMaxExtent;\n    if (!maxExt) {\n      return true;\n    }\n    return maxExt.contains(prjCenter);\n  };\n  _proto._offsetCenterByPixel = function _offsetCenterByPixel(pixel) {\n    var pos = TEMP_POINT.set(this.width / 2 - pixel.x, this.height / 2 - pixel.y);\n    var coord = this._containerPointToPrj(pos, TEMP_COORD);\n    var containerCenter = TEMP_POINT.set(this.width / 2, this.height / 2);\n    this._setPrjCoordAtContainerPoint(coord, containerCenter);\n  };\n  _proto.offsetPlatform = function offsetPlatform(offset) {\n    if (!offset) {\n      return this._mapViewPoint;\n    } else {\n      this._getRenderer().offsetPlatform(offset);\n      this._mapViewCoord = this._getPrjCenter();\n      this._mapViewPoint = this._mapViewPoint.add(offset);\n      return this;\n    }\n  };\n  _proto.getViewPoint = function getViewPoint() {\n    var offset = this._getViewPointFrameOffset();\n    var panelOffset = this.offsetPlatform();\n    if (offset) {\n      panelOffset = panelOffset.add(offset);\n    }\n    return panelOffset;\n  };\n  _proto._resetMapViewPoint = function _resetMapViewPoint() {\n    this._mapViewPoint = new Point(0, 0);\n    this._mapViewCoord = this._getPrjCenter();\n  };\n  _proto._getResolution = function _getResolution(zoom) {\n    if ((zoom === undefined || zoom === this._zoomLevel) && this._mapRes !== undefined) {\n      return this._mapRes;\n    }\n    if (isNil(zoom)) {\n      zoom = this._zoomLevel;\n    }\n    return this._spatialReference.getResolution(zoom);\n  };\n  _proto._getResolutions = function _getResolutions() {\n    return this._spatialReference.getResolutions();\n  };\n  _proto._prjToPoint = function _prjToPoint(pCoord, zoom, out) {\n    zoom = isNil(zoom) ? this.getZoom() : zoom;\n    var res = this._getResolution(zoom);\n    return this._prjToPointAtRes(pCoord, res, out);\n  };\n  _proto._prjToPointAtRes = function _prjToPointAtRes(pCoord, res, out) {\n    return this._spatialReference.getTransformation().transform(pCoord, res, out);\n  };\n  _proto._prjsToPointsAtRes = function _prjsToPointsAtRes(pCoords, res, resultPoints) {\n    if (resultPoints === void 0) {\n      resultPoints = [];\n    }\n    var transformation = this._spatialReference.getTransformation();\n    var pts = [];\n    for (var i = 0, len = pCoords.length; i < len; i++) {\n      var pt = transformation.transform(pCoords[i], res, resultPoints[i]);\n      pts.push(pt);\n    }\n    return pts;\n  };\n  _proto._pointToPrj = function _pointToPrj(point, zoom, out) {\n    zoom = isNil(zoom) ? this.getZoom() : zoom;\n    var res = this._getResolution(zoom);\n    return this._pointToPrjAtRes(point, res, out);\n  };\n  _proto._pointToPrjAtRes = function _pointToPrjAtRes(point, res, out) {\n    return this._spatialReference.getTransformation().untransform(point, res, out);\n  };\n  _proto._pointToPoint = function _pointToPoint(point, zoom, out) {\n    if (!isNil(zoom)) {\n      return this._pointAtResToPoint(point, this._getResolution(zoom), out);\n    }\n    if (out) {\n      out.x = point.x;\n      out.y = point.y;\n    } else {\n      out = point.copy();\n    }\n    return out;\n  };\n  _proto._pointAtResToPoint = function _pointAtResToPoint(point, res, out) {\n    if (out) {\n      out.x = point.x;\n      out.y = point.y;\n    } else {\n      out = point.copy();\n    }\n    return out._multi(res / this._getResolution());\n  };\n  _proto._pointToPointAtRes = function _pointToPointAtRes(point, res, out) {\n    if (out) {\n      out.x = point.x;\n      out.y = point.y;\n    } else {\n      out = point.copy();\n    }\n    return out._multi(this._getResolution() / res);\n  };\n  _proto._containerPointToPrj = function _containerPointToPrj(containerPoint, out) {\n    return this._pointToPrj(this._containerPointToPoint(containerPoint, undefined, out), undefined, out);\n  };\n  _proto._callOnLoadHooks = function _callOnLoadHooks() {\n    var proto = Map.prototype;\n    if (!proto._onLoadHooks) {\n      return;\n    }\n    for (var i = 0, l = proto._onLoadHooks.length; i < l; i++) {\n      proto._onLoadHooks[i].call(this);\n    }\n  };\n  _proto._fixPrjOnWorldWide = function _fixPrjOnWorldWide(prjCoord) {\n    var projection = this.getProjection();\n    if (projection && projection.fullExtent && prjCoord) {\n      var _ref = projection.fullExtent || {},\n        left = _ref.left,\n        bottom = _ref.bottom,\n        top = _ref.top,\n        right = _ref.right;\n      if (isNumber(left)) {\n        prjCoord.x = Math.max(left, prjCoord.x);\n      }\n      if (isNumber(right)) {\n        prjCoord.x = Math.min(right, prjCoord.x);\n      }\n      if (isNumber(bottom)) {\n        prjCoord.y = Math.max(bottom, prjCoord.y);\n      }\n      if (isNumber(top)) {\n        prjCoord.y = Math.min(top, prjCoord.y);\n      }\n    }\n    return this;\n  };\n  return Map;\n}(Handlerable(Eventable(Renderable(Class))));\nMap$1.include({\n  coordinateToPoint: function coordinateToPoint(coordinate, zoom, out) {\n    var res = this._getResolution(zoom);\n    return this.coordinateToPointAtRes(coordinate, res, out);\n  },\n  coordinateToPointAtRes: function () {\n    var COORD = new Coordinate(0, 0);\n    return function (coordinate, res, out) {\n      var prjCoord = this.getProjection().project(coordinate, COORD);\n      return this._prjToPointAtRes(prjCoord, res, out);\n    };\n  }(),\n  pointToCoordinate: function () {\n    var COORD = new Coordinate(0, 0);\n    return function (point, zoom, out) {\n      var prjCoord = this._pointToPrj(point, zoom, COORD);\n      return this.getProjection().unproject(prjCoord, out);\n    };\n  }(),\n  pointAtResToCoordinate: function () {\n    var COORD = new Coordinate(0, 0);\n    return function (point, res, out) {\n      var prjCoord = this._pointToPrjAtRes(point, res, COORD);\n      return this.getProjection().unproject(prjCoord, out);\n    };\n  }(),\n  coordinateToViewPoint: function () {\n    var COORD = new Coordinate(0, 0);\n    return function (coordinate, out, altitude) {\n      return this._prjToViewPoint(this.getProjection().project(coordinate, COORD), out, altitude);\n    };\n  }(),\n  viewPointToCoordinate: function () {\n    var COORD = new Coordinate(0, 0);\n    return function (viewPoint, out) {\n      return this.getProjection().unproject(this._viewPointToPrj(viewPoint, COORD), out);\n    };\n  }(),\n  coordinateToContainerPoint: function coordinateToContainerPoint(coordinate, zoom, out) {\n    var res = this._getResolution(zoom);\n    return this.coordinateToContainerPointAtRes(coordinate, res, out);\n  },\n  coordinateToContainerPointAtRes: function () {\n    var COORD = new Coordinate(0, 0);\n    return function (coordinate, res, out) {\n      var pCoordinate = this.getProjection().project(coordinate, COORD);\n      return this._prjToContainerPointAtRes(pCoordinate, res, out);\n    };\n  }(),\n  coordinatesToContainerPoints: function coordinatesToContainerPoints(coordinates, zoom) {\n    var res = this._getResolution(zoom);\n    return this.coordinatesToContainerPointsAtRes(coordinates, res);\n  },\n  coordinatesToContainerPointsAtRes: function () {\n    return function (coordinates, resolution) {\n      var pts = [];\n      var transformation = this._spatialReference.getTransformation();\n      var res = resolution / this._getResolution();\n      var projection = this.getProjection();\n      var prjOut = new Coordinate(0, 0);\n      var isTransforming = this.isTransforming();\n      var centerPoint = this._prjToPoint(this._getPrjCenter(), undefined, TEMP_COORD);\n      for (var i = 0, len = coordinates.length; i < len; i++) {\n        var pCoordinate = projection.project(coordinates[i], prjOut);\n        var point = transformation.transform(pCoordinate, resolution);\n        point = point._multi(res);\n        this._toContainerPoint(point, isTransforming, coordinates[i].z, centerPoint);\n        pts.push(point);\n      }\n      return pts;\n    };\n  }(),\n  containerPointToCoordinate: function () {\n    var COORD = new Coordinate(0, 0);\n    return function (containerPoint, out) {\n      var pCoordinate = this._containerPointToPrj(containerPoint, COORD);\n      return this.getProjection().unproject(pCoordinate, out);\n    };\n  }(),\n  containerToExtent: function () {\n    var POINT0 = new Point(0, 0);\n    var POINT1 = new Point(0, 0);\n    return function (containerExtent) {\n      var extent2D = new PointExtent(this._containerPointToPoint(containerExtent.getMin(POINT0), undefined, POINT0), this._containerPointToPoint(containerExtent.getMax(POINT1), undefined, POINT1));\n      return this._pointToExtent(extent2D);\n    };\n  }(),\n  distanceToPixel: function () {\n    var POINT0 = new Point(0, 0);\n    var POINT1 = new Point(0, 0);\n    return function (xDist, yDist, zoom) {\n      var projection = this.getProjection();\n      if (!projection) {\n        return null;\n      }\n      var scale = this.getScale() / this.getScale(zoom);\n      var center = this.getCenter(),\n        target = projection.locate(center, xDist, yDist);\n      var p0 = this.coordToContainerPoint(center, undefined, POINT0),\n        p1 = this.coordToContainerPoint(target, undefined, POINT1);\n      p1._sub(p0)._multi(scale)._abs();\n      return new Size(p1.x, p1.y);\n    };\n  }(),\n  distanceToPoint: function distanceToPoint(xDist, yDist, zoom, paramCenter) {\n    var res = this._getResolution(zoom);\n    return this.distanceToPointAtRes(xDist, yDist, res, paramCenter);\n  },\n  distanceToPointAtRes: function () {\n    var POINT = new Point(0, 0);\n    var COORD = new Coordinate(0, 0);\n    return function (xDist, yDist, res, paramCenter, out) {\n      var projection = this.getProjection();\n      if (!projection) {\n        return null;\n      }\n      var center = paramCenter || this.getCenter(),\n        target = projection.locate(center, xDist, yDist, COORD);\n      var p0 = this.coordToPointAtRes(center, res, POINT),\n        p1 = this.coordToPointAtRes(target, res, out);\n      p1._sub(p0)._abs();\n      return p1;\n    };\n  }(),\n  altitudeToPoint: function () {\n    var DEFAULT_CENTER = new Coordinate(0, 40);\n    var POINT = new Point(0, 0);\n    return function (altitude, res, originCenter) {\n      if (altitude === void 0) {\n        altitude = 0;\n      }\n      var p = this.distanceToPointAtRes(altitude, altitude, res, originCenter || DEFAULT_CENTER, POINT);\n      if (altitude < 0 && p.x > 0) {\n        p.x = -p.x;\n      }\n      var heightFactor = this.options['heightFactor'];\n      if (heightFactor && heightFactor !== 1) {\n        p.x *= heightFactor;\n        p.y *= heightFactor;\n      }\n      return p.x;\n    };\n  }(),\n  pointAtResToAltitude: function () {\n    var DEFAULT_CENTER = new Coordinate(0, 40);\n    return function (point, res, originCenter) {\n      if (point === void 0) {\n        point = 0;\n      }\n      var altitude = this.pointAtResToDistance(point, 0, res, originCenter || DEFAULT_CENTER);\n      return altitude;\n    };\n  }(),\n  pixelToDistance: function () {\n    var COORD0 = new Coordinate(0, 0);\n    var COORD1 = new Coordinate(0, 0);\n    var TARGET0 = new Coordinate(0, 0);\n    var TARGET1 = new Coordinate(0, 0);\n    return function (width, height) {\n      var projection = this.getProjection();\n      if (!projection) {\n        return null;\n      }\n      var fullExt = this.getFullExtent();\n      var d = fullExt['top'] > fullExt['bottom'] ? -1 : 1;\n      var coord0 = COORD0.set(this.width / 2, this.height / 2);\n      var coord1 = COORD1.set(this.width / 2 + width, this.height / 2 + d * height);\n      var target0 = this.containerPointToCoord(coord0, TARGET0);\n      var target1 = this.containerPointToCoord(coord1, TARGET1);\n      return projection.measureLength(target0, target1);\n    };\n  }(),\n  pointToDistance: function pointToDistance(dx, dy, zoom) {\n    var res = this.getResolution(zoom);\n    return this.pointAtResToDistance(dx, dy, res);\n  },\n  pointAtResToDistance: function () {\n    var POINT = new Point(0, 0);\n    var PRJ_COORD = new Coordinate(0, 0);\n    var COORD0 = new Coordinate(0, 0);\n    var COORD1 = new Coordinate(0, 0);\n    return function (dx, dy, res, paramCenter) {\n      var projection = this.getProjection();\n      if (!projection) {\n        return null;\n      }\n      var prjCoord = paramCenter ? projection.project(paramCenter, PRJ_COORD) : this._getPrjCenter();\n      var c = this._prjToPointAtRes(prjCoord, res, POINT);\n      c._add(dx, dy);\n      var target = this.pointAtResToCoord(c, res, COORD0);\n      var src = paramCenter ? paramCenter : projection.unproject(prjCoord, COORD1);\n      return projection.measureLength(src, target);\n    };\n  }(),\n  locateByPoint: function () {\n    var POINT = new Point(0, 0);\n    return function (coordinate, px, py) {\n      var point = this.coordToContainerPoint(coordinate, undefined, POINT);\n      return this.containerPointToCoord(point._add(px, py));\n    };\n  }(),\n  _get2DExtent: function _get2DExtent(zoom, out) {\n    var cached;\n    if ((zoom === undefined || zoom === this._zoomLevel) && this._mapExtent2D) {\n      cached = this._mapExtent2D;\n    }\n    if (cached) {\n      if (out) {\n        out.set(cached['xmin'], cached['ymin'], cached['xmax'], cached['ymax']);\n        return out;\n      }\n      return cached.copy();\n    }\n    var res = this._getResolution(zoom);\n    return this._get2DExtentAtRes(res, out);\n  },\n  _get2DExtentAtRes: function () {\n    var POINT = new Point(0, 0);\n    return function (res, out) {\n      var _this4 = this;\n      if (res === this._mapGlRes && this._mapGlExtent2D) {\n        return this._mapGlExtent2D;\n      }\n      var cExtent = this.getContainerExtent();\n      return cExtent.convertTo(function (c) {\n        return _this4._containerPointToPointAtRes(c, res, POINT);\n      }, out);\n    };\n  }(),\n  _pointToExtent: function () {\n    var COORD0 = new Coordinate(0, 0);\n    var COORD1 = new Coordinate(0, 0);\n    return function (extent2D) {\n      var min2d = extent2D.getMin(),\n        max2d = extent2D.getMax();\n      var fullExtent = this.getFullExtent();\n      var _ref2 = !fullExtent || fullExtent.left <= fullExtent.right ? [min2d.x, max2d.x] : [max2d.x, min2d.x],\n        minx = _ref2[0],\n        maxx = _ref2[1];\n      var _ref3 = !fullExtent || fullExtent.top > fullExtent.bottom ? [max2d.y, min2d.y] : [min2d.y, max2d.y],\n        miny = _ref3[0],\n        maxy = _ref3[1];\n      var min = min2d.set(minx, maxy);\n      var max = max2d.set(maxx, miny);\n      return new Extent(this.pointToCoord(min, undefined, COORD0), this.pointToCoord(max, undefined, COORD1), this.getProjection());\n    };\n  }(),\n  _getViewPointFrameOffset: function () {\n    var POINT = new Point(0, 0);\n    return function () {\n      if (this.isZooming()) {\n        return null;\n      }\n      var pcenter = this._getPrjCenter();\n      if (this._mapViewCoord && !this._mapViewCoord.equals(pcenter)) {\n        return this._prjToContainerPoint(this._mapViewCoord)._sub(this._prjToContainerPoint(pcenter, undefined, POINT));\n      }\n      return null;\n    };\n  }(),\n  _viewPointToPrj: function () {\n    var POINT = new Point(0, 0);\n    return function (viewPoint, out) {\n      return this._containerPointToPrj(this.viewPointToContainerPoint(viewPoint, POINT), out);\n    };\n  }(),\n  _prjToContainerPoint: function _prjToContainerPoint(pCoordinate, zoom, out, altitude) {\n    var res = this._getResolution(zoom);\n    return this._prjToContainerPointAtRes(pCoordinate, res, out, altitude);\n  },\n  _prjToContainerPointAtRes: function () {\n    var POINT = new Point(0, 0);\n    return function (pCoordinate, res, out, altitude) {\n      return this._pointAtResToContainerPoint(this._prjToPointAtRes(pCoordinate, res, POINT), res, altitude || 0, out);\n    };\n  }(),\n  _prjToViewPoint: function () {\n    var POINT = new Point(0, 0);\n    return function (pCoordinate, out, altitude) {\n      var containerPoint = this._prjToContainerPoint(pCoordinate, undefined, POINT, altitude);\n      return this.containerPointToViewPoint(containerPoint, out);\n    };\n  }(),\n  _viewPointToPoint: function () {\n    var POINT = new Point(0, 0);\n    return function (viewPoint, zoom, out) {\n      return this._containerPointToPoint(this.viewPointToContainerPoint(viewPoint, POINT), zoom, out);\n    };\n  }(),\n  _pointToViewPoint: function () {\n    var COORD = new Coordinate(0, 0);\n    return function (point, zoom, out) {\n      return this._prjToViewPoint(this._pointToPrj(point, zoom, COORD), out);\n    };\n  }()\n});\nMap$1.mergeOptions(options$2);\nvar MapDoubleClickZoomHandler = function (_Handler) {\n  _inheritsLoose(MapDoubleClickZoomHandler, _Handler);\n  function MapDoubleClickZoomHandler() {\n    return _Handler.apply(this, arguments) || this;\n  }\n  var _proto = MapDoubleClickZoomHandler.prototype;\n  _proto.addHooks = function addHooks() {\n    if (!this.target) {\n      return;\n    }\n    this.target.on('_dblclick', this._onDoubleClick, this);\n  };\n  _proto.removeHooks = function removeHooks() {\n    if (!this.target) {\n      return;\n    }\n    this.target.off('_dblclick', this._onDoubleClick, this);\n  };\n  _proto._onDoubleClick = function _onDoubleClick(param) {\n    var map = this.target;\n    if (map.options['doubleClickZoom']) {\n      var oldZoom = map.getZoom(),\n        zoom = param['domEvent']['shiftKey'] ? Math.ceil(oldZoom) - 1 : Math.floor(oldZoom) + 1;\n      map._zoomAnimation(zoom, param['containerPoint']);\n    }\n  };\n  return MapDoubleClickZoomHandler;\n}(Handler$1);\nMap$1.mergeOptions({\n  'doubleClickZoom': true\n});\nMap$1.addOnLoadHook('addHandler', 'doubleClickZoom', MapDoubleClickZoomHandler);\nvar MapDragHandler = function (_Handler) {\n  _inheritsLoose(MapDragHandler, _Handler);\n  function MapDragHandler() {\n    return _Handler.apply(this, arguments) || this;\n  }\n  var _proto = MapDragHandler.prototype;\n  _proto.addHooks = function addHooks() {\n    var map = this.target;\n    if (!map) {\n      return;\n    }\n    var dom = map._panels.mapWrapper || map._containerDOM;\n    this._dragHandler = new DragHandler(dom, {\n      'cancelOn': this._cancelOn.bind(this),\n      'rightclick': true\n    });\n    this._dragHandler.on('mousedown', this._onMouseDown, this).on('dragstart', this._onDragStart, this).on('dragging', this._onDragging, this).on('dragend', this._onDragEnd, this).enable();\n  };\n  _proto.removeHooks = function removeHooks() {\n    this._dragHandler.off('mousedown', this._onMouseDown, this).off('dragstart', this._onDragStart, this).off('dragging', this._onDragging, this).off('dragend', this._onDragEnd, this);\n    this._dragHandler.remove();\n    delete this._dragHandler;\n  };\n  _proto._cancelOn = function _cancelOn(domEvent) {\n    if (this.target.isZooming() || this._ignore(domEvent)) {\n      return true;\n    }\n    return false;\n  };\n  _proto._ignore = function _ignore(param) {\n    if (!param) {\n      return false;\n    }\n    if (param.domEvent) {\n      param = param.domEvent;\n    }\n    return this.target._ignoreEvent(param);\n  };\n  _proto._onMouseDown = function _onMouseDown(param) {\n    delete this.startDragTime;\n    delete this._mode;\n    var switchDragButton = this.target.options['switchDragButton'];\n    var rotateModeButton = switchDragButton ? 0 : 2;\n    var isTouch = param.domEvent.type === 'touchstart';\n    var isRotatonMode = switchDragButton && isTouch || param.domEvent.button === rotateModeButton || param.domEvent.ctrlKey;\n    if (isRotatonMode) {\n      if (this.target.options['dragRotate'] || this.target.options['dragPitch']) {\n        this._mode = 'rotatePitch';\n      }\n    } else if (this.target.options['dragPan']) {\n      this._mode = 'move';\n    }\n    this.target._stopAnim(this.target._mapAnimPlayer);\n    preventDefault(param['domEvent']);\n  };\n  _proto._onDragStart = function _onDragStart(param) {\n    this.startDragTime = now();\n    if (this._mode === 'move') {\n      this._moveStart(param);\n    } else if (this._mode === 'rotatePitch') {\n      this._rotateStart(param);\n    }\n  };\n  _proto._onDragging = function _onDragging(param) {\n    var map = this.target;\n    if (map._isEventOutMap(param['domEvent'])) {\n      return;\n    }\n    if (this._mode === 'move') {\n      this._moving(param);\n    } else if (this._mode === 'rotatePitch') {\n      this._rotating(param);\n    }\n  };\n  _proto._onDragEnd = function _onDragEnd(param) {\n    if (this._mode === 'move') {\n      this._moveEnd(param);\n    } else if (this._mode === 'rotatePitch') {\n      this._rotateEnd(param);\n    }\n    delete this.startDragTime;\n    delete this.startBearing;\n  };\n  _proto._start = function _start(param) {\n    this.preX = param['mousePos'].x;\n    this.preY = param['mousePos'].y;\n    this.startX = this.preX;\n    this.startY = this.preY;\n    this._startPrjCenter = this.target._getPrjCenter().copy();\n  };\n  _proto._moveStart = function _moveStart(param) {\n    this._start(param);\n    var map = this.target;\n    map.onMoveStart(param);\n    var p = getEventContainerPoint(map._getActualEvent(param.domEvent), map.getContainer());\n    this.startPrjCoord = map._containerPointToPrj(p);\n  };\n  _proto._moving = function _moving(param) {\n    if (!this.startDragTime) {\n      return;\n    }\n    var map = this.target;\n    var p = getEventContainerPoint(map._getActualEvent(param.domEvent), map.getContainer());\n    map._setPrjCoordAtContainerPoint(this.startPrjCoord, p);\n    map.onMoving(param);\n  };\n  _proto._moveEnd = function _moveEnd(param) {\n    if (!this.startDragTime) {\n      return;\n    }\n    var isTouch = param.domEvent.type === 'touchend';\n    var map = this.target;\n    var t = now() - this.startDragTime;\n    var mx = param['mousePos'].x,\n      my = param['mousePos'].y;\n    var dx = mx - this.startX;\n    var dy = my - this.startY;\n    var currentCenter = map._getPrjCenter();\n    var dxy = currentCenter.sub(this._startPrjCenter);\n    this._clear();\n    if (map.options['panAnimation'] && !param.interupted && map._verifyExtent(map._getPrjCenter()) && t < 280 && Math.abs(dy) + Math.abs(dx) > 5) {\n      t = 5 * t;\n      var dscale = isTouch ? 5 : 2.8;\n      var targetPrjCoord = currentCenter.add(dxy._multi(dscale));\n      map._panTo(targetPrjCoord, {\n        'duration': isTouch ? t * 3 : t * 2,\n        'easing': 'outExpo'\n      });\n    } else {\n      map.onMoveEnd(param);\n    }\n  };\n  _proto._rotateStart = function _rotateStart(param) {\n    this._start(param);\n    delete this._rotateMode;\n    this.startBearing = this.target.getBearing();\n    this.target.onDragRotateStart(param);\n    this._db = 0;\n  };\n  _proto._rotating = function _rotating(param) {\n    var map = this.target;\n    var mx = param['mousePos'].x,\n      my = param['mousePos'].y;\n    var prePitch = map.getPitch(),\n      preBearing = map.getBearing();\n    var dx = Math.abs(mx - this.preX),\n      dy = Math.abs(my - this.preY);\n    if (!this._rotateMode) {\n      if (map.options['dragRotatePitch']) {\n        this._rotateMode = 'rotate_pitch';\n      } else if (dx > dy) {\n        this._rotateMode = 'rotate';\n      } else if (dx < dy) {\n        this._rotateMode = 'pitch';\n      } else {\n        this._rotateMode = 'rotate';\n      }\n    }\n    if (this._rotateMode === 'pitch' && prePitch === 0 && dy < 10) {\n      return;\n    }\n    if (this._rotateMode.indexOf('rotate') >= 0 && map.options['dragRotate']) {\n      var factor = 0.15;\n      var db = 0;\n      if (map.options['dragPitch'] || dx > dy) {\n        db = -factor * (this.preX - mx);\n      } else if (mx > map.width / 2) {\n        db = factor * (this.preY - my);\n      } else {\n        db = -factor * (this.preY - my);\n      }\n      var bearing = map.getBearing() + db;\n      this._db = this._db || 0;\n      this._db += db;\n      map._setBearing(bearing);\n    }\n    if (this._rotateMode.indexOf('pitch') >= 0 && map.options['dragPitch']) {\n      map._setPitch(map.getPitch() + (this.preY - my) * 0.15);\n    }\n    this.preX = mx;\n    this.preY = my;\n    if (map.getBearing() !== preBearing || map.getPitch() !== prePitch) {\n      map.onDragRotating(param);\n    }\n  };\n  _proto._rotateEnd = function _rotateEnd(param) {\n    var map = this.target;\n    var bearing = map.getBearing();\n    this._clear();\n    var t = now() - this.startDragTime;\n    map.onDragRotateEnd(param);\n    if (map.options['rotateAnimation'] && Math.abs(bearing - this.startBearing) > 20 && (this._rotateMode === 'rotate' || this._rotateMode === 'rotate_pitch') && !param.interupted && t < 400) {\n      var _bearing = map.getBearing();\n      map._animateTo({\n        'bearing': _bearing + this._db / 1.5\n      }, {\n        'easing': 'outQuint',\n        'duration': 1600\n      });\n    }\n  };\n  _proto._clear = function _clear() {\n    delete this.startPrjCoord;\n    delete this.preX;\n    delete this.preY;\n    delete this.startX;\n    delete this.startY;\n  };\n  return MapDragHandler;\n}(Handler$1);\nMap$1.mergeOptions({\n  'draggable': true,\n  'dragPan': true,\n  'dragRotatePitch': true,\n  'dragRotate': true,\n  'dragPitch': true\n});\nMap$1.addOnLoadHook('addHandler', 'draggable', MapDragHandler);\nvar EVENTS = 'mousedown ' + 'mouseup ' + 'mousemove ' + 'click ' + 'dblclick ' + 'contextmenu ' + 'touchstart ' + 'touchmove ' + 'touchend ' + 'mouseout';\nvar MOUSEEVENT_ASSOCIATION_TABLE = {\n  'mousemove': ['mousemove', 'mouseover', 'mouseout', 'mouseenter'],\n  'touchend': ['touchend', 'click']\n};\nvar isGeo = function isGeo(geometry) {\n  return geometry && geometry.getLayer && geometry.on && geometry.fire;\n};\nvar getGeoId = function getGeoId(geometry) {\n  if (geometry._getInternalId) {\n    return geometry._getInternalId();\n  } else if (geometry.getId) {\n    return geometry.getId();\n  }\n  return null;\n};\nvar fireGeoEvent = function fireGeoEvent(geometry, domEvent, type) {\n  if (geometry._onEvent) {\n    return geometry._onEvent(domEvent, type);\n  }\n  var layer = geometry.getLayer();\n  if (layer && layer.fireGeoEvent) {\n    return layer.fireGeoEvent(geometry, domEvent, type);\n  }\n  return null;\n};\nvar MapGeometryEventsHandler = function (_Handler) {\n  _inheritsLoose(MapGeometryEventsHandler, _Handler);\n  function MapGeometryEventsHandler() {\n    return _Handler.apply(this, arguments) || this;\n  }\n  var _proto = MapGeometryEventsHandler.prototype;\n  _proto.addHooks = function addHooks() {\n    var map = this.target;\n    var dom = map._panels.allLayers || map._containerDOM;\n    on(dom, EVENTS, this._identifyGeometryEvents, this);\n  };\n  _proto.removeHooks = function removeHooks() {\n    var map = this.target;\n    var dom = map._panels.allLayers || map._containerDOM;\n    off(dom, EVENTS, this._identifyGeometryEvents, this);\n  };\n  _proto._identifyGeometryEvents = function _identifyGeometryEvents(domEvent, type) {\n    var map = this.target;\n    if (map.isInteracting() || map._ignoreEvent(domEvent)) {\n      return;\n    }\n    var oneMoreEvent = null;\n    var eventType = type || domEvent.type;\n    var isMousedown = eventType === 'mousedown' || eventType === 'touchstart' && domEvent.touches && domEvent.touches.length === 1;\n    if (isMousedown) {\n      this._mouseDownTime = now();\n    } else if ((eventType === 'click' || eventType === 'touchend') && this._mouseDownTime) {\n      var downTime = this._mouseDownTime;\n      delete this._mouseDownTime;\n      var time = now();\n      if (time - downTime > 300) {\n        if (eventType === 'click') {\n          return;\n        }\n      } else if (eventType === 'touchend') {\n        oneMoreEvent = 'click';\n      }\n    }\n    var actual = domEvent.touches && domEvent.touches.length > 0 ? domEvent.touches[0] : domEvent.changedTouches && domEvent.changedTouches.length > 0 ? domEvent.changedTouches[0] : domEvent;\n    if (!actual) {\n      return;\n    }\n    var containerPoint = getEventContainerPoint(actual, map._containerDOM);\n    if (eventType === 'touchstart') {\n      if (map.options['preventTouch']) {\n        preventDefault(domEvent);\n      }\n    }\n    var geometryCursorStyle = null;\n    var tops = this.target.getRenderer().getTopElements();\n    var topOnlyEvent = isMousedown && domEvent.button !== 2;\n    for (var i = 0; i < tops.length; i++) {\n      if (tops[i].hitTest(containerPoint)) {\n        var cursor = tops[i].options['cursor'];\n        if (cursor) {\n          geometryCursorStyle = cursor;\n        }\n        if (topOnlyEvent || tops[i].events && tops[i].events.indexOf(eventType) >= 0) {\n          var e = {\n            target: map,\n            type: eventType,\n            domEvent: domEvent,\n            containerPoint: containerPoint\n          };\n          if (topOnlyEvent) {\n            map._setPriorityCursor(geometryCursorStyle);\n            tops[i].mousedown(e);\n            return;\n          } else {\n            tops[i].onEvent(e);\n          }\n        }\n      }\n    }\n    var layers = map._getLayers(function (layer) {\n      if (layer.identify && layer.options['geometryEvents']) {\n        return true;\n      }\n      return false;\n    });\n    map._setPriorityCursor(geometryCursorStyle);\n    if (!layers.length) {\n      return;\n    }\n    var eventTypes = MOUSEEVENT_ASSOCIATION_TABLE[eventType] || [eventType];\n    var identifyOptions = {\n      'includeInternals': true,\n      'filter': function filter(geometry) {\n        if (geometry instanceof Geometry) {\n          var eventToFire = geometry._getEventTypeToFire(domEvent);\n          if (eventType === 'mousemove') {\n            if (!geometryCursorStyle && geometry.options['cursor']) {\n              geometryCursorStyle = geometry.options['cursor'];\n            }\n            if (!geometry.listens('mousemove') && !geometry.listens('mouseover') && !geometry.listens('mouseenter')) {\n              return false;\n            }\n          } else if (!geometry.listens(eventToFire) && !geometry.listens(oneMoreEvent)) {\n            return false;\n          }\n          return true;\n        } else if (isGeo(geometry)) {\n          return true;\n        }\n        return false;\n      },\n      'count': 1,\n      'onlyVisible': map.options['onlyVisibleGeometryEvents'],\n      containerPoint: containerPoint,\n      layers: layers,\n      eventTypes: eventTypes,\n      domEvent: domEvent\n    };\n    var callback = fireGeometryEvent.bind(this);\n    if (isMoveEvent(eventType)) {\n      this._queryIdentifyTimeout = map.getRenderer().callInNextFrame(function () {\n        if (map.isInteracting()) {\n          return;\n        }\n        map.identifyAtPoint(identifyOptions, callback);\n      });\n    } else {\n      map.identifyAtPoint(identifyOptions, callback);\n    }\n    function fireGeometryEvent(geometries) {\n      var _this = this;\n      var propagation = true;\n      var getOldGeos = function getOldGeos() {\n        var geos = _this._prevOverGeos && _this._prevOverGeos.geos;\n        return geos || [];\n      };\n      var oldGeosMouseout = function oldGeosMouseout(oldTargets, geoMap) {\n        if (oldTargets === void 0) {\n          oldTargets = [];\n        }\n        if (geoMap === void 0) {\n          geoMap = {};\n        }\n        if (oldTargets && oldTargets.length > 0) {\n          for (var _i = oldTargets.length - 1; _i >= 0; _i--) {\n            var oldTarget = oldTargets[_i];\n            if (!isGeo(oldTarget)) {\n              continue;\n            }\n            var oldTargetId = getGeoId(oldTargets[_i]);\n            if (!geoMap[oldTargetId]) {\n              propagation = fireGeoEvent(oldTarget, domEvent, 'mouseout');\n            }\n          }\n        }\n      };\n      if (eventType === 'mouseout') {\n        var oldTargets = getOldGeos();\n        this._prevOverGeos = {\n          'geos': [],\n          'geomap': {}\n        };\n        oldGeosMouseout(oldTargets, {});\n      } else if (eventType === 'mousemove') {\n        var geoMap = {};\n        if (geometries.length > 0) {\n          for (var _i2 = geometries.length - 1; _i2 >= 0; _i2--) {\n            var geo = geometries[_i2];\n            if (!isGeo(geo)) {\n              continue;\n            }\n            var iid = getGeoId(geo);\n            geoMap[iid] = geo;\n            fireGeoEvent(geo, domEvent);\n            if (!this._prevOverGeos || !this._prevOverGeos.geomap[iid]) {\n              fireGeoEvent(geo, domEvent, 'mouseenter');\n            }\n            propagation = fireGeoEvent(geo, domEvent, 'mouseover');\n          }\n        }\n        map._setPriorityCursor(geometryCursorStyle);\n        var _oldTargets = getOldGeos();\n        this._prevOverGeos = {\n          'geos': geometries,\n          'geomap': geoMap\n        };\n        oldGeosMouseout(_oldTargets, geoMap);\n      } else {\n        if (!geometries || !geometries.length) {\n          return;\n        }\n        for (var _i3 = geometries.length - 1; _i3 >= 0; _i3--) {\n          if (!isGeo(geometries[_i3])) {\n            continue;\n          }\n          propagation = fireGeoEvent(geometries[_i3], domEvent);\n          if (oneMoreEvent) {\n            fireGeoEvent(geometries[_i3], domEvent, oneMoreEvent);\n          }\n          break;\n        }\n      }\n      if (propagation === false) {\n        stopPropagation(domEvent);\n      }\n    }\n  };\n  return MapGeometryEventsHandler;\n}(Handler$1);\nMap$1.mergeOptions({\n  'geometryEvents': true,\n  'onlyVisibleGeometryEvents': true\n});\nMap$1.addOnLoadHook('addHandler', 'geometryEvents', MapGeometryEventsHandler);\nvar wheelZoomDelta = 4.000244140625;\nvar defaultZoomRate = 1 / 100;\nvar wheelZoomRate = 1 / 450;\nvar maxScalePerFrame = 2;\nvar MapScrollWheelZoomHandler = function (_Handler) {\n  _inheritsLoose(MapScrollWheelZoomHandler, _Handler);\n  function MapScrollWheelZoomHandler(target) {\n    var _this;\n    _this = _Handler.call(this, target) || this;\n    _this._thisScrollZoom = _this._scrollZoom.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this._wheelZoomRate = wheelZoomRate;\n    _this._defaultZoomRate = defaultZoomRate;\n    _this._delta = 0;\n    return _this;\n  }\n  var _proto = MapScrollWheelZoomHandler.prototype;\n  _proto.addHooks = function addHooks() {\n    addDomEvent(this.target._containerDOM, 'wheel', this._onWheelScroll, this);\n  };\n  _proto.removeHooks = function removeHooks() {\n    removeDomEvent(this.target._containerDOM, 'wheel', this._onWheelScroll);\n  };\n  _proto._onWheelScroll = function _onWheelScroll(evt) {\n    var map = this.target;\n    if (map.options['preventWheelScroll']) {\n      preventDefault(evt);\n      stopPropagation(evt);\n    }\n    if (map._ignoreEvent(evt) || !map.options['zoomable']) {\n      return false;\n    }\n    var container = map._containerDOM;\n    var origin = map._checkZoomOrigin(getEventContainerPoint(evt, container));\n    if (map.options['seamlessZoom']) {\n      if (!this._zooming) {\n        this._trackPadSuspect = 0;\n        this._ensureTrackpad = false;\n      }\n      return this._seamless(evt, origin);\n    } else {\n      return this._interval(evt, origin);\n    }\n  };\n  _proto._seamless = function _seamless(evt, origin) {\n    var value = evt.deltaMode === window.WheelEvent.DOM_DELTA_LINE ? evt.deltaY * 60 : evt.deltaY;\n    if (value % wheelZoomDelta !== 0) {\n      if (!this._ensureTrackpad) {\n        if (Math.abs(value) < 60) {\n          this._trackPadSuspect++;\n        } else {\n          this._trackPadSuspect = 0;\n        }\n        if (this._trackPadSuspect >= 2) {\n          this._ensureTrackpad = true;\n        }\n      }\n      if (this._ensureTrackpad) {\n        value *= 14;\n      }\n    }\n    if (evt.shiftKey && value) value = value / 4;\n    this._lastWheelEvent = evt;\n    this._delta -= value;\n    if (!this._zooming && this._delta) {\n      var map = this.target;\n      this._zoomOrigin = origin;\n      map.onZoomStart(null, origin);\n    }\n    this._start();\n  };\n  _proto._start = function _start() {\n    if (!this._delta) return;\n    this._zooming = true;\n    var map = this.target;\n    if (!this._active) {\n      map.getRenderer().callInNextFrame(this._thisScrollZoom);\n      this._active = true;\n    }\n  };\n  _proto._scrollZoom = function _scrollZoom() {\n    var _this2 = this;\n    this._active = false;\n    if (!this._delta) {\n      return;\n    }\n    var zoomRate = Math.abs(this._delta) > wheelZoomDelta ? this._wheelZoomRate : this._defaultZoomRate;\n    var scale = maxScalePerFrame / (1 + Math.exp(-Math.abs(this._delta * zoomRate)));\n    if (this._delta < 0 && scale !== 0) {\n      scale = 1 / scale;\n    }\n    var map = this.target;\n    var zoom = map.getZoom();\n    var targetZoom = map.getZoomForScale(scale, zoom, true);\n    this._delta = 0;\n    map.onZooming(targetZoom, this._zoomOrigin);\n    if (this._timeout) {\n      clearTimeout(this._timeout);\n    }\n    this._timeout = setTimeout(function () {\n      _this2._zooming = false;\n      delete _this2._timeout;\n      map.onZoomEnd(map.getZoom(), _this2._zoomOrigin);\n    }, 210);\n  };\n  _proto._interval = function _interval(evt, origin) {\n    var _this3 = this;\n    var map = this.target;\n    if (this._zooming) {\n      this._requesting++;\n      return false;\n    }\n    this._requesting = 0;\n    var levelValue = (evt.deltaY ? evt.deltaY * -1 : evt.wheelDelta ? evt.wheelDelta : evt.detail) > 0 ? 1 : -1;\n    if (evt.detail) {\n      levelValue *= -1;\n    }\n    var zoom = map.getZoom();\n    var nextZoom = zoom + levelValue;\n    nextZoom = map._checkZoom(levelValue > 0 ? Math.ceil(nextZoom) : Math.floor(nextZoom));\n    if (nextZoom === zoom) {\n      return false;\n    }\n    this._zooming = true;\n    if (!this._delta) {\n      map.onZoomStart(null, origin);\n      this._origin = origin;\n      this._delta = levelValue;\n      this._startZoom = map.getZoom();\n    }\n    var duration = 90;\n    map._animateTo({\n      'zoom': nextZoom - this._delta * 1 / 2,\n      'around': this._origin\n    }, {\n      'continueOnViewChanged': true,\n      'easing': 'linear',\n      'duration': duration,\n      'wheelZoom': true\n    }, function (frame) {\n      if (frame.state.playState !== 'finished') {\n        if (frame.state.playState !== 'running') {\n          delete _this3._zooming;\n          delete _this3._requesting;\n        }\n        return;\n      }\n      if (_this3._requesting < 1 || Math.abs(nextZoom - _this3._startZoom) > 2 || nextZoom === map.getMaxZoom() || nextZoom === map.getMinZoom()) {\n        map._animateTo({\n          'zoom': nextZoom,\n          'around': _this3._origin\n        }, {\n          'continueOnViewChanged': true,\n          'duration': 100\n        }, function (frame) {\n          if (frame.state.playState !== 'running') {\n            delete _this3._zooming;\n            delete _this3._requesting;\n          }\n        });\n        delete _this3._startZoom;\n        delete _this3._origin;\n        delete _this3._delta;\n        _this3._requesting = 0;\n      } else if (!isNil(_this3._requesting)) {\n        delete _this3._zooming;\n        _this3._onWheelScroll(evt);\n      }\n    });\n    return false;\n  };\n  return MapScrollWheelZoomHandler;\n}(Handler$1);\nMap$1.mergeOptions({\n  'scrollWheelZoom': true,\n  'seamlessZoom': true\n});\nMap$1.addOnLoadHook('addHandler', 'scrollWheelZoom', MapScrollWheelZoomHandler);\nvar MapTouchZoomHandler = function (_Handler) {\n  _inheritsLoose(MapTouchZoomHandler, _Handler);\n  function MapTouchZoomHandler() {\n    return _Handler.apply(this, arguments) || this;\n  }\n  var _proto = MapTouchZoomHandler.prototype;\n  _proto.addHooks = function addHooks() {\n    addDomEvent(this.target.getContainer(), 'touchstart', this._onTouchStart, this);\n  };\n  _proto.removeHooks = function removeHooks() {\n    removeDomEvent(this.target.getContainer(), 'touchstart', this._onTouchStart);\n  };\n  _proto._onTouchStart = function _onTouchStart(event) {\n    var map = this.target;\n    if (!event.touches || event.touches.length < 2) {\n      return;\n    }\n    var container = map.getContainer();\n    var p1 = getEventContainerPoint(event.touches[0], container),\n      p2 = getEventContainerPoint(event.touches[1], container);\n    this.preY = p1.y;\n    this._startP1 = p1;\n    this._startP2 = p2;\n    this._startDist = p1.distanceTo(p2);\n    this._startVector = p1.sub(p2);\n    this._startZoom = map.getZoom();\n    this._startBearing = map.getBearing();\n    off(document, 'touchmove', this._onTouchMove, this);\n    off(document, 'touchend', this._onTouchEnd, this);\n    addDomEvent(document, 'touchmove', this._onTouchMove, this);\n    addDomEvent(document, 'touchend', this._onTouchEnd, this);\n    if (map.options['preventTouch']) {\n      preventDefault(event);\n    }\n    map._fireEvent('touchactstart');\n  };\n  _proto._onTouchMove = function _onTouchMove(event) {\n    var map = this.target;\n    if (!event.touches || event.touches.length < 2) {\n      return;\n    }\n    var container = map.getContainer(),\n      p1 = getEventContainerPoint(event.touches[0], container),\n      p2 = getEventContainerPoint(event.touches[1], container),\n      d1 = p1.sub(this._startP1),\n      d2 = p2.sub(this._startP2),\n      vector = p1.sub(p2),\n      scale = p1.distanceTo(p2) / this._startDist,\n      bearing = vector.angleWith(this._startVector) * 180 / Math.PI,\n      preY = this.preY || p1.y,\n      pitch = (preY - p1.y) * 0.4;\n    this.preY = p1.y;\n    var param = {\n      'domEvent': event,\n      'mousePos': [p1, p2]\n    };\n    if (!this.mode) {\n      if (map.options['touchRotate'] && Math.abs(bearing) > 8) {\n        this.mode = map.options['touchZoomRotate'] ? 'rotate_zoom' : 'rotate';\n      } else if (map.options['touchPitch'] && d1.y * d2.y > 0 && Math.abs(d1.y) > 10 && Math.abs(d2.y) > 10) {\n        this.mode = 'pitch';\n      } else if (map.options['zoomable'] && map.options['touchZoom'] && Math.abs(1 - scale) > 0.15) {\n        this.mode = map.options['touchZoomRotate'] && map.options['touchRotate'] ? 'rotate_zoom' : 'zoom';\n      }\n      this._startTouching(param);\n    }\n    if (this.mode === 'zoom' || this.mode === 'rotate_zoom') {\n      this._scale = scale;\n      var res = map._getResolution(this._startZoom) / scale;\n      var zoom = map.getZoomFromRes(res);\n      map.onZooming(zoom, this._Origin);\n    }\n    if (this.mode === 'rotate' || this.mode === 'rotate_zoom') {\n      map._setBearing(this._startBearing + bearing);\n      map.onDragRotating(param);\n    } else if (this.mode === 'pitch') {\n      map._setPitch(map.getPitch() + pitch);\n      map.onDragRotating(param);\n    }\n    map._fireEvent('touchactinging');\n  };\n  _proto._startTouching = function _startTouching(param) {\n    var map = this.target;\n    if (this.mode === 'zoom' || this.mode === 'rotate_zoom') {\n      var size = map.getSize();\n      this._Origin = new Point(size['width'] / 2, size['height'] / 2);\n      map.onZoomStart(null, this._Origin);\n    }\n    if (this.mode === 'rotate' || this.mode === 'pitch' || this.mode === 'rotate_zoom') {\n      map.onDragRotateStart(param);\n    }\n  };\n  _proto._onTouchEnd = function _onTouchEnd(event) {\n    delete this.preY;\n    var map = this.target;\n    off(document, 'touchmove', this._onTouchMove, this);\n    off(document, 'touchend', this._onTouchEnd, this);\n    if (this.mode === 'zoom' || this.mode === 'rotate_zoom') {\n      var scale = this._scale;\n      var res = map._getResolution(this._startZoom) / scale;\n      var zoom = map.getZoomFromRes(res);\n      map.onZoomEnd(zoom, this._Origin);\n    }\n    if (this.mode === 'pitch' || this.mode === 'rotate' || this.mode === 'rotate_zoom') {\n      map.onDragRotateEnd({\n        'domEvent': event\n      });\n    }\n    delete this.mode;\n    map._fireEvent('touchactend');\n  };\n  return MapTouchZoomHandler;\n}(Handler$1);\nMap$1.mergeOptions({\n  'touchGesture': true,\n  'touchZoom': true,\n  'touchPitch': true,\n  'touchRotate': true,\n  'touchZoomRotate': false\n});\nMap$1.addOnLoadHook('addHandler', 'touchGesture', MapTouchZoomHandler);\nvar KEY = '__anim_player';\nvar Easing = {\n  outExpo: function outExpo(x) {\n    return x === 1 ? 1 : 1 - Math.pow(2, -10 * x);\n  },\n  outQuint: function outQuint(x) {\n    return 1 - Math.pow(1 - x, 5);\n  },\n  in: function _in(t) {\n    return Math.pow(t, 2);\n  },\n  out: function out(t) {\n    return 1 - Easing.in(1 - t);\n  },\n  inAndOut: function inAndOut(t) {\n    return 3 * t * t - 2 * t * t * t;\n  },\n  linear: function linear(t) {\n    return t;\n  },\n  upAndDown: function upAndDown(t) {\n    if (t < 0.5) {\n      return Easing.inAndOut(2 * t);\n    } else {\n      return 1 - Easing.inAndOut(2 * (t - 0.5));\n    }\n  }\n};\nvar Frame = function () {\n  function Frame(state, styles) {\n    this.state = state;\n    this.styles = styles;\n  }\n  _createClass(Frame, [{\n    key: \"playState\",\n    get: function get() {\n      return this.state.playState;\n    }\n  }, {\n    key: \"symbol\",\n    get: function get() {\n      return this.styles.symbol;\n    }\n  }]);\n  return Frame;\n}();\nvar Player = function Player(animation, options, onFrame, target) {\n  this._animation = animation;\n  this.options = options;\n  this._onFrame = onFrame;\n  this.playState = 'idle';\n  this.ready = true;\n  this.finished = false;\n  this.target = target;\n};\nvar Animation = {\n  speed: {\n    'slow': 2000,\n    'normal': 1000,\n    'fast': 500\n  },\n  _resolveStyles: function _resolveStyles(styles) {\n    if (!styles) {\n      return null;\n    }\n    function resolveChild(child) {\n      if (!Array.isArray(child)) {\n        return Animation._resolveStyles(child);\n      }\n      var start = [],\n        d = [],\n        dest = [];\n      for (var i = 0; i < child.length; i++) {\n        var _styles = Animation._resolveStyles(child[i]);\n        if (_styles) {\n          start.push(_styles[0]);\n          d.push(_styles[1]);\n          dest.push(_styles[2]);\n        }\n      }\n      if (!start.length) {\n        return null;\n      } else {\n        return [start, d, dest];\n      }\n    }\n    function resolveVal(val) {\n      var values = val;\n      var clazz;\n      if (!Array.isArray(val)) {\n        if (isNumber(val)) {\n          values = [0, val];\n        } else if (val instanceof Point || val instanceof Coordinate) {\n          clazz = val.constructor;\n          values = [new clazz(0, 0), val];\n        } else {\n          values = [val, val];\n        }\n      }\n      var v1 = values[0],\n        v2 = values[1];\n      if (isNumber(v1) && isNumber(v2)) {\n        if (v1 === v2) {\n          return null;\n        }\n        return [v1, v2 - v1, v2];\n      } else if (Array.isArray(v1) && isNumber(v1[0]) || v1 instanceof Coordinate || v1 instanceof Point) {\n        if (Array.isArray(v1)) {\n          v1 = new Coordinate(v1);\n          v2 = new Coordinate(v2);\n        } else {\n          clazz = v1.constructor;\n          v1 = new clazz(v1);\n          v2 = new clazz(v2);\n        }\n        if (v1.equals(v2)) {\n          return null;\n        }\n        return [v1, v2.sub(v1), v2];\n      } else {\n        return [v1, v2, v2];\n      }\n    }\n    function isChild(val) {\n      if (!Array.isArray(val) && val.constructor === Object) {\n        return true;\n      } else if (Array.isArray(val) && val[0].constructor === Object) {\n        return true;\n      }\n      return false;\n    }\n    var d = {},\n      start = {},\n      dest = {};\n    for (var p in styles) {\n      if (styles.hasOwnProperty(p)) {\n        var values = styles[p];\n        if (!values) {\n          continue;\n        } else if (Array.isArray(values)) {\n          if (isNil(values[0]) || isNil(values[1])) {\n            continue;\n          }\n        }\n        var childStyles = void 0;\n        if (isChild(values)) {\n          childStyles = resolveChild(values);\n        } else {\n          childStyles = resolveVal(values);\n        }\n        if (childStyles) {\n          start[p] = childStyles[0];\n          d[p] = childStyles[1];\n          dest[p] = childStyles[2];\n        }\n      }\n    }\n    return [start, d, dest];\n  },\n  framing: function framing(styles, options) {\n    if (!options) {\n      options = {};\n    }\n    var easing = options['easing'] ? Easing[options['easing']] : Easing.linear;\n    if (!easing) {\n      easing = Easing.linear;\n    }\n    var dStyles, startStyles, destStyles;\n    styles = Animation._resolveStyles(styles);\n    if (styles) {\n      startStyles = styles[0];\n      dStyles = styles[1];\n      destStyles = styles[2];\n    }\n    var deltaStyles = function deltaStyles(delta, _startStyles, _dStyles) {\n      if (!_startStyles || !_dStyles) {\n        return null;\n      }\n      var result = {};\n      for (var p in _dStyles) {\n        if (_dStyles.hasOwnProperty(p)) {\n          if (_startStyles[p] === destStyles[p]) {\n            result[p] = _startStyles[p];\n            continue;\n          }\n          var s = _startStyles[p],\n            d = _dStyles[p];\n          if (isNumber(d)) {\n            result[p] = s + delta * d;\n          } else if (Array.isArray(d)) {\n            var children = [];\n            for (var i = 0; i < d.length; i++) {\n              children.push(deltaStyles(delta, s[i], d[i]));\n            }\n            result[p] = children;\n          } else {\n            var clazz = d.constructor;\n            if (clazz === Object) {\n              result[p] = deltaStyles(delta, s, d);\n            } else if (s instanceof Point || s instanceof Coordinate) {\n              result[p] = s.add(d.multi(delta));\n            } else {\n              result[p] = d;\n            }\n          }\n        }\n      }\n      return result;\n    };\n    return function (elapsed, duration) {\n      var state, d;\n      if (elapsed < 0) {\n        state = {\n          'playState': 'idle',\n          'delta': 0\n        };\n        d = startStyles;\n      } else if (elapsed < duration) {\n        var delta = easing(elapsed / duration);\n        state = {\n          'playState': 'running',\n          'delta': delta\n        };\n        d = deltaStyles(delta, startStyles, dStyles);\n      } else {\n        state = {\n          'playState': 'finished',\n          'delta': 1\n        };\n        d = destStyles;\n      }\n      state['startStyles'] = startStyles;\n      state['destStyles'] = destStyles;\n      state['progress'] = elapsed;\n      state['remainingMs'] = duration - elapsed;\n      return new Frame(state, d);\n    };\n  },\n  _requestAnimFrame: function _requestAnimFrame(fn) {\n    if (!this._frameQueue) {\n      this._frameQueue = [];\n    }\n    this._frameQueue.push(fn);\n    this._a();\n  },\n  _a: function _a() {\n    if (!this._animationFrameId) {\n      this._animationFrameId = requestAnimFrame(Animation._frameFn);\n    }\n  },\n  _run: function _run() {\n    if (this._frameQueue.length) {\n      var running = this._frameQueue;\n      this._frameQueue = [];\n      for (var i = 0, len = running.length; i < len; i++) {\n        running[i]();\n      }\n      if (this._frameQueue.length) {\n        this._animationFrameId = requestAnimFrame(Animation._frameFn);\n      } else {\n        delete this._animationFrameId;\n      }\n    }\n  },\n  animate: function animate(styles, options, step, target) {\n    if (!options) {\n      options = {};\n    }\n    var animation = Animation.framing(styles, options);\n    var player = new Player(animation, options, step, target);\n    return player;\n  }\n};\nAnimation._frameFn = Animation._run.bind(Animation);\nextend(Player.prototype, {\n  _prepare: function _prepare() {\n    var options = this.options;\n    var duration = options['speed'] || options['duration'];\n    if (isString(duration)) {\n      duration = Animation.speed[duration];\n      if (!duration) {\n        duration = +duration;\n      }\n    }\n    if (!duration) {\n      duration = Animation.speed['normal'];\n    }\n    this.duration = duration;\n    this._framer = options['framer'] || Animation._requestAnimFrame.bind(Animation);\n  },\n  play: function play() {\n    if (this.playState !== 'idle' && this.playState !== 'paused' || this.target && this.target[KEY]) {\n      return this;\n    }\n    if (this.target) {\n      this.target[KEY] = 1;\n    }\n    if (this.playState === 'idle') {\n      this.currentTime = 0;\n      this._prepare();\n    }\n    var t = now();\n    if (!this.startTime) {\n      var options = this.options;\n      this.startTime = options['startTime'] ? options['startTime'] : t;\n    }\n    this._playStartTime = Math.max(t, this.startTime);\n    if (this.playState === 'paused') {\n      this._playStartTime -= this.currentTime;\n    }\n    this.playState = 'running';\n    this._run();\n    return this;\n  },\n  pause: function pause() {\n    if (this.playState === 'paused') {\n      return this;\n    }\n    this.playState = 'paused';\n    this._run();\n    return this;\n  },\n  cancel: function cancel() {\n    if (this.playState === 'idle') {\n      return this;\n    }\n    this.playState = 'idle';\n    this.finished = false;\n    this._run();\n    return this;\n  },\n  finish: function finish() {\n    if (this.playState === 'finished') {\n      return this;\n    }\n    this.playState = 'finished';\n    this.finished = true;\n    this._run();\n    return this;\n  },\n  reverse: function reverse() {},\n  _run: function _run() {\n    var _this = this;\n    var onFrame = this._onFrame;\n    var t = now();\n    var elapsed = t - this._playStartTime;\n    if (this.options['repeat'] && elapsed >= this.duration) {\n      this._playStartTime = t;\n      elapsed = 0;\n    }\n    if (this.playState !== 'running') {\n      if (this.target) {\n        delete this.target[KEY];\n      }\n      if (onFrame) {\n        if (this.playState === 'finished') {\n          elapsed = this.duration;\n        } else if (this.playState === 'idle') {\n          elapsed = 0;\n        }\n        var _frame = this._animation(elapsed, this.duration);\n        _frame.state.playState = this.playState;\n        onFrame(_frame);\n      }\n      return;\n    }\n    var frame = this._animation(elapsed, this.duration);\n    this.playState = frame.state['playState'];\n    if (this.playState !== 'running' && this.target) {\n      delete this.target[KEY];\n    }\n    if (this.playState === 'idle') {\n      if (this.startTime > t) {\n        setTimeout(this._run.bind(this), this.startTime - t);\n      }\n    } else if (this.playState === 'running') {\n      this._framer(function () {\n        if (_this.playState !== 'running') {\n          return;\n        }\n        _this.currentTime = elapsed;\n        if (onFrame) {\n          onFrame(frame);\n        }\n        _this._run();\n      });\n    } else if (this.playState === 'finished') {\n      this.finished = true;\n      if (onFrame) {\n        onFrame(frame);\n      }\n    }\n  }\n});\nvar animate = Animation.animate;\nvar Animation$1 = /*#__PURE__*/Object.freeze({\n  Animation: Animation,\n  Easing: Easing,\n  Player: Player,\n  Frame: Frame,\n  animate: animate\n});\nvar options$3 = {\n  'smoothness': 0,\n  'enableClip': true,\n  'enableSimplify': true,\n  'simplifyTolerance': 2,\n  'symbol': {\n    'lineColor': '#000',\n    'lineWidth': 2,\n    'lineOpacity': 1,\n    'polygonFill': '#fff',\n    'polygonOpacity': 1,\n    'opacity': 1\n  }\n};\nvar Path = function (_Geometry) {\n  _inheritsLoose(Path, _Geometry);\n  function Path() {\n    return _Geometry.apply(this, arguments) || this;\n  }\n  var _proto = Path.prototype;\n  _proto.animateShow = function animateShow(options, cb) {\n    var _this = this;\n    if (options === void 0) {\n      options = {};\n    }\n    if (this._showPlayer) {\n      this._showPlayer.finish();\n    }\n    if (isFunction(options)) {\n      options = {};\n      cb = options;\n    }\n    var coordinates = this.getCoordinates();\n    if (coordinates.length === 0) {\n      return this;\n    }\n    this._animIdx = 0;\n    this._animLenSoFar = 0;\n    this.show();\n    var isPolygon = !!this.getShell;\n    var animCoords = isPolygon ? this.getShell().concat(this.getShell()[0]) : coordinates;\n    var projection = this._getProjection();\n    var prjAnimCoords = projection.projectCoords(animCoords, this.options['antiMeridian']);\n    this._prjAniShowCenter = this._getPrjExtent().getCenter();\n    this._aniShowCenter = projection.unproject(this._prjAniShowCenter);\n    var duration = options['duration'] || 1000,\n      easing = options['easing'] || 'out';\n    this.setCoordinates([]);\n    var length = 0;\n    if (prjAnimCoords.length) {\n      prjAnimCoords[0]._distance = 0;\n    }\n    for (var i = 1; i < prjAnimCoords.length; i++) {\n      var distance = prjAnimCoords[i].distanceTo(prjAnimCoords[i - 1]);\n      prjAnimCoords[i]._distance = distance;\n      length += distance;\n    }\n    this._tempCoord = new Coordinate(0, 0);\n    this._tempPrjCoord = new Point(0, 0);\n    var player = this._showPlayer = Animation.animate({\n      't': duration\n    }, {\n      'duration': duration,\n      'easing': easing\n    }, function (frame) {\n      if (!_this.getMap()) {\n        if (player.playState !== 'finished') {\n          player.finish();\n          if (cb) {\n            var _coordinates = _this.getCoordinates();\n            cb(frame, _coordinates[_coordinates.length - 1]);\n          }\n        }\n        return;\n      }\n      var currentCoord = _this._drawAnimShowFrame(frame.styles.t, duration, length, animCoords, prjAnimCoords);\n      if (frame.state.playState === 'finished') {\n        delete _this._showPlayer;\n        delete _this._aniShowCenter;\n        delete _this._prjAniShowCenter;\n        delete _this._animIdx;\n        delete _this._animLenSoFar;\n        delete _this._animTailRatio;\n        delete _this._tempCoord;\n        delete _this._tempPrjCoord;\n        _this.setCoordinates(coordinates);\n      }\n      if (cb) {\n        cb(frame, currentCoord);\n      }\n    }, this);\n    player.play();\n    return player;\n  };\n  _proto._drawAnimShowFrame = function _drawAnimShowFrame(t, duration, length, coordinates, prjCoords) {\n    if (t === 0) {\n      return coordinates[0];\n    }\n    var targetLength = t / duration * length;\n    var segLen = 0;\n    var i, l;\n    for (i = this._animIdx + 1, l = prjCoords.length; i < l; i++) {\n      segLen = prjCoords[i]._distance;\n      if (this._animLenSoFar + segLen > targetLength) {\n        break;\n      }\n      this._animLenSoFar += segLen;\n    }\n    this._animIdx = i - 1;\n    if (this._animIdx >= l - 1) {\n      this.setCoordinates(coordinates);\n      return coordinates[coordinates.length - 1];\n    }\n    var idx = this._animIdx;\n    var p1 = prjCoords[idx],\n      p2 = prjCoords[idx + 1],\n      span = targetLength - this._animLenSoFar,\n      r = span / segLen;\n    this._animTailRatio = r;\n    var x = p1.x + (p2.x - p1.x) * r,\n      y = p1.y + (p2.y - p1.y) * r;\n    this._tempPrjCoord.x = x;\n    this._tempPrjCoord.y = y;\n    var lastCoord = this._tempPrjCoord;\n    var c1 = coordinates[idx],\n      c2 = coordinates[idx + 1];\n    var cx = c1.x + (c2.x - c1.x) * r,\n      cy = c1.y + (c2.y - c1.y) * r;\n    this._tempCoord.x = cx;\n    this._tempCoord.y = cy;\n    var targetCoord = this._tempCoord;\n    var isPolygon = !!this.getShell;\n    if (!isPolygon && this.options['smoothness'] > 0) {\n      var animCoords = [],\n        prjAnimCoords = [];\n      for (var _i = 0; _i <= this._animIdx; _i++) {\n        animCoords.push(coordinates[_i]);\n        prjAnimCoords.push(prjCoords[_i]);\n      }\n      animCoords.push(targetCoord, targetCoord);\n      prjAnimCoords.push(lastCoord, lastCoord);\n      this.setCoordinates(animCoords);\n      this._setPrjCoordinates(prjAnimCoords);\n    } else {\n      var _animCoords = coordinates.slice(0, this._animIdx + 1);\n      _animCoords.push(targetCoord);\n      var _prjAnimCoords = prjCoords.slice(0, this._animIdx + 1);\n      _prjAnimCoords.push(lastCoord);\n      if (isPolygon) {\n        this.setCoordinates([this._aniShowCenter].concat(_animCoords));\n        this._setPrjCoordinates([this._prjAniShowCenter].concat(_prjAnimCoords));\n      } else {\n        this.setCoordinates(_animCoords);\n        this._setPrjCoordinates(_prjAnimCoords);\n      }\n    }\n    return targetCoord;\n  };\n  _proto._getCenterInExtent = function _getCenterInExtent(extent, coordinates, clipFn) {\n    var meExtent = this.getExtent();\n    if (!extent.intersects(meExtent)) {\n      return null;\n    }\n    var clipped = clipFn(coordinates, extent);\n    if (clipped.length === 0) {\n      return null;\n    }\n    var sumx = 0,\n      sumy = 0,\n      counter = 0;\n    clipped.forEach(function (part) {\n      if (Array.isArray(part)) {\n        part.forEach(function (c) {\n          if (c.point) {\n            c = c.point;\n          }\n          sumx += c.x;\n          sumy += c.y;\n          counter++;\n        });\n      } else {\n        if (part.point) {\n          part = part.point;\n        }\n        sumx += part.x;\n        sumy += part.y;\n        counter++;\n      }\n    });\n    var c = new Coordinate(sumx, sumy)._multi(1 / counter);\n    c.count = counter;\n    return c;\n  };\n  _proto._getPath2DPoints = function _getPath2DPoints(prjCoords, disableSimplify, res) {\n    if (!isArrayHasData(prjCoords)) {\n      return [];\n    }\n    var map = this.getMap(),\n      isSimplify = !disableSimplify && this._shouldSimplify(),\n      tolerance = this.options['simplifyTolerance'] * map._getResolution(),\n      isMulti = Array.isArray(prjCoords[0]);\n    delete this._simplified;\n    if (isSimplify && !isMulti) {\n      var count = prjCoords.length;\n      prjCoords = simplify(prjCoords, tolerance, false);\n      this._simplified = prjCoords.length < count;\n    }\n    if (!res) {\n      res = map._getResolution();\n    }\n    if (!Array.isArray(prjCoords)) {\n      return map._prjToPointAtRes(prjCoords, res);\n    } else {\n      var resultPoints = [];\n      var glPointKey = '_glPt';\n      if (!Array.isArray(prjCoords[0])) {\n        resultPoints = getPointsResultPts(prjCoords, glPointKey);\n        return map._prjsToPointsAtRes(prjCoords, res, resultPoints);\n      }\n      var pts = [];\n      for (var i = 0, len = prjCoords.length; i < len; i++) {\n        var prjCoord = prjCoords[i];\n        resultPoints = getPointsResultPts(prjCoord, glPointKey);\n        var pt = map._prjsToPointsAtRes(prjCoord, res, resultPoints);\n        pts.push(pt);\n      }\n      return pts;\n    }\n  };\n  _proto._shouldSimplify = function _shouldSimplify() {\n    var layer = this.getLayer();\n    var hasAltitude = layer.options['enableAltitude'];\n    return layer && layer.options['enableSimplify'] && !hasAltitude && this.options['enableSimplify'] && !this._showPlayer;\n  };\n  _proto._setPrjCoordinates = function _setPrjCoordinates(prjPoints) {\n    this._prjCoords = prjPoints;\n    this.onShapeChanged();\n  };\n  _proto._getPrjCoordinates = function _getPrjCoordinates() {\n    this._verifyProjection();\n    if (!this._prjCoords && this._getProjection()) {\n      this._prjCoords = this._projectCoords(this._coordinates);\n    }\n    return this._prjCoords;\n  };\n  _proto._updateCache = function _updateCache() {\n    this._clearCache();\n    var projection = this._getProjection();\n    if (!projection) {\n      return;\n    }\n    if (this._prjCoords) {\n      this._coordinates = this._unprojectCoords(this._getPrjCoordinates());\n    }\n  };\n  _proto._clearProjection = function _clearProjection() {\n    this._prjCoords = null;\n    _Geometry.prototype._clearProjection.call(this);\n  };\n  _proto._projectCoords = function _projectCoords(points) {\n    var projection = this._getProjection();\n    if (projection) {\n      return projection.projectCoords(points, this.options['antiMeridian']);\n    }\n    return [];\n  };\n  _proto._unprojectCoords = function _unprojectCoords(prjPoints) {\n    var projection = this._getProjection();\n    if (projection) {\n      return projection.unprojectCoords(prjPoints);\n    }\n    return [];\n  };\n  _proto._computeCenter = function _computeCenter() {\n    var ring = this._coordinates;\n    if (!isArrayHasData(ring)) {\n      return null;\n    }\n    var sumx = 0,\n      sumy = 0,\n      counter = 0;\n    var size = ring.length;\n    for (var i = 0; i < size; i++) {\n      if (ring[i]) {\n        if (isNumber(ring[i].x) && isNumber(ring[i].y)) {\n          sumx += ring[i].x;\n          sumy += ring[i].y;\n          counter++;\n        }\n      }\n    }\n    return new Coordinate(sumx / counter, sumy / counter);\n  };\n  _proto._computeExtent = function _computeExtent() {\n    var shell = this._coordinates;\n    if (!isArrayHasData(shell)) {\n      return null;\n    }\n    var rings = [shell];\n    if (this.hasHoles && this.hasHoles()) {\n      rings.push.apply(rings, this.getHoles());\n    }\n    return this._coords2Extent(rings, this._getProjection());\n  };\n  _proto._computePrjExtent = function _computePrjExtent() {\n    var coords = [this._getPrjCoordinates()];\n    if (this.hasHoles && this.hasHoles()) {\n      coords.push.apply(coords, this._getPrjHoles());\n    }\n    return this._coords2Extent(coords);\n  };\n  _proto._get2DLength = function _get2DLength() {\n    var vertexes = this._getPath2DPoints(this._getPrjCoordinates(), true);\n    var len = 0;\n    for (var i = 1, l = vertexes.length; i < l; i++) {\n      len += vertexes[i].distanceTo(vertexes[i - 1]);\n    }\n    return len;\n  };\n  _proto._hitTestTolerance = function _hitTestTolerance() {\n    var symbol = this._getInternalSymbol();\n    var w;\n    if (Array.isArray(symbol)) {\n      w = 0;\n      for (var i = 0; i < symbol.length; i++) {\n        if (isNumber(symbol[i]['lineWidth'])) {\n          if (symbol[i]['lineWidth'] > w) {\n            w = symbol[i]['lineWidth'];\n          }\n        }\n      }\n    } else {\n      w = symbol['lineWidth'];\n    }\n    return _Geometry.prototype._hitTestTolerance.call(this) + (isNumber(w) ? w / 2 : 1.5);\n  };\n  _proto._coords2Extent = function _coords2Extent(coords, proj) {\n    if (!coords || coords.length === 0 || Array.isArray(coords[0]) && coords[0].length === 0) {\n      return null;\n    }\n    var result = new Extent(proj);\n    for (var i = 0, l = coords.length; i < l; i++) {\n      for (var j = 0, ll = coords[i].length; j < ll; j++) {\n        result._combine(coords[i][j]);\n      }\n    }\n    return result;\n  };\n  return Path;\n}(Geometry);\nPath.mergeOptions(options$3);\nvar JSON_TYPE = 'Polygon';\nvar Polygon = function (_Path) {\n  _inheritsLoose(Polygon, _Path);\n  function Polygon(coordinates, opts) {\n    var _this;\n    _this = _Path.call(this, opts) || this;\n    _this.type = 'Polygon';\n    if (coordinates) {\n      _this.setCoordinates(coordinates);\n    }\n    return _this;\n  }\n  var _proto = Polygon.prototype;\n  _proto.getOutline = function getOutline() {\n    var painter = this._getPainter();\n    if (!painter) {\n      return null;\n    }\n    var extent = this.getExtent();\n    return new Polygon(extent.toArray(), {\n      symbol: {\n        'lineWidth': 1,\n        'lineColor': '6b707b'\n      }\n    });\n  };\n  _proto.setCoordinates = function setCoordinates(coordinates) {\n    if (!coordinates) {\n      this._coordinates = null;\n      this._holes = null;\n      this._projectRings();\n      return this;\n    }\n    var rings = Coordinate.toCoordinates(coordinates);\n    var len = rings.length;\n    if (!Array.isArray(rings[0])) {\n      this._coordinates = this._trimRing(rings);\n    } else {\n      this._coordinates = this._trimRing(rings[0]);\n      if (len > 1) {\n        var holes = [];\n        for (var i = 1; i < len; i++) {\n          if (!rings[i]) {\n            continue;\n          }\n          holes.push(this._trimRing(rings[i]));\n        }\n        this._holes = holes;\n      } else {\n        this._holes = null;\n      }\n    }\n    this._projectRings();\n    return this;\n  };\n  _proto.getCoordinates = function getCoordinates() {\n    if (!this._coordinates) {\n      return [];\n    }\n    var holes = this.getHoles();\n    var rings = [this._copyAndCloseRing(this._coordinates)];\n    for (var i = 0, l = holes.length; i < l; i++) {\n      rings.push(this._copyAndCloseRing(holes[i]));\n    }\n    return rings;\n  };\n  _proto.getCenterInExtent = function getCenterInExtent(extent) {\n    return this._getCenterInExtent(extent, this.getShell(), clipPolygon);\n  };\n  _proto.getShell = function getShell() {\n    return this._coordinates || [];\n  };\n  _proto.getHoles = function getHoles() {\n    return this._holes || [];\n  };\n  _proto.hasHoles = function hasHoles() {\n    return this.getHoles().length > 0;\n  };\n  _proto._projectRings = function _projectRings() {\n    if (!this.getMap()) {\n      this.onShapeChanged();\n      return;\n    }\n    this._prjCoords = this._projectCoords(this._coordinates);\n    this._prjHoles = this._projectCoords(this._holes);\n    this.onShapeChanged();\n  };\n  _proto._setPrjCoordinates = function _setPrjCoordinates(prjCoords) {\n    this._prjCoords = prjCoords;\n    this.onShapeChanged();\n  };\n  _proto._cleanRing = function _cleanRing(ring) {\n    for (var i = ring.length - 1; i >= 0; i--) {\n      if (!ring[i]) {\n        ring.splice(i, 1);\n      }\n    }\n  };\n  _proto._checkRing = function _checkRing(ring) {\n    this._cleanRing(ring);\n    if (!ring || !isArrayHasData(ring)) {\n      return false;\n    }\n    var lastPoint = ring[ring.length - 1];\n    var isClose = true;\n    if (ring[0].x !== lastPoint.x || ring[0].y !== lastPoint.y) {\n      isClose = false;\n    }\n    return isClose;\n  };\n  _proto._trimRing = function _trimRing(ring) {\n    var isClose = this._checkRing(ring);\n    if (isArrayHasData(ring) && isClose) {\n      ring.splice(ring.length - 1, 1);\n    }\n    return ring;\n  };\n  _proto._copyAndCloseRing = function _copyAndCloseRing(ring) {\n    ring = ring.slice(0);\n    var isClose = this._checkRing(ring);\n    if (isArrayHasData(ring) && !isClose) {\n      ring.push(ring[0].copy());\n      return ring;\n    } else {\n      return ring;\n    }\n  };\n  _proto._getPrjShell = function _getPrjShell() {\n    if (this.getJSONType() === JSON_TYPE) {\n      return this._getPrjCoordinates();\n    }\n    this._verifyProjection();\n    if (this._getProjection() && !this._prjShell) {\n      this._prjShell = this._projectCoords(this.getShell());\n    }\n    return this._prjShell;\n  };\n  _proto._getPrjHoles = function _getPrjHoles() {\n    var projection = this._getProjection();\n    this._verifyProjection();\n    if (projection && !this._prjHoles) {\n      this._prjHoles = this._projectCoords(this.getHoles());\n    }\n    return this._prjHoles;\n  };\n  _proto._computeGeodesicLength = function _computeGeodesicLength(measurer) {\n    var rings = this.getCoordinates();\n    if (!isArrayHasData(rings)) {\n      return 0;\n    }\n    var result = 0;\n    for (var i = 0, len = rings.length; i < len; i++) {\n      result += measurer.measureLength(rings[i]);\n    }\n    return result;\n  };\n  _proto._computeGeodesicArea = function _computeGeodesicArea(measurer) {\n    var rings = this.getCoordinates();\n    if (!isArrayHasData(rings)) {\n      return 0;\n    }\n    var result = measurer.measureArea(rings[0]);\n    for (var i = 1, len = rings.length; i < len; i++) {\n      result -= measurer.measureArea(rings[i]);\n    }\n    return result;\n  };\n  _proto._updateCache = function _updateCache() {\n    _Path.prototype._updateCache.call(this);\n    if (this._prjHoles) {\n      this._holes = this._unprojectCoords(this._getPrjHoles());\n    }\n  };\n  _proto._clearCache = function _clearCache() {\n    delete this._prjShell;\n    return _Path.prototype._clearCache.call(this);\n  };\n  _proto._clearProjection = function _clearProjection() {\n    if (this._prjHoles) {\n      this._prjHoles = null;\n    }\n    if (this._prjShell) {\n      this._prjShell = null;\n    }\n    _Path.prototype._clearProjection.call(this);\n  };\n  return Polygon;\n}(Path);\nPolygon.registerJSONType(JSON_TYPE);\nfunction CenterMixin(Base) {\n  return function (_Base) {\n    _inheritsLoose(_class, _Base);\n    function _class() {\n      return _Base.apply(this, arguments) || this;\n    }\n    var _proto = _class.prototype;\n    _proto.getCoordinates = function getCoordinates() {\n      return this._coordinates;\n    };\n    _proto.setCoordinates = function setCoordinates(coordinates) {\n      var center = coordinates instanceof Coordinate ? coordinates : new Coordinate(coordinates);\n      this._coordinates = center;\n      if (!this.getMap()) {\n        this._dirtyCoords = true;\n        this.onPositionChanged();\n        return this;\n      }\n      var projection = this._getProjection();\n      this._setPrjCoordinates(projection.project(this._coordinates));\n      return this;\n    };\n    _proto._getCenter2DPoint = function _getCenter2DPoint(res) {\n      var map = this.getMap();\n      if (!map) {\n        return null;\n      }\n      var pcenter = this._getPrjCoordinates();\n      if (!pcenter) {\n        return null;\n      }\n      if (!res) {\n        res = map._getResolution();\n      }\n      return map._prjToPointAtRes(pcenter, res);\n    };\n    _proto._getPrjCoordinates = function _getPrjCoordinates() {\n      var projection = this._getProjection();\n      this._verifyProjection();\n      if (!this._pcenter && projection) {\n        if (this._coordinates) {\n          this._pcenter = projection.project(this._coordinates);\n        }\n      }\n      return this._pcenter;\n    };\n    _proto._setPrjCoordinates = function _setPrjCoordinates(pcenter) {\n      this._pcenter = pcenter;\n      this.onPositionChanged();\n    };\n    _proto._updateCache = function _updateCache() {\n      this._clearCache();\n      var projection = this._getProjection();\n      if (this._pcenter && projection) {\n        this._coordinates = projection.unproject(this._pcenter);\n      }\n    };\n    _proto._clearProjection = function _clearProjection() {\n      this._pcenter = null;\n      _Base.prototype._clearProjection.call(this);\n    };\n    _proto._computeCenter = function _computeCenter() {\n      return this._coordinates ? this._coordinates.copy() : null;\n    };\n    return _class;\n  }(Base);\n}\nvar TEMP_EXTENT$5 = new PointExtent();\nvar options$4 = {\n  'symbol': {\n    'markerType': 'path',\n    'markerPath': [{\n      'path': 'M8 23l0 0 0 0 0 0 0 0 0 0c-4,-5 -8,-10 -8,-14 0,-5 4,-9 8,-9l0 0 0 0c4,0 8,4 8,9 0,4 -4,9 -8,14z M3,9 a5,5 0,1,0,0,-0.9Z',\n      'fill': '#DE3333'\n    }],\n    'markerPathWidth': 16,\n    'markerPathHeight': 23,\n    'markerWidth': 24,\n    'markerHeight': 34\n  },\n  'hitTestForEvent': false,\n  'collision': true\n};\nvar Marker = function (_CenterMixin) {\n  _inheritsLoose(Marker, _CenterMixin);\n  function Marker(coordinates, opts) {\n    var _this;\n    _this = _CenterMixin.call(this, opts) || this;\n    _this.type = 'Point';\n    if (coordinates) {\n      _this.setCoordinates(coordinates);\n    }\n    return _this;\n  }\n  var _proto = Marker.prototype;\n  _proto.getOutline = function getOutline() {\n    var coord = this.getCoordinates();\n    var extent = this.getContainerExtent();\n    var anchor = this.getMap().coordToContainerPoint(coord);\n    return new Marker(coord, {\n      'symbol': {\n        'markerType': 'square',\n        'markerWidth': extent.getWidth(),\n        'markerHeight': extent.getHeight(),\n        'markerLineWidth': 1,\n        'markerLineColor': '6b707b',\n        'markerFill': 'rgba(0, 0, 0, 0)',\n        'markerDx': extent.xmin - (anchor.x - extent.getWidth() / 2),\n        'markerDy': extent.ymin - (anchor.y - extent.getHeight() / 2)\n      }\n    });\n  };\n  _proto.setSymbol = function setSymbol() {\n    var _CenterMixin$prototyp;\n    delete this._fixedExtent;\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    return (_CenterMixin$prototyp = _CenterMixin.prototype.setSymbol).call.apply(_CenterMixin$prototyp, [this].concat(args));\n  };\n  _proto._getSizeSymbol = function _getSizeSymbol(symbol) {\n    var s = {};\n    var dynamic = false;\n    var dynamicSize = false;\n    for (var i = 0; i < DYNAMIC_SYMBOL_PROPS.length; i++) {\n      var v = symbol[DYNAMIC_SYMBOL_PROPS[i]];\n      if (isNil(v)) {\n        continue;\n      }\n      if (!dynamic && isFunctionDefinition(v)) {\n        dynamic = true;\n        dynamicSize = true;\n      }\n      s[DYNAMIC_SYMBOL_PROPS[i]] = v;\n    }\n    for (var _i = 0; _i < SIZE_SYMBOL_PROPS.length; _i++) {\n      var _v = symbol[SIZE_SYMBOL_PROPS[_i]];\n      if (isNil(_v)) {\n        continue;\n      }\n      if (!dynamic && isFunctionDefinition(_v)) {\n        dynamic = true;\n      }\n      s[SIZE_SYMBOL_PROPS[_i]] = _v;\n    }\n    var sizeSymbol;\n    if (dynamic) {\n      sizeSymbol = loadGeoSymbol(s, this);\n      if (dynamicSize) {\n        sizeSymbol._dynamic = true;\n      }\n    } else {\n      sizeSymbol = s;\n    }\n    return sizeSymbol;\n  };\n  _proto._setExternSymbol = function _setExternSymbol(symbol) {\n    if (!this._symbol) {\n      delete this._fixedExtent;\n    }\n    return _CenterMixin.prototype._setExternSymbol.call(this, symbol);\n  };\n  _proto._isDynamicSize = function _isDynamicSize() {\n    return this._sizeSymbol && this._sizeSymbol._dynamic;\n  };\n  _proto._getFixedExtent = function _getFixedExtent() {\n    if (this._fixedExtent && !this._isDynamicSize()) {\n      return this._fixedExtent;\n    }\n    this._fixedExtent = this._fixedExtent || new PointExtent();\n    this._fixedExtent.set(null, null, null, null);\n    var symbol = this._sizeSymbol;\n    if (!symbol) {\n      return this._fixedExtent;\n    }\n    var renderer = this.getLayer() && this.getLayer().getRenderer();\n    var resources = renderer && renderer.resources;\n    var textDesc = this.getTextDesc();\n    if (Array.isArray(symbol)) {\n      TEMP_EXTENT$5.set(Infinity, Infinity, -Infinity, -Infinity);\n      for (var i = 0; i < symbol.length; i++) {\n        if (!symbol[i]) {\n          continue;\n        }\n        this._fixedExtent._combine(getMarkerFixedExtent(TEMP_EXTENT$5, symbol[i], resources, textDesc && textDesc[i]));\n      }\n    } else {\n      this._fixedExtent = getMarkerFixedExtent(this._fixedExtent, symbol, resources, textDesc);\n    }\n    return this._fixedExtent;\n  };\n  _proto._isVectorMarker = function _isVectorMarker() {\n    var symbol = this._getInternalSymbol();\n    if (Array.isArray(symbol)) {\n      return false;\n    }\n    return isVectorSymbol(symbol);\n  };\n  _proto._canEdit = function _canEdit() {\n    var symbol = this._getInternalSymbol();\n    if (Array.isArray(symbol)) {\n      return false;\n    }\n    return isVectorSymbol(symbol) || isPathSymbol(symbol) || isImageSymbol(symbol);\n  };\n  _proto._containsPoint = function _containsPoint(point, t) {\n    var extent = this.getContainerExtent();\n    if (t) {\n      extent = extent.expand(t);\n    }\n    if (extent.contains(point)) {\n      if (this.options['hitTestForEvent']) {\n        return _CenterMixin.prototype._containsPoint.call(this, point, t);\n      } else {\n        return true;\n      }\n    } else {\n      return false;\n    }\n  };\n  _proto._computeExtent = function _computeExtent() {\n    return computeExtent.call(this, 'getCenter');\n  };\n  _proto._computePrjExtent = function _computePrjExtent() {\n    return computeExtent.call(this, '_getPrjCoordinates');\n  };\n  _proto._computeGeodesicLength = function _computeGeodesicLength() {\n    return 0;\n  };\n  _proto._computeGeodesicArea = function _computeGeodesicArea() {\n    return 0;\n  };\n  _proto._getSprite = function _getSprite(resources, canvasClass) {\n    if (this._getPainter()) {\n      return this._getPainter().getSprite(resources, canvasClass);\n    }\n    return new Painter(this).getSprite(resources, canvasClass);\n  };\n  return Marker;\n}(CenterMixin(Geometry));\nMarker.mergeOptions(options$4);\nMarker.registerJSONType('Marker');\nfunction computeExtent(fn) {\n  var coordinates = this[fn]();\n  if (!coordinates) {\n    return null;\n  }\n  return new Extent(coordinates, coordinates, this._getProjection());\n}\nvar options$5 = {\n  'arrowStyle': null,\n  'arrowPlacement': 'vertex-last'\n};\nvar LineString = function (_Path) {\n  _inheritsLoose(LineString, _Path);\n  function LineString(coordinates, options) {\n    var _this;\n    _this = _Path.call(this, options) || this;\n    _this.type = 'LineString';\n    if (coordinates) {\n      _this.setCoordinates(coordinates);\n    }\n    return _this;\n  }\n  var _proto = LineString.prototype;\n  _proto.getOutline = function getOutline() {\n    return Polygon.prototype.getOutline.call(this);\n  };\n  _proto.setCoordinates = function setCoordinates(coordinates) {\n    if (!coordinates) {\n      this._coordinates = null;\n      this._setPrjCoordinates(null);\n      return this;\n    }\n    this._coordinates = Coordinate.toCoordinates(coordinates);\n    if (this.getMap()) {\n      this._setPrjCoordinates(this._projectCoords(this._coordinates));\n    } else {\n      this.onShapeChanged();\n    }\n    return this;\n  };\n  _proto.getCoordinates = function getCoordinates() {\n    return this._coordinates || [];\n  };\n  _proto.getCenterInExtent = function getCenterInExtent(extent) {\n    return this._getCenterInExtent(extent, this.getCoordinates(), clipLine);\n  };\n  _proto._computeGeodesicLength = function _computeGeodesicLength(measurer) {\n    return measurer.measureLength(this.getCoordinates());\n  };\n  _proto._computeGeodesicArea = function _computeGeodesicArea() {\n    return 0;\n  };\n  return LineString;\n}(Path);\nLineString.mergeOptions(options$5);\nLineString.registerJSONType('LineString');\nvar TEMP_EXTENT$6 = new PointExtent();\nvar GeometryCollection = function (_Geometry) {\n  _inheritsLoose(GeometryCollection, _Geometry);\n  function GeometryCollection(geometries, opts) {\n    var _this;\n    _this = _Geometry.call(this, opts) || this;\n    _this.type = 'GeometryCollection';\n    _this.setGeometries(geometries);\n    return _this;\n  }\n  var _proto = GeometryCollection.prototype;\n  _proto.getContainerExtent = function getContainerExtent(out) {\n    var extent = out || new PointExtent();\n    this.forEach(function (geo) {\n      extent._combine(geo.getContainerExtent(TEMP_EXTENT$6));\n    });\n    return extent;\n  };\n  _proto.setGeometries = function setGeometries(_geometries) {\n    var geometries = this._checkGeometries(_geometries || []);\n    var symbol = this._getSymbol();\n    var options = this.config();\n    var properties = this.getProperties();\n    for (var i = geometries.length - 1; i >= 0; i--) {\n      geometries[i]._initOptions(options);\n      geometries[i]._setParent(this);\n      geometries[i]._setEventParent(this);\n      if (symbol) {\n        geometries[i].setSymbol(symbol);\n      }\n      if (properties) {\n        geometries[i].setProperties(properties);\n      }\n    }\n    this._geometries = geometries;\n    if (this.getLayer()) {\n      this._bindGeometriesToLayer();\n      this.onShapeChanged();\n    }\n    return this;\n  };\n  _proto.getGeometries = function getGeometries() {\n    return this._geometries || [];\n  };\n  _proto.forEach = function forEach(fn, context) {\n    var geometries = this.getGeometries();\n    for (var i = 0, l = geometries.length; i < l; i++) {\n      if (!geometries[i]) {\n        continue;\n      }\n      if (!context) {\n        fn(geometries[i], i);\n      } else {\n        fn.call(context, geometries[i], i);\n      }\n    }\n    return this;\n  };\n  _proto.filter = function filter(fn, context) {\n    if (!fn) {\n      return new GeometryCollection();\n    }\n    var selected = [];\n    var isFn = isFunction(fn);\n    var filter = isFn ? fn : createFilter(fn);\n    this.forEach(function (geometry) {\n      var g = isFn ? geometry : getFilterFeature(geometry);\n      if (context ? filter.call(context, g) : filter(g)) {\n        selected.push(geometry);\n      }\n    }, this);\n    return new GeometryCollection(selected);\n  };\n  _proto.translate = function translate(offset) {\n    if (!offset) {\n      return this;\n    }\n    if (this.isEmpty()) {\n      return this;\n    }\n    var args = arguments;\n    this.forEach(function (geometry) {\n      if (geometry && geometry.translate) {\n        geometry.translate.apply(geometry, args);\n      }\n    });\n    return this;\n  };\n  _proto.isEmpty = function isEmpty$$1() {\n    return !isArrayHasData(this.getGeometries());\n  };\n  _proto.remove = function remove() {\n    this.forEach(function (geometry) {\n      geometry._unbind();\n    });\n    return Geometry.prototype.remove.apply(this, arguments);\n  };\n  _proto.show = function show() {\n    this.options['visible'] = true;\n    this.forEach(function (geometry) {\n      geometry.show();\n    });\n    return this;\n  };\n  _proto.hide = function hide() {\n    this.options['visible'] = false;\n    this.forEach(function (geometry) {\n      geometry.hide();\n    });\n    return this;\n  };\n  _proto.onConfig = function onConfig(config) {\n    this.forEach(function (geometry) {\n      geometry.config(config);\n    });\n  };\n  _proto.getSymbol = function getSymbol() {\n    var s = _Geometry.prototype.getSymbol.call(this);\n    if (!s) {\n      var symbols = [];\n      var is = false;\n      this.forEach(function (g) {\n        var symbol = g.getSymbol();\n        if (symbol && !is) {\n          is = true;\n        }\n        symbols.push(g.getSymbol());\n      });\n      if (is) {\n        s = {\n          'children': symbols\n        };\n      }\n    }\n    return s;\n  };\n  _proto.setSymbol = function setSymbol(s) {\n    var _this2 = this;\n    if (s && s['children']) {\n      this._symbol = null;\n      this.forEach(function (g, i) {\n        g._eventSymbolProperties = _this2._eventSymbolProperties;\n        g.setSymbol(s['children'][i]);\n      });\n    } else {\n      var symbol = this._prepareSymbol(s);\n      this._symbol = symbol;\n      this.forEach(function (g) {\n        g._eventSymbolProperties = _this2._eventSymbolProperties;\n        g.setSymbol(symbol);\n      });\n    }\n    this.onSymbolChanged();\n    return this;\n  };\n  _proto._setExternSymbol = function _setExternSymbol(symbol) {\n    symbol = this._prepareSymbol(symbol);\n    this._externSymbol = symbol;\n    this.forEach(function (geometry) {\n      geometry._setExternSymbol(symbol);\n    });\n    this.onSymbolChanged();\n    return this;\n  };\n  _proto._bindLayer = function _bindLayer() {\n    _Geometry.prototype._bindLayer.apply(this, arguments);\n    this._bindGeometriesToLayer();\n  };\n  _proto._bindGeometriesToLayer = function _bindGeometriesToLayer() {\n    var layer = this.getLayer();\n    this.forEach(function (geometry) {\n      geometry._bindLayer(layer);\n    });\n  };\n  _proto._checkGeometries = function _checkGeometries(geometries) {\n    var invalidGeoError = 'The geometry added to collection is invalid.';\n    if (geometries && !Array.isArray(geometries)) {\n      if (geometries instanceof Geometry) {\n        return [geometries];\n      } else {\n        throw new Error(invalidGeoError);\n      }\n    } else {\n      for (var i = 0, l = geometries.length; i < l; i++) {\n        if (!this._checkGeo(geometries[i])) {\n          throw new Error(invalidGeoError + ' Index: ' + i);\n        }\n      }\n      return geometries;\n    }\n  };\n  _proto._checkGeo = function _checkGeo(geo) {\n    return geo instanceof Geometry;\n  };\n  _proto._updateCache = function _updateCache() {\n    this._clearCache();\n    if (this.isEmpty()) {\n      return;\n    }\n    this.forEach(function (geometry) {\n      if (geometry && geometry._updateCache) {\n        geometry._updateCache();\n      }\n    });\n  };\n  _proto._removePainter = function _removePainter() {\n    if (this._painter) {\n      this._painter.remove();\n    }\n    delete this._painter;\n    this.forEach(function (geometry) {\n      geometry._removePainter();\n    });\n  };\n  _proto._computeCenter = function _computeCenter(projection) {\n    if (!projection || this.isEmpty()) {\n      return null;\n    }\n    var sumX = 0,\n      sumY = 0,\n      counter = 0;\n    var geometries = this.getGeometries();\n    for (var i = 0, l = geometries.length; i < l; i++) {\n      if (!geometries[i]) {\n        continue;\n      }\n      var center = geometries[i]._computeCenter(projection);\n      if (center) {\n        sumX += center.x;\n        sumY += center.y;\n        counter++;\n      }\n    }\n    if (counter === 0) {\n      return null;\n    }\n    return new Coordinate(sumX / counter, sumY / counter);\n  };\n  _proto._containsPoint = function _containsPoint(point, t) {\n    if (this.isEmpty()) {\n      return false;\n    }\n    delete this._pickGeometryIndex;\n    var geometries = this.getGeometries();\n    for (var i = 0, l = geometries.length; i < l; i++) {\n      if (geometries[i]._containsPoint(point, t)) {\n        this._pickGeometryIndex = i;\n        return true;\n      }\n    }\n    return false;\n  };\n  _proto._computeExtent = function _computeExtent(projection) {\n    return computeExtent$1.call(this, projection, '_computeExtent');\n  };\n  _proto._computePrjExtent = function _computePrjExtent(projection) {\n    return computeExtent$1.call(this, projection, '_computePrjExtent');\n  };\n  _proto._computeGeodesicLength = function _computeGeodesicLength(projection) {\n    if (!projection || this.isEmpty()) {\n      return 0;\n    }\n    var geometries = this.getGeometries();\n    var result = 0;\n    for (var i = 0, l = geometries.length; i < l; i++) {\n      if (!geometries[i]) {\n        continue;\n      }\n      result += geometries[i]._computeGeodesicLength(projection);\n    }\n    return result;\n  };\n  _proto._computeGeodesicArea = function _computeGeodesicArea(projection) {\n    if (!projection || this.isEmpty()) {\n      return 0;\n    }\n    var geometries = this.getGeometries();\n    var result = 0;\n    for (var i = 0, l = geometries.length; i < l; i++) {\n      if (!geometries[i]) {\n        continue;\n      }\n      result += geometries[i]._computeGeodesicArea(projection);\n    }\n    return result;\n  };\n  _proto._exportGeoJSONGeometry = function _exportGeoJSONGeometry() {\n    var children = [];\n    if (!this.isEmpty()) {\n      var geometries = this.getGeometries();\n      for (var i = 0, l = geometries.length; i < l; i++) {\n        if (!geometries[i]) {\n          continue;\n        }\n        children.push(geometries[i]._exportGeoJSONGeometry());\n      }\n    }\n    return {\n      'type': 'GeometryCollection',\n      'geometries': children\n    };\n  };\n  _proto._toJSON = function _toJSON(options) {\n    var feature = {\n      'type': 'Feature',\n      'geometry': {\n        'type': 'GeometryCollection',\n        'geometries': this.getGeometries().filter(function (geo) {\n          return geo && geo._toJSON;\n        }).map(function (geo) {\n          var json = geo._toJSON();\n          if (json.subType) {\n            return json;\n          }\n          return geo._exportGeoJSONGeometry();\n        })\n      }\n    };\n    var id = this.getId();\n    if (!isNil(id)) {\n      feature['id'] = id;\n    }\n    var properties;\n    if (isNil(options['properties']) || options['properties']) {\n      properties = this._exportProperties();\n    }\n    feature['properties'] = properties;\n    options.feature = feature;\n    return options;\n  };\n  _proto._clearProjection = function _clearProjection() {\n    if (this.isEmpty()) {\n      return;\n    }\n    var geometries = this.getGeometries();\n    for (var i = 0, l = geometries.length; i < l; i++) {\n      if (!geometries[i]) {\n        continue;\n      }\n      geometries[i]._clearProjection();\n    }\n  };\n  _proto._getConnectPoints = function _getConnectPoints() {\n    var extent = this.getExtent();\n    var anchors = [new Coordinate(extent.xmin, extent.ymax), new Coordinate(extent.xmax, extent.ymin), new Coordinate(extent.xmin, extent.ymin), new Coordinate(extent.xmax, extent.ymax)];\n    return anchors;\n  };\n  _proto._getExternalResources = function _getExternalResources() {\n    if (this.isEmpty()) {\n      return [];\n    }\n    var geometries = this.getGeometries(),\n      resources = [];\n    var cache = {};\n    var symbol, res, key;\n    for (var i = 0, l = geometries.length; i < l; i++) {\n      if (!geometries[i]) {\n        continue;\n      }\n      symbol = geometries[i]._getInternalSymbol();\n      res = getExternalResources(symbol);\n      for (var ii = 0, ll = res.length; ii < ll; ii++) {\n        key = res[ii].join();\n        if (!cache[key]) {\n          resources.push(res[ii]);\n          cache[key] = 1;\n        }\n      }\n    }\n    return resources;\n  };\n  _proto.startEdit = function startEdit(opts) {\n    var _this3 = this;\n    if (this.isEmpty()) {\n      return this;\n    }\n    if (!opts) {\n      opts = {};\n    }\n    if (opts['symbol']) {\n      this._originalSymbol = this.getSymbol();\n      this.setSymbol(opts['symbol']);\n    }\n    this._draggbleBeforeEdit = this.options['draggable'];\n    this.config('draggable', false);\n    var geometries = this.getGeometries();\n    for (var i = 0, l = geometries.length; i < l; i++) {\n      geometries[i].startEdit(opts);\n    }\n    this._editing = true;\n    var layer = this.getLayer();\n    var needShadow = layer && layer.options['renderer'] === 'canvas';\n    if (needShadow) {\n      this.hide();\n    }\n    setTimeout(function () {\n      _this3.fire('editstart');\n    }, 1);\n    return this;\n  };\n  _proto.endEdit = function endEdit() {\n    if (this.isEmpty()) {\n      return this;\n    }\n    var geometries = this.getGeometries();\n    for (var i = 0, l = geometries.length; i < l; i++) {\n      geometries[i].endEdit();\n    }\n    if (this._originalSymbol) {\n      this.setSymbol(this._originalSymbol);\n      delete this._originalSymbol;\n    }\n    this._editing = false;\n    this.show();\n    this.config('draggable', this._draggbleBeforeEdit);\n    this.fire('editend');\n    return this;\n  };\n  _proto.isEditing = function isEditing() {\n    if (!this._editing) {\n      return false;\n    }\n    return true;\n  };\n  return GeometryCollection;\n}(Geometry);\nGeometryCollection.registerJSONType('GeometryCollection');\nfunction computeExtent$1(projection, fn) {\n  if (this.isEmpty()) {\n    return null;\n  }\n  var extent = new Extent();\n  var geometries = this.getGeometries();\n  for (var i = 0, l = geometries.length; i < l; i++) {\n    if (!geometries[i]) {\n      continue;\n    }\n    var e = geometries[i][fn](projection);\n    if (e) {\n      extent._combine(e);\n    }\n  }\n  return extent;\n}\nvar MultiGeometry = function (_GeometryCollection) {\n  _inheritsLoose(MultiGeometry, _GeometryCollection);\n  function MultiGeometry(geoType, type, data, options) {\n    var _this;\n    _this = _GeometryCollection.call(this, null, options) || this;\n    _this.GeometryType = geoType;\n    _this.type = type;\n    _this._initData(data);\n    return _this;\n  }\n  var _proto = MultiGeometry.prototype;\n  _proto.getCoordinates = function getCoordinates() {\n    var coordinates = [];\n    var geometries = this.getGeometries();\n    for (var i = 0, l = geometries.length; i < l; i++) {\n      var child = geometries[i];\n      coordinates.push(child.getShell && child.getJSONType() !== 'Polygon' ? [child.getShell()] : child.getCoordinates());\n    }\n    return coordinates;\n  };\n  _proto.setCoordinates = function setCoordinates(coordinates) {\n    coordinates = coordinates || [];\n    var geometries = [];\n    for (var i = 0, l = coordinates.length; i < l; i++) {\n      var g = new this.GeometryType(coordinates[i], this.config());\n      geometries.push(g);\n    }\n    this.setGeometries(geometries);\n    return this;\n  };\n  _proto._initData = function _initData(data) {\n    data = data || [];\n    if (data.length) {\n      if (data[0] instanceof this.GeometryType) {\n        this.setGeometries(data);\n      } else {\n        this.setCoordinates(data);\n      }\n    }\n  };\n  _proto._checkGeo = function _checkGeo(geo) {\n    return geo instanceof this.GeometryType;\n  };\n  _proto._exportGeoJSONGeometry = function _exportGeoJSONGeometry() {\n    var points = this.getCoordinates();\n    var coordinates = Coordinate.toNumberArrays(points);\n    return {\n      'type': this.getType(),\n      'coordinates': coordinates\n    };\n  };\n  _proto._toJSON = function _toJSON(options) {\n    return {\n      'feature': this.toGeoJSON(options)\n    };\n  };\n  return MultiGeometry;\n}(GeometryCollection);\nvar MultiPoint = function (_MultiGeometry) {\n  _inheritsLoose(MultiPoint, _MultiGeometry);\n  function MultiPoint(data, opts) {\n    return _MultiGeometry.call(this, Marker, 'MultiPoint', data, opts) || this;\n  }\n  var _proto = MultiPoint.prototype;\n  _proto.findClosest = function findClosest(coordinate) {\n    if (!coordinate) {\n      return null;\n    }\n    var coords = this.getCoordinates();\n    var hit = null;\n    var max = Infinity;\n    coords.forEach(function (c) {\n      var dist = distanceTo(c, coordinate);\n      if (dist < max) {\n        hit = c;\n        max = dist;\n      }\n    });\n    return hit;\n  };\n  return MultiPoint;\n}(MultiGeometry);\nMultiPoint.registerJSONType('MultiPoint');\nfunction distanceTo(p0, p1) {\n  var x = p1.x - p0.x,\n    y = p1.y - p0.y;\n  return Math.sqrt(x * x + y * y);\n}\nvar MultiPath = function (_MultiGeometry) {\n  _inheritsLoose(MultiPath, _MultiGeometry);\n  function MultiPath() {\n    return _MultiGeometry.apply(this, arguments) || this;\n  }\n  var _proto = MultiPath.prototype;\n  _proto.getCenterInExtent = function getCenterInExtent(extent) {\n    var children = this.getGeometries();\n    var sumx = 0,\n      sumy = 0,\n      counter = 0;\n    children.forEach(function (l) {\n      var c = l.getCenterInExtent(extent);\n      if (c) {\n        sumx += c.x * c.count;\n        sumy += c.y * c.count;\n        counter += c.count;\n      }\n    });\n    if (counter === 0) {\n      return null;\n    }\n    return new Coordinate(sumx, sumy)._multi(1 / counter);\n  };\n  return MultiPath;\n}(MultiGeometry);\nvar MultiLineString = function (_MultiPath) {\n  _inheritsLoose(MultiLineString, _MultiPath);\n  function MultiLineString(data, options) {\n    return _MultiPath.call(this, LineString, 'MultiLineString', data, options) || this;\n  }\n  return MultiLineString;\n}(MultiPath);\nMultiLineString.registerJSONType('MultiLineString');\nvar MultiPolygon = function (_MultiPath) {\n  _inheritsLoose(MultiPolygon, _MultiPath);\n  function MultiPolygon(data, opts) {\n    return _MultiPath.call(this, Polygon, 'MultiPolygon', data, opts) || this;\n  }\n  return MultiPolygon;\n}(MultiPath);\nMultiPolygon.registerJSONType('MultiPolygon');\nvar types$1 = {\n  'Marker': Marker,\n  'LineString': LineString,\n  'Polygon': Polygon,\n  'MultiPoint': MultiPoint,\n  'MultiLineString': MultiLineString,\n  'MultiPolygon': MultiPolygon\n};\nvar GeoJSON = {\n  toGeometry: function toGeometry(geoJSON, foreachFn) {\n    if (isString(geoJSON)) {\n      geoJSON = parseJSON(geoJSON);\n    }\n    if (Array.isArray(geoJSON)) {\n      var resultGeos = [];\n      for (var i = 0, len = geoJSON.length; i < len; i++) {\n        var geo = GeoJSON._convert(geoJSON[i], foreachFn);\n        if (Array.isArray(geo)) {\n          pushIn(resultGeos, geo);\n        } else {\n          resultGeos.push(geo);\n        }\n      }\n      return resultGeos;\n    } else {\n      var resultGeo = GeoJSON._convert(geoJSON, foreachFn);\n      return resultGeo;\n    }\n  },\n  _convert: function _convert(json, foreachFn) {\n    if (!json || isNil(json['type'])) {\n      return null;\n    }\n    var type = json['type'];\n    if (type === 'Feature') {\n      var g = json['geometry'];\n      var geometry = GeoJSON._convert(g);\n      if (!geometry) {\n        return null;\n      }\n      geometry.setId(json['id']);\n      geometry.setProperties(json['properties']);\n      if (foreachFn) {\n        foreachFn(geometry);\n      }\n      return geometry;\n    } else if (type === 'FeatureCollection') {\n      var features = json['features'];\n      if (!features) {\n        return null;\n      }\n      return GeoJSON.toGeometry(features, foreachFn);\n    } else if (['Point', 'LineString', 'Polygon', 'MultiPoint', 'MultiLineString', 'MultiPolygon'].indexOf(type) >= 0) {\n      var clazz = type === 'Point' ? 'Marker' : type;\n      var result = new types$1[clazz](json['coordinates']);\n      if (foreachFn) {\n        foreachFn(result);\n      }\n      return result;\n    } else if (type === 'GeometryCollection') {\n      var geometries = json['geometries'];\n      if (!isArrayHasData(geometries)) {\n        var _result2 = new GeometryCollection();\n        if (foreachFn) {\n          foreachFn(_result2);\n        }\n        return _result2;\n      }\n      var mGeos = [];\n      var size = geometries.length;\n      for (var i = 0; i < size; i++) {\n        if (geometries[i].subType) {\n          mGeos.push(Geometry.getJSONClass(geometries[i].subType).fromJSON(geometries[i]));\n        } else {\n          mGeos.push(GeoJSON._convert(geometries[i]));\n        }\n      }\n      var _result = new GeometryCollection(mGeos);\n      if (foreachFn) {\n        foreachFn(_result);\n      }\n      return _result;\n    }\n    return null;\n  }\n};\nvar options$6 = {\n  'numberOfShellPoints': 60\n};\nvar Circle = function (_CenterMixin) {\n  _inheritsLoose(Circle, _CenterMixin);\n  Circle.fromJSON = function fromJSON(json) {\n    var feature = json['feature'];\n    var circle = new Circle(json['coordinates'], json['radius'], json['options']);\n    circle.setProperties(feature['properties']);\n    return circle;\n  };\n  function Circle(coordinates, radius, opts) {\n    var _this;\n    _this = _CenterMixin.call(this, null, opts) || this;\n    if (coordinates) {\n      _this.setCoordinates(coordinates);\n    }\n    _this._radius = radius;\n    return _this;\n  }\n  var _proto = Circle.prototype;\n  _proto.getRadius = function getRadius() {\n    return this._radius;\n  };\n  _proto.setRadius = function setRadius(radius) {\n    this._radius = radius;\n    this.onShapeChanged();\n    return this;\n  };\n  _proto.getShell = function getShell() {\n    var measurer = this._getMeasurer(),\n      center = this.getCoordinates(),\n      numberOfPoints = this.options['numberOfShellPoints'],\n      radius = this.getRadius();\n    var shell = [];\n    var rad, dx, dy;\n    for (var i = 0, len = numberOfPoints - 1; i < len; i++) {\n      rad = 360 * i / len * Math.PI / 180;\n      dx = radius * Math.cos(rad);\n      dy = radius * Math.sin(rad);\n      var vertex = measurer.locate(center, dx, dy);\n      shell.push(vertex);\n    }\n    shell.push(shell[0]);\n    return shell;\n  };\n  _proto.getHoles = function getHoles() {\n    return [];\n  };\n  _proto.animateShow = function animateShow() {\n    return this.show();\n  };\n  _proto._containsPoint = function _containsPoint(point, tolerance) {\n    var map = this.getMap();\n    if (map.getPitch()) {\n      return _CenterMixin.prototype._containsPoint.call(this, point, tolerance);\n    }\n    var center = map._pointToContainerPoint(this._getCenter2DPoint()),\n      size = this.getSize(),\n      t = this._hitTestTolerance() + (tolerance || 0),\n      se = center.add(size.width / 2, size.height / 2);\n    return withInEllipse(point, center, se, t);\n  };\n  _proto._computePrjExtent = function _computePrjExtent(projection) {\n    var minmax = this._getMinMax(projection);\n    if (!minmax) {\n      return null;\n    }\n    var pcenter = this._getPrjCoordinates();\n    var pminmax = minmax.map(function (c) {\n      return projection.project(c);\n    });\n    var leftx = pminmax[0].x - pcenter.x;\n    var rightx = pminmax[1].x - pcenter.x;\n    var topy = pminmax[2].y - pcenter.y;\n    var bottomy = pminmax[3].y - pcenter.y;\n    return new Extent(pcenter.add(leftx, topy), pcenter.add(rightx, bottomy));\n  };\n  _proto._computeExtent = function _computeExtent(measurer) {\n    var minmax = this._getMinMax(measurer);\n    if (!minmax) {\n      return null;\n    }\n    return new Extent(minmax[0].x, minmax[2].y, minmax[1].x, minmax[3].y, this._getProjection());\n  };\n  _proto._getMinMax = function _getMinMax(measurer) {\n    if (!measurer || !this._coordinates || isNil(this._radius)) {\n      return null;\n    }\n    var radius = this._radius;\n    var p1 = measurer.locate(this._coordinates, -radius, 0),\n      p2 = measurer.locate(this._coordinates, radius, 0),\n      p3 = measurer.locate(this._coordinates, 0, radius),\n      p4 = measurer.locate(this._coordinates, 0, -radius);\n    return [p1, p2, p3, p4];\n  };\n  _proto._computeGeodesicLength = function _computeGeodesicLength() {\n    if (isNil(this._radius)) {\n      return 0;\n    }\n    return Math.PI * 2 * this._radius;\n  };\n  _proto._computeGeodesicArea = function _computeGeodesicArea() {\n    if (isNil(this._radius)) {\n      return 0;\n    }\n    return Math.PI * Math.pow(this._radius, 2);\n  };\n  _proto._exportGeoJSONGeometry = function _exportGeoJSONGeometry() {\n    var coordinates = Coordinate.toNumberArrays([this.getShell()]);\n    return {\n      'type': 'Polygon',\n      'coordinates': coordinates\n    };\n  };\n  _proto._toJSON = function _toJSON(options) {\n    var center = this.getCenter();\n    var opts = extend({}, options);\n    opts.geometry = false;\n    var feature = this.toGeoJSON(opts);\n    feature['geometry'] = {\n      'type': 'Polygon'\n    };\n    return {\n      'feature': feature,\n      'subType': 'Circle',\n      'coordinates': [center.x, center.y],\n      'radius': this.getRadius()\n    };\n  };\n  return Circle;\n}(CenterMixin(Polygon));\nCircle.mergeOptions(options$6);\nCircle.registerJSONType('Circle');\nvar options$7 = {\n  'numberOfShellPoints': 80\n};\nvar Ellipse = function (_CenterMixin) {\n  _inheritsLoose(Ellipse, _CenterMixin);\n  Ellipse.fromJSON = function fromJSON(json) {\n    var feature = json['feature'];\n    var ellipse = new Ellipse(json['coordinates'], json['width'], json['height'], json['options']);\n    ellipse.setProperties(feature['properties']);\n    return ellipse;\n  };\n  function Ellipse(coordinates, width, height, opts) {\n    var _this;\n    _this = _CenterMixin.call(this, null, opts) || this;\n    if (coordinates) {\n      _this.setCoordinates(coordinates);\n    }\n    _this.width = width;\n    _this.height = height;\n    return _this;\n  }\n  var _proto = Ellipse.prototype;\n  _proto.getWidth = function getWidth() {\n    return this.width;\n  };\n  _proto.setWidth = function setWidth(width) {\n    this.width = width;\n    this.onShapeChanged();\n    return this;\n  };\n  _proto.getHeight = function getHeight() {\n    return this.height;\n  };\n  _proto.setHeight = function setHeight(height) {\n    this.height = height;\n    this.onShapeChanged();\n    return this;\n  };\n  _proto.getShell = function getShell() {\n    var measurer = this._getMeasurer(),\n      center = this.getCoordinates(),\n      numberOfPoints = this.options['numberOfShellPoints'],\n      width = this.getWidth(),\n      height = this.getHeight();\n    var shell = [];\n    var s = Math.pow(width / 2, 2) * Math.pow(height / 2, 2),\n      sx = Math.pow(width / 2, 2),\n      sy = Math.pow(height / 2, 2);\n    var deg, rad, dx, dy;\n    for (var i = 0; i < numberOfPoints; i++) {\n      deg = 360 * i / numberOfPoints;\n      rad = deg * Math.PI / 180;\n      dx = Math.sqrt(s / (sx * Math.pow(Math.tan(rad), 2) + sy));\n      dy = Math.sqrt(s / (sy * Math.pow(1 / Math.tan(rad), 2) + sx));\n      if (deg > 90 && deg < 270) {\n        dx *= -1;\n      }\n      if (deg > 180 && deg < 360) {\n        dy *= -1;\n      }\n      var vertex = measurer.locate(center, dx, dy);\n      shell.push(vertex);\n    }\n    return shell;\n  };\n  _proto.getHoles = function getHoles() {\n    return [];\n  };\n  _proto.animateShow = function animateShow() {\n    return this.show();\n  };\n  _proto._containsPoint = function _containsPoint(point, tolerance) {\n    var map = this.getMap();\n    if (map.isTransforming()) {\n      return _CenterMixin.prototype._containsPoint.call(this, point, tolerance);\n    }\n    var projection = map.getProjection();\n    var t = this._hitTestTolerance() + (tolerance || 0),\n      pps = projection.projectCoords([this._coordinates, map.locate(this._coordinates, this.getWidth() / 2, this.getHeight() / 2)], this.options['antiMeridian']),\n      p0 = map._prjToContainerPoint(pps[0]),\n      p1 = map._prjToContainerPoint(pps[1]);\n    return withInEllipse(point, p0, p1, t);\n  };\n  _proto._computePrjExtent = function _computePrjExtent() {\n    return Circle.prototype._computePrjExtent.apply(this, arguments);\n  };\n  _proto._computeExtent = function _computeExtent() {\n    return Circle.prototype._computeExtent.apply(this, arguments);\n  };\n  _proto._getMinMax = function _getMinMax(measurer) {\n    if (!measurer || !this._coordinates || isNil(this.width) || isNil(this.height)) {\n      return null;\n    }\n    var width = this.getWidth(),\n      height = this.getHeight();\n    var p1 = measurer.locate(this._coordinates, -width / 2, 0),\n      p2 = measurer.locate(this._coordinates, width / 2, 0),\n      p3 = measurer.locate(this._coordinates, 0, -height / 2),\n      p4 = measurer.locate(this._coordinates, 0, height / 2);\n    return [p1, p2, p3, p4];\n  };\n  _proto._computeGeodesicLength = function _computeGeodesicLength() {\n    if (isNil(this.width) || isNil(this.height)) {\n      return 0;\n    }\n    var longer = this.width > this.height ? this.width : this.height;\n    return 2 * Math.PI * longer / 2 - 4 * Math.abs(this.width - this.height);\n  };\n  _proto._computeGeodesicArea = function _computeGeodesicArea() {\n    if (isNil(this.width) || isNil(this.height)) {\n      return 0;\n    }\n    return Math.PI * this.width * this.height / 4;\n  };\n  _proto._exportGeoJSONGeometry = function _exportGeoJSONGeometry() {\n    var coordinates = Coordinate.toNumberArrays([this.getShell()]);\n    return {\n      'type': 'Polygon',\n      'coordinates': coordinates\n    };\n  };\n  _proto._toJSON = function _toJSON(options) {\n    var opts = extend({}, options);\n    var center = this.getCenter();\n    opts.geometry = false;\n    var feature = this.toGeoJSON(opts);\n    feature['geometry'] = {\n      'type': 'Polygon'\n    };\n    return {\n      'feature': feature,\n      'subType': 'Ellipse',\n      'coordinates': [center.x, center.y],\n      'width': this.getWidth(),\n      'height': this.getHeight()\n    };\n  };\n  return Ellipse;\n}(CenterMixin(Polygon));\nEllipse.mergeOptions(options$7);\nEllipse.registerJSONType('Ellipse');\nvar Rectangle = function (_Polygon) {\n  _inheritsLoose(Rectangle, _Polygon);\n  Rectangle.fromJSON = function fromJSON(json) {\n    var feature = json['feature'];\n    var rect = new Rectangle(json['coordinates'], json['width'], json['height'], json['options']);\n    rect.setProperties(feature['properties']);\n    return rect;\n  };\n  function Rectangle(coordinates, width, height, opts) {\n    var _this;\n    _this = _Polygon.call(this, null, opts) || this;\n    if (coordinates) {\n      _this.setCoordinates(coordinates);\n    }\n    _this._width = width;\n    _this._height = height;\n    return _this;\n  }\n  var _proto = Rectangle.prototype;\n  _proto.getCoordinates = function getCoordinates() {\n    return this._coordinates;\n  };\n  _proto.setCoordinates = function setCoordinates(nw) {\n    this._coordinates = nw instanceof Coordinate ? nw : new Coordinate(nw);\n    if (!this._coordinates || !this.getMap()) {\n      this.onPositionChanged();\n      return this;\n    }\n    var projection = this._getProjection();\n    this._setPrjCoordinates(projection.project(this._coordinates));\n    return this;\n  };\n  _proto.getWidth = function getWidth() {\n    return this._width;\n  };\n  _proto.setWidth = function setWidth(width) {\n    this._width = width;\n    this.onShapeChanged();\n    return this;\n  };\n  _proto.getHeight = function getHeight() {\n    return this._height;\n  };\n  _proto.setHeight = function setHeight(height) {\n    this._height = height;\n    this.onShapeChanged();\n    return this;\n  };\n  _proto.getShell = function getShell() {\n    var measurer = this._getMeasurer();\n    var nw = this._coordinates;\n    var map = this.getMap();\n    var sx = 1,\n      sy = -1;\n    if (map) {\n      var fExt = map.getFullExtent();\n      if (fExt['left'] > fExt['right']) {\n        sx = -1;\n      }\n      if (fExt['bottom'] > fExt['top']) {\n        sy = 1;\n      }\n    }\n    var points = [];\n    points.push(nw);\n    points.push(measurer.locate(nw, sx * this._width, 0));\n    points.push(measurer.locate(nw, sx * this._width, sy * this._height));\n    points.push(measurer.locate(nw, 0, sy * this._height));\n    points.push(nw);\n    return points;\n  };\n  _proto.getHoles = function getHoles() {\n    return [];\n  };\n  _proto.animateShow = function animateShow() {\n    return this.show();\n  };\n  _proto._getPrjCoordinates = function _getPrjCoordinates() {\n    var projection = this._getProjection();\n    this._verifyProjection();\n    if (!this._pnw && projection) {\n      if (this._coordinates) {\n        this._pnw = projection.project(this._coordinates);\n      }\n    }\n    return this._pnw;\n  };\n  _proto._setPrjCoordinates = function _setPrjCoordinates(pnw) {\n    this._pnw = pnw;\n    this.onPositionChanged();\n  };\n  _proto._getPrjShell = function _getPrjShell() {\n    var shell = _Polygon.prototype._getPrjShell.call(this);\n    var projection = this._getProjection();\n    if (!projection.isSphere()) {\n      return shell;\n    }\n    var sphereExtent = projection.getSphereExtent(),\n      sx = sphereExtent.sx,\n      sy = sphereExtent.sy;\n    var circum = this._getProjection().getCircum();\n    var nw = shell[0];\n    for (var i = 1, l = shell.length; i < l; i++) {\n      var p = shell[i];\n      var dx = 0,\n        dy = 0;\n      if (sx * (nw.x - p.x) > 0) {\n        dx = circum.x * sx;\n      }\n      if (sy * (nw.y - p.y) < 0) {\n        dy = circum.y * sy;\n      }\n      shell[i]._add(dx, dy);\n    }\n    return shell;\n  };\n  _proto._updateCache = function _updateCache() {\n    this._clearCache();\n    var projection = this._getProjection();\n    if (this._pnw && projection) {\n      this._coordinates = projection.unproject(this._pnw);\n    }\n  };\n  _proto._clearProjection = function _clearProjection() {\n    this._pnw = null;\n    _Polygon.prototype._clearProjection.call(this);\n  };\n  _proto._computeCenter = function _computeCenter(measurer) {\n    return measurer.locate(this._coordinates, this._width / 2, -this._height / 2);\n  };\n  _proto._containsPoint = function _containsPoint(point, tolerance) {\n    var map = this.getMap();\n    if (map.isTransforming()) {\n      return _Polygon.prototype._containsPoint.call(this, point, tolerance);\n    }\n    var t = isNil(tolerance) ? this._hitTestTolerance() : tolerance,\n      r = map._getResolution() * t;\n    var extent = this._getPrjExtent().expand(r);\n    var p = map._containerPointToPrj(point);\n    return extent.contains(p);\n  };\n  _proto._computePrjExtent = function _computePrjExtent(projection) {\n    var se = this._getSouthEast(projection);\n    if (!se) {\n      return null;\n    }\n    var prjs = projection.projectCoords([new Coordinate(this._coordinates.x, se.y), new Coordinate(se.x, this._coordinates.y)], this.options['antiMeridian']);\n    return new Extent(prjs[0], prjs[1]);\n  };\n  _proto._computeExtent = function _computeExtent(measurer) {\n    var se = this._getSouthEast(measurer);\n    if (!se) {\n      return null;\n    }\n    return new Extent(this._coordinates, se, this._getProjection());\n  };\n  _proto._getSouthEast = function _getSouthEast(measurer) {\n    if (!measurer || !this._coordinates || isNil(this._width) || isNil(this._height)) {\n      return null;\n    }\n    var width = this.getWidth(),\n      height = this.getHeight();\n    var w = width,\n      h = -height;\n    if (measurer.fullExtent) {\n      var fullExtent = measurer.fullExtent,\n        sx = fullExtent.right > fullExtent.left ? 1 : -1,\n        sy = fullExtent.top > fullExtent.bottom ? 1 : -1;\n      w *= sx;\n      h *= sy;\n    }\n    var rightPoint = measurer.locate(this._coordinates, w, 0);\n    var bottomPoint = measurer.locate(this._coordinates, 0, h);\n    rightPoint.y = bottomPoint.y;\n    return rightPoint;\n  };\n  _proto._computeGeodesicLength = function _computeGeodesicLength() {\n    if (isNil(this._width) || isNil(this._height)) {\n      return 0;\n    }\n    return 2 * (this._width + this._height);\n  };\n  _proto._computeGeodesicArea = function _computeGeodesicArea() {\n    if (isNil(this._width) || isNil(this._height)) {\n      return 0;\n    }\n    return this._width * this._height;\n  };\n  _proto._exportGeoJSONGeometry = function _exportGeoJSONGeometry() {\n    var coordinates = Coordinate.toNumberArrays([this.getShell()]);\n    return {\n      'type': 'Polygon',\n      'coordinates': coordinates\n    };\n  };\n  _proto._toJSON = function _toJSON(options) {\n    var opts = extend({}, options);\n    var nw = this.getCoordinates();\n    opts.geometry = false;\n    var feature = this.toGeoJSON(opts);\n    feature['geometry'] = {\n      'type': 'Polygon'\n    };\n    return {\n      'feature': feature,\n      'subType': 'Rectangle',\n      'coordinates': [nw.x, nw.y],\n      'width': this.getWidth(),\n      'height': this.getHeight()\n    };\n  };\n  return Rectangle;\n}(Polygon);\nRectangle.registerJSONType('Rectangle');\nvar options$8 = {\n  'numberOfShellPoints': 60\n};\nvar Sector = function (_Circle) {\n  _inheritsLoose(Sector, _Circle);\n  Sector.fromJSON = function fromJSON(json) {\n    var feature = json['feature'];\n    var sector = new Sector(json['coordinates'], json['radius'], json['startAngle'], json['endAngle'], json['options']);\n    sector.setProperties(feature['properties']);\n    return sector;\n  };\n  function Sector(coordinates, radius, startAngle, endAngle, opts) {\n    var _this;\n    _this = _Circle.call(this, coordinates, radius, opts) || this;\n    _this.startAngle = startAngle;\n    _this.endAngle = endAngle;\n    return _this;\n  }\n  var _proto = Sector.prototype;\n  _proto.getStartAngle = function getStartAngle() {\n    return this.startAngle;\n  };\n  _proto.setStartAngle = function setStartAngle(startAngle) {\n    this.startAngle = startAngle;\n    this.onShapeChanged();\n    return this;\n  };\n  _proto.getEndAngle = function getEndAngle() {\n    return this.endAngle;\n  };\n  _proto.setEndAngle = function setEndAngle(endAngle) {\n    this.endAngle = endAngle;\n    this.onShapeChanged();\n    return this;\n  };\n  _proto.getShell = function getShell() {\n    var measurer = this._getMeasurer(),\n      center = this.getCoordinates(),\n      numberOfPoints = this.options['numberOfShellPoints'] - 2,\n      radius = this.getRadius(),\n      shell = [center.copy()],\n      startAngle = this.getStartAngle(),\n      angle = this.getEndAngle() - startAngle;\n    var rad, dx, dy;\n    for (var i = 0; i < numberOfPoints; i++) {\n      rad = (angle * i / (numberOfPoints - 1) + startAngle) * Math.PI / 180;\n      dx = radius * Math.cos(rad);\n      dy = radius * Math.sin(rad);\n      var vertex = measurer.locate(center, dx, dy);\n      shell.push(vertex);\n    }\n    shell.push(center.copy());\n    return shell;\n  };\n  _proto._containsPoint = function _containsPoint(point, tolerance) {\n    var map = this.getMap();\n    if (map.isTransforming()) {\n      return _Circle.prototype._containsPoint.call(this, point, tolerance);\n    }\n    var center = map._pointToContainerPoint(this._getCenter2DPoint()),\n      t = this._hitTestTolerance() + (tolerance || 0),\n      size = this.getSize(),\n      pc = center,\n      pp = point,\n      x = pp.x - pc.x,\n      y = pc.y - pp.y,\n      atan2 = Math.atan2(y, x),\n      angle = atan2 < 0 ? (atan2 + 2 * Math.PI) * 360 / (2 * Math.PI) : atan2 * 360 / (2 * Math.PI);\n    var sAngle = this.startAngle % 360,\n      eAngle = this.endAngle % 360;\n    var between = false;\n    if (sAngle > eAngle) {\n      between = !(angle > eAngle && angle < sAngle);\n    } else {\n      between = angle >= sAngle && angle <= eAngle;\n    }\n    return pp.distanceTo(pc) <= size.width / 2 + t && between;\n  };\n  _proto._computeGeodesicLength = function _computeGeodesicLength() {\n    if (isNil(this._radius)) {\n      return 0;\n    }\n    return Math.PI * 2 * this._radius * Math.abs(this.startAngle - this.endAngle) / 360 + 2 * this._radius;\n  };\n  _proto._computeGeodesicArea = function _computeGeodesicArea() {\n    if (isNil(this._radius)) {\n      return 0;\n    }\n    return Math.PI * Math.pow(this._radius, 2) * Math.abs(this.startAngle - this.endAngle) / 360;\n  };\n  _proto._toJSON = function _toJSON(options) {\n    var opts = extend({}, options);\n    var center = this.getCenter();\n    opts.geometry = false;\n    var feature = this.toGeoJSON(opts);\n    feature['geometry'] = {\n      'type': 'Polygon'\n    };\n    return {\n      'feature': feature,\n      'subType': 'Sector',\n      'coordinates': [center.x, center.y],\n      'radius': this.getRadius(),\n      'startAngle': this.getStartAngle(),\n      'endAngle': this.getEndAngle()\n    };\n  };\n  return Sector;\n}(Circle);\nSector.mergeOptions(options$8);\nSector.registerJSONType('Sector');\nvar options$9 = {\n  'enableSimplify': false,\n  'enableClip': false\n};\nvar Curve = function (_LineString) {\n  _inheritsLoose(Curve, _LineString);\n  function Curve() {\n    return _LineString.apply(this, arguments) || this;\n  }\n  var _proto = Curve.prototype;\n  _proto._arc = function _arc(ctx, points, lineOpacity) {\n    var degree = this.options['arcDegree'] * Math.PI / 180;\n    for (var i = 1, l = points.length; i < l; i++) {\n      var c = Canvas._arcBetween(ctx, points[i - 1], points[i], degree);\n      var ctrlPoint = [points[i - 1].x + points[i].x - c[0], points[i - 1].y + points[i].y - c[1]];\n      points[i - 1].nextCtrlPoint = ctrlPoint;\n      points[i].prevCtrlPoint = ctrlPoint;\n      Canvas._stroke(ctx, lineOpacity);\n    }\n  };\n  _proto._quadraticCurve = function _quadraticCurve(ctx, points) {\n    if (points.length <= 2) {\n      Canvas._path(ctx, points);\n      return;\n    }\n    var i, l;\n    for (i = 2, l = points.length; i < l; i += 2) {\n      ctx.quadraticCurveTo(points[i - 1].x, points[i - 1].y, points[i].x, points[i].y);\n    }\n    i -= 1;\n    if (i < l) {\n      for (; i < l; i++) {\n        ctx.lineTo(points[i].x, points[i].y);\n      }\n    }\n  };\n  _proto._bezierCurve = function _bezierCurve(ctx, points) {\n    if (points.length <= 3) {\n      Canvas._path(ctx, points);\n      return;\n    }\n    var i, l;\n    for (i = 1, l = points.length; i + 2 < l; i += 3) {\n      ctx.bezierCurveTo(points[i].x, points[i].y, points[i + 1].x, points[i + 1].y, points[i + 2].x, points[i + 2].y);\n    }\n    if (i < l) {\n      for (; i < l; i++) {\n        ctx.lineTo(points[i].x, points[i].y);\n      }\n    }\n  };\n  _proto._getCurveArrowPoints = function _getCurveArrowPoints(arrows, segments, lineWidth, arrowStyle, tolerance, step) {\n    var l = segments.length;\n    var i;\n    for (i = step; i < l; i += step) {\n      var arrow = this._getArrowShape(segments[i - 1], segments[i], lineWidth, arrowStyle, tolerance);\n      if (arrow) {\n        arrows.push(arrow);\n      }\n    }\n    i -= step;\n    if (i < l - 1) {\n      for (i += 1; i < l; i++) {\n        var _arrow = this._getArrowShape(segments[i - 1], segments[i], lineWidth, arrowStyle, tolerance);\n        if (_arrow) {\n          arrows.push(_arrow);\n        }\n      }\n    }\n  };\n  return Curve;\n}(LineString);\nCurve.mergeOptions(options$9);\nvar options$a = {\n  'arcDegree': 90\n};\nvar ArcCurve = function (_Curve) {\n  _inheritsLoose(ArcCurve, _Curve);\n  function ArcCurve() {\n    return _Curve.apply(this, arguments) || this;\n  }\n  var _proto = ArcCurve.prototype;\n  _proto._toJSON = function _toJSON(options) {\n    return {\n      'feature': this.toGeoJSON(options),\n      'subType': 'ArcCurve'\n    };\n  };\n  _proto._paintOn = function _paintOn(ctx, points, lineOpacity) {\n    ctx.beginPath();\n    this._arc(ctx, points, lineOpacity);\n    Canvas._stroke(ctx, lineOpacity);\n    this._paintArrow(ctx, points, lineOpacity);\n  };\n  ArcCurve.fromJSON = function fromJSON(json) {\n    var feature = json['feature'];\n    var arc = new ArcCurve(feature['geometry']['coordinates'], json['options']);\n    arc.setProperties(feature['properties']);\n    return arc;\n  };\n  return ArcCurve;\n}(Curve);\nArcCurve.registerJSONType('ArcCurve');\nArcCurve.mergeOptions(options$a);\nvar CubicBezierCurve = function (_Curve) {\n  _inheritsLoose(CubicBezierCurve, _Curve);\n  function CubicBezierCurve() {\n    return _Curve.apply(this, arguments) || this;\n  }\n  CubicBezierCurve.fromJSON = function fromJSON(json) {\n    var feature = json['feature'];\n    var curve = new CubicBezierCurve(feature['geometry']['coordinates'], json['options']);\n    curve.setProperties(feature['properties']);\n    return curve;\n  };\n  var _proto = CubicBezierCurve.prototype;\n  _proto._toJSON = function _toJSON(options) {\n    return {\n      'feature': this.toGeoJSON(options),\n      'subType': 'CubicBezierCurve'\n    };\n  };\n  _proto._paintOn = function _paintOn(ctx, points, lineOpacity) {\n    ctx.beginPath();\n    ctx.moveTo(points[0].x, points[0].y);\n    this._bezierCurve(ctx, points);\n    Canvas._stroke(ctx, lineOpacity);\n    this._paintArrow(ctx, points, lineOpacity);\n  };\n  _proto._getArrowPoints = function _getArrowPoints(arrows, segments, lineWidth, arrowStyle, tolerance) {\n    return this._getCurveArrowPoints(arrows, segments, lineWidth, arrowStyle, tolerance, 3);\n  };\n  return CubicBezierCurve;\n}(Curve);\nCubicBezierCurve.registerJSONType('CubicBezierCurve');\nvar QuadBezierCurve = function (_Curve) {\n  _inheritsLoose(QuadBezierCurve, _Curve);\n  function QuadBezierCurve() {\n    return _Curve.apply(this, arguments) || this;\n  }\n  QuadBezierCurve.fromJSON = function fromJSON(json) {\n    var feature = json['feature'];\n    var curve = new QuadBezierCurve(feature['geometry']['coordinates'], json['options']);\n    curve.setProperties(feature['properties']);\n    return curve;\n  };\n  var _proto = QuadBezierCurve.prototype;\n  _proto._toJSON = function _toJSON(options) {\n    return {\n      'feature': this.toGeoJSON(options),\n      'subType': 'QuadBezierCurve'\n    };\n  };\n  _proto._paintOn = function _paintOn(ctx, points, lineOpacity) {\n    ctx.beginPath();\n    ctx.moveTo(points[0].x, points[0].y);\n    this._quadraticCurve(ctx, points, lineOpacity);\n    Canvas._stroke(ctx, lineOpacity);\n    this._paintArrow(ctx, points, lineOpacity);\n  };\n  _proto._getArrowPoints = function _getArrowPoints(arrows, segments, lineWidth, arrowStyle, tolerance) {\n    return this._getCurveArrowPoints(arrows, segments, lineWidth, arrowStyle, tolerance, 2);\n  };\n  return QuadBezierCurve;\n}(Curve);\nQuadBezierCurve.registerJSONType('QuadBezierCurve');\nvar defaultSymbol$1 = {\n  'textFaceName': 'monospace',\n  'textSize': 12,\n  'textLineSpacing': 8,\n  'textWrapCharacter': '\\n',\n  'textHorizontalAlignment': 'middle',\n  'textVerticalAlignment': 'middle'\n};\nvar defaultBoxSymbol = {\n  'markerType': 'square',\n  'markerLineColor': '#000',\n  'markerLineWidth': 2,\n  'markerLineOpacity': 1,\n  'markerFill': '#fff',\n  'markerOpacity': 1\n};\nvar TextMarker = function (_Marker) {\n  _inheritsLoose(TextMarker, _Marker);\n  function TextMarker() {\n    return _Marker.apply(this, arguments) || this;\n  }\n  var _proto = TextMarker.prototype;\n  _proto.getContent = function getContent() {\n    return this._content;\n  };\n  _proto.setContent = function setContent(content) {\n    var old = this._content;\n    this._content = escapeSpecialChars(content);\n    this._refresh();\n    this._fireEvent('contentchange', {\n      'old': old,\n      'new': content\n    });\n    return this;\n  };\n  _proto.onAdd = function onAdd() {\n    this._refresh();\n  };\n  _proto.toJSON = function toJSON() {\n    var json = _Marker.prototype.toJSON.call(this);\n    delete json['symbol'];\n    return json;\n  };\n  _proto.setSymbol = function setSymbol(symbol) {\n    if (this._refreshing || !symbol) {\n      return _Marker.prototype.setSymbol.call(this, symbol);\n    }\n    var s = this._parseSymbol(symbol);\n    if (this.setTextStyle) {\n      var style = this.getTextStyle() || {};\n      style.symbol = s[0];\n      this.setTextStyle(style);\n    } else if (this.setTextSymbol) {\n      this.setTextSymbol(s[0]);\n    }\n    if (this.setBoxStyle) {\n      var _style = this.getBoxStyle() || {};\n      _style.symbol = s[1];\n      this.setBoxStyle(_style);\n    } else if (this.setBoxSymbol) {\n      this.setBoxSymbol(s[1]);\n    }\n    return this;\n  };\n  _proto._parseSymbol = function _parseSymbol(symbol) {\n    var t = {};\n    var b = {};\n    for (var p in symbol) {\n      if (hasOwn(symbol, p)) {\n        if (p.indexOf('text') === 0) {\n          t[p] = symbol[p];\n        } else {\n          b[p] = symbol[p];\n        }\n      }\n    }\n    return [t, b];\n  };\n  _proto._getTextSize = function _getTextSize(symbol) {\n    return splitTextToRow(this._content, symbol)['size'];\n  };\n  _proto._getInternalSymbol = function _getInternalSymbol() {\n    return this._symbol;\n  };\n  _proto._getDefaultTextSymbol = function _getDefaultTextSymbol() {\n    return extend({}, defaultSymbol$1);\n  };\n  _proto._getDefaultBoxSymbol = function _getDefaultBoxSymbol() {\n    return extend({}, defaultBoxSymbol);\n  };\n  _proto._getDefaultPadding = function _getDefaultPadding() {\n    return [12, 8];\n  };\n  return TextMarker;\n}(Marker);\nvar options$b = {\n  'textStyle': {\n    'wrap': true,\n    'padding': [12, 8],\n    'verticalAlignment': 'middle',\n    'horizontalAlignment': 'middle'\n  },\n  'boxSymbol': null\n};\nvar TextBox = function (_TextMarker) {\n  _inheritsLoose(TextBox, _TextMarker);\n  function TextBox(content, coordinates, width, height, options) {\n    var _this;\n    if (options === void 0) {\n      options = {};\n    }\n    _this = _TextMarker.call(this, coordinates, options) || this;\n    _this._content = escapeSpecialChars(content);\n    _this._width = isNil(width) ? 100 : width;\n    _this._height = isNil(height) ? 40 : height;\n    if (options.boxSymbol) {\n      _this.setBoxSymbol(options.boxSymbol);\n    }\n    if (options.textStyle) {\n      _this.setTextStyle(options.textStyle);\n    }\n    _this._refresh();\n    return _this;\n  }\n  var _proto = TextBox.prototype;\n  _proto.getWidth = function getWidth() {\n    return this._width;\n  };\n  _proto.setWidth = function setWidth(width) {\n    this._width = width;\n    this._refresh();\n    return this;\n  };\n  _proto.getHeight = function getHeight() {\n    return this._height;\n  };\n  _proto.setHeight = function setHeight(height) {\n    this._height = height;\n    this._refresh();\n    return this;\n  };\n  _proto.getBoxSymbol = function getBoxSymbol() {\n    return extend({}, this.options.boxSymbol);\n  };\n  _proto.setBoxSymbol = function setBoxSymbol(symbol) {\n    this.options.boxSymbol = symbol ? extend({}, symbol) : symbol;\n    if (this.getSymbol()) {\n      this._refresh();\n    }\n    return this;\n  };\n  _proto.getTextStyle = function getTextStyle() {\n    if (!this.options.textStyle) {\n      return null;\n    }\n    return extend({}, this.options.textStyle);\n  };\n  _proto.setTextStyle = function setTextStyle(style) {\n    this.options.textStyle = style ? extend({}, style) : style;\n    if (this.getSymbol()) {\n      this._refresh();\n    }\n    return this;\n  };\n  TextBox.fromJSON = function fromJSON(json) {\n    var feature = json['feature'];\n    var textBox = new TextBox(json['content'], feature['geometry']['coordinates'], json['width'], json['height'], json['options']);\n    textBox.setProperties(feature['properties']);\n    textBox.setId(feature['id']);\n    if (json['symbol']) {\n      textBox.setSymbol(json['symbol']);\n    }\n    return textBox;\n  };\n  _proto._toJSON = function _toJSON(options) {\n    return {\n      'feature': this.toGeoJSON(options),\n      'width': this.getWidth(),\n      'height': this.getHeight(),\n      'subType': 'TextBox',\n      'content': this._content\n    };\n  };\n  _proto._refresh = function _refresh() {\n    var textStyle = this.getTextStyle() || {},\n      padding = textStyle['padding'] || [12, 8];\n    var maxWidth, maxHeight;\n    if (isFunctionDefinition(this._width)) {\n      maxWidth = JSON.parse(JSON.stringify(this._width));\n      var stops = maxWidth.stops;\n      if (stops) {\n        for (var i = 0; i < stops.length; i++) {\n          stops[i][1] = stops[i][1] - 2 * padding[0];\n        }\n      }\n    } else {\n      maxWidth = this._width - 2 * padding[0];\n    }\n    if (isFunctionDefinition(this._height)) {\n      maxHeight = JSON.parse(JSON.stringify(this._height));\n      var _stops = maxHeight.stops;\n      if (_stops) {\n        for (var _i = 0; _i < _stops.length; _i++) {\n          _stops[_i][1] = _stops[_i][1] - 2 * padding[1];\n        }\n      }\n    } else {\n      maxHeight = this._height - 2 * padding[1];\n    }\n    var symbol = extend({}, textStyle.symbol || this._getDefaultTextSymbol(), this.options.boxSymbol || this._getDefaultBoxSymbol(), {\n      'textName': this._content,\n      'markerWidth': this._width,\n      'markerHeight': this._height,\n      'textHorizontalAlignment': 'middle',\n      'textVerticalAlignment': 'middle',\n      'textMaxWidth': maxWidth,\n      'textMaxHeight': maxHeight\n    });\n    if (textStyle['wrap'] && !symbol['textWrapWidth']) {\n      symbol['textWrapWidth'] = maxWidth;\n    }\n    var hAlign = textStyle['horizontalAlignment'];\n    symbol['textDx'] = symbol['markerDx'] || 0;\n    var offsetX;\n    if (isFunctionDefinition(this._width)) {\n      offsetX = JSON.parse(JSON.stringify(this._width));\n      var _stops2 = offsetX.stops;\n      if (_stops2) {\n        for (var _i2 = 0; _i2 < _stops2.length; _i2++) {\n          _stops2[_i2][1] = _stops2[_i2][1] / 2 - padding[0];\n          if (hAlign === 'left') {\n            _stops2[_i2][1] *= -1;\n          }\n        }\n      }\n    } else {\n      offsetX = symbol['markerWidth'] / 2 - padding[0];\n      if (hAlign === 'left') {\n        offsetX *= -1;\n      }\n    }\n    if (hAlign === 'left') {\n      symbol['textHorizontalAlignment'] = 'right';\n      symbol['textDx'] = offsetX;\n    } else if (hAlign === 'right') {\n      symbol['textHorizontalAlignment'] = 'left';\n      symbol['textDx'] = offsetX;\n    }\n    var vAlign = textStyle['verticalAlignment'];\n    symbol['textDy'] = symbol['markerDy'] || 0;\n    var offsetY;\n    if (isFunctionDefinition(this._height)) {\n      offsetY = JSON.parse(JSON.stringify(this._height));\n      var _stops3 = offsetY.stops;\n      if (_stops3) {\n        for (var _i3 = 0; _i3 < _stops3.length; _i3++) {\n          _stops3[_i3][1] = _stops3[_i3][1] / 2 - padding[1];\n          if (vAlign === 'top') {\n            _stops3[_i3][1] *= -1;\n          }\n        }\n      }\n    } else {\n      offsetY = symbol['markerHeight'] / 2 - padding[1];\n      if (vAlign === 'top') {\n        offsetY *= -1;\n      }\n    }\n    if (vAlign === 'top') {\n      symbol['textVerticalAlignment'] = 'bottom';\n      symbol['textDy'] = offsetY;\n    } else if (vAlign === 'bottom') {\n      symbol['textVerticalAlignment'] = 'top';\n      symbol['textDy'] = offsetY;\n    }\n    this._refreshing = true;\n    this.updateSymbol(symbol);\n    delete this._refreshing;\n  };\n  _proto.startEdit = function startEdit(opts) {\n    var symbol = this._getCompiledSymbol();\n    if (isFunctionDefinition(this._width)) {\n      var markerWidth = symbol['markerWidth'];\n      this._oldWidth = this._width;\n      this.setWidth(markerWidth);\n    }\n    if (isFunctionDefinition(this._height)) {\n      var markerHeight = symbol['markerHeight'];\n      this._oldHeight = this._height;\n      this.setHeight(markerHeight);\n    }\n    _TextMarker.prototype.startEdit.call(this, opts);\n  };\n  _proto.endEdit = function endEdit() {\n    var map = this.getMap();\n    var zoom = map && map.getZoom();\n    if (this._oldWidth) {\n      var markerWidth = this._width;\n      var widthFn = interpolated(this._oldWidth);\n      var oldExpectedWidth = widthFn(zoom);\n      var scale = markerWidth / oldExpectedWidth;\n      var stops = this._oldWidth.stops;\n      for (var i = 0; i < stops.length; i++) {\n        stops[i][1] *= scale;\n      }\n      this.setWidth(this._oldWidth);\n      delete this._oldWidth;\n    }\n    if (this._oldHeight) {\n      var markerHeight = this._height;\n      var heightFn = interpolated(this._oldHeight);\n      var oldExpectedHeight = heightFn(zoom);\n      var _scale = markerHeight / oldExpectedHeight;\n      var _stops4 = this._oldHeight.stops;\n      for (var _i4 = 0; _i4 < _stops4.length; _i4++) {\n        _stops4[_i4][1] *= _scale;\n      }\n      this.setHeight(this._oldHeight);\n      delete this._oldHeight;\n    }\n    _TextMarker.prototype.endEdit.call(this);\n  };\n  return TextBox;\n}(TextMarker);\nTextBox.mergeOptions(options$b);\nTextBox.registerJSONType('TextBox');\nvar options$c = {\n  'boxStyle': null,\n  textSymbol: null\n};\nvar Label = function (_TextMarker) {\n  _inheritsLoose(Label, _TextMarker);\n  function Label(content, coordinates, options) {\n    var _this;\n    if (options === void 0) {\n      options = {};\n    }\n    _this = _TextMarker.call(this, coordinates, options) || this;\n    if (options.textSymbol) {\n      _this.setTextSymbol(options.textSymbol);\n    }\n    if (options.boxStyle) {\n      _this.setBoxStyle(options.boxStyle);\n    }\n    _this._content = escapeSpecialChars(content);\n    _this._refresh();\n    return _this;\n  }\n  var _proto = Label.prototype;\n  _proto.getBoxStyle = function getBoxStyle() {\n    if (!this.options.boxStyle) {\n      return null;\n    }\n    return extend({}, this.options.boxStyle);\n  };\n  _proto.setBoxStyle = function setBoxStyle(style) {\n    this.options.boxStyle = style ? extend({}, style) : style;\n    this._refresh();\n    return this;\n  };\n  _proto.getTextSymbol = function getTextSymbol() {\n    return extend({}, this._getDefaultTextSymbol(), this.options.textSymbol);\n  };\n  _proto.setTextSymbol = function setTextSymbol(symbol) {\n    this.options.textSymbol = symbol ? extend({}, symbol) : symbol;\n    this._refresh();\n    return this;\n  };\n  Label.fromJSON = function fromJSON(json) {\n    var feature = json['feature'];\n    var label = new Label(json['content'], feature['geometry']['coordinates'], json['options']);\n    label.setProperties(feature['properties']);\n    label.setId(feature['id']);\n    if (json['symbol']) {\n      label.setSymbol(json['symbol']);\n    }\n    return label;\n  };\n  _proto._canEdit = function _canEdit() {\n    return false;\n  };\n  _proto._toJSON = function _toJSON(options) {\n    return {\n      'feature': this.toGeoJSON(options),\n      'subType': 'Label',\n      'content': this._content\n    };\n  };\n  _proto._refresh = function _refresh() {\n    var symbol = extend({}, this.getTextSymbol(), {\n      'textName': this._content\n    });\n    var boxStyle = this.getBoxStyle();\n    if (boxStyle) {\n      extend(symbol, boxStyle.symbol);\n      var sizes = this._getBoxSize(symbol),\n        textSize = sizes[1],\n        padding = boxStyle['padding'] || this._getDefaultPadding();\n      var boxSize = sizes[0];\n      symbol['markerWidth'] = boxSize['width'];\n      symbol['markerHeight'] = boxSize['height'];\n      var dx = symbol['textDx'] || 0,\n        dy = symbol['textDy'] || 0,\n        textAlignPoint = getAlignPoint(textSize, symbol['textHorizontalAlignment'], symbol['textVerticalAlignment'])._add(dx, dy);\n      var hAlign = boxStyle['horizontalAlignment'] || 'middle';\n      symbol['markerDx'] = textAlignPoint.x;\n      if (hAlign === 'left') {\n        symbol['markerDx'] += symbol['markerWidth'] / 2 - padding[0];\n      } else if (hAlign === 'right') {\n        symbol['markerDx'] -= symbol['markerWidth'] / 2 - textSize['width'] - padding[0];\n      } else {\n        symbol['markerDx'] += textSize['width'] / 2;\n      }\n      var vAlign = boxStyle['verticalAlignment'] || 'middle';\n      symbol['markerDy'] = textAlignPoint.y;\n      if (vAlign === 'top') {\n        symbol['markerDy'] += symbol['markerHeight'] / 2 - padding[1];\n      } else if (vAlign === 'bottom') {\n        symbol['markerDy'] -= symbol['markerHeight'] / 2 - textSize['height'] - padding[1];\n      } else {\n        symbol['markerDy'] += textSize['height'] / 2;\n      }\n    }\n    this._refreshing = true;\n    this.updateSymbol(symbol);\n    delete this._refreshing;\n  };\n  _proto._getBoxSize = function _getBoxSize(symbol) {\n    if (!symbol['markerType']) {\n      symbol['markerType'] = 'square';\n    }\n    var boxStyle = this.getBoxStyle();\n    var size = this._getTextSize(symbol);\n    var width, height;\n    var padding = boxStyle['padding'] || this._getDefaultPadding();\n    width = size['width'] + padding[0] * 2;\n    height = size['height'] + padding[1] * 2;\n    if (boxStyle['minWidth']) {\n      if (!width || width < boxStyle['minWidth']) {\n        width = boxStyle['minWidth'];\n      }\n    }\n    if (boxStyle['minHeight']) {\n      if (!height || height < boxStyle['minHeight']) {\n        height = boxStyle['minHeight'];\n      }\n    }\n    return [new Size(width, height), size];\n  };\n  return Label;\n}(TextMarker);\nLabel.mergeOptions(options$c);\nLabel.registerJSONType('Label');\nvar Connectable = function Connectable(Base) {\n  return function (_Base) {\n    _inheritsLoose(_class, _Base);\n    function _class() {\n      return _Base.apply(this, arguments) || this;\n    }\n    _class._hasConnectors = function _hasConnectors(geometry) {\n      return !isNil(geometry.__connectors) && geometry.__connectors.length > 0;\n    };\n    _class._getConnectors = function _getConnectors(geometry) {\n      return geometry.__connectors;\n    };\n    var _proto = _class.prototype;\n    _proto.getConnectSource = function getConnectSource() {\n      return this._connSource;\n    };\n    _proto.setConnectSource = function setConnectSource(src) {\n      var target = this._connTarget;\n      this.onRemove();\n      this._connSource = src;\n      this._connTarget = target;\n      this.onAdd();\n      return this;\n    };\n    _proto.getConnectTarget = function getConnectTarget() {\n      return this._connTarget;\n    };\n    _proto.setConnectTarget = function setConnectTarget(target) {\n      var src = this._connSource;\n      this.onRemove();\n      this._connSource = src;\n      this._connTarget = target;\n      this._updateCoordinates();\n      this._registerEvents();\n      return this;\n    };\n    _proto._updateCoordinates = function _updateCoordinates() {\n      var map = this.getMap();\n      if (!map && this._connSource) {\n        map = this._connSource.getMap();\n      }\n      if (!map && this._connTarget) {\n        map = this._connTarget.getMap();\n      }\n      if (!map) {\n        return;\n      }\n      if (!this._connSource || !this._connTarget) {\n        return;\n      }\n      var srcPoints = this._connSource._getConnectPoints();\n      var targetPoints = this._connTarget._getConnectPoints();\n      var minDist = 0;\n      var oldCoordinates = this.getCoordinates();\n      var c1, c2;\n      for (var i = 0, len = srcPoints.length; i < len; i++) {\n        var p1 = srcPoints[i];\n        for (var j = 0, length = targetPoints.length; j < length; j++) {\n          var p2 = targetPoints[j];\n          var dist = map.computeLength(p1, p2);\n          if (i === 0 && j === 0) {\n            c1 = p1;\n            c2 = p2;\n            minDist = dist;\n          } else if (dist < minDist) {\n            c1 = p1;\n            c2 = p2;\n          }\n        }\n      }\n      if (!isArrayHasData(oldCoordinates) || !oldCoordinates[0].equals(c1) || !oldCoordinates[1].equals(c2)) {\n        this.setCoordinates([c1, c2]);\n      }\n    };\n    _proto.onAdd = function onAdd() {\n      this._registerEvents();\n      this._updateCoordinates();\n    };\n    _proto.onRemove = function onRemove() {\n      if (this._connSource) {\n        if (this._connSource.__connectors) {\n          removeFromArray(this, this._connSource.__connectors);\n        }\n        this._connSource.off('dragging positionchange', this._updateCoordinates, this).off('remove', this.onRemove, this);\n        this._connSource.off('dragstart mousedown mouseover', this._showConnect, this);\n        this._connSource.off('dragend mouseup mouseout', this.hide, this);\n        this._connSource.off('show', this._showConnect, this).off('hide', this.hide, this);\n        delete this._connSource;\n      }\n      if (this._connTarget) {\n        removeFromArray(this, this._connTarget.__connectors);\n        this._connTarget.off('dragging positionchange', this._updateCoordinates, this).off('remove', this.onRemove, this);\n        this._connTarget.off('show', this._showConnect, this).off('hide', this.hide, this);\n        delete this._connTarget;\n      }\n      if (!(this._connSource instanceof Geometry) || !(this._connTarget instanceof Geometry)) {\n        var map = this.getMap();\n        if (map) {\n          map.off('movestart moving moveend zoomstart zooming zoomend rotate pitch fovchange spatialreferencechange', this._updateCoordinates, this);\n        }\n      }\n    };\n    _proto._showConnect = function _showConnect() {\n      if (!this._connSource || !this._connTarget) {\n        return;\n      }\n      if (this._connSource.isVisible() && this._connTarget.isVisible()) {\n        this._updateCoordinates();\n        this.show();\n      }\n    };\n    _proto._registerEvents = function _registerEvents() {\n      if (!this._connSource || !this._connTarget) {\n        return;\n      }\n      if (!this._connSource.__connectors) {\n        this._connSource.__connectors = [];\n      }\n      if (!this._connTarget.__connectors) {\n        this._connTarget.__connectors = [];\n      }\n      this._connSource.__connectors.push(this);\n      this._connTarget.__connectors.push(this);\n      this._connSource.on('dragging positionchange', this._updateCoordinates, this).on('remove', this.remove, this);\n      this._connTarget.on('dragging positionchange', this._updateCoordinates, this).on('remove', this.remove, this);\n      this._connSource.on('show', this._showConnect, this).on('hide', this.hide, this);\n      this._connTarget.on('show', this._showConnect, this).on('hide', this.hide, this);\n      var trigger = this.options['showOn'];\n      this.hide();\n      if (trigger === 'moving') {\n        this._connSource.on('dragstart', this._showConnect, this).on('dragend', this.hide, this);\n        this._connTarget.on('dragstart', this._showConnect, this).on('dragend', this.hide, this);\n      } else if (trigger === 'click') {\n        this._connSource.on('mousedown', this._showConnect, this).on('mouseup', this.hide, this);\n        this._connTarget.on('mousedown', this._showConnect, this).on('mouseup', this.hide, this);\n      } else if (trigger === 'mouseover') {\n        this._connSource.on('mouseover', this._showConnect, this).on('mouseout', this.hide, this);\n        this._connTarget.on('mouseover', this._showConnect, this).on('mouseout', this.hide, this);\n      } else {\n        this._showConnect();\n      }\n      if (!(this._connSource instanceof Geometry) || !(this._connTarget instanceof Geometry)) {\n        var map = this.getMap();\n        if (map) {\n          map.on('movestart moving moveend zoomstart zooming zoomend rotate pitch fovchange spatialreferencechange', this._updateCoordinates, this);\n        }\n      }\n    };\n    return _class;\n  }(Base);\n};\nvar options$d = {\n  showOn: 'always'\n};\nvar ConnectorLine = function (_Connectable) {\n  _inheritsLoose(ConnectorLine, _Connectable);\n  function ConnectorLine(src, target, options) {\n    var _this;\n    _this = _Connectable.call(this, null, options) || this;\n    if (arguments.length === 1) {\n      options = src;\n      src = null;\n      target = null;\n    }\n    _this._connSource = src;\n    _this._connTarget = target;\n    return _this;\n  }\n  return ConnectorLine;\n}(Connectable(LineString));\nConnectorLine.mergeOptions(options$d);\nConnectorLine.registerJSONType('ConnectorLine');\nvar ArcConnectorLine = function (_Connectable2) {\n  _inheritsLoose(ArcConnectorLine, _Connectable2);\n  function ArcConnectorLine(src, target, options) {\n    var _this2;\n    _this2 = _Connectable2.call(this, null, options) || this;\n    if (arguments.length === 1) {\n      options = src;\n      src = null;\n      target = null;\n    }\n    _this2._connSource = src;\n    _this2._connTarget = target;\n    return _this2;\n  }\n  return ArcConnectorLine;\n}(Connectable(ArcCurve));\nArcConnectorLine.mergeOptions(options$d);\nArcConnectorLine.registerJSONType('ArcConnectorLine');\nvar options$e = {\n  'drawImmediate': false,\n  'geometryEvents': true,\n  'geometryEventTolerance': 1\n};\nvar TMP_EVENTS_ARR = [];\nvar OverlayLayer = function (_Layer) {\n  _inheritsLoose(OverlayLayer, _Layer);\n  function OverlayLayer(id, geometries, options) {\n    var _this;\n    if (geometries && !(geometries instanceof Geometry) && !Array.isArray(geometries) && GEOJSON_TYPES.indexOf(geometries.type) < 0) {\n      options = geometries;\n      geometries = null;\n    }\n    _this = _Layer.call(this, id, options) || this;\n    _this._maxZIndex = 0;\n    _this._minZIndex = 0;\n    _this._initCache();\n    if (geometries) {\n      _this.addGeometry(geometries);\n    }\n    var style = _this.options['style'];\n    if (style) {\n      _this.setStyle(style);\n    }\n    return _this;\n  }\n  var _proto = OverlayLayer.prototype;\n  _proto.getGeometryById = function getGeometryById(id) {\n    if (isNil(id) || id === '') {\n      return null;\n    }\n    if (!this._geoMap[id]) {\n      return null;\n    }\n    return this._geoMap[id];\n  };\n  _proto.getGeometries = function getGeometries(filter, context) {\n    if (!filter) {\n      return this._geoList.slice(0);\n    }\n    var result = [];\n    var geometry, filtered;\n    for (var i = 0, l = this._geoList.length; i < l; i++) {\n      geometry = this._geoList[i];\n      if (context) {\n        filtered = filter.call(context, geometry);\n      } else {\n        filtered = filter(geometry);\n      }\n      if (filtered) {\n        result.push(geometry);\n      }\n    }\n    return result;\n  };\n  _proto.getFirstGeometry = function getFirstGeometry() {\n    if (!this._geoList.length) {\n      return null;\n    }\n    return this._geoList[0];\n  };\n  _proto.getLastGeometry = function getLastGeometry() {\n    var len = this._geoList.length;\n    if (len === 0) {\n      return null;\n    }\n    return this._geoList[len - 1];\n  };\n  _proto.getCount = function getCount() {\n    return this._geoList.length;\n  };\n  _proto.getExtent = function getExtent() {\n    if (this.getCount() === 0) {\n      return null;\n    }\n    var extent = new Extent(this.getProjection());\n    this.forEach(function (g) {\n      extent._combine(g.getExtent());\n    });\n    return extent;\n  };\n  _proto.forEach = function forEach(fn, context) {\n    var copyOnWrite = this._geoList.slice(0);\n    for (var i = 0, l = copyOnWrite.length; i < l; i++) {\n      if (!context) {\n        fn(copyOnWrite[i], i);\n      } else {\n        fn.call(context, copyOnWrite[i], i);\n      }\n    }\n    return this;\n  };\n  _proto.filter = function filter(fn, context) {\n    var selected = [];\n    var isFn = isFunction(fn);\n    var filter = isFn ? fn : createFilter(fn);\n    this.forEach(function (geometry) {\n      var g = isFn ? geometry : getFilterFeature(geometry);\n      if (context ? filter.call(context, g) : filter(g)) {\n        selected.push(geometry);\n      }\n    }, this);\n    return selected;\n  };\n  _proto.isEmpty = function isEmpty$$1() {\n    return !this._geoList.length;\n  };\n  _proto.addGeometry = function addGeometry(geometries, fitView) {\n    if (!geometries) {\n      return this;\n    }\n    if (geometries.type === 'FeatureCollection') {\n      return this.addGeometry(GeoJSON.toGeometry(geometries), fitView);\n    } else if (!Array.isArray(geometries)) {\n      var count = arguments.length;\n      var last = arguments[count - 1];\n      geometries = Array.prototype.slice.call(arguments, 0, count - 1);\n      fitView = last;\n      if (last && isObject(last) && ('type' in last || last instanceof Geometry)) {\n        geometries.push(last);\n        fitView = false;\n      }\n      return this.addGeometry(geometries, fitView);\n    } else if (geometries.length === 0) {\n      return this;\n    }\n    this._initCache();\n    var extent;\n    if (fitView) {\n      extent = new Extent();\n    }\n    this._toSort = this._maxZIndex > 0;\n    var geos = [];\n    for (var i = 0, l = geometries.length; i < l; i++) {\n      var geo = geometries[i];\n      if (!geo) {\n        throw new Error('Invalid geometry to add to layer(' + this.getId() + ') at index:' + i);\n      }\n      if (geo.getLayer && geo.getLayer() === this) {\n        continue;\n      }\n      if (!(geo instanceof Geometry)) {\n        geo = Geometry.fromJSON(geo);\n        if (Array.isArray(geo)) {\n          for (var ii = 0, ll = geo.length; ii < ll; ii++) {\n            this._add(geo[ii], extent, i);\n            geos.push(geo[ii]);\n          }\n        }\n      }\n      if (!Array.isArray(geo)) {\n        this._add(geo, extent, i);\n        geos.push(geo);\n      }\n    }\n    var map = this.getMap();\n    if (map) {\n      this._getRenderer().onGeometryAdd(geos);\n      if (extent && !isNil(extent.xmin)) {\n        var center = extent.getCenter();\n        var z = map.getFitZoom(extent);\n        if (isObject(fitView)) {\n          var step = isFunction(fitView.step) ? fitView.step : function () {\n            return undefined;\n          };\n          map.animateTo({\n            center: center,\n            zoom: z\n          }, extend({\n            duration: map.options.zoomAnimationDuration,\n            easing: 'out'\n          }, fitView), step);\n        } else if (fitView === true) {\n          map.setCenterAndZoom(center, z);\n        }\n      }\n    }\n    this.fire('addgeo', {\n      'geometries': geometries\n    });\n    return this;\n  };\n  _proto.getGeoMinZIndex = function getGeoMinZIndex() {\n    return this._minZIndex;\n  };\n  _proto.getGeoMaxZIndex = function getGeoMaxZIndex() {\n    return this._maxZIndex;\n  };\n  _proto._add = function _add(geo, extent, i) {\n    if (!this._toSort) {\n      this._toSort = geo.getZIndex() !== 0;\n    }\n    this._updateZIndex(geo.getZIndex());\n    var geoId = geo.getId();\n    if (!isNil(geoId)) {\n      if (!isNil(this._geoMap[geoId])) {\n        throw new Error('Duplicate geometry id in layer(' + this.getId() + '):' + geoId + ', at index:' + i);\n      }\n      this._geoMap[geoId] = geo;\n    }\n    var internalId = UID();\n    geo._setInternalId(internalId);\n    this._geoList.push(geo);\n    this.onAddGeometry(geo);\n    geo._bindLayer(this);\n    if (geo.onAdd) {\n      geo.onAdd();\n    }\n    if (extent) {\n      extent._combine(geo.getExtent());\n    }\n    geo._fireEvent('add', {\n      'layer': this\n    });\n    if (this._cookedStyles) {\n      this._styleGeometry(geo);\n    }\n  };\n  _proto.removeGeometry = function removeGeometry(geometries) {\n    if (!Array.isArray(geometries)) {\n      return this.removeGeometry([geometries]);\n    }\n    for (var i = geometries.length - 1; i >= 0; i--) {\n      if (!(geometries[i] instanceof Geometry)) {\n        geometries[i] = this.getGeometryById(geometries[i]);\n      }\n      if (!geometries[i] || this !== geometries[i].getLayer()) continue;\n      geometries[i].remove();\n    }\n    this.fire('removegeo', {\n      'geometries': geometries\n    });\n    return this;\n  };\n  _proto.clear = function clear() {\n    this._clearing = true;\n    this.forEach(function (geo) {\n      geo.remove();\n    });\n    this._geoMap = {};\n    var old = this._geoList;\n    this._geoList = [];\n    var renderer = this._getRenderer();\n    if (renderer) {\n      renderer.onGeometryRemove(old);\n      if (renderer.clearImageData) {\n        renderer.clearImageData();\n        delete renderer._lastGeosToDraw;\n      }\n    }\n    this._clearing = false;\n    this.fire('clear');\n    return this;\n  };\n  _proto.onRemoveGeometry = function onRemoveGeometry(geometry) {\n    if (!geometry || this._clearing) {\n      return;\n    }\n    if (this !== geometry.getLayer()) {\n      return;\n    }\n    var internalId = geometry._getInternalId();\n    if (isNil(internalId)) {\n      return;\n    }\n    var geoId = geometry.getId();\n    if (!isNil(geoId)) {\n      delete this._geoMap[geoId];\n    }\n    var idx = this._findInList(geometry);\n    if (idx >= 0) {\n      this._geoList.splice(idx, 1);\n    }\n    if (this._getRenderer()) {\n      this._getRenderer().onGeometryRemove([geometry]);\n    }\n  };\n  _proto.getStyle = function getStyle() {\n    if (!this.options['style']) {\n      return null;\n    }\n    return this.options['style'];\n  };\n  _proto.setStyle = function setStyle(style) {\n    this.options.style = style;\n    style = parseStyleRootPath(style);\n    this._cookedStyles = compileStyle(style);\n    this.forEach(function (geometry) {\n      this._styleGeometry(geometry);\n    }, this);\n    this.fire('setstyle', {\n      'style': style\n    });\n    return this;\n  };\n  _proto._styleGeometry = function _styleGeometry(geometry) {\n    if (!this._cookedStyles) {\n      return false;\n    }\n    var g = getFilterFeature(geometry);\n    for (var i = 0, len = this._cookedStyles.length; i < len; i++) {\n      if (this._cookedStyles[i]['filter'](g) === true) {\n        geometry._setExternSymbol(this._cookedStyles[i]['symbol']);\n        return true;\n      }\n    }\n    return false;\n  };\n  _proto.removeStyle = function removeStyle() {\n    if (!this.options.style) {\n      return this;\n    }\n    delete this.options.style;\n    delete this._cookedStyles;\n    this.forEach(function (geometry) {\n      geometry._setExternSymbol(null);\n    }, this);\n    this.fire('removestyle');\n    return this;\n  };\n  _proto.onAddGeometry = function onAddGeometry(geo) {\n    var style = this.getStyle();\n    if (style) {\n      this._styleGeometry(geo);\n    }\n  };\n  _proto.hide = function hide() {\n    for (var i = 0, l = this._geoList.length; i < l; i++) {\n      this._geoList[i].onHide();\n    }\n    return Layer.prototype.hide.call(this);\n  };\n  _proto._initCache = function _initCache() {\n    if (!this._geoList) {\n      this._geoList = [];\n      this._geoMap = {};\n    }\n  };\n  _proto._updateZIndex = function _updateZIndex() {\n    for (var _len = arguments.length, zIndex = new Array(_len), _key = 0; _key < _len; _key++) {\n      zIndex[_key] = arguments[_key];\n    }\n    this._maxZIndex = Math.max(this._maxZIndex, Math.max.apply(Math, zIndex));\n    this._minZIndex = Math.min(this._minZIndex, Math.min.apply(Math, zIndex));\n  };\n  _proto._sortGeometries = function _sortGeometries() {\n    var _this2 = this;\n    if (!this._toSort) {\n      return;\n    }\n    this._maxZIndex = 0;\n    this._minZIndex = 0;\n    this._geoList.sort(function (a, b) {\n      _this2._updateZIndex(a.getZIndex(), b.getZIndex());\n      return _this2._compare(a, b);\n    });\n    this._toSort = false;\n  };\n  _proto._compare = function _compare(a, b) {\n    if (a.getZIndex() === b.getZIndex()) {\n      return a._getInternalId() - b._getInternalId();\n    }\n    return a.getZIndex() - b.getZIndex();\n  };\n  _proto._findInList = function _findInList(geo) {\n    var len = this._geoList.length;\n    if (len === 0) {\n      return -1;\n    }\n    this._sortGeometries();\n    var low = 0,\n      high = len - 1,\n      middle;\n    while (low <= high) {\n      middle = Math.floor((low + high) / 2);\n      if (this._geoList[middle] === geo) {\n        return middle;\n      } else if (this._compare(this._geoList[middle], geo) > 0) {\n        high = middle - 1;\n      } else {\n        low = middle + 1;\n      }\n    }\n    return -1;\n  };\n  _proto._onGeometryEvent = function _onGeometryEvent(param) {\n    if (!param || !param['target']) {\n      return;\n    }\n    var type = param['type'];\n    if (type === 'idchange') {\n      this._onGeometryIdChange(param);\n    } else if (type === 'zindexchange') {\n      this._onGeometryZIndexChange(param);\n    } else if (type === 'positionchange') {\n      this._onGeometryPositionChange(param);\n    } else if (type === 'shapechange') {\n      this._onGeometryShapeChange(param);\n    } else if (type === 'symbolchange') {\n      this._onGeometrySymbolChange(param);\n    } else if (type === 'show') {\n      this._onGeometryShow(param);\n    } else if (type === 'hide') {\n      this._onGeometryHide(param);\n    } else if (type === 'propertieschange') {\n      this._onGeometryPropertiesChange(param);\n    }\n  };\n  _proto._onGeometryIdChange = function _onGeometryIdChange(param) {\n    if (param['new'] === param['old']) {\n      if (this._geoMap[param['old']] && this._geoMap[param['old']] === param['target']) {\n        return;\n      }\n    }\n    if (!isNil(param['new'])) {\n      if (this._geoMap[param['new']]) {\n        throw new Error('Duplicate geometry id in layer(' + this.getId() + '):' + param['new']);\n      }\n      this._geoMap[param['new']] = param['target'];\n    }\n    if (!isNil(param['old']) && param['new'] !== param['old']) {\n      delete this._geoMap[param['old']];\n    }\n  };\n  _proto._onGeometryZIndexChange = function _onGeometryZIndexChange(param) {\n    if (param['old'] !== param['new']) {\n      this._updateZIndex(param['new']);\n      this._toSort = true;\n      if (this._getRenderer()) {\n        this._getRenderer().onGeometryZIndexChange(param);\n      }\n    }\n  };\n  _proto._onGeometryPositionChange = function _onGeometryPositionChange(param) {\n    if (this._getRenderer()) {\n      this._getRenderer().onGeometryPositionChange(param);\n    }\n  };\n  _proto._onGeometryShapeChange = function _onGeometryShapeChange(param) {\n    if (this._getRenderer()) {\n      this._getRenderer().onGeometryShapeChange(param);\n    }\n  };\n  _proto._onGeometrySymbolChange = function _onGeometrySymbolChange(param) {\n    if (this._getRenderer()) {\n      this._getRenderer().onGeometrySymbolChange(param);\n    }\n  };\n  _proto._onGeometryShow = function _onGeometryShow(param) {\n    if (this._getRenderer()) {\n      this._getRenderer().onGeometryShow(param);\n    }\n  };\n  _proto._onGeometryHide = function _onGeometryHide(param) {\n    if (this._getRenderer()) {\n      this._getRenderer().onGeometryHide(param);\n    }\n  };\n  _proto._onGeometryPropertiesChange = function _onGeometryPropertiesChange(param) {\n    if (this._getRenderer()) {\n      this._getRenderer().onGeometryPropertiesChange(param);\n    }\n  };\n  _proto._hasGeoListeners = function _hasGeoListeners(eventTypes) {\n    if (!eventTypes) {\n      return false;\n    }\n    if (!Array.isArray(eventTypes)) {\n      TMP_EVENTS_ARR[0] = eventTypes;\n      eventTypes = TMP_EVENTS_ARR;\n    }\n    var geos = this.getGeometries() || [];\n    for (var i = 0, len = geos.length; i < len; i++) {\n      for (var j = 0, len1 = eventTypes.length; j < len1; j++) {\n        var eventType = eventTypes[j];\n        var listens = geos[i].listens(eventType);\n        if (listens > 0) {\n          return true;\n        }\n      }\n    }\n    return false;\n  };\n  return OverlayLayer;\n}(Layer);\nOverlayLayer.mergeOptions(options$e);\nvar TEMP_EXTENT$7 = new PointExtent();\nvar options$f = {\n  'debug': false,\n  'enableSimplify': true,\n  'defaultIconSize': [20, 20],\n  'cacheVectorOnCanvas': true,\n  'cacheSvgOnCanvas': Browser$1.gecko,\n  'enableAltitude': false,\n  'altitudeProperty': 'altitude',\n  'drawAltitude': false,\n  'sortByDistanceToCamera': false,\n  'roundPoint': false,\n  'altitude': 0,\n  'clipBBoxBufferSize': 3,\n  'collision': false,\n  'collisionBufferSize': 2,\n  'collisionDelay': 250,\n  'collisionScope': 'layer'\n};\nvar VectorLayer = function (_OverlayLayer) {\n  _inheritsLoose(VectorLayer, _OverlayLayer);\n  function VectorLayer(id, geometries, options) {\n    return _OverlayLayer.call(this, id, geometries, options) || this;\n  }\n  var _proto = VectorLayer.prototype;\n  _proto.onConfig = function onConfig(conf) {\n    _OverlayLayer.prototype.onConfig.call(this, conf);\n    if (conf['enableAltitude'] || conf['drawAltitude'] || conf['altitudeProperty']) {\n      var renderer = this.getRenderer();\n      if (renderer && renderer.setToRedraw) {\n        renderer.setToRedraw();\n      }\n    }\n  };\n  _proto.identify = function identify(coordinate, options) {\n    if (options === void 0) {\n      options = {};\n    }\n    var renderer = this.getRenderer();\n    if (!(coordinate instanceof Coordinate)) {\n      coordinate = new Coordinate(coordinate);\n    }\n    var cp = this.getMap().coordToContainerPoint(coordinate);\n    if (options['onlyVisible'] && renderer && renderer.identifyAtPoint) {\n      return renderer.identifyAtPoint(cp, options);\n    }\n    return this._hitGeos(this._geoList, cp, options);\n  };\n  _proto.identifyAtPoint = function identifyAtPoint(point, options) {\n    if (options === void 0) {\n      options = {};\n    }\n    var renderer = this.getRenderer();\n    if (!(point instanceof Point)) {\n      point = new Point(point);\n    }\n    if (options['onlyVisible'] && renderer && renderer.identifyAtPoint) {\n      return renderer.identifyAtPoint(point, options);\n    }\n    return this._hitGeos(this._geoList, point, options);\n  };\n  _proto._hitGeos = function _hitGeos(geometries, cp, options) {\n    if (options === void 0) {\n      options = {};\n    }\n    var filter = options['filter'],\n      hits = [];\n    var tolerance = options['tolerance'];\n    var map = this.getMap();\n    var renderer = this.getRenderer();\n    var imageData = renderer && renderer.getImageData && renderer.getImageData();\n    if (imageData) {\n      var hitTolerance = 0;\n      for (var i = geometries.length - 1; i >= 0; i--) {\n        var t = geometries[i]._hitTestTolerance() + (tolerance || 0);\n        if (t > hitTolerance) {\n          hitTolerance = t;\n        }\n      }\n      var r = map.getDevicePixelRatio();\n      imageData.r = r;\n      var hit = false;\n      var cpx = cp.x - hitTolerance;\n      var cpy = cp.y - hitTolerance;\n      for (var _i = -hitTolerance; _i <= hitTolerance; _i++) {\n        for (var j = -hitTolerance; j <= hitTolerance; j++) {\n          var x = Math.round((cpx + _i) * r),\n            y = Math.round((cpy + j) * r);\n          var idx = y * imageData.width * 4 + x * 4;\n          if (imageData.data[idx + 3] > 0) {\n            hit = true;\n            break;\n          }\n        }\n        if (hit) {\n          break;\n        }\n      }\n      if (!hit) {\n        return hits;\n      }\n    }\n    for (var _i2 = geometries.length - 1; _i2 >= 0; _i2--) {\n      var geo = geometries[_i2];\n      if (!geo || !geo.isVisible() || !geo._getPainter() || !geo.options['interactive']) {\n        continue;\n      }\n      var painter = geo._getPainter();\n      var bbox = painter.getRenderBBOX && painter.getRenderBBOX();\n      if (bbox) {\n        var _x = cp.x,\n          _y = cp.y;\n        if (_x < bbox[0] || _y < bbox[1] || _x > bbox[2] || _y > bbox[3]) {\n          continue;\n        }\n      }\n      if (!(geo instanceof LineString) || !geo._getArrowStyle() && !(geo instanceof Curve)) {\n        var extent = geo.getContainerExtent(TEMP_EXTENT$7);\n        if (tolerance) {\n          extent = extent._expand(tolerance);\n        }\n        if (!extent || !extent.contains(cp)) {\n          continue;\n        }\n      }\n      if (geo._containsPoint(cp, tolerance) && (!filter || filter(geo))) {\n        hits.push(geo);\n        if (options['count']) {\n          if (hits.length >= options['count']) {\n            break;\n          }\n        }\n      }\n    }\n    return hits;\n  };\n  _proto.getAltitude = function getAltitude() {\n    return this.options['altitude'] || 0;\n  };\n  _proto.toJSON = function toJSON(options) {\n    if (!options) {\n      options = {};\n    }\n    var profile = {\n      'type': this.getJSONType(),\n      'id': this.getId(),\n      'options': this.config()\n    };\n    if (isNil(options['geometries']) || options['geometries']) {\n      var clipExtent;\n      if (options['clipExtent']) {\n        var map = this.getMap();\n        var projection = map ? map.getProjection() : null;\n        clipExtent = new Extent(options['clipExtent'], projection);\n      }\n      var geoJSONs = [];\n      var geometries = this.getGeometries();\n      for (var i = 0, len = geometries.length; i < len; i++) {\n        var geo = geometries[i];\n        var geoExt = geo.getExtent();\n        if (!geoExt || clipExtent && !clipExtent.intersects(geoExt)) {\n          continue;\n        }\n        var json = geo.toJSON(options['geometries']);\n        geoJSONs.push(json);\n      }\n      profile['geometries'] = geoJSONs;\n    }\n    return profile;\n  };\n  VectorLayer.fromJSON = function fromJSON(json) {\n    if (!json || json['type'] !== 'VectorLayer') {\n      return null;\n    }\n    var layer = new VectorLayer(json['id'], json['options']);\n    var geoJSONs = json['geometries'];\n    var geometries = [];\n    for (var i = 0; i < geoJSONs.length; i++) {\n      var geo = Geometry.fromJSON(geoJSONs[i]);\n      if (geo) {\n        geometries.push(geo);\n      }\n    }\n    layer.addGeometry(geometries);\n    return layer;\n  };\n  VectorLayer.getPainterClass = function getPainterClass() {\n    return Painter;\n  };\n  VectorLayer.getCollectionPainterClass = function getCollectionPainterClass() {\n    return CollectionPainter;\n  };\n  return VectorLayer;\n}(OverlayLayer);\nVectorLayer.mergeOptions(options$f);\nVectorLayer.registerJSONType('VectorLayer');\nvar key = '_map_tool';\nvar MapTool = function (_Eventable) {\n  _inheritsLoose(MapTool, _Eventable);\n  function MapTool() {\n    return _Eventable.apply(this, arguments) || this;\n  }\n  var _proto = MapTool.prototype;\n  _proto.addTo = function addTo(map) {\n    if (!map) {\n      return this;\n    }\n    this._map = map;\n    if (map[key]) {\n      map[key].disable();\n    }\n    if (this.onAdd) {\n      this.onAdd();\n    }\n    this.enable();\n    map[key] = this;\n    this._fireEvent('add');\n    return this;\n  };\n  _proto.getMap = function getMap() {\n    return this._map;\n  };\n  _proto.enable = function enable() {\n    var map = this._map;\n    if (!map || this._enabled) {\n      return this;\n    }\n    this._enabled = true;\n    this._switchEvents('off');\n    this._registerEvents();\n    if (this.onEnable) {\n      this.onEnable();\n    }\n    this._fireEvent('enable');\n    return this;\n  };\n  _proto.disable = function disable() {\n    if (!this._enabled || !this._map) {\n      return this;\n    }\n    this._enabled = false;\n    this._switchEvents('off');\n    if (this.onDisable) {\n      this.onDisable();\n    }\n    this._fireEvent('disable');\n    return this;\n  };\n  _proto.isEnabled = function isEnabled() {\n    if (!this._enabled) {\n      return false;\n    }\n    return true;\n  };\n  _proto.remove = function remove() {\n    if (!this._map) {\n      return this;\n    }\n    this.disable();\n    if (this._map) {\n      delete this._map[key];\n      delete this._map;\n    }\n    this._fireEvent('remove');\n    return this;\n  };\n  _proto._registerEvents = function _registerEvents() {\n    this._switchEvents('on');\n  };\n  _proto._switchEvents = function _switchEvents(to) {\n    var events = this.getEvents();\n    if (events) {\n      this._map[to](events, this);\n    }\n  };\n  _proto._fireEvent = function _fireEvent(eventName, param) {\n    if (!param) {\n      param = {};\n    }\n    this.fire(eventName, param);\n  };\n  return MapTool;\n}(Eventable(Class));\nvar options$g = {\n  'symbol': {\n    'lineColor': '#000',\n    'lineWidth': 2,\n    'lineOpacity': 1,\n    'polygonFill': '#fff',\n    'polygonOpacity': 0.3\n  },\n  'doubleClickZoom': false,\n  'mode': null,\n  'once': false,\n  'autoPanAtEdge': false,\n  'ignoreMouseleave': true,\n  'blockGeometryEvents': false\n};\nvar registeredMode = {};\nvar DrawTool = function (_MapTool) {\n  _inheritsLoose(DrawTool, _MapTool);\n  DrawTool.registerMode = function registerMode(name, modeAction) {\n    registeredMode[name.toLowerCase()] = modeAction;\n  };\n  DrawTool.getRegisterMode = function getRegisterMode(name) {\n    return registeredMode[name.toLowerCase()];\n  };\n  function DrawTool(options) {\n    var _this;\n    _this = _MapTool.call(this, options) || this;\n    _this._checkMode();\n    _this._events = {\n      'click': _this._clickHandler,\n      'mousemove touchmove': _this._mouseMoveHandler,\n      'dblclick': _this._doubleClickHandler,\n      'mousedown touchstart': _this._mouseDownHandler,\n      'mouseup touchend': _this._mouseUpHandler,\n      'mousemove': _this._mouseMoveHandler,\n      'mousedown': _this._mouseDownHandler,\n      'mouseup': _this._mouseUpHandler\n    };\n    return _this;\n  }\n  var _proto = DrawTool.prototype;\n  _proto.getMode = function getMode() {\n    if (this.options['mode']) {\n      return this.options['mode'].toLowerCase();\n    }\n    return null;\n  };\n  _proto.setMode = function setMode(mode) {\n    if (this._geometry) {\n      this._geometry.remove();\n      delete this._geometry;\n    }\n    this._clearStage();\n    this._switchEvents('off');\n    this.options['mode'] = mode;\n    this._checkMode();\n    if (this.isEnabled()) {\n      this._switchEvents('on');\n      this._restoreMapCfg();\n      this._saveMapCfg();\n    }\n    return this;\n  };\n  _proto.getSymbol = function getSymbol() {\n    var symbol = this.options['symbol'];\n    if (symbol) {\n      return extendSymbol(symbol);\n    } else {\n      return extendSymbol(this.options['symbol']);\n    }\n  };\n  _proto.setSymbol = function setSymbol(symbol) {\n    if (!symbol) {\n      return this;\n    }\n    this.options['symbol'] = symbol;\n    if (this._geometry) {\n      this._geometry.setSymbol(symbol);\n    }\n    return this;\n  };\n  _proto.getCurrentGeometry = function getCurrentGeometry() {\n    return this._geometry;\n  };\n  _proto.onAdd = function onAdd() {\n    this._checkMode();\n  };\n  _proto.onEnable = function onEnable() {\n    this._saveMapCfg();\n    this._drawToolLayer = this._getDrawLayer();\n    this._clearStage();\n    this._loadResources();\n    var map = this.getMap();\n    if (this.options['autoPanAtEdge']) {\n      this._mapAutoPanAtEdge = map.options['autoPanAtEdge'];\n      if (!this._mapAutoPanAtEdge) {\n        map.config({\n          autoPanAtEdge: true\n        });\n      }\n    }\n    this._geometryEvents = map.options['geometryEvents'];\n    if (this.options['blockGeometryEvents']) {\n      map.config('geometryEvents', false);\n    }\n    return this;\n  };\n  _proto.onDisable = function onDisable() {\n    var map = this.getMap();\n    this._restoreMapCfg();\n    this.endDraw({\n      ignoreEndEvent: true\n    });\n    if (this._map) {\n      map.removeLayer(this._getDrawLayer());\n      if (this.options['autoPanAtEdge']) {\n        if (!this._mapAutoPanAtEdge) {\n          map.config({\n            autoPanAtEdge: false\n          });\n        }\n      }\n    }\n    if (this.options['blockGeometryEvents']) {\n      map.config('geometryEvents', this._geometryEvents);\n    }\n    return this;\n  };\n  _proto.undo = function undo() {\n    var registerMode = this._getRegisterMode();\n    var action = registerMode.action;\n    if (!this._shouldRecordHistory(action) || !this._historyPointer) {\n      return this;\n    }\n    var coords = this._clickCoords.slice(0, --this._historyPointer);\n    registerMode.update(this.getMap().getProjection(), coords, this._geometry);\n    return this;\n  };\n  _proto.redo = function redo() {\n    var registerMode = this._getRegisterMode();\n    var action = registerMode.action;\n    if (!this._shouldRecordHistory(action) || isNil(this._historyPointer) || this._historyPointer === this._clickCoords.length) {\n      return this;\n    }\n    var coords = this._clickCoords.slice(0, ++this._historyPointer);\n    registerMode.update(this.getMap().getProjection(), coords, this._geometry);\n    return this;\n  };\n  _proto._shouldRecordHistory = function _shouldRecordHistory(actions) {\n    return Array.isArray(actions) && actions[0] === 'click' && actions[1] === 'mousemove' && actions[2] === 'dblclick';\n  };\n  _proto._checkMode = function _checkMode() {\n    this._getRegisterMode();\n  };\n  _proto._saveMapCfg = function _saveMapCfg() {\n    var map = this.getMap();\n    this._mapDoubleClickZoom = map.options['doubleClickZoom'];\n    map.config({\n      'doubleClickZoom': this.options['doubleClickZoom']\n    });\n    var actions = this._getRegisterMode()['action'];\n    var dragging = false;\n    for (var i = 0; i < actions.length; i++) {\n      if (actions[i].indexOf('mousedown') >= 0 || actions[i].indexOf('touchstart') >= 0) {\n        dragging = true;\n        break;\n      }\n    }\n    if (dragging) {\n      var _map = this.getMap();\n      this._mapDraggable = _map.options['draggable'];\n      _map.config({\n        'draggable': false\n      });\n    }\n  };\n  _proto._restoreMapCfg = function _restoreMapCfg() {\n    var map = this.getMap();\n    map.config({\n      'doubleClickZoom': this._mapDoubleClickZoom\n    });\n    if (!isNil(this._mapDraggable)) {\n      map.config('draggable', this._mapDraggable);\n    }\n    delete this._mapDraggable;\n    delete this._mapDoubleClickZoom;\n  };\n  _proto._loadResources = function _loadResources() {\n    var symbol = this.getSymbol();\n    var resources = getExternalResources(symbol);\n    if (resources.length > 0) {\n      this._drawToolLayer._getRenderer().loadResources(resources);\n    }\n  };\n  _proto._getProjection = function _getProjection() {\n    return this._map.getProjection();\n  };\n  _proto._getRegisterMode = function _getRegisterMode() {\n    var mode = this.getMode();\n    var registerMode = DrawTool.getRegisterMode(mode);\n    if (!registerMode) {\n      throw new Error(mode + ' is not a valid mode of DrawTool.');\n    }\n    return registerMode;\n  };\n  _proto.getEvents = function getEvents() {\n    var action = this._getRegisterMode()['action'];\n    var _events = {};\n    if (Array.isArray(action)) {\n      for (var i = 0; i < action.length; i++) {\n        _events[action[i]] = this._events[action[i]];\n      }\n      return _events;\n    }\n    return null;\n  };\n  _proto._mouseDownHandler = function _mouseDownHandler(event) {\n    this._createGeometry(event);\n  };\n  _proto._mouseUpHandler = function _mouseUpHandler(event) {\n    this.endDraw(event);\n  };\n  _proto._clickHandler = function _clickHandler(event) {\n    var map = this.getMap();\n    var registerMode = this._getRegisterMode();\n    if (this._clickCoords && this._clickCoords.length) {\n      var len = this._clickCoords.length;\n      var prjCoord = map._pointToPrj(event['point2d']);\n      if (this._clickCoords[len - 1].equals(prjCoord)) {\n        return;\n      }\n    }\n    if (!this._geometry) {\n      this._createGeometry(event);\n    } else {\n      var _prjCoord = map._pointToPrj(event['point2d']);\n      if (!isNil(this._historyPointer)) {\n        this._clickCoords = this._clickCoords.slice(0, this._historyPointer);\n      }\n      var snapTo = this._geometry.snapTo;\n      if (snapTo && isFunction(snapTo)) {\n        var snapResult = this._getSnapResult(snapTo, event.containerPoint);\n        _prjCoord = snapResult.prjCoord;\n        this._clickCoords = this._clickCoords.concat(snapResult.effectedVertex);\n        if (this._clickCoords[this._clickCoords.length - 1].equals(_prjCoord)) {\n          return;\n        }\n      }\n      this._clickCoords.push(_prjCoord);\n      this._historyPointer = this._clickCoords.length;\n      event.drawTool = this;\n      registerMode['update'](map.getProjection(), this._clickCoords, this._geometry, event);\n      if (this.getMode() === 'point') {\n        this.endDraw(event);\n        return;\n      }\n      if (this._clickCoords.length <= 1) {\n        this._fireEvent('drawstart', event);\n      } else {\n        this._fireEvent('drawvertex', event);\n      }\n      if (registerMode['clickLimit'] && registerMode['clickLimit'] === this._historyPointer) {\n        this.endDraw(event);\n      }\n    }\n  };\n  _proto._createGeometry = function _createGeometry(event) {\n    var mode = this.getMode();\n    var registerMode = this._getRegisterMode();\n    var prjCoord = this.getMap()._pointToPrj(event['point2d']);\n    var symbol = this.getSymbol();\n    if (!this._geometry) {\n      this._clickCoords = [prjCoord];\n      event.drawTool = this;\n      this._geometry = registerMode['create'](this.getMap().getProjection(), this._clickCoords, event);\n      if (symbol && mode !== 'point') {\n        this._geometry.setSymbol(symbol);\n      } else if (this.options.hasOwnProperty('symbol')) {\n        this._geometry.setSymbol(this.options['symbol']);\n      }\n      this._addGeometryToStage(this._geometry);\n      this._fireEvent('drawstart', event);\n      var snapTo = this._geometry.snapTo;\n      if (snapTo && isFunction(snapTo)) {\n        var snapResult = this._getSnapResult(snapTo, event.containerPoint);\n        var map = this.getMap();\n        if (map && snapResult) {\n          var _prjCoord2 = snapResult.prjCoord;\n          this._clickCoords = [_prjCoord2];\n          registerMode['update'](map.getProjection(), this._clickCoords, this._geometry, event);\n        }\n      }\n    }\n    if (mode === 'point' && event.type !== 'mousemove') {\n      this.endDraw(event);\n    }\n  };\n  _proto._mouseMoveHandler = function _mouseMoveHandler(event) {\n    var map = this.getMap();\n    if (!map || map.isInteracting()) {\n      return;\n    }\n    if (this.getMode() === 'point' && !this._geometry) {\n      this._createGeometry(event);\n      return;\n    }\n    if (!this._geometry) {\n      return;\n    }\n    var containerPoint = this._getMouseContainerPoint(event);\n    if (!this._isValidContainerPoint(containerPoint)) {\n      return;\n    }\n    var prjCoord = map._pointToPrj(event['point2d']);\n    var snapAdditionVertex = [];\n    var snapTo = this._geometry.snapTo;\n    if (snapTo && isFunction(snapTo)) {\n      var snapResult = this._getSnapResult(snapTo, containerPoint);\n      prjCoord = snapResult.prjCoord;\n      snapAdditionVertex = snapResult.effectedVertex;\n    }\n    var projection = map.getProjection();\n    event.drawTool = this;\n    var registerMode = this._getRegisterMode();\n    if (this._shouldRecordHistory(registerMode.action)) {\n      var path = this._clickCoords.slice(0, this._historyPointer);\n      if (path && path.length > 0 && prjCoord.equals(path[path.length - 1])) {\n        return;\n      }\n      registerMode['update'](projection, path.concat(snapAdditionVertex, [prjCoord]), this._geometry, event);\n    } else {\n      registerMode['update'](projection, prjCoord, this._geometry, event);\n    }\n    this._fireEvent('mousemove', event);\n  };\n  _proto._doubleClickHandler = function _doubleClickHandler(event) {\n    if (!this._geometry) {\n      return;\n    }\n    var containerPoint = this._getMouseContainerPoint(event);\n    if (!this._isValidContainerPoint(containerPoint)) {\n      return;\n    }\n    var registerMode = this._getRegisterMode();\n    var clickCoords = this._clickCoords;\n    if (clickCoords.length < 2) {\n      return;\n    }\n    var mode = this.getMode();\n    if (mode && mode.indexOf('polygon') > -1 && clickCoords.length < 3) {\n      return;\n    }\n    var projection = this.getMap().getProjection();\n    var path = [clickCoords[0]];\n    for (var i = 1, len = clickCoords.length; i < len; i++) {\n      if (clickCoords[i].x !== clickCoords[i - 1].x || clickCoords[i].y !== clickCoords[i - 1].y) {\n        path.push(clickCoords[i]);\n      }\n    }\n    if (path.length < 2 || this._geometry && this._geometry instanceof Polygon && path.length < 3) {\n      return;\n    }\n    event.drawTool = this;\n    registerMode['update'](projection, path, this._geometry, event);\n    this.endDraw(event);\n  };\n  _proto._addGeometryToStage = function _addGeometryToStage(geometry) {\n    var drawLayer = this._getDrawLayer();\n    drawLayer.addGeometry(geometry);\n  };\n  _proto.endDraw = function endDraw(param) {\n    if (!this._geometry || this._ending) {\n      return this;\n    }\n    this._ending = true;\n    var geometry = this._geometry;\n    this._clearStage();\n    param = param || {};\n    this._geometry = geometry;\n    if (!param.ignoreEndEvent) {\n      this._fireEvent('drawend', param);\n    }\n    delete this._geometry;\n    if (this.options['once']) {\n      this.disable();\n    }\n    delete this._ending;\n    delete this._historyPointer;\n    if (this._vertexes) {\n      this._vertexes = [];\n    }\n    return this;\n  };\n  _proto._clearStage = function _clearStage() {\n    this._getDrawLayer().clear();\n    delete this._geometry;\n    delete this._clickCoords;\n  };\n  _proto._getMouseContainerPoint = function _getMouseContainerPoint(event) {\n    var action = this._getRegisterMode()['action'];\n    if (action[0].indexOf('mousedown') >= 0 || action[0].indexOf('touchstart') >= 0) {\n      stopPropagation(event['domEvent']);\n    }\n    return event['containerPoint'];\n  };\n  _proto._isValidContainerPoint = function _isValidContainerPoint(containerPoint) {\n    var mapSize = this._map.getSize();\n    var w = mapSize['width'],\n      h = mapSize['height'];\n    if (containerPoint.x < 0 || containerPoint.y < 0) {\n      return false;\n    } else if (containerPoint.x > w || containerPoint.y > h) {\n      return false;\n    }\n    return true;\n  };\n  _proto._getSnapResult = function _getSnapResult(snapTo, containerPoint) {\n    var map = this.getMap();\n    var lastContainerPoints = [];\n    if (this.options.edgeAutoComplete) {\n      var lastCoord = this._clickCoords[(this._historyPointer || 1) - 1];\n      lastContainerPoints.push(map._prjToContainerPoint(lastCoord));\n      var beforeLastCoord = this._clickCoords[(this._historyPointer || 1) - 2];\n      if (beforeLastCoord) {\n        lastContainerPoints.push(map._prjToContainerPoint(beforeLastCoord));\n      }\n    }\n    var snapResult = snapTo(containerPoint, lastContainerPoints);\n    containerPoint = (snapResult.effectedVertex ? snapResult.point : snapResult) || containerPoint;\n    var prjCoord = map._containerPointToPrj(containerPoint);\n    if (snapResult.effectedVertex) {\n      snapResult.effectedVertex = snapResult.effectedVertex.map(function (vertex) {\n        return map._containerPointToPrj(vertex);\n      });\n    }\n    return {\n      prjCoord: prjCoord,\n      effectedVertex: snapResult.effectedVertex || []\n    };\n  };\n  _proto._getDrawLayer = function _getDrawLayer() {\n    var drawLayerId = INTERNAL_LAYER_PREFIX + 'drawtool';\n    var drawToolLayer = this._map.getLayer(drawLayerId);\n    if (!drawToolLayer) {\n      drawToolLayer = new VectorLayer(drawLayerId, {\n        'enableSimplify': false,\n        'enableAltitude': this.options['enableAltitude']\n      });\n      this._map.addLayer(drawToolLayer);\n    }\n    return drawToolLayer;\n  };\n  _proto._fireEvent = function _fireEvent(eventName, param) {\n    if (!param) {\n      param = {};\n    }\n    param = extend({}, param);\n    if (this._geometry) {\n      param['geometry'] = this._getRegisterMode()['generate'](this._geometry, {\n        drawTool: this\n      });\n      param.tempGeometry = this._geometry;\n    }\n    MapTool.prototype._fireEvent.call(this, eventName, param);\n  };\n  return DrawTool;\n}(MapTool);\nDrawTool.mergeOptions(options$g);\nvar MapBoxZoomHander = function (_Handler) {\n  _inheritsLoose(MapBoxZoomHander, _Handler);\n  function MapBoxZoomHander(target) {\n    var _this;\n    _this = _Handler.call(this, target) || this;\n    _this.drawTool = new DrawTool({\n      'mode': 'boxZoom',\n      'ignoreMouseleave': false\n    });\n    return _this;\n  }\n  var _proto = MapBoxZoomHander.prototype;\n  _proto.addHooks = function addHooks() {\n    this.target.on('_mousedown', this._onMouseDown, this);\n  };\n  _proto.removeHooks = function removeHooks() {\n    this.target.off('_mousedown', this._onMouseDown, this);\n    if (this.drawTool.isEnabled()) {\n      this.drawTool.remove();\n    }\n  };\n  _proto._onMouseDown = function _onMouseDown(param) {\n    if (!this.target.options['boxZoom']) {\n      return;\n    }\n    if (param.domEvent.shiftKey) {\n      this.drawTool.setSymbol(this.target.options['boxZoomSymbol']).on('drawend', this._boxZoom, this).addTo(this.target);\n    }\n  };\n  _proto._boxZoom = function _boxZoom(param) {\n    var map = this.target;\n    this.drawTool.remove();\n    var geometry = param.geometry,\n      center = geometry.getCenter(),\n      symbol = geometry.getSymbol(),\n      w = symbol.markerWidth,\n      h = symbol.markerHeight;\n    var extent = new Extent(center, map.locateByPoint(center, w, h), map.getProjection());\n    var zoom = map.getFitZoom(extent);\n    map._animateTo({\n      center: extent.getCenter(),\n      zoom: zoom\n    });\n  };\n  return MapBoxZoomHander;\n}(Handler$1);\nMap$1.mergeOptions({\n  'boxZoom': true,\n  'boxZoomSymbol': {\n    'markerType': 'rectangle',\n    'markerLineWidth': 3,\n    'markerLineColor': '#1bbc9b',\n    'markerLineDasharray': [10, 5],\n    'markerFillOpacity': 0.1,\n    'markerFill': '#1bbc9b',\n    'markerWidth': 1,\n    'markerHeight': 1\n  }\n});\nMap$1.addOnLoadHook('addHandler', 'boxZoom', MapBoxZoomHander);\nvar PANOFFSET = 30;\nvar MapAutoPanAtEdgeHandler = function (_Handler) {\n  _inheritsLoose(MapAutoPanAtEdgeHandler, _Handler);\n  function MapAutoPanAtEdgeHandler() {\n    return _Handler.apply(this, arguments) || this;\n  }\n  var _proto = MapAutoPanAtEdgeHandler.prototype;\n  _proto.addHooks = function addHooks() {\n    if (!this.target) {\n      return;\n    }\n    this.target.on('_mousemove', this._onMouseMove, this);\n  };\n  _proto.removeHooks = function removeHooks() {\n    if (!this.target) {\n      return;\n    }\n    this.target.off('_mousemove', this._onMouseMove, this);\n  };\n  _proto._onMouseMove = function _onMouseMove(event) {\n    var map = this.target;\n    if (map.options['autoPanAtEdge']) {\n      var containerPoint = event.containerPoint;\n      var containerExtent = map.getContainerExtent();\n      if (containerExtent) {\n        var x = containerPoint.x,\n          y = containerPoint.y;\n        var xmax = containerExtent.xmax,\n          ymax = containerExtent.ymax;\n        var p;\n        if (x < PANOFFSET) {\n          p = [Math.abs(x - PANOFFSET), 0];\n        }\n        if (y < PANOFFSET) {\n          p = [0, Math.abs(y - PANOFFSET)];\n        }\n        if (x + PANOFFSET > xmax) {\n          p = [-Math.abs(x + PANOFFSET - xmax), 0];\n        }\n        if (y + PANOFFSET > ymax) {\n          p = [0, -Math.abs(y + PANOFFSET - ymax)];\n        }\n        if (p) {\n          map.panBy(p, {\n            duration: 1\n          });\n        }\n      }\n    }\n  };\n  return MapAutoPanAtEdgeHandler;\n}(Handler$1);\nMap$1.mergeOptions({\n  'autoPanAtEdge': false\n});\nMap$1.addOnLoadHook('addHandler', 'autoPanAtEdge', MapAutoPanAtEdgeHandler);\nMap$1.include({\n  animateTo: function animateTo(view, options, step) {\n    var _this = this;\n    if (options === void 0) {\n      options = {};\n    }\n    view = extend({}, this.getView(), view);\n    if (isFunction(options)) {\n      step = options;\n      options = {};\n    }\n    var projection = this.getProjection(),\n      currView = this.getView(),\n      props = {};\n    var empty = true;\n    for (var p in view) {\n      if (hasOwn(view, p) && !isNil(view[p]) && (p === 'prjCenter' || !isNil(currView[p]))) {\n        empty = false;\n        if (p === 'center') {\n          var from = new Coordinate(currView[p]),\n            to = new Coordinate(view[p]);\n          if (!from.equals(to)) {\n            props['center'] = [from, to];\n          }\n        } else if (p === 'prjCenter') {\n          var _from = new Coordinate(this._getPrjCenter());\n          var _to = new Coordinate(view[p]);\n          if (!_from.equals(_to)) {\n            props['prjCenter'] = [_from, _to];\n          }\n        } else if (currView[p] !== view[p] && p !== 'around') {\n          props[p] = [currView[p], view[p]];\n        }\n      }\n    }\n    if (empty) {\n      return null;\n    }\n    if (this._animPlayer) {\n      if (this._isInternalAnimation) {\n        if (this._animPlayer.playState === 'running') {\n          this._animPlayer.pause();\n          this._prevAnimPlayer = this._animPlayer;\n        }\n      } else {\n        delete this._prevAnimPlayer;\n        this._stopAnim(this._animPlayer);\n      }\n    }\n    var zoomOrigin = view['around'] || new Point(this.width / 2, this.height / 2);\n    var renderer = this._getRenderer(),\n      framer = function framer(fn) {\n        renderer.callInNextFrame(fn);\n      };\n    var player = this._animPlayer = Animation.animate(props, {\n      'easing': options['easing'] || 'out',\n      'duration': options['duration'] || this.options['zoomAnimationDuration'],\n      'framer': framer,\n      'repeat': options['repeat']\n    }, function (frame) {\n      if (_this.isRemoved()) {\n        player.finish();\n        return;\n      }\n      if (player.playState === 'running') {\n        if (frame.styles['center']) {\n          var center = frame.styles['center'];\n          _this._setPrjCenter(projection.project(center));\n          _this.onMoving(_this._parseEventFromCoord(_this.getCenter()));\n        } else if (frame.styles['prjCenter']) {\n          var _center = frame.styles['prjCenter'];\n          _this._setPrjCenter(_center);\n          _this.onMoving(_this._parseEventFromCoord(_this.getCenter()));\n        }\n        if (!isNil(frame.styles['zoom'])) {\n          _this.onZooming(frame.styles['zoom'], zoomOrigin);\n        }\n        if (!isNil(frame.styles['pitch'])) {\n          _this._setPitch(frame.styles['pitch']);\n        }\n        if (!isNil(frame.styles['bearing'])) {\n          _this._setBearing(frame.styles['bearing']);\n        }\n        _this._fireEvent('animating');\n      } else if (player.playState !== 'paused' || player === _this._mapAnimPlayer) {\n        if (!player._interupted) {\n          if (props['center']) {\n            _this._setPrjCenter(projection.project(props['center'][1]));\n          } else if (props['prjCenter']) {\n            _this._setPrjCenter(props['prjCenter'][1]);\n          }\n          if (!isNil(props['pitch'])) {\n            _this._setPitch(props['pitch'][1]);\n          }\n          if (!isNil(props['bearing'])) {\n            _this._setBearing(props['bearing'][1]);\n          }\n        }\n        _this._endAnim(player, props, zoomOrigin, options);\n      }\n      if (step) {\n        step(frame);\n      }\n    }, this);\n    this._startAnim(props, zoomOrigin);\n    return player;\n  },\n  _animateTo: function _animateTo(view, options, step) {\n    if (options === void 0) {\n      options = {};\n    }\n    if (this._mapAnimPlayer) {\n      this._stopAnim(this._mapAnimPlayer);\n    }\n    this._isInternalAnimation = true;\n    this._mapAnimPlayer = this.animateTo(view, options, step);\n    delete this._isInternalAnimation;\n    return this._mapAnimPlayer;\n  },\n  flyTo: function flyTo(view, options, step) {\n    var _this2 = this;\n    if (options === void 0) {\n      options = {};\n    }\n    view = extend({}, this.getView(), view);\n    if (this._animPlayer) {\n      if (this._isInternalAnimation) {\n        if (this._animPlayer.playState === 'running') {\n          this._animPlayer.pause();\n          this._prevAnimPlayer = this._animPlayer;\n        }\n      } else {\n        delete this._prevAnimPlayer;\n        this._stopAnim(this._animPlayer);\n      }\n    }\n    if (isFunction(options)) {\n      step = options;\n      options = {};\n    }\n    options = extend({\n      curve: 1.42\n    }, options);\n    var map = this;\n    function zoomScale(z0, z1) {\n      return map.getResolution(z1) / map.getResolution(z0);\n    }\n    var zoomOrigin = view['around'] || new Point(this.width / 2, this.height / 2);\n    var minZoom = this.getMinZoom();\n    var maxZoom = this.getMaxZoom();\n    var projection = this.getProjection();\n    var currView = this.getView();\n    var startZoom = currView.zoom;\n    var startBearing = currView.bearing;\n    var startPitch = currView.pitch;\n    var zoom = 'zoom' in view ? clamp(+view.zoom, minZoom, maxZoom) : startZoom;\n    var bearing = 'bearing' in view ? +view.bearing : startBearing;\n    var pitch = 'pitch' in view ? +view.pitch : startPitch;\n    var center = projection.project(view.center && new Coordinate(view.center) || this.getCenter());\n    var scale = zoomScale(zoom, startZoom);\n    var from = projection.project(this.getCenter());\n    var delta = center.sub(from);\n    var rho = options.curve;\n    var w0 = Math.max(this.width, this.height),\n      w1 = w0 / scale,\n      u1 = delta.mag();\n    if ('minZoom' in options) {\n      var animMinZoom = clamp(Math.min(options.minZoom, startZoom, zoom), minZoom, maxZoom);\n      var wMax = w0 / zoomScale(animMinZoom, startZoom);\n      rho = Math.sqrt(wMax / u1 * 2);\n    }\n    var rho2 = rho * rho;\n    function r(i) {\n      var b = (w1 * w1 - w0 * w0 + (i ? -1 : 1) * rho2 * rho2 * u1 * u1) / (2 * (i ? w1 : w0) * rho2 * u1);\n      return Math.log(Math.sqrt(b * b + 1) - b);\n    }\n    function sinh(n) {\n      return (Math.exp(n) - Math.exp(-n)) / 2;\n    }\n    function cosh(n) {\n      return (Math.exp(n) + Math.exp(-n)) / 2;\n    }\n    function tanh(n) {\n      return sinh(n) / cosh(n);\n    }\n    var r0 = r(0);\n    var w = function w(s) {\n      return cosh(r0) / cosh(r0 + rho * s);\n    };\n    var u = function u(s) {\n      return w0 * ((cosh(r0) * tanh(r0 + rho * s) - sinh(r0)) / rho2) / u1;\n    };\n    var S = (r(1) - r0) / rho;\n    if (Math.abs(u1) < 0.000001 || !isFinite(S)) {\n      if (Math.abs(w0 - w1) < 0.000001) return this.animateTo(view, options, step);\n      var k = w1 < w0 ? -1 : 1;\n      S = Math.abs(Math.log(w1 / w0)) / rho;\n      u = function u() {\n        return 0;\n      };\n      w = function w(s) {\n        return Math.exp(k * rho * s);\n      };\n    }\n    var renderer = this._getRenderer();\n    var framer = function framer(fn) {\n      renderer.callInNextFrame(fn);\n    };\n    var player = this._animPlayer = Animation.animate({\n      k: [0, 1]\n    }, {\n      'easing': options['easing'] || 'out',\n      'duration': options['duration'] || 8,\n      'framer': framer\n    }, function (frame) {\n      if (_this2.isRemoved()) {\n        player.finish();\n        return;\n      }\n      var k = frame.styles.k;\n      var s = k * S;\n      var scale = 1 / w(s);\n      var props = {};\n      if (view.center) {\n        var newCenter = k === 1 ? center : from.add(delta.multi(u(s)));\n        props.prjCenter = [center, newCenter];\n      }\n      if (startZoom !== zoom) {\n        var newZoom = k === 1 ? zoom : _this2.getZoomForScale(scale, startZoom, true);\n        props.zoom = [startZoom, newZoom];\n      }\n      if (startPitch !== pitch) {\n        var newPitch = interpolate$2(startPitch, pitch, k);\n        props.pitch = [pitch, newPitch];\n      }\n      if (startBearing !== bearing) {\n        var newBearing = interpolate$2(startBearing, bearing, k);\n        props.bearing = [bearing, newBearing];\n      }\n      if (player.playState === 'running') {\n        if (props['prjCenter']) {\n          var _center2 = props['prjCenter'];\n          _this2._setPrjCenter(_center2[1]);\n          _this2.onMoving(_this2._parseEventFromCoord(_this2.getCenter()));\n        }\n        if (props['zoom']) {\n          _this2.onZooming(props['zoom'][1], zoomOrigin);\n        }\n        if (props['pitch']) {\n          _this2._setPitch(props['pitch'][1]);\n        }\n        if (props['bearing']) {\n          _this2._setBearing(props['bearing'][1]);\n        }\n        _this2._fireEvent('animating');\n      } else if (player.playState !== 'paused' || player === _this2._mapAnimPlayer) {\n        if (!player._interupted) {\n          if (props['prjCenter']) {\n            _this2._setPrjCenter(props['prjCenter'][1]);\n          }\n          if (props['pitch']) {\n            _this2._setPitch(props['pitch'][1]);\n          }\n          if (props['bearing']) {\n            _this2._setBearing(props['bearing'][1]);\n          }\n        }\n        _this2._endAnim(player, props, zoomOrigin, options);\n      }\n      if (step) {\n        step(frame);\n      }\n    });\n    this._startAnim({\n      center: view.center,\n      zoom: view.zoom !== startZoom,\n      pitch: pitch !== startPitch,\n      bearing: bearing !== startBearing\n    }, zoomOrigin);\n    return this;\n  },\n  isAnimating: function isAnimating() {\n    return !!this._animPlayer;\n  },\n  isRotating: function isRotating() {\n    return this.isDragRotating() || !!this._animRotating;\n  },\n  _endAnim: function _endAnim(player, props, zoomOrigin, options) {\n    delete this._animRotating;\n    var evtType = player._interupted ? 'animateinterrupted' : 'animateend';\n    if (player === this._animPlayer) {\n      delete this._animPlayer;\n    }\n    if (player === this._mapAnimPlayer) {\n      delete this._mapAnimPlayer;\n    }\n    if (props['center']) {\n      var endCoord;\n      if (player._interupted) {\n        endCoord = this.getCenter();\n      } else {\n        endCoord = props['center'][1];\n      }\n      this.onMoveEnd(this._parseEventFromCoord(endCoord));\n    } else if (props['prjCenter']) {\n      var _endCoord;\n      if (player._interupted) {\n        _endCoord = this._getPrjCenter();\n      } else {\n        _endCoord = props['prjCenter'][1];\n      }\n      var event = this._parseEventFromCoord(this.getProjection().unproject(_endCoord));\n      event['point2d'] = this._prjToPoint(_endCoord);\n      this.onMoveEnd(event);\n    }\n    if (!isNil(props['zoom'])) {\n      if (player._interupted) {\n        this.onZoomEnd(this.getZoom());\n      } else if (!options['wheelZoom']) {\n        this.onZoomEnd(props['zoom'][1]);\n      } else {\n        this.onZooming(props['zoom'][1], zoomOrigin);\n      }\n    }\n    if (evtType) {\n      this._fireEvent(evtType);\n    }\n    if (!isNil(props['pitch']) && !this.getPitch()) {\n      this.getRenderer().setToRedraw();\n    }\n    if (!options['wheelZoom']) {\n      this._resumePrev(player);\n    }\n  },\n  _startAnim: function _startAnim(props, zoomOrigin) {\n    if (!this._animPlayer) {\n      return;\n    }\n    if (props['center'] || props['prjCenter']) {\n      this.onMoveStart();\n    }\n    if (props['zoom'] && !this.isZooming()) {\n      this.onZoomStart(props['zoom'][1], zoomOrigin);\n    }\n    if (props['pitch'] || props['bearing']) {\n      this._animRotating = true;\n    }\n    this._fireEvent('animatestart');\n    this._animPlayer.play();\n  },\n  _stopAnim: function _stopAnim(player) {\n    if (!player) {\n      return;\n    }\n    delete this._animRotating;\n    if (player.playState !== 'finished') {\n      player._interupted = true;\n      player.cancel();\n    }\n    if (player === this._animPlayer) {\n      delete this._animPlayer;\n    }\n    if (player === this._mapAnimPlayer) {\n      delete this._mapAnimPlayer;\n    }\n  },\n  _resumePrev: function _resumePrev(player) {\n    if (!this._prevAnimPlayer) {\n      return;\n    }\n    var prevPlayer = this._prevAnimPlayer;\n    if (prevPlayer.playState !== 'paused') {\n      delete this._prevAnimPlayer;\n    }\n    if (player !== prevPlayer) {\n      this._animPlayer = prevPlayer;\n      prevPlayer.play();\n    }\n  }\n});\nfunction interpolate$2(a, b, t) {\n  return a * (1 - t) + b * t;\n}\nvar events = 'mousedown ' + 'mouseup ' + 'mouseover ' + 'mouseout ' + 'mouseenter ' + 'mouseleave ' + 'mousemove ' + 'click ' + 'dblclick ' + 'contextmenu ' + 'keypress ' + 'touchstart ' + 'touchmove ' + 'touchend ';\nMap$1.include({\n  _registerDomEvents: function _registerDomEvents() {\n    var dom = this._panels.mapWrapper || this._containerDOM;\n    addDomEvent(dom, events, this._handleDOMEvent, this);\n  },\n  _removeDomEvents: function _removeDomEvents() {\n    var dom = this._panels.mapWrapper || this._containerDOM;\n    removeDomEvent(dom, events, this._handleDOMEvent, this);\n  },\n  _handleDOMEvent: function _handleDOMEvent(e) {\n    var clickTimeThreshold = this.options['clickTimeThreshold'];\n    var type = e.type;\n    var isMouseDown = type === 'mousedown' || type === 'touchstart' && (!e.touches || e.touches.length === 1);\n    if (isMouseDown) {\n      this._domMouseDownTime = now();\n      this._domMouseDownView = this.getView();\n    }\n    var isRotating = type === 'contextmenu' && isRotatingMap(this);\n    if (type === 'contextmenu') {\n      preventDefault(e);\n      var downTime = this._domMouseDownTime;\n      var time = now();\n      if (time - downTime <= clickTimeThreshold && !isRotating) {\n        this._fireDOMEvent(this, e, 'dom:' + e.type);\n      }\n    } else {\n      this._fireDOMEvent(this, e, 'dom:' + e.type);\n    }\n    if (this._ignoreEvent(e)) {\n      return;\n    }\n    var mimicClick = false;\n    if (isMouseDown) {\n      this._mouseDownTime = now();\n    } else if (type === 'click' || type === 'touchend' || type === 'contextmenu') {\n      if (!this._mouseDownTime) {\n        return;\n      } else {\n        var _downTime = this._mouseDownTime;\n        delete this._mouseDownTime;\n        var _time = now();\n        if (_time - _downTime > clickTimeThreshold) {\n          if (type === 'click' || type === 'contextmenu') {\n            return;\n          }\n        } else if (type === 'contextmenu') {\n          if (isRotating) {\n            return;\n          }\n        } else if (type === 'touchend') {\n          mimicClick = true;\n        }\n      }\n    }\n    var mimicEvent;\n    if (mimicClick) {\n      if (this._clickTime && now() - this._clickTime <= clickTimeThreshold) {\n        delete this._clickTime;\n        mimicEvent = 'dblclick';\n        this._fireDOMEvent(this, e, 'dom:dblclick');\n      } else {\n        this._clickTime = now();\n        mimicEvent = 'click';\n        this._fireDOMEvent(this, e, 'dom:click');\n      }\n    }\n    if (this._ignoreEvent(e)) {\n      return;\n    }\n    this._fireDOMEvent(this, e, type);\n    if (mimicEvent) {\n      this._fireDOMEvent(this, e, mimicEvent);\n    }\n  },\n  _ignoreEvent: function _ignoreEvent(domEvent) {\n    if (!domEvent || !this._panels.control) {\n      return false;\n    }\n    if (this._isEventOutMap(domEvent)) {\n      return true;\n    }\n    var target = domEvent.srcElement || domEvent.target;\n    var preTarget;\n    if (target) {\n      while (target && target !== this._containerDOM) {\n        if (target.className && target.className.indexOf && (target.className.indexOf('maptalks-control') >= 0 || target.className.indexOf('maptalks-ui') >= 0 && preTarget && !preTarget['eventsPropagation'])) {\n          return true;\n        }\n        preTarget = target;\n        target = target.parentNode;\n      }\n    }\n    return false;\n  },\n  _isEventOutMap: function _isEventOutMap(domEvent) {\n    if (this.getPitch() > this.options['maxVisualPitch']) {\n      var actualEvent = this._getActualEvent(domEvent);\n      var eventPos = getEventContainerPoint(actualEvent, this._containerDOM);\n      if (!this.getContainerExtent().contains(eventPos)) {\n        return true;\n      }\n    }\n    return false;\n  },\n  _parseEvent: function _parseEvent(e, type) {\n    if (!e) {\n      return null;\n    }\n    var eventParam = {\n      'domEvent': e\n    };\n    if (type !== 'keypress') {\n      var actual = this._getActualEvent(e);\n      if (actual && actual.clientX !== undefined) {\n        var containerPoint = getEventContainerPoint(actual, this._containerDOM);\n        eventParam = extend(eventParam, {\n          'containerPoint': containerPoint,\n          'viewPoint': this.containerPointToViewPoint(containerPoint)\n        });\n        var maxVisualPitch = this.options['maxVisualPitch'];\n        if (this.getPitch() <= maxVisualPitch || containerPoint.y >= this.height - this._getVisualHeight(maxVisualPitch)) {\n          eventParam = extend(eventParam, {\n            'coordinate': this.containerPointToCoord(containerPoint),\n            'point2d': this._containerPointToPoint(containerPoint)\n          });\n        }\n      }\n    }\n    return eventParam;\n  },\n  _parseEventFromCoord: function _parseEventFromCoord(coord) {\n    var containerPoint = this.coordToContainerPoint(coord),\n      viewPoint = this.containerPointToViewPoint(containerPoint);\n    var e = {\n      'coordinate': coord,\n      'containerPoint': containerPoint,\n      'viewPoint': viewPoint,\n      'point2d': this.coordToPoint(coord)\n    };\n    return e;\n  },\n  _getActualEvent: function _getActualEvent(e) {\n    return e.touches && e.touches.length > 0 ? e.touches[0] : e.changedTouches && e.changedTouches.length > 0 ? e.changedTouches[0] : e;\n  },\n  _fireDOMEvent: function _fireDOMEvent(target, e, type) {\n    var _this = this;\n    if (this.isRemoved()) {\n      return;\n    }\n    var eventParam = this._parseEvent(e, type);\n    if (isMoveEvent(type)) {\n      this.getRenderer().callInNextFrame(function () {\n        if (eventParam.domEvent && eventParam.domEvent._cancelBubble) {\n          _this._fireEvent('_' + type, eventParam);\n          return;\n        }\n        _this._fireEvent(type, eventParam);\n      });\n    } else {\n      this._fireEvent(type, eventParam);\n    }\n  },\n  _getEventParams: function _getEventParams(e) {\n    var map = this;\n    var eventParam = {\n      'domEvent': e\n    };\n    var actual = e.touches && e.touches.length > 0 ? e.touches[0] : e.changedTouches && e.changedTouches.length > 0 ? e.changedTouches[0] : e;\n    if (actual) {\n      var containerPoint = getEventContainerPoint(actual, map._containerDOM);\n      eventParam['coordinate'] = map.containerPointToCoordinate(containerPoint);\n      eventParam['containerPoint'] = containerPoint;\n      eventParam['viewPoint'] = map.containerPointToViewPoint(containerPoint);\n      eventParam['pont2d'] = map._containerPointToPoint(containerPoint);\n    }\n    return eventParam;\n  }\n});\nMap$1.addOnLoadHook('_registerDomEvents');\nfunction isRotatingMap(map) {\n  if (!map._domMouseDownView) {\n    return true;\n  }\n  var view = map.getView(),\n    mouseDownView = map._domMouseDownView;\n  return view.bearing !== mouseDownView.bearing || view.pitch !== mouseDownView.pitch;\n}\nMap$1.include({\n  isFullScreen: function isFullScreen() {\n    return !!(document.webkitIsFullScreen || document.mozFullScreen || document.msFullscreenElement || document.fullscreenElement);\n  },\n  requestFullScreen: function requestFullScreen(dom) {\n    this._fireEvent('fullscreenstart');\n    this._requestFullScreen(dom || this._containerDOM);\n    this._fireEvent('fullscreenend');\n    return this;\n  },\n  cancelFullScreen: function cancelFullScreen() {\n    this._cancelFullScreen();\n    this._fireEvent('cancelfullscreen');\n    return this;\n  },\n  _requestFullScreen: function _requestFullScreen(dom) {\n    if (dom.requestFullscreen) {\n      dom.requestFullscreen();\n    } else if (dom.mozRequestFullScreen) {\n      dom.mozRequestFullScreen();\n    } else if (dom.webkitRequestFullScreen) {\n      dom.webkitRequestFullScreen();\n    } else if (dom.msRequestFullScreen) {\n      dom.msRequestFullScreen();\n    } else {\n      var features = 'fullscreen=1,status=no,resizable=yes,top=0,left=0,scrollbars=no,' + 'titlebar=no,menubar=no,location=no,toolbar=no,z-look=yes,' + 'width=' + (screen.availWidth - 8) + ',height=' + (screen.availHeight - 45);\n      var newWin = window.open(location.href, '_blank', features);\n      if (newWin !== null) {\n        window.opener = null;\n        window.close();\n      }\n    }\n  },\n  _cancelFullScreen: function _cancelFullScreen() {\n    if (document.exitFullscreen) {\n      document.exitFullscreen();\n    } else if (document.mozCancelFullScreen) {\n      document.mozCancelFullScreen();\n    } else if (document.webkitCancelFullScreen) {\n      document.webkitCancelFullScreen();\n    } else {\n      var features = 'fullscreen=no,status=yes,resizable=yes,scrollbars=no,' + 'titlebar=no,menubar=yes,location=yes,toolbar=yes,z-look=yes';\n      var newWin = window.open(location.href, '_blank', features);\n      if (newWin !== null) {\n        window.opener = null;\n        window.close();\n      }\n    }\n  }\n});\nMap$1.include({\n  panTo: function panTo(coordinate, options, step) {\n    if (options === void 0) {\n      options = {};\n    }\n    if (!coordinate) {\n      return this;\n    }\n    if (isFunction(options)) {\n      step = options;\n      options = {};\n    }\n    coordinate = new Coordinate(coordinate);\n    if (typeof options['animation'] === 'undefined' || options['animation']) {\n      var prjCoord = this.getProjection().project(coordinate);\n      return this._panAnimation(prjCoord, options['duration'], step);\n    } else {\n      this.setCenter(coordinate);\n    }\n    return this;\n  },\n  _panTo: function _panTo(prjCoord, options) {\n    if (options === void 0) {\n      options = {};\n    }\n    if (typeof options['animation'] === 'undefined' || options['animation']) {\n      return this._panAnimation(prjCoord, options['duration']);\n    } else {\n      this.onMoveStart();\n      this._setPrjCenter(prjCoord);\n      this.onMoveEnd(this._parseEventFromCoord(this.getCenter()));\n      return this;\n    }\n  },\n  panBy: function panBy(offset, options, step) {\n    if (options === void 0) {\n      options = {};\n    }\n    if (!offset) {\n      return this;\n    }\n    if (isFunction(options)) {\n      step = options;\n      options = {};\n    }\n    offset = new Point(offset);\n    var containerExtent = this.getContainerExtent();\n    var ymin = containerExtent.ymin;\n    if (ymin > 0 && offset.y > 30) {\n      var y = offset.y;\n      offset.y = 30;\n      offset.x = offset.x * 30 / y;\n      console.warn('offset is limited to panBy when pitch is above maxPitch');\n    }\n    if (typeof options['animation'] === 'undefined' || options['animation']) {\n      offset = offset.multi(-1);\n      var target = this._containerPointToPrj(new Point(this.width / 2 + offset.x, this.height / 2 + offset.y));\n      this._panAnimation(target, options['duration'], step);\n    } else {\n      this.onMoveStart();\n      this._offsetCenterByPixel(offset);\n      var endCoord = this.containerPointToCoord(new Point(this.width / 2, this.height / 2));\n      this.onMoveEnd(this._parseEventFromCoord(endCoord));\n    }\n    return this;\n  },\n  _panAnimation: function _panAnimation(target, t, cb) {\n    return this._animateTo({\n      'prjCenter': target\n    }, {\n      'duration': t || this.options['panAnimationDuration']\n    }, cb);\n  }\n});\nGeometry.fromJSON = function (json) {\n  if (Array.isArray(json)) {\n    var result = [];\n    for (var i = 0, len = json.length; i < len; i++) {\n      var c = Geometry.fromJSON(json[i]);\n      if (Array.isArray(json)) {\n        result = result.concat(c);\n      } else {\n        result.push(c);\n      }\n    }\n    return result;\n  }\n  if (json && !json['feature']) {\n    return GeoJSON.toGeometry(json);\n  }\n  var geometry;\n  if (json['subType']) {\n    geometry = Geometry.getJSONClass(json['subType']).fromJSON(json);\n    if (!isNil(json['feature']['id'])) {\n      geometry.setId(json['feature']['id']);\n    }\n  } else {\n    geometry = GeoJSON.toGeometry(json['feature']);\n    if (json['options']) {\n      geometry.config(json['options']);\n    }\n  }\n  if (json['symbol']) {\n    geometry.setSymbol(json['symbol']);\n  }\n  if (json['infoWindow']) {\n    geometry.setInfoWindow(json['infoWindow']);\n  }\n  return geometry;\n};\nLayer.fromJSON = function (layerJSON) {\n  if (!layerJSON) {\n    return null;\n  }\n  var layerType = layerJSON['type'];\n  var clazz = Layer.getJSONClass(layerType);\n  if (!clazz || !clazz.fromJSON) {\n    throw new Error('unsupported layer type:' + layerType);\n  }\n  return clazz.fromJSON(layerJSON);\n};\nMap$1.include({\n  'JSON_VERSION': '1.0',\n  toJSON: function toJSON(options) {\n    if (!options) {\n      options = {};\n    }\n    var json = {\n      'jsonVersion': this['JSON_VERSION'],\n      'version': this.VERSION,\n      'extent': this.getExtent().toJSON()\n    };\n    json['options'] = this.config();\n    json['options']['center'] = this.getCenter();\n    json['options']['zoom'] = this.getZoom();\n    json['options']['bearing'] = this.getBearing();\n    json['options']['pitch'] = this.getPitch();\n    var baseLayer = this.getBaseLayer();\n    if ((isNil(options['baseLayer']) || options['baseLayer']) && baseLayer) {\n      json['baseLayer'] = baseLayer.toJSON(options['baseLayer']);\n    }\n    var extraLayerOptions = {};\n    if (options['clipExtent']) {\n      if (options['clipExtent'] === true) {\n        extraLayerOptions['clipExtent'] = this.getExtent();\n      } else {\n        extraLayerOptions['clipExtent'] = options['clipExtent'];\n      }\n    }\n    var layersJSON = [];\n    if (isNil(options['layers']) || options['layers'] && !Array.isArray(options['layers'])) {\n      var layers = this.getLayers();\n      for (var i = 0, len = layers.length; i < len; i++) {\n        if (!layers[i].toJSON) {\n          continue;\n        }\n        var opts = extend({}, isObject(options['layers']) ? options['layers'] : {}, extraLayerOptions);\n        layersJSON.push(layers[i].toJSON(opts));\n      }\n      json['layers'] = layersJSON;\n    } else if (isArrayHasData(options['layers'])) {\n      var _layers = options['layers'];\n      for (var _i = 0; _i < _layers.length; _i++) {\n        var exportOption = _layers[_i];\n        var layer = this.getLayer(exportOption['id']);\n        if (!layer.toJSON) {\n          continue;\n        }\n        var _opts = extend({}, exportOption['options'], extraLayerOptions);\n        layersJSON.push(layer.toJSON(_opts));\n      }\n      json['layers'] = layersJSON;\n    } else {\n      json['layers'] = [];\n    }\n    return json;\n  }\n});\nMap$1.fromJSON = function (container, profile, options) {\n  if (!container || !profile) {\n    return null;\n  }\n  if (!options) {\n    options = {};\n  }\n  var map = new Map$1(container, profile['options']);\n  if (isNil(options['baseLayer']) || options['baseLayer']) {\n    var baseLayer = Layer.fromJSON(profile['baseLayer']);\n    if (baseLayer) {\n      map.setBaseLayer(baseLayer);\n    }\n  }\n  if (isNil(options['layers']) || options['layers']) {\n    var layers = [];\n    var layerJSONs = profile['layers'];\n    for (var i = 0; i < layerJSONs.length; i++) {\n      var layer = Layer.fromJSON(layerJSONs[i]);\n      layers.push(layer);\n    }\n    map.addLayer(layers);\n  }\n  return map;\n};\nMap$1.include({\n  computeLength: function computeLength(coord1, coord2) {\n    if (!this.getProjection()) {\n      return null;\n    }\n    var p1 = new Coordinate(coord1),\n      p2 = new Coordinate(coord2);\n    if (p1.equals(p2)) {\n      return 0;\n    }\n    return this.getProjection().measureLength(p1, p2);\n  },\n  computeGeometryLength: function computeGeometryLength(geometry) {\n    return geometry._computeGeodesicLength(this.getProjection());\n  },\n  computeGeometryArea: function computeGeometryArea(geometry) {\n    return geometry._computeGeodesicArea(this.getProjection());\n  },\n  identify: function identify(opts, callback) {\n    opts = opts || {};\n    var coordinate = new Coordinate(opts['coordinate']);\n    return this._identify(opts, callback, function (layer) {\n      return layer.identify(coordinate, opts);\n    });\n  },\n  identifyAtPoint: function identifyAtPoint(opts, callback) {\n    var isMapGeometryEvent = opts.includeInternals;\n    var tolerance = opts.tolerance;\n    opts = opts || {};\n    var containerPoint = new Point(opts['containerPoint']);\n    var coordinate = this.containerPointToCoord(containerPoint);\n    return this._identify(opts, callback, function (layer) {\n      var result;\n      if (isMapGeometryEvent && !isNil(layer.options.geometryEventTolerance)) {\n        opts.tolerance = opts.tolerance || 0;\n        opts.tolerance += layer.options.geometryEventTolerance;\n      }\n      if (layer.identifyAtPoint) {\n        result = layer.identifyAtPoint(containerPoint, opts);\n      } else if (coordinate && layer.identify) {\n        result = layer.identify(coordinate, opts);\n      } else {\n        result = [];\n      }\n      if (isMapGeometryEvent) {\n        if (isNil(tolerance)) {\n          delete opts.tolerance;\n        } else {\n          opts.tolerance = tolerance;\n        }\n      }\n      if (!result || !result.length) {\n        layer.fire('identifyempty', opts);\n      }\n      return result;\n    });\n  },\n  _identify: function _identify(opts, callback, fn) {\n    var reqLayers = opts['layers'];\n    if (!isArrayHasData(reqLayers)) {\n      return this;\n    }\n    var eventTypes = opts.eventTypes;\n    var layers = [];\n    for (var i = 0, len = reqLayers.length; i < len; i++) {\n      if (isString(reqLayers[i])) {\n        layers.push(this.getLayer(reqLayers[i]));\n      } else {\n        layers.push(reqLayers[i]);\n      }\n    }\n    if (eventTypes) {\n      layers = layers.filter(function (layer) {\n        if (!layer._hasGeoListeners) {\n          return true;\n        }\n        return layer._hasGeoListeners(eventTypes);\n      });\n    }\n    var hits = [];\n    for (var _i = layers.length - 1; _i >= 0; _i--) {\n      if (opts['count'] && hits.length >= opts['count']) {\n        break;\n      }\n      var layer = layers[_i];\n      if (!layer || !layer.getMap() || !opts['includeInvisible'] && !layer.isVisible() || !opts['includeInternals'] && layer.getId().indexOf(INTERNAL_LAYER_PREFIX) >= 0) {\n        continue;\n      }\n      var layerHits = fn(layer);\n      if (layerHits) {\n        if (Array.isArray(layerHits)) {\n          pushIn(hits, layerHits);\n        } else {\n          hits.push(layerHits);\n        }\n      }\n    }\n    callback.call(this, hits);\n    return this;\n  }\n});\nMap$1.include({\n  _zoom: function _zoom(nextZoom, origin) {\n    if (!this.options['zoomable'] || this.isZooming()) {\n      return;\n    }\n    origin = this._checkZoomOrigin(origin);\n    nextZoom = this._checkZoom(nextZoom);\n    this.onZoomStart(nextZoom, origin);\n    this._frameZoom = this.getZoom();\n    this.onZoomEnd(nextZoom, origin);\n  },\n  _zoomAnimation: function _zoomAnimation(nextZoom, origin, startScale) {\n    if (!this.options['zoomable'] || this.isZooming()) {\n      return;\n    }\n    nextZoom = this._checkZoom(nextZoom);\n    if (this.getZoom() === nextZoom) {\n      return;\n    }\n    origin = this._checkZoomOrigin(origin);\n    this._startZoomAnim(nextZoom, origin, startScale);\n  },\n  _checkZoomOrigin: function _checkZoomOrigin(origin) {\n    if (!origin || this.options['zoomInCenter']) {\n      origin = new Point(this.width / 2, this.height / 2);\n    }\n    if (this.options['zoomOrigin']) {\n      origin = new Point(this.options['zoomOrigin']);\n    }\n    return origin;\n  },\n  _startZoomAnim: function _startZoomAnim(nextZoom, origin, startScale) {\n    if (isNil(startScale)) {\n      startScale = 1;\n    }\n    var endScale = this._getResolution(this._startZoomVal) / this._getResolution(nextZoom);\n    var duration = this.options['zoomAnimationDuration'] * Math.abs(endScale - startScale) / Math.abs(endScale - 1);\n    this._frameZoom = this._startZoomVal;\n    this._animateTo({\n      'zoom': nextZoom,\n      'around': origin\n    }, {\n      'continueOnViewChanged': true,\n      'duration': duration\n    });\n  },\n  onZoomStart: function onZoomStart(nextZoom, origin) {\n    if (!this.options['zoomable'] || this.isZooming()) {\n      return;\n    }\n    if (this._mapAnimPlayer) {\n      this._stopAnim(this._mapAnimPlayer);\n    }\n    delete this.cameraZenithDistance;\n    this._zooming = true;\n    this._startZoomVal = this.getZoom();\n    this._startZoomCoord = this._containerPointToPrj(origin);\n    this._fireEvent('zoomstart', {\n      'from': this._startZoomVal,\n      'to': nextZoom\n    });\n  },\n  onZooming: function onZooming(nextZoom, origin, startScale) {\n    if (!this.options['zoomable']) {\n      return;\n    }\n    var frameZoom = this._frameZoom;\n    if (frameZoom === nextZoom) {\n      return;\n    }\n    if (isNil(startScale)) {\n      startScale = 1;\n    }\n    this._zoomTo(nextZoom, origin);\n    var res = this.getResolution(nextZoom),\n      fromRes = this.getResolution(this._startZoomVal),\n      scale = fromRes / res / startScale,\n      startPoint = this._prjToContainerPoint(this._startZoomCoord, this._startZoomVal);\n    var offset = this.getViewPoint();\n    if (!this.isRotating() && !startPoint.equals(origin) && scale !== 1) {\n      var pitch = this.getPitch();\n      var originOffset = startPoint._sub(origin)._multi(1 / (1 - scale));\n      if (pitch) {\n        originOffset.y /= Math.cos(pitch * Math.PI / 180);\n      }\n      origin = origin.add(originOffset);\n    }\n    var matrix = {\n      'view': [scale, 0, 0, scale, (origin.x - offset.x) * (1 - scale), (origin.y - offset.y) * (1 - scale)]\n    };\n    var dpr = this.getDevicePixelRatio();\n    if (dpr !== 1) {\n      origin = origin.multi(dpr);\n    }\n    matrix['container'] = [scale, 0, 0, scale, origin.x * (1 - scale), origin.y * (1 - scale)];\n    this._fireEvent('zooming', {\n      'from': this._startZoomVal,\n      'to': nextZoom,\n      'origin': origin,\n      'matrix': matrix\n    });\n    this._frameZoom = nextZoom;\n  },\n  onZoomEnd: function onZoomEnd(nextZoom, origin) {\n    if (!this.options['zoomable']) {\n      return;\n    }\n    var startZoomVal = this._startZoomVal;\n    this._zoomTo(nextZoom, origin);\n    this._zooming = false;\n    this._getRenderer().onZoomEnd();\n    if (!this._suppressRecenter) {\n      this._recenterOnTerrain();\n    }\n    this._fireEvent('zoomend', {\n      'from': startZoomVal,\n      'to': nextZoom\n    });\n    if (!this._verifyExtent(this._getPrjCenter())) {\n      this._panTo(this._prjMaxExtent.getCenter());\n    }\n  },\n  _zoomTo: function _zoomTo(nextZoom, origin) {\n    this._zoomLevel = nextZoom;\n    this._calcMatrices();\n    if (origin) {\n      this._setPrjCoordAtContainerPoint(this._startZoomCoord, origin);\n    }\n  },\n  _checkZoom: function _checkZoom(nextZoom) {\n    var maxZoom = this.getMaxZoom(),\n      minZoom = this.getMinZoom();\n    if (nextZoom < minZoom) {\n      nextZoom = minZoom;\n    }\n    if (nextZoom > maxZoom) {\n      nextZoom = maxZoom;\n    }\n    return nextZoom;\n  }\n});\nfunction perspective(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n    nf = 1 / (near - far);\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = (far + near) * nf;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 2 * far * near * nf;\n  out[15] = 0;\n  return out;\n}\nfunction translate(out, a, v) {\n  var x = v[0],\n    y = v[1],\n    z = v[2],\n    a00,\n    a01,\n    a02,\n    a03,\n    a10,\n    a11,\n    a12,\n    a13,\n    a20,\n    a21,\n    a22,\n    a23;\n  if (a === out) {\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n  } else {\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n    out[3] = a03;\n    out[4] = a10;\n    out[5] = a11;\n    out[6] = a12;\n    out[7] = a13;\n    out[8] = a20;\n    out[9] = a21;\n    out[10] = a22;\n    out[11] = a23;\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\n  }\n  return out;\n}\nfunction scale(out, a, v) {\n  var x = v[0],\n    y = v[1],\n    z = v[2];\n  out[0] = a[0] * x;\n  out[1] = a[1] * x;\n  out[2] = a[2] * x;\n  out[3] = a[3] * x;\n  out[4] = a[4] * y;\n  out[5] = a[5] * y;\n  out[6] = a[6] * y;\n  out[7] = a[7] * y;\n  out[8] = a[8] * z;\n  out[9] = a[9] * z;\n  out[10] = a[10] * z;\n  out[11] = a[11] * z;\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\nfunction rotateX(out, a, rad) {\n  var s = Math.sin(rad),\n    c = Math.cos(rad),\n    a10 = a[4],\n    a11 = a[5],\n    a12 = a[6],\n    a13 = a[7],\n    a20 = a[8],\n    a21 = a[9],\n    a22 = a[10],\n    a23 = a[11];\n  if (a !== out) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n  out[4] = a10 * c + a20 * s;\n  out[5] = a11 * c + a21 * s;\n  out[6] = a12 * c + a22 * s;\n  out[7] = a13 * c + a23 * s;\n  out[8] = a20 * c - a10 * s;\n  out[9] = a21 * c - a11 * s;\n  out[10] = a22 * c - a12 * s;\n  out[11] = a23 * c - a13 * s;\n  return out;\n}\nfunction rotateZ(out, a, rad) {\n  var s = Math.sin(rad),\n    c = Math.cos(rad),\n    a00 = a[0],\n    a01 = a[1],\n    a02 = a[2],\n    a03 = a[3],\n    a10 = a[4],\n    a11 = a[5],\n    a12 = a[6],\n    a13 = a[7];\n  if (a !== out) {\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n  out[0] = a00 * c + a10 * s;\n  out[1] = a01 * c + a11 * s;\n  out[2] = a02 * c + a12 * s;\n  out[3] = a03 * c + a13 * s;\n  out[4] = a10 * c - a00 * s;\n  out[5] = a11 * c - a01 * s;\n  out[6] = a12 * c - a02 * s;\n  out[7] = a13 * c - a03 * s;\n  return out;\n}\nfunction multiply(out, a, b) {\n  var a00 = a[0],\n    a01 = a[1],\n    a02 = a[2],\n    a03 = a[3],\n    a10 = a[4],\n    a11 = a[5],\n    a12 = a[6],\n    a13 = a[7],\n    a20 = a[8],\n    a21 = a[9],\n    a22 = a[10],\n    a23 = a[11],\n    a30 = a[12],\n    a31 = a[13],\n    a32 = a[14],\n    a33 = a[15];\n  var b0 = b[0],\n    b1 = b[1],\n    b2 = b[2],\n    b3 = b[3];\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[4];\n  b1 = b[5];\n  b2 = b[6];\n  b3 = b[7];\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[8];\n  b1 = b[9];\n  b2 = b[10];\n  b3 = b[11];\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[12];\n  b1 = b[13];\n  b2 = b[14];\n  b3 = b[15];\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  return out;\n}\nfunction invert(out, a) {\n  var a00 = a[0],\n    a01 = a[1],\n    a02 = a[2],\n    a03 = a[3],\n    a10 = a[4],\n    a11 = a[5],\n    a12 = a[6],\n    a13 = a[7],\n    a20 = a[8],\n    a21 = a[9],\n    a22 = a[10],\n    a23 = a[11],\n    a30 = a[12],\n    a31 = a[13],\n    a32 = a[14],\n    a33 = a[15],\n    b00 = a00 * a11 - a01 * a10,\n    b01 = a00 * a12 - a02 * a10,\n    b02 = a00 * a13 - a03 * a10,\n    b03 = a01 * a12 - a02 * a11,\n    b04 = a01 * a13 - a03 * a11,\n    b05 = a02 * a13 - a03 * a12,\n    b06 = a20 * a31 - a21 * a30,\n    b07 = a20 * a32 - a22 * a30,\n    b08 = a20 * a33 - a23 * a30,\n    b09 = a21 * a32 - a22 * a31,\n    b10 = a21 * a33 - a23 * a31,\n    b11 = a22 * a33 - a23 * a32,\n    det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n  if (!det) {\n    return null;\n  }\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n  return out;\n}\nfunction identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\nfunction copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\nfunction set$2(out, x, y, z) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\nfunction add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\nfunction subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  return out;\n}\nfunction length(a) {\n  var x = a[0],\n    y = a[1],\n    z = a[2];\n  return Math.sqrt(x * x + y * y + z * z);\n}\nfunction normalize(out, a) {\n  var x = a[0],\n    y = a[1],\n    z = a[2];\n  var len = x * x + y * y + z * z;\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    out[0] = a[0] * len;\n    out[1] = a[1] * len;\n    out[2] = a[2] * len;\n  }\n  return out;\n}\nfunction dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\nfunction scale$1(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  return out;\n}\nfunction cross(out, a, b) {\n  var ax = a[0],\n    ay = a[1],\n    az = a[2],\n    bx = b[0],\n    by = b[1],\n    bz = b[2];\n  out[0] = ay * bz - az * by;\n  out[1] = az * bx - ax * bz;\n  out[2] = ax * by - ay * bx;\n  return out;\n}\nfunction distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return Math.hypot ? Math.hypot(x, y, z) : hypot(x, y, z);\n}\nfunction transformMat4(out, a, m) {\n  var x = a[0],\n    y = a[1],\n    z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z + m[15];\n  w = w || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n  return out;\n}\nfunction hypot() {\n  var y = 0;\n  var i = arguments.length;\n  while (i--) {\n    y += arguments[i] * arguments[i];\n  }\n  return Math.sqrt(y);\n}\nfunction applyMatrix(out, v, e) {\n  var x = v[0],\n    y = v[1],\n    z = v[2];\n  var w = 1 / (e[3] * x + e[7] * y + e[11] * z + e[15]);\n  out[0] = (e[0] * x + e[4] * y + e[8] * z + e[12]) * w;\n  out[1] = (e[1] * x + e[5] * y + e[9] * z + e[13]) * w;\n  out[2] = (e[2] * x + e[6] * y + e[10] * z + e[14]) * w;\n  return out;\n}\nfunction matrixToQuaternion(out, te) {\n  var m11 = te[0],\n    m12 = te[4],\n    m13 = te[8],\n    m21 = te[1],\n    m22 = te[5],\n    m23 = te[9],\n    m31 = te[2],\n    m32 = te[6],\n    m33 = te[10],\n    trace = m11 + m22 + m33;\n  var s;\n  if (trace > 0) {\n    s = 0.5 / Math.sqrt(trace + 1.0);\n    out.w = 0.25 / s;\n    out.x = (m32 - m23) * s;\n    out.y = (m13 - m31) * s;\n    out.z = (m21 - m12) * s;\n  } else if (m11 > m22 && m11 > m33) {\n    s = 2.0 * Math.sqrt(1.0 + m11 - m22 - m33);\n    out.w = (m32 - m23) / s;\n    out.x = 0.25 * s;\n    out.y = (m12 + m21) / s;\n    out.z = (m13 + m31) / s;\n  } else if (m22 > m33) {\n    s = 2.0 * Math.sqrt(1.0 + m22 - m11 - m33);\n    out.w = (m13 - m31) / s;\n    out.x = (m12 + m21) / s;\n    out.y = 0.25 * s;\n    out.z = (m23 + m32) / s;\n  } else {\n    s = 2.0 * Math.sqrt(1.0 + m33 - m11 - m22);\n    out.w = (m21 - m12) / s;\n    out.x = (m13 + m31) / s;\n    out.y = (m23 + m32) / s;\n    out.z = 0.25 * s;\n  }\n  return this;\n}\nfunction quaternionToMatrix(out, q) {\n  var te = out;\n  var x = q.x,\n    y = q.y,\n    z = q.z,\n    w = q.w;\n  var x2 = x + x,\n    y2 = y + y,\n    z2 = z + z;\n  var xx = x * x2,\n    xy = x * y2,\n    xz = x * z2;\n  var yy = y * y2,\n    yz = y * z2,\n    zz = z * z2;\n  var wx = w * x2,\n    wy = w * y2,\n    wz = w * z2;\n  te[0] = 1 - (yy + zz);\n  te[4] = xy - wz;\n  te[8] = xz + wy;\n  te[1] = xy + wz;\n  te[5] = 1 - (xx + zz);\n  te[9] = yz - wx;\n  te[2] = xz - wy;\n  te[6] = yz + wx;\n  te[10] = 1 - (xx + yy);\n  te[3] = 0;\n  te[7] = 0;\n  te[11] = 0;\n  te[12] = 0;\n  te[13] = 0;\n  te[14] = 0;\n  te[15] = 1;\n  return te;\n}\nfunction setPosition(out, v) {\n  var te = out;\n  te[12] = v[0];\n  te[13] = v[1];\n  te[14] = v[2];\n  return out;\n}\nfunction lookAt(te, eye, target, up) {\n  var x = [0, 0, 0];\n  var y = [0, 0, 0];\n  var z = [0, 0, 0];\n  subtract(z, eye, target);\n  if (length(z) === 0) {\n    z[2] = 1;\n  }\n  normalize(z, z);\n  cross(x, up, z);\n  if (length(z) === 0) {\n    if (Math.abs(up[2]) === 1) {\n      z[0] += 0.0001;\n    } else {\n      z[2] += 0.0001;\n    }\n    normalize(z, z);\n    cross(x, up, z);\n  }\n  normalize(x, x);\n  cross(y, z, x);\n  te[0] = x[0];\n  te[4] = y[0];\n  te[8] = z[0];\n  te[1] = x[1];\n  te[5] = y[1];\n  te[9] = z[1];\n  te[2] = x[2];\n  te[6] = y[2];\n  te[10] = z[2];\n  return te;\n}\nvar RADIAN$1 = Math.PI / 180;\nvar DEFAULT_FOV = 0.6435011087932844;\nvar TEMP_COORD$1 = new Coordinate(0, 0);\nvar TEMP_POINT$1 = new Point(0, 0);\nvar altitudesHasData = function altitudesHasData(altitudes) {\n  if (isNumber(altitudes)) {\n    return altitudes !== 0;\n  } else if (Array.isArray(altitudes) && altitudes.length > 0) {\n    for (var i = 0, len = altitudes.length; i < len; i++) {\n      if (isNumber(altitudes[i]) && altitudes[i] !== 0) {\n        return true;\n      }\n    }\n  }\n  return false;\n};\nMap$1.include({\n  getFov: function getFov() {\n    if (!this._fov) {\n      this._fov = DEFAULT_FOV;\n    }\n    return this._fov / RADIAN$1;\n  },\n  setFov: function setFov(fov) {\n    if (this.isZooming()) {\n      return this;\n    }\n    fov = Math.max(0.01, Math.min(60, fov));\n    if (this._fov === fov) return this;\n    var from = this.getFov();\n    this._fov = fov * RADIAN$1;\n    this._calcMatrices();\n    this._renderLayers();\n    this._fireEvent('fovchange', {\n      'from': from,\n      'to': this.getFov()\n    });\n    return this;\n  },\n  getBearing: function getBearing() {\n    if (!this._angle) {\n      return 0;\n    }\n    return -this._angle / RADIAN$1;\n  },\n  setBearing: function setBearing(bearing) {\n    if (this._mapAnimPlayer) {\n      this._stopAnim(this._mapAnimPlayer);\n    }\n    return this._setBearing(bearing);\n  },\n  _setBearing: function _setBearing(bearing) {\n    if (Browser$1.ie9) {\n      throw new Error('map can\\'t rotate in IE9.');\n    }\n    var b = -wrap(bearing, -180, 180) * RADIAN$1;\n    if (this._angle === b) return this;\n    var from = this.getBearing();\n    this._fireEvent('rotatestart', {\n      'from': from,\n      'to': b\n    });\n    this._angle = b;\n    this._calcMatrices();\n    this._renderLayers();\n    this._fireEvent('rotate', {\n      'from': from,\n      'to': b\n    });\n    this._fireEvent('rotateend', {\n      'from': from,\n      'to': b\n    });\n    return this;\n  },\n  getPitch: function getPitch() {\n    if (!this._pitch) {\n      return 0;\n    }\n    return this._pitch / Math.PI * 180;\n  },\n  setPitch: function setPitch(pitch) {\n    if (this._mapAnimPlayer) {\n      this._stopAnim(this._mapAnimPlayer);\n    }\n    return this._setPitch(pitch);\n  },\n  _setPitch: function _setPitch(pitch) {\n    if (Browser$1.ie9) {\n      throw new Error('map can\\'t tilt in IE9.');\n    }\n    var p = clamp(pitch, 0, this.options['maxPitch']) * RADIAN$1;\n    if (this._pitch === p) return this;\n    var from = this.getPitch();\n    this._fireEvent('pitchstart', {\n      'from': from,\n      'to': p\n    });\n    this._pitch = p;\n    this._calcMatrices();\n    this._renderLayers();\n    this._fireEvent('pitch', {\n      'from': from,\n      'to': p\n    });\n    this._fireEvent('pitchend', {\n      'from': from,\n      'to': p\n    });\n    return this;\n  },\n  setCameraMovements: function setCameraMovements(frameOptions, extraOptions) {\n    var _this = this;\n    if (!Array.isArray(frameOptions) || !frameOptions.length) {\n      return this;\n    }\n    this.setView({\n      center: frameOptions[0].center,\n      zoom: frameOptions[0].zoom,\n      pitch: frameOptions[0].pitch,\n      bearing: frameOptions[0].bearing\n    });\n    if (frameOptions.length === 1) return this;\n    var index = 1;\n    var _onFrame = function onFrame(frame) {\n      if (frame.state.playState === 'finished') {\n        index++;\n        if (index === frameOptions.length - 1) _onFrame = null;\n        var frameOption = frameOptions[index];\n        frameOption.duration = frameOption.timestamp - frameOptions[index - 1].timestamp;\n        if (extraOptions && extraOptions.autoRotate) {\n          frameOption.bearing = calculateBearing(frameOptions[index - 1].center, frameOption.center);\n        }\n        _this._setCameraMovement(frameOption, _onFrame);\n      }\n    };\n    if (frameOptions.length === 2) _onFrame = null;\n    var currentBearing = this.getBearing();\n    this._setCameraMovement(_extends({\n      bearing: currentBearing\n    }, frameOptions[index], {\n      duration: frameOptions[index].timestamp - frameOptions[index - 1].timestamp\n    }), _onFrame);\n    var play = function play() {\n      _this._animPlayer.play();\n    };\n    var pause = function pause() {\n      _this._animPlayer.pause();\n    };\n    var cancel = function cancel() {\n      _this._animPlayer.cancel();\n    };\n    var finish = function finish() {\n      _this._animPlayer.finish();\n    };\n    var reverse = function reverse() {\n      _this._animPlayer.reverse();\n    };\n    return {\n      play: play,\n      pause: pause,\n      cancel: cancel,\n      finish: finish,\n      reverse: reverse\n    };\n  },\n  _setCameraMovement: function _setCameraMovement(frameOption, frame) {\n    this.animateTo({\n      zoom: frameOption.zoom,\n      center: frameOption.center,\n      pitch: frameOption.pitch,\n      bearing: frameOption.bearing\n    }, {\n      duration: frameOption.duration,\n      easing: 'out'\n    }, frame);\n  },\n  setCameraPosition: function setCameraPosition(params) {\n    var position = params.position,\n      pitch = params.pitch,\n      bearing = params.bearing;\n    var cameraAltitude = position[2] * this._meterToGLPoint;\n    var centerAltitude = this.centerAltitude || 0;\n    var centerPointZ = centerAltitude * this._meterToGLPoint;\n    var cz = cameraAltitude - centerPointZ;\n    var pitchRadian = pitch * RADIAN$1;\n    var cameraToGroundDistance = cz / Math.cos(pitchRadian);\n    var dist = Math.sin(pitchRadian) * cameraToGroundDistance;\n    var cameraToCenterDistance = cameraToGroundDistance + centerPointZ;\n    var zoom = this._getZoomFromCameraToCenterDistance(cameraToCenterDistance);\n    var wrapBearing = wrap(bearing, -180, 180);\n    var bearingRadian = wrapBearing * RADIAN$1;\n    var glRes = this.getGLRes();\n    var tempCoord = new Coordinate(position[0], position[1]);\n    var tempPoint = this.coordToPointAtRes(tempCoord, glRes);\n    var point = new Point(0, 0);\n    point.x = tempPoint.x + dist * Math.sin(bearingRadian);\n    point.y = tempPoint.y + dist * Math.cos(bearingRadian);\n    var prjCenter = this._pointToPrjAtRes(point, this.getGLRes());\n    this._setPrjCenter(prjCenter);\n    this.setView({\n      bearing: bearing,\n      pitch: pitch,\n      zoom: zoom\n    });\n    return this;\n  },\n  _getZoomFromCameraToCenterDistance: function _getZoomFromCameraToCenterDistance(distance$$1) {\n    var ratio = this._getFovRatio();\n    var scale$$1 = distance$$1 * ratio * 2 / (this.height || 1) * this.getGLRes();\n    var resolutions = this._getResolutions();\n    var z = 0;\n    for (z; z < resolutions.length - 1; z++) {\n      if (resolutions[z] === scale$$1) {\n        return z;\n      } else if (resolutions[z + 1] === scale$$1) {\n        return z + 1;\n      } else if (scale$$1 < resolutions[z] && scale$$1 > resolutions[z + 1]) {\n        z = (scale$$1 - resolutions[z]) / (resolutions[z + 1] - resolutions[z]) + z;\n        return z - 1;\n      } else {\n        continue;\n      }\n    }\n    return z;\n  },\n  isTransforming: function isTransforming() {\n    return !!(this._pitch || this._angle);\n  },\n  getFrustumAltitude: function getFrustumAltitude() {\n    return this._frustumAltitude;\n  },\n  _calcFrustumAltitude: function _calcFrustumAltitude() {\n    var pitch = 90 - this.getPitch();\n    var fov = this.getFov() / 2;\n    var cameraAlt = this.cameraPosition ? this.cameraPosition[2] : 0;\n    if (fov <= pitch) {\n      return cameraAlt;\n    }\n    fov = Math.PI * fov / 180;\n    var d1 = new Point(this.cameraPosition).distanceTo(new Point(this.cameraLookAt)),\n      d2 = cameraAlt * Math.tan(fov * 2);\n    var d = Math.tan(fov) * (d1 + d2);\n    return cameraAlt + d;\n  },\n  _pointToContainerPoint: function _pointToContainerPoint(point, zoom, altitude, out) {\n    if (altitude === void 0) {\n      altitude = 0;\n    }\n    var res = this._getResolution(zoom);\n    return this._pointAtResToContainerPoint(point, res, altitude, out);\n  },\n  _pointAtResToContainerPoint: function _pointAtResToContainerPoint(point, res, altitude, out) {\n    if (altitude === void 0) {\n      altitude = 0;\n    }\n    if (!out) {\n      out = new Point(0, 0);\n    }\n    point = this._pointAtResToPoint(point, res, out);\n    var isTransforming = this.isTransforming();\n    var centerPoint;\n    if (!isTransforming && !altitude) {\n      centerPoint = this._prjToPoint(this._getPrjCenter(), undefined, TEMP_COORD$1);\n    }\n    this._toContainerPoint(out, isTransforming, altitude, centerPoint);\n    return out;\n  },\n  _pointsAtResToContainerPoints: function _pointsAtResToContainerPoints(points, targetRes, altitudes, resultPoints) {\n    if (altitudes === void 0) {\n      altitudes = [];\n    }\n    if (resultPoints === void 0) {\n      resultPoints = [];\n    }\n    var pitch = this.getPitch(),\n      bearing = this.getBearing();\n    var scale$$1 = targetRes / this._getResolution();\n    if (pitch === 0 && bearing === 0 && !altitudesHasData(altitudes)) {\n      var _this$_get2DExtent = this._get2DExtent(),\n        xmin = _this$_get2DExtent.xmin,\n        ymin = _this$_get2DExtent.ymin,\n        xmax = _this$_get2DExtent.xmax,\n        ymax = _this$_get2DExtent.ymax;\n      if (xmax > xmin && ymax > ymin) {\n        var _this$getSize = this.getSize(),\n          width = _this$getSize.width,\n          height = _this$getSize.height;\n        var dxPerPixel = (xmax - xmin) / width,\n          dyPerPixel = (ymax - ymin) / height;\n        for (var i = 0, len = points.length; i < len; i++) {\n          if (!points[i]) {\n            resultPoints[i] = null;\n            continue;\n          }\n          var pt = resultPoints[i];\n          pt.x = points[i].x;\n          pt.y = points[i].y;\n          pt._multi(scale$$1);\n          pt.x = (pt.x - xmin) * dxPerPixel;\n          pt.y = height - (pt.y - ymin) * dyPerPixel;\n        }\n        return resultPoints;\n      }\n    }\n    var altitudeIsArray = Array.isArray(altitudes);\n    var isTransforming = this.isTransforming();\n    var centerPoint = this._prjToPoint(this._getPrjCenter(), undefined, TEMP_COORD$1);\n    for (var _i = 0, _len = points.length; _i < _len; _i++) {\n      if (!points[_i]) {\n        resultPoints[_i] = null;\n        continue;\n      }\n      var _pt = resultPoints[_i];\n      _pt.x = points[_i].x;\n      _pt.y = points[_i].y;\n      _pt._multi(scale$$1);\n      var altitude = altitudeIsArray ? altitudes[_i] || 0 : altitudes;\n      this._toContainerPoint(_pt, isTransforming, altitude, centerPoint);\n    }\n    return resultPoints;\n  },\n  _toContainerPoint: function () {\n    var a = [0, 0, 0];\n    return function (out, isTransforming, altitude, centerPoint) {\n      var w2 = this.width / 2,\n        h2 = this.height / 2;\n      if (isTransforming || altitude) {\n        if (!this._altitudeScale) {\n          this._altitudeScale = this.altitudeToPoint(100, this.getGLRes()) / 100;\n        }\n        var _scale = this._glScale;\n        set$2(a, out.x * _scale, out.y * _scale, altitude * this._altitudeScale);\n        var t = this._projIfBehindCamera(a, this.cameraPosition, this.cameraForward);\n        applyMatrix(t, t, this.projViewMatrix);\n        out.x = t[0] * w2 + w2;\n        out.y = -(t[1] * h2) + h2;\n      } else {\n        out._sub(centerPoint.x, centerPoint.y);\n        out.set(out.x, -out.y);\n        out._add(w2, h2);\n      }\n    };\n  }(),\n  _projIfBehindCamera: function () {\n    var vectorFromCam = new Array(3);\n    var proj = new Array(3);\n    var sub = new Array(3);\n    return function (position, cameraPos, camForward) {\n      subtract(vectorFromCam, position, cameraPos);\n      var camNormDot = dot(camForward, vectorFromCam);\n      if (camNormDot <= 0) {\n        scale$1(proj, camForward, camNormDot * 1.01);\n        add(position, cameraPos, subtract(sub, vectorFromCam, proj));\n      }\n      return position;\n    };\n  }(),\n  _containerPointToPoint: function _containerPointToPoint(p, zoom, out) {\n    var res = this._getResolution(zoom);\n    return this._containerPointToPointAtRes(p, res, out);\n  },\n  _containerPointToPointAtRes: function () {\n    var cp = [0, 0, 0],\n      coord0 = [0, 0, 0, 1],\n      coord1 = [0, 0, 0, 1];\n    return function (p, res, out) {\n      if (this.isTransforming()) {\n        var w2 = this.width / 2 || 1,\n          h2 = this.height / 2 || 1;\n        set$2(cp, (p.x - w2) / w2, (h2 - p.y) / h2, 0);\n        set$2(coord0, cp[0], cp[1], 0);\n        set$2(coord1, cp[0], cp[1], 1);\n        coord0[3] = coord1[3] = 1;\n        applyMatrix(coord0, coord0, this.projViewMatrixInverse);\n        applyMatrix(coord1, coord1, this.projViewMatrixInverse);\n        var x0 = coord0[0];\n        var x1 = coord1[0];\n        var y0 = coord0[1];\n        var y1 = coord1[1];\n        var z0 = coord0[2];\n        var z1 = coord1[2];\n        var t = z0 === z1 ? 0 : (0 - z0) / (z1 - z0);\n        var _x = interpolate(x0, x1, t);\n        var _y = interpolate(y0, y1, t);\n        if (out) {\n          out.x = _x;\n          out.y = _y;\n        } else {\n          out = new Point(_x, _y);\n        }\n        out._multi(1 / this._glScale);\n        return this._getResolution() === res ? out : this._pointToPointAtRes(out, res, out);\n      }\n      var centerPoint = this._prjToPointAtRes(this._getPrjCenter(), res, out),\n        scale$$1 = this._getResolution() / res;\n      var x = scale$$1 * (p.x - this.width / 2),\n        y = scale$$1 * (p.y - this.height / 2);\n      return centerPoint._add(x, -y);\n    };\n  }(),\n  _calcMatrices: function () {\n    var m1 = createMat4();\n    return function () {\n      delete this._mapRes;\n      delete this._mapGlRes;\n      delete this._mapExtent2D;\n      delete this._mapGlExtent2D;\n      var size = this.getSize();\n      var w = size.width || 1,\n        h = size.height || 1;\n      this._glScale = this.getGLScale();\n      var worldMatrix = this._getCameraWorldMatrix();\n      var fov = this.getFov() * Math.PI / 180;\n      var farZ = this._getCameraFar(fov, this.getPitch());\n      this.cameraFar = farZ;\n      this.cameraNear = this.cameraCenterDistance / 20;\n      var projMatrix = this.projMatrix || createMat4();\n      perspective(projMatrix, fov, w / h, this.cameraNear, farZ);\n      this.projMatrix = projMatrix;\n      this.viewMatrix = invert(this.viewMatrix || createMat4(), worldMatrix);\n      this.projViewMatrix = multiply(this.projViewMatrix || createMat4(), projMatrix, this.viewMatrix);\n      this._calcCascadeMatrixes();\n      this.projViewMatrixInverse = multiply(this.projViewMatrixInverse || createMat4(), worldMatrix, invert(m1, projMatrix));\n      this.domCssMatrix = this._calcDomMatrix();\n      this._frustumAltitude = this._calcFrustumAltitude();\n      this._mapRes = this._getResolution();\n      this._mapGlRes = this.getGLRes();\n      this._mapExtent2D = this._get2DExtent();\n      this._mapGlExtent2D = this._get2DExtentAtRes(this._mapGlRes);\n    };\n  }(),\n  _getCameraFar: function _getCameraFar(fov, pitch) {\n    var cameraCenterDistance = this.cameraCenterDistance = distance(this.cameraPosition, this.cameraLookAt);\n    var farZ = cameraCenterDistance;\n    var y = (this.options['cameraInfiniteFar'] ? 10 : 4) * cameraCenterDistance;\n    if (pitch > 0) {\n      pitch = pitch * Math.PI / 180;\n      if (2 / Math.PI - pitch > fov / 2) {\n        var tanFov = Math.tan(fov / 2);\n        var tanP = Math.tan(pitch);\n        y = Math.max(cameraCenterDistance * tanFov / (1 / tanP - tanFov), y);\n      }\n    }\n    farZ += y;\n    return farZ + 1.0;\n  },\n  _calcCascadeMatrixes: function () {\n    var projMatrix = createMat4();\n    function cal(curPitch, pitch, out) {\n      var w = this.width;\n      var h = this.height;\n      var fov = this.getFov() * Math.PI / 180;\n      var farZ = this._getCameraFar(fov, pitch);\n      var cameraCenterDistance = this.cameraCenterDistance;\n      farZ = cameraCenterDistance + (farZ - cameraCenterDistance) / Math.cos((90 - pitch) * Math.PI / 180) * Math.cos((90 - curPitch) * Math.PI / 180);\n      perspective(projMatrix, fov, w / h, 0.1, farZ);\n      var viewMatrix = this.viewMatrix;\n      return multiply(out, projMatrix, viewMatrix);\n    }\n    return function () {\n      var pitch = this.getPitch();\n      var cascadePitch0 = this.options['cascadePitches'][0];\n      var cascadePitch1 = this.options['cascadePitches'][1];\n      var projViewMatrix0 = this.cascadeFrustumMatrix0 = this.cascadeFrustumMatrix0 || createMat4();\n      var projViewMatrix1 = this.cascadeFrustumMatrix1 = this.cascadeFrustumMatrix1 || createMat4();\n      if (pitch > cascadePitch0) {\n        cal.call(this, pitch, cascadePitch0, projViewMatrix0);\n      } else {\n        copy(this.cascadeFrustumMatrix0, this.projViewMatrix);\n      }\n      if (pitch > cascadePitch1) {\n        cal.call(this, pitch, cascadePitch1, projViewMatrix1);\n      } else {\n        copy(this.cascadeFrustumMatrix1, this.cascadeFrustumMatrix0);\n      }\n    };\n  }(),\n  _calcDomMatrix: function () {\n    var m = createMat4(),\n      m1 = createMat4(),\n      minusY = [1, -1, 1],\n      arr = [0, 0, 0];\n    return function () {\n      var width = this.width || 1;\n      var height = this.height || 1;\n      var cameraToCenterDistance = 0.5 / Math.tan(this._fov / 2) * height;\n      scale(m, this.projMatrix, minusY);\n      translate(m, m, set$2(arr, 0, 0, -cameraToCenterDistance));\n      if (this._pitch) {\n        rotateX(m, m, this._pitch);\n      }\n      if (this._angle) {\n        rotateZ(m, m, this._angle);\n      }\n      identity(m1);\n      scale(m1, m1, set$2(arr, width / 2, -height / 2, 1));\n      return multiply(this.domCssMatrix || createMat4(), m1, m);\n    };\n  }(),\n  _getFovZ: function _getFovZ(zoom) {\n    var scale$$1 = this.getGLScale(zoom);\n    var ratio = this._getFovRatio();\n    return scale$$1 * (this.height || 1) / 2 / ratio;\n  },\n  _getCameraWorldMatrix: function () {\n    var q = {};\n    return function () {\n      var glRes = this.getGLRes();\n      if (!this._meterToGLPoint) {\n        this._meterToGLPoint = this.distanceToPointAtRes(100, 0, glRes).x / 100;\n      }\n      var center2D = this._prjToPointAtRes(this._prjCenter, glRes, TEMP_POINT$1);\n      var centerAltitude = this.centerAltitude || 0;\n      var centerPointZ = centerAltitude * this._meterToGLPoint;\n      this.cameraLookAt = set$2(this.cameraLookAt || [0, 0, 0], center2D.x, center2D.y, centerPointZ);\n      var pitch = this.getPitch() * RADIAN$1;\n      var bearing = this.getBearing() * RADIAN$1;\n      var cameraToCenterDistance = this._getFovZ();\n      var cameraZenithDistance = this.cameraZenithDistance === undefined ? cameraToCenterDistance : this.cameraZenithDistance;\n      var cameraToGroundDistance = cameraZenithDistance - centerPointZ;\n      var cz = cameraToGroundDistance * Math.cos(pitch);\n      var dist = Math.sin(pitch) * cameraToGroundDistance;\n      var cx = center2D.x - dist * Math.sin(bearing);\n      var cy = center2D.y - dist * Math.cos(bearing);\n      this.cameraPosition = set$2(this.cameraPosition || [0, 0, 0], cx, cy, cz + centerPointZ);\n      this.cameraToCenterDistance = cameraToCenterDistance;\n      var d = dist || 1;\n      var up = this.cameraUp = set$2(this.cameraUp || [0, 0, 0], Math.sin(bearing) * d, Math.cos(bearing) * d, 0);\n      var m = this.cameraWorldMatrix = this.cameraWorldMatrix || createMat4();\n      lookAt(m, this.cameraPosition, this.cameraLookAt, up);\n      var cameraForward = this.cameraForward || [0, 0, 0];\n      subtract(cameraForward, this.cameraLookAt, this.cameraPosition);\n      this.cameraForward = normalize(cameraForward, cameraForward);\n      matrixToQuaternion(q, m);\n      quaternionToMatrix(m, q);\n      setPosition(m, this.cameraPosition);\n      return m;\n    };\n  }(),\n  updateCenterAltitude: function updateCenterAltitude() {\n    this.getRenderer().setToRedraw();\n    if (!this.centerAltitude && this._hasAltitudeLayer()) {\n      this.centerAltitude = 0;\n    }\n    this._recenterOnTerrain();\n  },\n  _recenterOnTerrain: function _recenterOnTerrain() {\n    if (this.centerAltitude === undefined) {\n      return;\n    }\n    var queriedAltitude = this._queryTerrainByProjCoord(this._prjCenter);\n    if (isNil(queriedAltitude) && this._hasAltitudeLayer()) {\n      queriedAltitude = this.centerAltitude;\n    }\n    var centerAltitude = queriedAltitude || 0;\n    var pitch = this.getPitch() * RADIAN$1;\n    var bearing = this.getBearing() * RADIAN$1;\n    var altDist = (centerAltitude - this.centerAltitude) * this._meterToGLPoint;\n    var cameraToCenterDistance = this._getFovZ();\n    var cameraZenithDistance = this.cameraZenithDistance === undefined ? cameraToCenterDistance : this.cameraZenithDistance;\n    var cameraToGroundDistance = cameraZenithDistance - this.centerAltitude * this._meterToGLPoint;\n    var newCameraToGroundDistance = cameraToGroundDistance - altDist / Math.cos(pitch);\n    var cameraPosition = this.cameraPosition;\n    var dist = Math.sin(pitch) * newCameraToGroundDistance;\n    var center2D = TEMP_POINT$1;\n    center2D.x = cameraPosition[0] + dist * Math.sin(bearing);\n    center2D.y = cameraPosition[1] + dist * Math.cos(bearing);\n    var centerPointZ = centerAltitude * this._meterToGLPoint;\n    this.cameraZenithDistance = (cameraPosition[2] - centerPointZ) / Math.cos(pitch) + centerPointZ;\n    this.centerAltitude = centerAltitude;\n    var newCenter = this.pointAtResToCoordinate(center2D, this.getGLRes(), TEMP_COORD$1);\n    this._eventSilence = true;\n    this._suppressRecenter = true;\n    this.setCenter(newCenter);\n    delete this._suppressRecenter;\n    delete this._eventSilence;\n    if (isNil(queriedAltitude)) {\n      delete this.centerAltitude;\n    }\n  },\n  _queryTerrainByProjCoord: function _queryTerrainByProjCoord(coord) {\n    var layers = this._getLayers();\n    for (var i = 0; i < layers.length; i++) {\n      if (layers[i].queryTerrainByProjCoord) {\n        return layers[i].queryTerrainByProjCoord(coord)[0];\n      }\n    }\n    return 0;\n  },\n  _hasAltitudeLayer: function _hasAltitudeLayer() {\n    var layers = this._getLayers();\n    for (var i = 0; i < layers.length; i++) {\n      if (layers[i].getTerrainLayer && layers[i].getTerrainLayer()) {\n        return true;\n      }\n    }\n    return false;\n  },\n  _getFovRatio: function _getFovRatio() {\n    var fov = this.getFov();\n    return Math.tan(fov / 2 * RADIAN$1);\n  },\n  _renderLayers: function _renderLayers() {\n    if (this.isInteracting()) {\n      return;\n    }\n    var layers = this._getLayers();\n    layers.forEach(function (layer) {\n      if (!layer) {\n        return;\n      }\n      var renderer = layer._getRenderer();\n      if (renderer && renderer.setToRedraw) {\n        renderer.setToRedraw();\n      }\n    });\n  }\n});\nfunction createMat4() {\n  return identity(new Array(16));\n}\nfunction calculateBearing(start, end) {\n  var lon1 = toRadian(start[0]);\n  var lon2 = toRadian(end[0]);\n  var lat1 = toRadian(start[1]);\n  var lat2 = toRadian(end[1]);\n  var a = Math.sin(lon2 - lon1) * Math.cos(lat2);\n  var b = Math.cos(lat1) * Math.sin(lat2) - Math.sin(lat1) * Math.cos(lat2) * Math.cos(lon2 - lon1);\n  return toDegree(Math.atan2(a, b));\n}\nMap$1.include({\n  _onViewChange: function _onViewChange(view) {\n    if (!this._viewHistory) {\n      this._viewHistory = [];\n      this._viewHistoryPointer = 0;\n    }\n    var old = this._getCurrentView();\n    for (var i = this._viewHistory.length - 1; i >= 0; i--) {\n      if (equalMapView(view, this._viewHistory[i])) {\n        this._viewHistoryPointer = i;\n        this._fireViewChange(old, view);\n        return;\n      }\n    }\n    if (this._viewHistoryPointer < this._viewHistory.length - 1) {\n      this._viewHistory.splice(this._viewHistoryPointer + 1);\n    }\n    this._viewHistory.push(view);\n    var count = this.options['viewHistoryCount'];\n    if (count > 0 && this._viewHistory.length > count) {\n      this._viewHistory.splice(0, this._viewHistory.length - count);\n    }\n    this._viewHistoryPointer = this._viewHistory.length - 1;\n    this._fireViewChange(old, view);\n  },\n  zoomToPreviousView: function zoomToPreviousView(options) {\n    if (options === void 0) {\n      options = {};\n    }\n    if (!this.hasPreviousView()) {\n      return null;\n    }\n    var view = this._viewHistory[--this._viewHistoryPointer];\n    this._zoomToView(view, options);\n    return view;\n  },\n  hasPreviousView: function hasPreviousView() {\n    if (!this._viewHistory || this._viewHistoryPointer === 0) {\n      return false;\n    }\n    return true;\n  },\n  zoomToNextView: function zoomToNextView(options) {\n    if (options === void 0) {\n      options = {};\n    }\n    if (!this.hasNextView()) {\n      return null;\n    }\n    var view = this._viewHistory[++this._viewHistoryPointer];\n    this._zoomToView(view, options);\n    return view;\n  },\n  hasNextView: function hasNextView() {\n    if (!this._viewHistory || this._viewHistoryPointer === this._viewHistory.length - 1) {\n      return false;\n    }\n    return true;\n  },\n  _zoomToView: function _zoomToView(view, options) {\n    var _this = this;\n    var old = this.getView();\n    if (options['animation']) {\n      this._animateTo(view, {\n        'duration': options['duration']\n      }, function (frame) {\n        if (frame.state.playState === 'finished') {\n          _this._fireViewChange(old, view);\n        }\n      });\n    } else {\n      this.setView(view);\n      this._fireViewChange(old, view);\n    }\n  },\n  getViewHistory: function getViewHistory() {\n    return this._viewHistory;\n  },\n  _fireViewChange: function _fireViewChange(old, view) {\n    this._fireEvent('viewchange', {\n      'old': old,\n      'new': view\n    });\n    this._insertUICollidesQueue();\n  },\n  _getCurrentView: function _getCurrentView() {\n    if (!this._viewHistory) {\n      return null;\n    }\n    return this._viewHistory[this._viewHistoryPointer];\n  }\n});\nMap$1.mergeOptions({\n  'viewHistory': true,\n  'viewHistoryCount': 10\n});\nvar UICollisionIndex = new CollisionIndex();\nMap$1.include({\n  getCollisionIndex: function getCollisionIndex() {\n    if (!this._collisionIndex) {\n      this.createCollisionIndex();\n    }\n    return this._collisionIndex || this.createCollisionIndex();\n  },\n  createCollisionIndex: function createCollisionIndex() {\n    this.clearCollisionIndex();\n    this._collisionIndex = new CollisionIndex();\n    return this._collisionIndex;\n  },\n  clearCollisionIndex: function clearCollisionIndex() {\n    this.collisionFrameTime = 0;\n    if (this._collisionIndex) {\n      this._collisionIndex.clear();\n    }\n    return this;\n  },\n  _insertUICollidesQueue: function _insertUICollidesQueue() {\n    if (!this._uiCollidesQueue) {\n      this._uiCollidesQueue = [];\n    }\n    this._uiCollidesQueue.push(1);\n    return this;\n  },\n  uiCollides: function uiCollides() {\n    if (!this.uiList || this.uiList.length === 0 || !this._uiCollidesQueue || this._uiCollidesQueue.length === 0) {\n      return this;\n    }\n    var collisionIndex = UICollisionIndex;\n    collisionIndex.clear();\n    var uiList = this.uiList;\n    for (var i = 0, len = uiList.length; i < len; i++) {\n      var ui = uiList[i];\n      var _ui$options = ui.options,\n        collisionBufferSize = _ui$options.collisionBufferSize,\n        collision = _ui$options.collision;\n      if (!collision) {\n        continue;\n      }\n      var dom = ui.getDOM();\n      if (!ui.isVisible() || !dom) {\n        continue;\n      }\n      if (!dom.getBoundingClientRect) {\n        continue;\n      }\n      if (!ui.bbox) {\n        ui.bbox = [0, 0, 0, 0];\n      }\n      var bcRect = dom.getBoundingClientRect();\n      var x = bcRect.x,\n        y = bcRect.y;\n      var width = bcRect.width,\n        height = bcRect.height;\n      if (width === 0 || height === 0) {\n        var size = ui.getSize();\n        if (size) {\n          width = size.width;\n          height = size.height;\n        }\n      }\n      var minX = x - collisionBufferSize,\n        maxX = x + width + collisionBufferSize;\n      var minY = y - collisionBufferSize,\n        maxY = y + height + collisionBufferSize;\n      ui.bbox[0] = minX;\n      ui.bbox[1] = minY;\n      ui.bbox[2] = maxX;\n      ui.bbox[3] = maxY;\n      if (collisionIndex.collides(ui.bbox)) {\n        ui._collidesEffect(false);\n        continue;\n      }\n      collisionIndex.insertBox(ui.bbox);\n      ui._collidesEffect(true);\n    }\n    this._uiCollidesQueue = [];\n    return this;\n  },\n  _addUI: function _addUI(ui) {\n    if (!this.uiList) {\n      this.uiList = [];\n    }\n    var index = this.uiList.indexOf(ui);\n    if (index > -1) {\n      return this;\n    }\n    this.uiList.push(ui);\n    this.uiList = this.uiList.sort(function (a, b) {\n      return b.options['collisionWeight'] - a.options['collisionWeight'];\n    });\n    return this;\n  },\n  _removeUI: function _removeUI(ui) {\n    if (!this.uiList) {\n      return -1;\n    }\n    var index = this.uiList.indexOf(ui);\n    if (index < 0) {\n      return index;\n    }\n    this.uiList.splice(index, 1);\n    return index;\n  }\n});\nvar options$h = {\n  'decimalPlaces': 2,\n  'mode': 'LineString',\n  'language': 'zh-CN',\n  'metric': true,\n  'imperial': false,\n  'symbol': {\n    'lineColor': '#000',\n    'lineWidth': 3,\n    'lineOpacity': 1\n  },\n  'vertexSymbol': {\n    'markerType': 'ellipse',\n    'markerFill': '#fff',\n    'markerLineColor': '#000',\n    'markerLineWidth': 3,\n    'markerWidth': 11,\n    'markerHeight': 11\n  },\n  'labelOptions': {\n    'textSymbol': {\n      'textFaceName': 'monospace',\n      'textLineSpacing': 1,\n      'textHorizontalAlignment': 'right',\n      'textDx': 15\n    },\n    'boxStyle': {\n      'padding': [6, 2],\n      'symbol': {\n        'markerType': 'square',\n        'markerFill': '#fff',\n        'markerFillOpacity': 0.9,\n        'markerLineColor': '#b4b3b3'\n      }\n    }\n  },\n  'clearButtonSymbol': [{\n    'markerType': 'square',\n    'markerFill': '#fff',\n    'markerLineColor': '#b4b3b3',\n    'markerLineWidth': 2,\n    'markerWidth': 15,\n    'markerHeight': 15,\n    'markerDx': 20\n  }, {\n    'markerType': 'x',\n    'markerWidth': 10,\n    'markerHeight': 10,\n    'markerDx': 20\n  }]\n};\nvar DistanceTool = function (_DrawTool) {\n  _inheritsLoose(DistanceTool, _DrawTool);\n  function DistanceTool(options) {\n    var _this;\n    _this = _DrawTool.call(this, options) || this;\n    _this.on('enable', _this._afterEnable, _assertThisInitialized(_assertThisInitialized(_this))).on('disable', _this._afterDisable, _assertThisInitialized(_assertThisInitialized(_this)));\n    _this._measureLayers = [];\n    return _this;\n  }\n  var _proto = DistanceTool.prototype;\n  _proto.clear = function clear() {\n    if (isArrayHasData(this._measureLayers)) {\n      for (var i = 0; i < this._measureLayers.length; i++) {\n        this._measureLayers[i].remove();\n      }\n    }\n    delete this._lastMeasure;\n    delete this._lastVertex;\n    this._measureLayers = [];\n    return this;\n  };\n  _proto.getMeasureLayers = function getMeasureLayers() {\n    return this._measureLayers;\n  };\n  _proto.getLastMeasure = function getLastMeasure() {\n    if (!this._lastMeasure) {\n      return 0;\n    }\n    return this._lastMeasure;\n  };\n  _proto.undo = function undo() {\n    _DrawTool.prototype.undo.call(this);\n    var pointer = this._historyPointer;\n    if (pointer !== this._vertexes.length) {\n      for (var i = pointer; i < this._vertexes.length; i++) {\n        if (this._vertexes[i].label) {\n          this._vertexes[i].label.remove();\n        }\n        this._vertexes[i].marker.remove();\n      }\n    }\n    return this;\n  };\n  _proto.redo = function redo() {\n    _DrawTool.prototype.redo.call(this);\n    var i = this._historyPointer - 1;\n    if (this._vertexes[i]) {\n      if (!this._vertexes[i].marker.getLayer()) {\n        if (this._vertexes[i].label) {\n          this._vertexes[i].label.addTo(this._measureMarkerLayer);\n        }\n        this._vertexes[i].marker.addTo(this._measureMarkerLayer);\n      }\n    }\n    return this;\n  };\n  _proto._measure = function _measure(toMeasure) {\n    var map = this.getMap();\n    var length;\n    if (toMeasure instanceof Geometry) {\n      length = map.computeGeometryLength(toMeasure);\n    } else if (Array.isArray(toMeasure)) {\n      length = map.getProjection().measureLength(toMeasure);\n    }\n    this._lastMeasure = length;\n    var units;\n    if (this.options['language'] === 'zh-CN') {\n      units = [' 米', ' 公里', ' 英尺', ' 英里'];\n    } else {\n      units = [' m', ' km', ' feet', ' mile'];\n    }\n    var content = '';\n    var decimals = this.options['decimalPlaces'];\n    if (this.options['metric']) {\n      content += length < 1000 ? length.toFixed(decimals) + units[0] : (length / 1000).toFixed(decimals) + units[1];\n    }\n    if (this.options['imperial']) {\n      length *= 3.2808399;\n      if (content.length > 0) {\n        content += '\\n';\n      }\n      content += length < 5280 ? length.toFixed(decimals) + units[2] : (length / 5280).toFixed(decimals) + units[3];\n    }\n    return content;\n  };\n  _proto._registerMeasureEvents = function _registerMeasureEvents() {\n    this.on('drawstart', this._msOnDrawStart, this).on('drawvertex', this._msOnDrawVertex, this).on('mousemove', this._msOnMouseMove, this).on('drawend', this._msOnDrawEnd, this);\n  };\n  _proto._afterEnable = function _afterEnable() {\n    this._registerMeasureEvents();\n  };\n  _proto._afterDisable = function _afterDisable() {\n    this.off('drawstart', this._msOnDrawStart, this).off('drawvertex', this._msOnDrawVertex, this).off('mousemove', this._msOnMouseMove, this).off('drawend', this._msOnDrawEnd, this);\n  };\n  _proto._msOnDrawStart = function _msOnDrawStart(param) {\n    var map = this.getMap();\n    var prjCoord = map._pointToPrj(param['point2d']);\n    var uid = UID();\n    var layerId = 'distancetool_' + uid;\n    var markerLayerId = 'distancetool_markers_' + uid;\n    if (!map.getLayer(layerId)) {\n      this._measureLineLayer = new VectorLayer(layerId).addTo(map);\n      this._measureMarkerLayer = new VectorLayer(markerLayerId).addTo(map);\n    } else {\n      this._measureLineLayer = map.getLayer(layerId);\n      this._measureMarkerLayer = map.getLayer(markerLayerId);\n    }\n    this._measureLayers.push(this._measureLineLayer);\n    this._measureLayers.push(this._measureMarkerLayer);\n    var marker = new Marker(param['coordinate'], {\n      'symbol': this.options['vertexSymbol']\n    });\n    marker._setPrjCoordinates(prjCoord);\n    var content = this.options['language'] === 'zh-CN' ? '起点' : 'start';\n    var startLabel = new Label(content, param['coordinate'], this.options['labelOptions']);\n    startLabel._setPrjCoordinates(prjCoord);\n    this._lastVertex = startLabel;\n    this._addVertexMarker(marker, startLabel);\n  };\n  _proto._msOnMouseMove = function _msOnMouseMove(param) {\n    var ms = this._measure(this._msGetCoordsToMeasure(param));\n    if (!this._tailMarker) {\n      var symbol = extendSymbol(this.options['vertexSymbol']);\n      symbol['markerWidth'] /= 2;\n      symbol['markerHeight'] /= 2;\n      this._tailMarker = new Marker(param['coordinate'], {\n        'symbol': symbol\n      }).addTo(this._measureMarkerLayer);\n      this._tailLabel = new Label(ms, param['coordinate'], this.options['labelOptions']).addTo(this._measureMarkerLayer);\n    }\n    var prjCoords = this._geometry._getPrjCoordinates();\n    var lastCoord = prjCoords[prjCoords.length - 1];\n    this._tailMarker.setCoordinates(param['coordinate']);\n    this._tailMarker._setPrjCoordinates(lastCoord);\n    this._tailLabel.setContent(ms);\n    this._tailLabel.setCoordinates(param['coordinate']);\n    this._tailLabel._setPrjCoordinates(lastCoord);\n  };\n  _proto._msGetCoordsToMeasure = function _msGetCoordsToMeasure(param) {\n    return param['geometry'].getCoordinates().concat([param['coordinate']]);\n  };\n  _proto._msOnDrawVertex = function _msOnDrawVertex(param) {\n    var prjCoords = this._geometry._getPrjCoordinates();\n    var lastCoord = prjCoords[prjCoords.length - 1];\n    var geometry = param['geometry'];\n    var marker = new Marker(param['coordinate'], {\n      'symbol': this.options['vertexSymbol']\n    });\n    var length = this._measure(geometry);\n    var vertexLabel = new Label(length, param['coordinate'], this.options['labelOptions']);\n    this._addVertexMarker(marker, vertexLabel);\n    vertexLabel._setPrjCoordinates(lastCoord);\n    marker._setPrjCoordinates(lastCoord);\n    this._lastVertex = vertexLabel;\n  };\n  _proto._addVertexMarker = function _addVertexMarker(marker, vertexLabel) {\n    if (!this._vertexes) {\n      this._vertexes = [];\n    }\n    if (this._historyPointer !== undefined && this._vertexes.length > this._historyPointer - 1) {\n      this._vertexes.length = this._historyPointer - 1;\n    }\n    this._vertexes.push({\n      label: vertexLabel,\n      marker: marker\n    });\n    this._measureMarkerLayer.addGeometry(marker);\n    if (vertexLabel) {\n      this._measureMarkerLayer.addGeometry(vertexLabel);\n    }\n  };\n  _proto._msOnDrawEnd = function _msOnDrawEnd(param) {\n    this._clearTailMarker();\n    if (param['geometry']._getPrjCoordinates().length < 2) {\n      this._lastMeasure = 0;\n      this._clearMeasureLayers();\n      return;\n    }\n    var size = this._lastVertex.getSize();\n    if (!size) {\n      size = new Size(10, 10);\n    }\n    this._addClearMarker(this._lastVertex.getCoordinates(), this._lastVertex._getPrjCoordinates(), size['width']);\n    var geo = param['geometry'].copy();\n    geo._setPrjCoordinates(param['geometry']._getPrjCoordinates());\n    geo.addTo(this._measureLineLayer);\n    this._lastMeasure = geo.getLength();\n  };\n  _proto._addClearMarker = function _addClearMarker(coordinates, prjCoord, dx) {\n    var symbol = this.options['clearButtonSymbol'];\n    var dxSymbol = {\n      'markerDx': (symbol['markerDx'] || 0) + dx,\n      'textDx': (symbol['textDx'] || 0) + dx\n    };\n    if (Array.isArray(symbol)) {\n      dxSymbol = symbol.map(function (s) {\n        if (s) {\n          return {\n            'markerDx': (s['markerDx'] || 0) + dx,\n            'textDx': (s['textDx'] || 0) + dx\n          };\n        }\n        return null;\n      });\n    }\n    symbol = extendSymbol(symbol, dxSymbol);\n    var endMarker = new Marker(coordinates, {\n      'symbol': symbol\n    });\n    var measureLineLayer = this._measureLineLayer,\n      measureMarkerLayer = this._measureMarkerLayer;\n    endMarker.on('click', function () {\n      measureLineLayer.remove();\n      measureMarkerLayer.remove();\n      return false;\n    }, this);\n    endMarker.addTo(this._measureMarkerLayer);\n    endMarker._setPrjCoordinates(prjCoord);\n  };\n  _proto._clearTailMarker = function _clearTailMarker() {\n    if (this._tailMarker) {\n      this._tailMarker.remove();\n      delete this._tailMarker;\n    }\n    if (this._tailLabel) {\n      this._tailLabel.remove();\n      delete this._tailLabel;\n    }\n  };\n  _proto._clearMeasureLayers = function _clearMeasureLayers() {\n    this._measureLineLayer.remove();\n    this._measureMarkerLayer.remove();\n  };\n  return DistanceTool;\n}(DrawTool);\nDistanceTool.mergeOptions(options$h);\nvar options$i = {\n  'mode': 'Polygon',\n  'symbol': {\n    'lineColor': '#000000',\n    'lineWidth': 2,\n    'lineOpacity': 1,\n    'lineDasharray': '',\n    'polygonFill': '#ffffff',\n    'polygonOpacity': 0.5\n  }\n};\nvar AreaTool = function (_DistanceTool) {\n  _inheritsLoose(AreaTool, _DistanceTool);\n  function AreaTool(options) {\n    var _this;\n    _this = _DistanceTool.call(this, options) || this;\n    _this._measureLayers = [];\n    return _this;\n  }\n  var _proto = AreaTool.prototype;\n  _proto._measure = function _measure(toMeasure) {\n    var map = this.getMap();\n    var area;\n    if (toMeasure instanceof Geometry) {\n      area = map.computeGeometryArea(toMeasure);\n    } else if (Array.isArray(toMeasure)) {\n      area = map.getProjection().measureArea(toMeasure);\n    }\n    this._lastMeasure = area;\n    var units;\n    if (this.options['language'] === 'zh-CN') {\n      units = [' 平方米', ' 平方公里', ' 平方英尺', ' 平方英里'];\n    } else {\n      units = [' sq.m', ' sq.km', ' sq.ft', ' sq.mi'];\n    }\n    var content = '';\n    var decimals = this.options['decimalPlaces'];\n    if (this.options['metric']) {\n      content += area < 1E6 ? area.toFixed(decimals) + units[0] : (area / 1E6).toFixed(decimals) + units[1];\n    }\n    if (this.options['imperial']) {\n      area *= 3.2808399;\n      if (content.length > 0) {\n        content += '\\n';\n      }\n      var sqmi = 5280 * 5280;\n      content += area < sqmi ? area.toFixed(decimals) + units[2] : (area / sqmi).toFixed(decimals) + units[3];\n    }\n    return content;\n  };\n  _proto._msGetCoordsToMeasure = function _msGetCoordsToMeasure(param) {\n    return param['geometry'].getShell().concat([param['coordinate']]);\n  };\n  _proto._msOnDrawVertex = function _msOnDrawVertex(param) {\n    var prjCoord = this.getMap()._pointToPrj(param['point2d']);\n    var vertexMarker = new Marker(param['coordinate'], {\n      'symbol': this.options['vertexSymbol']\n    });\n    vertexMarker._setPrjCoordinates(prjCoord);\n    this._measure(param['geometry']);\n    this._lastVertex = vertexMarker;\n    this._addVertexMarker(vertexMarker);\n  };\n  _proto._msOnDrawEnd = function _msOnDrawEnd(param) {\n    this._clearTailMarker();\n    var prjCoord;\n    if (param['point2d']) {\n      prjCoord = this.getMap()._pointToPrj(param['point2d']);\n    } else {\n      var prjCoords = param['geometry']._getPrjCoordinates();\n      prjCoords = prjCoords.slice(0, prjCoords.length - 1);\n      param['geometry']._setPrjCoordinates(prjCoords);\n      prjCoord = prjCoords[prjCoords.length - 1];\n    }\n    if (param['geometry']._getPrjCoordinates().length < 3) {\n      this._lastMeasure = 0;\n      this._clearMeasureLayers();\n      return;\n    }\n    var ms = this._measure(param['geometry']);\n    var projection = this.getMap().getProjection();\n    var coord = projection.unproject(prjCoord);\n    var endLabel = new Label(ms, coord, this.options['labelOptions']).addTo(this._measureMarkerLayer);\n    endLabel._setPrjCoordinates(prjCoord);\n    var size = endLabel.getSize();\n    if (!size) {\n      size = new Size(10, 10);\n    }\n    this._addClearMarker(coord, prjCoord, size['width']);\n    var geo = param['geometry'].copy();\n    geo._setPrjCoordinates(param['geometry']._getPrjCoordinates());\n    geo.addTo(this._measureLineLayer);\n    this._lastMeasure = geo.getArea();\n  };\n  return AreaTool;\n}(DistanceTool);\nAreaTool.mergeOptions(options$i);\nvar circleHooks = {\n  'create': function create(projection, prjCoord) {\n    var center = projection.unproject(prjCoord[0]);\n    var circle = new Circle(center, 0);\n    circle._setPrjCoordinates(prjCoord[0]);\n    return circle;\n  },\n  'update': function update(projection, prjPath, geometry) {\n    var map = geometry.getMap();\n    var prjCoord = Array.isArray(prjPath) ? prjPath[prjPath.length - 1] : prjPath;\n    var nextCoord = projection.unproject(prjCoord);\n    var radius = map.computeLength(geometry.getCenter(), nextCoord);\n    geometry.setRadius(radius);\n  },\n  'generate': function generate(geometry) {\n    return geometry;\n  }\n};\nDrawTool.registerMode('circle', extend({\n  'clickLimit': 2,\n  'action': ['click', 'mousemove', 'click']\n}, circleHooks));\nDrawTool.registerMode('freeHandCircle', extend({\n  'action': ['mousedown touchstart', 'mousemove touchmove', 'mouseup touchend']\n}, circleHooks));\nvar ellipseHooks = {\n  'create': function create(projection, prjCoord) {\n    var center = projection.unproject(prjCoord[0]);\n    var ellipse = new Ellipse(center, 0, 0);\n    ellipse._setPrjCoordinates(prjCoord[0]);\n    return ellipse;\n  },\n  'update': function update(projection, prjPath, geometry) {\n    var map = geometry.getMap();\n    var center = geometry.getCenter();\n    var prjCoord = Array.isArray(prjPath) ? prjPath[prjPath.length - 1] : prjPath;\n    var nextCoord = projection.unproject(prjCoord);\n    var rx = map.computeLength(center, new Coordinate({\n      x: nextCoord.x,\n      y: center.y\n    }));\n    var ry = map.computeLength(center, new Coordinate({\n      x: center.x,\n      y: nextCoord.y\n    }));\n    geometry.setWidth(rx * 2);\n    geometry.setHeight(ry * 2);\n  },\n  'generate': function generate(geometry) {\n    return geometry;\n  }\n};\nDrawTool.registerMode('ellipse', extend({\n  'clickLimit': 2,\n  'action': ['click', 'mousemove', 'click']\n}, ellipseHooks));\nDrawTool.registerMode('freeHandEllipse', extend({\n  'action': ['mousedown touchstart', 'mousemove touchmove', 'mouseup touchend']\n}, ellipseHooks));\nvar rectangleHooks = {\n  'create': function create(projection, prjCoords) {\n    var rect = new Polygon([]);\n    rect._firstClick = prjCoords[0];\n    return rect;\n  },\n  'update': function update(projection, prjCoords, geometry, param) {\n    var map = geometry.getMap();\n    var containerPoint = param['containerPoint'];\n    var firstClick = map._prjToContainerPoint(geometry._firstClick);\n    var ring = [[firstClick.x, firstClick.y], [containerPoint.x, firstClick.y], [containerPoint.x, containerPoint.y], [firstClick.x, containerPoint.y]];\n    geometry.setCoordinates(ring.map(function (c) {\n      return map.containerPointToCoord(new Point(c));\n    }));\n    geometry._setPrjCoordinates(ring.map(function (c) {\n      return map._containerPointToPrj(new Point(c));\n    }));\n  },\n  'generate': function generate(geometry) {\n    return geometry;\n  }\n};\nDrawTool.registerMode('rectangle', extend({\n  'clickLimit': 2,\n  'action': ['click', 'mousemove', 'click']\n}, rectangleHooks));\nDrawTool.registerMode('freeHandRectangle', extend({\n  'action': ['mousedown touchstart', 'mousemove touchmove', 'mouseup touchend']\n}, rectangleHooks));\nDrawTool.registerMode('point', {\n  'clickLimit': 1,\n  'action': ['click', 'mousemove'],\n  'create': function create(projection, prjCoord) {\n    var center = projection.unproject(prjCoord[0]);\n    var marker = new Marker(center);\n    marker._setPrjCoordinates(prjCoord[0]);\n    return marker;\n  },\n  'generate': function generate(geometry) {\n    return geometry;\n  },\n  'update': function update(projection, prjCoord, geometry) {\n    if (Array.isArray(prjCoord)) {\n      prjCoord = prjCoord[prjCoord.length - 1];\n    }\n    if (!prjCoord) {\n      return geometry;\n    }\n    var coordinate = projection.unproject(prjCoord);\n    geometry.setCoordinates(coordinate);\n    return geometry;\n  }\n});\nvar polygonHooks = {\n  'create': function create(projection, prjPath) {\n    var path = prjPath.map(function (c) {\n      return projection.unproject(c);\n    });\n    var line = new LineString(path);\n    line._setPrjCoordinates(prjPath);\n    return line;\n  },\n  'update': function update(projection, path, geometry) {\n    var symbol = geometry.getSymbol();\n    var prjCoords;\n    if (Array.isArray(path)) {\n      prjCoords = path;\n    } else {\n      prjCoords = geometry._getPrjCoordinates();\n      prjCoords.push(path);\n    }\n    var coordinates = prjCoords.map(function (c) {\n      return projection.unproject(c);\n    });\n    geometry.setCoordinates(coordinates);\n    geometry._setPrjCoordinates(prjCoords);\n    var layer = geometry.getLayer();\n    if (layer) {\n      var polygon = layer.getGeometryById('polygon');\n      if (!polygon && prjCoords.length >= 3) {\n        polygon = new Polygon([coordinates], {\n          'id': 'polygon'\n        });\n        if (symbol) {\n          var pSymbol = extendSymbol(symbol, {\n            'lineOpacity': 0\n          });\n          polygon.setSymbol(pSymbol);\n        }\n        polygon.addTo(layer);\n      }\n      if (polygon) {\n        polygon._setPrjCoordinates(prjCoords);\n      }\n    }\n  },\n  'generate': function generate(geometry) {\n    var polygon = new Polygon(geometry.getCoordinates(), {\n      'symbol': geometry.getSymbol()\n    });\n    polygon._setPrjCoordinates(geometry._getPrjCoordinates());\n    polygon._projCode = geometry._projCode;\n    return polygon;\n  }\n};\nDrawTool.registerMode('polygon', extend({\n  'action': ['click', 'mousemove', 'dblclick']\n}, polygonHooks));\nDrawTool.registerMode('freeHandPolygon', extend({\n  'action': ['mousedown touchstart', 'mousemove touchmove', 'mouseup touchend']\n}, polygonHooks));\nvar lineStringHooks = {\n  'create': function create(projection, prjPath) {\n    var path = prjPath.map(function (c) {\n      return projection.unproject(c);\n    });\n    var line = new LineString(path);\n    line._setPrjCoordinates(prjPath);\n    return line;\n  },\n  'update': function update(projection, prjPath, geometry) {\n    var prjCoords;\n    if (Array.isArray(prjPath)) {\n      prjCoords = prjPath;\n    } else {\n      prjCoords = geometry._getPrjCoordinates();\n      prjCoords.push(prjPath);\n    }\n    var path = prjCoords.map(function (c) {\n      return projection.unproject(c);\n    });\n    geometry.setCoordinates(path);\n    geometry._setPrjCoordinates(prjCoords);\n  },\n  'generate': function generate(geometry) {\n    return geometry;\n  }\n};\nDrawTool.registerMode('linestring', extend({\n  'action': ['click', 'mousemove', 'dblclick']\n}, lineStringHooks));\nDrawTool.registerMode('freeHandLinestring', extend({\n  'action': ['mousedown touchstart', 'mousemove touchmove', 'mouseup touchend']\n}, lineStringHooks));\nDrawTool.registerMode('arccurve', {\n  'action': ['click', 'mousemove', 'dblclick'],\n  'create': function create(projection, prjPath) {\n    var path = prjPath.map(function (c) {\n      return projection.unproject(c);\n    });\n    var arc = new ArcCurve(path);\n    arc._setPrjCoordinates(prjPath);\n    return arc;\n  },\n  'update': lineStringHooks.update,\n  'generate': function generate(geometry) {\n    return geometry;\n  }\n});\nDrawTool.registerMode('quadbeziercurve', {\n  'action': ['click', 'mousemove', 'dblclick'],\n  'create': function create(projection, prjPath) {\n    var path = prjPath.map(function (c) {\n      return projection.unproject(c);\n    });\n    var curve = new QuadBezierCurve(path);\n    curve._setPrjCoordinates(prjPath);\n    return curve;\n  },\n  'update': lineStringHooks.update,\n  'generate': function generate(geometry) {\n    return geometry;\n  }\n});\nDrawTool.registerMode('cubicbeziercurve', {\n  'action': ['click', 'mousemove', 'dblclick'],\n  'create': function create(projection, prjPath) {\n    var path = prjPath.map(function (c) {\n      return projection.unproject(c);\n    });\n    var curve = new CubicBezierCurve(path);\n    curve._setPrjCoordinates(prjPath);\n    return curve;\n  },\n  'update': lineStringHooks.update,\n  'generate': function generate(geometry) {\n    return geometry;\n  }\n});\nDrawTool.registerMode('boxZoom', {\n  'action': ['mousedown', 'mousemove', 'mouseup'],\n  'create': function create(projection, prjCoord) {\n    prjCoord = prjCoord[0];\n    var center = projection.unproject(prjCoord);\n    var marker = new Marker(center);\n    marker._firstClick = prjCoord;\n    return marker;\n  },\n  'update': function update(projection, prjCoord, geometry, param) {\n    var map = geometry.getMap();\n    var p1 = map._prjToContainerPoint(geometry._firstClick),\n      p2 = param['containerPoint'];\n    prjCoord = map._containerPointToPrj(new Coordinate(Math.min(p1.x, p2.x), Math.min(p1.y, p2.y)));\n    var center = projection.unproject(prjCoord);\n    geometry.setCoordinates(center)._setPrjCoordinates(prjCoord);\n    geometry.updateSymbol({\n      markerWidth: Math.abs(p1.x - p2.x),\n      markerHeight: Math.abs(p1.y - p2.y)\n    });\n  },\n  'generate': function generate(geometry) {\n    return geometry;\n  }\n});\nfunction parse(arcConf) {\n  var tileInfo = arcConf['tileInfo'],\n    tileSize = [tileInfo['cols'], tileInfo['rows']],\n    resolutions = [],\n    lods = tileInfo['lods'];\n  for (var i = 0, len = lods.length; i < len; i++) {\n    resolutions.push(lods[i]['resolution']);\n  }\n  var fullExtent = arcConf['fullExtent'],\n    origin = tileInfo['origin'],\n    tileSystem = [1, -1, origin['x'], origin['y']];\n  delete fullExtent['spatialReference'];\n  return {\n    'spatialReference': {\n      'resolutions': resolutions,\n      'fullExtent': fullExtent\n    },\n    'tileSystem': tileSystem,\n    'tileSize': tileSize\n  };\n}\nSpatialReference.loadArcgis = function (url, cb, options) {\n  if (options === void 0) {\n    options = {\n      'jsonp': true\n    };\n  }\n  if (isString(url) && url.substring(0, 1) !== '{') {\n    Ajax.getJSON(url, function (err, json) {\n      if (err) {\n        cb(err);\n        return;\n      }\n      var spatialRef = parse(json);\n      cb(null, spatialRef);\n    }, options);\n  } else {\n    if (isString(url)) {\n      url = parseJSON(url);\n    }\n    var spatialRef = parse(url);\n    cb(null, spatialRef);\n  }\n  return this;\n};\nfunction getProjectionCode(code) {\n  var newcode = '';\n  var codeArray = code.split('');\n  for (var len = codeArray.length, i = len - 1; i >= 0; i--) {\n    if (!isNaN(codeArray[i])) {\n      newcode = codeArray[i] + newcode;\n    } else {\n      break;\n    }\n  }\n  return newcode;\n}\nfunction getProjection(projection) {\n  var prj = projection.indexOf('EPSG') > -1 ? projection : 'EPSG:' + projection;\n  prj = strReplace(prj, [['4490', '4326'], ['102100', '3857'], ['900913', '3857']]);\n  return prj;\n}\nfunction strReplace(str, repArray) {\n  if (repArray === void 0) {\n    repArray = [];\n  }\n  repArray.forEach(function (rep) {\n    var template = rep[0],\n      value = rep[1];\n    str = str.replace(template, value);\n  });\n  return str;\n}\nfunction getTransformValue(options) {\n  var projection = options.projection,\n    isArcgis = options.isArcgis,\n    isGeoServer = options.isGeoServer,\n    isSuperMap = options.isSuperMap;\n  var transformValue = 0.0002645833333333333;\n  if (isArcgis || isGeoServer || isSuperMap) {\n    transformValue = 0.00028;\n  }\n  if (projection && projection.indexOf('4326') > -1) {\n    transformValue = 2.3767925226029154e-9;\n    if (isArcgis || isSuperMap) {\n      transformValue = 2.518101729011901e-9;\n    }\n    if (isGeoServer) {\n      transformValue = 2.51528279553466e-9;\n    }\n  }\n  return transformValue;\n}\nvar ns = 'wmts';\nfunction getElementsByTagName(element, localName) {\n  var result = element.getElementsByTagName(localName);\n  if (result && result.length) {\n    return result;\n  }\n  var name = ns + ':' + localName;\n  return element.getElementsByTagName(name);\n}\nfunction getTileMatrixSet(TileMatrixSets, TileMatrixSetLink) {\n  for (var i = 0; i < TileMatrixSets.length; i++) {\n    var TileMatrixSet = TileMatrixSets[i];\n    TileMatrixSet = TileMatrixSet.getElementsByTagName('ows:Identifier')[0];\n    if (TileMatrixSet) {\n      if (TileMatrixSet.textContent === TileMatrixSetLink) {\n        return TileMatrixSets[i];\n      }\n    }\n  }\n  return null;\n}\nfunction parseWMTSXML(str, requestUrl, options) {\n  if (options.isArcgis == null) {\n    options.isArcgis = str.indexOf('arcgis') > -1;\n  }\n  if (options.isSuperMap == null) {\n    options.isSuperMap = str.indexOf('supermap') > -1;\n  }\n  var parser = new DOMParser();\n  var xmlDoc = parser.parseFromString(str, 'text/xml');\n  var content = xmlDoc.querySelectorAll('Contents')[0];\n  if (!content) {\n    return [];\n  }\n  var layers = getElementsByTagName(content, 'Layer');\n  if (!layers.length) {\n    return [];\n  }\n  var TileMatrixSets = [];\n  for (var i = 0, len = content.childNodes.length; i < len; i++) {\n    if (content.childNodes[i].localName === 'TileMatrixSet') {\n      TileMatrixSets.push(content.childNodes[i]);\n    }\n  }\n  if (!TileMatrixSets.length) {\n    return [];\n  }\n  var result = [];\n  for (var _i = 0, _len = layers.length; _i < _len; _i++) {\n    var layer = layers[_i];\n    var style = layer.querySelectorAll('Style')[0];\n    if (style) {\n      style = style.getElementsByTagName('ows:Identifier')[0];\n      if (style) {\n        style = style.textContent;\n      }\n    }\n    var layerName = layer.getElementsByTagName('ows:Identifier')[0];\n    if (layerName) {\n      layerName = layerName.textContent;\n    }\n    var tileMatrixSetLinks = getElementsByTagName(layer, 'TileMatrixSetLink');\n    if (tileMatrixSetLinks.length === 0) {\n      continue;\n    }\n    for (var j = 0, len1 = tileMatrixSetLinks.length; j < len1; j++) {\n      var tileMatrixSetLink = tileMatrixSetLinks[j];\n      tileMatrixSetLink = getElementsByTagName(tileMatrixSetLink, 'TileMatrixSet')[0];\n      if (tileMatrixSetLink) {\n        tileMatrixSetLink = tileMatrixSetLink.textContent;\n      }\n      var tileMatrixSet = getTileMatrixSet(TileMatrixSets, tileMatrixSetLink);\n      if (!tileMatrixSet) {\n        continue;\n      }\n      var resourceURL = layer.querySelectorAll('ResourceURL')[0];\n      var url = '';\n      if (resourceURL) {\n        url = resourceURL.attributes.template.value;\n      }\n      var _parseTileMatrixSet = parseTileMatrixSet(tileMatrixSet, options),\n        resolutions = _parseTileMatrixSet.resolutions,\n        tileSize = _parseTileMatrixSet.tileSize,\n        tileSystem = _parseTileMatrixSet.tileSystem,\n        projection = _parseTileMatrixSet.projection,\n        TileMatrixSet = _parseTileMatrixSet.TileMatrixSet,\n        isGeoServer = _parseTileMatrixSet.isGeoServer,\n        levelStr = _parseTileMatrixSet.levelStr;\n      if (!url.length) {\n        url = requestUrl.substr(0, requestUrl.lastIndexOf('?'));\n        url += '?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER={LAYER}&STYLE={Style}&TILEMATRIXSET={TileMatrixSet}&FORMAT={tiles}&TILEMATRIX={TileMatrix}&TILEROW={TileRow}&TILECOL={TileCol}';\n      }\n      var urlTemplate = strReplace(url, [['{LAYER}', layerName], ['{Layer}', layerName], ['{layer}', layerName], ['{STYLE}', style], ['{Style}', style], ['{style}', style], ['{TileMatrixSet}', TileMatrixSet], ['{TileMatrix}', isGeoServer ? levelStr + \":{z}\" : '{z}'], ['{TileRow}', '{y}'], ['{TileCol}', '{x}'], ['{tiles}', isGeoServer ? 'image/png' : 'tiles']]);\n      result.push({\n        tileSize: tileSize,\n        tileSystem: tileSystem,\n        spatialReference: {\n          resolutions: resolutions,\n          projection: projection\n        },\n        urlTemplate: urlTemplate,\n        info: {\n          layerName: layerName,\n          TileMatrixSet: TileMatrixSet,\n          style: style,\n          tileSize: tileSize,\n          tileSystem: tileSystem,\n          resolutions: resolutions,\n          projection: projection,\n          urlTemplate: urlTemplate\n        }\n      });\n    }\n  }\n  return result;\n}\nfunction parseTileMatrixSet(TileMatrixSet, options) {\n  if (options === void 0) {\n    options = {};\n  }\n  var TileMatrixs = getElementsByTagName(TileMatrixSet, 'TileMatrix');\n  var resolutions = [],\n    tileSystem = [],\n    tileSize = [];\n  var projection,\n    tset,\n    isGeoServer = false,\n    levelStr;\n  if (!projection) {\n    var supportedCRS = TileMatrixSet.getElementsByTagName('ows:SupportedCRS')[0];\n    if (supportedCRS) {\n      projection = supportedCRS.textContent;\n      projection = projection.split('EPSG')[1];\n      projection = getProjectionCode(projection);\n      projection = getProjection(projection);\n    }\n  }\n  if (!tset) {\n    tset = TileMatrixSet.getElementsByTagName('ows:Identifier')[0];\n    if (tset) {\n      tset = tset.textContent;\n    }\n  }\n  options.projection = projection;\n  var minLevel = Infinity;\n  for (var index = 0; index < TileMatrixs.length; index++) {\n    var TileMatrix = TileMatrixs[index];\n    var level = TileMatrix.getElementsByTagName('ows:Identifier')[0].textContent;\n    if (isNaN(parseInt(level))) {\n      levelStr = level.substr(0, level.lastIndexOf(':'));\n      level = level.split(':');\n      level = level[level.length - 1];\n      level = parseInt(level);\n      isGeoServer = true;\n      options.isGeoServer = true;\n    } else {\n      level = parseInt(level);\n    }\n    minLevel = Math.min(minLevel, level);\n    var ScaleDenominator = getElementsByTagName(TileMatrix, 'ScaleDenominator')[0].textContent;\n    var TopLeftCorner = getElementsByTagName(TileMatrix, 'TopLeftCorner')[0].textContent;\n    var TileWidth = getElementsByTagName(TileMatrix, 'TileWidth')[0].textContent;\n    var TileHeight = getElementsByTagName(TileMatrix, 'TileHeight')[0].textContent;\n    if (tileSize.length === 0) {\n      tileSize.push(parseInt(TileWidth), parseInt(TileHeight));\n    }\n    if (tileSystem.length === 0) {\n      var _TopLeftCorner$split$ = TopLeftCorner.split(' ').filter(function (s) {\n          return s !== '';\n        }).map(function (v) {\n          return parseFloat(v);\n        }),\n        x = _TopLeftCorner$split$[0],\n        y = _TopLeftCorner$split$[1];\n      if (x > 0) {\n        tileSystem.push(1, -1, y, x);\n      } else {\n        tileSystem.push(1, -1, x, y);\n      }\n    }\n    var transformValue = getTransformValue(options);\n    var res = parseFloat(ScaleDenominator) * transformValue;\n    resolutions.push(res);\n  }\n  if (minLevel > 0) {\n    var _res = resolutions[0];\n    for (var i = minLevel - 1; i >= 0; i--) {\n      _res = _res * 2;\n      resolutions.splice(0, 0, _res);\n    }\n  }\n  return {\n    resolutions: resolutions,\n    tileSize: tileSize,\n    tileSystem: tileSystem,\n    projection: projection,\n    TileMatrixSet: tset,\n    isGeoServer: isGeoServer,\n    levelStr: levelStr\n  };\n}\nSpatialReference.loadWMTS = function (url, cb, options) {\n  if (options === void 0) {\n    options = {\n      'jsonp': true\n    };\n  }\n  if (isString(url)) {\n    Ajax.get(url, function (err, xml) {\n      if (err) {\n        cb(err);\n        return;\n      }\n      var layers = parseWMTSXML(xml, url, options);\n      cb(null, layers);\n    }, options);\n  }\n  return this;\n};\nvar options$j = {\n  'eventsPropagation': false,\n  'eventsToStop': null,\n  'dx': 0,\n  'dy': 0,\n  'autoPan': false,\n  'autoPanDuration': 600,\n  'single': true,\n  'animation': 'scale',\n  'animationOnHide': false,\n  'animationDuration': 500,\n  'pitchWithMap': false,\n  'rotateWithMap': false,\n  'visible': true,\n  'roundPoint': false,\n  'collision': false,\n  'collisionBufferSize': 2,\n  'collisionWeight': 0,\n  'collisionFadeIn': false,\n  'zIndex': 0\n};\nvar UIComponent = function (_Eventable) {\n  _inheritsLoose(UIComponent, _Eventable);\n  function UIComponent(options) {\n    var _this;\n    _this = _Eventable.call(this, options) || this;\n    _this.proxyOptions();\n    return _this;\n  }\n  var _proto = UIComponent.prototype;\n  _proto.addTo = function addTo(owner) {\n    this._owner = owner;\n    this._switchEvents('on');\n    if (this.onAdd) {\n      this.onAdd();\n    }\n    this.fire('add');\n    return this;\n  };\n  _proto.getMap = function getMap() {\n    if (!this._owner) {\n      return null;\n    }\n    if (this._owner.getBaseLayer) {\n      return this._owner;\n    }\n    return this._owner.getMap();\n  };\n  _proto._collides = function _collides() {\n    var map = this.getMap();\n    if (!map) {\n      return this;\n    }\n    map._addUI(this);\n    map._insertUICollidesQueue();\n    return this;\n  };\n  _proto._collidesEffect = function _collidesEffect(show) {\n    var dom = this.getDOM();\n    if (!dom) {\n      return this;\n    }\n    var visibility = show ? 'visible' : 'hidden';\n    dom.style.visibility = visibility;\n    if (!dom.classList || !dom.classList.add) {\n      return this;\n    }\n    if (!this.options['collisionFadeIn']) {\n      return this;\n    }\n    var classList = dom.classList;\n    var className = 'mtk-ui-fadein';\n    var hasClass$$1 = classList.contains(className);\n    if (show && !hasClass$$1) {\n      dom.classList.add(className);\n    } else if (!show && hasClass$$1) {\n      dom.classList.remove(className);\n    }\n    return this;\n  };\n  _proto.show = function show(coordinate) {\n    var _this2 = this;\n    var map = this.getMap();\n    if (!map) {\n      return this;\n    }\n    this.options['visible'] = true;\n    coordinate = coordinate || this._coordinate || this._owner.getCenter();\n    if (!(coordinate instanceof Coordinate)) {\n      coordinate = new Coordinate(coordinate);\n    }\n    var visible = this.isVisible();\n    if (!this._showBySymbolChange) {\n      this.fire('showstart');\n    }\n    var container = this._getUIContainer();\n    this._coordinate = coordinate;\n    this._removePrevDOM();\n    if (!this._mapEventsOn) {\n      this._switchMapEvents('on');\n    }\n    var dom = this.__uiDOM = this.buildOn(map);\n    dom['eventsPropagation'] = this.options['eventsPropagation'];\n    this._observerDomSize(dom);\n    var zIndex = this.options.zIndex;\n    if (!dom) {\n      if (!this._showBySymbolChange) {\n        this.fire('showend');\n      }\n      this._collides();\n      this.setZIndex(zIndex);\n      return this;\n    }\n    this._measureSize(dom);\n    if (this._singleton()) {\n      dom._uiComponent = this;\n      map[this._uiDomKey()] = dom;\n    }\n    this._setPosition();\n    dom.style[TRANSITION] = null;\n    container.appendChild(dom);\n    var anim = this._getAnimation();\n    if (visible) {\n      anim.ok = false;\n    }\n    if (anim.ok) {\n      if (anim.fade) {\n        dom.style.opacity = 0;\n      }\n      if (anim.scale) {\n        if (this.getTransformOrigin) {\n          var origin = this.getTransformOrigin();\n          dom.style[TRANSFORMORIGIN] = origin;\n        }\n        dom.style[TRANSFORM] = this._toCSSTranslate(this._pos) + ' scale(0)';\n      }\n    }\n    if (!this.isSupportZoomFilter()) {\n      dom.style.display = '';\n    }\n    if (this.options['eventsToStop']) {\n      on(dom, this.options['eventsToStop'], stopPropagation);\n    }\n    var transition = anim.transition;\n    if (anim.ok && transition) {\n      dom.offsetHeight;\n      if (transition) {\n        dom.style[TRANSITION] = transition;\n      }\n      if (anim.fade) {\n        dom.style.opacity = 1;\n      }\n      if (anim.scale) {\n        dom.style[TRANSFORM] = this._toCSSTranslate(this._pos) + ' scale(1)';\n      }\n    }\n    if (!this._showBySymbolChange) {\n      this.fire('showend');\n    }\n    this._collides();\n    clearTimeout(this._autoPanId);\n    if (this.options['autoPan']) {\n      this._autoPanId = setTimeout(function () {\n        _this2._autoPan();\n      }, 32);\n    }\n    this.setZIndex(zIndex);\n    return this;\n  };\n  _proto.hide = function hide() {\n    var _this3 = this;\n    if (!this.getDOM()) {\n      return this;\n    }\n    if (this._onDomMouseout) {\n      this._onDomMouseout();\n    }\n    this.options['visible'] = false;\n    var anim = this._getAnimation(),\n      dom = this.getDOM();\n    if (!this.options['animationOnHide']) {\n      anim.ok = false;\n    }\n    if (!anim.ok) {\n      dom.style.display = 'none';\n      this.fire('hide');\n    } else {\n      dom.offsetHeight;\n      dom.style[TRANSITION] = anim.transition;\n      setTimeout(function () {\n        dom.style.display = 'none';\n        _this3.fire('hide');\n      }, this.options['animationDuration']);\n    }\n    if (anim.fade) {\n      dom.style.opacity = 0;\n    }\n    if (anim.scale) {\n      dom.style[TRANSFORM] = this._toCSSTranslate(this._pos) + ' scale(0)';\n    }\n    this._switchMapEvents('off');\n    this._collides();\n    return this;\n  };\n  _proto.isVisible = function isVisible() {\n    if (!this.options['visible']) {\n      return false;\n    }\n    var dom = this.getDOM();\n    return this.getMap() && dom && dom.parentNode && dom.style.display !== 'none';\n  };\n  _proto.remove = function remove() {\n    delete this._mapEventsOn;\n    if (!this._owner) {\n      return this;\n    }\n    var map = this.getMap();\n    if (map) {\n      map._removeUI(this);\n    }\n    this.hide();\n    this._switchEvents('off');\n    if (this.onRemove) {\n      this.onRemove();\n    }\n    if (!this._singleton() && this.__uiDOM) {\n      this._removePrevDOM();\n    }\n    delete this._owner;\n    this.fire('remove');\n    this._collides();\n    return this;\n  };\n  _proto.getSize = function getSize() {\n    if (this._domContentRect && this._size) {\n      this._size.width = this._domContentRect.width;\n      this._size.height = this._domContentRect.height;\n    }\n    if (this._size) {\n      return this._size.copy();\n    } else {\n      return null;\n    }\n  };\n  _proto.getOwner = function getOwner() {\n    return this._owner;\n  };\n  _proto.getDOM = function getDOM() {\n    return this.__uiDOM;\n  };\n  _proto.setZIndex = function setZIndex(zIndex) {\n    if (!isNumber(zIndex)) {\n      return this;\n    }\n    var dom = this.getDOM();\n    if (!dom) {\n      return this;\n    }\n    dom.style.zIndex = zIndex;\n    if (zIndex !== this.options.zIndex) {\n      this.options.zIndex = zIndex;\n    }\n    return this;\n  };\n  _proto._roundPoint = function _roundPoint(point) {\n    if (this.options.roundPoint) {\n      point = point._round();\n    }\n    return point;\n  };\n  _proto.getPosition = function getPosition() {\n    if (!this.getMap()) {\n      return null;\n    }\n    var p = this._roundPoint(this._getViewPoint());\n    if (this.getOffset) {\n      var o = this._roundPoint(this.getOffset());\n      if (o) {\n        p._add(o);\n      }\n    }\n    return p;\n  };\n  _proto._getAnimation = function _getAnimation() {\n    var anim = {\n      'fade': false,\n      'scale': false\n    };\n    var animations = this.options['animation'] ? this.options['animation'].split(',') : [];\n    for (var i = 0; i < animations.length; i++) {\n      var trimed = trim(animations[i]);\n      if (trimed === 'fade') {\n        anim.fade = true;\n      } else if (trimed === 'scale') {\n        anim.scale = true;\n      }\n    }\n    var transition = null;\n    if (anim.fade) {\n      transition = 'opacity ' + this.options['animationDuration'] + 'ms';\n    }\n    if (anim.scale) {\n      transition = transition ? transition + ',' : '';\n      transition += TRANSFORM + ' ' + this.options['animationDuration'] + 'ms';\n    }\n    anim.transition = transition;\n    anim.ok = transition !== null;\n    return anim;\n  };\n  _proto._getViewPoint = function _getViewPoint() {\n    var altitude = 0;\n    var coordinates = this._coordinate || {};\n    if (isNumber(coordinates.z)) {\n      altitude = coordinates.z;\n    } else if (this._owner && this._owner.getAltitude) {\n      altitude = this._owner.getAltitude() || 0;\n    }\n    var alt = this._meterToPoint(this._coordinate, altitude);\n    return this.getMap().coordToViewPoint(this._coordinate, undefined, alt)._add(this.options['dx'], this.options['dy']);\n  };\n  _proto._meterToPoint = function _meterToPoint(center, altitude) {\n    return altitude;\n  };\n  _proto._autoPan = function _autoPan() {\n    var map = this.getMap(),\n      dom = this.getDOM();\n    if (!dom || !map || map.isMoving()) {\n      return;\n    }\n    var point = this._getViewPoint()._round();\n    var mapWidth = map.width;\n    var mapHeight = map.height;\n    if (dom && dom.getBoundingClientRect) {\n      var _margin = 50;\n      var rect = dom.getBoundingClientRect();\n      var offsetX = 0,\n        offsetY = 0;\n      var _left = rect.left,\n        right = rect.right,\n        _top = rect.top,\n        bottom = rect.bottom,\n        width = rect.width,\n        height = rect.height;\n      if (width > 0 && height > 0) {\n        if (_left < _margin) {\n          offsetX = _margin - _left;\n        }\n        if (offsetX === 0 && right + _margin > mapWidth) {\n          offsetX = -(right + _margin - mapWidth);\n        }\n        if (_top < _margin) {\n          offsetY = _margin - _top;\n        }\n        if (offsetY === 0 && bottom + _margin > mapHeight) {\n          offsetY = -(bottom + _margin - mapHeight);\n        }\n        if (offsetX !== 0 || offsetY !== 0) {\n          var pitch = map.getPitch();\n          if (pitch > 40 && offsetY !== 0 && this._coordinate) {\n            map.animateTo({\n              center: this._coordinate\n            }, {\n              duration: map.options['panAnimationDuration']\n            });\n          } else {\n            map.panBy([Math.ceil(offsetX), Math.ceil(offsetY)]);\n          }\n        }\n        return;\n      }\n    }\n    var containerPoint0 = map.viewPointToContainerPoint(point);\n    var offset = this.getOffset();\n    var containerPoint = containerPoint0.add(offset);\n    var prjCoord = map._viewPointToPrj(point);\n    var domWidth = parseInt(dom.clientWidth);\n    var domHeight = parseInt(dom.clientHeight);\n    var margin = 50;\n    var left = 0,\n      top = 0;\n    if (containerPoint.x < 0) {\n      left = -containerPoint.x + margin;\n    } else if (containerPoint.x + domWidth > mapWidth) {\n      left = -(containerPoint.x + domWidth - mapWidth) - margin;\n    }\n    if (containerPoint.y - domHeight < 0) {\n      top = Math.abs(containerPoint.y - domHeight) + margin;\n    } else if (containerPoint.y + domHeight > mapHeight) {\n      top = mapHeight - (containerPoint.y + domHeight) - margin;\n    }\n    if (domWidth >= mapWidth) {\n      left = mapWidth / 2 - containerPoint0.x;\n    }\n    if (top !== 0 || left !== 0) {\n      var newContainerPoint = containerPoint0.add(left, top);\n      var t = map._containerPointToPoint(newContainerPoint)._sub(map._prjToPoint(map._getPrjCenter()));\n      var target = map._pointToPrj(map._prjToPoint(prjCoord).sub(t));\n      map._panAnimation(target);\n    }\n  };\n  _proto._measureSize = function _measureSize(dom) {\n    var container = this._getUIContainer();\n    dom.style.position = 'absolute';\n    var anchor = dom.style.bottom ? 'bottom' : 'top';\n    dom.style.display = '';\n    container.appendChild(dom);\n    if (dom.getBoundingClientRect) {\n      var rect = dom.getBoundingClientRect();\n      this._size = new Size(rect.width, rect.height);\n    } else {\n      this._size = new Size(dom.clientWidth, dom.clientHeight);\n    }\n    dom.style.display = 'none';\n    dom.style.left = '0px';\n    dom.style[anchor] = '0px';\n    return this._size;\n  };\n  _proto._removePrevDOM = function _removePrevDOM() {\n    if (this.onDomRemove) {\n      this.onDomRemove();\n    }\n    var eventsToStop = this.options['eventsToStop'];\n    if (this._singleton()) {\n      var map = this.getMap(),\n        key = this._uiDomKey();\n      if (map[key]) {\n        if (eventsToStop) {\n          off(map[key], eventsToStop, stopPropagation);\n        }\n        var uiComponent = map[key]._uiComponent;\n        if (uiComponent && uiComponent !== this && uiComponent.isVisible()) {\n          uiComponent.fire('hide');\n        }\n        removeDomNode(map[key]);\n        if (uiComponent && !this.hideDom) {\n          uiComponent._switchMapEvents('off');\n        }\n        delete map[key];\n      }\n      delete this.__uiDOM;\n    } else if (this.__uiDOM) {\n      if (eventsToStop) {\n        off(this.__uiDOM, eventsToStop, stopPropagation);\n      }\n      removeDomNode(this.__uiDOM);\n      delete this.__uiDOM;\n    }\n    if (this._resizeObserver) {\n      this._resizeObserver.disconnect();\n      delete this._resizeObserver;\n      delete this._domContentRect;\n    }\n  };\n  _proto._uiDomKey = function _uiDomKey() {\n    return '__ui_' + this._getClassName();\n  };\n  _proto._singleton = function _singleton() {\n    return this.options['single'];\n  };\n  _proto._getUIContainer = function _getUIContainer() {\n    return this.getMap()._panels['ui'];\n  };\n  _proto._getClassName = function _getClassName() {\n    return 'UIComponent';\n  };\n  _proto._switchMapEvents = function _switchMapEvents(to) {\n    var map = this.getMap();\n    if (!map) {\n      return;\n    }\n    this._mapEventsOn = to === 'on';\n    var events = this._getDefaultEvents();\n    if (this.getEvents) {\n      extend(events, this.getEvents());\n    }\n    if (events) {\n      for (var p in events) {\n        if (events.hasOwnProperty(p)) {\n          map[to](p, events[p], this);\n        }\n      }\n    }\n  };\n  _proto._switchEvents = function _switchEvents(to) {\n    var ownerEvents = this._getOwnerEvents();\n    if (this._owner) {\n      for (var p in ownerEvents) {\n        if (ownerEvents.hasOwnProperty(p)) {\n          this._owner[to](p, ownerEvents[p], this);\n        }\n      }\n    }\n  };\n  _proto._getDefaultEvents = function _getDefaultEvents() {\n    return {\n      'zooming rotate pitch': this.onEvent,\n      'zoomend': this.onZoomEnd,\n      'moving': this.onMoving,\n      'moveend': this.onMoving,\n      'resize': this.onResize\n    };\n  };\n  _proto._getOwnerEvents = function _getOwnerEvents() {\n    var events = {};\n    if (this._owner && this._owner instanceof Geometry) {\n      events.positionchange = this.onGeometryPositionChange;\n      events.symbolchange = this._updatePosition;\n    }\n    if (this.getOwnerEvents) {\n      extend(events, this.getOwnerEvents());\n    }\n    return events;\n  };\n  _proto.onGeometryPositionChange = function onGeometryPositionChange(param) {\n    if (this._owner && this.isVisible()) {\n      this._showBySymbolChange = true;\n      this.show(param['target'].getCenter());\n      delete this._showBySymbolChange;\n    }\n  };\n  _proto.onMoving = function onMoving() {\n    if (this.isVisible() && this.getMap().isTransforming()) {\n      this._updatePosition();\n    }\n  };\n  _proto.onEvent = function onEvent() {\n    if (this.isVisible()) {\n      this._updatePosition();\n    }\n  };\n  _proto.onZoomEnd = function onZoomEnd() {\n    if (this.isVisible()) {\n      this._setPosition();\n    }\n  };\n  _proto.onResize = function onResize() {\n    if (this.isVisible()) {\n      this._setPosition();\n    }\n  };\n  _proto.onDomSizeChange = function onDomSizeChange() {\n    if (this.isVisible()) {\n      this._setPosition();\n      this._collides();\n    }\n  };\n  _proto._updatePosition = function _updatePosition() {\n    if (!this.getMap()) {\n      return this;\n    }\n    var renderer = this.getMap()._getRenderer();\n    renderer.callInNextFrame(this._setPosition.bind(this));\n    return this;\n  };\n  _proto._setPosition = function _setPosition() {\n    var dom = this.getDOM();\n    if (!dom) return;\n    dom.style[TRANSITION] = null;\n    var p = this.getPosition();\n    this._pos = p;\n    dom.style[TRANSFORM] = this._toCSSTranslate(p) + ' scale(1)';\n  };\n  _proto._toCSSTranslate = function _toCSSTranslate(p) {\n    if (!p) {\n      return '';\n    }\n    if (Browser$1.any3d) {\n      var map = this.getMap(),\n        bearing = map ? map.getBearing() : 0,\n        pitch = map ? map.getPitch() : 0;\n      var r = '';\n      if (this.options['pitchWithMap'] && pitch) {\n        r += \" rotateX(\" + Math.round(pitch) + \"deg)\";\n      }\n      if (this.options['rotateWithMap'] && bearing) {\n        r += \" rotateZ(\" + Math.round(-bearing) + \"deg)\";\n      }\n      return 'translate3d(' + p.x + 'px,' + p.y + 'px, 0px)' + r;\n    } else {\n      return 'translate(' + p.x + 'px,' + p.y + 'px)';\n    }\n  };\n  _proto._observerDomSize = function _observerDomSize(dom) {\n    var _this4 = this;\n    if (!dom || !Browser$1.resizeObserver || this._resizeObserver) {\n      return this;\n    }\n    this._resizeObserver = new ResizeObserver(function (entries) {\n      if (entries.length) {\n        var borderBoxSize = entries[0].borderBoxSize;\n        if (borderBoxSize && borderBoxSize.length) {\n          _this4._domContentRect = {\n            width: borderBoxSize[0].inlineSize,\n            height: borderBoxSize[0].blockSize\n          };\n        } else {\n          _this4._domContentRect = entries[0].contentRect;\n        }\n      } else {\n        delete _this4._domContentRect;\n      }\n      if (_this4.onDomSizeChange) {\n        _this4.onDomSizeChange();\n      }\n    });\n    this._resizeObserver.observe(dom);\n    return this;\n  };\n  _proto.isSupportZoomFilter = function isSupportZoomFilter() {\n    return false;\n  };\n  _proto.onConfig = function onConfig() {\n    this._updatePosition();\n    return this;\n  };\n  UIComponent.isSupport = function isSupport(owner) {\n    if (owner && isFunction(owner.on) && isFunction(owner.off) && isFunction(owner.getCenter)) {\n      return true;\n    }\n    return false;\n  };\n  return UIComponent;\n}(Eventable(Class));\nUIComponent.mergeOptions(options$j);\nvar options$k = {\n  'containerClass': null,\n  'eventsPropagation': true,\n  'draggable': false,\n  'single': false,\n  'content': null,\n  'altitude': 0,\n  'minZoom': 0,\n  'maxZoom': null,\n  'horizontalAlignment': 'middle',\n  'verticalAlignment': 'middle'\n};\nvar domEvents = 'mousedown ' + 'mouseup ' + 'mouseenter ' + 'mouseover ' + 'mouseout ' + 'mousemove ' + 'click ' + 'dblclick ' + 'contextmenu ' + 'keypress ' + 'touchstart ' + 'touchmove ' + 'touchend';\nvar UIMarker = function (_Handlerable) {\n  _inheritsLoose(UIMarker, _Handlerable);\n  function UIMarker(coordinate, options) {\n    var _this;\n    _this = _Handlerable.call(this, options) || this;\n    _this._markerCoord = new Coordinate(coordinate);\n    return _this;\n  }\n  var _proto = UIMarker.prototype;\n  _proto._getClassName = function _getClassName() {\n    return 'UIMarker';\n  };\n  _proto.setCoordinates = function setCoordinates(coordinates) {\n    this._markerCoord = coordinates;\n    this.fire('positionchange');\n    if (this.isVisible()) {\n      this._coordinate = this._markerCoord;\n      this._setPosition();\n      this._collides();\n    }\n    return this;\n  };\n  _proto.getCoordinates = function getCoordinates() {\n    return this._markerCoord;\n  };\n  _proto.getCenter = function getCenter() {\n    return this.getCoordinates();\n  };\n  _proto.getAltitude = function getAltitude() {\n    var coordinates = this.getCoordinates() || {};\n    if (isNumber(coordinates.z)) {\n      return coordinates.z;\n    }\n    return this.options.altitude || 0;\n  };\n  _proto.setAltitude = function setAltitude(alt) {\n    if (isNumber(alt) && this._markerCoord) {\n      this._markerCoord.z = alt;\n      if (this._updatePosition) {\n        this._updatePosition();\n        this._collides();\n      }\n    }\n    return this;\n  };\n  _proto.setContent = function setContent(content) {\n    var old = this.options['content'];\n    this.options['content'] = content;\n    this.fire('contentchange', {\n      'old': old,\n      'new': content\n    });\n    if (this.isVisible()) {\n      this.show();\n    }\n    return this;\n  };\n  _proto.getContent = function getContent() {\n    return this.options['content'];\n  };\n  _proto.onAdd = function onAdd() {\n    this.show();\n  };\n  _proto.show = function show() {\n    return _Handlerable.prototype.show.call(this, this._markerCoord);\n  };\n  _proto.flash = function flash$$1(interval, count, cb, context) {\n    return flash.call(this, interval, count, cb, context);\n  };\n  _proto.buildOn = function buildOn() {\n    var dom;\n    var content = this.options['content'];\n    var isStr = isString(content);\n    if (isStr || isFunction(content)) {\n      dom = createEl('div');\n      if (isStr) {\n        dom.innerHTML = this.options['content'];\n      } else {\n        content.bind(this)(dom);\n      }\n    } else {\n      dom = this.options['content'];\n    }\n    if (this.options['containerClass']) {\n      dom.className = this.options['containerClass'];\n    }\n    this._registerDOMEvents(dom);\n    return dom;\n  };\n  _proto.getOffset = function getOffset() {\n    var size = this.getSize();\n    var offsetX = -size.width / 2,\n      offsetY = -size.height / 2;\n    var _this$options = this.options,\n      horizontalAlignment = _this$options.horizontalAlignment,\n      verticalAlignment = _this$options.verticalAlignment;\n    if (horizontalAlignment === 'left') {\n      offsetX = -size.width;\n    } else if (horizontalAlignment === 'right') {\n      offsetX = 0;\n    }\n    if (verticalAlignment === 'top') {\n      offsetY = -size.height;\n    } else if (verticalAlignment === 'bottom') {\n      offsetY = 0;\n    }\n    return new Point(offsetX, offsetY);\n  };\n  _proto.getTransformOrigin = function getTransformOrigin() {\n    return 'center center';\n  };\n  _proto.onDomRemove = function onDomRemove() {\n    var dom = this.getDOM();\n    this._removeDOMEvents(dom);\n  };\n  _proto.isDragging = function isDragging() {\n    if (this['draggable']) {\n      return this['draggable'].isDragging();\n    }\n    return false;\n  };\n  _proto._registerDOMEvents = function _registerDOMEvents(dom) {\n    on(dom, domEvents, this._onDomEvents, this);\n  };\n  _proto._onDomEvents = function _onDomEvents(e) {\n    var event = this.getMap()._parseEvent(e, e.type);\n    var type = e.type;\n    if (type === 'mousedown') {\n      this._mousedownEvent = e;\n    }\n    if (type === 'mouseup') {\n      this._mouseupEvent = e;\n    }\n    if (type === 'click' && this._mouseClickPositionIsChange()) {\n      return;\n    }\n    if (type === 'touchstart') {\n      this._touchstartTime = now();\n    }\n    this.fire(e.type, event);\n    if (type === 'touchend' && Browser$1.touch) {\n      var clickTimeThreshold = this.getMap().options.clickTimeThreshold || 280;\n      if (now() - this._touchstartTime < clickTimeThreshold) {\n        this._onDomEvents(extend({}, e, {\n          type: 'click'\n        }));\n      }\n    }\n  };\n  _proto._removeDOMEvents = function _removeDOMEvents(dom) {\n    off(dom, domEvents, this._onDomEvents, this);\n  };\n  _proto._mouseClickPositionIsChange = function _mouseClickPositionIsChange() {\n    var _ref = this._mousedownEvent || {},\n      x1 = _ref.x,\n      y1 = _ref.y;\n    var _ref2 = this._mouseupEvent || {},\n      x2 = _ref2.x,\n      y2 = _ref2.y;\n    return x1 !== x2 || y1 !== y2;\n  };\n  _proto._getConnectPoints = function _getConnectPoints() {\n    var map = this.getMap();\n    var containerPoint = map.coordToContainerPoint(this.getCoordinates());\n    var size = this.getSize(),\n      width = size.width,\n      height = size.height;\n    var anchors = [map.containerPointToCoordinate(containerPoint.add(-width / 2, 0)), map.containerPointToCoordinate(containerPoint.add(width / 2, 0)), map.containerPointToCoordinate(containerPoint.add(0, height / 2)), map.containerPointToCoordinate(containerPoint.add(0, -height / 2))];\n    return anchors;\n  };\n  _proto._getViewPoint = function _getViewPoint() {\n    var alt = 0;\n    if (this._owner) {\n      var altitude = this.getAltitude();\n      if (altitude > 0) {\n        alt = this._meterToPoint(this._coordinate, altitude);\n      }\n    }\n    return this.getMap().coordToViewPoint(this._coordinate, undefined, alt)._add(this.options['dx'], this.options['dy']);\n  };\n  _proto._getDefaultEvents = function _getDefaultEvents() {\n    return extend({}, _Handlerable.prototype._getDefaultEvents.call(this), {\n      'zooming zoomend': this.onZoomFilter\n    });\n  };\n  _proto._setPosition = function _setPosition() {\n    this.onZoomFilter();\n    _Handlerable.prototype._setPosition.call(this);\n  };\n  _proto.onZoomFilter = function onZoomFilter() {\n    var dom = this.getDOM();\n    if (!dom) return;\n    if (!this.isVisible() && dom.style.display !== 'none') {\n      dom.style.display = 'none';\n    } else if (this.isVisible() && dom.style.display === 'none') {\n      dom.style.display = '';\n    }\n  };\n  _proto.isVisible = function isVisible() {\n    var map = this.getMap();\n    if (!map) {\n      return false;\n    }\n    if (!this.options['visible']) {\n      return false;\n    }\n    var zoom = map.getZoom();\n    var _this$options2 = this.options,\n      minZoom = _this$options2.minZoom,\n      maxZoom = _this$options2.maxZoom;\n    if (!isNil(minZoom) && zoom < minZoom || !isNil(maxZoom) && zoom > maxZoom) {\n      return false;\n    }\n    var dom = this.getDOM();\n    return dom && true;\n  };\n  _proto.isSupportZoomFilter = function isSupportZoomFilter() {\n    return true;\n  };\n  return UIMarker;\n}(Handlerable(UIComponent));\nUIMarker.mergeOptions(options$k);\nvar EVENTS$1 = Browser$1.touch ? 'touchstart mousedown' : 'mousedown';\nvar UIMarkerDragHandler = function (_Handler) {\n  _inheritsLoose(UIMarkerDragHandler, _Handler);\n  function UIMarkerDragHandler(target) {\n    return _Handler.call(this, target) || this;\n  }\n  var _proto2 = UIMarkerDragHandler.prototype;\n  _proto2.addHooks = function addHooks() {\n    this.target.on(EVENTS$1, this._startDrag, this);\n  };\n  _proto2.removeHooks = function removeHooks() {\n    this.target.off(EVENTS$1, this._startDrag, this);\n  };\n  _proto2._startDrag = function _startDrag(param) {\n    var domEvent = param['domEvent'];\n    if (domEvent.touches && domEvent.touches.length > 1 || domEvent.button === 2) {\n      return;\n    }\n    if (this.isDragging()) {\n      return;\n    }\n    this.target.on('click', this._endDrag, this);\n    this._lastCoord = param['coordinate'];\n    this._lastPoint = param['containerPoint'];\n    this._prepareDragHandler();\n    this._dragHandler.onMouseDown(param['domEvent']);\n    this.target.fire('dragstart', param);\n  };\n  _proto2._prepareDragHandler = function _prepareDragHandler() {\n    this._dragHandler = new DragHandler(this.target.getDOM(), {\n      'cancelOn': this._cancelOn.bind(this),\n      'ignoreMouseleave': true\n    });\n    this._dragHandler.on('mousedown', this._onMouseDown, this);\n    this._dragHandler.on('dragging', this._dragging, this);\n    this._dragHandler.on('mouseup', this._endDrag, this);\n    this._dragHandler.enable();\n  };\n  _proto2._cancelOn = function _cancelOn(domEvent) {\n    var target = domEvent.srcElement || domEvent.target,\n      tagName = target.tagName.toLowerCase();\n    if (tagName === 'button' || tagName === 'input' || tagName === 'select' || tagName === 'option' || tagName === 'textarea') {\n      return true;\n    }\n    return false;\n  };\n  _proto2._onMouseDown = function _onMouseDown(param) {\n    stopPropagation(param['domEvent']);\n  };\n  _proto2._dragging = function _dragging(param) {\n    var target = this.target,\n      map = target.getMap(),\n      eventParam = map._parseEvent(param['domEvent']),\n      domEvent = eventParam['domEvent'];\n    if (domEvent.touches && domEvent.touches.length > 1) {\n      return;\n    }\n    if (!this._isDragging) {\n      this._isDragging = true;\n      return;\n    }\n    var coord = eventParam['coordinate'],\n      point = eventParam['containerPoint'];\n    if (!this._lastCoord) {\n      this._lastCoord = coord;\n    }\n    if (!this._lastPoint) {\n      this._lastPoint = point;\n    }\n    var coordOffset = coord.sub(this._lastCoord),\n      pointOffset = point.sub(this._lastPoint);\n    this._lastCoord = coord;\n    this._lastPoint = point;\n    this.target.setCoordinates(this.target.getCoordinates().add(coordOffset));\n    eventParam['coordOffset'] = coordOffset;\n    eventParam['pointOffset'] = pointOffset;\n    target.fire('dragging', eventParam);\n  };\n  _proto2._endDrag = function _endDrag(param) {\n    var target = this.target,\n      map = target.getMap();\n    if (this._dragHandler) {\n      target.off('click', this._endDrag, this);\n      this._dragHandler.disable();\n      delete this._dragHandler;\n    }\n    delete this._lastCoord;\n    delete this._lastPoint;\n    this._isDragging = false;\n    if (!map) {\n      return;\n    }\n    var eventParam = map._parseEvent(param['domEvent']);\n    if (target && target._mouseClickPositionIsChange && target._mouseClickPositionIsChange()) {\n      target.fire('dragend', eventParam);\n    }\n  };\n  _proto2.isDragging = function isDragging() {\n    if (!this._isDragging) {\n      return false;\n    }\n    return true;\n  };\n  return UIMarkerDragHandler;\n}(Handler$1);\nUIMarker.addInitHook('addHandler', 'draggable', UIMarkerDragHandler);\nvar PROPERTY_PATTERN = /\\{ *([\\w_]+) *\\}/g;\nvar options$l = {\n  'containerClass': 'maptalks-msgBox',\n  'autoPan': true,\n  'autoCloseOn': null,\n  'autoOpenOn': 'click',\n  'width': 'auto',\n  'minHeight': 120,\n  'custom': false,\n  'title': null,\n  'content': null,\n  'enableTemplate': false\n};\nvar EMPTY_SIZE = new Size(0, 0);\nvar InfoWindow = function (_UIComponent) {\n  _inheritsLoose(InfoWindow, _UIComponent);\n  function InfoWindow() {\n    return _UIComponent.apply(this, arguments) || this;\n  }\n  var _proto = InfoWindow.prototype;\n  _proto._getClassName = function _getClassName() {\n    return 'InfoWindow';\n  };\n  _proto.addTo = function addTo(owner) {\n    if (owner instanceof Geometry) {\n      if (owner.getInfoWindow() && owner.getInfoWindow() !== this) {\n        owner.removeInfoWindow();\n      }\n      owner._infoWindow = this;\n    }\n    return _UIComponent.prototype.addTo.call(this, owner);\n  };\n  _proto.setContent = function setContent(content) {\n    var old = this.options['content'];\n    this.options['content'] = content;\n    this.fire('contentchange', {\n      'old': old,\n      'new': content\n    });\n    if (this.isVisible()) {\n      this.show(this._coordinate);\n    }\n    return this;\n  };\n  _proto.getContent = function getContent() {\n    return this.options['content'];\n  };\n  _proto.setTitle = function setTitle(title) {\n    var old = title;\n    this.options['title'] = title;\n    this.fire('contentchange', {\n      'old': old,\n      'new': title\n    });\n    if (this.isVisible()) {\n      this.show(this._coordinate);\n    }\n    return this;\n  };\n  _proto.getTitle = function getTitle() {\n    return this.options['title'];\n  };\n  _proto.buildOn = function buildOn() {\n    var isFunc = isFunction(this.options['content']);\n    var isStr = isString(this.options['content']);\n    if (this.options['custom']) {\n      if (isStr || isFunc) {\n        var _dom = createEl('div');\n        if (isStr) {\n          _dom.innerHTML = this.options['content'];\n          this._replaceTemplate(_dom);\n        } else {\n          this.options['content'].bind(this)(_dom);\n        }\n        return _dom;\n      } else {\n        this._replaceTemplate(this.options['content']);\n        return this.options['content'];\n      }\n    }\n    this._bindDomEvents(this.getDOM(), 'off');\n    var dom = createEl('div');\n    if (this.options['containerClass']) {\n      dom.className = this.options['containerClass'];\n    }\n    var width = this._getWindowWidth();\n    dom.style.width = isNumber(width) ? width + 'px' : 'auto';\n    dom.style.bottom = '0px';\n    var content = '<em class=\"maptalks-ico\"></em>';\n    if (this.options['title']) {\n      content += '<h2>' + this.options['title'] + '</h2>';\n    }\n    content += '<a href=\"javascript:void(0);\" class=\"maptalks-close\">×</a><div class=\"maptalks-msgContent\"></div>';\n    dom.innerHTML = content;\n    this._replaceTemplate(dom);\n    var msgContent = dom.querySelector('.maptalks-msgContent');\n    if (isStr || isFunc) {\n      if (isStr) {\n        msgContent.innerHTML = this.options['content'];\n      } else {\n        this.options['content'].bind(this)(msgContent);\n      }\n    } else {\n      msgContent.appendChild(this.options['content']);\n    }\n    this._onCloseBtnClick = this.hide.bind(this);\n    var closeBtn = dom.querySelector('.maptalks-close');\n    addDomEvent(closeBtn, 'click touchend', this._onCloseBtnClick);\n    if (!isFunc) {\n      this._replaceTemplate(msgContent);\n    }\n    this._bindDomEvents(dom, 'on');\n    return dom;\n  };\n  _proto._replaceTemplate = function _replaceTemplate(dom) {\n    if (this.options['enableTemplate'] && this._owner && this._owner.getProperties && dom && dom.innerHTML) {\n      var properties = this._owner.getProperties() || {};\n      if (isObject(properties)) {\n        var html = dom.innerHTML;\n        dom.innerHTML = html.replace(PROPERTY_PATTERN, function (str, key) {\n          return properties[key];\n        });\n      }\n    }\n    return this;\n  };\n  _proto.getTransformOrigin = function getTransformOrigin() {\n    var size = this.getSize();\n    return size.width / 2 + 'px bottom';\n  };\n  _proto.getOffset = function getOffset() {\n    var size = this.getSize();\n    var o = new Point(-size['width'] / 2, 0);\n    if (!this.options['custom']) {\n      o._sub(4, 12);\n    } else {\n      o._sub(0, size['height']);\n    }\n    var owner = this.getOwner();\n    if (owner instanceof Marker || owner instanceof MultiPoint) {\n      var painter, markerSize;\n      if (owner instanceof Marker) {\n        painter = owner._getPainter();\n        markerSize = owner.getSize();\n      } else {\n        var children = owner.getGeometries();\n        if (!children || !children.length) {\n          return o;\n        }\n        painter = children[0]._getPainter();\n        markerSize = children[0].getSize();\n      }\n      if (!markerSize) {\n        markerSize = EMPTY_SIZE;\n      }\n      if (painter) {\n        var fixExtent = painter.getFixedExtent();\n        o._add(fixExtent.xmax - markerSize.width / 2, fixExtent.ymin);\n      } else {\n        o._add(0, -markerSize.height);\n      }\n    }\n    return o;\n  };\n  _proto.show = function show(coordinate) {\n    if (!this.getMap()) {\n      return this;\n    }\n    if (!this.getMap().options['enableInfoWindow']) {\n      return this;\n    }\n    return _UIComponent.prototype.show.call(this, coordinate);\n  };\n  _proto.getEvents = function getEvents() {\n    if (!this.options['autoCloseOn']) {\n      return null;\n    }\n    var events = {};\n    events[this.options['autoCloseOn']] = this.hide;\n    return events;\n  };\n  _proto.getOwnerEvents = function getOwnerEvents() {\n    var owner = this.getOwner();\n    if (!this.options['autoOpenOn'] || !owner) {\n      return null;\n    }\n    var events = {};\n    events[this.options['autoOpenOn']] = this._onAutoOpen;\n    return events;\n  };\n  _proto.onRemove = function onRemove() {\n    this._onDomMouseout();\n    this.onDomRemove();\n  };\n  _proto.onDomRemove = function onDomRemove() {\n    if (this._onCloseBtnClick) {\n      var dom = this.getDOM();\n      var closeBtn = dom.childNodes[2];\n      removeDomEvent(closeBtn, 'click touchend', this._onCloseBtnClick);\n      delete this._onCloseBtnClick;\n    }\n  };\n  _proto._onAutoOpen = function _onAutoOpen(e) {\n    var _this = this;\n    var owner = this.getOwner();\n    setTimeout(function () {\n      if (owner instanceof Marker || owner instanceof UIComponent) {\n        _this.show(owner.getCoordinates());\n      } else if (owner instanceof MultiPoint) {\n        _this.show(owner.findClosest(e.coordinate));\n      } else if (owner instanceof LineString || owner instanceof MultiLineString) {\n        if (_this.getMap().getScale() >= 8) {\n          e.coordinate = _this._rectifyMouseCoordinte(owner, e.coordinate);\n        }\n        _this.show(e.coordinate);\n      } else {\n        _this.show(e.coordinate);\n      }\n    }, 1);\n  };\n  _proto._rectifyMouseCoordinte = function _rectifyMouseCoordinte(owner, mouseCoordinate) {\n    var _this2 = this;\n    if (owner instanceof LineString) {\n      return this._rectifyLineStringMouseCoordinate(owner, mouseCoordinate).coordinate;\n    } else if (owner instanceof MultiLineString) {\n      return owner.getGeometries().map(function (lineString) {\n        return _this2._rectifyLineStringMouseCoordinate(lineString, mouseCoordinate);\n      }).sort(function (a, b) {\n        return a.dis - b.dis;\n      })[0].coordinate;\n    }\n    return mouseCoordinate;\n  };\n  _proto._rectifyLineStringMouseCoordinate = function _rectifyLineStringMouseCoordinate(lineString, mouseCoordinate) {\n    var _this3 = this;\n    var pts = lineString.getCoordinates().map(function (coordinate) {\n      return _this3.getMap().coordToContainerPoint(coordinate);\n    });\n    var mousePt = this.getMap().coordToContainerPoint(mouseCoordinate);\n    var minDis = Infinity,\n      coordinateIndex = -1;\n    for (var i = 0, len = pts.length; i < len; i++) {\n      var pt = pts[i];\n      var dis = mousePt.distanceTo(pt);\n      if (dis < minDis) {\n        minDis = dis;\n        coordinateIndex = i;\n      }\n    }\n    var filterPts = [];\n    if (coordinateIndex === 0) {\n      filterPts.push(pts[0], pts[1]);\n    } else if (coordinateIndex === pts.length - 1) {\n      filterPts.push(pts[coordinateIndex - 1], pts[coordinateIndex]);\n    } else {\n      filterPts.push(pts[coordinateIndex - 1], pts[coordinateIndex], pts[coordinateIndex + 1]);\n    }\n    var xys = [];\n    var _this$getMap$getSize = this.getMap().getSize(),\n      width = _this$getMap$getSize.width,\n      height = _this$getMap$getSize.height;\n    for (var _i = 0, _len = filterPts.length - 1; _i < _len; _i++) {\n      var pt1 = filterPts[_i],\n        pt2 = filterPts[_i + 1];\n      if (pt1.x === pt2.x) {\n        var miny = Math.max(0, Math.min(pt1.y, pt2.y));\n        var maxy = Math.min(height, Math.max(pt1.y, pt2.y));\n        for (var y = miny; y <= maxy; y++) {\n          xys.push(new Point(pt1.x, y));\n        }\n      } else {\n        var k = (pt2.y - pt1.y) / (pt2.x - pt1.x);\n        var minx = Math.max(0, Math.min(pt1.x, pt2.x));\n        var maxx = Math.min(width, Math.max(pt1.x, pt2.x));\n        for (var x = minx; x <= maxx; x++) {\n          var _y = k * (x - pt1.x) + pt1.y;\n          xys.push(new Point(x, _y));\n        }\n      }\n    }\n    var minPtDis = Infinity,\n      ptIndex = -1;\n    for (var _i2 = 0, _len2 = xys.length; _i2 < _len2; _i2++) {\n      var _pt = xys[_i2];\n      var _dis = mousePt.distanceTo(_pt);\n      if (_dis < minPtDis) {\n        minPtDis = _dis;\n        ptIndex = _i2;\n      }\n    }\n    return {\n      dis: minPtDis,\n      coordinate: ptIndex < 0 ? mouseCoordinate : this.getMap().containerPointToCoord(xys[ptIndex])\n    };\n  };\n  _proto._getWindowWidth = function _getWindowWidth() {\n    var defaultWidth = options$l.width;\n    var width = this.options['width'];\n    if (!width) {\n      width = defaultWidth;\n    }\n    return width;\n  };\n  _proto._bindDomEvents = function _bindDomEvents(dom, to) {\n    if (!dom) {\n      return;\n    }\n    var events = this._getDomEvents();\n    var bindEvent = to === 'on' ? on : off;\n    for (var eventName in events) {\n      bindEvent(dom, eventName, events[eventName], this);\n    }\n  };\n  _proto._getDomEvents = function _getDomEvents() {\n    return {\n      'mouseover': this._onDomMouseover,\n      'mouseout': this._onDomMouseout\n    };\n  };\n  _proto._onDomMouseover = function _onDomMouseover(domEvent) {\n    var map = this.getMap();\n    if (!map) {\n      return;\n    }\n    map.options['preventWheelScroll'] = false;\n  };\n  _proto._onDomMouseout = function _onDomMouseout(domEvent) {\n    var map = this.getMap();\n    if (!map) {\n      return;\n    }\n    map.options['preventWheelScroll'] = true;\n  };\n  return InfoWindow;\n}(UIComponent);\nInfoWindow.mergeOptions(options$l);\nvar HIDEDOMEVENTS = 'remove hide shapechange positionchange dragend animatestart';\nvar options$m = {\n  'width': 0,\n  'height': 0,\n  'animation': 'fade',\n  'containerClass': 'maptalks-tooltip',\n  'showTimeout': 400\n};\nvar ToolTip = function (_UIComponent) {\n  _inheritsLoose(ToolTip, _UIComponent);\n  var _proto = ToolTip.prototype;\n  _proto._getClassName = function _getClassName() {\n    return 'ToolTip';\n  };\n  function ToolTip(content, options) {\n    var _this;\n    if (options === void 0) {\n      options = {};\n    }\n    _this = _UIComponent.call(this, options) || this;\n    _this._content = content;\n    return _this;\n  }\n  _proto.addTo = function addTo(owner) {\n    if (ToolTip.isSupport(owner)) {\n      owner.on('mousemove', this.onMouseMove, this);\n      owner.on('mouseout', this.onMouseOut, this);\n      owner.on(HIDEDOMEVENTS, this.hideDom, this);\n      return _UIComponent.prototype.addTo.call(this, owner);\n    } else {\n      throw new Error('Invalid geometry or UIMarker the tooltip is added to.');\n    }\n  };\n  _proto.setStyle = function setStyle$$1(cssName) {\n    this.options.containerClass = cssName;\n    return this;\n  };\n  _proto.getStyle = function getStyle() {\n    return this.options.containerClass;\n  };\n  _proto.getContent = function getContent() {\n    return this._content;\n  };\n  _proto.buildOn = function buildOn() {\n    var dom = createEl('div');\n    var options = this.options || {};\n    if (options.height) {\n      dom.style.height = options.height + 'px';\n    }\n    if (options.width) {\n      dom.style.width = options.width + 'px';\n    }\n    var cssName = options.containerClass || options.cssName;\n    if (!cssName && options.height) {\n      dom.style.lineHeight = options.height + 'px';\n    }\n    if (isFunction(this._content)) {\n      this._content.bind(this)(dom);\n    } else {\n      dom.innerHTML = \"<div class=\\\"\" + cssName + \"\\\">\" + this._content + \"</div>\";\n    }\n    return dom;\n  };\n  _proto.onMouseOut = function onMouseOut() {\n    clearTimeout(this._timeout);\n    if (this.isVisible()) {\n      this._removePrevDOM();\n    }\n    this._switchMapEvents('off');\n  };\n  _proto.onMouseMove = function onMouseMove(e) {\n    var _this2 = this;\n    clearTimeout(this._timeout);\n    var map = this.getMap();\n    if (!map) {\n      return;\n    }\n    var coord = map.locateByPoint(e.coordinate, -5, 25);\n    if (this.options['showTimeout'] === 0) {\n      this.show(coord);\n    } else {\n      this._timeout = setTimeout(function () {\n        if (map) {\n          _this2.show(coord);\n        }\n      }, this.options['showTimeout']);\n    }\n  };\n  _proto.onRemove = function onRemove() {\n    clearTimeout(this._timeout);\n    if (this._owner) {\n      this._owner.off('mouseover', this.onMouseOver, this);\n      this._owner.off('mouseout', this.onMouseOut, this);\n      this._owner.off(HIDEDOMEVENTS, this.hideDom, this);\n    }\n  };\n  _proto.hideDom = function hideDom() {\n    return this.hide();\n  };\n  _proto.onEvent = function onEvent() {\n    _UIComponent.prototype.onEvent.call(this);\n    this.hideDom();\n    return this;\n  };\n  _proto._getViewPoint = function _getViewPoint() {\n    return this.getMap().coordToViewPoint(this._coordinate, undefined, 0)._add(this.options['dx'], this.options['dy']);\n  };\n  return ToolTip;\n}(UIComponent);\nToolTip.mergeOptions(options$m);\nvar defaultOptions = {\n  'containerClass': 'maptalks-menu',\n  'animation': null,\n  'animationDelay': 10,\n  'animationOnHide': false,\n  'autoPan': false,\n  'width': 160,\n  'maxHeight': 0,\n  'custom': false,\n  'items': []\n};\nvar Menu = function (_UIComponent) {\n  _inheritsLoose(Menu, _UIComponent);\n  function Menu(options) {\n    return _UIComponent.call(this, options) || this;\n  }\n  var _proto = Menu.prototype;\n  _proto._getClassName = function _getClassName() {\n    return 'Menu';\n  };\n  _proto.addTo = function addTo(owner) {\n    if (owner._menu && owner._menu !== this) {\n      owner.removeMenu();\n    }\n    owner._menu = this;\n    this._owner = owner;\n    return UIComponent.prototype.addTo.apply(this, arguments);\n  };\n  _proto.setItems = function setItems(items) {\n    this.options['items'] = items;\n    return this;\n  };\n  _proto.getItems = function getItems() {\n    return this.options['items'] || [];\n  };\n  _proto.buildOn = function buildOn() {\n    if (this.options['custom']) {\n      if (isString(this.options['items'])) {\n        var container = createEl('div');\n        container.innerHTML = this.options['items'];\n        return container;\n      } else {\n        return this.options['items'];\n      }\n    } else {\n      var dom = createEl('div');\n      if (this.options['containerClass']) {\n        addClass(dom, this.options['containerClass']);\n      }\n      dom.style.width = this._getMenuWidth() + 'px';\n      var menuItems = this._createMenuItemDom();\n      dom.appendChild(menuItems);\n      on(dom, 'contextmenu', preventDefault);\n      return dom;\n    }\n  };\n  _proto.getOffset = function getOffset() {\n    if (!this.getMap()) {\n      return null;\n    }\n    var mapSize = this.getMap().getSize(),\n      p = this.getMap().viewPointToContainerPoint(this._getViewPoint()),\n      size = this.getSize();\n    var dx = 0,\n      dy = 0;\n    if (p.x + size['width'] > mapSize['width']) {\n      dx = -size['width'];\n    }\n    if (p.y + size['height'] > mapSize['height']) {\n      dy = -size['height'];\n    }\n    return new Point(dx, dy);\n  };\n  _proto.getTransformOrigin = function getTransformOrigin() {\n    var p = this.getOffset()._multi(-1);\n    return p.x + 'px ' + p.y + 'px';\n  };\n  _proto.getEvents = function getEvents() {\n    return {\n      '_zoomstart _zoomend _movestart _dblclick _click': this._removePrevDOM\n    };\n  };\n  _proto._createMenuItemDom = function _createMenuItemDom() {\n    var me = this;\n    var map = this.getMap();\n    var ul = createEl('ul');\n    addClass(ul, 'maptalks-menu-items');\n    var items = this.getItems();\n    function onMenuClick(index) {\n      return function (e) {\n        var param = map._parseEvent(e, 'click');\n        param['target'] = me;\n        param['owner'] = me._owner;\n        param['index'] = index;\n        var result = this._callback(param);\n        if (result === false) {\n          return;\n        }\n        me.hide();\n        if (me._owner) {\n          me._owner.fire('closemenu');\n        }\n      };\n    }\n    var item, itemDOM;\n    for (var i = 0, len = items.length; i < len; i++) {\n      item = items[i];\n      if (item === '-' || item === '_') {\n        itemDOM = createEl('li');\n        addClass(itemDOM, 'maptalks-menu-splitter');\n      } else {\n        itemDOM = createEl('li');\n        var itemTitle = item['item'];\n        if (isFunction(itemTitle)) {\n          itemTitle = itemTitle({\n            'owner': this._owner,\n            'index': i\n          });\n        }\n        itemDOM.innerHTML = itemTitle;\n        itemDOM._callback = item['click'];\n        on(itemDOM, 'click', onMenuClick(i));\n      }\n      ul.appendChild(itemDOM);\n    }\n    var maxHeight = this.options['maxHeight'] || 0;\n    if (maxHeight > 0) {\n      setStyle(ul, 'max-height: ' + maxHeight + 'px; overflow-y: auto;');\n    }\n    return ul;\n  };\n  _proto._getMenuWidth = function _getMenuWidth() {\n    var defaultWidth = 160;\n    var width = this.options['width'] || defaultWidth;\n    return width;\n  };\n  return Menu;\n}(UIComponent);\nMenu.mergeOptions(defaultOptions);\nvar Menuable = {\n  setMenu: function setMenu(options) {\n    this._menuOptions = options;\n    if (this._menu) {\n      this._menu.setOptions(options);\n    } else {\n      this.on('contextmenu', this._defaultOpenMenu, this);\n    }\n    return this;\n  },\n  getMenu: function getMenu() {\n    return this._menu;\n  },\n  openMenu: function openMenu(coordinate) {\n    var map = this instanceof Map$1 ? this : this.getMap();\n    if (!coordinate) {\n      coordinate = this.getCenter();\n    }\n    if (!this._menu) {\n      if (this._menuOptions && map) {\n        this._bindMenu();\n        this._menu.show(coordinate);\n      }\n    } else {\n      this._menu.show(coordinate);\n    }\n    this.fire('openmenu', {\n      coordinate: coordinate\n    });\n    return this;\n  },\n  setMenuItems: function setMenuItems(items) {\n    if (!this._menuOptions) {\n      this._menuOptions = {};\n    }\n    if (Array.isArray(items)) {\n      this._menuOptions['custom'] = false;\n    }\n    this._menuOptions['items'] = items;\n    this.setMenu(this._menuOptions);\n    return this;\n  },\n  getMenuItems: function getMenuItems() {\n    if (this._menu) {\n      return this._menu.getItems();\n    } else if (this._menuOptions) {\n      return this._menuOptions['items'] || [];\n    }\n    return [];\n  },\n  closeMenu: function closeMenu() {\n    if (this._menu) {\n      this._menu.hide();\n    }\n    this.fire('closemenu', {});\n    return this;\n  },\n  removeMenu: function removeMenu() {\n    this.off('contextmenu', this._defaultOpenMenu, this);\n    this._unbindMenu();\n    delete this._menuOptions;\n    this.fire('removemenu', {});\n    return this;\n  },\n  _bindMenu: function _bindMenu() {\n    if (!this._menuOptions) {\n      return this;\n    }\n    this._menu = new Menu(this._menuOptions);\n    this._menu.addTo(this);\n    return this;\n  },\n  _unbindMenu: function _unbindMenu() {\n    if (this._menu) {\n      this.closeMenu();\n      this._menu.remove();\n      delete this._menu;\n    }\n    return this;\n  },\n  _defaultOpenMenu: function _defaultOpenMenu(param) {\n    this.openMenu(param['coordinate']);\n    return false;\n  }\n};\nMap$1.include(Menuable);\nGeometry.include(Menuable);\nvar index$4 = /*#__PURE__*/Object.freeze({\n  UIComponent: UIComponent,\n  UIMarker: UIMarker,\n  InfoWindow: InfoWindow,\n  ToolTip: ToolTip,\n  Menuable: Menuable,\n  Menu: Menu\n});\nvar Control = function (_Eventable) {\n  _inheritsLoose(Control, _Eventable);\n  function Control(options) {\n    if (options && options['position'] && !isString(options['position'])) {\n      options['position'] = extend({}, options['position']);\n    }\n    return _Eventable.call(this, options) || this;\n  }\n  var _proto = Control.prototype;\n  _proto.addTo = function addTo(map) {\n    this.remove();\n    if (!map.options['control']) {\n      return this;\n    }\n    this._map = map;\n    var controlContainer = map._panels.control;\n    this.__ctrlContainer = createEl('div');\n    setStyle(this.__ctrlContainer, 'position:absolute;overflow:visible;');\n    this.update();\n    controlContainer.appendChild(this.__ctrlContainer);\n    if (this.onAdd) {\n      this.onAdd();\n    }\n    this.fire('add', {\n      'dom': controlContainer\n    });\n    return this;\n  };\n  _proto.update = function update() {\n    this.__ctrlContainer.innerHTML = '';\n    this._controlDom = this.buildOn(this.getMap());\n    if (this._controlDom) {\n      this._updatePosition();\n      this.__ctrlContainer.appendChild(this._controlDom);\n    }\n    return this;\n  };\n  _proto.getMap = function getMap() {\n    return this._map;\n  };\n  _proto.getPosition = function getPosition() {\n    return extend({}, this._parse(this.options['position']));\n  };\n  _proto.setPosition = function setPosition(position) {\n    if (isString(position)) {\n      this.options['position'] = position;\n    } else {\n      this.options['position'] = extend({}, position);\n    }\n    this._updatePosition();\n    return this;\n  };\n  _proto.getContainerPoint = function getContainerPoint() {\n    var position = this.getPosition();\n    var size = this.getMap().getSize();\n    var x, y;\n    if (!isNil(position['left'])) {\n      x = parseInt(position['left']);\n    } else if (!isNil(position['right'])) {\n      x = size['width'] - parseInt(position['right']);\n    }\n    if (!isNil(position['top'])) {\n      y = parseInt(position['top']);\n    } else if (!isNil(position['bottom'])) {\n      y = size['height'] - parseInt(position['bottom']);\n    }\n    return new Point(x, y);\n  };\n  _proto.getContainer = function getContainer() {\n    return this.__ctrlContainer;\n  };\n  _proto.getDOM = function getDOM() {\n    return this._controlDom;\n  };\n  _proto.show = function show() {\n    this.__ctrlContainer.style.display = '';\n    return this;\n  };\n  _proto.hide = function hide() {\n    this.__ctrlContainer.style.display = 'none';\n    return this;\n  };\n  _proto.isVisible = function isVisible() {\n    return this.__ctrlContainer && this.__ctrlContainer.style.display === '';\n  };\n  _proto.remove = function remove() {\n    if (!this._map) {\n      return this;\n    }\n    removeDomNode(this.__ctrlContainer);\n    if (this.onRemove) {\n      this.onRemove();\n    }\n    delete this._map;\n    delete this.__ctrlContainer;\n    delete this._controlDom;\n    this.fire('remove');\n    return this;\n  };\n  _proto._parse = function _parse(position) {\n    var p = position;\n    if (isString(position)) {\n      p = Control['positions'][p];\n    }\n    return p;\n  };\n  _proto._updatePosition = function _updatePosition() {\n    var position = this.getPosition();\n    if (!position) {\n      position = {\n        'top': 20,\n        'left': 20\n      };\n    }\n    for (var p in position) {\n      if (position.hasOwnProperty(p)) {\n        position[p] = parseInt(position[p]);\n        this.__ctrlContainer.style[p] = position[p] + 'px';\n      }\n    }\n    this.fire('positionchange', {\n      'position': extend({}, position)\n    });\n  };\n  return Control;\n}(Eventable(Class));\nControl.positions = {\n  'top-left': {\n    'top': 20,\n    'left': 20\n  },\n  'top-right': {\n    'top': 20,\n    'right': 20\n  },\n  'bottom-left': {\n    'bottom': 20,\n    'left': 20\n  },\n  'bottom-right': {\n    'bottom': 20,\n    'right': 20\n  }\n};\nMap$1.mergeOptions({\n  'control': true\n});\nMap$1.include({\n  addControl: function addControl(control) {\n    if (this._containerDOM.getContext) {\n      return this;\n    }\n    control.addTo(this);\n    return this;\n  },\n  removeControl: function removeControl(control) {\n    if (!control || control.getMap() !== this) {\n      return this;\n    }\n    control.remove();\n    return this;\n  }\n});\nvar options$n = {\n  'position': {\n    'bottom': 0,\n    'left': 0\n  },\n  'content': '<a href=\"http://maptalks.org\" target=\"_blank\">maptalks</a>'\n};\nvar layerEvents = 'addlayer removelayer setbaselayer baselayerremove';\nvar Attribution = function (_Control) {\n  _inheritsLoose(Attribution, _Control);\n  function Attribution() {\n    return _Control.apply(this, arguments) || this;\n  }\n  var _proto = Attribution.prototype;\n  _proto.buildOn = function buildOn() {\n    this._attributionContainer = createEl('div');\n    this._attributionContainer.className = 'maptalks-attribution';\n    this._update();\n    return this._attributionContainer;\n  };\n  _proto.onAdd = function onAdd() {\n    this.getMap().on(layerEvents, this._update, this);\n  };\n  _proto.onRemove = function onRemove() {\n    this.getMap().off(layerEvents, this._update, this);\n  };\n  _proto._update = function _update() {\n    var map = this.getMap();\n    if (!map) {\n      return;\n    }\n    var attributions = map._getLayers(function (layer) {\n      return layer.options['attribution'];\n    }).reverse().map(function (layer) {\n      return layer.options['attribution'];\n    });\n    var content = this.options['content'] + (attributions.length > 0 ? ' - ' + attributions.join(', ') : '');\n    this._attributionContainer.innerHTML = '<span style=\"padding:0px 4px\">' + content + '</span>';\n  };\n  return Attribution;\n}(Control);\nAttribution.mergeOptions(options$n);\nMap$1.mergeOptions({\n  'attribution': true\n});\nMap$1.addOnLoadHook(function () {\n  var a = this.options['attribution'] || this.options['attributionControl'];\n  if (a) {\n    this.attributionControl = new Attribution(a);\n    this.addControl(this.attributionControl);\n  }\n});\nvar options$o = {\n  position: {\n    'top': 120,\n    'left': 20\n  }\n};\nvar Compass = function (_Control) {\n  _inheritsLoose(Compass, _Control);\n  function Compass() {\n    return _Control.apply(this, arguments) || this;\n  }\n  var _proto = Compass.prototype;\n  _proto.buildOn = function buildOn(map) {\n    var compass = this._getCompass();\n    this._compass = compass;\n    this._registerDomEvents();\n    map.on('resize moving moveend zooming zoomend rotate rotateend dragrotating dragrotateend viewchange', this._rotateCompass, this);\n    return compass;\n  };\n  _proto.onAdd = function onAdd() {\n    this._rotateCompass();\n  };\n  _proto._getCompass = function _getCompass() {\n    var compass = createEl('div', 'maptalks-compass');\n    return compass;\n  };\n  _proto._registerDomEvents = function _registerDomEvents() {\n    on(this._compass, 'click', this._resetView, this);\n  };\n  _proto._rotateCompass = function _rotateCompass() {\n    var bearing = this.getMap().getBearing().toFixed(1);\n    if (bearing <= 180) bearing *= -1;\n    if (bearing !== this._bearing) {\n      this._bearing = bearing;\n      setStyle(this._compass, \"transform: rotate(\" + this._bearing + \"deg);\");\n    }\n  };\n  _proto.onRemove = function onRemove() {\n    this.getMap().off('resize moving moveend zooming zoomend rotate rotateend dragrotating dragrotateend viewchange', this._rotateCompass, this);\n    delete this._compass;\n    delete this._bearing;\n  };\n  _proto._resetView = function _resetView() {\n    var view = {\n      bearing: 0\n    };\n    this.getMap().animateTo(view);\n  };\n  return Compass;\n}(Control);\nCompass.mergeOptions(options$o);\nMap$1.mergeOptions({\n  'compassControl': false\n});\nMap$1.addOnLoadHook(function () {\n  if (this.options['compassControl']) {\n    this.compassControl = new Compass(this.options['compassControl']);\n    this.addControl(this.compassControl);\n  }\n});\nvar options$p = {\n  'position': 'top-right',\n  'baseTitle': 'Base Layers',\n  'overlayTitle': 'Layers',\n  'excludeLayers': [],\n  'containerClass': 'maptalks-layer-switcher'\n};\nvar LayerSwitcher = function (_Control) {\n  _inheritsLoose(LayerSwitcher, _Control);\n  function LayerSwitcher() {\n    return _Control.apply(this, arguments) || this;\n  }\n  var _proto = LayerSwitcher.prototype;\n  _proto.buildOn = function buildOn() {\n    var container = this.container = createEl('div', this.options['containerClass']),\n      panel = this.panel = createEl('div', 'panel'),\n      button = this.button = createEl('button');\n    container.appendChild(button);\n    container.appendChild(panel);\n    return container;\n  };\n  _proto.onAdd = function onAdd() {\n    on(this.button, 'mouseover', this._show, this);\n    on(this.panel, 'mouseleave', this._hide, this);\n    on(this.getMap(), 'click', this._hide, this);\n  };\n  _proto.onRemove = function onRemove() {\n    if (this.panel) {\n      off(this.button, 'mouseover', this._show, this);\n      off(this.panel, 'mouseleave', this._hide, this);\n      off(this.getMap(), 'click', this._hide, this);\n      removeDomNode(this.panel);\n      removeDomNode(this.button);\n      delete this.panel;\n      delete this.button;\n      delete this.container;\n    }\n  };\n  _proto._show = function _show() {\n    if (!hasClass(this.container, 'shown')) {\n      addClass(this.container, 'shown');\n      this._createPanel();\n    }\n  };\n  _proto._hide = function _hide(e) {\n    if (!this.panel.contains(e.toElement || e.relatedTarget)) {\n      setClass(this.container, this.options['containerClass']);\n    }\n  };\n  _proto._createPanel = function _createPanel() {\n    this.panel.innerHTML = '';\n    var ul = createEl('ul');\n    this.panel.appendChild(ul);\n    this._renderLayers(this.getMap(), ul);\n  };\n  _proto._renderLayers = function _renderLayers(map, elm) {\n    var _this = this;\n    var base = map.getBaseLayer(),\n      layers = map.getLayers(),\n      len = layers.length;\n    if (base) {\n      var baseLayers = base.layers || [base],\n        li = createEl('li', 'group'),\n        ul = createEl('ul'),\n        label = createEl('label');\n      label.innerHTML = this.options['baseTitle'];\n      li.appendChild(label);\n      for (var i = 0, _len = baseLayers.length; i < _len; i++) {\n        var layer = baseLayers[i];\n        if (this._isExcluded(layer)) {\n          ul.appendChild(this._renderLayer(baseLayers[i], true));\n          li.appendChild(ul);\n          elm.appendChild(li);\n        }\n      }\n    }\n    if (len) {\n      var _li = createEl('li', 'group'),\n        _ul = createEl('ul'),\n        _label = createEl('label'),\n        input = createEl('input');\n      input.type = 'checkbox';\n      input.checked = true;\n      _label.innerHTML = this.options['overlayTitle'];\n      _li.appendChild(input);\n      _li.appendChild(_label);\n      var groupInputOnChange = function groupInputOnChange(e) {\n        var checked = e.target.checked;\n        var parentNode = e.target.parentNode;\n        if (!parentNode) {\n          return;\n        }\n        var ul = parentNode.getElementsByTagName('ul')[0];\n        if (!ul) {\n          return;\n        }\n        var parentLayerShow = function parentLayerShow(node) {\n          var layer = node._layer;\n          if (layer) {\n            layer[checked ? 'show' : 'hide']();\n          }\n        };\n        var layerShow = function layerShow(li) {\n          var layer = li._layer,\n            checkbox = li.childNodes[0];\n          if (checkbox) {\n            checkbox.checked = checked;\n          }\n          if (layer) {\n            layer[checked ? 'show' : 'hide']();\n          }\n        };\n        parentLayerShow(parentNode);\n        ul.childNodes.forEach(function (li) {\n          layerShow(li);\n          var childUl = li.getElementsByTagName('ul')[0];\n          if (!childUl) {\n            return;\n          }\n          parentLayerShow(li);\n          childUl.childNodes.forEach(function (li) {\n            layerShow(li);\n          });\n        });\n      };\n      for (var _i = 0; _i < len; _i++) {\n        var _layer = layers[_i];\n        if (this._isExcluded(_layer)) {\n          if (_layer.getLayers) {\n            (function () {\n              var groupLi = createEl('li', 'group'),\n                groupUl = createEl('ul'),\n                groupLabel = createEl('label'),\n                groupInput = createEl('input');\n              groupLabel.innerHTML = _layer.getId();\n              groupInput.type = 'checkbox';\n              groupInput.checked = _layer.isVisible();\n              groupInput.onchange = groupInputOnChange;\n              groupLi.appendChild(groupInput);\n              groupLi.appendChild(groupLabel);\n              groupLi.appendChild(groupUl);\n              groupLi._layer = _layer;\n              _ul.appendChild(groupLi);\n              var groupLayers = _layer.getLayers() || [];\n              groupLayers.forEach(function (layer) {\n                groupUl.appendChild(_this._renderLayer(layer, false, groupInput.checked));\n              });\n            })();\n          } else {\n            _ul.appendChild(this._renderLayer(_layer));\n          }\n          if (_layer && !_layer.isVisible()) {\n            input.checked = false;\n          }\n        }\n      }\n      _li.appendChild(_ul);\n      elm.appendChild(_li);\n      input.onchange = groupInputOnChange;\n    }\n  };\n  _proto._isExcluded = function _isExcluded(layer) {\n    var id = layer.getId(),\n      excludeLayers = this.options['excludeLayers'];\n    return !(excludeLayers.length && excludeLayers.indexOf(id) >= 0);\n  };\n  _proto._renderLayer = function _renderLayer(layer, isBase, parentChecked) {\n    var _this2 = this;\n    if (parentChecked === void 0) {\n      parentChecked = true;\n    }\n    var li = createEl('li', 'layer'),\n      label = createEl('label'),\n      input = createEl('input'),\n      map = this.getMap();\n    var visible = layer.options['visible'];\n    layer.options['visible'] = true;\n    var enabled = layer.isVisible();\n    layer.options['visible'] = visible;\n    li.className = 'layer';\n    if (isBase) {\n      input.type = 'radio';\n      input.name = 'base';\n    } else {\n      input.type = 'checkbox';\n    }\n    input.checked = visible && enabled;\n    if (!parentChecked) {\n      input.checked = false;\n    }\n    if (!enabled) {\n      input.setAttribute('disabled', 'disabled');\n    }\n    input.onchange = function (e) {\n      if (e.target.type === 'radio') {\n        var baseLayer = map.getBaseLayer(),\n          baseLayers = baseLayer.layers;\n        if (baseLayers) {\n          for (var i = 0, len = baseLayers.length; i < len; i++) {\n            var _baseLayer = baseLayers[i];\n            _baseLayer[_baseLayer === layer ? 'show' : 'hide']();\n          }\n        } else if (!baseLayer.isVisible()) {\n          baseLayer.show();\n        }\n        map._fireEvent('setbaselayer');\n      } else {\n        layer[e.target.checked ? 'show' : 'hide']();\n      }\n      _this2.fire('layerchange', {\n        target: layer\n      });\n    };\n    li.appendChild(input);\n    label.innerHTML = layer.getId();\n    li.appendChild(label);\n    li._layer = layer;\n    return li;\n  };\n  return LayerSwitcher;\n}(Control);\nLayerSwitcher.mergeOptions(options$p);\nMap$1.mergeOptions({\n  'layerSwitcherControl': false\n});\nMap$1.addOnLoadHook(function () {\n  if (this.options['layerSwitcherControl']) {\n    this.layerSwitcherControl = new LayerSwitcher(this.options['layerSwitcherControl']);\n    this.addControl(this.layerSwitcherControl);\n  }\n});\nvar options$q = {\n  'level': 4,\n  'position': {\n    'right': 1,\n    'bottom': 1\n  },\n  'size': [300, 200],\n  'maximize': true,\n  'symbol': {\n    'lineWidth': 3,\n    'lineColor': '#1bbc9b',\n    'polygonFill': '#1bbc9b',\n    'polygonOpacity': 0.4\n  },\n  'containerClass': 'maptalks-overview',\n  'buttonClass': 'maptalks-overview-button'\n};\nvar Overview = function (_Control) {\n  _inheritsLoose(Overview, _Control);\n  function Overview() {\n    return _Control.apply(this, arguments) || this;\n  }\n  var _proto = Overview.prototype;\n  _proto.buildOn = function buildOn() {\n    var size = this.options['size'];\n    if (!this.options['maximize']) {\n      size = [0, 0];\n    }\n    var container = createEl('div');\n    var mapContainer = this.mapContainer = createEl('div');\n    mapContainer.style.width = size[0] + 'px';\n    mapContainer.style.height = size[1] + 'px';\n    mapContainer.className = this.options['containerClass'];\n    var button = this.button = createEl('div');\n    button.className = this.options['buttonClass'];\n    container.appendChild(mapContainer);\n    container.appendChild(button);\n    return container;\n  };\n  _proto.onAdd = function onAdd() {\n    if (this.options['maximize']) {\n      this._createOverview();\n    }\n    this.getMap().on('resize moving zooming rotate dragrotating viewchange', this._update, this).on('setbaselayer', this._updateBaseLayer, this).on('spatialreferencechange', this._updateSpatialReference, this);\n    on(this.button, 'click', this._onButtonClick, this);\n    this._updateButtonText();\n  };\n  _proto.onRemove = function onRemove() {\n    this.getMap().off('resize moving zooming rotate dragrotating viewchange', this._update, this).off('setbaselayer', this._updateBaseLayer, this).off('spatialreferencechange', this._updateSpatialReference, this);\n    if (this._overview) {\n      this._overview.remove();\n      delete this._overview;\n      delete this._perspective;\n    }\n    off(this.button, 'click', this._onButtonClick, this);\n  };\n  _proto.maxmize = function maxmize() {\n    var size = this.options['size'];\n    var dom = this.mapContainer;\n    dom.style.width = size[0] + 'px';\n    dom.style.height = size[1] + 'px';\n    this._createOverview();\n    return this;\n  };\n  _proto.minimize = function minimize() {\n    if (this._overview) {\n      this._overview.remove();\n    }\n    delete this._overview;\n    delete this._perspective;\n    var dom = this.mapContainer;\n    dom.style.width = 0 + 'px';\n    dom.style.height = 0 + 'px';\n    return this;\n  };\n  _proto.getOverviewMap = function getOverviewMap() {\n    return this._overview;\n  };\n  _proto._onButtonClick = function _onButtonClick() {\n    if (!this._overview) {\n      this.maxmize();\n    } else {\n      this.minimize();\n    }\n    this._updateButtonText();\n  };\n  _proto._updateButtonText = function _updateButtonText() {\n    if (this._overview) {\n      this.button.innerHTML = '-';\n    } else {\n      this.button.innerHTML = '+';\n    }\n  };\n  _proto._createOverview = function _createOverview() {\n    var map = this.getMap(),\n      dom = this.mapContainer;\n    var options = map.config();\n    extend(options, {\n      'center': map.getCenter(),\n      'zoom': this._getOverviewZoom(),\n      'zoomAnimationDuration': 150,\n      'pitch': 0,\n      'bearing': 0,\n      'scrollWheelZoom': false,\n      'checkSize': false,\n      'doubleClickZoom': false,\n      'touchZoom': false,\n      'control': false,\n      'draggable': false,\n      'maxExtent': null\n    });\n    this._overview = new Map$1(dom, options);\n    this._updateBaseLayer();\n    this._perspective = new Polygon(this._getPerspectiveCoords(), {\n      'draggable': true,\n      'cursor': 'move',\n      'symbol': this.options['symbol']\n    }).on('dragend', this._onDragEnd, this);\n    new VectorLayer('perspective_layer', this._perspective).addTo(this._overview);\n    this.fire('load');\n  };\n  _proto._getOverviewZoom = function _getOverviewZoom() {\n    var map = this.getMap(),\n      zoom = map.getZoom(),\n      minZoom = map.getMinZoom(),\n      level = this.options['level'];\n    if (level > 0) {\n      for (var i = level; i > 0; i--) {\n        if (zoom - i >= minZoom) {\n          return zoom - i;\n        }\n      }\n    } else {\n      for (var _i = level; _i < 0; _i++) {\n        if (zoom - _i >= minZoom) {\n          return zoom - _i;\n        }\n      }\n    }\n    return zoom;\n  };\n  _proto._onDragEnd = function _onDragEnd() {\n    var center = this._perspective.getCenter();\n    this._overview.setCenter(center);\n    this.getMap().panTo(center);\n  };\n  _proto._getPerspectiveCoords = function _getPerspectiveCoords() {\n    var map = this.getMap();\n    var projection = map.getProjection();\n    return map.getContainerExtent().toArray().map(function (c) {\n      if (projection) {\n        var prjCoord = map._containerPointToPrj(c);\n        map._fixPrjOnWorldWide(prjCoord);\n        return projection.unproject(prjCoord);\n      }\n      return map.containerPointToCoordinate(c);\n    });\n  };\n  _proto._update = function _update() {\n    if (!this._overview) {\n      return;\n    }\n    computeDomPosition(this._overview._containerDOM);\n    var coords = this._getPerspectiveCoords();\n    this._perspective.setCoordinates(coords);\n    this._overview.setCenterAndZoom(this.getMap().getCenter(), this._getOverviewZoom());\n  };\n  _proto._updateSpatialReference = function _updateSpatialReference() {\n    if (!this._overview) {\n      return;\n    }\n    var map = this.getMap();\n    var spatialRef = map.options['spatialReference'];\n    this._overview.setSpatialReference(spatialRef);\n  };\n  _proto._updateBaseLayer = function _updateBaseLayer() {\n    if (!this._overview) {\n      return;\n    }\n    var map = this.getMap(),\n      baseLayer = map.getBaseLayer();\n    if (!baseLayer) {\n      this._overview.setBaseLayer(null);\n      return;\n    }\n    var layers = baseLayer.layers;\n    var showIndex = 0;\n    if (layers) {\n      for (var i = 0, l = layers.length; i < l; i++) {\n        var _layer = layers[i];\n        if (_layer.isVisible()) {\n          showIndex = i;\n          break;\n        }\n      }\n    }\n    var json = baseLayer.toJSON();\n    var options = null;\n    if (layers) {\n      options = json.layers[showIndex].options;\n      options.visible = true;\n    } else {\n      options = json.options;\n    }\n    this._overview.setMinZoom(options.minZoom || null).setMaxZoom(options.maxZoom || null);\n    delete options.minZoom;\n    delete options.maxZoom;\n    delete json.options.canvas;\n    json.options.visible = true;\n    json.options.renderer = 'canvas';\n    var layer = Layer.fromJSON(json);\n    for (var p in baseLayer) {\n      if (isFunction(baseLayer[p]) && baseLayer.hasOwnProperty(p) && baseLayer[p] !== baseLayer.constructor.prototype[p]) {\n        layer[p] = baseLayer[p];\n      }\n    }\n    this._overview.setBaseLayer(layer);\n  };\n  return Overview;\n}(Control);\nOverview.mergeOptions(options$q);\nMap$1.mergeOptions({\n  'overviewControl': false\n});\nMap$1.addOnLoadHook(function () {\n  if (this.options['overviewControl']) {\n    this.overviewControl = new Overview(this.options['overviewControl']);\n    this.addControl(this.overviewControl);\n  }\n});\nvar options$r = {\n  'position': 'top-right',\n  'draggable': true,\n  'custom': false,\n  'content': '',\n  'closeButton': true\n};\nvar Panel = function (_Control) {\n  _inheritsLoose(Panel, _Control);\n  function Panel() {\n    return _Control.apply(this, arguments) || this;\n  }\n  var _proto = Panel.prototype;\n  _proto.buildOn = function buildOn() {\n    var dom;\n    if (this.options['custom']) {\n      if (isString(this.options['content'])) {\n        dom = createEl('div');\n        dom.innerHTML = this.options['content'];\n      } else {\n        dom = this.options['content'];\n      }\n    } else {\n      dom = createEl('div', 'maptalks-panel');\n      if (this.options['closeButton']) {\n        var closeButton = createEl('a', 'maptalks-close');\n        closeButton.innerText = '×';\n        closeButton.href = 'javascript:;';\n        closeButton.onclick = function () {\n          dom.style.display = 'none';\n        };\n        dom.appendChild(closeButton);\n      }\n      var panelContent = createEl('div', 'maptalks-panel-content');\n      panelContent.innerHTML = this.options['content'];\n      dom.appendChild(panelContent);\n    }\n    this.draggable = new DragHandler(dom, {\n      'cancelOn': this._cancelOn.bind(this),\n      'ignoreMouseleave': true\n    });\n    this.draggable.on('dragstart', this._onDragStart, this).on('dragging', this._onDragging, this).on('dragend', this._onDragEnd, this);\n    if (this.options['draggable']) {\n      this.draggable.enable();\n    }\n    return dom;\n  };\n  _proto.update = function update() {\n    if (this.draggable) {\n      this.draggable.disable();\n      delete this.draggable;\n    }\n    return Control.prototype.update.call(this);\n  };\n  _proto.setContent = function setContent(content) {\n    var old = this.options['content'];\n    this.options['content'] = content;\n    this.fire('contentchange', {\n      'old': old,\n      'new': content\n    });\n    if (this.isVisible()) {\n      this.update();\n    }\n    return this;\n  };\n  _proto.getContent = function getContent() {\n    return this.options['content'];\n  };\n  _proto._cancelOn = function _cancelOn(domEvent) {\n    var target = domEvent.srcElement || domEvent.target,\n      tagName = target.tagName.toLowerCase();\n    if (tagName === 'button' || tagName === 'input' || tagName === 'select' || tagName === 'option' || tagName === 'textarea') {\n      return true;\n    }\n    return false;\n  };\n  _proto._onDragStart = function _onDragStart(param) {\n    this._startPos = param['mousePos'];\n    this._startPosition = extend({}, this.getPosition());\n    this.fire('dragstart', param);\n  };\n  _proto._onDragging = function _onDragging(param) {\n    var pos = param['mousePos'];\n    var offset = pos.sub(this._startPos);\n    var startPosition = this._startPosition;\n    var position = this.getPosition();\n    if (!isNil(position['top'])) {\n      position['top'] = parseInt(startPosition['top']) + offset.y;\n    }\n    if (!isNil(position['bottom'])) {\n      position['bottom'] = parseInt(startPosition['bottom']) - offset.y;\n    }\n    if (!isNil(position['left'])) {\n      position['left'] = parseInt(startPosition['left']) + offset.x;\n    }\n    if (!isNil(position['right'])) {\n      position['right'] = parseInt(startPosition['right']) - offset.x;\n    }\n    this.setPosition(position);\n    this.fire('dragging', param);\n  };\n  _proto._onDragEnd = function _onDragEnd(param) {\n    delete this._startPos;\n    delete this._startPosition;\n    this.fire('dragend', param);\n  };\n  _proto._getConnectPoints = function _getConnectPoints() {\n    var map = this.getMap();\n    var containerPoint = this.getContainerPoint();\n    var dom = this.getDOM(),\n      width = parseInt(dom.clientWidth),\n      height = parseInt(dom.clientHeight);\n    var anchors = [map.containerPointToCoordinate(containerPoint.add(width / 2, 0)), map.containerPointToCoordinate(containerPoint.add(width, height / 2)), map.containerPointToCoordinate(containerPoint.add(width / 2, height)), map.containerPointToCoordinate(containerPoint.add(0, height / 2))];\n    return anchors;\n  };\n  return Panel;\n}(Control);\nPanel.mergeOptions(options$r);\nvar options$s = {\n  position: {\n    'top': 156,\n    'left': 20\n  },\n  view: null\n};\nvar Reset = function (_Control) {\n  _inheritsLoose(Reset, _Control);\n  function Reset() {\n    return _Control.apply(this, arguments) || this;\n  }\n  var _proto = Reset.prototype;\n  _proto.buildOn = function buildOn() {\n    var reset = this._getReset();\n    this._reset = reset;\n    this._registerDomEvents();\n    return reset;\n  };\n  _proto.onAdd = function onAdd() {\n    this._view = !this.options.view ? this.getMap().getView() : this.options.view;\n  };\n  _proto.setView = function setView(view) {\n    this._view = view;\n  };\n  _proto._getReset = function _getReset() {\n    var reset = createEl('div', 'maptalks-reset');\n    return reset;\n  };\n  _proto._registerDomEvents = function _registerDomEvents() {\n    on(this._reset, 'click', this._resetView, this);\n  };\n  _proto.onRemove = function onRemove() {\n    delete this._reset;\n    delete this._view;\n  };\n  _proto._resetView = function _resetView() {\n    this.getMap().setView(this._view);\n  };\n  return Reset;\n}(Control);\nReset.mergeOptions(options$s);\nMap$1.mergeOptions({\n  'resetControl': false\n});\nMap$1.addOnLoadHook(function () {\n  if (this.options['resetControl']) {\n    this.resetControl = new Reset(this.options['resetControl']);\n    this.addControl(this.resetControl);\n  }\n});\nvar options$t = {\n  'position': 'bottom-left',\n  'maxWidth': 100,\n  'metric': true,\n  'imperial': false,\n  'containerClass': null\n};\nvar EVENTS_TO_LISTEN = 'zoomend moving moveend';\nvar Scale = function (_Control) {\n  _inheritsLoose(Scale, _Control);\n  function Scale() {\n    return _Control.apply(this, arguments) || this;\n  }\n  var _proto = Scale.prototype;\n  _proto.buildOn = function buildOn(map) {\n    this._map = map;\n    this._scaleContainer = createEl('div', this.options['containerClass']);\n    this._addScales();\n    map.on(EVENTS_TO_LISTEN, this._update, this);\n    if (this._map._loaded) {\n      this._update();\n    }\n    return this._scaleContainer;\n  };\n  _proto.onRemove = function onRemove() {\n    this.getMap().off(EVENTS_TO_LISTEN, this._update, this);\n  };\n  _proto._addScales = function _addScales() {\n    var css = 'border: 2px solid #000000;border-top: none;line-height: 1.1;padding: 0px;' + 'color: #000000;font-size: 11px;text-align:center;white-space: nowrap;overflow: hidden' + ';-moz-box-sizing: content-box;box-sizing: content-box;background: #fff; background: rgba(255, 255, 255, 0);';\n    if (this.options['metric']) {\n      this._mScale = createElOn('div', this.options['containerClass'] ? null : css, this._scaleContainer);\n    }\n    if (this.options['imperial']) {\n      this._iScale = createElOn('div', this.options['containerClass'] ? null : css, this._scaleContainer);\n    }\n  };\n  _proto._update = function _update() {\n    var map = this._map;\n    var maxMeters = map.pixelToDistance(this.options['maxWidth'], 0);\n    this._updateScales(maxMeters);\n  };\n  _proto._updateScales = function _updateScales(maxMeters) {\n    if (this.options['metric'] && maxMeters) {\n      this._updateMetric(maxMeters);\n    }\n    if (this.options['imperial'] && maxMeters) {\n      this._updateImperial(maxMeters);\n    }\n  };\n  _proto._updateMetric = function _updateMetric(maxMeters) {\n    var meters = this._getRoundNum(maxMeters),\n      label = meters < 1000 ? meters + ' m' : meters / 1000 + ' km';\n    this._updateScale(this._mScale, label, meters / maxMeters);\n  };\n  _proto._updateImperial = function _updateImperial(maxMeters) {\n    var maxFeet = maxMeters * 3.2808399;\n    var maxMiles, miles, feet;\n    if (maxFeet > 5280) {\n      maxMiles = maxFeet / 5280;\n      miles = this._getRoundNum(maxMiles);\n      this._updateScale(this._iScale, miles + ' mile', miles / maxMiles);\n    } else {\n      feet = this._getRoundNum(maxFeet);\n      this._updateScale(this._iScale, feet + ' feet', feet / maxFeet);\n    }\n  };\n  _proto._updateScale = function _updateScale(scale, text, ratio) {\n    scale['style']['width'] = Math.round(this.options['maxWidth'] * ratio) + 'px';\n    scale['innerHTML'] = text;\n  };\n  _proto._getRoundNum = function _getRoundNum(num) {\n    var pow10 = Math.pow(10, (Math.floor(num) + '').length - 1);\n    var d = num / pow10;\n    d = d >= 10 ? 10 : d >= 5 ? 5 : d >= 3 ? 3 : d >= 2 ? 2 : 1;\n    return pow10 * d;\n  };\n  return Scale;\n}(Control);\nScale.mergeOptions(options$t);\nMap$1.mergeOptions({\n  'scaleControl': false\n});\nMap$1.addOnLoadHook(function () {\n  if (this.options['scaleControl']) {\n    this.scaleControl = new Scale(this.options['scaleControl']);\n    this.addControl(this.scaleControl);\n  }\n});\nvar options$u = {\n  'height': 28,\n  'vertical': false,\n  'position': 'top-right',\n  'reverseMenu': false,\n  'items': {}\n};\nvar Toolbar = function (_Control) {\n  _inheritsLoose(Toolbar, _Control);\n  function Toolbar() {\n    return _Control.apply(this, arguments) || this;\n  }\n  var _proto = Toolbar.prototype;\n  _proto.buildOn = function buildOn(map) {\n    this._map = map;\n    var dom = createEl('div');\n    var ul = createEl('ul', 'maptalks-toolbar-hx');\n    dom.appendChild(ul);\n    if (this.options['vertical']) {\n      addClass(dom, 'maptalks-toolbar-vertical');\n    } else {\n      addClass(dom, 'maptalks-toolbar-horizonal');\n    }\n    var me = this;\n    function onButtonClick(fn, index, childIndex, targetDom) {\n      var item = me._getItems()[index];\n      return function (e) {\n        stopPropagation(e);\n        return fn({\n          'target': item,\n          'index': index,\n          'childIndex': childIndex,\n          'dom': targetDom\n        });\n      };\n    }\n    var items = this.options['items'];\n    if (isArrayHasData(items)) {\n      for (var i = 0, len = items.length; i < len; i++) {\n        var item = items[i];\n        var li = createEl('li');\n        if (this.options['height'] !== 28) {\n          li.style.lineHeight = this.options['height'] + 'px';\n        }\n        li.style.height = this.options['height'] + 'px';\n        li.style.cursor = 'pointer';\n        if (isHTML(item['item'])) {\n          li.style.textAlign = 'center';\n          var itemSize = measureDom('div', item['item']);\n          li.innerHTML = '<div style=\"margin-top:' + (this.options['height'] - itemSize['height']) / 2 + 'px;\">' + item['item'] + '</div>';\n        } else {\n          li.innerHTML = item['item'];\n        }\n        if (item['click']) {\n          on(li, 'click', onButtonClick(item['click'], i, null, li));\n        }\n        if (isArrayHasData(item['children'])) {\n          var dropMenu = this._createDropMenu(i);\n          li.appendChild(dropMenu);\n          li._menu = dropMenu;\n          on(li, 'mouseover', function () {\n            this._menu.style.display = '';\n          });\n          on(li, 'mouseout', function () {\n            this._menu.style.display = 'none';\n          });\n        }\n        ul.appendChild(li);\n      }\n    }\n    return dom;\n  };\n  _proto._createDropMenu = function _createDropMenu(index) {\n    var me = this;\n    function onButtonClick(fn, index, childIndex) {\n      var item = me._getItems()[index]['children'][childIndex];\n      return function (e) {\n        stopPropagation(e);\n        return fn({\n          'target': item,\n          'index': index,\n          'childIndex': childIndex\n        });\n      };\n    }\n    var menuDom = createEl('div', 'maptalks-dropMenu'),\n      items = this._getItems(),\n      len = items.length,\n      menuUL = createEl('ul'),\n      children = items[index]['children'];\n    if (index === len - 1 && children) {\n      menuDom.style.cssText = 'right: 0px;';\n      menuUL.style.cssText = 'right: 0px;position: absolute;';\n      if (this.options['reverseMenu']) {\n        menuUL.style.bottom = 0;\n      }\n    }\n    menuDom.appendChild(createEl('em', 'maptalks-ico'));\n    var liWidth = 0;\n    for (var i = 0, l = children.length; i < l; i++) {\n      var size = stringLength(children[i]['item'], '12px');\n      if (size.width > liWidth) {\n        liWidth = size.width;\n      }\n    }\n    for (var _i = 0, _l = children.length; _i < _l; _i++) {\n      var child = children[_i];\n      var li = createEl('li');\n      li.innerHTML = '<a href=\"javascript:;\">' + child['item'] + '</a>';\n      li.style.cursor = 'pointer';\n      li.style.width = liWidth + 24 + 'px';\n      on(li.childNodes[0], 'click', onButtonClick(child['click'], index, _i));\n      menuUL.appendChild(li);\n    }\n    if (this.options['vertical']) {\n      var width = liWidth < 95 ? 95 : liWidth;\n      if (this.options['reverseMenu']) {\n        menuDom.style.right = -(width + 10 * 2 + 2) + 'px';\n      } else {\n        menuDom.style.left = -(width + 10 * 2 + 2) + 'px';\n      }\n    } else if (this.options['reverseMenu']) {\n      menuDom.style.bottom = '28px';\n    } else {\n      menuDom.style.top = '29px';\n    }\n    menuDom.appendChild(menuUL);\n    menuDom.style.display = 'none';\n    return menuDom;\n  };\n  _proto._getItems = function _getItems() {\n    return this.options['items'] || [];\n  };\n  return Toolbar;\n}(Control);\nToolbar.mergeOptions(options$u);\nvar options$v = {\n  'position': 'top-left',\n  'zoomLevel': true,\n  'seamless': false\n};\nvar Zoom = function (_Control) {\n  _inheritsLoose(Zoom, _Control);\n  function Zoom() {\n    return _Control.apply(this, arguments) || this;\n  }\n  var _proto = Zoom.prototype;\n  _proto.buildOn = function buildOn(map) {\n    var options = this.options;\n    var dom = createEl('div', 'maptalks-zoom');\n    if (options['zoomLevel']) {\n      var levelWrapper = createEl('span', 'maptalks-zoom-zoomlevel');\n      var levelDOM = createEl('span', 'maptalks-zoom-zoomlevel-text');\n      levelWrapper.appendChild(levelDOM);\n      dom.appendChild(levelWrapper);\n      this._levelDOM = levelDOM;\n    }\n    var zoomDOM = createEl('div', 'maptalks-zoom-slider');\n    var zoomInButton = createEl('a', 'maptalks-zoom-zoomin');\n    zoomInButton.href = 'javascript:;';\n    zoomDOM.appendChild(zoomInButton);\n    this._zoomInButton = zoomInButton;\n    var zoomOutButton = createEl('a', 'maptalks-zoom-zoomout');\n    zoomOutButton.href = 'javascript:;';\n    zoomDOM.appendChild(zoomOutButton);\n    this._zoomOutButton = zoomOutButton;\n    dom.appendChild(zoomDOM);\n    map.on('_zoomend _zooming _zoomstart _spatialreferencechange', this._update, this);\n    this._update();\n    this._registerDomEvents();\n    return dom;\n  };\n  _proto.onRemove = function onRemove() {\n    this.getMap().off('_zoomend _zooming _zoomstart _spatialreferencechange', this._update, this);\n  };\n  _proto._update = function _update() {\n    this._updateText();\n  };\n  _proto._updateText = function _updateText() {\n    if (this._levelDOM) {\n      var map = this.getMap();\n      var zoom = map.getZoom();\n      if (!isInteger(zoom)) {\n        zoom = Math.floor(zoom * 10) / 10;\n      }\n      this._levelDOM.innerHTML = zoom;\n    }\n  };\n  _proto._registerDomEvents = function _registerDomEvents() {\n    if (this._zoomInButton) {\n      on(this._zoomInButton, 'click', this._onZoomInClick, this);\n    }\n    if (this._zoomOutButton) {\n      on(this._zoomOutButton, 'click', this._onZoomOutClick, this);\n    }\n  };\n  _proto._onZoomInClick = function _onZoomInClick(e) {\n    preventDefault(e);\n    this.getMap().zoomIn();\n  };\n  _proto._onZoomOutClick = function _onZoomOutClick(e) {\n    preventDefault(e);\n    this.getMap().zoomOut();\n  };\n  return Zoom;\n}(Control);\nZoom.mergeOptions(options$v);\nMap$1.mergeOptions({\n  'zoomControl': false\n});\nMap$1.addOnLoadHook(function () {\n  if (this.options['zoomControl']) {\n    this.zoomControl = new Zoom(this.options['zoomControl']);\n    this.addControl(this.zoomControl);\n  }\n});\nvar index$5 = /*#__PURE__*/Object.freeze({\n  Control: Control,\n  Attribution: Attribution,\n  Compass: Compass,\n  LayerSwitcher: LayerSwitcher,\n  Overview: Overview,\n  Panel: Panel,\n  Reset: Reset,\n  Scale: Scale,\n  Toolbar: Toolbar,\n  Zoom: Zoom\n});\nvar TileSystem = function () {\n  function TileSystem(sx, sy, ox, oy) {\n    if (Array.isArray(sx)) {\n      this.scale = {\n        x: sx[0],\n        y: sx[1]\n      };\n      this.origin = {\n        x: sx[2],\n        y: sx[3]\n      };\n    } else {\n      this.scale = {\n        x: sx,\n        y: sy\n      };\n      this.origin = {\n        x: ox,\n        y: oy\n      };\n    }\n  }\n  TileSystem.getDefault = function getDefault(projection) {\n    var code = projection['code'].toLowerCase();\n    if (code === 'baidu') {\n      return 'baidu';\n    } else if (code === 'EPSG:4326'.toLowerCase() || code === 'EPSG:4490'.toLowerCase()) {\n      return 'tms-global-geodetic';\n    } else if (code === 'identity') {\n      return [1, -1, 0, 0];\n    } else {\n      return 'web-mercator';\n    }\n  };\n  return TileSystem;\n}();\nvar semiCircum = 6378137 * Math.PI;\nextend(TileSystem, {\n  'web-mercator': new TileSystem([1, -1, -semiCircum, semiCircum]),\n  'tms-global-mercator': new TileSystem([1, 1, -semiCircum, -semiCircum]),\n  'tms-global-geodetic': new TileSystem([1, 1, -180, -90]),\n  'baidu': new TileSystem([1, 1, 0, 0])\n});\nvar TileConfig = function () {\n  function TileConfig(map, tileSystem, fullExtent, tileSize) {\n    this.map = map;\n    this.tileSize = tileSize;\n    this.fullExtent = fullExtent;\n    this.prepareTileInfo(tileSystem, fullExtent);\n    this._xScale = fullExtent['right'] >= fullExtent['left'] ? 1 : -1;\n    this._yScale = fullExtent['top'] >= fullExtent['bottom'] ? 1 : -1;\n    var glRes = map.getGLRes();\n    this._pointOrigin = map._prjToPointAtRes(new Point(this.tileSystem['origin']), glRes);\n    this._glRes = glRes;\n  }\n  var _proto = TileConfig.prototype;\n  _proto.prepareTileInfo = function prepareTileInfo(tileSystem, fullExtent) {\n    if (isString(tileSystem)) {\n      tileSystem = TileSystem[tileSystem.toLowerCase()];\n    } else if (Array.isArray(tileSystem)) {\n      tileSystem = new TileSystem(tileSystem);\n    }\n    if (!tileSystem) {\n      throw new Error('Invalid TileSystem');\n    }\n    this.tileSystem = tileSystem;\n    var a = fullExtent['right'] > fullExtent['left'] ? 1 : -1,\n      b = fullExtent['top'] > fullExtent['bottom'] ? -1 : 1,\n      c = tileSystem['origin']['x'],\n      d = tileSystem['origin']['y'];\n    this.transformation = new Transformation([a, b, c, d]);\n  };\n  _proto._getTileNum = function _getTileNum(point, res) {\n    var tileSystem = this.tileSystem,\n      tileSize = this['tileSize'],\n      delta = 1E-7;\n    var tileX = Math.floor(delta * tileSystem['scale']['x'] + point.x / (tileSize['width'] * res));\n    var tileY = Math.ceil(delta * tileSystem['scale']['y'] + point.y / (tileSize['height'] * res));\n    return {\n      'x': tileSystem['scale']['x'] * tileX,\n      'y': tileSystem['scale']['y'] * tileY\n    };\n  };\n  _proto.getTileIndex = function getTileIndex(pCoord, res, repeatWorld) {\n    var tileSystem = this.tileSystem;\n    var point = this.transformation.transform(pCoord, 1);\n    var tileIndex = this._getTileNum(point, res);\n    if (tileSystem['scale']['x'] < 0) {\n      tileIndex['x'] -= 1;\n    }\n    if (tileSystem['scale']['y'] > 0) {\n      tileIndex['y'] -= 1;\n    }\n    return this.getNeighorTileIndex(tileIndex['x'], tileIndex['y'], 0, 0, res, repeatWorld);\n  };\n  _proto.getNeighorTileIndex = function getNeighorTileIndex(tileX, tileY, offsetX, offsetY, res, repeatWorld) {\n    var tileSystem = this.tileSystem;\n    var x = tileX + tileSystem['scale']['x'] * offsetX;\n    var y = tileY - tileSystem['scale']['y'] * offsetY;\n    var out = false;\n    var idx = x;\n    var idy = y;\n    var ext = this._getTileFullIndex(res);\n    if (repeatWorld) {\n      if (repeatWorld === true || repeatWorld === 'x') {\n        if (ext['xmax'] === ext['xmin']) {\n          x = ext['xmin'];\n        } else if (x < ext['xmin']) {\n          x = ext['xmax'] - (ext['xmin'] - x) % (ext['xmax'] - ext['xmin']);\n          if (x === ext['xmax']) {\n            x = ext['xmin'];\n          }\n        } else if (x >= ext['xmax']) {\n          x = ext['xmin'] + (x - ext['xmin']) % (ext['xmax'] - ext['xmin']);\n        }\n      }\n      if (repeatWorld === true || repeatWorld === 'y') {\n        if (ext['ymax'] === ext['ymin']) {\n          y = ext['ymin'];\n        } else if (y >= ext['ymax']) {\n          y = ext['ymin'] + (y - ext['ymin']) % (ext['ymax'] - ext['ymin']);\n        } else if (y < ext['ymin']) {\n          y = ext['ymax'] - (ext['ymin'] - y) % (ext['ymax'] - ext['ymin']);\n          if (y === ext['ymax']) {\n            y = ext['ymin'];\n          }\n        }\n      }\n    }\n    if (x < ext['xmin'] || x > ext['xmax'] || y > ext['ymax'] || y < ext['ymin']) {\n      out = true;\n    }\n    return {\n      'x': x,\n      'y': y,\n      'idx': idx,\n      'idy': idy,\n      out: out\n    };\n  };\n  _proto._getTileFullIndex = function _getTileFullIndex(res) {\n    if (!this._tileFullIndex) {\n      this._tileFullIndex = {};\n    }\n    if (this._tileFullIndex[res]) {\n      return this._tileFullIndex[res];\n    }\n    var ext = this.fullExtent;\n    var transformation = this.transformation;\n    var nwIndex = this._getTileNum(transformation.transform(new Coordinate(ext['left'], ext['top']), 1), res);\n    var seIndex = this._getTileNum(transformation.transform(new Coordinate(ext['right'], ext['bottom']), 1), res);\n    var tileSystem = this.tileSystem;\n    if (tileSystem['scale']['x'] < 0) {\n      nwIndex.x -= 1;\n      seIndex.x -= 1;\n    }\n    if (tileSystem['scale']['y'] > 0) {\n      nwIndex.y -= 1;\n      seIndex.y -= 1;\n    }\n    this._tileFullIndex[res] = new Extent(nwIndex, seIndex);\n    return this._tileFullIndex[res];\n  };\n  _proto.getTilePrjNW = function getTilePrjNW(tileX, tileY, res, out) {\n    var tileSystem = this.tileSystem;\n    var tileSize = this['tileSize'];\n    var y = tileSystem['origin']['y'] + this._yScale * tileSystem['scale']['y'] * (tileY + (tileSystem['scale']['y'] === 1 ? 1 : 0)) * res * tileSize['height'];\n    var x = tileSystem['origin']['x'] + this._xScale * tileSystem['scale']['x'] * (tileX + (tileSystem['scale']['x'] === 1 ? 0 : 1)) * res * tileSize['width'];\n    if (out) {\n      out.set(x, y);\n      return out;\n    }\n    return new Coordinate(x, y);\n  };\n  _proto.getTilePointNW = function getTilePointNW(tileX, tileY, res, out) {\n    var scale = this._glRes / res;\n    var tileSystem = this.tileSystem;\n    var tileSize = this['tileSize'];\n    var y = this._pointOrigin.y * scale + this._yScale * tileSystem['scale']['y'] * (tileY + (tileSystem['scale']['y'] === 1 ? 1 : 0)) * tileSize['height'];\n    var x = this._pointOrigin.x * scale + this._xScale * tileSystem['scale']['x'] * (tileX + (tileSystem['scale']['x'] === 1 ? 0 : 1)) * tileSize['width'];\n    if (out) {\n      out.set(x, y);\n      return out;\n    }\n    return new Point(x, y);\n  };\n  _proto.getTilePrjSE = function getTilePrjSE(tileX, tileY, res, out) {\n    var tileSystem = this.tileSystem;\n    var tileSize = this['tileSize'];\n    var y = tileSystem['origin']['y'] + this._yScale * tileSystem['scale']['y'] * (tileY + (tileSystem['scale']['y'] === 1 ? 0 : 1)) * res * tileSize['height'];\n    var x = tileSystem['origin']['x'] + this._xScale * tileSystem['scale']['x'] * (tileX + (tileSystem['scale']['x'] === 1 ? 1 : 0)) * res * tileSize['width'];\n    if (out) {\n      out.set(x, y);\n      return out;\n    }\n    return new Coordinate(x, y);\n  };\n  _proto.getTilePointSE = function getTilePointSE(tileX, tileY, res, out) {\n    var scale = this._glRes / res;\n    var tileSystem = this.tileSystem;\n    var tileSize = this['tileSize'];\n    var y = this._pointOrigin.y * scale + this._yScale * tileSystem['scale']['y'] * (tileY + (tileSystem['scale']['y'] === 1 ? 0 : 1)) * tileSize['height'];\n    var x = this._pointOrigin.x * scale + this._xScale * tileSystem['scale']['x'] * (tileX + (tileSystem['scale']['x'] === 1 ? 1 : 0)) * tileSize['width'];\n    if (out) {\n      out.set(x, y);\n      return out;\n    }\n    return new Point(x, y);\n  };\n  _proto.getTilePrjExtent = function getTilePrjExtent(tileX, tileY, res) {\n    var nw = this.getTilePrjNW(tileX, tileY, res),\n      se = this.getTilePrjSE(tileX, tileY, res);\n    return new Extent(nw, se);\n  };\n  return TileConfig;\n}();\nvar DEFAULT_MAXERROR = 1;\nvar TEMP_POINT$2 = new Point(0, 0);\nvar MAX_ROOT_NODES = 32;\nvar isSetAvailable = typeof Set !== 'undefined';\nvar TileHashset = function () {\n  function TileHashset() {\n    this._table = isSetAvailable ? new Set() : {};\n  }\n  var _proto = TileHashset.prototype;\n  _proto.add = function add$$1(key) {\n    if (isSetAvailable) {\n      this._table.add(key);\n    } else {\n      this._table[key] = true;\n    }\n  };\n  _proto.has = function has(key) {\n    if (isSetAvailable) {\n      return this._table.has(key);\n    } else {\n      return this._table[key];\n    }\n  };\n  _proto.reset = function reset() {\n    if (isSetAvailable) {\n      this._table.clear();\n    } else {\n      this._table = {};\n    }\n  };\n  return TileHashset;\n}();\nvar options$w = {\n  'urlTemplate': null,\n  'subdomains': null,\n  'errorUrl': null,\n  'repeatWorld': true,\n  'background': true,\n  'loadingLimitOnInteracting': 3,\n  'loadingLimit': 0,\n  'tileRetryCount': 0,\n  'placeholder': false,\n  'crossOrigin': null,\n  'tileSize': [256, 256],\n  'offset': [0, 0],\n  'tileSystem': null,\n  'fadeAnimation': !IS_NODE,\n  'fadeDuration': 1000 / 60 * 10,\n  'debug': false,\n  'spatialReference': null,\n  'maxCacheSize': 256,\n  'renderer': function () {\n    return Browser$1.webgl ? 'gl' : 'canvas';\n  }(),\n  'clipByPitch': true,\n  'maxAvailableZoom': null,\n  'cascadeTiles': true,\n  'zoomOffset': 0,\n  'pyramidMode': 1,\n  'decodeImageInWorker': false,\n  'tileLimitPerFrame': 0,\n  'tileStackStartDepth': 7,\n  'tileStackDepth': 3,\n  'awareOfTerrain': true\n};\nvar URL_PATTERN$1 = /\\{ *([\\w_]+) *\\}/g;\nvar TEMP_POINT0$4 = new Point(0, 0);\nvar TEMP_POINT1$1 = new Point(0, 0);\nvar TEMP_POINT2$1 = new Point(0, 0);\nvar TEMP_POINT3$1 = new Point(0, 0);\nvar TEMP_POINT4 = new Point(0, 0);\nvar TEMP_POINT6 = new Point(0, 0);\nvar TILE_BOX = [[0, 0, 0], [0, 0, 0]];\nvar TILE_MIN = [0, 0, 0];\nvar TILE_MAX = [0, 0, 0];\nvar ARR3 = [];\nvar TileLayer = function (_Layer) {\n  _inheritsLoose(TileLayer, _Layer);\n  function TileLayer() {\n    return _Layer.apply(this, arguments) || this;\n  }\n  TileLayer.fromJSON = function fromJSON(layerJSON) {\n    if (!layerJSON || layerJSON['type'] !== 'TileLayer') {\n      return null;\n    }\n    return new TileLayer(layerJSON['id'], layerJSON['options']);\n  };\n  var _proto2 = TileLayer.prototype;\n  _proto2.forceReload = function forceReload() {\n    this.fire('forcereloadstart');\n    this.clear();\n    this.load();\n    this.fire('forcereloadend');\n    return this;\n  };\n  _proto2.getTileSize = function getTileSize() {\n    if (this._tileSize) {\n      return this._tileSize;\n    }\n    var size = this.options['tileSize'];\n    if (isNumber(size)) {\n      size = [size, size];\n    }\n    this._tileSize = new Size(size);\n    return this._tileSize;\n  };\n  _proto2.getTiles = function getTiles(z, parentLayer) {\n    this._coordCache = {};\n    if (this._isPyramidMode()) {\n      return this._getPyramidTiles(z, parentLayer);\n    } else {\n      return this._getCascadeTiles(z, parentLayer);\n    }\n  };\n  _proto2._isPyramidMode = function _isPyramidMode() {\n    var sr = this.getSpatialReference();\n    return !this._disablePyramid && !this._hasOwnSR && this.options['pyramidMode'] && sr && sr.isPyramid();\n  };\n  _proto2._getTileFullExtent = function _getTileFullExtent() {\n    if (this._tileFullExtent) {\n      return this._tileFullExtent;\n    }\n    var sr = this.getSpatialReference();\n    var fullExtent = sr.getFullExtent();\n    var res = sr.getResolution(0);\n    var map = this.getMap();\n    this._tileFullExtent = fullExtent.convertTo(function (c) {\n      return map._prjToPointAtRes(c, res, TEMP_POINT$2);\n    });\n    return this._tileFullExtent;\n  };\n  _proto2._getRootNodes = function _getRootNodes(offset0) {\n    var map = this.getMap();\n    if (this._rootNodes) {\n      var _this$_rootNodes = this._rootNodes,\n        _tiles = _this$_rootNodes.tiles,\n        mapWidth = _this$_rootNodes.mapWidth,\n        mapHeight = _this$_rootNodes.mapHeight;\n      if (map.width !== mapWidth || map.height !== mapHeight) {\n        var _error = this._getRootError();\n        for (var i = 0; i < _tiles.length; i++) {\n          _tiles[i].error = _error;\n        }\n        this._rootNodes.mapWidth = map.width;\n        this._rootNodes.mapHeight = map.height;\n      }\n      for (var _i = 0; _i < _tiles.length; _i++) {\n        _tiles[_i].offset[0] = offset0[0];\n        _tiles[_i].offset[1] = offset0[1];\n      }\n      return this._rootNodes;\n    }\n    var sr = this.getSpatialReference();\n    var res = sr.getResolution(0);\n    var tileConfig = this._getTileConfig();\n    var fullExtent = sr.getFullExtent();\n    var _tileConfig$tileSyste = tileConfig.tileSystem,\n      origin = _tileConfig$tileSyste.origin,\n      scale = _tileConfig$tileSyste.scale;\n    var extent000 = tileConfig.getTilePrjExtent(0, 0, res);\n    var w = extent000.getWidth();\n    var h = extent000.getHeight();\n    var delta = 1E-5;\n    var left = Math.abs((origin.x - fullExtent.left) / w);\n    left = Math.ceil(left - delta);\n    var right = Math.abs((fullExtent.right - origin.x) / w);\n    right = Math.ceil(right - delta);\n    var top = Math.ceil(Math.abs(fullExtent.top - origin.y) / h);\n    top = Math.ceil(top - delta);\n    var bottom = Math.ceil(Math.abs(fullExtent.bottom - origin.y) / h);\n    bottom = Math.ceil(bottom - delta);\n    if ((right + left) * (bottom + top) > MAX_ROOT_NODES) {\n      return {\n        status: 0,\n        error: 'Too many root nodes'\n      };\n    }\n    var error = this._getRootError();\n    var tiles = [];\n    var z = 0;\n    var zoomOffset = this.options['zoomOffset'];\n    for (var _i2 = -left; _i2 < right; _i2++) {\n      for (var j = -top; j < bottom; j++) {\n        var y = scale.y < 0 ? j : -(j + 1);\n        tiles.push({\n          x: _i2,\n          y: y,\n          z: z,\n          idx: _i2,\n          idy: y,\n          res: res,\n          extent2d: tileConfig.getTilePrjExtent(_i2, y, res).convertTo(function (c) {\n            return map._prjToPointAtRes(c, res, TEMP_POINT$2);\n          }),\n          id: this._getTileId(_i2, y, z),\n          url: this.getTileUrl(_i2, y, z + zoomOffset),\n          offset: [0, 0],\n          error: error,\n          children: []\n        });\n      }\n    }\n    this._rootNodes = {\n      status: 1,\n      tiles: tiles,\n      mapWidth: map.width,\n      mapHeight: map.height\n    };\n    return this._getRootNodes(offset0);\n  };\n  _proto2._getRootError = function _getRootError() {\n    var map = this.getMap();\n    var fov = toRadian(map.getFov());\n    var aspectRatio = map.width / map.height;\n    var cameraZ = map.cameraPosition[2];\n    var heightZ = cameraZ * Math.tan(0.5 * fov);\n    var widthZ = heightZ * aspectRatio;\n    var diagonalZ = Math.sqrt(cameraZ * cameraZ + heightZ * heightZ + widthZ * widthZ);\n    var fov0 = map._getFovZ(0);\n    var error = fov0 * (diagonalZ / cameraZ);\n    var sr = this.getSpatialReference();\n    var res = sr.getResolution(0);\n    return error * res / map.getResolution(0);\n  };\n  _proto2._getPyramidTiles = function _getPyramidTiles(z, layer) {\n    var map = this.getMap();\n    if (isNaN(+z)) {\n      z = this._getTileZoom(map.getZoom());\n    }\n    var sr = this.getSpatialReference();\n    var maxZoom = Math.min(z, this.getMaxZoom(), this.options['maxAvailableZoom'] || Infinity);\n    var projectionView = map.projViewMatrix;\n    var fullExtent = this._getTileFullExtent();\n    var offset0 = this._getTileOffset(0);\n    var queue;\n    if (this.options['repeatWorld']) {\n      var mapContainerExtent = map.getContainerExtent();\n      var mapExtent2D = this._convertToExtent2d(mapContainerExtent);\n      var scale = sr.getResolution(0) / map.getResolution();\n      if (!mapExtent2D.within(fullExtent.copy()._scale(scale))) {\n        var pitch = map.getPitch();\n        var cascadePitch1 = map.options['cascadePitches'][1];\n        var visualHeight1 = Math.floor(map._getVisualHeight(cascadePitch1));\n        var visualContainerExtent = pitch <= cascadePitch1 ? mapContainerExtent : new PointExtent(0, map.height - visualHeight1, map.width, map.height);\n        this._visitedTiles = new TileHashset();\n        var tileGrid = this._getTiles(0, visualContainerExtent, 2, layer && layer.getRenderer(), true);\n        var error = this._getRootError();\n        tileGrid.tiles.forEach(function (t) {\n          t.error = error;\n        });\n        queue = tileGrid.tiles;\n      } else {\n        var rootNodes = this._getRootNodes(offset0);\n        if (rootNodes.status !== 1) {\n          console.warn(rootNodes.error);\n          this._disablePyramid = true;\n          return this.getTiles(z, layer);\n        }\n        queue = rootNodes.tiles.concat();\n      }\n    } else {\n      var _rootNodes = this._getRootNodes(offset0);\n      if (_rootNodes.status !== 1) {\n        console.warn(_rootNodes.error);\n        this._disablePyramid = true;\n        return this.getTiles(z, layer);\n      }\n      queue = _rootNodes.tiles.concat();\n    }\n    var glRes = map.getGLRes();\n    var offsets = {\n      0: offset0\n    };\n    var extent = new PointExtent();\n    var tiles = [];\n    var parents = [];\n    while (queue.length > 0) {\n      var node = queue.pop();\n      if (node.z === maxZoom) {\n        extent._combine(node.extent2d);\n        tiles.push(node);\n        continue;\n      }\n      if (!offsets[node.z + 1]) {\n        offsets[node.z + 1] = this._getTileOffset(node.z + 1);\n      }\n      this._splitNode(node, projectionView, queue, tiles, extent, maxZoom, offsets[node.z + 1], layer && layer.getRenderer(), glRes);\n      if (this.isParentTile(z, maxZoom, node)) {\n        parents.push(node);\n      }\n    }\n    parents.sort(sortingTiles);\n    return {\n      tileGrids: [{\n        extent: extent,\n        count: tiles.length,\n        tiles: tiles,\n        parents: parents,\n        offset: [0, 0],\n        zoom: z\n      }],\n      count: tiles.length\n    };\n  };\n  _proto2.isParentTile = function isParentTile(z, maxZoom, tile) {\n    var stackMinZoom = Math.max(this.getMinZoom(), z - this.options['tileStackStartDepth']);\n    var stackMaxZoom = Math.min(maxZoom, stackMinZoom + this.options['tileStackDepth']);\n    return tile.z >= stackMinZoom && tile.z < stackMaxZoom;\n  };\n  _proto2._splitNode = function _splitNode(node, projectionView, queue, tiles, gridExtent, maxZoom, offset, parentRenderer, glRes) {\n    var zoomOffset = this.options['zoomOffset'];\n    var tileSystem = this._getTileConfig().tileSystem;\n    var scaleY = tileSystem.scale.y;\n    var z = node.z + 1;\n    var sr = this.getSpatialReference();\n    var x = node.x,\n      y = node.y,\n      extent2d = node.extent2d,\n      idx = node.idx,\n      idy = node.idy;\n    var childScale = 2;\n    var width = extent2d.getWidth() / 2 * childScale;\n    var height = extent2d.getHeight() / 2 * childScale;\n    var minx = extent2d.xmin * childScale;\n    var maxy = extent2d.ymax * childScale;\n    var miny = extent2d.ymin * childScale;\n    var renderer = parentRenderer || this.getRenderer();\n    var hasCurrentIn = false;\n    var children = [];\n    var res = sr.getResolution(z);\n    var glScale = res / glRes;\n    for (var i = 0; i < 4; i++) {\n      var dx = i % 2;\n      var dy = i >> 1;\n      var childX = (x << 1) + dx;\n      var childY = (y << 1) + dy;\n      var childIdx = (idx << 1) + dx;\n      var childIdy = (idy << 1) + dy;\n      if (!node.children) {\n        node.children = [];\n      }\n      var tileId = node.children[i];\n      if (!tileId) {\n        tileId = this._getTileId(childIdx, childIdy, z);\n        node.children[i] = tileId;\n      }\n      var cached = renderer.isTileCachedOrLoading(tileId);\n      var extent = void 0;\n      var childNode = cached && cached.info;\n      if (!childNode) {\n        if (!this.tileInfoCache) {\n          this.tileInfoCache = new LRUCache(this.options['maxCacheSize'] * 4);\n        }\n        childNode = this.tileInfoCache.get(tileId);\n        if (!childNode) {\n          if (scaleY < 0) {\n            var nwx = minx + dx * width;\n            var nwy = maxy - dy * height;\n            extent = new PointExtent(nwx, nwy - height, nwx + width, nwy);\n          } else {\n            var swx = minx + dx * width;\n            var swy = miny + dy * height;\n            extent = new PointExtent(swx, swy, swx + width, swy + height);\n          }\n          childNode = {\n            x: childX,\n            y: childY,\n            idx: childIdx,\n            idy: childIdy,\n            z: z,\n            extent2d: extent,\n            error: node.error / 2,\n            res: res,\n            id: tileId,\n            children: [],\n            url: this.getTileUrl(childX, childY, z + zoomOffset),\n            offset: offset\n          };\n          this.tileInfoCache.add(tileId, childNode);\n        }\n        if (parentRenderer) {\n          childNode['layer'] = this.getId();\n        }\n      }\n      childNode.error = node.error / 2;\n      childNode.offset[0] = offset[0];\n      childNode.offset[1] = offset[1];\n      var visible = this._isTileVisible(childNode, projectionView, glScale, maxZoom, offset);\n      if (visible === 1) {\n        hasCurrentIn = true;\n      } else if (visible === -1) {\n        continue;\n      } else if (visible === 0 && z !== maxZoom) {\n        tiles.push(node);\n        gridExtent._combine(node.extent2d);\n        return;\n      }\n      children.push(childNode);\n    }\n    if (z === maxZoom) {\n      if (hasCurrentIn) {\n        queue.push.apply(queue, children);\n      } else {\n        tiles.push(node);\n        gridExtent._combine(node.extent2d);\n      }\n    } else {\n      queue.push.apply(queue, children);\n    }\n  };\n  _proto2._isTileVisible = function _isTileVisible(node, projectionView, glScale, maxZoom, offset) {\n    if (node.z === 0) {\n      return 1;\n    }\n    if (!this._isTileInFrustum(node, projectionView, glScale, offset)) {\n      return -1;\n    }\n    var maxError = this.options['maxError'];\n    if (isNil(maxError)) {\n      maxError = DEFAULT_MAXERROR;\n    }\n    var error = this._getScreenSpaceError(node, glScale, maxZoom, offset);\n    return error >= maxError ? 1 : 0;\n  };\n  _proto2._isTileInFrustum = function _isTileInFrustum(node, projectionView, glScale, offset) {\n    if (!this._zScale) {\n      var map = this.getMap();\n      var glRes = map.getGLRes();\n      this._zScale = map.altitudeToPoint(100, glRes) / 100;\n    }\n    var renderer = this.getRenderer();\n    var _node$extent2d = node.extent2d,\n      xmin = _node$extent2d.xmin,\n      ymin = _node$extent2d.ymin,\n      xmax = _node$extent2d.xmax,\n      ymax = _node$extent2d.ymax;\n    TILE_BOX[0][0] = (xmin - offset[0]) * glScale;\n    TILE_BOX[0][1] = (ymin - offset[1]) * glScale;\n    var minAltitude = node.minAltitude || renderer && renderer.avgMinAltitude || 0;\n    TILE_BOX[0][2] = minAltitude * this._zScale;\n    TILE_BOX[1][0] = (xmax - offset[0]) * glScale;\n    TILE_BOX[1][1] = (ymax - offset[1]) * glScale;\n    var maxAltitude = node.maxAltitude || renderer && renderer.avgMaxAltitude || 0;\n    TILE_BOX[1][2] = maxAltitude * this._zScale;\n    return intersectsBox(projectionView, TILE_BOX);\n  };\n  _proto2._getScreenSpaceError = function _getScreenSpaceError(node, glScale, maxZoom, offset) {\n    var geometricError = node.error;\n    var map = this.getMap();\n    var _node$extent2d2 = node.extent2d,\n      xmin = _node$extent2d2.xmin,\n      ymin = _node$extent2d2.ymin,\n      xmax = _node$extent2d2.xmax,\n      ymax = _node$extent2d2.ymax;\n    TILE_MIN[0] = (xmin - offset[0]) * glScale;\n    TILE_MIN[1] = (ymin - offset[1]) * glScale;\n    TILE_MAX[0] = (xmax - offset[0]) * glScale;\n    TILE_MAX[1] = (ymax - offset[1]) * glScale;\n    var distanceToCamera = distanceToRect(TILE_MIN, TILE_MAX, map.cameraPosition);\n    var distance$$1 = Math.max(Math.abs(distanceToCamera), 1E-7);\n    var gap = Math.abs(node.z - maxZoom);\n    var r;\n    if (map.height < 1000) {\n      r = 1;\n    } else {\n      r = gap <= 1 ? 1 : gap <= 2 ? 0.7 : 0.605;\n    }\n    var error = geometricError * r / distance$$1;\n    return error;\n  };\n  _proto2._getCascadeTiles = function _getCascadeTiles(z, parentLayer) {\n    var map = this.getMap();\n    var pitch = map.getPitch();\n    var parentRenderer = parentLayer && parentLayer.getRenderer();\n    var mapExtent = map.getContainerExtent();\n    var tileGrids = [];\n    var count = 0;\n    var minZoom = this.getMinZoom();\n    var cascadePitch0 = map.options['cascadePitches'][0];\n    var cascadePitch1 = map.options['cascadePitches'][1];\n    var visualHeight1 = Math.floor(map._getVisualHeight(cascadePitch1));\n    var tileZoom = isNil(z) ? this._getTileZoom(map.getZoom()) : z;\n    this._visitedTiles = new TileHashset();\n    if (!isNil(z) || !this.options['cascadeTiles'] || pitch <= cascadePitch0 || !isNil(minZoom) && tileZoom <= minZoom) {\n      var containerExtent = pitch <= cascadePitch1 ? mapExtent : new PointExtent(0, map.height - visualHeight1, map.width, map.height);\n      var _currentTiles = this._getTiles(tileZoom, containerExtent, 2, parentRenderer);\n      if (_currentTiles) {\n        count += _currentTiles.tiles.length;\n        tileGrids.push(_currentTiles);\n      }\n      return {\n        tileGrids: tileGrids,\n        count: count\n      };\n    }\n    var visualHeight0 = Math.floor(map._getVisualHeight(cascadePitch0));\n    var extent0 = new PointExtent(0, map.height - visualHeight0, map.width, map.height);\n    var currentTiles = this._getTiles(tileZoom, extent0, 0, parentRenderer);\n    count += currentTiles ? currentTiles.tiles.length : 0;\n    tileGrids.push(currentTiles);\n    var cascadeHeight = extent0.ymin;\n    var d = map.getSpatialReference().getZoomDirection();\n    var cascadeLevels = d;\n    var cascadeTiles1;\n    if (pitch > cascadePitch1) {\n      if (tileZoom - cascadeLevels <= minZoom) {\n        cascadeLevels = 0;\n      }\n      var extent1 = new PointExtent(0, map.height - visualHeight1, map.width, cascadeHeight);\n      cascadeTiles1 = this._getTiles(tileZoom - cascadeLevels, extent1, 1, parentRenderer);\n      count += cascadeTiles1 ? cascadeTiles1.tiles.length : 0;\n      cascadeHeight = extent1.ymin;\n      cascadeLevels += 4 * d;\n      tileGrids.push(cascadeTiles1);\n    }\n    var cascadeTiles2;\n    if (tileZoom - cascadeLevels >= minZoom) {\n      var extent2 = new PointExtent(0, mapExtent.ymin, map.width, cascadeHeight);\n      cascadeTiles2 = this._getTiles(tileZoom - cascadeLevels, extent2, 2, parentRenderer);\n      count += cascadeTiles2 ? cascadeTiles2.tiles.length : 0;\n      tileGrids.push(cascadeTiles2);\n    }\n    if (cascadeTiles1 && cascadeTiles2) {\n      tileGrids[1] = cascadeTiles2;\n      tileGrids[2] = cascadeTiles1;\n    }\n    return {\n      tileGrids: tileGrids,\n      count: count\n    };\n  };\n  _proto2.getTileUrl = function getTileUrl(x, y, z) {\n    var urlTemplate = this.options['urlTemplate'];\n    var domain = '';\n    if (this.options['subdomains']) {\n      var subdomains = this.options['subdomains'];\n      if (isArrayHasData(subdomains)) {\n        var length$$1 = subdomains.length;\n        var s = (x + y) % length$$1;\n        if (s < 0) {\n          s = 0;\n        }\n        domain = subdomains[s];\n      }\n    }\n    if (isFunction(urlTemplate)) {\n      return urlTemplate(x, y, z, domain);\n    }\n    var data = {\n      'x': x,\n      'y': y,\n      'z': z,\n      's': domain\n    };\n    if (this.options.token) {\n      data.token = this.options.token;\n    }\n    if (this.options.customTags) {\n      extend(data, this.options.customTags);\n    }\n    return urlTemplate.replace(URL_PATTERN$1, function (str, key) {\n      var value = data[key];\n      if (value === undefined) {\n        throw new Error('No value provided for variable ' + str);\n      } else if (typeof value === 'function') {\n        value = value(data);\n      }\n      return value;\n    });\n  };\n  _proto2.clear = function clear() {\n    if (this._renderer) {\n      this._renderer.clear();\n    }\n    if (this.tileInfoCache) {\n      this.tileInfoCache.reset();\n    }\n    this.fire('clear');\n    return this;\n  };\n  _proto2.toJSON = function toJSON() {\n    var profile = {\n      'type': this.getJSONType(),\n      'id': this.getId(),\n      'options': this.config()\n    };\n    return profile;\n  };\n  _proto2.getSpatialReference = function getSpatialReference() {\n    var map = this.getMap();\n    if (map && (!this.options['spatialReference'] || SpatialReference.equals(this.options['spatialReference'], map.options['spatialReference']))) {\n      return map.getSpatialReference();\n    }\n    if (this._sr) {\n      return this._sr;\n    }\n    var config = this.options['spatialReference'];\n    if (isString(config)) {\n      config = SpatialReference.getPreset(config);\n      if (!config) {\n        throw new Error(\"Unsupported spatial reference: \" + this.options['spatialReference'] + \", possible values: \" + SpatialReference.getAllPresets().join());\n      }\n    }\n    this._sr = new SpatialReference(config);\n    this._srMinZoom = this._sr.getMinZoom();\n    this._srMaxZoom = this._sr.getMaxZoom();\n    this._hasOwnSR = this._sr.toJSON().projection !== map.getSpatialReference().toJSON().projection;\n    return this._sr;\n  };\n  _proto2.getMinZoom = function getMinZoom() {\n    var sr = this.getSpatialReference();\n    if (sr !== this.getMap().getSpatialReference()) {\n      return Math.max(_Layer.prototype.getMinZoom.call(this), this._srMinZoom);\n    }\n    return _Layer.prototype.getMinZoom.call(this);\n  };\n  _proto2.getMaxZoom = function getMaxZoom() {\n    var sr = this.getSpatialReference();\n    if (sr !== this.getMap().getSpatialReference()) {\n      return Math.min(_Layer.prototype.getMaxZoom.call(this), this._srMaxZoom);\n    }\n    return _Layer.prototype.getMaxZoom.call(this);\n  };\n  _proto2._getTileZoom = function _getTileZoom(zoom) {\n    if (!this._hasOwnSR) {\n      var res0 = this.getMap().getResolution(zoom);\n      var res1 = this.getSpatialReference().getResolution(zoom);\n      var dz = Math.log(res1 / res0) * Math.LOG2E;\n      zoom += dz;\n    }\n    var maxZoom = this.options['maxAvailableZoom'];\n    if (!isNil(maxZoom) && zoom > maxZoom) {\n      zoom = maxZoom;\n    }\n    if (!isInteger(zoom)) {\n      zoom = Math.round(zoom);\n    }\n    zoom = Math.max(0, zoom);\n    return zoom;\n  };\n  _proto2._getTiles = function _getTiles(tileZoom, containerExtent, cascadeLevel, parentRenderer, ignoreMinZoom) {\n    var map = this.getMap();\n    var z = tileZoom;\n    var frustumMatrix = map.projViewMatrix;\n    var canSplitTile = map.getResolution(tileZoom) / map.getResolution(tileZoom - 1) === 0.5;\n    if (cascadeLevel < 2) {\n      if (cascadeLevel === 0 && canSplitTile) {\n        z -= 1;\n      }\n      frustumMatrix = cascadeLevel === 0 ? map.cascadeFrustumMatrix0 : cascadeLevel === 1 ? map.cascadeFrustumMatrix1 : map.projViewMatrix;\n    }\n    var zoom = z + this.options['zoomOffset'];\n    var offset = this._getTileOffset(z),\n      hasOffset = offset[0] || offset[1];\n    var emptyGrid = {\n      'zoom': z,\n      'extent': null,\n      'offset': offset,\n      'tiles': []\n    };\n    if (zoom < 0) {\n      return emptyGrid;\n    }\n    if (!map || !this.isVisible() || !map.width || !map.height) {\n      return emptyGrid;\n    }\n    if (!ignoreMinZoom) {\n      var minZoom = this.getMinZoom(),\n        maxZoom = this.getMaxZoom();\n      if (!isNil(minZoom) && z < minZoom || !isNil(maxZoom) && z > maxZoom) {\n        return emptyGrid;\n      }\n    }\n    var tileConfig = this._getTileConfig();\n    if (!tileConfig) {\n      return emptyGrid;\n    }\n    var tileOffsets = {\n      zoom: offset\n    };\n    var sr = this.getSpatialReference();\n    var res = sr.getResolution(z);\n    var glScale;\n    if (this._hasOwnSR) {\n      glScale = map.getGLScale(z);\n    } else {\n      glScale = res / map.getGLRes();\n    }\n    var repeatWorld = !this._hasOwnSR && this.options['repeatWorld'];\n    var extent2d = this._convertToExtent2d(containerExtent);\n    var maskExtent = this._getMask2DExtent();\n    if (maskExtent) {\n      var intersection = maskExtent.intersection(extent2d);\n      if (!intersection) {\n        return emptyGrid;\n      }\n      containerExtent = intersection.convertTo(function (c) {\n        return map._pointToContainerPoint(c, undefined, 0, TEMP_POINT$2);\n      });\n    }\n    var prjCenter = map._containerPointToPrj(containerExtent.getCenter(), TEMP_POINT0$4);\n    var centerPoint = map._prjToPoint(prjCenter, z, TEMP_POINT1$1);\n    var c;\n    if (hasOffset) {\n      c = this._project(map._pointToPrj(centerPoint._add(offset), z, TEMP_POINT1$1), TEMP_POINT1$1);\n    } else {\n      c = this._project(prjCenter, TEMP_POINT1$1);\n    }\n    var extentScale = map.getGLScale() / map.getGLScale(z);\n    TEMP_POINT2$1.x = extent2d.xmin * extentScale;\n    TEMP_POINT2$1.y = extent2d.ymax * extentScale;\n    TEMP_POINT3$1.x = extent2d.xmax * extentScale;\n    TEMP_POINT3$1.y = extent2d.ymin * extentScale;\n    var pmin = this._project(map._pointToPrj(TEMP_POINT2$1._add(offset), z, TEMP_POINT2$1), TEMP_POINT2$1);\n    var pmax = this._project(map._pointToPrj(TEMP_POINT3$1._add(offset), z, TEMP_POINT3$1), TEMP_POINT3$1);\n    var centerTile = tileConfig.getTileIndex(c, res, repeatWorld);\n    var ltTile = tileConfig.getTileIndex(pmin, res, repeatWorld);\n    var rbTile = tileConfig.getTileIndex(pmax, res, repeatWorld);\n    var top = Math.ceil(Math.abs(centerTile.idy - ltTile.idy)),\n      left = Math.ceil(Math.abs(centerTile.idx - ltTile.idx)),\n      bottom = Math.ceil(Math.abs(centerTile.idy - rbTile.idy)),\n      right = Math.ceil(Math.abs(centerTile.idx - rbTile.idx));\n    var allCount = (top + bottom + 1) * (left + right + 1);\n    var tileSize = this.getTileSize();\n    var renderer = this.getRenderer() || parentRenderer,\n      scale = this._getTileConfig().tileSystem.scale;\n    var tiles = [],\n      extent = new PointExtent();\n    var tilePoint = new Point(0, 0);\n    for (var i = -top; i <= bottom; i++) {\n      var j = -left;\n      var leftVisitEnd = -Infinity;\n      var rightVisitEnd = false;\n      while (j >= leftVisitEnd && j <= right) {\n        var idx = tileConfig.getNeighorTileIndex(centerTile.idx, centerTile.idy, j, i, res, repeatWorld);\n        if (leftVisitEnd === -Infinity) {\n          j++;\n        } else {\n          j--;\n        }\n        var tileId = this._getTileId(idx.idx, idx.idy, z);\n        if (idx.out || this._visitedTiles && this._visitedTiles.has(tileId)) {\n          continue;\n        }\n        var tileInfo = renderer && renderer.isTileCachedOrLoading(tileId);\n        if (tileInfo) {\n          tileInfo = tileInfo.info;\n        }\n        var p = void 0;\n        if (tileInfo) {\n          var _tileInfo = tileInfo,\n            _extent2d = _tileInfo.extent2d;\n          tilePoint.set(_extent2d.xmin, _extent2d.ymax);\n          p = tilePoint;\n        } else if (!this._hasOwnSR) {\n          p = tileConfig.getTilePointNW(idx.x, idx.y, res);\n        } else {\n          var pnw = tileConfig.getTilePrjNW(idx.x, idx.y, res);\n          p = map._prjToPoint(this._unproject(pnw, TEMP_POINT3$1), z);\n        }\n        var width = void 0,\n          height = void 0;\n        if (!this._hasOwnSR) {\n          width = tileSize.width;\n          height = tileSize.height;\n        } else {\n          var pp = void 0;\n          if (!this._hasOwnSR) {\n            pp = tileConfig.getTilePointSE(idx.x, idx.y, res);\n          } else {\n            var pse = tileConfig.getTilePrjSE(idx.x, idx.y, res);\n            pp = map._prjToPoint(this._unproject(pse, TEMP_POINT3$1), z, TEMP_POINT3$1);\n          }\n          width = Math.ceil(Math.abs(pp.x - p.x));\n          height = Math.ceil(Math.abs(pp.y - p.y));\n        }\n        var dx = scale.x * (idx.idx - idx.x) * width,\n          dy = scale.y * (idx.idy - idx.y) * height;\n        if (!tileInfo && (dx || dy)) {\n          p._add(dx, dy);\n        }\n        var tileExtent = tileInfo && tileInfo.extent2d || new PointExtent(p.x, p.y - height, p.x + width, p.y);\n        if (allCount <= 4 || rightVisitEnd || this._isTileInExtent(frustumMatrix, tileExtent, offset, glScale)) {\n          var tileRes = this._hasOwnSR ? map._getResolution(z) : res;\n          if (this._visitedTiles && cascadeLevel === 0) {\n            this._visitedTiles.add(tileId);\n          }\n          if (canSplitTile && cascadeLevel === 0) {\n            this._splitTiles(frustumMatrix, tiles, renderer, idx, z + 1, tileRes, tileExtent, dx, dy, tileOffsets, parentRenderer);\n            extent._combine(tileExtent);\n          } else {\n            if (!tileInfo) {\n              tileInfo = {\n                'z': z,\n                'x': idx.x,\n                'y': idx.y,\n                'idx': idx.idx,\n                'idy': idx.idy,\n                'extent2d': tileExtent,\n                'offset': offset,\n                'id': tileId,\n                'res': tileRes,\n                'url': this.getTileUrl(idx.x, idx.y, zoom)\n              };\n              if (parentRenderer) {\n                tileInfo['layer'] = this.getId();\n              }\n            } else {\n              tileInfo.offset[0] = offset[0];\n              tileInfo.offset[1] = offset[1];\n            }\n            tiles.push(tileInfo);\n            extent._combine(tileExtent);\n          }\n          if (leftVisitEnd === -Infinity) {\n            leftVisitEnd = j;\n            j = right;\n          } else if (!rightVisitEnd) {\n            rightVisitEnd = true;\n          }\n        }\n      }\n    }\n    if (tiles.length) {\n      var center = map._containerPointToPoint(containerExtent.getCenter(), z, TEMP_POINT$2)._add(offset);\n      var point0 = new Point(0, 0);\n      var point1 = new Point(0, 0);\n      tiles.sort(function (a, b) {\n        point0.set((a.extent2d.xmin + a.extent2d.xmax) / 2, (a.extent2d.ymin + a.extent2d.ymax) / 2);\n        point1.set((b.extent2d.xmin + b.extent2d.xmax) / 2, (b.extent2d.ymin + b.extent2d.ymax) / 2);\n        return point0.distanceTo(center) - point1.distanceTo(center);\n      });\n    }\n    return {\n      'offset': offset,\n      'zoom': tileZoom,\n      'extent': extent,\n      'tiles': tiles\n    };\n  };\n  _proto2._convertToExtent2d = function _convertToExtent2d(containerExtent) {\n    var _this = this;\n    var map = this.getMap();\n    return containerExtent.convertTo(function (c) {\n      var result;\n      if (c.y > 0 && c.y < map.height) {\n        var key = (c.x === 0 ? 0 : 1) + c.y;\n        if (!_this._coordCache[key]) {\n          _this._coordCache[key] = map._containerPointToPoint(c);\n        }\n        result = _this._coordCache[key];\n      }\n      result = map._containerPointToPoint(c, undefined, TEMP_POINT$2);\n      return result;\n    });\n  };\n  _proto2._splitTiles = function _splitTiles(frustumMatrix, tiles, renderer, tileIdx, z, res, tileExtent, dx, dy, tileOffsets, parentRenderer) {\n    var yOrder = this._getTileConfig().tileSystem.scale.y;\n    var glScale = this.getMap().getGLScale(z);\n    var corner = TEMP_POINT4.set(tileExtent.xmin * 2, yOrder < 0 ? tileExtent.ymax * 2 : tileExtent.ymin * 2);\n    var w = tileExtent.getWidth();\n    var h = tileExtent.getHeight();\n    var idx = tileIdx.idx * 2;\n    var idy = tileIdx.idy * 2;\n    var x = tileIdx.x * 2;\n    var y = tileIdx.y * 2;\n    var tile = this._checkAndAddTile(frustumMatrix, renderer, idx, idy, x, y, z, res, 0, 0, w, h, corner, glScale, tileOffsets, parentRenderer);\n    if (tile) tiles.push(tile);\n    tile = this._checkAndAddTile(frustumMatrix, renderer, idx, idy, x, y, z, res, 0, 1, w, h, corner, glScale, tileOffsets, parentRenderer);\n    if (tile) tiles.push(tile);\n    tile = this._checkAndAddTile(frustumMatrix, renderer, idx, idy, x, y, z, res, 1, 0, w, h, corner, glScale, tileOffsets, parentRenderer);\n    if (tile) tiles.push(tile);\n    tile = this._checkAndAddTile(frustumMatrix, renderer, idx, idy, x, y, z, res, 1, 1, w, h, corner, glScale, tileOffsets, parentRenderer);\n    if (tile) tiles.push(tile);\n  };\n  _proto2._checkAndAddTile = function _checkAndAddTile(frustumMatrix, renderer, idx, idy, x, y, z, res, i, j, w, h, corner, glScale, tileOffsets, parentRenderer) {\n    var tileId = this._getTileId(idx + i, idy + j, z);\n    if (this._visitedTiles && this._visitedTiles.has(tileId)) {\n      return null;\n    }\n    var offset = tileOffsets[z];\n    if (!offset) {\n      offset = tileOffsets[z] = this._getTileOffset(z);\n    }\n    var yOrder = this._getTileConfig().tileSystem.scale.y;\n    var childExtent = new PointExtent(corner.x + i * w, corner.y + yOrder * j * h, corner.x + (i + 1) * w, corner.y + yOrder * (j + 1) * h);\n    if (!this._isSplittedTileInExtent(frustumMatrix, childExtent, offset, glScale)) {\n      return null;\n    }\n    var childRes = res / 2;\n    var tileInfo = renderer && renderer.isTileCachedOrLoading(tileId);\n    if (!tileInfo) {\n      tileInfo = {\n        'z': z,\n        'x': x + i,\n        'y': y + j,\n        'extent2d': childExtent,\n        'id': tileId,\n        'offset': offset,\n        'res': childRes,\n        'url': this.getTileUrl(x + i, y + j, z + this.options['zoomOffset'])\n      };\n      if (parentRenderer) {\n        tileInfo['layer'] = this.getId();\n      }\n    } else {\n      tileInfo = tileInfo.info;\n    }\n    return tileInfo;\n  };\n  _proto2._getTileOffset = function _getTileOffset(z) {\n    var offset = this.options['offset'];\n    if (isFunction(offset)) {\n      offset = offset.call(this, z);\n    }\n    if (isNumber(offset)) {\n      offset = [offset, offset];\n    }\n    return offset || [0, 0];\n  };\n  _proto2._getTileId = function _getTileId(x, y, zoom, id) {\n    return (id || this.getId()) + \"_\" + x + \"_\" + y + \"_\" + zoom;\n  };\n  _proto2._project = function _project(pcoord, out) {\n    if (this._hasOwnSR) {\n      var map = this.getMap();\n      var mapProjection = map.getProjection();\n      var projection = this.getSpatialReference().getProjection();\n      return projection.project(mapProjection.unproject(pcoord, out), out);\n    } else {\n      return pcoord;\n    }\n  };\n  _proto2._unproject = function _unproject(pcoord, out) {\n    if (this._hasOwnSR) {\n      var map = this.getMap();\n      var sr = this.getSpatialReference();\n      var mapProjection = map.getProjection();\n      var projection = sr.getProjection();\n      return mapProjection.project(projection.unproject(pcoord, out), out);\n    } else {\n      return pcoord;\n    }\n  };\n  _proto2._initTileConfig = function _initTileConfig() {\n    var map = this.getMap(),\n      tileSize = this.getTileSize();\n    var sr = this.getSpatialReference();\n    var projection = sr.getProjection(),\n      fullExtent = sr.getFullExtent();\n    this._defaultTileConfig = new TileConfig(map, TileSystem.getDefault(projection), fullExtent, tileSize);\n    if (this.options.hasOwnProperty('tileSystem')) {\n      this._tileConfig = new TileConfig(map, this.options['tileSystem'], fullExtent, tileSize);\n    }\n    delete this._rootNodes;\n    delete this._tileFullExtent;\n    delete this._disablePyramid;\n  };\n  _proto2._getTileConfig = function _getTileConfig() {\n    if (!this._defaultTileConfig) {\n      this._initTileConfig();\n    }\n    return this._tileConfig || this._defaultTileConfig;\n  };\n  _proto2._bindMap = function _bindMap(map) {\n    var baseLayer = map.getBaseLayer();\n    if (baseLayer === this) {\n      if (!baseLayer.options.hasOwnProperty('forceRenderOnMoving')) {\n        this.config({\n          'forceRenderOnMoving': true\n        });\n      }\n    }\n    this._onSpatialReferenceChange();\n    return _Layer.prototype._bindMap.apply(this, arguments);\n  };\n  _proto2._isTileInExtent = function _isTileInExtent(frustumMatrix, tileExtent, offset, glScale) {\n    var map = this.getMap();\n    var matrix;\n    if (frustumMatrix !== map.projViewMatrix) {\n      var tileCenter = tileExtent.getCenter(TEMP_POINT6)._sub(offset[0], offset[1])._multi(glScale);\n      set$2(ARR3, tileCenter.x, tileCenter.y, 0);\n      var ndc = transformMat4(ARR3, ARR3, map.projViewMatrix);\n      matrix = ndc[1] < 0 ? map.projViewMatrix : frustumMatrix;\n    } else {\n      matrix = map.projViewMatrix;\n    }\n    TILE_BOX[0][0] = (tileExtent.xmin - offset[0]) * glScale;\n    TILE_BOX[0][1] = (tileExtent.ymin - offset[1]) * glScale;\n    TILE_BOX[1][0] = (tileExtent.xmax - offset[0]) * glScale;\n    TILE_BOX[1][1] = (tileExtent.ymax - offset[1]) * glScale;\n    return intersectsBox(matrix, TILE_BOX);\n  };\n  _proto2._isSplittedTileInExtent = function _isSplittedTileInExtent(frustumMatrix, tileExtent, offset, glScale) {\n    var map = this.getMap();\n    TILE_BOX[0][0] = (tileExtent.xmin - offset[0]) * glScale;\n    TILE_BOX[0][1] = (tileExtent.ymin - offset[1]) * glScale;\n    TILE_BOX[1][0] = (tileExtent.xmax - offset[0]) * glScale;\n    TILE_BOX[1][1] = (tileExtent.ymax - offset[1]) * glScale;\n    return intersectsBox(map.projViewMatrix, TILE_BOX);\n  };\n  _proto2.getEvents = function getEvents() {\n    return {\n      'spatialreferencechange': this._onSpatialReferenceChange\n    };\n  };\n  _proto2._onSpatialReferenceChange = function _onSpatialReferenceChange() {\n    delete this._tileConfig;\n    delete this._defaultTileConfig;\n    delete this._sr;\n    delete this._srMinZoom;\n    delete this._hasOwnSR;\n    delete this._rootNodes;\n    if (this.tileInfoCache) {\n      this.tileInfoCache.reset();\n    }\n    var renderer = this.getRenderer();\n    if (renderer) {\n      renderer.clear();\n    }\n  };\n  _proto2.getPolygonOffsetCount = function getPolygonOffsetCount() {\n    return 2;\n  };\n  _proto2.getPolygonOffset = function getPolygonOffset() {\n    return this._polygonOffset || 0;\n  };\n  _proto2.setPolygonOffset = function setPolygonOffset(offset) {\n    this._polygonOffset = offset;\n    return this;\n  };\n  return TileLayer;\n}(Layer);\nTileLayer.registerJSONType('TileLayer');\nTileLayer.mergeOptions(options$w);\nfunction distanceToRect(min, max, xyz) {\n  var dx = Math.max(min[0] - xyz[0], 0, xyz[0] - max[0]);\n  var dy = Math.max(min[1] - xyz[1], 0, xyz[1] - max[1]);\n  var dz = Math.max(min[2] - xyz[2], 0, xyz[2] - max[2]);\n  return Math.sqrt(dx * dx + dy * dy + dz * dz);\n}\nfunction sortingTiles(t0, t1) {\n  return t0.z - t1.z;\n}\nvar options$x = {\n  'maxCacheSize': 1024\n};\nvar DEFAULT_TILESIZE = new Size(256, 256);\nvar EVENTS$2 = 'show hide remove setzindex forcereloadstart';\nfunction checkLayers(tileLayers) {\n  if (!Array.isArray(tileLayers)) {\n    tileLayers = [tileLayers];\n  }\n  return tileLayers;\n}\nvar GroupTileLayer = function (_TileLayer) {\n  _inheritsLoose(GroupTileLayer, _TileLayer);\n  GroupTileLayer.fromJSON = function fromJSON(layerJSON) {\n    if (!layerJSON || layerJSON['type'] !== 'GroupTileLayer') {\n      return null;\n    }\n    var layers = layerJSON['layers'].map(function (json) {\n      return Layer.fromJSON(json);\n    });\n    return new GroupTileLayer(layerJSON['id'], layers, layerJSON['options']);\n  };\n  function GroupTileLayer(id, layers, options) {\n    var _this;\n    _this = _TileLayer.call(this, id, options) || this;\n    _this.layers = layers || [];\n    _this._checkChildren();\n    _this.layerMap = {};\n    _this._groupChildren = [];\n    return _this;\n  }\n  var _proto = GroupTileLayer.prototype;\n  _proto.getLayers = function getLayers() {\n    return this.layers;\n  };\n  _proto.addLayer = function addLayer(tileLayers) {\n    var _this2 = this;\n    if (tileLayers === void 0) {\n      tileLayers = [];\n    }\n    tileLayers = checkLayers(tileLayers);\n    var len = this.layers.length;\n    tileLayers.forEach(function (tileLayer) {\n      if (!(tileLayer instanceof TileLayer)) {\n        return;\n      }\n      if (_this2.layers.indexOf(tileLayer) === -1 && !_this2.layerMap[tileLayer.getId()]) {\n        _this2.layers.push(tileLayer);\n      }\n    });\n    if (len !== this.layers.length) {\n      this._sortLayers();\n      this._refresh();\n      this._renderLayers();\n    }\n    return this;\n  };\n  _proto.removeLayer = function removeLayer(tileLayers) {\n    var _this3 = this;\n    if (tileLayers === void 0) {\n      tileLayers = [];\n    }\n    tileLayers = checkLayers(tileLayers);\n    var len = this.layers.length;\n    tileLayers.forEach(function (tileLayer) {\n      if (!(tileLayer instanceof TileLayer)) {\n        tileLayer = _this3.layerMap[tileLayer];\n      }\n      if (!(tileLayer instanceof TileLayer)) {\n        return;\n      }\n      var index = _this3.layers.indexOf(tileLayer);\n      if (index >= 0) {\n        _this3.layers.splice(index, 1);\n        tileLayer._doRemove();\n        tileLayer.off(EVENTS$2, _this3._onLayerShowHide, _this3);\n      }\n    });\n    if (len !== this.layers.length) {\n      this._refresh();\n      this._renderLayers();\n    }\n    return this;\n  };\n  _proto.clearLayers = function clearLayers() {\n    var _this4 = this;\n    this.layers.forEach(function (layer) {\n      layer._doRemove();\n      layer.off(EVENTS$2, _this4._onLayerShowHide, _this4);\n    });\n    this.layers = [];\n    this._refresh();\n    this._renderLayers();\n    return this;\n  };\n  _proto.toJSON = function toJSON() {\n    var profile = {\n      'type': this.getJSONType(),\n      'id': this.getId(),\n      'layers': this.layers.map(function (layer) {\n        return layer.toJSON();\n      }),\n      'options': this.config()\n    };\n    return profile;\n  };\n  _proto.getTileSize = function getTileSize(id) {\n    var layer = this.getLayer(id);\n    if (!layer) {\n      return DEFAULT_TILESIZE;\n    }\n    return layer.getTileSize();\n  };\n  _proto.getTiles = function getTiles(z, parentLayer) {\n    var layers = this.layers;\n    var tiles = [];\n    var count = 0;\n    for (var i = 0, l = layers.length; i < l; i++) {\n      var layer = layers[i];\n      if (!layer || !layer.options['visible'] || !layer.isVisible() || !layer.getMap()) {\n        continue;\n      }\n      var childGrid = layer.getTiles(z, parentLayer || this);\n      if (!childGrid || childGrid.count === 0) {\n        continue;\n      }\n      count += childGrid.count;\n      pushIn(tiles, childGrid.tileGrids);\n    }\n    return {\n      count: count,\n      tileGrids: tiles\n    };\n  };\n  _proto.onAdd = function onAdd() {\n    this._sortLayers();\n    this._refresh();\n    _TileLayer.prototype.onAdd.call(this);\n  };\n  _proto.onRemove = function onRemove() {\n    var _this5 = this;\n    this.layers.forEach(function (layer) {\n      layer._doRemove();\n      layer.off(EVENTS$2, _this5._onLayerShowHide, _this5);\n    });\n    this.layerMap = {};\n    this._groupChildren = [];\n    _TileLayer.prototype.onRemove.call(this);\n  };\n  _proto.getLayer = function getLayer(id) {\n    return this.getChildLayer(id);\n  };\n  _proto.getChildLayer = function getChildLayer(id) {\n    var layer = this.layerMap[id];\n    if (layer) {\n      return layer;\n    }\n    for (var i = 0; i < this._groupChildren.length; i++) {\n      var child = this._groupChildren[i].getChildLayer(id);\n      if (child) {\n        return child;\n      }\n    }\n    return null;\n  };\n  _proto._removeChildTileCache = function _removeChildTileCache(layer) {\n    if (!layer) {\n      return this;\n    }\n    var renderer = this.getRenderer();\n    if (!renderer) {\n      return this;\n    }\n    var cache;\n    var id = layer.getId();\n    var validateCache = function validateCache() {\n      return cache && cache.info && cache.info.layer === id;\n    };\n    if (renderer.tileCache) {\n      var keys = renderer.tileCache.keys();\n      keys.forEach(function (key) {\n        cache = renderer.tileCache.get(key);\n        if (validateCache()) {\n          renderer.tileCache.remove(key);\n        }\n      });\n    }\n    var tilesInView = renderer.tilesInView || {};\n    for (var key in tilesInView) {\n      cache = tilesInView[key];\n      if (validateCache()) {\n        delete tilesInView[key];\n      }\n    }\n    var tilesLoading = renderer.tilesLoading || {};\n    for (var _key in tilesLoading) {\n      cache = tilesLoading[_key];\n      if (validateCache()) {\n        renderer.abortTileLoading(cache.image, cache.info);\n      }\n    }\n    return this;\n  };\n  _proto._onLayerShowHide = function _onLayerShowHide(e) {\n    var _ref = e || {},\n      type = _ref.type,\n      target = _ref.target;\n    if (type === 'remove' && target) {\n      this.layers.splice(this.layers.indexOf(target), 1);\n      target._doRemove();\n      target.off(EVENTS$2, this._onLayerShowHide, this);\n      this._refresh();\n    } else if (type === 'setzindex') {\n      this._sortLayers();\n    } else if (type === 'forcereloadstart') {\n      this._removeChildTileCache(target);\n    }\n    this._renderLayers();\n    return this;\n  };\n  _proto._renderLayers = function _renderLayers() {\n    var renderer = this.getRenderer();\n    if (renderer) {\n      renderer.setToRedraw();\n    }\n    return this;\n  };\n  _proto._refresh = function _refresh() {\n    var _this6 = this;\n    var map = this.getMap();\n    this._groupChildren = [];\n    this.layerMap = {};\n    this.layers.forEach(function (layer) {\n      _this6.layerMap[layer.getId()] = layer;\n      if (layer.getChildLayer) {\n        _this6._groupChildren.push(layer);\n      }\n      if (!layer.getMap()) {\n        layer._bindMap(map);\n      }\n      layer.off(EVENTS$2, _this6._onLayerShowHide, _this6);\n      layer.on(EVENTS$2, _this6._onLayerShowHide, _this6);\n    });\n    return this;\n  };\n  _proto.isVisible = function isVisible() {\n    if (!_TileLayer.prototype.isVisible.call(this)) {\n      return false;\n    }\n    var children = this.layers;\n    for (var i = 0, l = children.length; i < l; i++) {\n      if (children[i].isVisible()) {\n        return true;\n      }\n    }\n    return false;\n  };\n  _proto._checkChildren = function _checkChildren() {\n    var _this7 = this;\n    var ids = {};\n    this.layers.forEach(function (layer) {\n      var layerId = layer.getId();\n      if (ids[layerId]) {\n        throw new Error(\"Duplicate child layer id (\" + layerId + \") in the GroupTileLayer (\" + _this7.getId() + \")\");\n      } else {\n        ids[layerId] = 1;\n      }\n    });\n  };\n  _proto._sortLayers = function _sortLayers() {\n    this.layers.sort(function (a, b) {\n      return a.options.zIndex - b.options.zIndex;\n    });\n  };\n  return GroupTileLayer;\n}(TileLayer);\nGroupTileLayer.registerJSONType('GroupTileLayer');\nGroupTileLayer.mergeOptions(options$x);\nvar options$y = {\n  crs: null,\n  uppercase: false,\n  detectRetina: false\n};\nvar defaultWmsParams = {\n  service: 'WMS',\n  request: 'GetMap',\n  layers: '',\n  styles: '',\n  format: 'image/jpeg',\n  transparent: false,\n  version: '1.1.1'\n};\nvar wmsExcludeParams;\nvar WMSTileLayer = function (_TileLayer) {\n  _inheritsLoose(WMSTileLayer, _TileLayer);\n  function WMSTileLayer(id, options) {\n    var _this;\n    _this = _TileLayer.call(this, id) || this;\n    if (!wmsExcludeParams) {\n      wmsExcludeParams = extend({}, _this.options);\n    }\n    _this.wmsParams = extend({}, defaultWmsParams);\n    _this.setOptions(options);\n    _this.setZIndex(options.zIndex);\n    if (!Browser$1.proxy) {\n      _this._optionsHook(options);\n    }\n    return _this;\n  }\n  var _proto = WMSTileLayer.prototype;\n  _proto._optionsHook = function _optionsHook(options) {\n    if (options === void 0) {\n      options = {};\n    }\n    for (var p in options) {\n      if (p === 'tileSize') {\n        this._tileSize = null;\n      }\n      if (!(p in wmsExcludeParams)) {\n        this.wmsParams[p] = options[p];\n      }\n    }\n    var tileSize = this.getTileSize();\n    this.wmsParams.width = tileSize.width;\n    this.wmsParams.height = tileSize.height;\n    this._wmsVersion = parseFloat(this.wmsParams.version);\n    return this;\n  };\n  _proto.onAdd = function onAdd() {\n    var dpr = this.getMap().getDevicePixelRatio();\n    var r = options$y.detectRetina ? dpr : 1;\n    this.wmsParams.width *= r;\n    this.wmsParams.height *= r;\n    var crs = this.options.crs || this.getMap().getProjection().code;\n    var projectionKey = this._wmsVersion >= 1.3 ? 'crs' : 'srs';\n    this.wmsParams[projectionKey] = crs;\n    _TileLayer.prototype.onAdd.call(this);\n  };\n  _proto.getTileUrl = function getTileUrl(x, y, z) {\n    var res = this.getSpatialReference().getResolution(z),\n      tileConfig = this._getTileConfig(),\n      tileExtent = tileConfig.getTilePrjExtent(x, y, res);\n    var max = tileExtent.getMax(),\n      min = tileExtent.getMin();\n    var bbox = (this._wmsVersion >= 1.3 && (this.wmsParams.crs === 'EPSG:4326' || this.wmsParams.crs === 'EPSG:4490') ? [min.y, min.x, max.y, max.x] : [min.x, min.y, max.x, max.y]).join(',');\n    var url = _TileLayer.prototype.getTileUrl.call(this, x, y, z);\n    return url + getParamString(this.wmsParams, url, this.options.uppercase) + (this.options.uppercase ? '&BBOX=' : '&bbox=') + bbox;\n  };\n  _proto.toJSON = function toJSON() {\n    return {\n      'type': 'WMSTileLayer',\n      'id': this.getId(),\n      'options': this.config()\n    };\n  };\n  WMSTileLayer.fromJSON = function fromJSON(layerJSON) {\n    if (!layerJSON || layerJSON['type'] !== 'WMSTileLayer') {\n      return null;\n    }\n    return new WMSTileLayer(layerJSON['id'], layerJSON['options']);\n  };\n  return WMSTileLayer;\n}(TileLayer);\nWMSTileLayer.registerJSONType('WMSTileLayer');\nWMSTileLayer.mergeOptions(options$y);\nfunction getParamString(obj, existingUrl, uppercase) {\n  var params = [];\n  for (var i in obj) {\n    params.push(encodeURIComponent(uppercase ? i.toUpperCase() : i) + '=' + encodeURIComponent(obj[i]));\n  }\n  return (!existingUrl || existingUrl.indexOf('?') === -1 ? '?' : '&') + params.join('&');\n}\nvar CanvasTileLayer = function (_TileLayer) {\n  _inheritsLoose(CanvasTileLayer, _TileLayer);\n  function CanvasTileLayer(id, options) {\n    var _this;\n    _this = _TileLayer.call(this, id, options) || this;\n    if (!_this.options.hasOwnProperty('forceRenderOnMoving')) {\n      _this.options['forceRenderOnMoving'] = false;\n    }\n    return _this;\n  }\n  var _proto = CanvasTileLayer.prototype;\n  _proto.drawTile = function drawTile() {};\n  _proto.toJSON = function toJSON() {\n    return {\n      'type': 'CanvasTileLayer',\n      'id': this.getId(),\n      'options': this.config()\n    };\n  };\n  CanvasTileLayer.fromJSON = function fromJSON(layerJSON) {\n    if (!layerJSON || layerJSON['type'] !== 'CanvasTileLayer') {\n      return null;\n    }\n    return new CanvasTileLayer(layerJSON['id'], layerJSON['options']);\n  };\n  return CanvasTileLayer;\n}(TileLayer);\nCanvasTileLayer.registerJSONType('CanvasTileLayer');\nfunction createGLContext(canvas, options) {\n  var attributes = {\n    'alpha': true,\n    'stencil': true,\n    'preserveDrawingBuffer': true,\n    'antialias': false\n  };\n  var names = ['webgl', 'experimental-webgl'];\n  var context = null;\n  for (var i = 0; i < names.length; ++i) {\n    try {\n      context = canvas.getContext(names[i], options || attributes);\n    } catch (e) {}\n    if (context) {\n      break;\n    }\n  }\n  return context;\n}\nfunction compileShader(gl, type, source) {\n  var shader = gl.createShader(type);\n  gl.shaderSource(shader, source);\n  gl.compileShader(shader);\n  var compiled = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\n  if (!compiled) {\n    var error = gl.getShaderInfoLog(shader);\n    gl.deleteShader(shader);\n    throw new Error('Failed to compile shader: ' + error);\n  }\n  return shader;\n}\nfunction createProgram(gl, vert, frag) {\n  var vertexShader = compileShader(gl, gl.VERTEX_SHADER, vert);\n  var fragmentShader = compileShader(gl, gl.FRAGMENT_SHADER, frag);\n  if (!vertexShader || !fragmentShader) {\n    return null;\n  }\n  var program = gl.createProgram();\n  if (!program) {\n    return null;\n  }\n  gl.attachShader(program, vertexShader);\n  gl.attachShader(program, fragmentShader);\n  gl.linkProgram(program);\n  return {\n    program: program,\n    vertexShader: vertexShader,\n    fragmentShader: fragmentShader\n  };\n}\nfunction enableVertexAttrib(gl, program, attributes) {\n  if (Array.isArray(attributes[0])) {\n    var FSIZE = Float32Array.BYTES_PER_ELEMENT;\n    var STRIDE = 0;\n    for (var i = 0; i < attributes.length; i++) {\n      STRIDE += attributes[i][1] || 0;\n    }\n    var offset = 0;\n    for (var _i = 0; _i < attributes.length; _i++) {\n      var attr = gl.getAttribLocation(program, attributes[_i][0]);\n      if (attr < 0) {\n        throw new Error('Failed to get the storage location of ' + attributes[_i][0]);\n      }\n      gl.vertexAttribPointer(attr, attributes[_i][1], gl[attributes[_i][2] || 'FLOAT'], false, FSIZE * STRIDE, FSIZE * offset);\n      offset += attributes[_i][1] || 0;\n      gl.enableVertexAttribArray(attr);\n    }\n  } else {\n    var _attr = gl.getAttribLocation(program, attributes[0]);\n    gl.vertexAttribPointer(_attr, attributes[1], gl[attributes[2] || 'FLOAT'], false, 0, 0);\n    gl.enableVertexAttribArray(_attr);\n  }\n}\nvar DEPTH_FUNC_CONSTANTS = {\n  'never': 0x0200,\n  '<': 0x0201,\n  '=': 0x0202,\n  '<=': 0x0203,\n  '>': 0x0204,\n  '!=': 0x0205,\n  '>=': 0x0206,\n  'always': 0x0207\n};\nfunction getDepthFunc(v) {\n  return DEPTH_FUNC_CONSTANTS[v];\n}\nvar DEFAULT_BASE_COLOR = [1, 1, 1, 1];\nvar shaders = {\n  'vertexShader': \"\\n        attribute vec2 a_position;\\n\\n        attribute vec2 a_texCoord;\\n\\n        uniform mat4 u_matrix;\\n\\n        varying vec2 v_texCoord;\\n\\n        void main() {\\n            gl_Position = u_matrix * vec4(a_position, 0., 1.);\\n\\n            v_texCoord = a_texCoord;\\n        }\\n    \",\n  'fragmentShader': \"\\n        precision mediump float;\\n\\n        uniform sampler2D u_image;\\n\\n        uniform float u_opacity;\\n        uniform float u_debug_line;\\n        uniform vec4 u_base_color;\\n        uniform float u_alpha_test;\\n        varying vec2 v_texCoord;\\n\\n        void main() {\\n            if (u_debug_line == 1.) {\\n                gl_FragColor = vec4(0., 1., 0., 1.);\\n            } else {\\n                gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;\\n            }\\n            gl_FragColor *= u_base_color;\\n            if (gl_FragColor.a < u_alpha_test) {\\n                discard;\\n            }\\n        }\\n    \"\n};\nvar v2 = [0, 0],\n  v3 = [0, 0, 0],\n  arr16 = new Array(16);\nvar DEBUG_POINT = new Point(20, 20);\nvar ImageGLRenderable = function ImageGLRenderable(Base) {\n  var renderable = function (_Base) {\n    _inheritsLoose(renderable, _Base);\n    function renderable() {\n      return _Base.apply(this, arguments) || this;\n    }\n    var _proto = renderable.prototype;\n    _proto.drawGLImage = function drawGLImage(image, x, y, w, h, scale$$1, opacity, debug, baseColor) {\n      if (this.gl.program !== this.program) {\n        this.useProgram(this.program);\n      }\n      var gl = this.gl;\n      this.loadTexture(image);\n      var inGroup = this.canvas.gl && this.canvas.gl.wrap;\n      if (inGroup) {\n        var layerOpacity = this.layer && this.layer.options['opacity'];\n        if (isNil(layerOpacity)) {\n          layerOpacity = 1;\n        }\n        opacity *= layerOpacity;\n      }\n      v3[0] = x || 0;\n      v3[1] = y || 0;\n      v3[2] = 0;\n      var layer = this.layer;\n      if (layer) {\n        var altitude = layer.options.altitude;\n        var altIsNumber = isNumber(altitude);\n        if (!altIsNumber) {\n          this._layerAlt = 0;\n        }\n        if (this._layerAltitude !== altitude && altIsNumber) {\n          var map = layer.getMap();\n          if (map) {\n            var z = map.altitudeToPoint(altitude, map.getGLRes());\n            this._layerAltitude = altitude;\n            this._layerAlt = z;\n          }\n        }\n      }\n      v3[2] = this._layerAlt || 0;\n      var uMatrix = identity(arr16);\n      translate(uMatrix, uMatrix, v3);\n      scale(uMatrix, uMatrix, [scale$$1, scale$$1, 1]);\n      multiply(uMatrix, this.getMap().projViewMatrix, uMatrix);\n      gl.uniformMatrix4fv(this.program['u_matrix'], false, uMatrix);\n      gl.uniform1f(this.program['u_opacity'], opacity);\n      gl.uniform1f(this.program['u_debug_line'], 0);\n      gl.uniform4fv(this.program['u_base_color'], baseColor || DEFAULT_BASE_COLOR);\n      gl.uniform1f(this.program['u_alpha_test'], this.layer.options['alphaTest'] || 0);\n      var glBuffer = image.glBuffer;\n      if (glBuffer && (glBuffer.width !== w || glBuffer.height !== h)) {\n        this.saveImageBuffer(glBuffer);\n        delete image.glBuffer;\n      }\n      if (!image.glBuffer) {\n        image.glBuffer = this.bufferTileData(0, 0, w, h);\n      } else {\n        gl.bindBuffer(gl.ARRAY_BUFFER, glBuffer);\n      }\n      v2[0] = 'a_position';\n      v2[1] = 2;\n      v2[2] = image.glBuffer.type;\n      this.enableVertexAttrib(v2);\n      gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n      if (debug) {\n        this.drawDebug(uMatrix, 0, 0, w, h, debug);\n      }\n    };\n    _proto.drawDebug = function drawDebug(uMatrix, x, y, w, h, debugInfo) {\n      var gl = this.gl;\n      gl.disable(gl.DEPTH_TEST);\n      gl.bindBuffer(gl.ARRAY_BUFFER, this._debugBuffer);\n      this.enableVertexAttrib(['a_position', 2, 'FLOAT']);\n      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([x, y, x + w, y, x + w, y - h, x, y - h, x, y]), gl.DYNAMIC_DRAW);\n      gl.uniformMatrix4fv(this.program['u_matrix'], false, uMatrix);\n      gl.uniform1f(this.program['u_opacity'], 1);\n      gl.uniform1f(this.program['u_debug_line'], 1);\n      gl.uniform4fv(this.program['u_base_color'], DEFAULT_BASE_COLOR);\n      gl.uniform1f(this.program['u_alpha_test'], this.layer.options['alphaTest'] || 0);\n      gl.drawArrays(gl.LINE_STRIP, 0, 5);\n      var canvas = this._debugInfoCanvas;\n      if (!canvas) {\n        var dpr = this.getMap().getDevicePixelRatio() > 1 ? 2 : 1;\n        canvas = this._debugInfoCanvas = document.createElement('canvas');\n        canvas.width = 256 * dpr;\n        canvas.height = 32 * dpr;\n        var _ctx = canvas.getContext('2d');\n        _ctx.font = '20px monospace';\n        _ctx.scale(dpr, dpr);\n      }\n      var ctx = canvas.getContext('2d');\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n      var color = this.layer.options['debugOutline'];\n      Canvas.fillText(ctx, debugInfo, DEBUG_POINT, color);\n      this.loadTexture(canvas);\n      gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, canvas);\n      w = 256;\n      var x1 = x;\n      var x2 = x + w;\n      var y1 = y - h + 32;\n      var y2 = y - h;\n      gl.bufferData(gl.ARRAY_BUFFER, this.set8(x1, y1, x1, y2, x2, y1, x2, y2), gl.DYNAMIC_DRAW);\n      gl.uniform1f(this.program['u_debug_line'], 0);\n      gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n      gl.enable(gl.DEPTH_TEST);\n    };\n    _proto.bufferTileData = function bufferTileData(x, y, w, h, buffer) {\n      var x1 = x;\n      var x2 = x + w;\n      var y1 = y;\n      var y2 = y - h;\n      var data;\n      if (isInteger(x1) && isInteger(x2) && isInteger(y1) && isInteger(y2)) {\n        data = this.set8Int(x1, y1, x1, y2, x2, y1, x2, y2);\n      } else {\n        data = this.set8(x1, y1, x1, y2, x2, y1, x2, y2);\n      }\n      var glBuffer = this.loadImageBuffer(data, buffer);\n      glBuffer.width = w;\n      glBuffer.height = h;\n      glBuffer.type = data instanceof Int16Array ? 'SHORT' : 'FLOAT';\n      return glBuffer;\n    };\n    _proto.drawTinImage = function drawTinImage(image, vertices, texCoords, indices, opacity) {\n      var gl = this.gl;\n      this.loadTexture(image);\n      gl.uniformMatrix4fv(this.program['u_matrix'], false, this.getMap().projViewMatrix);\n      gl.uniform1f(this.program['u_opacity'], opacity);\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.posBuffer);\n      this.enableVertexAttrib(['a_position', 3]);\n      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.DYNAMIC_DRAW);\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.texBuffer);\n      this.enableVertexAttrib(['a_texCoord', 2]);\n      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(texCoords), gl.DYNAMIC_DRAW);\n      gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(indices), gl.DYNAMIC_DRAW);\n      gl.drawElements(gl.TRIANGLES, indices.length, gl.UNSIGNED_SHORT, 0);\n    };\n    _proto.createCanvas2 = function createCanvas2() {\n      this.canvas2 = Canvas.createCanvas(this.canvas.width, this.canvas.height);\n    };\n    _proto.createGLContext = function createGLContext$$1() {\n      if (this.canvas.gl && this.canvas.gl.wrap) {\n        this.gl = this.canvas.gl.wrap();\n      } else {\n        this.gl = createGLContext(this.canvas2 || this.canvas, this.layer.options['glOptions']);\n      }\n      var gl = this.gl;\n      gl.clearColor(0.0, 0.0, 0.0, 0.0);\n      gl.enable(gl.DEPTH_TEST);\n      gl.enable(gl.STENCIL_TEST);\n      gl.enable(gl.BLEND);\n      gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n      this.program = this.createProgram(shaders['vertexShader'], this.layer.options['fragmentShader'] || shaders['fragmentShader']);\n      this._debugBuffer = this.createBuffer();\n      this.useProgram(this.program);\n      this.texBuffer = this.createBuffer();\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.texBuffer);\n      this.enableVertexAttrib(['a_texCoord', 2, 'UNSIGNED_BYTE']);\n      gl.bufferData(gl.ARRAY_BUFFER, new Uint8Array([0.0, 0.0, 0.0, 1.0, 1.0, 0.0, 1.0, 1.0]), gl.STATIC_DRAW);\n      this.enableSampler('u_image');\n      gl.activeTexture(gl['TEXTURE0']);\n      gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, true);\n    };\n    _proto.resizeGLCanvas = function resizeGLCanvas() {\n      if (this.gl) {\n        this.gl.viewport(0, 0, this.canvas.width, this.canvas.height);\n      }\n      if (!this.canvas2) {\n        return;\n      }\n      if (this.canvas2.width !== this.canvas.width || this.canvas2.height !== this.canvas.height) {\n        this.canvas2.width = this.canvas.width;\n        this.canvas2.height = this.canvas.height;\n      }\n    };\n    _proto.clearGLCanvas = function clearGLCanvas() {\n      if (this.gl) {\n        this.gl.clearStencil(0xFF);\n        this.gl.clear(this.gl.COLOR_BUFFER_BIT | this.gl.STENCIL_BUFFER_BIT);\n      }\n      if (!this.gl.wrap) {\n        this.gl.clear(this.gl.DEPTH_BUFFER_BIT);\n      }\n    };\n    _proto.disposeImage = function disposeImage(image) {\n      if (!image) {\n        return;\n      }\n      if (image.texture) {\n        this.saveTexture(image.texture);\n      }\n      if (image.glBuffer) {\n        this.saveImageBuffer(image.glBuffer);\n      }\n      delete image.texture;\n      delete image.glBuffer;\n    };\n    _proto._createTexture = function _createTexture(image) {\n      var gl = this.gl;\n      var texture = this.getTexture() || gl.createTexture();\n      gl.bindTexture(gl.TEXTURE_2D, texture);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n      if (!isPowerOfTwo(image.width) || !isPowerOfTwo(image.height)) {\n        image = resize(image);\n      }\n      gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, image);\n      gl.generateMipmap(gl.TEXTURE_2D);\n      return texture;\n    };\n    _proto.getTexture = function getTexture() {\n      if (!this._textures) {\n        this._textures = [];\n      }\n      var textures = this._textures;\n      return textures && textures.length > 0 ? textures.pop() : null;\n    };\n    _proto.saveTexture = function saveTexture(texture) {\n      this._textures.push(texture);\n    };\n    _proto.loadTexture = function loadTexture(image) {\n      var map = this.getMap();\n      var gl = this.gl;\n      var texture = image.texture;\n      if (!texture) {\n        texture = this._createTexture(image);\n        image.texture = texture;\n      }\n      gl.bindTexture(gl.TEXTURE_2D, texture);\n      if (map.getRenderer().isViewChanged()) {\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_LINEAR);\n      } else {\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n      }\n      return texture;\n    };\n    _proto.getImageBuffer = function getImageBuffer() {\n      if (!this._imageBuffers) {\n        this._imageBuffers = [];\n      }\n      var imageBuffers = this._imageBuffers;\n      return imageBuffers && imageBuffers.length > 0 ? imageBuffers.pop() : null;\n    };\n    _proto.saveImageBuffer = function saveImageBuffer(buffer) {\n      if (!this._imageBuffers) {\n        this._imageBuffers = [];\n      }\n      this._imageBuffers.push(buffer);\n    };\n    _proto.loadImageBuffer = function loadImageBuffer(data, glBuffer) {\n      var gl = this.gl;\n      var buffer = glBuffer || this.createImageBuffer();\n      gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n      gl.bufferData(gl.ARRAY_BUFFER, data, gl.STATIC_DRAW);\n      return buffer;\n    };\n    _proto.createImageBuffer = function createImageBuffer() {\n      return this.getImageBuffer() || this.createBuffer();\n    };\n    _proto.removeGLCanvas = function removeGLCanvas() {\n      var gl = this.gl;\n      if (!gl) {\n        return;\n      }\n      if (this._debugBuffer) {\n        gl.deleteBuffer(this._debugBuffer);\n        delete this._debugBuffer;\n      }\n      if (this._buffers) {\n        this._buffers.forEach(function (b) {\n          gl.deleteBuffer(b);\n        });\n        delete this._buffers;\n      }\n      if (this._textures) {\n        this._textures.forEach(function (t) {\n          return gl.deleteTexture(t);\n        });\n        delete this._textures;\n      }\n      if (this._debugInfoCanvas) {\n        var texture = this._debugInfoCanvas.texture;\n        if (texture) {\n          gl.deleteTexture(texture);\n        }\n        delete this._debugInfoCanvas.texture;\n        delete this._debugInfoCanvas;\n      }\n      var program = gl.program;\n      gl.deleteShader(program.fragmentShader);\n      gl.deleteShader(program.vertexShader);\n      gl.deleteProgram(program);\n      delete this.gl;\n      delete this.canvas2;\n    };\n    _proto.createBuffer = function createBuffer() {\n      var gl = this.gl;\n      var buffer = gl.createBuffer();\n      if (!buffer) {\n        throw new Error('Failed to create the buffer object');\n      }\n      if (!this._buffers) {\n        this._buffers = [];\n      }\n      this._buffers.push(buffer);\n      return buffer;\n    };\n    _proto.enableVertexAttrib = function enableVertexAttrib$$1(attributes) {\n      enableVertexAttrib(this.gl, this.gl.program, attributes);\n    };\n    _proto.createProgram = function createProgram$$1(vert, frag) {\n      var gl = this.gl;\n      var _createProgram2 = createProgram(gl, vert, frag),\n        program = _createProgram2.program,\n        vertexShader = _createProgram2.vertexShader,\n        fragmentShader = _createProgram2.fragmentShader;\n      var numUniforms = gl.getProgramParameter(program, 0x8B86);\n      var activeUniforms = [];\n      for (var i = 0; i < numUniforms; ++i) {\n        var info = gl.getActiveUniform(program, i);\n        activeUniforms.push(info.name);\n      }\n      program.vertexShader = vertexShader;\n      program.fragmentShader = fragmentShader;\n      this._initUniforms(program, activeUniforms);\n      return program;\n    };\n    _proto.useProgram = function useProgram(program) {\n      var gl = this.gl;\n      gl.useProgram(program);\n      gl.program = program;\n      return this;\n    };\n    _proto.enableSampler = function enableSampler(sampler, texIdx) {\n      var gl = this.gl;\n      var uSampler = this._getUniform(gl.program, sampler);\n      if (!texIdx) {\n        texIdx = 0;\n      }\n      gl.uniform1i(uSampler, texIdx);\n      return uSampler;\n    };\n    _proto._initUniforms = function _initUniforms(program, uniforms) {\n      for (var i = 0; i < uniforms.length; i++) {\n        var name = uniforms[i];\n        var uniform = uniforms[i];\n        var b = name.indexOf('[');\n        if (b >= 0) {\n          name = name.substring(0, b);\n          if (!IS_NODE) {\n            uniform = uniform.substring(0, b);\n          }\n        }\n        program[name] = this._getUniform(program, uniform);\n      }\n    };\n    _proto._getUniform = function _getUniform(program, uniformName) {\n      var gl = this.gl;\n      var uniform = gl.getUniformLocation(program, uniformName);\n      if (!uniform) {\n        throw new Error('Failed to get the storage location of ' + uniformName);\n      }\n      return uniform;\n    };\n    return renderable;\n  }(Base);\n  extend(renderable.prototype, {\n    set8: function () {\n      var out = Browser$1.ie9 ? null : new Float32Array(8);\n      return function (a0, a1, a2, a3, a4, a5, a6, a7) {\n        out[0] = a0;\n        out[1] = a1;\n        out[2] = a2;\n        out[3] = a3;\n        out[4] = a4;\n        out[5] = a5;\n        out[6] = a6;\n        out[7] = a7;\n        return out;\n      };\n    }(),\n    set8Int: function () {\n      var out = Browser$1.ie9 ? null : new Int16Array(8);\n      return function (a0, a1, a2, a3, a4, a5, a6, a7) {\n        out[0] = a0;\n        out[1] = a1;\n        out[2] = a2;\n        out[3] = a3;\n        out[4] = a4;\n        out[5] = a5;\n        out[6] = a6;\n        out[7] = a7;\n        return out;\n      };\n    }()\n  });\n  return renderable;\n};\nfunction resize(image) {\n  if (isPowerOfTwo(image.width) && isPowerOfTwo(image.height)) {\n    return image;\n  }\n  var width = image.width;\n  var height = image.height;\n  if (!isPowerOfTwo(width)) {\n    width = floorPowerOfTwo(width);\n  }\n  if (!isPowerOfTwo(height)) {\n    height = floorPowerOfTwo(height);\n  }\n  var canvas = document.createElement('canvas');\n  canvas.width = width;\n  canvas.height = height;\n  canvas.getContext('2d').drawImage(image, 0, 0, width, height);\n  return canvas;\n}\nfunction isPowerOfTwo(value) {\n  return (value & value - 1) === 0 && value !== 0;\n}\nfunction floorPowerOfTwo(value) {\n  return Math.pow(2, Math.floor(Math.log(value) / Math.LN2));\n}\nvar options$z = {\n  renderer: Browser$1.webgl ? 'gl' : 'canvas',\n  crossOrigin: null,\n  alphaTest: 0,\n  depthMask: true,\n  depthFunc: '<='\n};\nvar TEMP_POINT$3 = new Point(0, 0);\nvar ImageLayer = function (_Layer) {\n  _inheritsLoose(ImageLayer, _Layer);\n  function ImageLayer(id, images, options) {\n    var _this;\n    if (images && !Array.isArray(images) && !images.url) {\n      options = images;\n      images = null;\n    }\n    _this = _Layer.call(this, id, options) || this;\n    _this._images = images;\n    return _this;\n  }\n  var _proto = ImageLayer.prototype;\n  _proto.onAdd = function onAdd() {\n    this._prepareImages(this._images);\n  };\n  _proto.setImages = function setImages(images) {\n    this._images = images;\n    this._prepareImages(images);\n    return this;\n  };\n  _proto.getImages = function getImages() {\n    return this._images;\n  };\n  _proto._prepareImages = function _prepareImages(images) {\n    images = images || [];\n    if (!Array.isArray(images)) {\n      images = [images];\n    }\n    var map = this.getMap();\n    var glRes = map.getGLRes();\n    this._imageData = images.map(function (img) {\n      var extent = new Extent(img.extent);\n      return extend({}, img, {\n        extent: extent,\n        extent2d: extent.convertTo(function (c) {\n          return map.coordToPointAtRes(c, glRes);\n        })\n      });\n    });\n    this._images = images;\n    var renderer = this.getRenderer();\n    if (renderer) {\n      renderer.refreshImages();\n    }\n  };\n  return ImageLayer;\n}(Layer);\nImageLayer.mergeOptions(options$z);\nvar EMPTY_ARRAY$1 = [];\nvar ImageLayerCanvasRenderer = function (_CanvasRenderer) {\n  _inheritsLoose(ImageLayerCanvasRenderer, _CanvasRenderer);\n  function ImageLayerCanvasRenderer() {\n    return _CanvasRenderer.apply(this, arguments) || this;\n  }\n  var _proto2 = ImageLayerCanvasRenderer.prototype;\n  _proto2.isDrawable = function isDrawable() {\n    if (this.getMap().getPitch()) {\n      if (console) {\n        console.warn('ImageLayer with canvas renderer can\\'t be pitched, use gl renderer (\\'renderer\\' : \\'gl\\') instead.');\n      }\n      return false;\n    }\n    return true;\n  };\n  _proto2.checkResources = function checkResources() {\n    var _this2 = this;\n    if (this._imageLoaded) {\n      return EMPTY_ARRAY$1;\n    }\n    var layer = this.layer;\n    var urls = layer._imageData.map(function (img) {\n      return [img.url, null, null];\n    });\n    if (this.resources) {\n      var unloaded = [];\n      var resources = new ResourceCache();\n      urls.forEach(function (url) {\n        if (_this2.resources.isResourceLoaded(url)) {\n          var img = _this2.resources.getImage(url);\n          resources.addResource(url, img);\n        } else {\n          unloaded.push(url);\n        }\n      });\n      this.resources.forEach(function (url, res) {\n        if (!resources.isResourceLoaded(url)) {\n          _this2.retireImage(res.image);\n        }\n      });\n      this.resources = resources;\n      urls = unloaded;\n    }\n    this._imageLoaded = true;\n    return urls;\n  };\n  _proto2.retireImage = function retireImage(image) {\n    if (image.close) {\n      image.close();\n    }\n  };\n  _proto2.refreshImages = function refreshImages() {\n    this._imageLoaded = false;\n    this.setToRedraw();\n  };\n  _proto2.draw = function draw(timestamp, context) {\n    if (!this.isDrawable()) {\n      return;\n    }\n    this.prepareCanvas();\n    this._painted = false;\n    this._drawImages(timestamp, context);\n    this.completeRender();\n  };\n  _proto2._drawImages = function _drawImages() {\n    var imgData = this.layer._imageData;\n    var map = this.getMap();\n    var mapExtent = map._get2DExtentAtRes(map.getGLRes());\n    if (imgData && imgData.length) {\n      for (var i = 0; i < imgData.length; i++) {\n        var extent = imgData[i].extent2d;\n        var image = this.resources && this.resources.getImage(imgData[i].url);\n        if (image && mapExtent.intersects(extent)) {\n          this._painted = true;\n          this._drawImage(image, extent, imgData[i].opacity || 1);\n        }\n      }\n    }\n  };\n  _proto2._drawImage = function _drawImage(image, extent, opacity) {\n    var globalAlpha = 0;\n    var ctx = this.context;\n    if (opacity < 1) {\n      globalAlpha = ctx.globalAlpha;\n      ctx.globalAlpha = opacity;\n    }\n    var map = this.getMap();\n    var nw = TEMP_POINT$3.set(extent.xmin, extent.ymax);\n    var point = map._pointAtResToContainerPoint(nw, map.getGLRes());\n    var x = point.x,\n      y = point.y;\n    var bearing = map.getBearing();\n    if (bearing) {\n      ctx.save();\n      ctx.translate(x, y);\n      if (bearing) {\n        ctx.rotate(-bearing * Math.PI / 180);\n      }\n      x = y = 0;\n    }\n    var scale = map.getGLScale();\n    ctx.drawImage(image, x, y, extent.getWidth() / scale, extent.getHeight() / scale);\n    if (bearing) {\n      ctx.restore();\n    }\n    if (globalAlpha) {\n      ctx.globalAlpha = globalAlpha;\n    }\n  };\n  _proto2.drawOnInteracting = function drawOnInteracting() {\n    this.draw();\n  };\n  return ImageLayerCanvasRenderer;\n}(CanvasRenderer);\nvar ImageLayerGLRenderer = function (_ImageGLRenderable) {\n  _inheritsLoose(ImageLayerGLRenderer, _ImageGLRenderable);\n  function ImageLayerGLRenderer() {\n    return _ImageGLRenderable.apply(this, arguments) || this;\n  }\n  var _proto3 = ImageLayerGLRenderer.prototype;\n  _proto3.drawOnInteracting = function drawOnInteracting(event, timestamp, context) {\n    this.draw(timestamp, context);\n  };\n  _proto3._prepareGLContext = function _prepareGLContext() {\n    var gl = this.gl;\n    if (gl) {\n      gl.disable(gl.STENCIL_TEST);\n      gl.disable(gl.POLYGON_OFFSET_FILL);\n      gl.enable(gl.DEPTH_TEST);\n      gl.enable(gl.BLEND);\n      gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n      gl.depthFunc(getDepthFunc(this.layer.options['depthFunc']));\n      var depthMask = isNil(this.layer.options['depthMask']) || !!this.layer.options['depthMask'];\n      gl.depthMask(depthMask);\n    }\n  };\n  _proto3._drawImages = function _drawImages(timestamp, parentContext) {\n    var gl = this.gl;\n    if (parentContext && parentContext.renderTarget) {\n      var fbo = parentContext.renderTarget.fbo;\n      if (fbo) {\n        var framebuffer = parentContext.renderTarget.getFramebuffer(fbo);\n        gl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer);\n      }\n    }\n    this._prepareGLContext();\n    _ImageGLRenderable.prototype._drawImages.call(this);\n    if (parentContext && parentContext.renderTarget) {\n      var _fbo = parentContext.renderTarget.fbo;\n      if (_fbo) {\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n      }\n    }\n  };\n  _proto3.isDrawable = function isDrawable() {\n    return true;\n  };\n  _proto3._drawImage = function _drawImage(image, extent, opacity) {\n    this.drawGLImage(image, extent.xmin, extent.ymax, extent.getWidth(), extent.getHeight(), 1, opacity);\n  };\n  _proto3.createContext = function createContext() {\n    this.createGLContext();\n  };\n  _proto3.resizeCanvas = function resizeCanvas(canvasSize) {\n    if (!this.canvas) {\n      return;\n    }\n    _ImageGLRenderable.prototype.resizeCanvas.call(this, canvasSize);\n    this.resizeGLCanvas();\n  };\n  _proto3.clearCanvas = function clearCanvas() {\n    if (!this.canvas) {\n      return;\n    }\n    _ImageGLRenderable.prototype.clearCanvas.call(this);\n    this.clearGLCanvas();\n  };\n  _proto3.retireImage = function retireImage(image) {\n    if (image.close) {\n      image.close();\n    }\n    this.disposeImage(image);\n  };\n  _proto3.onRemove = function onRemove() {\n    this.removeGLCanvas();\n    _ImageGLRenderable.prototype.onRemove.call(this);\n  };\n  return ImageLayerGLRenderer;\n}(ImageGLRenderable(ImageLayerCanvasRenderer));\nImageLayer.registerRenderer('canvas', ImageLayerCanvasRenderer);\nImageLayer.registerRenderer('gl', ImageLayerGLRenderer);\nvar CanvasLayerRenderer = function (_CanvasRenderer) {\n  _inheritsLoose(CanvasLayerRenderer, _CanvasRenderer);\n  function CanvasLayerRenderer() {\n    return _CanvasRenderer.apply(this, arguments) || this;\n  }\n  var _proto = CanvasLayerRenderer.prototype;\n  _proto.getPrepareParams = function getPrepareParams() {\n    return [];\n  };\n  _proto.getDrawParams = function getDrawParams() {\n    return [];\n  };\n  _proto.onCanvasCreate = function onCanvasCreate() {\n    if (this.canvas && this.layer.options['doubleBuffer']) {\n      this.buffer = Canvas.createCanvas(this.canvas.width, this.canvas.height, this.getMap().CanvasClass);\n    }\n  };\n  _proto.needToRedraw = function needToRedraw() {\n    if (this.layer.options['animation']) {\n      return true;\n    }\n    var map = this.getMap();\n    if (map.isInteracting() && !this.layer.drawOnInteracting) {\n      return false;\n    }\n    return _CanvasRenderer.prototype.needToRedraw.call(this);\n  };\n  _proto.draw = function draw() {\n    this.prepareCanvas();\n    this.prepareDrawContext();\n    this._drawLayer.apply(this, arguments);\n  };\n  _proto.drawOnInteracting = function drawOnInteracting() {\n    this._drawLayerOnInteracting.apply(this, arguments);\n  };\n  _proto.getCanvasImage = function getCanvasImage() {\n    var canvasImg = _CanvasRenderer.prototype.getCanvasImage.call(this);\n    if (canvasImg && canvasImg.image && this.layer.options['doubleBuffer']) {\n      var canvas = canvasImg.image;\n      if (this.buffer.width !== canvas.width || this.buffer.height !== canvas.height) {\n        this.buffer.width = canvas.width;\n        this.buffer.height = canvas.height;\n      }\n      var bufferContext = this.buffer.getContext('2d');\n      var prevent = this.layer.doubleBuffer(bufferContext, this.context);\n      if (prevent === undefined || prevent) {\n        Canvas.image(bufferContext, canvas, 0, 0);\n        canvasImg.image = this.buffer;\n      }\n    }\n    return canvasImg;\n  };\n  _proto.remove = function remove() {\n    delete this._drawContext;\n    return _CanvasRenderer.prototype.remove.call(this);\n  };\n  _proto.onZoomStart = function onZoomStart(param) {\n    this.layer.onZoomStart(param);\n    _CanvasRenderer.prototype.onZoomStart.call(this, param);\n  };\n  _proto.onZooming = function onZooming(param) {\n    this.layer.onZooming(param);\n    _CanvasRenderer.prototype.onZooming.call(this, param);\n  };\n  _proto.onZoomEnd = function onZoomEnd(param) {\n    this.layer.onZoomEnd(param);\n    _CanvasRenderer.prototype.onZoomEnd.call(this, param);\n  };\n  _proto.onMoveStart = function onMoveStart(param) {\n    this.layer.onMoveStart(param);\n    _CanvasRenderer.prototype.onMoveStart.call(this, param);\n  };\n  _proto.onMoving = function onMoving(param) {\n    this.layer.onMoving(param);\n    _CanvasRenderer.prototype.onMoving.call(this, param);\n  };\n  _proto.onMoveEnd = function onMoveEnd(param) {\n    this.layer.onMoveEnd(param);\n    _CanvasRenderer.prototype.onMoveEnd.call(this, param);\n  };\n  _proto.onResize = function onResize(param) {\n    this.layer.onResize(param);\n    _CanvasRenderer.prototype.onResize.call(this, param);\n  };\n  _proto.prepareDrawContext = function prepareDrawContext() {\n    if (!this._predrawed) {\n      var params = ensureParams(this.getPrepareParams());\n      this._drawContext = this.layer.prepareToDraw.apply(this.layer, [this.context].concat(params));\n      if (!this._drawContext) {\n        this._drawContext = [];\n      }\n      if (!Array.isArray(this._drawContext)) {\n        this._drawContext = [this._drawContext];\n      }\n      this._predrawed = true;\n    }\n  };\n  _proto._prepareDrawParams = function _prepareDrawParams() {\n    if (!this.getMap()) {\n      return null;\n    }\n    var view = this.getViewExtent();\n    if (view['maskExtent'] && !view['extent'].intersects(view['maskExtent'])) {\n      this.completeRender();\n      return null;\n    }\n    var args = [this.context, view];\n    var params = ensureParams(this.getDrawParams());\n    args.push.apply(args, params);\n    args.push.apply(args, this._drawContext);\n    return args;\n  };\n  _proto._drawLayer = function _drawLayer() {\n    var params = this._prepareDrawParams();\n    if (!params) {\n      return;\n    }\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    this.layer.draw.apply(this.layer, params.concat(args));\n    this.completeRender();\n  };\n  _proto._drawLayerOnInteracting = function _drawLayerOnInteracting() {\n    if (!this.layer.drawOnInteracting) {\n      return;\n    }\n    var params = this._prepareDrawParams();\n    if (!params) {\n      return;\n    }\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n    this.layer.drawOnInteracting.apply(this.layer, params.concat(args));\n    this.completeRender();\n  };\n  return CanvasLayerRenderer;\n}(CanvasRenderer);\nfunction ensureParams(params) {\n  if (!params) {\n    params = [];\n  }\n  if (!Array.isArray(params)) {\n    params = [params];\n  }\n  return params;\n}\nvar options$A = {\n  'doubleBuffer': false,\n  'animation': false\n};\nvar CanvasLayer = function (_Layer) {\n  _inheritsLoose(CanvasLayer, _Layer);\n  function CanvasLayer() {\n    return _Layer.apply(this, arguments) || this;\n  }\n  var _proto = CanvasLayer.prototype;\n  _proto.isCanvasRender = function isCanvasRender() {\n    return true;\n  };\n  _proto.prepareToDraw = function prepareToDraw() {};\n  _proto.draw = function draw() {};\n  _proto.redraw = function redraw() {\n    if (this._getRenderer()) {\n      this._getRenderer().setToRedraw();\n    }\n    return this;\n  };\n  _proto.play = function play() {\n    this.config('animation', true);\n    return this;\n  };\n  _proto.pause = function pause() {\n    this.config('animation', false);\n    return this;\n  };\n  _proto.isPlaying = function isPlaying() {\n    return this.options['animation'];\n  };\n  _proto.clearCanvas = function clearCanvas() {\n    if (this._getRenderer()) {\n      this._getRenderer().clearCanvas();\n    }\n    return this;\n  };\n  _proto.requestMapToRender = function requestMapToRender() {\n    if (this._getRenderer()) {\n      this._getRenderer().requestMapToRender();\n    }\n    return this;\n  };\n  _proto.completeRender = function completeRender() {\n    if (this._getRenderer()) {\n      this._getRenderer().completeRender();\n    }\n    return this;\n  };\n  _proto.onCanvasCreate = function onCanvasCreate() {\n    return this;\n  };\n  _proto.onZoomStart = function onZoomStart() {};\n  _proto.onZooming = function onZooming() {};\n  _proto.onZoomEnd = function onZoomEnd() {};\n  _proto.onMoveStart = function onMoveStart() {};\n  _proto.onMoving = function onMoving() {};\n  _proto.onMoveEnd = function onMoveEnd() {};\n  _proto.onResize = function onResize() {};\n  _proto.doubleBuffer = function doubleBuffer(bufferContext) {\n    bufferContext.clearRect(0, 0, bufferContext.canvas.width, bufferContext.canvas.height);\n    return this;\n  };\n  return CanvasLayer;\n}(Layer);\nCanvasLayer.mergeOptions(options$A);\nCanvasLayer.registerRenderer('canvas', CanvasLayerRenderer);\nvar TEMP_POINT$4 = new Point(0, 0);\nvar options$B = {\n  'animation': true\n};\nvar ParticleLayer = function (_CanvasLayer) {\n  _inheritsLoose(ParticleLayer, _CanvasLayer);\n  function ParticleLayer() {\n    return _CanvasLayer.apply(this, arguments) || this;\n  }\n  var _proto = ParticleLayer.prototype;\n  _proto.getParticles = function getParticles() {};\n  _proto.draw = function draw(context, view) {\n    var points = this.getParticles(now());\n    if (!points || points.length === 0) {\n      var renderer = this._getRenderer();\n      if (renderer) {\n        this._getRenderer()._shouldClear = true;\n      }\n      return;\n    }\n    var map = this.getMap();\n    var extent = view.extent;\n    if (view.maskExtent) {\n      extent = view.extent.intersection(view.maskExtent);\n    }\n    extent = extent.convertTo(function (c) {\n      return map._pointToContainerPoint(c, undefined, 0, TEMP_POINT$4);\n    });\n    var e = 2 * Math.PI;\n    for (var i = 0, l = points.length; i < l; i++) {\n      var pos = points[i].point;\n      if (extent.contains(pos)) {\n        var color = points[i].color || this.options['lineColor'] || '#fff',\n          r = points[i].r;\n        if (context.fillStyle !== color) {\n          context.fillStyle = color;\n        }\n        if (r <= 2) {\n          context.fillRect(pos.x - r / 2, pos.y - r / 2, r, r);\n        } else {\n          context.beginPath();\n          context.arc(pos.x, pos.y, r / 2, 0, e);\n          context.fill();\n        }\n      }\n    }\n    this._fillCanvas(context);\n  };\n  _proto._fillCanvas = function _fillCanvas(context) {\n    var g = context.globalCompositeOperation;\n    context.globalCompositeOperation = 'destination-out';\n    var trail = this.options['trail'] || 30;\n    context.fillStyle = 'rgba(0, 0, 0, ' + 1 / trail + ')';\n    context.fillRect(0, 0, context.canvas.width, context.canvas.height);\n    context.globalCompositeOperation = g;\n  };\n  return ParticleLayer;\n}(CanvasLayer);\nParticleLayer.mergeOptions(options$B);\nParticleLayer.registerRenderer('canvas', function (_CanvasLayerRenderer) {\n  _inheritsLoose(_class, _CanvasLayerRenderer);\n  function _class() {\n    return _CanvasLayerRenderer.apply(this, arguments) || this;\n  }\n  var _proto2 = _class.prototype;\n  _proto2.draw = function draw() {\n    if (!this.canvas || !this.layer.options['animation'] || this._shouldClear) {\n      this.prepareCanvas();\n      this._shouldClear = false;\n    }\n    this.prepareDrawContext();\n    this._drawLayer();\n  };\n  _proto2.drawOnInteracting = function drawOnInteracting() {\n    this.draw();\n    this._shouldClear = false;\n  };\n  _proto2.onSkipDrawOnInteracting = function onSkipDrawOnInteracting() {\n    this._shouldClear = true;\n  };\n  return _class;\n}(CanvasLayerRenderer));\nvar resources = new ResourceCache();\nvar prevX, prevY;\nvar EditHandle = function (_Eventable) {\n  _inheritsLoose(EditHandle, _Eventable);\n  function EditHandle(target, map, options) {\n    var _this;\n    _this = _Eventable.call(this, options) || this;\n    _this.target = target;\n    target.once('remove', _this.delete, _assertThisInitialized(_assertThisInitialized(_this)));\n    var symbol = _this.options['symbol'];\n    var lineWidth = symbol['markerLineWidth'] || 1;\n    _this.w = symbol['markerWidth'] + lineWidth;\n    _this.h = symbol['markerHeight'] + lineWidth;\n    _this.opacity = isNil(symbol['opacity']) ? 1 : symbol['opacity'];\n    _this.map = map;\n    _this.events = options.events;\n    _this._fetchImage();\n    _this.addTo(map);\n    return _this;\n  }\n  var _proto = EditHandle.prototype;\n  _proto.getCursor = function getCursor() {\n    return this.options['cursor'] || 'default';\n  };\n  _proto._fetchImage = function _fetchImage() {\n    var map = this.map;\n    var symbol = this.options.symbol;\n    var markerFile = symbol.markerFile;\n    this.url = markerFile || getSymbolHash(symbol);\n    var img = resources.getImage(this.url);\n    if (!img) {\n      var w = this.w;\n      var h = this.h;\n      if (markerFile) {\n        img = new Image();\n        img.onload = function () {\n          var renderer = map.getRenderer();\n          if (renderer) {\n            renderer.setToRedraw();\n          }\n        };\n        img.src = this.url;\n      } else {\n        var canvas = document.createElement('canvas');\n        canvas.width = w;\n        canvas.height = h;\n        var ctx = canvas.getContext('2d');\n        img = drawVectorMarker(ctx, {\n          x: w / 2,\n          y: h / 2\n        }, symbol, resources);\n      }\n      resources.addResource([this.url, w, h], img);\n    }\n    resources.login(this.url);\n    this._img = img;\n  };\n  _proto.setContainerPoint = function setContainerPoint(cp) {\n    this._point = cp;\n    this._point._sub(this.w / 2, this.h / 2);\n  };\n  _proto.getContainerPoint = function getContainerPoint() {\n    return this._point.add(this.w / 2, this.h / 2);\n  };\n  _proto.offset = function offset(p) {\n    this._point._add(p);\n  };\n  _proto.render = function render(ctx) {\n    if (!this._img) {\n      return false;\n    }\n    var symbol = this.options['symbol'];\n    var dx = symbol['markerDx'] || 0;\n    var dy = symbol['markerDy'] || 0;\n    var map = this.map;\n    var _this$_point = this._point,\n      x = _this$_point.x,\n      y = _this$_point.y;\n    var w = this.w;\n    var h = this.h;\n    if (x + w > 0 && x < map.width && y + h > 0 && y < map.height) {\n      var dpr = map.getDevicePixelRatio();\n      ctx.globalAlpha = this.opacity;\n      ctx.drawImage(this._img, Math.round((x + dx) * dpr), Math.round((y + dy) * dpr), Math.round(w * dpr), Math.round(h * dpr));\n      return true;\n    }\n    return false;\n  };\n  _proto.delete = function _delete() {\n    if (this.map) {\n      var renderer = this.map.getRenderer();\n      if (renderer) {\n        renderer.removeTopElement(this);\n      }\n    }\n    resources.logout(this.url);\n    if (this._dragger) {\n      this._dragger.disable();\n      delete this._dragger;\n    }\n    delete this.map;\n  };\n  _proto.hitTest = function hitTest(p) {\n    var symbol = this.options['symbol'];\n    var dx = symbol['markerDx'] || 0;\n    var dy = symbol['markerDy'] || 0;\n    var w = this.w;\n    var h = this.h;\n    var x = this._point.x + dx;\n    var y = this._point.y + dy;\n    return p.x >= x && p.x <= x + w && p.y >= y && p.y <= y + h;\n  };\n  _proto.addTo = function addTo(map) {\n    this.map = map;\n    var renderer = map.getRenderer();\n    renderer.addTopElement(this);\n  };\n  _proto.onEvent = function onEvent(e) {\n    this.fire(e.type, e);\n  };\n  _proto.mousedown = function mousedown(e) {\n    var map = e.target;\n    var cursor = this.options['cursor'];\n    if (cursor) {\n      map.setCursor(cursor);\n    }\n    this.onDragstart(e);\n  };\n  _proto.onDragstart = function onDragstart(e) {\n    var containerPoint = e.containerPoint,\n      map = e.target;\n    var dom = map._panels.mapWrapper || map._containerDOM;\n    var dragHandler = this._dragger = new DragHandler(dom);\n    dragHandler.on('dragging', this.onDragging, this).on('mouseup', this.onDragend, this).enable();\n    dragHandler.type = 'handle';\n    dragHandler.onMouseDown(e['domEvent']);\n    prevX = containerPoint.x;\n    prevY = containerPoint.y;\n    this.fire('dragstart', {\n      containerPoint: containerPoint\n    });\n  };\n  _proto.onDragging = function onDragging(e) {\n    if (!this._dragger) {\n      return;\n    }\n    var activeMap = this.map;\n    var containerPoint = getEventContainerPoint(e.domEvent, activeMap._containerDOM);\n    var offset = {\n      x: containerPoint.x - prevX,\n      y: containerPoint.y - prevY\n    };\n    var prevCoord = activeMap.containerPointToCoord(new Point(prevX, prevY));\n    var currentCoord = activeMap.containerPointToCoord(containerPoint);\n    prevX = containerPoint.x;\n    prevY = containerPoint.y;\n    this.offset(offset);\n    this.fire('dragging', {\n      containerPoint: containerPoint,\n      coordOffset: currentCoord._sub(prevCoord)\n    });\n  };\n  _proto.onDragend = function onDragend(e) {\n    if (!this._dragger) {\n      return;\n    }\n    var map = this.map;\n    map.resetCursor();\n    var containerPoint = getEventContainerPoint(e.domEvent, map._containerDOM);\n    var offset = {\n      x: containerPoint.x - prevX,\n      y: containerPoint.y - prevY\n    };\n    this.offset(offset);\n    this._dragger.disable();\n    delete this._dragger;\n    this.fire('dragend', {\n      containerPoint: containerPoint\n    });\n  };\n  return EditHandle;\n}(Eventable(Class));\nvar EditOutline = function () {\n  function EditOutline(target, map) {\n    this.target = target;\n    target.once('remove', this.delete, this);\n    this.map = map;\n    this.addTo(map);\n  }\n  var _proto = EditOutline.prototype;\n  _proto.setPoints = function setPoints(points) {\n    this.points = points;\n    var allX = points.map(function (p) {\n      return p.x;\n    });\n    var allY = points.map(function (p) {\n      return p.y;\n    });\n    this.xmin = Math.min.apply(Math, allX);\n    this.xmax = Math.max.apply(Math, allX);\n    this.ymin = Math.min.apply(Math, allY);\n    this.ymax = Math.max.apply(Math, allY);\n  };\n  _proto.hitTest = function hitTest() {\n    return false;\n  };\n  _proto.render = function render(ctx) {\n    var map = this.map;\n    if (this.xmax <= 0 || this.xmin >= map.width || this.ymax <= 0 || this.ymin >= map.height) {\n      return;\n    }\n    var dpr = map.getDevicePixelRatio();\n    var padding = 0.5;\n    function c(v) {\n      return Math.round(v) * dpr + padding;\n    }\n    ctx.lineWidth = 1;\n    ctx.strokeStyle = '#000';\n    ctx.globalAlpha = 1;\n    ctx.beginPath();\n    var points = this.points;\n    ctx.moveTo(c(points[0].x), c(points[0].y));\n    for (var i = 1; i < this.points.length; i++) {\n      ctx.lineTo(c(points[i].x), c(points[i].y));\n    }\n    ctx.closePath();\n    ctx.stroke();\n  };\n  _proto.addTo = function addTo(map) {\n    this.map = map;\n    var renderer = map.getRenderer();\n    renderer.addTopElement(this);\n  };\n  _proto.delete = function _delete() {\n    if (this.map) {\n      var renderer = this.map.getRenderer();\n      if (renderer) {\n        renderer.removeTopElement(this);\n      }\n    }\n  };\n  return EditOutline;\n}();\nvar EDIT_STAGE_LAYER_PREFIX = INTERNAL_LAYER_PREFIX + '_edit_stage_';\nfunction createHandleSymbol(markerType, opacity) {\n  return {\n    'markerType': markerType,\n    'markerFill': '#fff',\n    'markerLineColor': '#000',\n    'markerLineWidth': 2,\n    'markerWidth': 10,\n    'markerHeight': 10,\n    'opacity': opacity\n  };\n}\nvar options$C = {\n  'fixAspectRatio': false,\n  'symbol': null,\n  'removeVertexOn': 'contextmenu',\n  'centerHandleSymbol': createHandleSymbol('ellipse', 1),\n  'vertexHandleSymbol': createHandleSymbol('square', 1),\n  'newVertexHandleSymbol': createHandleSymbol('square', 0.4)\n};\nvar GeometryEditor = function (_Eventable) {\n  _inheritsLoose(GeometryEditor, _Eventable);\n  function GeometryEditor(geometry, opts) {\n    var _this;\n    _this = _Eventable.call(this, opts) || this;\n    _this._geometry = geometry;\n    if (!_this._geometry) {\n      return _assertThisInitialized(_this);\n    }\n    return _this;\n  }\n  var _proto = GeometryEditor.prototype;\n  _proto.getMap = function getMap() {\n    return this._geometry.getMap();\n  };\n  _proto.prepare = function prepare() {\n    var map = this.getMap();\n    if (!map) {\n      return;\n    }\n    map.on('drawtopstart', this._refresh, this);\n    if (this.options['symbol']) {\n      this._originalSymbol = this._geometry.getSymbol();\n      this._geometry.setSymbol(this.options['symbol']);\n    }\n    this._prepareEditStageLayer();\n  };\n  _proto._prepareEditStageLayer = function _prepareEditStageLayer() {\n    var layer = this._geometry.getLayer();\n    if (layer.options['renderer'] !== 'canvas') {\n      return;\n    }\n    var map = this.getMap();\n    var uid = UID();\n    var shadowId = EDIT_STAGE_LAYER_PREFIX + uid + '_shadow';\n    this._shadowLayer = map.getLayer(shadowId);\n    if (!this._shadowLayer) {\n      var LayerType = layer.constructor;\n      this._shadowLayer = new LayerType(shadowId);\n      map.addLayer(this._shadowLayer);\n    }\n  };\n  _proto.start = function start() {\n    if (!this._geometry || !this._geometry.getMap() || this._geometry.editing) {\n      return;\n    }\n    this.editing = true;\n    this.prepare();\n    var geometry = this._geometry;\n    var shadow;\n    var layer = this._geometry.getLayer();\n    var needShadow = layer.options['renderer'] === 'canvas';\n    this._geometryDraggble = geometry.options['draggable'];\n    if (needShadow) {\n      geometry.config('draggable', false);\n      shadow = geometry.copy();\n      shadow.setSymbol(geometry._getInternalSymbol());\n      shadow.copyEventListeners(geometry);\n      if (geometry._getParent()) {\n        shadow.copyEventListeners(geometry._getParent());\n      }\n      shadow._setEventTarget(geometry);\n      shadow.setId(null).config({\n        'draggable': false\n      });\n      this._shadow = shadow;\n      geometry.hide();\n    } else if (geometry instanceof Marker) {\n      geometry.config('draggable', true);\n    }\n    this._switchGeometryEvents('on');\n    if (geometry instanceof Marker || geometry instanceof Circle || geometry instanceof Rectangle || geometry instanceof Ellipse) {\n      this._createOrRefreshOutline();\n    }\n    if (this._shadowLayer) {\n      this._shadowLayer.bringToFront().addGeometry(shadow);\n    }\n    if (!(geometry instanceof Marker)) {\n      this._createCenterHandle();\n    } else if (shadow) {\n      shadow.config('draggable', true);\n      shadow.on('dragend', this._onMarkerDragEnd, this);\n    }\n    if (geometry instanceof Marker && this.options['resize'] !== false) {\n      this.createMarkerEditor();\n    } else if (geometry instanceof Circle) {\n      this.createCircleEditor();\n    } else if (geometry instanceof Rectangle) {\n      this.createEllipseOrRectEditor();\n    } else if (geometry instanceof Ellipse) {\n      this.createEllipseOrRectEditor();\n    } else if (geometry instanceof Sector) ;else if (geometry instanceof Polygon || geometry instanceof LineString) {\n      this.createPolygonEditor();\n    }\n  };\n  _proto.stop = function stop() {\n    delete this._history;\n    delete this._historyPointer;\n    delete this._editOutline;\n    this._switchGeometryEvents('off');\n    var map = this.getMap();\n    if (!map) {\n      this.fire('remove');\n      return;\n    }\n    this._geometry.config('draggable', this._geometryDraggble);\n    if (this._shadow) {\n      delete this._shadow;\n      delete this._geometryDraggble;\n      this._geometry.show();\n    }\n    if (this._shadowLayer) {\n      this._shadowLayer.remove();\n      delete this._shadowLayer;\n    }\n    this._refreshHooks = [];\n    if (this.options['symbol']) {\n      this._geometry.setSymbol(this._originalSymbol);\n      delete this._originalSymbol;\n    }\n    this.editing = false;\n    this.fire('remove');\n  };\n  _proto.isEditing = function isEditing() {\n    if (isNil(this.editing)) {\n      return false;\n    }\n    return this.editing;\n  };\n  _proto._getGeometryEvents = function _getGeometryEvents() {\n    return {\n      'symbolchange': this._onGeoSymbolChange,\n      'dragstart': this._onDragStart,\n      'dragend': this._onDragEnd,\n      'positionchange shapechange': this._exeAndReset\n    };\n  };\n  _proto._switchGeometryEvents = function _switchGeometryEvents(oper) {\n    if (this._geometry) {\n      var events = this._getGeometryEvents();\n      for (var p in events) {\n        this._geometry[oper](p, events[p], this);\n      }\n    }\n  };\n  _proto._onGeoSymbolChange = function _onGeoSymbolChange(param) {\n    if (this._shadow) {\n      this._shadow.setSymbol(param.target._getInternalSymbol());\n    }\n  };\n  _proto._onMarkerDragEnd = function _onMarkerDragEnd() {\n    this._update('setCoordinates', this._shadow.getCoordinates().toArray());\n  };\n  _proto._createOrRefreshOutline = function _createOrRefreshOutline() {\n    var geometry = this._geometry;\n    var outline = this._editOutline;\n    if (!outline) {\n      this._editOutline = new EditOutline(this, this.getMap());\n      this._addRefreshHook(this._createOrRefreshOutline);\n    }\n    var points = this._editOutline.points;\n    if (geometry instanceof Marker) {\n      this._editOutline.setPoints(geometry.getContainerExtent().toArray(points));\n    } else {\n      var map = this.getMap();\n      var extent = geometry._getPrjExtent();\n      points = extent.toArray(points);\n      points.forEach(function (c) {\n        return map._prjToContainerPoint(c, null, c);\n      });\n      this._editOutline.setPoints(points);\n    }\n    return outline;\n  };\n  _proto._createCenterHandle = function _createCenterHandle() {\n    var _this2 = this;\n    var map = this.getMap();\n    var symbol = this.options['centerHandleSymbol'];\n    var shadow;\n    var cointainerPoint = map.coordToContainerPoint(this._geometry.getCenter());\n    var handle = this.createHandle(cointainerPoint, {\n      'symbol': symbol,\n      'cursor': 'move',\n      onDown: function onDown() {\n        if (_this2._shadow) {\n          shadow = _this2._shadow.copy();\n          var _symbol = lowerSymbolOpacity(shadow._getInternalSymbol(), 0.5);\n          shadow.setSymbol(_symbol).addTo(_this2._geometry.getLayer());\n        }\n      },\n      onMove: function onMove(param) {\n        var offset = param['coordOffset'];\n        if (shadow) {\n          shadow.translate(offset);\n        } else {\n          _this2._geometry.translate(offset);\n        }\n      },\n      onUp: function onUp() {\n        if (shadow) {\n          var shadowFirst = shadow.getFirstCoordinate();\n          var first = _this2._geometry.getFirstCoordinate();\n          var offset = shadowFirst.sub(first);\n          _this2._update('translate', offset);\n          shadow.remove();\n        }\n      }\n    });\n    this._addRefreshHook(function () {\n      var center = _this2._geometry.getCenter();\n      handle.setContainerPoint(map.coordToContainerPoint(center));\n    });\n  };\n  _proto._createHandleInstance = function _createHandleInstance(containerPoint, opts) {\n    var map = this.getMap();\n    var symbol = loadFunctionTypes(opts['symbol'], function () {\n      return [map.getZoom(), {\n        '{bearing}': map.getBearing(),\n        '{pitch}': map.getPitch(),\n        '{zoom}': map.getZoom()\n      }];\n    });\n    var removeVertexOn = this.options['removeVertexOn'];\n    var handle = new EditHandle(this, map, {\n      symbol: symbol,\n      cursor: opts['cursor'],\n      events: removeVertexOn\n    });\n    handle.setContainerPoint(containerPoint);\n    return handle;\n  };\n  _proto.createHandle = function createHandle(containerPoint, opts) {\n    if (!opts) {\n      opts = {};\n    }\n    var handle = this._createHandleInstance(containerPoint, opts);\n    var me = this;\n    function onHandleDragstart(param) {\n      this._updating = true;\n      if (opts.onDown) {\n        this._geometry.fire('handledragstart');\n        opts.onDown.call(me, param['containerPoint'], param);\n      }\n      return false;\n    }\n    function onHandleDragging(param) {\n      me._hideContext();\n      if (opts.onMove) {\n        this._geometry.fire('handledragging');\n        opts.onMove.call(me, param);\n      }\n      return false;\n    }\n    function onHandleDragEnd(ev) {\n      if (opts.onUp) {\n        this._geometry.fire('handledragend');\n        opts.onUp.call(me, ev);\n      }\n      this._updating = false;\n      return false;\n    }\n    handle.on('dragstart', onHandleDragstart, this);\n    handle.on('dragging', onHandleDragging, this);\n    handle.on('dragend', onHandleDragEnd, this);\n    if (opts.onRefresh) {\n      handle.refresh = opts.onRefresh;\n    }\n    return handle;\n  };\n  _proto._createResizeHandles = function _createResizeHandles(blackList, onHandleMove, onHandleUp) {\n    var _this3 = this;\n    var cursors = ['nw-resize', 'n-resize', 'ne-resize', 'w-resize', 'e-resize', 'sw-resize', 's-resize', 'se-resize'];\n    var axis = [null, 'y', null, 'x', 'x', null, 'y', null];\n    var geometry = this._geometry;\n    var isMarker = geometry instanceof Marker;\n    function getResizeAnchors() {\n      if (isMarker) {\n        var _ext = geometry.getContainerExtent();\n        return [new Point(_ext['xmin'], _ext['ymin']), new Point((_ext['xmax'] + _ext['xmin']) / 2, _ext['ymin']), new Point(_ext['xmax'], _ext['ymin']), new Point(_ext['xmin'], (_ext['ymin'] + _ext['ymax']) / 2), new Point(_ext['xmax'], (_ext['ymin'] + _ext['ymax']) / 2), new Point(_ext['xmin'], _ext['ymax']), new Point((_ext['xmax'] + _ext['xmin']) / 2, _ext['ymax']), new Point(_ext['xmax'], _ext['ymax'])];\n      }\n      var ext = geometry._getPrjExtent();\n      return [new Point(ext['xmin'], ext['ymax']), new Point((ext['xmax'] + ext['xmin']) / 2, ext['ymax']), new Point(ext['xmax'], ext['ymax']), new Point(ext['xmin'], (ext['ymax'] + ext['ymin']) / 2), new Point(ext['xmax'], (ext['ymax'] + ext['ymin']) / 2), new Point(ext['xmin'], ext['ymin']), new Point((ext['xmax'] + ext['xmin']) / 2, ext['ymin']), new Point(ext['xmax'], ext['ymin'])];\n    }\n    if (!blackList) {\n      blackList = [];\n    }\n    var me = this;\n    var resizeHandles = [],\n      anchorIndexes = {},\n      map = this.getMap(),\n      handleSymbol = this.options['vertexHandleSymbol'];\n    var fnLocateHandles = function fnLocateHandles() {\n      var anchors = getResizeAnchors();\n      var _loop = function _loop(i) {\n        if (Array.isArray(blackList)) {\n          var isBlack = blackList.some(function (ele) {\n            return ele === i;\n          });\n          if (isBlack) {\n            return \"continue\";\n          }\n        }\n        var anchor = anchors[i],\n          point = isMarker ? anchor : map._prjToContainerPoint(anchor);\n        if (resizeHandles.length < anchors.length - blackList.length) {\n          var handle = _this3.createHandle(point, {\n            'symbol': handleSymbol,\n            'cursor': cursors[i],\n            'axis': axis[i],\n            onMove: function (_index) {\n              return function (e) {\n                me._updating = true;\n                onHandleMove(e.containerPoint, _index);\n                geometry.fire('resizing');\n              };\n            }(i),\n            onUp: function onUp() {\n              me._updating = false;\n              onHandleUp();\n            }\n          });\n          anchorIndexes[i] = resizeHandles.length;\n          resizeHandles.push(handle);\n        } else {\n          resizeHandles[anchorIndexes[i]].setContainerPoint(point);\n        }\n      };\n      for (var i = 0; i < anchors.length; i++) {\n        var _ret = _loop(i);\n        if (_ret === \"continue\") continue;\n      }\n    };\n    fnLocateHandles();\n    this._addRefreshHook(fnLocateHandles);\n    return resizeHandles;\n  };\n  _proto.createMarkerEditor = function createMarkerEditor() {\n    var _this4 = this;\n    var geometryToEdit = this._shadow || this._geometry,\n      map = this.getMap();\n    if (!geometryToEdit._canEdit()) {\n      if (console) {\n        console.warn('A marker can\\'t be resized with symbol:', geometryToEdit.getSymbol());\n      }\n      return;\n    }\n    if (!this._history) {\n      this._recordHistory(getUpdates());\n    }\n    var symbol = geometryToEdit._getInternalSymbol();\n    var dxdy = new Point(0, 0);\n    if (isNumber(symbol['markerDx'])) {\n      dxdy.x = symbol['markerDx'];\n    }\n    if (isNumber(symbol['markerDy'])) {\n      dxdy.y = symbol['markerDy'];\n    }\n    var blackList = null;\n    var verticalAnchor = 'middle';\n    var horizontalAnchor = 'middle';\n    if (VectorMarkerSymbolizer.test(symbol)) {\n      var type = symbol['markerType'];\n      if (type === 'pin' || type === 'pie' || type === 'bar') {\n        blackList = [5, 6, 7];\n        verticalAnchor = 'bottom';\n      } else if (type === 'rectangle') {\n        blackList = [0, 1, 2, 3, 5];\n        verticalAnchor = 'top';\n        horizontalAnchor = 'left';\n      }\n    } else if (ImageMarkerSymbolizer.test(symbol) || VectorPathMarkerSymbolizer.test(symbol)) {\n      verticalAnchor = 'bottom';\n      blackList = [5, 6, 7];\n    }\n    var resizeAbilities = [2, 1, 2, 0, 0, 2, 1, 2];\n    var aspectRatio;\n    if (this.options['fixAspectRatio']) {\n      var size = geometryToEdit.getSize();\n      aspectRatio = size.width / size.height;\n    }\n    var resizeHandles = this._createResizeHandles(blackList, function (containerPoint, i) {\n      if (blackList && blackList.indexOf(i) >= 0) {\n        var newCoordinates = map.containerPointToCoordinate(containerPoint.sub(dxdy));\n        var coordinates = geometryToEdit.getCoordinates();\n        newCoordinates.x = coordinates.x;\n        geometryToEdit.setCoordinates(newCoordinates);\n        _this4._updateCoordFromShadow(true);\n        var mirrorHandle = resizeHandles[resizeHandles.length - 1 - i];\n        var mirror = mirrorHandle.getContainerPoint();\n        containerPoint = mirror;\n      }\n      var viewCenter = map.coordToContainerPoint(geometryToEdit.getCoordinates()).add(dxdy),\n        symbol = geometryToEdit._getInternalSymbol();\n      var wh = containerPoint.sub(viewCenter);\n      if (verticalAnchor === 'bottom' && containerPoint.y > viewCenter.y) {\n        wh.y = 0;\n      }\n      var vr = verticalAnchor === 'middle' ? 2 : 1;\n      var hr = horizontalAnchor === 'left' ? 1 : 2;\n      var width = Math.abs(wh.x) * hr,\n        height = Math.abs(wh.y) * vr;\n      if (aspectRatio) {\n        width = Math.max(width, height * aspectRatio);\n        height = width / aspectRatio;\n      }\n      var ability = resizeAbilities[i];\n      if (!(geometryToEdit instanceof TextBox)) {\n        if (aspectRatio || ability === 0 || ability === 2) {\n          symbol['markerWidth'] = Math.min(width, _this4._geometry.options['maxMarkerWidth'] || Infinity);\n        }\n        if (aspectRatio || ability === 1 || ability === 2) {\n          symbol['markerHeight'] = Math.min(height, _this4._geometry.options['maxMarkerHeight'] || Infinity);\n        }\n        geometryToEdit.setSymbol(symbol);\n        if (geometryToEdit !== _this4._geometry) {\n          _this4._geometry.setSymbol(symbol);\n        }\n      } else {\n        if (aspectRatio || ability === 0 || ability === 2) {\n          geometryToEdit.setWidth(width);\n          if (geometryToEdit !== _this4._geometry) {\n            _this4._geometry.setWidth(width);\n          }\n        }\n        if (aspectRatio || ability === 1 || ability === 2) {\n          geometryToEdit.setHeight(height);\n          if (geometryToEdit !== _this4._geometry) {\n            _this4._geometry.setHeight(height);\n          }\n        }\n      }\n    }, function () {\n      _this4._update(getUpdates());\n    });\n    function getUpdates() {\n      var updates = [['setCoordinates', geometryToEdit.getCoordinates().toArray()]];\n      if (geometryToEdit instanceof TextBox) {\n        updates.push(['setWidth', geometryToEdit.getWidth()]);\n        updates.push(['setHeight', geometryToEdit.getHeight()]);\n      } else {\n        updates.push(['setSymbol', geometryToEdit.getSymbol()]);\n      }\n      return updates;\n    }\n  };\n  _proto.createCircleEditor = function createCircleEditor() {\n    var _this5 = this;\n    var geo = this._shadow || this._geometry;\n    var map = this.getMap();\n    if (!this._history) {\n      this._recordHistory([['setCoordinates', geo.getCoordinates().toArray()], ['setRadius', geo.getRadius()]]);\n    }\n    this._createResizeHandles(null, function (handleContainerPoint) {\n      var center = geo.getCenter();\n      var mouseCoordinate = map.containerPointToCoord(handleContainerPoint);\n      var wline = new LineString([[center.x, center.y], [mouseCoordinate.x, center.y]]);\n      var hline = new LineString([[center.x, center.y], [center.x, mouseCoordinate.y]]);\n      var r = Math.max(map.computeGeometryLength(wline), map.computeGeometryLength(hline));\n      geo.setRadius(r);\n      if (geo !== _this5._geometry) {\n        _this5._geometry.setRadius(r);\n      }\n    }, function () {\n      _this5._update('setRadius', geo.getRadius());\n    });\n  };\n  _proto.createEllipseOrRectEditor = function createEllipseOrRectEditor() {\n    var _this6 = this;\n    var resizeAbilities = [2, 1, 2, 0, 0, 2, 1, 2];\n    var geometryToEdit = this._shadow || this._geometry;\n    if (!this._history) {\n      this._recordHistory(getUpdates());\n    }\n    var map = this.getMap();\n    var isRect = this._geometry instanceof Rectangle;\n    var aspectRatio;\n    if (this.options['fixAspectRatio']) {\n      aspectRatio = geometryToEdit.getWidth() / geometryToEdit.getHeight();\n    }\n    var resizeHandles = this._createResizeHandles(null, function (mouseContainerPoint, i) {\n      var r = isRect ? 1 : 2;\n      var pointSub, w, h;\n      var handle = resizeHandles[i];\n      var targetPoint = handle.getContainerPoint();\n      var ability = resizeAbilities[i];\n      if (isRect) {\n        var mirror = resizeHandles[7 - i];\n        var mirrorContainerPoint = mirror.getContainerPoint();\n        pointSub = targetPoint.sub(mirrorContainerPoint);\n        var absSub = pointSub.abs();\n        w = map.pixelToDistance(absSub.x, 0);\n        h = map.pixelToDistance(0, absSub.y);\n        var size = geometryToEdit.getSize();\n        var geoCoord = geometryToEdit.getCoordinates();\n        var width = geometryToEdit.getWidth();\n        var height = geometryToEdit.getHeight();\n        var mouseCoordinate = map.containerPointToCoord(mouseContainerPoint);\n        var mirrorCoordinate = map.containerPointToCoord(mirrorContainerPoint);\n        var wline = new LineString([[mirrorCoordinate.x, mirrorCoordinate.y], [mouseCoordinate.x, mirrorCoordinate.y]]);\n        var hline = new LineString([[mirrorCoordinate.x, mirrorCoordinate.y], [mirrorCoordinate.x, mouseCoordinate.y]]);\n        w = map.computeGeometryLength(wline);\n        h = map.computeGeometryLength(hline);\n        if (ability === 0) {\n          if (aspectRatio) {\n            absSub.y = absSub.x / aspectRatio;\n            size.height = Math.abs(absSub.y);\n            h = w / aspectRatio;\n          }\n          targetPoint.y = mirrorContainerPoint.y - size.height / 2;\n          mouseCoordinate.y = geoCoord.y;\n          if (i === 4) {\n            mouseCoordinate.x = Math.min(mouseCoordinate.x, geoCoord.x);\n          } else {\n            var mirrorCoord = map.locate(geoCoord, width, 0);\n            mouseCoordinate.x = map.locate(new Coordinate(mirrorCoord.x, mouseCoordinate.y), -w, 0).x;\n          }\n        } else if (ability === 1) {\n          if (aspectRatio) {\n            absSub.x = absSub.y * aspectRatio;\n            size.width = Math.abs(absSub.x);\n            w = h * aspectRatio;\n          }\n          targetPoint.x = mirrorContainerPoint.x - size.width / 2;\n          mouseCoordinate.x = geoCoord.x;\n          mouseCoordinate.y = Math.max(mouseCoordinate.y, mirrorCoordinate.y);\n        } else {\n          if (aspectRatio) {\n            if (w > h * aspectRatio) {\n              h = w / aspectRatio;\n              targetPoint.y = mirrorContainerPoint.y + absSub.x * sign(pointSub.y) / aspectRatio;\n            } else {\n              w = h * aspectRatio;\n              targetPoint.x = mirrorContainerPoint.x + absSub.y * sign(pointSub.x) * aspectRatio;\n            }\n          }\n          if (i === 0 || i === 5) {\n            var _mirrorCoord = i === 0 ? map.locate(geoCoord, width, 0) : map.locate(geoCoord, width, -height);\n            mouseCoordinate.x = map.locate(new Coordinate(_mirrorCoord.x, mouseCoordinate.y), -w, 0).x;\n          } else {\n            mouseCoordinate.x = Math.min(mouseCoordinate.x, mirrorCoordinate.x);\n          }\n          mouseCoordinate.y = Math.max(mouseCoordinate.y, mirrorCoordinate.y);\n        }\n        geometryToEdit.setCoordinates(mouseCoordinate);\n        _this6._updateCoordFromShadow(true);\n      } else {\n        var center = geometryToEdit.getCenter();\n        var _mouseCoordinate = map.containerPointToCoord(targetPoint);\n        var _wline = new LineString([[center.x, center.y], [_mouseCoordinate.x, center.y]]);\n        var _hline = new LineString([[center.x, center.y], [center.x, _mouseCoordinate.y]]);\n        w = map.computeGeometryLength(_wline);\n        h = map.computeGeometryLength(_hline);\n        if (aspectRatio) {\n          w = Math.max(w, h * aspectRatio);\n          h = w / aspectRatio;\n        }\n      }\n      if (aspectRatio || ability === 0 || ability === 2) {\n        geometryToEdit.setWidth(w * r);\n        if (geometryToEdit !== _this6._geometry) {\n          _this6._geometry.setWidth(w * r);\n        }\n      }\n      if (aspectRatio || ability === 1 || ability === 2) {\n        geometryToEdit.setHeight(h * r);\n        if (geometryToEdit !== _this6._geometry) {\n          _this6._geometry.setHeight(h * r);\n        }\n      }\n    }, function () {\n      _this6._update(getUpdates());\n    });\n    function getUpdates() {\n      return [['setCoordinates', geometryToEdit.getCoordinates().toArray()], ['setWidth', geometryToEdit.getWidth()], ['setHeight', geometryToEdit.getHeight()]];\n    }\n  };\n  _proto.createPolygonEditor = function createPolygonEditor() {\n    var map = this.getMap(),\n      geoToEdit = this._shadow || this._geometry,\n      me = this;\n    if (!this._history) {\n      this._recordHistory('setCoordinates', Coordinate.toNumberArrays(geoToEdit.getCoordinates()));\n    }\n    var verticeLimit = geoToEdit instanceof Polygon ? 3 : 2;\n    var propertyOfVertexIndex = 'maptalks--editor-vertex-index';\n    var vertexHandles = {\n        0: []\n      },\n      newVertexHandles = {\n        0: []\n      };\n    function getVertexCoordinates(ringIndex) {\n      if (ringIndex === void 0) {\n        ringIndex = 0;\n      }\n      if (geoToEdit instanceof Polygon) {\n        var coordinates = geoToEdit.getCoordinates()[ringIndex] || [];\n        return coordinates.slice(0, coordinates.length - 1);\n      } else {\n        return geoToEdit.getCoordinates();\n      }\n    }\n    function getVertexPrjCoordinates(ringIndex) {\n      if (ringIndex === void 0) {\n        ringIndex = 0;\n      }\n      if (ringIndex === 0) {\n        return geoToEdit._getPrjCoordinates();\n      }\n      return geoToEdit._getPrjHoles()[ringIndex - 1];\n    }\n    function onVertexAddOrRemove() {\n      for (var ringIndex in vertexHandles) {\n        for (var i = vertexHandles[ringIndex].length - 1; i >= 0; i--) {\n          vertexHandles[ringIndex][i][propertyOfVertexIndex] = i;\n        }\n        for (var _i = newVertexHandles[ringIndex].length - 1; _i >= 0; _i--) {\n          newVertexHandles[ringIndex][_i][propertyOfVertexIndex] = _i;\n        }\n      }\n      me._updateCoordFromShadow();\n    }\n    function removeVertex(param) {\n      me._updating = true;\n      var handle = param['target'],\n        index = handle[propertyOfVertexIndex];\n      var ringIndex = isNumber(handle._ringIndex) ? handle._ringIndex : 0;\n      var prjCoordinates = getVertexPrjCoordinates(ringIndex);\n      if (prjCoordinates.length <= verticeLimit) {\n        return;\n      }\n      var isEnd = geoToEdit instanceof LineString && (index === 0 || index === prjCoordinates.length - 1);\n      prjCoordinates.splice(index, 1);\n      if (ringIndex > 0) {\n        geoToEdit._prjHoles[ringIndex - 1] = prjCoordinates;\n      } else {\n        geoToEdit._setPrjCoordinates(prjCoordinates);\n      }\n      geoToEdit._updateCache();\n      vertexHandles[ringIndex].splice(index, 1)[0].delete();\n      if (index < newVertexHandles[ringIndex].length) {\n        newVertexHandles[ringIndex].splice(index, 1)[0].delete();\n      }\n      var nextIndex;\n      if (index === 0) {\n        nextIndex = newVertexHandles[ringIndex].length - 1;\n      } else {\n        nextIndex = index - 1;\n      }\n      newVertexHandles[ringIndex].splice(nextIndex, 1)[0].delete();\n      if (!isEnd) {\n        newVertexHandles[ringIndex].splice(nextIndex, 0, createNewVertexHandle.call(me, nextIndex, ringIndex));\n      }\n      if (ringIndex > 0) {\n        var coordiantes = geoToEdit.getCoordinates();\n        var ring = coordiantes[ringIndex];\n        if (ring && Array.isArray(ring) && ring.length > 1) {\n          ring.splice(index, 1);\n          if (geoToEdit !== this._geometry) {\n            geoToEdit.setCoordinates(coordiantes);\n          }\n        }\n      }\n      onVertexAddOrRemove();\n      me._updating = false;\n    }\n    function moveVertexHandle(handleConatainerPoint, index, ringIndex) {\n      if (ringIndex === void 0) {\n        ringIndex = 0;\n      }\n      var snapTo = me._geometry.snapTo;\n      if (snapTo && isFunction(snapTo)) {\n        handleConatainerPoint = me._geometry.snapTo(handleConatainerPoint) || handleConatainerPoint;\n      }\n      var vertice = getVertexPrjCoordinates(ringIndex);\n      var nVertex = map._containerPointToPrj(handleConatainerPoint.sub(getDxDy()));\n      var pVertex = vertice[index];\n      pVertex.x = nVertex.x;\n      pVertex.y = nVertex.y;\n      geoToEdit._updateCache();\n      geoToEdit.onShapeChanged();\n      me._updateCoordFromShadow(true);\n      var nextIndex;\n      if (index === 0) {\n        nextIndex = newVertexHandles[ringIndex].length - 1;\n      } else {\n        nextIndex = index - 1;\n      }\n      if (newVertexHandles[ringIndex][index]) {\n        newVertexHandles[ringIndex][index].refresh();\n      }\n      if (newVertexHandles[ringIndex][nextIndex]) {\n        newVertexHandles[ringIndex][nextIndex].refresh();\n      }\n    }\n    var hanldeDxdy = new Point(0, 0);\n    function getDxDy() {\n      var compiledSymbol = geoToEdit._getCompiledSymbol();\n      hanldeDxdy.x = compiledSymbol.lineDx || 0;\n      hanldeDxdy.y = compiledSymbol.lineDy || 0;\n      return hanldeDxdy;\n    }\n    function createVertexHandle(index, ringIndex, ringCoordinates) {\n      if (ringIndex === void 0) {\n        ringIndex = 0;\n      }\n      var vertex = (ringCoordinates || getVertexCoordinates(ringIndex))[index];\n      var handle = me.createHandle(map.coordToContainerPoint(vertex)._add(getDxDy()), {\n        'symbol': me.options['vertexHandleSymbol'],\n        'cursor': 'pointer',\n        'axis': null,\n        onMove: function onMove() {\n          moveVertexHandle(handle.getContainerPoint(), handle[propertyOfVertexIndex], ringIndex);\n        },\n        onRefresh: function onRefresh(rIndex, ringCoordinates) {\n          vertex = (ringCoordinates || getVertexCoordinates(ringIndex))[handle[propertyOfVertexIndex]];\n          var containerPoint = map.coordToContainerPoint(vertex);\n          handle.setContainerPoint(containerPoint._add(getDxDy()));\n        },\n        onUp: function onUp() {\n          me._updateCoordFromShadow();\n        },\n        onDown: function onDown(param, e) {\n          if (e && e.domEvent && e.domEvent.button === 2) {\n            return;\n          }\n        }\n      });\n      handle[propertyOfVertexIndex] = index;\n      handle._ringIndex = ringIndex;\n      handle.on(me.options['removeVertexOn'], removeVertex);\n      return handle;\n    }\n    var pauseRefresh = false;\n    function createNewVertexHandle(index, ringIndex, ringCoordinates) {\n      if (ringIndex === void 0) {\n        ringIndex = 0;\n      }\n      var vertexCoordinates = ringCoordinates || getVertexCoordinates(ringIndex);\n      var nextVertex;\n      if (index + 1 >= vertexCoordinates.length) {\n        nextVertex = vertexCoordinates[0];\n      } else {\n        nextVertex = vertexCoordinates[index + 1];\n      }\n      var vertex = vertexCoordinates[index].add(nextVertex).multi(1 / 2);\n      var handle = me.createHandle(vertex, {\n        'symbol': me.options['newVertexHandleSymbol'],\n        'cursor': 'pointer',\n        'axis': null,\n        onDown: function onDown(param, e) {\n          if (e && e.domEvent && e.domEvent.button === 2) {\n            return;\n          }\n          var prjCoordinates = getVertexPrjCoordinates(ringIndex);\n          var vertexIndex = handle[propertyOfVertexIndex];\n          var cp = handle.getContainerPoint();\n          var pVertex = map._containerPointToPrj(cp);\n          prjCoordinates.splice(vertexIndex + 1, 0, pVertex);\n          if (ringIndex > 0) {\n            geoToEdit._prjHoles[ringIndex - 1] = prjCoordinates;\n          } else {\n            geoToEdit._setPrjCoordinates(prjCoordinates);\n          }\n          geoToEdit._updateCache();\n          handle.opacity = 1;\n          newVertexHandles[ringIndex].splice(vertexIndex, 0, createNewVertexHandle.call(me, vertexIndex, ringIndex), createNewVertexHandle.call(me, vertexIndex + 1, ringIndex));\n          pauseRefresh = true;\n        },\n        onMove: function onMove() {\n          moveVertexHandle(handle.getContainerPoint(), handle[propertyOfVertexIndex] + 1, ringIndex);\n        },\n        onUp: function onUp(e) {\n          if (e && e.domEvent && e.domEvent.button === 2) {\n            pauseRefresh = false;\n            return;\n          }\n          var vertexIndex = handle[propertyOfVertexIndex];\n          removeFromArray(handle, newVertexHandles[ringIndex]);\n          handle.delete();\n          vertexHandles[ringIndex].splice(vertexIndex + 1, 0, createVertexHandle.call(me, vertexIndex + 1, ringIndex));\n          onVertexAddOrRemove();\n          me._updateCoordFromShadow();\n          pauseRefresh = false;\n        },\n        onRefresh: function onRefresh(rIndex, ringCoordinates) {\n          vertexCoordinates = ringCoordinates || getVertexCoordinates(rIndex);\n          var vertexIndex = handle[propertyOfVertexIndex];\n          var nextIndex;\n          if (vertexIndex === vertexCoordinates.length - 1) {\n            nextIndex = 0;\n          } else {\n            nextIndex = vertexIndex + 1;\n          }\n          var refreshVertex = vertexCoordinates[vertexIndex].add(vertexCoordinates[nextIndex]).multi(1 / 2);\n          var containerPoint = map.coordToContainerPoint(refreshVertex);\n          handle.setContainerPoint(containerPoint._add(getDxDy()));\n        }\n      });\n      handle[propertyOfVertexIndex] = index;\n      return handle;\n    }\n    if (geoToEdit instanceof Polygon) {\n      var rings = geoToEdit.getHoles().length + 1;\n      for (var ringIndex = 0; ringIndex < rings; ringIndex++) {\n        vertexHandles[ringIndex] = [];\n        newVertexHandles[ringIndex] = [];\n        var vertexCoordinates = getVertexCoordinates(ringIndex);\n        for (var i = 0, len = vertexCoordinates.length; i < len; i++) {\n          vertexHandles[ringIndex].push(createVertexHandle.call(this, i, ringIndex, vertexCoordinates));\n          if (i < len - 1) {\n            newVertexHandles[ringIndex].push(createNewVertexHandle.call(this, i, ringIndex, vertexCoordinates));\n          }\n        }\n        newVertexHandles[ringIndex].push(createNewVertexHandle.call(this, vertexCoordinates.length - 1, ringIndex, vertexCoordinates));\n      }\n    } else {\n      var _ringIndex = 0;\n      var _vertexCoordinates = getVertexCoordinates(_ringIndex);\n      for (var _i2 = 0, _len = _vertexCoordinates.length; _i2 < _len; _i2++) {\n        vertexHandles[_ringIndex].push(createVertexHandle.call(this, _i2, _ringIndex, _vertexCoordinates));\n        if (_i2 < _len - 1) {\n          newVertexHandles[_ringIndex].push(createNewVertexHandle.call(this, _i2, _ringIndex, _vertexCoordinates));\n        }\n      }\n      if (newVertexHandles[_ringIndex].length && geoToEdit.getCoordinates().length === 2) {\n        newVertexHandles[_ringIndex][0].options.symbol['markerDx'] = 12;\n      }\n    }\n    this._addRefreshHook(function () {\n      if (pauseRefresh) {\n        return;\n      }\n      for (var _ringIndex2 in newVertexHandles) {\n        var ringCoordinates = getVertexCoordinates(_ringIndex2);\n        for (var _i3 = newVertexHandles[_ringIndex2].length - 1; _i3 >= 0; _i3--) {\n          newVertexHandles[_ringIndex2][_i3].refresh(_ringIndex2, ringCoordinates);\n        }\n      }\n      if (newVertexHandles[0].length && geoToEdit instanceof LineString) {\n        if (geoToEdit.getCoordinates().length === 2) {\n          newVertexHandles[0][0].options.symbol['markerDx'] = 12;\n        } else if (geoToEdit.getCoordinates().length > 2) {\n          newVertexHandles[0][0].options.symbol['markerDx'] = 0;\n        }\n      }\n      for (var _ringIndex3 in vertexHandles) {\n        var _ringCoordinates = getVertexCoordinates(_ringIndex3);\n        for (var _i4 = vertexHandles[_ringIndex3].length - 1; _i4 >= 0; _i4--) {\n          vertexHandles[_ringIndex3][_i4].refresh(_ringIndex3, _ringCoordinates);\n        }\n      }\n    });\n  };\n  _proto._refresh = function _refresh() {\n    if (this._refreshHooks) {\n      for (var i = this._refreshHooks.length - 1; i >= 0; i--) {\n        this._refreshHooks[i].call(this);\n      }\n    }\n  };\n  _proto._hideContext = function _hideContext() {\n    if (this._geometry) {\n      this._geometry.closeMenu();\n      this._geometry.closeInfoWindow();\n    }\n  };\n  _proto._addRefreshHook = function _addRefreshHook(fn) {\n    if (!fn) {\n      return;\n    }\n    if (!this._refreshHooks) {\n      this._refreshHooks = [];\n    }\n    this._refreshHooks.push(fn);\n  };\n  _proto._update = function _update(method) {\n    for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key = 1; _key < _len2; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n    this._exeHistory([method, args]);\n    this._recordHistory.apply(this, [method].concat(args));\n  };\n  _proto._updateCoordFromShadow = function _updateCoordFromShadow(ignoreRecord) {\n    var geoToEdit = this._shadow || this._geometry;\n    var coords = geoToEdit.getCoordinates();\n    var geo = this._geometry;\n    var updating = this._updating;\n    this._updating = true;\n    geo.setCoordinates(coords);\n    if (!ignoreRecord) {\n      this._recordHistory('setCoordinates', Coordinate.toNumberArrays(geo.getCoordinates()));\n    }\n    this._updating = updating;\n  };\n  _proto._recordHistory = function _recordHistory(method) {\n    if (!this._history) {\n      this._history = [];\n      this._historyPointer = 0;\n    }\n    for (var _len3 = arguments.length, args = new Array(_len3 > 1 ? _len3 - 1 : 0), _key2 = 1; _key2 < _len3; _key2++) {\n      args[_key2 - 1] = arguments[_key2];\n    }\n    if (this._history.length) {\n      var lastOperation = this._history[this._history.length - 1];\n      if (lastOperation[0] === method && JSON.stringify(lastOperation[1]) === JSON.stringify(args)) {\n        return;\n      }\n    }\n    if (this._historyPointer < this._history.length - 1) {\n      this._history.splice(this._historyPointer + 1);\n    }\n    this._history.push([method, args]);\n    this._historyPointer = this._history.length - 1;\n    this._geometry.fire('editrecord');\n  };\n  _proto.cancel = function cancel() {\n    if (!this._history || this._historyPointer === 0) {\n      return this;\n    }\n    this._historyPointer = 0;\n    var record = this._history[0];\n    this._exeAndReset(record);\n    return this;\n  };\n  _proto.undo = function undo() {\n    if (!this._history || this._historyPointer === 0) {\n      return this;\n    }\n    var record = this._history[--this._historyPointer];\n    this._exeAndReset(record);\n    return this;\n  };\n  _proto.redo = function redo() {\n    if (!this._history || this._historyPointer === this._history.length - 1) {\n      return this;\n    }\n    var record = this._history[++this._historyPointer];\n    this._exeAndReset(record);\n    return this;\n  };\n  _proto._exeAndReset = function _exeAndReset(record) {\n    if (this._updating) {\n      return;\n    }\n    this._exeHistory(record);\n    var history = this._history,\n      pointer = this._historyPointer;\n    this.stop();\n    this._history = history;\n    this._historyPointer = pointer;\n    this.start();\n  };\n  _proto._onDragStart = function _onDragStart() {\n    this._updating = true;\n  };\n  _proto._onDragEnd = function _onDragEnd() {\n    this._updating = false;\n  };\n  _proto._exeHistory = function _exeHistory(record) {\n    if (!Array.isArray(record)) {\n      return;\n    }\n    var updating = this._updating;\n    this._updating = true;\n    var geoToEdit = this._shadow || this._geometry;\n    var geo = this._geometry;\n    if (Array.isArray(record[0])) {\n      record[0].forEach(function (o) {\n        var m = o[0],\n          args = o.slice(1);\n        geoToEdit[m].apply(geoToEdit, args);\n        if (geoToEdit !== geo) {\n          geo[m].apply(geo, args);\n        }\n      });\n    } else {\n      geoToEdit[record[0]].apply(geoToEdit, record[1]);\n      if (geoToEdit !== geo) {\n        geo[record[0]].apply(geo, record[1]);\n      }\n    }\n    this._updating = updating;\n  };\n  return GeometryEditor;\n}(Eventable(Class));\nGeometryEditor.mergeOptions(options$C);\nvar TextEditable = {\n  startEditText: function startEditText() {\n    if (!this.getMap()) {\n      return this;\n    }\n    this.hide();\n    this.endEditText();\n    this._prepareEditor();\n    this._fireEvent('edittextstart');\n    return this;\n  },\n  endEditText: function endEditText() {\n    if (this._textEditor) {\n      var html = this._textEditor.innerHTML;\n      html = html.replace(/<p>/ig, '').replace(/<\\/p>/ig, '<br/>');\n      this._textEditor.innerHTML = html;\n      var content = this._textEditor.innerText.replace(/[\\r\\n]+$/gi, '');\n      this.setContent(content);\n      off(this._textEditor, 'mousedown dblclick', stopPropagation);\n      this.getMap().off('mousedown', this.endEditText, this);\n      this._editUIMarker.remove();\n      delete this._editUIMarker;\n      this._textEditor.onkeyup = null;\n      delete this._textEditor;\n      this.show();\n      this._fireEvent('edittextend');\n    }\n    return this;\n  },\n  isEditingText: function isEditingText() {\n    if (this._textEditor) {\n      return true;\n    }\n    return false;\n  },\n  getTextEditor: function getTextEditor() {\n    return this._editUIMarker;\n  },\n  _prepareEditor: function _prepareEditor() {\n    var map = this.getMap();\n    var editContainer = this._createEditor();\n    this._textEditor = editContainer;\n    map.on('mousedown', this.endEditText, this);\n    var offset = this._getEditorOffset();\n    this._editUIMarker = new UIMarker(this.getCoordinates(), {\n      'animation': null,\n      'content': editContainer,\n      'dx': offset.dx,\n      'dy': offset.dy\n    }).addTo(map);\n    this._setCursorToLast(this._textEditor);\n  },\n  _getEditorOffset: function _getEditorOffset() {\n    var symbol = this._getInternalSymbol() || {};\n    var dx = 0,\n      dy = 0;\n    var textAlign = symbol['textHorizontalAlignment'];\n    if (textAlign === 'middle' || isNil(textAlign)) {\n      dx = (symbol['textDx'] || 0) - 2;\n      dy = (symbol['textDy'] || 0) - 2;\n    } else {\n      dx = (symbol['markerDx'] || 0) - 2;\n      dy = (symbol['markerDy'] || 0) - 2;\n    }\n    return {\n      'dx': dx,\n      'dy': dy\n    };\n  },\n  _createEditor: function _createEditor() {\n    var content = this.getContent();\n    var labelSize = this.getSize(),\n      symbol = this._getInternalSymbol() || {},\n      width = labelSize.width,\n      textColor = symbol['textFill'] || '#000000',\n      textSize = symbol['textSize'] || 12,\n      height = labelSize.height,\n      lineColor = symbol['markerLineColor'] || '#000',\n      fill = symbol['markerFill'] || '#3398CC',\n      spacing = symbol['textLineSpacing'] || 0;\n    var editor = createEl('div');\n    editor.contentEditable = true;\n    editor.style.cssText = \"background:\" + fill + \"; border:1px solid \" + lineColor + \";\\n            color:\" + textColor + \";font-size:\" + textSize + \"px;width:\" + (width - 2) + \"px;height:\" + (height - 2) + \"px;margin: auto;\\n            line-height:\" + (textSize + spacing) + \"px;outline: 0; padding:0; margin:0;word-wrap: break-word;\\n            overflow: hidden;-webkit-user-modify: read-write-plaintext-only;\";\n    editor.innerText = content;\n    on(editor, 'mousedown dblclick', stopPropagation);\n    editor.onkeyup = function (event) {\n      var h = editor.style.height || 0;\n      if (event.keyCode === 13) {\n        editor.style.height = parseInt(h) + textSize / 2 + 'px';\n      }\n    };\n    return editor;\n  },\n  _setCursorToLast: function _setCursorToLast(obj) {\n    var range;\n    if (window.getSelection) {\n      obj.focus();\n      range = window.getSelection();\n      range.selectAllChildren(obj);\n      range.collapseToEnd();\n    } else if (document.selection) {\n      range = document.selection.createRange();\n      range.moveToElementText(obj);\n      range.collapse(false);\n      range.select();\n    }\n  }\n};\nTextMarker.include(TextEditable);\nGeometry.include({\n  animate: function animate$$1(styles, options, step) {\n    var _this = this;\n    if (this._animPlayer) {\n      this._animPlayer.finish();\n    }\n    if (isFunction(options)) {\n      step = options;\n    }\n    if (!options) {\n      options = {};\n    }\n    var map = this.getMap(),\n      projection = this._getProjection(),\n      stylesToAnimate = this._prepareAnimationStyles(styles);\n    var preTranslate;\n    var isFocusing = options['focus'];\n    delete this._animationStarted;\n    if (map) {\n      var renderer = map._getRenderer();\n      var framer = function framer(fn) {\n        renderer.callInNextFrame(fn);\n      };\n      options['framer'] = framer;\n    }\n    var player = Animation.animate(stylesToAnimate, options, function (frame) {\n      if (map && map.isRemoved()) {\n        player.finish();\n        return;\n      }\n      if (map && !_this._animationStarted && isFocusing) {\n        map.onMoveStart();\n      }\n      var styles = frame.styles;\n      for (var p in styles) {\n        if (p !== 'symbol' && p !== 'translate' && styles.hasOwnProperty(p)) {\n          var fnName = 'set' + p[0].toUpperCase() + p.slice(1);\n          _this[fnName](styles[p]);\n        }\n      }\n      var translate = styles['translate'];\n      if (translate) {\n        var toTranslate = translate;\n        if (preTranslate) {\n          toTranslate = translate.sub(preTranslate);\n        }\n        preTranslate = translate;\n        _this.translate(toTranslate);\n      }\n      var dSymbol = styles['symbol'];\n      if (dSymbol) {\n        var symbol = _this.getSymbol() || {};\n        _this.setSymbol(extendSymbol(symbol, dSymbol));\n      }\n      if (map && isFocusing) {\n        var pcenter = projection.project(_this.getCenter());\n        map._setPrjCenter(pcenter);\n        var e = map._parseEventFromCoord(projection.unproject(pcenter));\n        if (player.playState !== 'running') {\n          map.onMoveEnd(e);\n        } else {\n          map.onMoving(e);\n        }\n      }\n      _this._fireAnimateEvent(player.playState);\n      if (step) {\n        step(frame);\n      }\n    }, this);\n    this._animPlayer = player;\n    return this._animPlayer.play();\n  },\n  _prepareAnimationStyles: function _prepareAnimationStyles(styles) {\n    var symbol = this._getInternalSymbol();\n    var stylesToAnimate = {};\n    for (var p in styles) {\n      if (styles.hasOwnProperty(p)) {\n        var v = styles[p];\n        if (p !== 'translate' && p !== 'symbol') {\n          var fnName = 'get' + p[0].toUpperCase() + p.substring(1);\n          var current = this[fnName]();\n          stylesToAnimate[p] = [current, v];\n        } else if (p === 'symbol') {\n          var symbolToAnimate = void 0;\n          if (Array.isArray(styles['symbol'])) {\n            if (!Array.isArray(symbol)) {\n              throw new Error('geometry\\'symbol isn\\'t a composite symbol, while the symbol in styles is.');\n            }\n            symbolToAnimate = [];\n            var symbolInStyles = styles['symbol'];\n            for (var i = 0; i < symbolInStyles.length; i++) {\n              if (!symbolInStyles[i]) {\n                symbolToAnimate.push(null);\n                continue;\n              }\n              var a = {};\n              for (var sp in symbolInStyles[i]) {\n                if (symbolInStyles[i].hasOwnProperty(sp)) {\n                  a[sp] = [symbol[i][sp], symbolInStyles[i][sp]];\n                }\n              }\n              symbolToAnimate.push(a);\n            }\n          } else {\n            if (Array.isArray(symbol)) {\n              throw new Error('geometry\\'symbol is a composite symbol, while the symbol in styles isn\\'t.');\n            }\n            symbolToAnimate = {};\n            for (var _sp in v) {\n              if (v.hasOwnProperty(_sp)) {\n                symbolToAnimate[_sp] = [symbol[_sp], v[_sp]];\n              }\n            }\n          }\n          stylesToAnimate['symbol'] = symbolToAnimate;\n        } else if (p === 'translate') {\n          stylesToAnimate['translate'] = new Coordinate(v);\n        }\n      }\n    }\n    return stylesToAnimate;\n  },\n  _fireAnimateEvent: function _fireAnimateEvent(playState) {\n    if (playState === 'finished') {\n      delete this._animationStarted;\n      this._fireEvent('animateend');\n    } else if (playState === 'running') {\n      if (this._animationStarted) {\n        this._fireEvent('animating');\n      } else {\n        this._fireEvent('animatestart');\n        this._animationStarted = true;\n      }\n    }\n  }\n});\nvar DRAG_STAGE_LAYER_ID = INTERNAL_LAYER_PREFIX + '_drag_stage';\nvar EVENTS$3 = Browser$1.touch ? 'touchstart mousedown' : 'mousedown';\nvar GeometryDragHandler = function (_Handler) {\n  _inheritsLoose(GeometryDragHandler, _Handler);\n  function GeometryDragHandler(target) {\n    return _Handler.call(this, target) || this;\n  }\n  var _proto = GeometryDragHandler.prototype;\n  _proto.addHooks = function addHooks() {\n    this.target.on(EVENTS$3, this._startDrag, this);\n  };\n  _proto.removeHooks = function removeHooks() {\n    this._endDrag();\n    this.target.off(EVENTS$3, this._startDrag, this);\n    delete this.container;\n  };\n  _proto._prepareDragHandler = function _prepareDragHandler() {\n    this._dragHandler = new DragHandler(this.container);\n    this._dragHandler.on('dragging', this._dragging, this).on('mouseup', this._endDrag, this).enable();\n  };\n  _proto._prepareShadow = function _prepareShadow() {\n    var _this = this;\n    var target = this.target;\n    var needShadow = target.getLayer().options['renderer'] === 'canvas';\n    if (!needShadow) {\n      return;\n    }\n    this._prepareDragStageLayer();\n    if (this._shadow) {\n      this._shadow.remove();\n    }\n    var shadow = this._shadow = target.copy();\n    if (shadow.getGeometries) {\n      var shadows = shadow.getGeometries();\n      var geos = target.getGeometries();\n      shadows.forEach(function (g, i) {\n        _this._updateShadowSymbol(g, geos[i]);\n      });\n    } else {\n      this._updateShadowSymbol(shadow, target);\n    }\n    shadow.setId(null);\n    this._prepareShadowConnectors();\n  };\n  _proto._updateShadowSymbol = function _updateShadowSymbol(shadow, target) {\n    shadow.setSymbol(target._getInternalSymbol());\n    if (target.options['dragShadow']) {\n      var symbol = lowerSymbolOpacity(shadow._getInternalSymbol(), 0.5);\n      shadow.setSymbol(symbol);\n    }\n  };\n  _proto._prepareShadowConnectors = function _prepareShadowConnectors() {\n    var target = this.target;\n    var shadow = this._shadow;\n    var resources = this._dragStageLayer._getRenderer().resources;\n    var shadowConnectors = [];\n    if (ConnectorLine._hasConnectors(target)) {\n      var connectors = ConnectorLine._getConnectors(target);\n      for (var i = 0, l = connectors.length; i < l; i++) {\n        var targetConn = connectors[i];\n        var connOptions = targetConn.config(),\n          connSymbol = targetConn._getInternalSymbol();\n        connOptions['symbol'] = lowerSymbolOpacity(connSymbol, 0.5);\n        var conn = void 0;\n        if (targetConn.getConnectSource() === target) {\n          conn = new targetConn.constructor(shadow, targetConn.getConnectTarget(), connOptions);\n        } else {\n          conn = new targetConn.constructor(targetConn.getConnectSource(), shadow, connOptions);\n        }\n        shadowConnectors.push(conn);\n        if (targetConn.getLayer() && targetConn.getLayer()._getRenderer()) {\n          resources.merge(targetConn.getLayer()._getRenderer().resources);\n        }\n      }\n    }\n    this._shadowConnectors = shadowConnectors;\n    shadowConnectors.push(shadow);\n    this._dragStageLayer.bringToFront().addGeometry(shadowConnectors);\n  };\n  _proto._onTargetUpdated = function _onTargetUpdated() {\n    if (this._shadow) {\n      this._shadow.setSymbol(this.target._getSymbol());\n    }\n  };\n  _proto._prepareDragStageLayer = function _prepareDragStageLayer() {\n    var map = this.target.getMap(),\n      layer = this.target.getLayer();\n    this._dragStageLayer = map.getLayer(DRAG_STAGE_LAYER_ID);\n    if (!this._dragStageLayer) {\n      this._dragStageLayer = new VectorLayer(DRAG_STAGE_LAYER_ID, {\n        enableAltitude: layer.options['enableAltitude'],\n        altitudeProperty: layer.options['altitudeProperty']\n      });\n      map.addLayer(this._dragStageLayer);\n    }\n    var resources = new ResourceCache();\n    resources.merge(layer._getRenderer().resources);\n    this._dragStageLayer._getRenderer().resources = resources;\n  };\n  _proto._startDrag = function _startDrag(param) {\n    var map = this.target.getMap();\n    if (!map) {\n      return;\n    }\n    var parent = this.target._getParent();\n    if (parent) {\n      return;\n    }\n    if (this.isDragging()) {\n      return;\n    }\n    var domEvent = param['domEvent'];\n    if (domEvent.touches && domEvent.touches.length > 1 || domEvent.button === 2) {\n      return;\n    }\n    this.container = map._panels.mapWrapper || map._containerDOM;\n    this.target.on('click', this._endDrag, this);\n    this._lastCoord = this._correctCoord(param['coordinate']);\n    this._lastPoint = param['containerPoint'];\n    this._prepareDragHandler();\n    this._dragHandler.onMouseDown(param['domEvent']);\n    on(this.container, 'mouseleave', this._endDrag, this);\n    this._startParam = param;\n    this._moved = false;\n    return;\n  };\n  _proto._dragging = function _dragging(param) {\n    var target = this.target;\n    var map = target.getMap(),\n      e = map._parseEvent(param['domEvent']);\n    var domEvent = e['domEvent'];\n    if (domEvent.touches && domEvent.touches.length > 1) {\n      return;\n    }\n    var visualHeight = map._getVisualHeight(map.options['maxVisualPitch']);\n    if (e.containerPoint.y < map.height - visualHeight) {\n      return;\n    }\n    if (!this._moved) {\n      this._moved = true;\n      target.on('symbolchange', this._onTargetUpdated, this);\n      this._isDragging = true;\n      this._prepareShadow();\n      if (this._shadow) {\n        if (!target.options['dragShadow']) {\n          target.hide();\n        }\n        this._shadow._fireEvent('dragstart', e);\n      }\n      this.target._fireEvent('dragstart', this._startParam || e);\n      delete this._startParam;\n      return;\n    }\n    var geo = this._shadow || target;\n    var axis = geo.options['dragOnAxis'],\n      dragOnScreenAxis = geo.options['dragOnScreenAxis'],\n      point = e['containerPoint'];\n    var coord = e['coordinate'];\n    this._lastPoint = this._lastPoint || point;\n    this._lastCoord = this._lastCoord || coord;\n    if (dragOnScreenAxis) {\n      if (axis === 'x') {\n        point.y = this._lastPoint.y;\n      } else if (axis === 'y') {\n        point.x = this._lastPoint.x;\n      }\n      coord = map.containerPointToCoord(point);\n    } else {\n      coord = this._correctCoord(coord);\n    }\n    var pointOffset = point.sub(this._lastPoint);\n    var coordOffset = coord.sub(this._lastCoord);\n    if (!dragOnScreenAxis) {\n      if (axis === 'x') {\n        pointOffset.y = coordOffset.y = 0;\n      } else if (axis === 'y') {\n        pointOffset.x = coordOffset.x = 0;\n      }\n    }\n    this._lastPoint = point;\n    this._lastCoord = coord;\n    geo.translate(coordOffset);\n    if (geo !== target && !target.options['dragShadow']) {\n      target.translate(coordOffset);\n    }\n    e['coordOffset'] = coordOffset;\n    e['pointOffset'] = pointOffset;\n    geo._fireEvent('dragging', e);\n    if (geo !== target) {\n      target._fireEvent('dragging', e);\n    }\n  };\n  _proto._endDrag = function _endDrag(param) {\n    if (this._dragHandler) {\n      this._dragHandler.disable();\n      delete this._dragHandler;\n    }\n    if (this.container) {\n      off(this.container, 'mouseleave', this._endDrag, this);\n    }\n    if (!this.target) {\n      return;\n    }\n    var target = this.target;\n    target.off('click', this._endDrag, this);\n    target.off('symbolchange', this._onTargetUpdated, this);\n    delete this._lastCoord;\n    delete this._lastPoint;\n    this._isDragging = false;\n    var map = target.getMap();\n    if (this.enabled() && map) {\n      var e = map._parseEvent(param ? param['domEvent'] : null);\n      this._updateTargetAndRemoveShadow(e);\n      if (this._moved) {\n        target._fireEvent('dragend', e);\n      }\n    }\n  };\n  _proto.isDragging = function isDragging() {\n    if (!this._isDragging) {\n      return false;\n    }\n    return true;\n  };\n  _proto._updateTargetAndRemoveShadow = function _updateTargetAndRemoveShadow(eventParam) {\n    if (!this._shadow) {\n      return;\n    }\n    var target = this.target,\n      map = target.getMap();\n    if (!target.options['dragShadow']) {\n      target.show();\n    }\n    var shadow = this._shadow;\n    if (shadow) {\n      if (target.options['dragShadow']) {\n        var shadowFirst = shadow.getFirstCoordinate();\n        var first = target.getFirstCoordinate();\n        var offset = shadowFirst.sub(first);\n        target.translate(offset);\n      }\n      shadow._fireEvent('dragend', eventParam);\n      shadow.remove();\n      delete this._shadow;\n    }\n    if (this._shadowConnectors) {\n      map.getLayer(DRAG_STAGE_LAYER_ID).removeGeometry(this._shadowConnectors);\n      delete this._shadowConnectors;\n    }\n    if (this._dragStageLayer) {\n      this._dragStageLayer._getRenderer().resources = new ResourceCache();\n      this._dragStageLayer.remove();\n    }\n  };\n  _proto._correctCoord = function _correctCoord(coord) {\n    var map = this.target.getMap();\n    if (!map.getPitch()) {\n      return coord;\n    }\n    var target = this.target;\n    if (!target.getMinAltitude()) {\n      return coord;\n    }\n    var alt = (target.getMinAltitude() + target.getMaxAltitude()) / 2;\n    return map.locateByPoint(coord, 0, -alt);\n  };\n  return GeometryDragHandler;\n}(Handler$1);\nGeometry.mergeOptions({\n  'draggable': false,\n  'dragShadow': true,\n  'dragOnAxis': null,\n  'dragOnScreenAxis': false\n});\nGeometry.addInitHook('addHandler', 'draggable', GeometryDragHandler);\nGeometry.include({\n  isDragging: function isDragging() {\n    if (this._getParent()) {\n      return this._getParent().isDragging();\n    }\n    if (this['draggable']) {\n      return this['draggable'].isDragging();\n    }\n    return false;\n  }\n});\nGeometry.include({\n  startEdit: function startEdit(opts) {\n    var map = this.getMap();\n    if (!map || !this.options['editable']) {\n      return this;\n    }\n    if (this._editor) {\n      this.endEdit();\n    }\n    this._editor = new GeometryEditor(this, opts);\n    this._editor.start();\n    if (!this._getParent()) {\n      this.fire('editstart');\n    }\n    map.getRenderer().setToRedraw();\n    return this;\n  },\n  endEdit: function endEdit() {\n    if (this._editor) {\n      this._editor.stop();\n      delete this._editor;\n      if (!this._getParent()) {\n        this.fire('editend');\n      }\n      var map = this.getMap();\n      if (map) {\n        map.getRenderer().setToRedraw();\n      }\n    }\n    return this;\n  },\n  redoEdit: function redoEdit() {\n    if (!this.isEditing()) {\n      return this;\n    }\n    this._editor.redo();\n    if (!this._getParent()) {\n      this.fire('redoedit');\n    }\n    return this;\n  },\n  undoEdit: function undoEdit() {\n    if (!this.isEditing()) {\n      return this;\n    }\n    this._editor.undo();\n    if (!this._getParent()) {\n      this.fire('undoedit');\n    }\n    return this;\n  },\n  cancelEdit: function cancelEdit() {\n    if (!this.isEditing()) {\n      return this;\n    }\n    this._editor.cancel();\n    if (!this._getParent()) {\n      this.fire('canceledit');\n    }\n    return this;\n  },\n  isEditing: function isEditing() {\n    if (this._editor) {\n      return this._editor.isEditing();\n    }\n    return false;\n  }\n});\nGeometry.include({\n  _onEvent: function _onEvent(event, type) {\n    var map = this.getMap();\n    if (!map) {\n      return;\n    }\n    var eventType = type || this._getEventTypeToFire(event);\n    if (eventType === 'contextmenu' && this.listens('contextmenu')) {\n      stopPropagation(event);\n      preventDefault(event);\n    }\n    var params = map._getEventParams(event);\n    if (isNumber(this._pickGeometryIndex)) {\n      params.pickGeometryIndex = this._pickGeometryIndex;\n    }\n    this._fireEvent(eventType, params);\n  },\n  _getEventTypeToFire: function _getEventTypeToFire(domEvent) {\n    return domEvent.type;\n  }\n});\nGeometry.include({\n  setInfoWindow: function setInfoWindow(options) {\n    this.removeInfoWindow();\n    if (options instanceof InfoWindow) {\n      this._infoWindow = options;\n      this._infoWinOptions = extend({}, this._infoWindow.options);\n      this._infoWindow.addTo(this);\n      return this;\n    }\n    this._infoWinOptions = extend({}, options);\n    if (this._infoWindow) {\n      this._infoWindow.setOptions(options);\n    } else if (this.getMap()) {\n      this._bindInfoWindow();\n    }\n    return this;\n  },\n  getInfoWindow: function getInfoWindow() {\n    if (!this._infoWindow) {\n      return null;\n    }\n    return this._infoWindow;\n  },\n  openInfoWindow: function openInfoWindow(coordinate) {\n    if (!this.getMap()) {\n      return this;\n    }\n    if (!coordinate) {\n      coordinate = this.getCenter();\n    }\n    if (!this._infoWindow) {\n      if (this._infoWinOptions && this.getMap()) {\n        this._bindInfoWindow();\n        this._infoWindow.show(coordinate);\n      }\n    } else {\n      this._infoWindow.show(coordinate);\n    }\n    return this;\n  },\n  closeInfoWindow: function closeInfoWindow() {\n    if (this._infoWindow) {\n      this._infoWindow.hide();\n    }\n    return this;\n  },\n  removeInfoWindow: function removeInfoWindow() {\n    this._unbindInfoWindow();\n    delete this._infoWinOptions;\n    delete this._infoWindow;\n    return this;\n  },\n  _bindInfoWindow: function _bindInfoWindow() {\n    var options = this._infoWinOptions;\n    if (!options) {\n      return this;\n    }\n    this._infoWindow = new InfoWindow(options);\n    this._infoWindow.addTo(this);\n    return this;\n  },\n  _unbindInfoWindow: function _unbindInfoWindow() {\n    if (this._infoWindow) {\n      this.closeInfoWindow();\n      this._infoWindow.remove();\n      delete this._infoWindow;\n    }\n    return this;\n  }\n});\nvar TILE_POINT = new Point(0, 0);\nvar TEMP_POINT$5 = new Point(0, 0);\nvar TEMP_POINT1$2 = new Point(0, 0);\nvar TEMP_POINT2$2 = new Point(0, 0);\nvar EMPTY_ARRAY$2 = [];\nvar TileWorkerConnection = function (_Actor) {\n  _inheritsLoose(TileWorkerConnection, _Actor);\n  function TileWorkerConnection() {\n    return _Actor.call(this, imageFetchWorkerKey) || this;\n  }\n  var _proto = TileWorkerConnection.prototype;\n  _proto.checkUrl = function checkUrl(url) {\n    if (!url || !isString(url)) {\n      return url;\n    }\n    return getAbsoluteURL(url);\n  };\n  _proto.fetchImage = function fetchImage(url, workerId, cb, fetchOptions) {\n    url = this.checkUrl(url);\n    var data = {\n      url: url,\n      fetchOptions: fetchOptions\n    };\n    this.send(data, EMPTY_ARRAY$2, cb, workerId);\n  };\n  return TileWorkerConnection;\n}(Actor);\nvar BLANK_IMAGE = new Image();\nvar TileLayerCanvasRenderer = function (_CanvasRenderer) {\n  _inheritsLoose(TileLayerCanvasRenderer, _CanvasRenderer);\n  function TileLayerCanvasRenderer(layer) {\n    var _this;\n    _this = _CanvasRenderer.call(this, layer) || this;\n    _this.tilesInView = {};\n    _this.tilesLoading = {};\n    _this._parentTiles = [];\n    _this._childTiles = [];\n    _this._tileQueue = [];\n    _this.tileCache = new LRUCache(layer.options['maxCacheSize'], function (tile) {\n      _this.deleteTile(tile);\n    });\n    if (Browser$1.decodeImageInWorker && _this.layer.options['decodeImageInWorker'] && (layer.options['renderer'] === 'gl' || !Browser$1.safari && !Browser$1.iosWeixin)) {\n      _this._tileImageWorkerConn = new TileWorkerConnection();\n    }\n    _this._compareTiles = compareTiles.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n  var _proto2 = TileLayerCanvasRenderer.prototype;\n  _proto2.getCurrentTileZoom = function getCurrentTileZoom() {\n    return this._tileZoom;\n  };\n  _proto2.draw = function draw(timestamp, context) {\n    var map = this.getMap();\n    if (!this.isDrawable()) {\n      return;\n    }\n    var mask2DExtent = this.prepareCanvas();\n    if (mask2DExtent) {\n      if (!mask2DExtent.intersects(this.canvasExtent2D)) {\n        this.completeRender();\n        return;\n      }\n    }\n    if (this._renderTimestamp !== timestamp) {\n      this._consumeTileQueue();\n      this._computeAvgTileAltitude();\n      this._renderTimestamp = timestamp;\n    }\n    var currentTiles;\n    var hasFreshTiles = false;\n    var frameTiles = this._frameTiles;\n    if (frameTiles && timestamp === frameTiles.timestamp) {\n      if (frameTiles.empty) {\n        return;\n      }\n      currentTiles = frameTiles;\n    } else {\n      currentTiles = this._getTilesInCurrentFrame();\n      if (!currentTiles) {\n        this._frameTiles = {\n          empty: true,\n          timestamp: timestamp\n        };\n        this.completeRender();\n        return;\n      }\n      hasFreshTiles = true;\n      this._frameTiles = currentTiles;\n      this._frameTiles.timestamp = timestamp;\n      if (currentTiles.loadingCount) {\n        this.loadTileQueue(currentTiles.tileQueue);\n      }\n    }\n    var _currentTiles = currentTiles,\n      tiles = _currentTiles.tiles,\n      childTiles = _currentTiles.childTiles,\n      parentTiles = _currentTiles.parentTiles,\n      placeholders = _currentTiles.placeholders,\n      loading = _currentTiles.loading,\n      loadingCount = _currentTiles.loadingCount;\n    this._drawTiles(tiles, parentTiles, childTiles, placeholders, context);\n    if (!loadingCount) {\n      if (!loading) {\n        if (!map.isAnimating() && (this._parentTiles.length || this._childTiles.length)) {\n          this._parentTiles = [];\n          this._childTiles = [];\n          this.setToRedraw();\n        }\n        this.completeRender();\n      }\n    }\n    if (hasFreshTiles) {\n      this._retireTiles();\n    }\n  };\n  _proto2.getTileGridsInCurrentFrame = function getTileGridsInCurrentFrame() {\n    return this._frameTileGrids;\n  };\n  _proto2._getTilesInCurrentFrame = function _getTilesInCurrentFrame() {\n    var map = this.getMap();\n    var layer = this.layer;\n    var tileGrids = layer.getTiles();\n    this._frameTileGrids = tileGrids;\n    tileGrids = tileGrids.tileGrids;\n    if (!tileGrids || !tileGrids.length) {\n      return null;\n    }\n    var count = tileGrids.reduce(function (acc, curr) {\n      return acc + (curr && curr.tiles && curr.tiles.length || 0);\n    }, 0);\n    if (count >= this.tileCache.max / 2) {\n      this.tileCache.setMaxSize(count * 2 + 1);\n    }\n    var loadingCount = 0;\n    var loading = false;\n    var checkedTiles = {};\n    var tiles = [],\n      parentTiles = [],\n      parentKeys = {},\n      childTiles = [],\n      childKeys = {},\n      placeholders = [],\n      placeholderKeys = {};\n    var tileQueue = {};\n    var preLoadingCount = this._markTiles(),\n      loadingLimit = this._getLoadLimit();\n    var l = tileGrids.length;\n    this._tileZoom = tileGrids[0]['zoom'];\n    for (var i = 0; i < l; i++) {\n      var tileGrid = tileGrids[i];\n      var gridTiles = tileGrid['tiles'];\n      var parents = tileGrid['parents'] || EMPTY_ARRAY$2;\n      var parentCount = parents.length;\n      var allTiles = parents.concat(gridTiles);\n      var placeholder = void 0;\n      if (allTiles.length) {\n        placeholder = this._generatePlaceHolder(allTiles[0].res);\n      }\n      for (var j = 0, _l = allTiles.length; j < _l; j++) {\n        var tile = allTiles[j];\n        var tileId = tile['id'];\n        var isParentTile = j < parentCount;\n        var tileLoading = false;\n        if (this._isLoadingTile(tileId)) {\n          tileLoading = loading = true;\n          this.tilesLoading[tileId].current = true;\n        } else {\n          var cached = this._getCachedTile(tileId, isParentTile);\n          if (cached) {\n            if (!isParentTile) {\n              if (cached.image && this.isTileFadingIn(cached.image)) {\n                tileLoading = loading = true;\n                this.setToRedraw();\n              }\n              tiles.push(cached);\n              if (!this.isTileComplete(cached)) {\n                tileLoading = true;\n              }\n            }\n          } else {\n            tileLoading = loading = true;\n            var hitLimit = loadingLimit && loadingCount + preLoadingCount[0] > loadingLimit;\n            if (!hitLimit && (!map.isInteracting() || map.isMoving() || map.isRotating())) {\n              loadingCount++;\n              var key = tileId;\n              tileQueue[key] = tile;\n            }\n          }\n        }\n        if (isParentTile) continue;\n        if (!tileLoading) continue;\n        if (checkedTiles[tileId]) continue;\n        checkedTiles[tileId] = 1;\n        if (placeholder && !placeholderKeys[tileId]) {\n          tile.cache = false;\n          placeholders.push({\n            image: placeholder,\n            info: tile\n          });\n          placeholderKeys[tileId] = 1;\n        }\n        var children = this._findChildTiles(tile);\n        if (children.length) {\n          children.forEach(function (c) {\n            if (!childKeys[c.info.id]) {\n              childTiles.push(c);\n              childKeys[c.info.id] = 1;\n            }\n          });\n        }\n        if (!children.length || children.length !== 4) {\n          var parentTile = this._findParentTile(tile);\n          if (parentTile) {\n            var parentId = parentTile.info.id;\n            if (parentKeys[parentId] === undefined) {\n              parentKeys[parentId] = parentTiles.length;\n              parentTiles.push(parentTile);\n            }\n          }\n        }\n      }\n    }\n    this.tileCache.shrink();\n    return {\n      childTiles: childTiles,\n      parentTiles: parentTiles,\n      tiles: tiles,\n      placeholders: placeholders,\n      loading: loading,\n      loadingCount: loadingCount,\n      tileQueue: tileQueue\n    };\n  };\n  _proto2.removeTileCache = function removeTileCache(tileId) {\n    delete this.tilesInView[tileId];\n    this.tileCache.remove(tileId);\n  };\n  _proto2.isTileCachedOrLoading = function isTileCachedOrLoading(tileId) {\n    return this.tileCache.get(tileId) || this.tilesInView[tileId] || this.tilesLoading[tileId];\n  };\n  _proto2.isTileCached = function isTileCached(tileId) {\n    return !!(this.tileCache.get(tileId) || this.tilesInView[tileId]);\n  };\n  _proto2.isTileFadingIn = function isTileFadingIn(tileImage) {\n    return this._getTileFadingOpacity(tileImage) < 1;\n  };\n  _proto2._drawTiles = function _drawTiles(tiles, parentTiles, childTiles, placeholders, parentContext) {\n    var _this2 = this;\n    if (parentTiles.length) {\n      parentTiles.sort(this._compareTiles);\n      this._parentTiles = parentTiles;\n    }\n    if (childTiles.length) {\n      this._childTiles = childTiles;\n      this._childTiles.sort(this._compareTiles);\n    }\n    var drawBackground = true;\n    var backgroundTimestamp = this.canvas._parentTileTimestamp;\n    if (this.layer.constructor === TileLayer || this.layer.constructor === WMSTileLayer) {\n      if (this._renderTimestamp === backgroundTimestamp) {\n        drawBackground = false;\n      } else {\n        this.canvas._parentTileTimestamp = this._renderTimestamp;\n      }\n    }\n    var context = {\n      tiles: tiles,\n      parentTiles: this._parentTiles,\n      childTiles: this._childTiles,\n      parentContext: parentContext\n    };\n    this.onDrawTileStart(context, parentContext);\n    if (drawBackground && this.layer.options['opacity'] === 1) {\n      this.layer._silentConfig = true;\n      var fadingAnimation = this.layer.options['fadeAnimation'];\n      this.layer.options['fadeAnimation'] = false;\n      this.drawingChildTiles = true;\n      this._childTiles.forEach(function (t) {\n        return _this2._drawTile(t.info, t.image, parentContext);\n      });\n      delete this.drawingChildTiles;\n      this.drawingParentTiles = true;\n      this._parentTiles.forEach(function (t) {\n        return _this2._drawTile(t.info, t.image, parentContext);\n      });\n      delete this.drawingParentTiles;\n      this.layer.options['fadeAnimation'] = fadingAnimation;\n      this.layer._silentConfig = false;\n    }\n    this.drawingCurrentTiles = true;\n    tiles.sort(this._compareTiles);\n    for (var i = 0, l = tiles.length; i < l; i++) {\n      this._drawTileAndCache(tiles[i], parentContext);\n    }\n    delete this.drawingCurrentTiles;\n    if (drawBackground && this.layer.options['opacity'] < 1) {\n      this.layer._silentConfig = true;\n      var _fadingAnimation = this.layer.options['fadeAnimation'];\n      this.layer.options['fadeAnimation'] = false;\n      this.drawingChildTiles = true;\n      this._childTiles.forEach(function (t) {\n        return _this2._drawTile(t.info, t.image, parentContext);\n      });\n      delete this.drawingChildTiles;\n      this.drawingParentTiles = true;\n      this._parentTiles.forEach(function (t) {\n        return _this2._drawTile(t.info, t.image, parentContext);\n      });\n      delete this.drawingParentTiles;\n      this.layer.options['fadeAnimation'] = _fadingAnimation;\n      this.layer._silentConfig = false;\n    }\n    placeholders.forEach(function (t) {\n      return _this2._drawTile(t.info, t.image, parentContext);\n    });\n    this.onDrawTileEnd(context, parentContext);\n  };\n  _proto2.onDrawTileStart = function onDrawTileStart() {};\n  _proto2.onDrawTileEnd = function onDrawTileEnd() {};\n  _proto2._drawTile = function _drawTile(info, image, parentContext) {\n    if (image) {\n      this.drawTile(info, image, parentContext);\n    }\n  };\n  _proto2._drawTileAndCache = function _drawTileAndCache(tile, parentContext) {\n    this.tilesInView[tile.info.id] = tile;\n    this._drawTile(tile.info, tile.image, parentContext);\n  };\n  _proto2.drawOnInteracting = function drawOnInteracting(event, timestamp, context) {\n    this.draw(timestamp, context);\n  };\n  _proto2.needToRedraw = function needToRedraw() {\n    var map = this.getMap();\n    if (this._tileQueue.length) {\n      return true;\n    }\n    if (map.getPitch()) {\n      return _CanvasRenderer.prototype.needToRedraw.call(this);\n    }\n    if (map.isRotating() || map.isZooming()) {\n      return true;\n    }\n    if (map.isMoving()) {\n      return !!this.layer.options['forceRenderOnMoving'];\n    }\n    return _CanvasRenderer.prototype.needToRedraw.call(this);\n  };\n  _proto2.hitDetect = function hitDetect() {\n    return false;\n  };\n  _proto2._getLoadLimit = function _getLoadLimit() {\n    if (this.getMap().isInteracting()) {\n      return this.layer.options['loadingLimitOnInteracting'];\n    }\n    return this.layer.options['loadingLimit'] || 0;\n  };\n  _proto2.isDrawable = function isDrawable() {\n    if (this.getMap().getPitch()) {\n      if (console) {\n        console.warn('TileLayer with canvas renderer can\\'t be pitched, use gl renderer (\\'renderer\\' : \\'gl\\') instead.');\n      }\n      this.clear();\n      return false;\n    }\n    return true;\n  };\n  _proto2.clear = function clear() {\n    this._retireTiles(true);\n    this.tileCache.reset();\n    this.tilesInView = {};\n    this.tilesLoading = {};\n    this._parentTiles = [];\n    this._childTiles = [];\n    _CanvasRenderer.prototype.clear.call(this);\n  };\n  _proto2._isLoadingTile = function _isLoadingTile(tileId) {\n    return !!this.tilesLoading[tileId];\n  };\n  _proto2.clipCanvas = function clipCanvas(context) {\n    return _CanvasRenderer.prototype.clipCanvas.call(this, context);\n  };\n  _proto2._clipByPitch = function _clipByPitch(ctx) {\n    var map = this.getMap();\n    if (map.getPitch() <= map.options['maxVisualPitch']) {\n      return false;\n    }\n    if (!this.layer.options['clipByPitch']) {\n      return false;\n    }\n    var clipExtent = map.getContainerExtent();\n    var r = map.getDevicePixelRatio();\n    ctx.save();\n    ctx.strokeStyle = 'rgba(0, 0, 0, 0)';\n    ctx.beginPath();\n    ctx.rect(0, Math.ceil(clipExtent.ymin) * r, Math.ceil(clipExtent.getWidth()) * r, Math.ceil(clipExtent.getHeight()) * r);\n    ctx.stroke();\n    ctx.clip();\n    return true;\n  };\n  _proto2.loadTileQueue = function loadTileQueue(tileQueue) {\n    for (var p in tileQueue) {\n      if (tileQueue.hasOwnProperty(p)) {\n        var tile = tileQueue[p];\n        var tileImage = this.loadTile(tile);\n        if (tileImage.loadTime === undefined) {\n          this.tilesLoading[tile['id']] = {\n            image: tileImage,\n            current: true,\n            info: tile\n          };\n        }\n      }\n    }\n  };\n  _proto2.loadTile = function loadTile(tile) {\n    var _this3 = this;\n    var tileImage = {};\n    if (this.loadTileBitmap) {\n      var onLoad = function onLoad(bitmap) {\n        _this3.onTileLoad(bitmap, tile);\n      };\n      this.loadTileBitmap(tile['url'], tile, onLoad);\n    } else if (this._tileImageWorkerConn && this.loadTileImage === this.constructor.prototype.loadTileImage) {\n      this._fetchImage(tileImage, tile);\n    } else {\n      var tileSize = this.layer.getTileSize(tile.layer);\n      tileImage = new Image();\n      tileImage.width = tileSize['width'];\n      tileImage.height = tileSize['height'];\n      tileImage.onload = this.onTileLoad.bind(this, tileImage, tile);\n      tileImage.onerror = this.onTileError.bind(this, tileImage, tile);\n      this.loadTileImage(tileImage, tile['url']);\n    }\n    return tileImage;\n  };\n  _proto2._fetchImage = function _fetchImage(image, tile) {\n    var _this4 = this;\n    if (image instanceof Image) {\n      image.src = tile.url;\n    } else {\n      var x = tile.x,\n        y = tile.y;\n      var workerId = Math.abs(x + y) % this._tileImageWorkerConn.workers.length;\n      this._tileImageWorkerConn.fetchImage(tile.url, workerId, function (err, data) {\n        if (err) {\n          _this4.onTileError(image, tile, err);\n        } else {\n          getImageBitMap(data, function (bitmap) {\n            _this4.onTileLoad(bitmap, tile);\n          });\n        }\n      }, this.layer.options['fetchOptions'] || {\n        referrer: document.location.href,\n        headers: {\n          accept: 'image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8'\n        }\n      });\n    }\n  };\n  _proto2.loadTileImage = function loadTileImage(tileImage, url) {\n    var crossOrigin = this.layer.options['crossOrigin'];\n    if (!isNil(crossOrigin)) {\n      tileImage.crossOrigin = crossOrigin;\n    }\n    return loadImage(tileImage, [url]);\n  };\n  _proto2.abortTileLoading = function abortTileLoading(tileImage, tileInfo) {\n    if (tileInfo && tileInfo.id !== undefined) {\n      this.removeTileLoading(tileInfo);\n    }\n    if (!tileImage) return;\n    tileImage.onload = falseFn;\n    tileImage.onerror = falseFn;\n    tileImage.src = emptyImageUrl;\n  };\n  _proto2.onTileLoad = function onTileLoad(tileImage, tileInfo) {\n    this.removeTileLoading(tileInfo);\n    this._tileQueue.push({\n      tileInfo: tileInfo,\n      tileData: tileImage\n    });\n    this.setToRedraw();\n  };\n  _proto2.removeTileLoading = function removeTileLoading(tileInfo) {\n    delete this.tilesLoading[tileInfo.id];\n    this.setToRedraw();\n  };\n  _proto2._consumeTileQueue = function _consumeTileQueue() {\n    var count = 0;\n    var limit = this.layer.options['tileLimitPerFrame'];\n    var queue = this._tileQueue;\n    while (queue.length && (limit <= 0 || count < limit)) {\n      var _queue$shift = queue.shift(),\n        tileData = _queue$shift.tileData,\n        tileInfo = _queue$shift.tileInfo;\n      if (!this.checkTileInQueue(tileData, tileInfo)) {\n        continue;\n      }\n      this.consumeTile(tileData, tileInfo);\n      count++;\n    }\n  };\n  _proto2._computeAvgTileAltitude = function _computeAvgTileAltitude() {\n    var sumMin = 0;\n    var sumMax = 0;\n    var count = 0;\n    for (var p in this.tilesInView) {\n      var info = this.tilesInView[p] && this.tilesInView[p].info;\n      if (info) {\n        sumMin += info.minAltitude || 0;\n        sumMax += info.maxAltitude || 0;\n        count++;\n      }\n    }\n    this.avgMinAltitude = sumMin / count;\n    this.avgMaxAltitude = sumMax / count;\n  };\n  _proto2.checkTileInQueue = function checkTileInQueue() {\n    return true;\n  };\n  _proto2.consumeTile = function consumeTile(tileImage, tileInfo) {\n    if (!this.layer) {\n      return;\n    }\n    if (!this.tilesInView) {\n      return;\n    }\n    var e = {\n      tile: tileInfo,\n      tileImage: tileImage\n    };\n    this.layer.fire('tileload', e);\n    tileImage = e.tileImage;\n    this.resetTileLoadTime(tileImage);\n    this.removeTileLoading(tileInfo);\n    this._addTileToCache(tileInfo, tileImage);\n    this.setToRedraw();\n  };\n  _proto2.resetTileLoadTime = function resetTileLoadTime(tileImage) {\n    tileImage.loadTime = now();\n  };\n  _proto2.onTileError = function onTileError(tileImage, tileInfo) {\n    if (!this.layer) {\n      return;\n    }\n    tileImage.onerrorTick = tileImage.onerrorTick || 0;\n    var tileRetryCount = this.layer.options['tileRetryCount'];\n    if (tileRetryCount > tileImage.onerrorTick) {\n      tileImage.onerrorTick++;\n      this._fetchImage(tileImage, tileInfo);\n      this.removeTileLoading(tileInfo);\n      return;\n    }\n    var errorUrl = this.layer.options['errorUrl'];\n    if (errorUrl) {\n      if (tileImage instanceof Image && tileImage.src !== errorUrl) {\n        tileImage.src = errorUrl;\n        this.removeTileLoading(tileInfo);\n        return;\n      } else {\n        tileImage = new Image();\n        tileImage.src = errorUrl;\n      }\n    }\n    tileImage = tileImage instanceof Image ? tileImage : BLANK_IMAGE;\n    this.abortTileLoading(tileImage, tileInfo);\n    tileImage.loadTime = 0;\n    this.removeTileLoading(tileInfo);\n    this._addTileToCache(tileInfo, tileImage);\n    this.setToRedraw();\n    this.layer.fire('tileerror', {\n      tile: tileInfo\n    });\n  };\n  _proto2.drawTile = function drawTile(tileInfo, tileImage) {\n    if (!tileImage || !this.getMap()) {\n      return;\n    }\n    var extent2d = tileInfo.extent2d,\n      offset = tileInfo.offset;\n    var point = TILE_POINT.set(extent2d.xmin - offset[0], extent2d.ymax - offset[1]),\n      tileZoom = tileInfo.z,\n      tileId = tileInfo.id;\n    var map = this.getMap(),\n      zoom = map.getZoom(),\n      ctx = this.context,\n      cp = map._pointAtResToContainerPoint(point, tileInfo.res, 0, TEMP_POINT$5),\n      bearing = map.getBearing(),\n      transformed = bearing || zoom !== tileZoom;\n    var opacity = this.getTileOpacity(tileImage, tileInfo);\n    var alpha = ctx.globalAlpha;\n    if (opacity < 1) {\n      ctx.globalAlpha = opacity;\n    }\n    if (!transformed) {\n      cp._round();\n    }\n    var x = cp.x,\n      y = cp.y;\n    var w = tileInfo.extent2d.xmax - tileInfo.extent2d.xmin;\n    var h = tileInfo.extent2d.ymax - tileInfo.extent2d.ymin;\n    if (transformed) {\n      ctx.save();\n      ctx.translate(x, y);\n      if (bearing) {\n        ctx.rotate(-bearing * Math.PI / 180);\n      }\n      w += 0.5;\n      h += 0.5;\n      var res = map._getResolution();\n      if (res !== tileInfo.res) {\n        var scale = tileInfo.res / res;\n        ctx.scale(scale, scale);\n      }\n      x = y = 0;\n    }\n    Canvas.image(ctx, tileImage, x, y, w, h);\n    if (this.layer.options['debug']) {\n      var color = this.layer.options['debugOutline'];\n      ctx.save();\n      ctx.strokeStyle = color;\n      ctx.fillStyle = color;\n      ctx.strokeWidth = 10;\n      ctx.font = '20px monospace';\n      var _point = new Point(x, y);\n      Canvas.rectangle(ctx, _point, {\n        width: w,\n        height: h\n      }, 1, 0);\n      Canvas.fillText(ctx, this.getDebugInfo(tileId), _point._add(32, h - 14), color);\n      Canvas.drawCross(ctx, x + w / 2, y + h / 2, 2, color);\n      ctx.restore();\n    }\n    if (transformed) {\n      ctx.restore();\n    }\n    if (ctx.globalAlpha !== alpha) {\n      ctx.globalAlpha = alpha;\n    }\n    this.setCanvasUpdated();\n  };\n  _proto2.getDebugInfo = function getDebugInfo(tileId) {\n    var xyz = tileId.split('_');\n    var length = xyz.length;\n    return xyz[length - 3] + '/' + xyz[length - 2] + '/' + xyz[length - 1];\n  };\n  _proto2._findChildTiles = function _findChildTiles(info) {\n    var layer = this._getLayerOfTile(info.layer);\n    if (!layer || !layer.options['background'] || info.z > this.layer.getMaxZoom()) {\n      return EMPTY_ARRAY$2;\n    }\n    var map = this.getMap();\n    var children = [];\n    if (layer._isPyramidMode()) {\n      var _zoomDiff = 2;\n      var cx = info.x * 2;\n      var cy = info.y * 2;\n      var cz = info.z + 1;\n      var queue = [];\n      for (var j = 0; j < 2; j++) {\n        for (var jj = 0; jj < 2; jj++) {\n          queue.push(cx + j, cy + jj, cz);\n        }\n      }\n      while (queue.length) {\n        var z = queue.pop();\n        var y = queue.pop();\n        var x = queue.pop();\n        var id = layer._getTileId(x, y, z, info.layer);\n        var canVisit = z + 1 <= info.z + _zoomDiff;\n        var tile = this.tileCache.getAndRemove(id);\n        if (tile) {\n          if (this.isValidCachedTile(tile)) {\n            children.push(tile);\n            this.tileCache.add(id, tile);\n          } else if (canVisit) {\n            for (var _j = 0; _j < 2; _j++) {\n              for (var _jj = 0; _jj < 2; _jj++) {\n                queue.push(x * 2 + _j, y * 2 + _jj, z + 1);\n              }\n            }\n          }\n        } else if (canVisit) {\n          for (var _j2 = 0; _j2 < 2; _j2++) {\n            for (var _jj2 = 0; _jj2 < 2; _jj2++) {\n              queue.push(x * 2 + _j2, y * 2 + _jj2, z + 1);\n            }\n          }\n        }\n      }\n      return children;\n    }\n    var zoomDiff = 1;\n    var res = info.res;\n    var min = info.extent2d.getMin(),\n      max = info.extent2d.getMax(),\n      pmin = layer._project(map._pointToPrjAtRes(min, res, TEMP_POINT1$2), TEMP_POINT1$2),\n      pmax = layer._project(map._pointToPrjAtRes(max, res, TEMP_POINT2$2), TEMP_POINT2$2);\n    for (var i = 1; i < zoomDiff; i++) {\n      this._findChildTilesAt(children, pmin, pmax, layer, info.z + i);\n    }\n    return children;\n  };\n  _proto2._findChildTilesAt = function _findChildTilesAt(children, pmin, pmax, layer, childZoom) {\n    var layerId = layer.getId(),\n      res = layer.getSpatialReference().getResolution(childZoom);\n    if (!res) {\n      return;\n    }\n    var dmin = layer._getTileConfig().getTileIndex(pmin, res),\n      dmax = layer._getTileConfig().getTileIndex(pmax, res);\n    var sx = Math.min(dmin.idx, dmax.idx),\n      ex = Math.max(dmin.idx, dmax.idx);\n    var sy = Math.min(dmin.idy, dmax.idy),\n      ey = Math.max(dmin.idy, dmax.idy);\n    var id, tile;\n    for (var i = sx; i < ex; i++) {\n      for (var ii = sy; ii < ey; ii++) {\n        id = layer._getTileId(i, ii, childZoom, layerId);\n        tile = this.tileCache.getAndRemove(id);\n        if (tile) {\n          if (this.isValidCachedTile(tile)) {\n            children.push(tile);\n            this.tileCache.add(id, tile);\n          }\n        }\n      }\n    }\n  };\n  _proto2._findParentTile = function _findParentTile(info) {\n    var map = this.getMap(),\n      layer = this._getLayerOfTile(info.layer);\n    if (!layer || !layer.options['background']) {\n      return null;\n    }\n    var minZoom = layer.getMinZoom();\n    var zoomDiff = info.z - minZoom;\n    if (layer._isPyramidMode()) {\n      for (var z = info.z - 1; z >= minZoom; z--) {\n        var diff = info.z - z;\n        var scale = Math.pow(2, diff);\n        var x = Math.floor(info.x / scale);\n        var y = Math.floor(info.y / scale);\n        var id = layer._getTileId(x, y, z, info.layer);\n        var tile = this.tileCache.getAndRemove(id);\n        if (tile) {\n          if (this.isValidCachedTile(tile)) {\n            this.tileCache.add(id, tile);\n            return tile;\n          }\n        }\n      }\n      return null;\n    }\n    var sr = layer.getSpatialReference();\n    var d = sr.getZoomDirection();\n    var res = info.res;\n    var center = info.extent2d.getCenter(),\n      prj = layer._project(map._pointToPrjAtRes(center, res));\n    for (var _diff = 1; _diff <= zoomDiff; _diff++) {\n      var _z = info.z - d * _diff;\n      var _res = sr.getResolution(_z);\n      if (!_res) continue;\n      var tileIndex = layer._getTileConfig().getTileIndex(prj, _res);\n      var _id = layer._getTileId(tileIndex.x, tileIndex.y, _z, info.layer);\n      var _tile = this.tileCache.getAndRemove(_id);\n      if (_tile) {\n        this.tileCache.add(_id, _tile);\n        return _tile;\n      }\n    }\n    return null;\n  };\n  _proto2.isValidCachedTile = function isValidCachedTile(tile) {\n    return !!tile.image;\n  };\n  _proto2.isTileComplete = function isTileComplete() {\n    return true;\n  };\n  _proto2._getLayerOfTile = function _getLayerOfTile(layerId) {\n    return this.layer.getChildLayer ? this.layer.getChildLayer(layerId) : this.layer;\n  };\n  _proto2._getCachedTile = function _getCachedTile(tileId, isParent) {\n    var tilesInView = this.tilesInView;\n    var cached = this.tileCache.getAndRemove(tileId);\n    if (cached) {\n      if (!isParent) {\n        tilesInView[tileId] = cached;\n      }\n      var tilesLoading = this.tilesLoading;\n      if (tilesLoading && tilesLoading[tileId]) {\n        tilesLoading[tileId].current = false;\n        var _tilesLoading$tileId = tilesLoading[tileId],\n          image = _tilesLoading$tileId.image,\n          info = _tilesLoading$tileId.info;\n        this.abortTileLoading(image, info);\n        delete tilesLoading[tileId];\n      }\n    } else {\n      cached = tilesInView[tileId];\n    }\n    if (cached) {\n      cached.current = true;\n      this.tileCache.add(tileId, cached);\n    }\n    return cached;\n  };\n  _proto2._addTileToCache = function _addTileToCache(tileInfo, tileImage) {\n    this.tilesInView[tileInfo.id] = {\n      image: tileImage,\n      current: true,\n      info: tileInfo\n    };\n  };\n  _proto2.getTileOpacity = function getTileOpacity(tileImage, tileInfo) {\n    var opacity = this._getTileFadingOpacity(tileImage);\n    if (this.layer.getChildLayer) {\n      var childLayer = this.layer.getLayer(tileInfo.layer);\n      if (childLayer) {\n        opacity *= childLayer.options['opacity'];\n      }\n    }\n    return opacity;\n  };\n  _proto2._getTileFadingOpacity = function _getTileFadingOpacity(tileImage) {\n    if (!this.layer.options['fadeAnimation'] || !tileImage.loadTime) {\n      return 1;\n    }\n    return Math.min(1, (now() - tileImage.loadTime) / this.layer.options['fadeDuration']);\n  };\n  _proto2.onRemove = function onRemove() {\n    this.clear();\n    delete this.tileCache;\n    delete this._tilePlaceHolder;\n    _CanvasRenderer.prototype.onRemove.call(this);\n  };\n  _proto2._markTiles = function _markTiles() {\n    var a = 0,\n      b = 0;\n    if (this.tilesLoading) {\n      for (var p in this.tilesLoading) {\n        this.tilesLoading[p].current = false;\n        a++;\n      }\n    }\n    if (this.tilesInView) {\n      for (var _p in this.tilesInView) {\n        this.tilesInView[_p].current = false;\n        b++;\n      }\n    }\n    return [a, b];\n  };\n  _proto2._retireTiles = function _retireTiles(force) {\n    for (var i in this.tilesLoading) {\n      var tile = this.tilesLoading[i];\n      if (force || !tile.current) {\n        if (tile.image) {\n          this.abortTileLoading(tile.image, tile.info);\n        }\n        this.deleteTile(tile);\n        this.removeTileLoading(tile.info);\n      }\n    }\n    for (var _i in this.tilesInView) {\n      var _tile2 = this.tilesInView[_i];\n      if (!_tile2.current) {\n        delete this.tilesInView[_i];\n        if (!this.tileCache.has(_i)) {\n          this.deleteTile(_tile2);\n        }\n      }\n    }\n  };\n  _proto2.deleteTile = function deleteTile(tile) {\n    if (!tile || !tile.image) {\n      return;\n    }\n    if (tile.image.close) {\n      tile.image.close();\n    }\n    tile.image.onload = null;\n    tile.image.onerror = null;\n  };\n  _proto2._generatePlaceHolder = function _generatePlaceHolder(res) {\n    var map = this.getMap();\n    var placeholder = this.layer.options['placeholder'];\n    if (!placeholder || map.getPitch()) {\n      return null;\n    }\n    var tileSize = this.layer.getTileSize(),\n      scale = res / map._getResolution(),\n      canvas = this._tilePlaceHolder = this._tilePlaceHolder || Canvas.createCanvas(1, 1, map.CanvasClass);\n    canvas.width = tileSize.width * scale;\n    canvas.height = tileSize.height * scale;\n    if (isFunction(placeholder)) {\n      placeholder(canvas);\n    } else {\n      defaultPlaceholder(canvas);\n    }\n    return canvas;\n  };\n  return TileLayerCanvasRenderer;\n}(CanvasRenderer);\nTileLayer.registerRenderer('canvas', TileLayerCanvasRenderer);\nfunction falseFn() {\n  return false;\n}\nfunction defaultPlaceholder(canvas) {\n  var ctx = canvas.getContext('2d'),\n    cw = canvas.width,\n    ch = canvas.height,\n    w = cw / 16,\n    h = ch / 16;\n  ctx.beginPath();\n  for (var i = 0; i < 16; i++) {\n    ctx.moveTo(0, i * h);\n    ctx.lineTo(cw, i * h);\n    ctx.moveTo(i * w, 0);\n    ctx.lineTo(i * w, ch);\n  }\n  ctx.strokeStyle = 'rgba(180, 180, 180, 0.1)';\n  ctx.lineWidth = 1;\n  ctx.stroke();\n  ctx.beginPath();\n  var path = [[0, 0], [cw, 0], [0, ch], [cw, ch], [0, 0], [0, ch], [cw, 0], [cw, ch], [0, ch / 2], [cw, ch / 2], [cw / 2, 0], [cw / 2, ch]];\n  for (var _i2 = 1; _i2 < path.length; _i2 += 2) {\n    ctx.moveTo(path[_i2 - 1][0], path[_i2 - 1][1]);\n    ctx.lineTo(path[_i2][0], path[_i2][1]);\n  }\n  ctx.lineWidth = 1 * 4;\n  ctx.stroke();\n}\nfunction compareTiles(a, b) {\n  return Math.abs(this._tileZoom - a.info.z) - Math.abs(this._tileZoom - b.info.z);\n}\nvar TILE_POINT$1 = new Point(0, 0);\nvar MESH_TO_TEST = {\n  properties: {}\n};\nvar TileLayerGLRenderer = function (_ImageGLRenderable) {\n  _inheritsLoose(TileLayerGLRenderer, _ImageGLRenderable);\n  function TileLayerGLRenderer() {\n    return _ImageGLRenderable.apply(this, arguments) || this;\n  }\n  var _proto = TileLayerGLRenderer.prototype;\n  _proto.isDrawable = function isDrawable() {\n    return true;\n  };\n  _proto.needToRedraw = function needToRedraw() {\n    var map = this.getMap();\n    if (this._gl() && !map.getPitch() && map.isZooming() && !map.isMoving() && !map.isRotating()) {\n      return true;\n    }\n    return _ImageGLRenderable.prototype.needToRedraw.call(this);\n  };\n  _proto.onDrawTileStart = function onDrawTileStart(context, parentContext) {\n    var gl = this.gl;\n    gl.enable(gl.DEPTH_TEST);\n    gl.depthFunc(gl.LEQUAL);\n    gl.enable(gl.POLYGON_OFFSET_FILL);\n    gl.enable(gl.STENCIL_TEST);\n    gl.stencilOp(gl.KEEP, gl.KEEP, gl.REPLACE);\n    var depthMask = isNil(this.layer.options['depthMask']) || !!this.layer.options['depthMask'];\n    gl.depthMask(depthMask);\n    if (parentContext && parentContext.renderTarget) {\n      var fbo = parentContext.renderTarget.fbo;\n      if (fbo) {\n        var framebuffer = parentContext.renderTarget.getFramebuffer(fbo);\n        gl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer);\n      }\n    }\n  };\n  _proto.onDrawTileEnd = function onDrawTileEnd(context, parentContext) {\n    var gl = this.gl;\n    if (parentContext && parentContext.renderTarget) {\n      var fbo = parentContext.renderTarget.fbo;\n      if (fbo) {\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n      }\n    }\n  };\n  _proto.drawTile = function drawTile(tileInfo, tileImage, parentContext) {\n    if (parentContext && parentContext.sceneFilter) {\n      if (!parentContext.sceneFilter(MESH_TO_TEST)) {\n        return;\n      }\n    }\n    var map = this.getMap();\n    if (!tileInfo || !map || !tileImage) {\n      return;\n    }\n    var scale = tileInfo._glScale = tileInfo._glScale || tileInfo.res / map.getGLRes();\n    var w = tileInfo.extent2d.xmax - tileInfo.extent2d.xmin;\n    var h = tileInfo.extent2d.ymax - tileInfo.extent2d.ymin;\n    if (tileInfo.cache !== false) {\n      this._bindGLBuffer(tileImage, w, h);\n    }\n    if (!this._gl()) {\n      _ImageGLRenderable.prototype.drawTile.call(this, tileInfo, tileImage);\n      return;\n    }\n    var extent2d = tileInfo.extent2d,\n      offset = tileInfo.offset;\n    var point = TILE_POINT$1.set(extent2d.xmin - offset[0], tileInfo.extent2d.ymax - offset[1]);\n    var x = point.x * scale,\n      y = point.y * scale;\n    var opacity = this.getTileOpacity(tileImage, tileInfo);\n    var debugInfo = null;\n    if (this.layer.options['debug']) {\n      debugInfo = this.getDebugInfo(tileInfo.id);\n    }\n    var gl = this.gl;\n    gl.stencilFunc(gl.LEQUAL, Math.abs(this.getCurrentTileZoom() - tileInfo.z), 0xFF);\n    var layerPolygonOffset = this.layer.getPolygonOffset();\n    var polygonOffset = this.drawingCurrentTiles ? layerPolygonOffset : layerPolygonOffset + 1;\n    gl.polygonOffset(polygonOffset, polygonOffset);\n    this.drawGLImage(tileImage, x, y, w, h, scale, opacity, debugInfo);\n    if (this._getTileFadingOpacity(tileImage) < 1) {\n      this.setToRedraw();\n    } else {\n      this.setCanvasUpdated();\n    }\n  };\n  _proto._bindGLBuffer = function _bindGLBuffer(image, w, h) {\n    if (!image.glBuffer) {\n      image.glBuffer = this.bufferTileData(0, 0, w, h);\n    }\n  };\n  _proto.loadTileImage = function loadTileImage(tileImage, url) {\n    var crossOrigin = this.layer.options['crossOrigin'];\n    tileImage.crossOrigin = crossOrigin !== null ? crossOrigin : '';\n    tileImage.src = url;\n    return;\n  };\n  _proto.onCanvasCreate = function onCanvasCreate() {\n    if (!this.canvas.gl || !this.canvas.gl.wrap) {\n      this.createCanvas2();\n    }\n  };\n  _proto.createContext = function createContext() {\n    _ImageGLRenderable.prototype.createContext.call(this);\n    this.createGLContext();\n  };\n  _proto.resizeCanvas = function resizeCanvas(canvasSize) {\n    if (!this.canvas) {\n      return;\n    }\n    _ImageGLRenderable.prototype.resizeCanvas.call(this, canvasSize);\n    this.resizeGLCanvas();\n  };\n  _proto.clearCanvas = function clearCanvas() {\n    if (!this.canvas) {\n      return;\n    }\n    _ImageGLRenderable.prototype.clearCanvas.call(this);\n    this.clearGLCanvas();\n  };\n  _proto.getCanvasImage = function getCanvasImage() {\n    if (!this._gl() || !this.canvas2) {\n      return _ImageGLRenderable.prototype.getCanvasImage.call(this);\n    }\n    var img = _ImageGLRenderable.prototype.getCanvasImage.call(this);\n    if (img) {\n      img.image = this.canvas2;\n    }\n    return img;\n  };\n  _proto._gl = function _gl() {\n    if (this.canvas.gl && this.canvas.gl.wrap) {\n      return true;\n    }\n    var map = this.getMap();\n    return map && (map.getPitch() || map.getBearing()) || this.layer && !!this.layer.options['fragmentShader'];\n  };\n  _proto.deleteTile = function deleteTile(tile) {\n    _ImageGLRenderable.prototype.deleteTile.call(this, tile);\n    if (tile && tile.image) {\n      this.disposeImage(tile.image);\n    }\n    delete tile.image;\n  };\n  _proto.onRemove = function onRemove() {\n    _ImageGLRenderable.prototype.onRemove.call(this);\n    this.removeGLCanvas();\n  };\n  return TileLayerGLRenderer;\n}(ImageGLRenderable(TileLayerCanvasRenderer));\nTileLayer.registerRenderer('gl', TileLayerGLRenderer);\nfunction _loadTile(tile) {\n  var tileSize = this.layer.getTileSize(),\n    canvasClass = this.canvas.constructor,\n    map = this.getMap();\n  var r = map.getDevicePixelRatio();\n  var tileCanvas = Canvas.createCanvas(tileSize['width'] * r, tileSize['height'] * r, canvasClass);\n  tileCanvas['layer'] = this.layer;\n  var me = this;\n  var point = new Point(tile['extent2d'].xmin, tile['extent2d'].ymax);\n  var extent = new Extent(map.pointToCoordinate(point), map.pointToCoordinate(point.add(tileSize.width, tileSize.height)), map.getProjection());\n  this.layer.drawTile(tileCanvas, {\n    'url': tile['url'],\n    'point': point,\n    'center': map.pointToCoordinate(point.add(tileSize['width'] / 2, tileSize['height'] / 2)),\n    'extent': extent,\n    'z': tile['z'],\n    'x': tile['x'],\n    'y': tile['y']\n  }, function (error) {\n    if (error) {\n      me.onTileError(tileCanvas, tile);\n      return;\n    }\n    me.onTileLoad(tileCanvas, tile);\n  });\n  return tileCanvas;\n}\nvar CanvasRenderer$1 = function (_TileLayerCanvasRende) {\n  _inheritsLoose(CanvasRenderer, _TileLayerCanvasRende);\n  function CanvasRenderer() {\n    return _TileLayerCanvasRende.apply(this, arguments) || this;\n  }\n  var _proto = CanvasRenderer.prototype;\n  _proto.loadTile = function loadTile() {\n    return _loadTile.apply(this, arguments);\n  };\n  return CanvasRenderer;\n}(TileLayerCanvasRenderer);\nvar GLRenderer = function (_TileLayerGLRenderer) {\n  _inheritsLoose(GLRenderer, _TileLayerGLRenderer);\n  function GLRenderer() {\n    return _TileLayerGLRenderer.apply(this, arguments) || this;\n  }\n  var _proto2 = GLRenderer.prototype;\n  _proto2.loadTile = function loadTile() {\n    return _loadTile.apply(this, arguments);\n  };\n  return GLRenderer;\n}(TileLayerGLRenderer);\nCanvasTileLayer.registerRenderer('canvas', CanvasRenderer$1);\nCanvasTileLayer.registerRenderer('gl', GLRenderer);\nvar quadVertices = typeof Int8Array !== 'undefined' ? new Int8Array([-1, 1, 0, -1, -1, 0, 1, 1, 0, 1, -1, 0]) : [];\nvar vert = \"\\n    attribute vec3 a_position;\\n    uniform mat4 transform;\\n\\n    void main()\\n    {\\n        gl_Position = transform * vec4(a_position, 1.0);\\n    }\\n\";\nvar frag = \"\\n    precision mediump float;\\n    uniform vec3 color;\\n    void main()\\n    {\\n        gl_FragColor = vec4(color, 1.0);\\n    }\\n\";\nvar QuadStencil = function () {\n  function QuadStencil(gl, vertices, debug) {\n    this.gl = gl;\n    this.quadVertices = vertices || quadVertices;\n    this.attributes = ['a_position', 3, getType(vertices)];\n    this.debug = debug;\n  }\n  var _proto = QuadStencil.prototype;\n  _proto.start = function start() {\n    var gl = this.gl;\n    gl.enable(gl.STENCIL_TEST);\n    gl.stencilMask(0xFF);\n    gl.stencilOp(gl.KEEP, gl.REPLACE, gl.REPLACE);\n    gl.depthMask(false);\n    this._save();\n    if (!this.buffer) {\n      this._createBuffer();\n      this._createProgram();\n    }\n    gl.useProgram(this.program);\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);\n    enableVertexAttrib(gl, this.program, this.attributes);\n    if (!this.transformLoc) {\n      this.transformLoc = gl.getUniformLocation(this.program, 'transform');\n    }\n    if (!this.colorLoc) {\n      this.colorLoc = gl.getUniformLocation(this.program, 'color');\n    }\n    if (this.debug) {\n      return;\n    }\n    gl.colorMask(false, false, false, false);\n  };\n  _proto.end = function end() {\n    var gl = this.gl;\n    gl.depthMask(true);\n    this._restore();\n    if (this.debug) {\n      return;\n    }\n    gl.colorMask(true, true, true, true);\n  };\n  _proto.draw = function draw(transform) {\n    var gl = this.gl;\n    gl.uniformMatrix4fv(this.transformLoc, false, transform);\n    gl.uniform3fv(this.colorLoc, [Math.random(), Math.random(), Math.random()]);\n    gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n  };\n  _proto.remove = function remove() {\n    var gl = this.gl;\n    if (this.buffer) {\n      gl.deleteBuffer(this.buffer);\n    }\n    if (this.program) {\n      gl.deleteShader(this.program.fragmentShader);\n      gl.deleteShader(this.program.vertexShader);\n      gl.deleteProgram(this.program);\n    }\n    delete this.transformLoc;\n    delete this.gl;\n    return this;\n  };\n  _proto.stencilMask = function stencilMask(mask) {\n    this.gl.stencilMask(mask);\n    return this;\n  };\n  _proto.stencilFunc = function stencilFunc(func, ref, mask) {\n    this.ref = ref;\n    this.gl.stencilFunc(func, ref, mask);\n    return this;\n  };\n  _proto.stencilOp = function stencilOp(fail, zfail, zpass) {\n    this.gl.stencilOp(fail, zfail, zpass);\n    return this;\n  };\n  _proto.resetFunc = function resetFunc() {\n    this.ref = 1;\n    this.gl.stencilFunc(this.gl.ALWAYS, 1, 0xFF);\n    return this;\n  };\n  _proto._save = function _save() {\n    var gl = this.gl;\n    this._savedProgram = gl.program;\n  };\n  _proto._restore = function _restore() {\n    var gl = this.gl;\n    gl.program = this._savedProgram;\n    if (gl.program) {\n      gl.useProgram(gl.program);\n    }\n  };\n  _proto._createBuffer = function _createBuffer() {\n    var gl = this.gl;\n    this.buffer = gl.createBuffer();\n    if (!this.buffer) {\n      throw new Error('Failed to create the buffer object');\n    }\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);\n    gl.bufferData(gl.ARRAY_BUFFER, this.quadVertices, gl.STATIC_DRAW);\n  };\n  _proto._createProgram = function _createProgram() {\n    var _createProgram2 = createProgram(this.gl, vert, frag),\n      program = _createProgram2.program,\n      vertexShader = _createProgram2.vertexShader,\n      fragmentShader = _createProgram2.fragmentShader;\n    program.vertexShader = vertexShader;\n    program.fragmentShader = fragmentShader;\n    this.program = program;\n  };\n  return QuadStencil;\n}();\nfunction getType(arr) {\n  if (arr instanceof Float32Array) {\n    return 'FLOAT';\n  } else if (arr instanceof Int16Array) {\n    return 'SHORT';\n  } else if (arr instanceof Uint16Array) {\n    return 'UNSIGNED_SHORT';\n  } else if (arr instanceof Int8Array) {\n    return 'BYTE';\n  } else if (arr instanceof Uint8Array || arr instanceof Uint8ClampedArray) {\n    return 'UNSIGNED_BYTE';\n  }\n  return 'FLOAT';\n}\nvar OverlayLayerRenderer = function (_CanvasRenderer) {\n  _inheritsLoose(OverlayLayerRenderer, _CanvasRenderer);\n  function OverlayLayerRenderer() {\n    return _CanvasRenderer.apply(this, arguments) || this;\n  }\n  var _proto = OverlayLayerRenderer.prototype;\n  _proto.checkResources = function checkResources() {\n    var geometries = this._geosToCheck || [];\n    if (!this._resourceChecked && this.layer._geoList) {\n      pushIn(geometries, this.layer._geoList);\n    }\n    if (!isArrayHasData(geometries)) {\n      return [];\n    }\n    var resources = [];\n    var cache = {};\n    for (var i = geometries.length - 1; i >= 0; i--) {\n      var geo = geometries[i];\n      var res = geo._getExternalResources();\n      if (!res.length) {\n        continue;\n      }\n      if (!this.resources) {\n        resources.push.apply(resources, res);\n      } else {\n        for (var _i = 0; _i < res.length; _i++) {\n          var url = res[_i][0];\n          if (!this.resources.isResourceLoaded(res[_i]) && !cache[url]) {\n            resources.push(res[_i]);\n            cache[url] = 1;\n          }\n        }\n      }\n    }\n    this._resourceChecked = true;\n    delete this._geosToCheck;\n    return resources;\n  };\n  _proto.render = function render() {\n    this.layer._sortGeometries();\n    return _CanvasRenderer.prototype.render.apply(this, arguments);\n  };\n  _proto._addGeoToCheckRes = function _addGeoToCheckRes(res) {\n    if (!res) {\n      return;\n    }\n    if (!Array.isArray(res)) {\n      res = [res];\n    }\n    if (!this._geosToCheck) {\n      this._geosToCheck = [];\n    }\n    pushIn(this._geosToCheck, res);\n  };\n  _proto.onGeometryAdd = function onGeometryAdd(geometries) {\n    this._addGeoToCheckRes(geometries);\n    redraw(this);\n  };\n  _proto.onGeometryRemove = function onGeometryRemove() {\n    redraw(this);\n  };\n  _proto.onGeometrySymbolChange = function onGeometrySymbolChange(e) {\n    this._addGeoToCheckRes(e.target);\n    redraw(this);\n  };\n  _proto.onGeometryShapeChange = function onGeometryShapeChange() {\n    redraw(this);\n  };\n  _proto.onGeometryPositionChange = function onGeometryPositionChange() {\n    redraw(this);\n  };\n  _proto.onGeometryZIndexChange = function onGeometryZIndexChange() {\n    redraw(this);\n  };\n  _proto.onGeometryShow = function onGeometryShow() {\n    redraw(this);\n  };\n  _proto.onGeometryHide = function onGeometryHide() {\n    redraw(this);\n  };\n  _proto.onGeometryPropertiesChange = function onGeometryPropertiesChange() {\n    redraw(this);\n  };\n  return OverlayLayerRenderer;\n}(CanvasRenderer);\nfunction redraw(renderer) {\n  if (renderer.layer.options['drawImmediate']) {\n    renderer.render();\n  }\n  renderer.setToRedraw();\n}\nvar TEMP_EXTENT$8 = new PointExtent();\nvar TEMP_VEC3 = [];\nvar TEMP_FIXEDEXTENT = new PointExtent();\nvar PLACEMENT_CENTER = 'center';\nvar tempCollisionIndex = new CollisionIndex();\nvar VectorLayerRenderer = function (_OverlayLayerCanvasRe) {\n  _inheritsLoose(VectorLayerRenderer, _OverlayLayerCanvasRe);\n  function VectorLayerRenderer() {\n    return _OverlayLayerCanvasRe.apply(this, arguments) || this;\n  }\n  var _proto = VectorLayerRenderer.prototype;\n  _proto._geoIsCollision = function _geoIsCollision(geo, collisionIndex) {\n    if (!geo) {\n      return false;\n    }\n    var collision = geo.options.collision;\n    if (!collision) {\n      return false;\n    }\n    var type = geo.getType();\n    if (type === 'Point' && geo.getContainerExtent) {\n      if (!geo.bbox) {\n        geo.bbox = [0, 0, 0, 0];\n      }\n      var bufferSize = this.layer.options['collisionBufferSize'];\n      var extent = geo.getContainerExtent();\n      if (!extent) {\n        return false;\n      }\n      geo.bbox[0] = extent.xmin - bufferSize;\n      geo.bbox[1] = extent.ymin - bufferSize;\n      geo.bbox[2] = extent.xmax + bufferSize;\n      geo.bbox[3] = extent.ymax + bufferSize;\n      if (collisionIndex.collides(geo.bbox)) {\n        return true;\n      }\n      collisionIndex.insertBox(geo.bbox);\n    }\n    return false;\n  };\n  _proto.getImageData = function getImageData() {\n    if (!this.layer.options['geometryEvents'] || !this._lastRenderTime || now() - this._lastRenderTime < 32) {\n      return null;\n    }\n    if (!this.context || !this.context.canvas) {\n      return null;\n    }\n    if (!this._imageData) {\n      var _this$context$canvas = this.context.canvas,\n        width = _this$context$canvas.width,\n        height = _this$context$canvas.height;\n      try {\n        this._imageData = this.context.getImageData(0, 0, width, height);\n      } catch (error) {\n        console.warn('hit detect failed with tainted canvas, some geometries have external resources in another domain:\\n', error);\n      }\n    }\n    return this._imageData;\n  };\n  _proto.clearImageData = function clearImageData() {\n    this._imageData = null;\n    delete this._imageData;\n    this._lastRenderTime = now();\n  };\n  _proto.checkResources = function checkResources() {\n    var _this = this;\n    var resources = _OverlayLayerCanvasRe.prototype.checkResources.apply(this, arguments);\n    var style = this.layer.getStyle();\n    if (style) {\n      if (!Array.isArray(style)) {\n        style = [style];\n      }\n      style.forEach(function (s) {\n        var res = getExternalResources(s['symbol'], true);\n        for (var i = 0, l = res.length; i < l; i++) {\n          if (!_this.resources.isResourceLoaded(res[i])) {\n            resources.push(res[i]);\n          }\n        }\n      });\n    }\n    return resources;\n  };\n  _proto.needToRedraw = function needToRedraw() {\n    var map = this.getMap();\n    if (map.isInteracting() && this.layer.options['enableAltitude']) {\n      return true;\n    }\n    if (map.isZooming() && !map.isRotating() && !map.getPitch() && !this._hasPoint && this.layer.constructor === VectorLayer) {\n      return false;\n    }\n    return _OverlayLayerCanvasRe.prototype.needToRedraw.call(this);\n  };\n  _proto.draw = function draw() {\n    if (!this.getMap()) {\n      return;\n    }\n    if (!this.layer.isVisible() || this.layer.isEmpty()) {\n      this.clearCanvas();\n      this.completeRender();\n      return;\n    }\n    this.prepareCanvas();\n    this.drawGeos();\n    this.completeRender();\n  };\n  _proto.isBlank = function isBlank() {\n    if (!this.context) {\n      return false;\n    }\n    return !this.context.canvas._drawn;\n  };\n  _proto.drawOnInteracting = function drawOnInteracting() {\n    if (!this._geosToDraw) {\n      return;\n    }\n    this._updateMapStateCache();\n    this._updateDisplayExtent();\n    var map = this.getMap();\n    var count = this.layer.getCount();\n    var res = this.mapStateCache.resolution;\n    if (map.isZooming() && map.options['seamlessZoom'] && this._drawnRes !== undefined && res > this._drawnRes * 1.5 && this._geosToDraw.length < count || map.isMoving() || map.isInteracting()) {\n      this.prepareToDraw();\n      this._batchConversionMarkers(this.mapStateCache.glRes);\n      if (!this._onlyHasPoint) {\n        this.forEachGeo(this.checkGeo, this);\n      }\n      this._drawnRes = res;\n    }\n    this._sortByDistanceToCamera(map.cameraPosition);\n    var _this$layer$options = this.layer.options,\n      collision = _this$layer$options.collision,\n      collisionDelay = _this$layer$options.collisionDelay;\n    if (collision) {\n      var time = now();\n      if (!this._lastCollisionTime) {\n        this._lastCollisionTime = time;\n      }\n      if (time - this._lastCollisionTime <= collisionDelay) {\n        this._geosToDraw = this._lastGeosToDraw || this._geosToDraw;\n      } else {\n        this._collidesGeos();\n        this._lastCollisionTime = time;\n      }\n    }\n    for (var i = 0, l = this._geosToDraw.length; i < l; i++) {\n      var geo = this._geosToDraw[i];\n      if (!geo._isCheck) {\n        if (!geo.isVisible()) {\n          delete geo._cPoint;\n          delete geo._inCurrentView;\n          continue;\n        }\n      }\n      geo._paint(this._displayExtent);\n      this._geosToDraw[i]._cPoint = undefined;\n      this._geosToDraw[i]._inCurrentView = undefined;\n    }\n    this.clearImageData();\n    this._lastGeosToDraw = this._geosToDraw;\n  };\n  _proto.show = function show() {\n    this.layer.forEach(function (geo) {\n      geo._repaint();\n    });\n    _OverlayLayerCanvasRe.prototype.show.apply(this, arguments);\n  };\n  _proto.forEachGeo = function forEachGeo(fn, context) {\n    this.layer.forEach(fn, context);\n  };\n  _proto.drawGeos = function drawGeos() {\n    this._updateMapStateCache();\n    this._drawnRes = this.mapStateCache.resolution;\n    this._updateDisplayExtent();\n    this.prepareToDraw();\n    this._batchConversionMarkers(this.mapStateCache.glRes);\n    if (!this._onlyHasPoint) {\n      this.forEachGeo(this.checkGeo, this);\n    }\n    this._sortByDistanceToCamera(this.getMap().cameraPosition);\n    this._collidesGeos();\n    for (var i = 0, len = this._geosToDraw.length; i < len; i++) {\n      this._geosToDraw[i]._paint();\n      this._geosToDraw[i]._cPoint = undefined;\n      this._geosToDraw[i]._inCurrentView = undefined;\n    }\n    this.clearImageData();\n    this._lastGeosToDraw = this._geosToDraw;\n    this._setDrawGeosDrawTime();\n  };\n  _proto.prepareToDraw = function prepareToDraw() {\n    this.layer._drawTime = now();\n    this._hasPoint = false;\n    this._geosToDraw = [];\n    return this;\n  };\n  _proto._setDrawGeosDrawTime = function _setDrawGeosDrawTime() {\n    var drawTime = this.layer._drawTime;\n    for (var i = 0, len = this._geosToDraw.length; i < len; i++) {\n      var geo = this._geosToDraw[i];\n      var painter = geo._painter;\n      if (painter && painter._setDrawTime) {\n        painter._setDrawTime(drawTime);\n      }\n    }\n    return this;\n  };\n  _proto.checkGeo = function checkGeo(geo) {\n    if (geo.type === 'Point' && this._onlyHasPoint !== undefined) {\n      if (geo._inCurrentView) {\n        this._hasPoint = true;\n        geo._isCheck = true;\n        this._geosToDraw.push(geo);\n      }\n      return;\n    }\n    geo._isCheck = false;\n    if (!geo || !geo.isVisible() || !geo.getMap() || !geo.getLayer() || !geo.getLayer().isCanvasRender()) {\n      return;\n    }\n    var painter = geo._getPainter();\n    var inCurrentView = true;\n    if (geo._inCurrentView) {\n      inCurrentView = true;\n    } else if (geo._inCurrentView === false) {\n      inCurrentView = false;\n    } else {\n      var extent2D = painter.get2DExtent(this.resources, TEMP_EXTENT$8);\n      if (!extent2D || !extent2D.intersects(this._displayExtent)) {\n        inCurrentView = false;\n      }\n    }\n    if (!inCurrentView) {\n      return;\n    }\n    if (painter.hasPoint()) {\n      this._hasPoint = true;\n    }\n    geo._isCheck = true;\n    this._geosToDraw.push(geo);\n  };\n  _proto._collidesGeos = function _collidesGeos() {\n    var collision = this.layer.options['collision'];\n    if (!collision) {\n      return this;\n    }\n    var collisionScope = this.layer.options['collisionScope'];\n    var map = this.layer.getMap();\n    var collisionIndex = collisionScope === 'map' ? map.getCollisionIndex() : tempCollisionIndex;\n    if (collisionIndex === tempCollisionIndex) {\n      collisionIndex.clear();\n    }\n    var geos = this._geosToDraw;\n    this._geosToDraw = [];\n    for (var i = 0, len = geos.length; i < len; i++) {\n      if (this._geoIsCollision(geos[i], collisionIndex)) {\n        continue;\n      }\n      this._geosToDraw.push(geos[i]);\n    }\n    return this;\n  };\n  _proto.onZoomEnd = function onZoomEnd() {\n    delete this.canvasExtent2D;\n    _OverlayLayerCanvasRe.prototype.onZoomEnd.apply(this, arguments);\n  };\n  _proto.onRemove = function onRemove() {\n    this.forEachGeo(function (g) {\n      g.onHide();\n    });\n    delete this._geosToDraw;\n  };\n  _proto.onGeometryPropertiesChange = function onGeometryPropertiesChange(param) {\n    if (param) {\n      this.layer._styleGeometry(param['target']);\n    }\n    _OverlayLayerCanvasRe.prototype.onGeometryPropertiesChange.call(this, param);\n  };\n  _proto._updateDisplayExtent = function _updateDisplayExtent() {\n    var extent2D = this.canvasExtent2D;\n    if (this._maskExtent) {\n      if (!this._maskExtent.intersects(extent2D)) {\n        this.completeRender();\n        return;\n      }\n      extent2D = extent2D.intersection(this._maskExtent);\n    }\n    this._displayExtent = extent2D;\n  };\n  _proto.identifyAtPoint = function identifyAtPoint(point, options) {\n    if (options === void 0) {\n      options = {};\n    }\n    var geometries = this._geosToDraw;\n    if (!geometries) {\n      return [];\n    }\n    return this.layer._hitGeos(geometries, point, options);\n  };\n  _proto._updateMapStateCache = function _updateMapStateCache() {\n    var map = this.getMap();\n    var offset = map._pointToContainerPoint(this.southWest)._add(0, -map.height);\n    var resolution = map.getResolution();\n    var pitch = map.getPitch();\n    var bearing = map.getBearing();\n    var glScale = map.getGLScale();\n    var glRes = map.getGLRes();\n    var containerExtent = map.getContainerExtent();\n    var _2DExtent = map._get2DExtent();\n    var glExtent = map._get2DExtentAtRes(glRes);\n    this.mapStateCache = {\n      resolution: resolution,\n      pitch: pitch,\n      bearing: bearing,\n      glScale: glScale,\n      glRes: glRes,\n      _2DExtent: _2DExtent,\n      glExtent: glExtent,\n      containerExtent: containerExtent,\n      offset: offset\n    };\n    return this;\n  };\n  _proto._batchConversionMarkers = function _batchConversionMarkers(glRes) {\n    this._onlyHasPoint = undefined;\n    if (!this._constructorIsThis()) {\n      return [];\n    }\n    var cPoints = [];\n    var markers = [];\n    var altitudes = [];\n    var altitudeCache = {};\n    var layer = this.layer;\n    var layerOpts = layer.options;\n    var layerAltitude = layer.getAltitude ? layer.getAltitude() : 0;\n    var isCanvasRender = layer.isCanvasRender();\n    this._onlyHasPoint = true;\n    var idx = 0;\n    for (var i = 0, len = this.layer._geoList.length; i < len; i++) {\n      var geo = this.layer._geoList[i];\n      var type = geo.getType();\n      if (type === 'Point') {\n        var painter = geo._painter;\n        if (!painter) {\n          painter = geo._getPainter();\n        }\n        var point = painter.getRenderPoints(PLACEMENT_CENTER)[0][0];\n        var altitude = layerOpts['enableAltitude'] ? geo._getAltitude() : layerAltitude;\n        if (altitudeCache[altitude] === undefined) {\n          altitudeCache[altitude] = painter.getAltitude();\n        }\n        cPoints[idx] = point;\n        altitudes[idx] = altitudeCache[altitude];\n        markers[idx] = geo;\n        idx++;\n      } else {\n        this._onlyHasPoint = false;\n      }\n    }\n    if (idx === 0) {\n      return [];\n    }\n    var map = this.getMap();\n    var pts = getPointsResultPts(cPoints, '_pt');\n    pts = map._pointsAtResToContainerPoints(cPoints, glRes, altitudes, pts);\n    var containerExtent = map.getContainerExtent();\n    var xmax = containerExtent.xmax,\n      ymax = containerExtent.ymax,\n      xmin = containerExtent.xmin,\n      ymin = containerExtent.ymin;\n    var extentCache = {};\n    for (var _i = 0, _len = markers.length; _i < _len; _i++) {\n      var _geo = markers[_i];\n      _geo._cPoint = pts[_i];\n      if (!_geo._cPoint) {\n        _geo._inCurrentView = false;\n        continue;\n      }\n      var _pts$_i = pts[_i],\n        x = _pts$_i.x,\n        y = _pts$_i.y;\n      _geo._inCurrentView = x >= xmin && y >= ymin && x <= xmax && y <= ymax;\n      if (!_geo._inCurrentView) {\n        var symbolkey = _geo.getSymbolHash();\n        var fixedExtent = void 0;\n        if (symbolkey) {\n          fixedExtent = extentCache[symbolkey] = extentCache[symbolkey] || _geo._painter.getFixedExtent();\n        } else {\n          fixedExtent = _geo._painter.getFixedExtent();\n        }\n        TEMP_FIXEDEXTENT.set(fixedExtent.xmin, fixedExtent.ymin, fixedExtent.xmax, fixedExtent.ymax);\n        TEMP_FIXEDEXTENT._add(pts[_i]);\n        _geo._inCurrentView = TEMP_FIXEDEXTENT.intersects(containerExtent);\n      }\n      if (_geo._inCurrentView) {\n        if (!_geo.isVisible() || !isCanvasRender) {\n          _geo._inCurrentView = false;\n        }\n        if (this._onlyHasPoint && _geo._inCurrentView) {\n          this._hasPoint = true;\n          _geo._isCheck = true;\n          this._geosToDraw.push(_geo);\n        }\n      }\n    }\n    return pts;\n  };\n  _proto._sortByDistanceToCamera = function _sortByDistanceToCamera(cameraPosition) {\n    if (!this.layer.options['sortByDistanceToCamera']) {\n      return;\n    }\n    if (!this._geosToDraw.length) {\n      return;\n    }\n    var map = this.getMap();\n    var p = map.distanceToPoint(1000, 0, map.getGLScale()).x;\n    var meterScale = p / 1000;\n    var placement = 'center';\n    this._geosToDraw.sort(function (a, b) {\n      var type0 = a.getType();\n      var type1 = b.getType();\n      if (type0 !== 'Point' || type1 !== 'Point') {\n        return 0;\n      }\n      var painter0 = a._painter;\n      var painter1 = b._painter;\n      if (!painter0 || !painter1) {\n        return 0;\n      }\n      var point0 = painter0.getRenderPoints(placement)[0][0];\n      var point1 = painter1.getRenderPoints(placement)[0][0];\n      var alt0 = painter0.getAltitude() * meterScale;\n      var alt1 = painter1.getAltitude() * meterScale;\n      set$2(TEMP_VEC3, point0.x, point0.y, alt0);\n      var dist0 = distance(TEMP_VEC3, cameraPosition);\n      set$2(TEMP_VEC3, point1.x, point1.y, alt1);\n      var dist1 = distance(TEMP_VEC3, cameraPosition);\n      return dist1 - dist0;\n    });\n  };\n  _proto._constructorIsThis = function _constructorIsThis() {\n    return this.constructor === VectorLayerRenderer;\n  };\n  return VectorLayerRenderer;\n}(OverlayLayerRenderer);\nVectorLayer.registerRenderer('canvas', VectorLayerRenderer);\nvar MapRenderer = function (_Class) {\n  _inheritsLoose(MapRenderer, _Class);\n  function MapRenderer(map) {\n    var _this;\n    _this = _Class.call(this) || this;\n    _this.map = map;\n    _this._handlerQueue = [];\n    _this._thisDocVisibilitychange = _this._onDocVisibilitychange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this._thisDocDragStart = _this._onDocDragStart.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this._thisDocDragEnd = _this._onDocDragEnd.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n  var _proto = MapRenderer.prototype;\n  _proto.callInNextFrame = function callInNextFrame(fn) {\n    this._handlerQueue.push(fn);\n  };\n  _proto.executeFrameCallbacks = function executeFrameCallbacks() {\n    var running = this._handlerQueue;\n    this._handlerQueue = [];\n    for (var i = 0, l = running.length; i < l; i++) {\n      running[i]();\n    }\n  };\n  _proto.offsetPlatform = function offsetPlatform(offset, force) {\n    if (!this.map._panels.front) {\n      return this;\n    }\n    if (!force && offset.x === 0 && offset.y === 0) {\n      return this;\n    }\n    var panels = this.map._panels;\n    var hasFront = this._frontCount = panels.back.layerDOM.childElementCount;\n    var hasBack = this._backCount = panels.front.layerDOM.childElementCount;\n    var hasUI = this._uiCount = panels.front.uiDOM.childElementCount;\n    if (hasFront || hasBack || hasUI) {\n      var pos = this.map.offsetPlatform();\n      if (offset) {\n        pos = pos.add(offset)._round();\n      } else {\n        pos = pos.round();\n      }\n      if (hasBack) {\n        offsetDom(panels.back, pos);\n      }\n      if (hasFront || hasUI) {\n        offsetDom(panels.front, pos);\n      }\n    }\n    return this;\n  };\n  _proto.domChanged = function domChanged() {\n    var panels = this.map._panels;\n    if (!panels.front) {\n      return false;\n    }\n    var frontCount = panels.back.layerDOM.childElementCount;\n    if (this._frontCount === undefined || this._frontCount !== frontCount) {\n      return true;\n    }\n    var backCount = panels.front.layerDOM.childElementCount;\n    if (this._backCount === undefined || this._backCount !== backCount) {\n      return true;\n    }\n    var uiCount = panels.front.uiDOM.childElementCount;\n    if (this._uiCount === undefined || this._uiCount !== uiCount) {\n      return true;\n    }\n    return false;\n  };\n  _proto.resetContainer = function resetContainer() {\n    if (!this.map) {\n      return;\n    }\n    this.map._resetMapViewPoint();\n    if (this.map._panels.front) {\n      var pos = new Point(0, 0);\n      offsetDom(this.map._panels.back, pos);\n      offsetDom(this.map._panels.front, pos);\n    }\n  };\n  _proto.onZoomEnd = function onZoomEnd() {\n    this.resetContainer();\n  };\n  _proto.onLoad = function onLoad() {\n    this._frameLoop();\n  };\n  _proto._onDocVisibilitychange = function _onDocVisibilitychange() {\n    if (document.visibilityState !== 'visible') {\n      return;\n    }\n    this.setToRedraw();\n  };\n  _proto._getWrapPanel = function _getWrapPanel() {\n    if (!this.map) {\n      return null;\n    }\n    var panels = this.map.getPanels();\n    return panels && panels.mapWrapper;\n  };\n  _proto._onDocDragStart = function _onDocDragStart() {\n    var wrapPanel = this._getWrapPanel();\n    if (wrapPanel) {\n      wrapPanel.style.overflow = 'visible';\n    }\n    return;\n  };\n  _proto._onDocDragEnd = function _onDocDragEnd() {\n    var wrapPanel = this._getWrapPanel();\n    if (wrapPanel) {\n      wrapPanel.style.overflow = 'hidden';\n    }\n    return;\n  };\n  _proto._containerIsOffscreen = function _containerIsOffscreen() {\n    var container = this.map.getContainer();\n    if (!container || !container.style || container.style.display === 'none') {\n      return true;\n    }\n    var minSize = Math.min(container.clientWidth, container.clientHeight);\n    return minSize <= 0;\n  };\n  return MapRenderer;\n}(Class);\nvar MapCanvasRenderer = function (_MapRenderer) {\n  _inheritsLoose(MapCanvasRenderer, _MapRenderer);\n  function MapCanvasRenderer(map) {\n    var _this;\n    _this = _MapRenderer.call(this, map) || this;\n    _this._containerIsCanvas = !!map._containerDOM.getContext;\n    _this._registerEvents();\n    _this._loopTime = 0;\n    _this._resizeEventList = [];\n    _this._resizeTime = -Infinity;\n    return _this;\n  }\n  var _proto = MapCanvasRenderer.prototype;\n  _proto.load = function load() {\n    this.initContainer();\n  };\n  _proto.renderFrame = function renderFrame(framestamp) {\n    var map = this.map;\n    if (!map || !map.options['renderable']) {\n      return false;\n    }\n    this._handleResizeEventList(framestamp);\n    if (map.options['stopRenderOnOffscreen'] && this._containerIsOffscreen()) {\n      return true;\n    }\n    this._updateDomPosition(framestamp);\n    delete this._isViewChanged;\n    map._fireEvent('framestart');\n    this.updateMapDOM();\n    map.clearCollisionIndex();\n    var layers = this._getAllLayerToRender();\n    this.drawLayers(layers, framestamp);\n    var updated = this.drawLayerCanvas(layers);\n    if (updated) {\n      this.drawTops();\n      this._drawCenterCross();\n      if (map.options['debugSky']) {\n        this._debugSky();\n      }\n    }\n    this._needClear = false;\n    map._fireEvent('frameend');\n    this._recordView();\n    this._mapview = this._getMapView();\n    delete this._spatialRefChanged;\n    this._fireLayerLoadEvents();\n    this.executeFrameCallbacks();\n    this._canvasUpdated = false;\n    map.uiCollides();\n    return true;\n  };\n  _proto.updateMapDOM = function updateMapDOM() {\n    var map = this.map;\n    if (map.isZooming()) {\n      return;\n    }\n    var offset = map._getViewPointFrameOffset();\n    if (offset) {\n      map.offsetPlatform(offset);\n    } else if (this.domChanged()) {\n      this.offsetPlatform(null, true);\n    }\n  };\n  _proto.drawLayers = function drawLayers(layers, framestamp) {\n    var map = this.map,\n      isInteracting = map.isInteracting(),\n      canvasIds = [],\n      updatedIds = [],\n      fps = map.options['fpsOnInteracting'] || 0,\n      timeLimit = fps === 0 ? 0 : 1000 / fps,\n      layerLimit = this.map.options['layerCanvasLimitOnInteracting'],\n      l = layers.length;\n    var baseLayer = map.getBaseLayer();\n    var t = 0;\n    for (var i = 0; i < l; i++) {\n      var layer = layers[i];\n      if (!layer.isVisible()) {\n        continue;\n      }\n      var isCanvas = layer.isCanvasRender();\n      if (isCanvas) {\n        canvasIds.push(layer.getId());\n      }\n      var renderer = layer._getRenderer();\n      if (!renderer) {\n        continue;\n      }\n      var needsRedraw = this._checkLayerRedraw(layer);\n      if (isCanvas && renderer.isCanvasUpdated()) {\n        if (!needsRedraw) {\n          updatedIds.push(layer.getId());\n        }\n        this.setLayerCanvasUpdated();\n      }\n      var transformMatrix = renderer.__zoomTransformMatrix;\n      delete renderer.__zoomTransformMatrix;\n      if (!needsRedraw) {\n        if (isCanvas && isInteracting) {\n          if (map.isZooming() && !map.getPitch()) {\n            renderer.prepareRender();\n            renderer.__zoomTransformMatrix = this._zoomMatrix;\n          } else if (map.getPitch() || map.isRotating()) {\n            renderer.clearCanvas();\n          }\n        }\n        continue;\n      }\n      if (isInteracting && isCanvas) {\n        if (layerLimit > 0 && l - 1 - i > layerLimit && layer !== baseLayer) {\n          layer._getRenderer().clearCanvas();\n          continue;\n        }\n        t += this._drawCanvasLayerOnInteracting(layer, t, timeLimit, framestamp);\n      } else if (isInteracting && renderer.drawOnInteracting) {\n        if (renderer.prepareRender) {\n          renderer.prepareRender();\n        }\n        if (renderer.checkAndDraw) {\n          renderer.checkAndDraw(renderer.drawOnInteracting, this._eventParam, framestamp);\n        } else {\n          renderer.drawOnInteracting(this._eventParam, framestamp);\n        }\n      } else {\n        renderer.render(framestamp);\n        if (isCanvas && transformMatrix && renderer.isLoadingResource()) {\n          renderer.__zoomTransformMatrix = transformMatrix;\n        }\n      }\n      if (isCanvas) {\n        updatedIds.push(layer.getId());\n        this.setLayerCanvasUpdated();\n      }\n    }\n    var preCanvasIds = this._canvasIds || [];\n    var preUpdatedIds = this._updatedIds || [];\n    this._canvasIds = canvasIds;\n    this._updatedIds = updatedIds;\n    if (!this.isLayerCanvasUpdated()) {\n      var sep = '---';\n      if (preCanvasIds.join(sep) !== canvasIds.join(sep) || preUpdatedIds.join(sep) !== updatedIds.join(sep)) {\n        this.setLayerCanvasUpdated();\n      }\n    }\n  };\n  _proto._checkLayerRedraw = function _checkLayerRedraw(layer) {\n    if (this.isSpatialReferenceChanged()) {\n      return true;\n    }\n    var map = this.map;\n    var renderer = layer._getRenderer();\n    if (layer.isCanvasRender()) {\n      return renderer.testIfNeedRedraw();\n    } else {\n      if (renderer.needToRedraw && renderer.needToRedraw()) {\n        return true;\n      }\n      return map.isInteracting() || this.isViewChanged();\n    }\n  };\n  _proto._drawCanvasLayerOnInteracting = function _drawCanvasLayerOnInteracting(layer, t, timeLimit, framestamp) {\n    var map = this.map,\n      renderer = layer._getRenderer(),\n      drawTime = renderer.getDrawTime(),\n      inTime = timeLimit === 0 || timeLimit > 0 && t + drawTime <= timeLimit;\n    if (renderer.mustRenderOnInteracting && renderer.mustRenderOnInteracting()) {\n      renderer.render(framestamp);\n    } else if (renderer.drawOnInteracting && (layer === map.getBaseLayer() || inTime || map.isZooming() && layer.options['forceRenderOnZooming'] || map.isMoving() && layer.options['forceRenderOnMoving'] || map.isRotating() && layer.options['forceRenderOnRotating'])) {\n      renderer.prepareRender();\n      renderer.prepareCanvas();\n      if (renderer.checkAndDraw) {\n        renderer.checkAndDraw(renderer.drawOnInteracting, this._eventParam, framestamp);\n      } else {\n        renderer.drawOnInteracting(this._eventParam, framestamp);\n      }\n      return drawTime;\n    } else if (map.isZooming() && !map.getPitch() && !map.isRotating()) {\n      renderer.prepareRender();\n      renderer.__zoomTransformMatrix = this._zoomMatrix;\n    } else if (map.getPitch() || map.isRotating()) {\n      renderer.clearCanvas();\n    }\n    if (renderer.drawOnInteracting && !inTime) {\n      renderer.onSkipDrawOnInteracting(this._eventParam, framestamp);\n    }\n    return 0;\n  };\n  _proto._fireLayerLoadEvents = function _fireLayerLoadEvents() {\n    if (this._updatedIds && this._updatedIds.length > 0) {\n      var map = this.map;\n      this._updatedIds.reverse().forEach(function (id) {\n        var layer = map.getLayer(id);\n        if (!layer) {\n          return;\n        }\n        var renderer = layer._getRenderer();\n        if (!renderer || !renderer.isRenderComplete()) {\n          return;\n        }\n        layer.fire('layerload');\n      });\n    }\n  };\n  _proto.isLayerCanvasUpdated = function isLayerCanvasUpdated() {\n    return this._canvasUpdated;\n  };\n  _proto.setLayerCanvasUpdated = function setLayerCanvasUpdated() {\n    this._canvasUpdated = true;\n  };\n  _proto.drawLayerCanvas = function drawLayerCanvas(layers) {\n    var map = this.map;\n    if (!map) {\n      return false;\n    }\n    if (!this.isLayerCanvasUpdated() && !this.isViewChanged() && this._needClear === false) {\n      return false;\n    }\n    if (!this.canvas) {\n      this.createCanvas();\n    }\n    map._fireEvent('renderstart', {\n      'context': this.context\n    });\n    if (!this._updateCanvasSize()) {\n      this.clearCanvas();\n    }\n    var interacting = map.isInteracting(),\n      limit = map.options['layerCanvasLimitOnInteracting'];\n    var len = layers.length;\n    var baseLayerImage;\n    var images = [];\n    for (var i = 0; i < len; i++) {\n      if (!layers[i].isVisible() || !layers[i].isCanvasRender()) {\n        continue;\n      }\n      var renderer = layers[i]._getRenderer();\n      if (!renderer) {\n        continue;\n      }\n      var layerImage = this._getLayerImage(layers[i]);\n      if (layerImage && layerImage['image']) {\n        if (layers[i] === map.getBaseLayer()) {\n          baseLayerImage = [layers[i], layerImage];\n        } else {\n          images.push([layers[i], layerImage]);\n        }\n      }\n    }\n    var targetWidth = this.canvas.width;\n    var targetHeight = this.canvas.height;\n    if (baseLayerImage) {\n      this._drawLayerCanvasImage(baseLayerImage[0], baseLayerImage[1], targetWidth, targetHeight);\n      this._drawFog();\n    }\n    len = images.length;\n    var start = interacting && limit >= 0 && len > limit ? len - limit : 0;\n    for (var _i = start; _i < len; _i++) {\n      this._drawLayerCanvasImage(images[_i][0], images[_i][1], targetWidth, targetHeight);\n    }\n    map._fireEvent('renderend', {\n      'context': this.context\n    });\n    return true;\n  };\n  _proto.setToRedraw = function setToRedraw() {\n    var layers = this._getAllLayerToRender();\n    this._needClear = true;\n    for (var i = 0, l = layers.length; i < l; i++) {\n      var renderer = layers[i].getRenderer();\n      if (renderer && renderer.canvas && renderer.setToRedraw) {\n        renderer.setToRedraw();\n      }\n    }\n  };\n  _proto.updateMapSize = function updateMapSize(size) {\n    if (!size || this._containerIsCanvas) {\n      return;\n    }\n    var width = size['width'] + 'px',\n      height = size['height'] + 'px';\n    var panels = this.map._panels;\n    panels.mapWrapper.style.width = width;\n    panels.mapWrapper.style.height = height;\n    this._updateCanvasSize();\n  };\n  _proto.getMainPanel = function getMainPanel() {\n    if (!this.map) {\n      return null;\n    }\n    if (this._containerIsCanvas) {\n      return this.map._containerDOM;\n    }\n    if (this.map._panels) {\n      return this.map._panels.mapWrapper;\n    }\n    return null;\n  };\n  _proto.toDataURL = function toDataURL(mimeType, quality) {\n    if (!this.canvas) {\n      return null;\n    }\n    return this.canvas.toDataURL(mimeType, quality);\n  };\n  _proto.remove = function remove() {\n    if (Browser$1.webgl && typeof document !== 'undefined') {\n      removeDomEvent(document, 'visibilitychange', this._thisDocVisibilitychange, this);\n      removeDomEvent(document, 'dragstart', this._thisDocDragStart, this);\n      removeDomEvent(document, 'dragend', this._thisDocDragEnd, this);\n    }\n    if (this._resizeInterval) {\n      clearInterval(this._resizeInterval);\n    }\n    if (this._resizeObserver) {\n      this._resizeObserver.disconnect();\n    }\n    delete this.context;\n    delete this.canvas;\n    delete this.map;\n    delete this._spatialRefChanged;\n    this._cancelFrameLoop();\n  };\n  _proto.hitDetect = function hitDetect(point) {\n    var map = this.map;\n    if (!map || !map.options['hitDetect'] || map.isInteracting()) {\n      return;\n    }\n    var layers = map._getLayers();\n    var cursor = 'default';\n    var limit = map.options['hitDetectLimit'] || 0;\n    var counter = 0;\n    if (point && point._round) {\n      point._round();\n    }\n    for (var i = layers.length - 1; i >= 0; i--) {\n      var layer = layers[i];\n      if (!layer.options['hitDetect'] || layer.isEmpty && layer.isEmpty()) {\n        continue;\n      }\n      var renderer = layer._getRenderer();\n      if (!renderer || !renderer.hitDetect) {\n        continue;\n      }\n      if (renderer.isBlank && renderer.isBlank()) {\n        continue;\n      }\n      if (layer.options['cursor'] !== 'default' && renderer.hitDetect(point)) {\n        cursor = layer.options['cursor'] || 'pointer';\n        break;\n      }\n      counter++;\n      if (limit > 0 && counter > limit) {\n        break;\n      }\n    }\n    map._trySetCursor(cursor);\n  };\n  _proto._getLayerImage = function _getLayerImage(layer) {\n    var renderer = layer._getRenderer();\n    if (renderer.getCanvasImage) {\n      return renderer.getCanvasImage();\n    }\n    return null;\n  };\n  _proto.initContainer = function initContainer() {\n    var panels = this.map._panels;\n    function createContainer(name, className, cssText, enableSelect) {\n      var c = createEl('div', className);\n      if (cssText) {\n        c.style.cssText = cssText;\n      }\n      panels[name] = c;\n      if (!enableSelect) {\n        preventSelection(c);\n      }\n      return c;\n    }\n    var containerDOM = this.map._containerDOM;\n    if (this._containerIsCanvas) {\n      return;\n    }\n    containerDOM.innerHTML = '';\n    var POSITION0 = 'position:absolute;top:0px;left:0px;';\n    var mapWrapper = createContainer('mapWrapper', 'maptalks-wrapper', 'position:absolute;overflow:hidden;', true),\n      mapAllLayers = createContainer('allLayers', 'maptalks-all-layers', POSITION0 + 'padding:0px;margin:0px;z-index:0;overflow:visible;', true),\n      backStatic = createContainer('backStatic', 'maptalks-back-static', POSITION0 + 'z-index:0;', true),\n      back = createContainer('back', 'maptalks-back', POSITION0 + 'z-index:1;'),\n      backLayer = createContainer('backLayer', 'maptalks-back-layer', POSITION0),\n      canvasContainer = createContainer('canvasContainer', 'maptalks-canvas-layer', POSITION0 + 'border:none;z-index:2;'),\n      frontStatic = createContainer('frontStatic', 'maptalks-front-static', POSITION0 + 'z-index:3;', true),\n      front = createContainer('front', 'maptalks-front', POSITION0 + 'z-index:4;', true),\n      frontLayer = createContainer('frontLayer', 'maptalks-front-layer', POSITION0 + 'z-index:0;'),\n      ui = createContainer('ui', 'maptalks-ui', POSITION0 + 'border:none;z-index:1;', true),\n      control = createContainer('control', 'maptalks-control', 'z-index:1', true);\n    containerDOM.appendChild(mapWrapper);\n    mapAllLayers.appendChild(backStatic);\n    back.appendChild(backLayer);\n    back.layerDOM = backLayer;\n    mapAllLayers.appendChild(back);\n    mapAllLayers.appendChild(canvasContainer);\n    front.appendChild(frontLayer);\n    front.layerDOM = frontLayer;\n    front.uiDOM = ui;\n    mapAllLayers.appendChild(frontStatic);\n    mapAllLayers.appendChild(front);\n    front.appendChild(ui);\n    mapWrapper.appendChild(mapAllLayers);\n    mapWrapper.appendChild(control);\n    this.createCanvas();\n    this.resetContainer();\n    var mapSize = this.map._getContainerDomSize();\n    this.updateMapSize(mapSize);\n  };\n  _proto.isViewChanged = function isViewChanged() {\n    if (this._isViewChanged !== undefined) {\n      return this._isViewChanged;\n    }\n    var previous = this._mapview;\n    var view = this._getMapView();\n    this._isViewChanged = !previous || !equalMapView(previous, view);\n    return this._isViewChanged;\n  };\n  _proto._recordView = function _recordView() {\n    var map = this.map;\n    if (!map._onViewChange || map.isInteracting() || map.isAnimating()) {\n      return;\n    }\n    if (!equalMapView(map.getView(), map._getCurrentView())) {\n      map._onViewChange(map.getView());\n    }\n  };\n  _proto.isSpatialReferenceChanged = function isSpatialReferenceChanged() {\n    return this._spatialRefChanged;\n  };\n  _proto._getMapView = function _getMapView() {\n    var map = this.map;\n    var center = map._getPrjCenter();\n    return {\n      x: center.x,\n      y: center.y,\n      zoom: map.getZoom(),\n      pitch: map.getPitch(),\n      bearing: map.getBearing(),\n      width: map.width,\n      height: map.height\n    };\n  };\n  _proto._frameLoop = function _frameLoop(framestamp) {\n    var _this2 = this;\n    if (!this.map) {\n      this._cancelFrameLoop();\n      return;\n    }\n    framestamp = framestamp || 0;\n    this._frameTimestamp = framestamp;\n    this._resizeCount = 0;\n    this.renderFrame(framestamp);\n    this._animationFrame = requestAnimFrame(function (framestamp) {\n      _this2._frameLoop(framestamp);\n    });\n  };\n  _proto._cancelFrameLoop = function _cancelFrameLoop() {\n    if (this._animationFrame) {\n      cancelAnimFrame(this._animationFrame);\n    }\n  };\n  _proto._drawLayerCanvasImage = function _drawLayerCanvasImage(layer, layerImage, targetWidth, targetHeight) {\n    var ctx = this.context;\n    var point = layerImage['point'].round();\n    var dpr = this.map.getDevicePixelRatio();\n    if (dpr !== 1) {\n      point._multi(dpr);\n    }\n    var canvasImage = layerImage['image'];\n    var width = canvasImage.width,\n      height = canvasImage.height;\n    if (point.x + width <= 0 || point.y + height <= 0) {\n      return;\n    }\n    var op = layer.options['opacity'];\n    if (!isNumber(op)) {\n      op = 1;\n    }\n    if (op <= 0) {\n      return;\n    }\n    var imgOp = layerImage['opacity'];\n    if (!isNumber(imgOp)) {\n      imgOp = 1;\n    }\n    if (imgOp <= 0) {\n      return;\n    }\n    var alpha = ctx.globalAlpha;\n    if (op < 1) {\n      ctx.globalAlpha *= op;\n    }\n    if (imgOp < 1) {\n      ctx.globalAlpha *= imgOp;\n    }\n    if (layer.options['cssFilter']) {\n      ctx.filter = layer.options['cssFilter'];\n    }\n    var renderer = layer.getRenderer();\n    var matrix = renderer.__zoomTransformMatrix;\n    var clipped = renderer.clipCanvas(this.context);\n    if (matrix) {\n      ctx.save();\n      ctx.setTransform.apply(ctx, matrix);\n    }\n    ctx.drawImage(canvasImage, 0, 0, width, height, point.x, point.y, targetWidth, targetHeight);\n    if (matrix) {\n      ctx.restore();\n    }\n    if (clipped) {\n      ctx.restore();\n    }\n    if (ctx.filter !== 'none') {\n      ctx.filter = 'none';\n    }\n    ctx.globalAlpha = alpha;\n  };\n  _proto._drawCenterCross = function _drawCenterCross() {\n    var cross = this.map.options['centerCross'];\n    if (cross) {\n      var ctx = this.context;\n      var p = new Point(this.canvas.width / 2, this.canvas.height / 2);\n      if (isFunction(cross)) {\n        cross(ctx, p);\n      } else {\n        Canvas.drawCross(this.context, p.x, p.y, 2, '#f00');\n      }\n    }\n  };\n  _proto._drawContainerExtent = function _drawContainerExtent() {\n    var cascadePitches = this.map.options.cascadePitches;\n    var h30 = this.map.height - this.map._getVisualHeight(cascadePitches[0]);\n    var h60 = this.map.height - this.map._getVisualHeight(cascadePitches[1]);\n    var extent = this.map.getContainerExtent();\n    var ctx = this.context;\n    ctx.beginPath();\n    ctx.moveTo(0, extent.ymin);\n    ctx.lineTo(extent.xmax, extent.ymin);\n    ctx.stroke();\n    ctx.beginPath();\n    ctx.moveTo(0, h30);\n    ctx.lineTo(extent.xmax, h30);\n    ctx.stroke();\n    ctx.beginPath();\n    ctx.moveTo(0, h60);\n    ctx.lineTo(extent.xmax, h60);\n    ctx.stroke();\n  };\n  _proto._drawFog = function _drawFog() {\n    var map = this.map;\n    if (map.getPitch() <= map.options['maxVisualPitch'] || !map.options['fog']) {\n      return;\n    }\n    var fogThickness = 30;\n    var r = map.getDevicePixelRatio();\n    var ctx = this.context,\n      clipExtent = map.getContainerExtent();\n    var top = (map.height - map._getVisualHeight(75)) * r;\n    if (top < 0) top = 0;\n    var bottom = clipExtent.ymin * r,\n      h = Math.ceil(bottom - top),\n      color = map.options['fogColor'].join();\n    var gradient = ctx.createLinearGradient(0, top, 0, bottom + fogThickness);\n    var landscape = 1 - fogThickness / (h + fogThickness);\n    gradient.addColorStop(0, \"rgba(\" + color + \", 0)\");\n    gradient.addColorStop(0.3, \"rgba(\" + color + \", 0.3)\");\n    gradient.addColorStop(landscape, \"rgba(\" + color + \", 1)\");\n    gradient.addColorStop(1, \"rgba(\" + color + \", 0)\");\n    ctx.beginPath();\n    ctx.fillStyle = gradient;\n    ctx.fillRect(0, top, Math.ceil(clipExtent.getWidth()) * r, Math.ceil(h + fogThickness));\n  };\n  _proto._debugSky = function _debugSky() {\n    var map = this.map;\n    if (!map) {\n      return this;\n    }\n    var height = map.getContainerExtent().ymin;\n    if (height <= 0) {\n      return this;\n    }\n    var ctx = this.context;\n    ctx.strokeStyle = 'red';\n    ctx.strokeRect(0, 0, map.width, height);\n    return this;\n  };\n  _proto._getAllLayerToRender = function _getAllLayerToRender() {\n    return this.map._getLayers();\n  };\n  _proto.clearCanvas = function clearCanvas() {\n    if (!this.canvas) {\n      return;\n    }\n    Canvas.clearRect(this.context, 0, 0, this.canvas.width, this.canvas.height);\n  };\n  _proto._updateCanvasSize = function _updateCanvasSize() {\n    if (!this.canvas || this._containerIsCanvas) {\n      return false;\n    }\n    var map = this.map,\n      mapSize = map.getSize(),\n      canvas = this.canvas,\n      r = map.getDevicePixelRatio();\n    var _calCanvasSize = calCanvasSize(mapSize, r),\n      width = _calCanvasSize.width,\n      height = _calCanvasSize.height,\n      cssWidth = _calCanvasSize.cssWidth,\n      cssHeight = _calCanvasSize.cssHeight;\n    if (canvas.style && (canvas.style.width !== cssWidth || canvas.style.height !== cssHeight)) {\n      canvas.style.width = cssWidth;\n      canvas.style.height = cssHeight;\n    }\n    if (width === canvas.width && height === canvas.height) {\n      return false;\n    }\n    canvas.height = height;\n    canvas.width = width;\n    this.topLayer.width = canvas.width;\n    this.topLayer.height = canvas.height;\n    return true;\n  };\n  _proto.createCanvas = function createCanvas() {\n    this.topLayer = createEl('canvas');\n    this.topCtx = this.topLayer.getContext('2d');\n    if (this._containerIsCanvas) {\n      this.canvas = this.map._containerDOM;\n    } else {\n      this.canvas = createEl('canvas');\n      this._updateCanvasSize();\n      this.map._panels.canvasContainer.appendChild(this.canvas);\n    }\n    this.context = this.canvas.getContext('2d');\n  };\n  _proto._updateDomPosition = function _updateDomPosition(framestamp) {\n    if (this._checkPositionTime === undefined) {\n      this._checkPositionTime = -Infinity;\n    }\n    var dTime = Math.abs(framestamp - this._checkPositionTime);\n    if (dTime >= 500) {\n      computeDomPosition(this.map._containerDOM);\n      this._checkPositionTime = Math.min(framestamp, this._checkPositionTime);\n    }\n    return this;\n  };\n  _proto._handleResizeEventList = function _handleResizeEventList(time) {\n    if (!this._resizeEventList) {\n      return this;\n    }\n    var len = this._resizeEventList.length;\n    if (len === 0) {\n      return this;\n    }\n    if (this._resizeTime && time - this._resizeTime < 60) {\n      return this;\n    }\n    var contentRect = this._resizeEventList[len - 1].contentRect;\n    this.map._containerDomContentRect = contentRect;\n    this._resizeEventList = [];\n    this._checkSize(contentRect);\n    this._resizeCount = this._resizeCount || 0;\n    this.renderFrame((this._frameTimestamp || 0) + ++this._resizeCount / 100);\n    this._resizeTime = time;\n    return this;\n  };\n  _proto._checkSize = function _checkSize() {\n    if (!this.map) {\n      return;\n    }\n    this.map.checkSize();\n  };\n  _proto._setCheckSizeInterval = function _setCheckSizeInterval(interval) {\n    var _this3 = this;\n    if (Browser$1.resizeObserver) {\n      if (this._resizeObserver) {\n        this._resizeObserver.disconnect();\n      }\n      if (this.map) {\n        this._resizeObserver = new ResizeObserver(function (entries) {\n          if (!_this3.map || _this3.map.isRemoved()) {\n            _this3._resizeObserver.disconnect();\n          } else if (entries.length) {\n            _this3._resizeEventList = _this3._resizeEventList || [];\n            _this3._resizeEventList.push(entries[0]);\n          }\n        });\n        this._resizeObserver.observe(this.map._containerDOM);\n      }\n    } else {\n      clearInterval(this._resizeInterval);\n      this._checkSizeInterval = interval;\n      this._resizeInterval = setInterval(function () {\n        if (!_this3.map || _this3.map.isRemoved()) {\n          clearInterval(_this3._resizeInterval);\n        } else {\n          _this3._checkSize();\n        }\n      }, this._checkSizeInterval);\n    }\n  };\n  _proto._registerEvents = function _registerEvents() {\n    var _this4 = this;\n    var map = this.map;\n    if (map.options['checkSize'] && !IS_NODE && typeof window !== 'undefined') {\n      this._setCheckSizeInterval(map.options['checkSizeInterval']);\n    }\n    if (!Browser$1.mobile) {\n      map.on('_mousemove', this._onMapMouseMove, this);\n    }\n    map.on('_dragrotatestart _dragrotating _dragrotateend _movestart _moving _moveend _zoomstart', function (param) {\n      _this4._eventParam = param;\n    });\n    map.on('_zooming', function (param) {\n      if (!map.getPitch()) {\n        _this4._zoomMatrix = param['matrix']['container'];\n      }\n      _this4._eventParam = param;\n    });\n    map.on('_zoomend', function (param) {\n      _this4._eventParam = param;\n      delete _this4._zoomMatrix;\n    });\n    map.on('_spatialreferencechange', function () {\n      _this4._spatialRefChanged = true;\n    });\n    if (Browser$1.webgl && typeof document !== 'undefined') {\n      addDomEvent(document, 'visibilitychange', this._thisDocVisibilitychange, this);\n      addDomEvent(document, 'dragstart', this._thisDocDragStart, this);\n      addDomEvent(document, 'dragend', this._thisDocDragEnd, this);\n    }\n    if (Browser$1.addDPRListening) {\n      Browser$1.addDPRListening(this.map);\n    }\n  };\n  _proto._onMapMouseMove = function _onMapMouseMove(param) {\n    var _this5 = this;\n    var map = this.map;\n    if (map.isInteracting() || !map.options['hitDetect']) {\n      return;\n    }\n    if (this._hitDetectFrame) {\n      cancelAnimFrame(this._hitDetectFrame);\n    }\n    this._hitDetectFrame = requestAnimFrame(function () {\n      _this5.hitDetect(param['containerPoint']);\n    });\n  };\n  _proto._getCanvasLayers = function _getCanvasLayers() {\n    return this.map._getLayers(function (layer) {\n      return layer.isCanvasRender();\n    });\n  };\n  _proto.addTopElement = function addTopElement(e) {\n    if (!this._tops) {\n      this._tops = [];\n    }\n    this._tops.push(e);\n  };\n  _proto.removeTopElement = function removeTopElement(e) {\n    if (!this._tops) {\n      return;\n    }\n    var idx = this._tops.indexOf(e);\n    if (idx >= 0) {\n      this._tops.splice(idx, 1);\n    }\n  };\n  _proto.getTopElements = function getTopElements() {\n    return this._tops || [];\n  };\n  _proto.drawTops = function drawTops() {\n    this.topCtx.clearRect(0, 0, this.topLayer.width, this.topLayer.height);\n    this.map.fire('drawtopstart');\n    this.map.fire('drawtops');\n    var tops = this.getTopElements();\n    var updated = false;\n    for (var i = 0; i < tops.length; i++) {\n      if (tops[i].render(this.topCtx)) {\n        updated = true;\n      }\n    }\n    if (updated) {\n      this.context.drawImage(this.topLayer, 0, 0);\n    }\n    this.map.fire('drawtopsend');\n  };\n  return MapCanvasRenderer;\n}(MapRenderer);\nMap$1.registerRenderer('canvas', MapCanvasRenderer);\nMap$1.mergeOptions({\n  'fog': false,\n  'fogColor': [233, 233, 233]\n});\nvar index$6 = /*#__PURE__*/Object.freeze({\n  ResourceCache: ResourceCache,\n  CanvasRenderer: CanvasRenderer,\n  ImageGLRenderable: ImageGLRenderable,\n  MapRenderer: MapRenderer,\n  MapCanvasRenderer: MapCanvasRenderer,\n  Renderable: Renderable,\n  ImageLayerCanvasRenderer: ImageLayerCanvasRenderer,\n  ImageLayerGLRenderer: ImageLayerGLRenderer,\n  TileLayerCanvasRenderer: TileLayerCanvasRenderer,\n  TileLayerGLRenderer: TileLayerGLRenderer,\n  CanvasTileLayerCanvasRenderer: CanvasRenderer$1,\n  CanvasTileLayerGLRenderer: GLRenderer,\n  QuadStencil: QuadStencil,\n  OverlayLayerCanvasRenderer: OverlayLayerRenderer,\n  VectorLayerCanvasRenderer: VectorLayerRenderer,\n  CanvasLayerRenderer: CanvasLayerRenderer\n});\nvar CenterPointRenderer = {\n  _getRenderPoints: function _getRenderPoints() {\n    return [[this._getCenter2DPoint(this.getMap().getGLRes())], null];\n  }\n};\nMarker.include(CenterPointRenderer);\nEllipse.include(CenterPointRenderer);\nCircle.include(CenterPointRenderer);\nSector.include(CenterPointRenderer);\nRectangle.include({\n  _getRenderPoints: function _getRenderPoints(placement) {\n    var map = this.getMap();\n    var glRes = map.getGLRes();\n    if (placement === 'vertex') {\n      var shell = this._trimRing(this.getShell());\n      var points = [];\n      for (var i = 0, len = shell.length; i < len; i++) {\n        points.push(map.coordToPointAtRes(shell[i], glRes));\n      }\n      return [points, null];\n    } else {\n      var c = map.coordToPointAtRes(this.getCenter(), glRes);\n      return [[c], null];\n    }\n  }\n});\nvar PolyRenderer = {\n  _getRenderPoints: function _getRenderPoints(placement) {\n    var map = this.getMap();\n    var glRes = map.getGLRes();\n    var points,\n      rotations = null;\n    if (placement === 'point') {\n      points = this._getPath2DPoints(this._getPrjCoordinates(), false, glRes);\n      if (points && points.length > 0 && Array.isArray(points[0])) {\n        points = points[0].concat(points[1]);\n      }\n    } else if (placement === 'vertex') {\n      points = this._getPath2DPoints(this._getPrjCoordinates(), false, glRes);\n      rotations = [];\n      if (points && points.length > 0 && Array.isArray(points[0])) {\n        for (var i = 0, l = points.length; i < l; i++) {\n          for (var ii = 0, ll = points[i].length; ii < ll; ii++) {\n            if (ii === 0) {\n              rotations.push([points[i][ii], points[i][ii + 1]]);\n            } else {\n              rotations.push([points[i][ii - 1], points[i][ii]]);\n            }\n          }\n        }\n        points = points[0].concat(points[1]);\n      } else {\n        for (var _i = 0, _l = points.length; _i < _l; _i++) {\n          if (_i === 0) {\n            rotations.push([points[_i], points[_i + 1]]);\n          } else {\n            rotations.push([points[_i - 1], points[_i]]);\n          }\n        }\n      }\n    } else if (placement === 'line') {\n      points = [];\n      rotations = [];\n      var vertice = this._getPath2DPoints(this._getPrjCoordinates(), false, glRes),\n        isSplitted = vertice.length > 0 && Array.isArray(vertice[0]);\n      if (isSplitted) {\n        var ring;\n        for (var _i2 = 1, _l2 = vertice.length; _i2 < _l2; _i2++) {\n          ring = vertice[_i2];\n          if (this instanceof Polygon && ring.length > 0 && !ring[0].equals(ring[ring.length - 1])) {\n            ring.push(ring[0]);\n          }\n          for (var _ii = 1, _ll = ring.length; _ii < _ll; _ii++) {\n            points.push(ring[_ii].add(ring[_ii - 1])._multi(0.5));\n            rotations.push([ring[_ii - 1], ring[_ii]]);\n          }\n        }\n      } else {\n        if (this instanceof Polygon && vertice.length > 0 && !vertice[0].equals(vertice[vertice.length - 1])) {\n          vertice.push(vertice[0]);\n        }\n        for (var _i3 = 1, _l3 = vertice.length; _i3 < _l3; _i3++) {\n          points.push(vertice[_i3].add(vertice[_i3 - 1])._multi(0.5));\n          rotations.push([vertice[_i3 - 1], vertice[_i3]]);\n        }\n      }\n    } else if (placement === 'vertex-first') {\n      var coords = this._getPrjCoordinates();\n      var _l4 = coords.length;\n      var point0 = _l4 ? map._prjToPointAtRes(coords[0], glRes) : null;\n      points = _l4 ? [point0] : [];\n      rotations = _l4 ? [[point0, coords[1] ? map._prjToPointAtRes(coords[1], glRes) : point0]] : [];\n    } else if (placement === 'vertex-last') {\n      var _coords = this._getPrjCoordinates();\n      var _l5 = _coords.length;\n      var curretPoint = _l5 ? map._prjToPointAtRes(_coords[_l5 - 1], glRes) : null;\n      points = _l5 ? [curretPoint] : [];\n      var previous = _l5 > 1 ? _l5 - 2 : _l5 - 1;\n      rotations = _l5 ? [[_coords[previous] ? map._prjToPointAtRes(_coords[previous], glRes) : curretPoint, curretPoint]] : [];\n    } else {\n      var center = this.getCenter();\n      if (!center) {\n        points = [];\n      } else {\n        var pcenter = this._getProjection().project(center);\n        points = [map._prjToPointAtRes(pcenter, glRes)];\n      }\n    }\n    return [points, rotations];\n  }\n};\nLineString.include(PolyRenderer);\nPolygon.include(PolyRenderer);\nvar TEMP_WITHIN = {\n  within: false,\n  center: [0, 0]\n};\nfunction isWithinPixel(painter) {\n  if (!painter || !painter._containerBbox) {\n    TEMP_WITHIN.within = false;\n  } else {\n    TEMP_WITHIN.within = false;\n    var _painter$_containerBb = painter._containerBbox,\n      minx = _painter$_containerBb.minx,\n      miny = _painter$_containerBb.miny,\n      maxx = _painter$_containerBb.maxx,\n      maxy = _painter$_containerBb.maxy;\n    var offsetx = Math.abs(maxx - minx);\n    var offsety = Math.abs(maxy - miny);\n    if (offsetx <= 1 && offsety <= 1) {\n      TEMP_WITHIN.within = true;\n      TEMP_WITHIN.center[0] = (minx + maxx) / 2;\n      TEMP_WITHIN.center[1] = (miny + maxy) / 2;\n    }\n    delete painter._containerBbox;\n  }\n  return TEMP_WITHIN;\n}\nGeometry.include({\n  _redrawWhenPitch: function _redrawWhenPitch() {\n    return false;\n  },\n  _redrawWhenRotate: function _redrawWhenRotate() {\n    return false;\n  },\n  _getRenderBBOX: function _getRenderBBOX(ctx, points) {\n    if (!ctx.isHitTesting) {\n      resetBBOX(BBOX_TEMP);\n      pointsBBOX(points, BBOX_TEMP);\n      return BBOX_TEMP;\n    }\n    return null;\n  }\n});\nvar el = {\n  _redrawWhenPitch: function _redrawWhenPitch() {\n    return true;\n  },\n  _redrawWhenRotate: function _redrawWhenRotate() {\n    return this instanceof Ellipse || this instanceof Sector;\n  },\n  _paintAsPath: function _paintAsPath() {\n    var map = this.getMap();\n    var altitude = this._getAltitude();\n    return altitude > 0 || map.getPitch() || this instanceof Ellipse && map.getBearing();\n  },\n  _getPaintParams: function _getPaintParams() {\n    var map = this.getMap();\n    if (this._paintAsPath()) {\n      return Polygon.prototype._getPaintParams.call(this, true);\n    }\n    var pcenter = this._getPrjCoordinates();\n    var pt = map._prjToPointAtRes(pcenter, map.getGLRes());\n    var size = this._getRenderSize(pt);\n    return [pt].concat(size);\n  },\n  _paintOn: function _paintOn() {\n    if (this._paintAsPath()) {\n      return Canvas.polygon.apply(Canvas, arguments);\n    } else {\n      return Canvas.ellipse.apply(Canvas, arguments);\n    }\n  },\n  _getRenderSize: function _getRenderSize(pt) {\n    var map = this.getMap(),\n      glRes = map.getGLRes();\n    var prjExtent = this._getPrjExtent();\n    var pmin = map._prjToPointAtRes(prjExtent.getMin(), glRes),\n      pmax = map._prjToPointAtRes(prjExtent.getMax(), glRes);\n    return [Math.abs(pmax.x - pmin.x) / 2, Math.abs(pmax.y - pt.y), Math.abs(pt.y - pmin.y)];\n  }\n};\nEllipse.include(el);\nCircle.include(el);\nRectangle.include({\n  _getPaintParams: function _getPaintParams() {\n    var map = this.getMap();\n    var shell = this._getPrjShell();\n    var points = this._getPath2DPoints(shell, false, map.getGLRes());\n    return [points];\n  },\n  _paintOn: Canvas.polygon\n});\nSector.include(el, {\n  _redrawWhenPitch: function _redrawWhenPitch() {\n    return true;\n  },\n  _getPaintParams: function _getPaintParams() {\n    if (this._paintAsPath()) {\n      return Polygon.prototype._getPaintParams.call(this, true);\n    }\n    var map = this.getMap();\n    var pt = map._prjToPointAtRes(this._getPrjCoordinates(), map.getGLRes());\n    var size = this._getRenderSize(pt);\n    return [pt, size[0], [this.getStartAngle(), this.getEndAngle()]];\n  },\n  _paintOn: function _paintOn() {\n    if (this._paintAsPath()) {\n      return Canvas.polygon.apply(Canvas, arguments);\n    } else {\n      var r = this.getMap().getBearing();\n      var args = arguments;\n      if (r) {\n        args[3] = args[3].slice(0);\n        args[3][0] += r;\n        args[3][1] += r;\n      }\n      return Canvas.sector.apply(Canvas, args);\n    }\n  }\n});\nPath.include({\n  _paintAsPath: function _paintAsPath() {\n    return true;\n  }\n});\nLineString.include({\n  arrowStyles: {\n    'classic': [3, 4]\n  },\n  _getArrowShape: function _getArrowShape(prePoint, point, lineWidth, arrowStyle, tolerance) {\n    if (!prePoint || !point || prePoint.equals(point)) {\n      return null;\n    }\n    if (!tolerance) {\n      tolerance = 0;\n    }\n    var width = lineWidth * arrowStyle[0],\n      height = lineWidth * arrowStyle[1] + tolerance,\n      hw = width / 2 + tolerance;\n    var normal;\n    if (point.nextCtrlPoint || point.prevCtrlPoint) {\n      if (point.prevCtrlPoint) {\n        normal = point.sub(new Point(point.prevCtrlPoint));\n      } else {\n        normal = point.sub(new Point(point.nextCtrlPoint));\n      }\n    } else {\n      normal = point.sub(prePoint);\n    }\n    normal._unit();\n    var p1 = point.sub(normal.multi(height));\n    normal._perp();\n    var p0 = p1.add(normal.multi(hw));\n    normal._multi(-1);\n    var p2 = p1.add(normal.multi(hw));\n    return [p0, point, p2, p0];\n  },\n  _getPaintParams: function _getPaintParams() {\n    var prjVertexes = this._getPrjCoordinates();\n    var points = this._getPath2DPoints(prjVertexes, false, this.getMap().getGLRes());\n    return [points];\n  },\n  _paintOn: function _paintOn(ctx, points, lineOpacity, fillOpacity, dasharray) {\n    var r = isWithinPixel(this._painter);\n    if (r.within) {\n      Canvas.pixelRect(ctx, r.center, lineOpacity, fillOpacity);\n    } else if (this.options['smoothness']) {\n      Canvas.paintSmoothLine(ctx, points, lineOpacity, this.options['smoothness'], false, this._animIdx, this._animTailRatio);\n    } else {\n      Canvas.path(ctx, points, lineOpacity, null, dasharray);\n    }\n    this._paintArrow(ctx, points, lineOpacity);\n    return this._getRenderBBOX(ctx, points);\n  },\n  _getArrowPlacement: function _getArrowPlacement() {\n    return this.options['arrowPlacement'];\n  },\n  _getArrowStyle: function _getArrowStyle() {\n    var arrowStyle = this.options['arrowStyle'];\n    if (arrowStyle) {\n      return Array.isArray(arrowStyle) ? arrowStyle : this.arrowStyles[arrowStyle];\n    }\n    return null;\n  },\n  _getArrows: function _getArrows(points, lineWidth, tolerance) {\n    var arrowStyle = this._getArrowStyle();\n    if (!arrowStyle || points.length < 2) {\n      return [];\n    }\n    var isSplitted = points.length > 0 && Array.isArray(points[0]);\n    var segments = isSplitted ? points : [points];\n    var placement = this._getArrowPlacement();\n    var arrows = [];\n    var map = this.getMap(),\n      first = map.coordToContainerPoint(this.getFirstCoordinate()),\n      last = map.coordToContainerPoint(this.getLastCoordinate());\n    for (var i = segments.length - 1; i >= 0; i--) {\n      if (placement === 'vertex-first' || placement === 'vertex-firstlast' && segments[i][0].closeTo(first, 0.01)) {\n        var arrow = this._getArrowShape(segments[i][1], segments[i][0], lineWidth, arrowStyle, tolerance);\n        if (arrow) {\n          arrows.push(arrow);\n        }\n      }\n      if (placement === 'vertex-last' || placement === 'vertex-firstlast' && segments[i][segments[i].length - 1].closeTo(last, 0.01)) {\n        var _arrow = this._getArrowShape(segments[i][segments[i].length - 2], segments[i][segments[i].length - 1], lineWidth, arrowStyle, tolerance);\n        if (_arrow) {\n          arrows.push(_arrow);\n        }\n      } else if (placement === 'point') {\n        this._getArrowPoints(arrows, segments[i], lineWidth, arrowStyle, tolerance);\n      }\n    }\n    return arrows;\n  },\n  _getArrowPoints: function _getArrowPoints(arrows, segments, lineWidth, arrowStyle, tolerance) {\n    for (var ii = 0, ll = segments.length - 1; ii < ll; ii++) {\n      var arrow = this._getArrowShape(segments[ii], segments[ii + 1], lineWidth, arrowStyle, tolerance);\n      if (arrow) {\n        arrows.push(arrow);\n      }\n    }\n  },\n  _paintArrow: function _paintArrow(ctx, points, lineOpacity) {\n    var lineWidth = this._getInternalSymbol()['lineWidth'];\n    if (!isNumber(lineWidth) || lineWidth < 3) {\n      lineWidth = 3;\n    }\n    var arrows = this._getArrows(points, lineWidth);\n    if (!arrows.length) {\n      return;\n    }\n    if (ctx.setLineDash) {\n      ctx.setLineDash([]);\n    }\n    for (var i = arrows.length - 1; i >= 0; i--) {\n      ctx.fillStyle = ctx.strokeStyle;\n      Canvas.polygon(ctx, arrows[i], lineOpacity, lineOpacity);\n    }\n  }\n});\nPolygon.include({\n  _getPaintParams: function _getPaintParams(disableSimplify) {\n    var glRes = this.getMap().getGLRes();\n    var prjVertexes = this._getPrjShell();\n    var points = this._getPath2DPoints(prjVertexes, disableSimplify, glRes);\n    var isSplitted = points.length > 0 && Array.isArray(points[0]);\n    if (isSplitted) {\n      points = [[points[0]], [points[1]]];\n    }\n    var prjHoles = this._getPrjHoles();\n    var holePoints = [];\n    if (prjHoles && prjHoles.length > 0) {\n      var simplified = this._simplified;\n      for (var i = 0; i < prjHoles.length; i++) {\n        var hole = this._getPath2DPoints(prjHoles[i], disableSimplify, glRes);\n        if (Array.isArray(hole) && isSplitted) {\n          if (Array.isArray(hole[0])) {\n            points[0].push(hole[0]);\n            points[1].push(hole[1]);\n          } else {\n            points[0].push(hole);\n          }\n        } else {\n          holePoints.push(hole);\n        }\n      }\n      if (simplified) {\n        this._simplified = simplified;\n      }\n    }\n    if (!isSplitted) {\n      points = [points];\n      pushIn(points, holePoints);\n    }\n    return [points];\n  },\n  _paintOn: function _paintOn(ctx, points, lineOpacity, fillOpacity, dasharray) {\n    var r = isWithinPixel(this._painter);\n    if (r.within) {\n      Canvas.pixelRect(ctx, r.center, lineOpacity, fillOpacity);\n    } else {\n      Canvas.polygon(ctx, points, lineOpacity, fillOpacity, dasharray, this.options['smoothness']);\n    }\n    return this._getRenderBBOX(ctx, points);\n  }\n});\nMap$1.VERSION = version;\nvar worker = {\n  Actor: Actor\n};\nexport { index$1 as Util, dom as DomUtil, strings as StringUtil, index as MapboxUtil, Map$1 as Map, index$4 as ui, index$5 as control, index$6 as renderer, index$3 as symbolizer, Animation$1 as animation, worker, Browser$1 as Browser, LRUCache, Ajax, Canvas, Promise$1 as Promise, Class, Eventable, JSONAble, CollisionIndex, Handlerable, Handler$1 as Handler, DragHandler, MapTool, DrawTool, AreaTool, DistanceTool, SpatialReference, animate, registerWorkerAdapter, INTERNAL_LAYER_PREFIX, GEOMETRY_COLLECTION_TYPES, GEOJSON_TYPES, RESOURCE_PROPERTIES, RESOURCE_SIZE_PROPERTIES, NUMERICAL_PROPERTIES, COLOR_PROPERTIES, DEFAULT_TEXT_SIZE, projections as projection, index$2 as measurer, Coordinate, CRS, Extent, Point, PointExtent, Size, Transformation, Layer, TileLayer, GroupTileLayer, WMSTileLayer, CanvasTileLayer, ImageLayer, OverlayLayer, VectorLayer, CanvasLayer, ParticleLayer, TileSystem, TileConfig, ArcCurve, Circle, ConnectorLine, ArcConnectorLine, CubicBezierCurve, Curve, Ellipse, GeoJSON, Geometry, GeometryCollection, Label, LineString, Marker, MultiLineString, MultiPoint, MultiPolygon, Polygon, QuadBezierCurve, Rectangle, Sector, TextBox, TextMarker };","map":{"version":3,"names":["Zousan","rbush","simplify","intersectsBox","version","INTERNAL_LAYER_PREFIX","GEOMETRY_COLLECTION_TYPES","GEOJSON_TYPES","concat","RESOURCE_PROPERTIES","RESOURCE_SIZE_PROPERTIES","NUMERICAL_PROPERTIES","COLOR_PROPERTIES","DEFAULT_TEXT_SIZE","now","Date","extend","dest","i","arguments","length","src","k","isNil","obj","isNumber","val","isNaN","isInteger","n","isObject","isString","constructor","String","isFunction","Function","hasOwnProperty","Object","prototype","hasOwn","key","call","join","arr","seperator","Array","isEmpty","object","property","pi","Math","PI","toRadian","d","toDegree","r","IS_NODE","toString","process","versions","Browser","maps","getDevicePixelRatio","window","devicePixelRatio","screen","deviceXDPI","logicalXDPI","ua","navigator","userAgent","toLowerCase","doc","document","documentElement","style","ie","webkit","indexOf","phantomjs","android23","search","chrome","gecko","opera","iosWeixin","test","mobile","orientation","msPointer","PointerEvent","MSPointerEvent","pointer","pointerEnabled","ie3d","webkit3d","WebKitCSSMatrix","gecko3d","opera12","any3d","imageBitMap","createImageBitmap","resizeObserver","ResizeObserver","btoa","proxy","Proxy","chromeVersion","match","touch","DocumentTouch","webgl","decodeImageInWorker","offCanvas","OffscreenCanvas","getContext","err","supportsPassive","addEventListener","passive","e","ielt9","edge","android","safari","mobileWebkit","mobileWebkit3d","mobileOpera","mobileGecko","retina","language","browserLanguage","ie9","documentMode","ie10","monitorDPRChange","removeDPRListening","map","id","checkDevicePixelRatio","_devicePixelRatio","changed","addDPRListening","matchMedia","dpi","toFixed","screen$1","addListener","tempDPI","defineProperty","get","set","value","mapId","options","checkSize","getRenderer","renderer","Browser$1","_defineProperties","target","props","descriptor","enumerable","configurable","writable","_toPropertyKey","_createClass","Constructor","protoProps","staticProps","_extends","assign","bind","source","apply","_inheritsLoose","subClass","superClass","create","_setPrototypeOf","o","p","setPrototypeOf","__proto__","_assertThisInitialized","self","ReferenceError","_toPrimitive","input","hint","prim","Symbol","toPrimitive","undefined","res","TypeError","Number","arg","Position","x","y","z","isArray","_isNaN","Error","_proto","abs","_abs","_round","round","_ceil","ceil","distanceTo","point","sqrt","mag","_floor","floor","copy","_add","add","nx","ny","_sub","_substract","sub","substract","multi","ratio","_multi","div","_div","equals","c","isZero","toArray","toJSON","json","Point","_Position","closeTo","delta","unit","_unit","perp","_perp","angleWith","b","angleWithSep","atan2","_rotate","angle","cos","sin","rotate","a","requestAnimFrame","cancelAnimFrame","fn","setTimeout","clearTimeout","requestFn","cancelFn","timeToCall","timeoutDefer","getPrefixed","name","isSVG","url","prefix","slice","loadImage","img","imgDesc","node","uid","UID","GUID","parseJSON","str","JSON","parse","pushIn","ii","ll","push","removeFromArray","array","splice","forEachCoord","context","result","pp","len","getValueOrDefault","v","sign","log2","log","LOG2E","rounded","interpolate","t","wrap","min","max","w","clamp","isArrayHasData","urlPattern","isURL","cssUrlReWithQuote","cssUrlRe","isCssUrl","extractCssUrl","matches","exec","b64chrs","btoa$1","output","block","charCode","idx","charAt","charCodeAt","b64toBlob","b64Data","contentType","byteCharacters","atob","arraybuffer","ArrayBuffer","view","Uint8Array","blob","Blob","type","computeDegree","x0","y0","x1","y1","dx","dy","emptyImageUrl","equalMapView","obj1","obj2","approx","expected","flash","interval","count","cb","me","initVisible","isVisible","_flashTimeout","flashGeo","show","hide","_defaults$1","defaults","keys","getOwnPropertyNames","getOwnPropertyDescriptor","getPointsResultPts","points","ptKey","resultPoints","pt","getImageBitMap","data","getAbsoluteURL","createElement","href","CANVAS_SIZE_TEMP","cssWidth","cssHeight","width","height","calCanvasSize","size","canvas","OPTIONS","getCanvas","ColorIn","colors","console","error","Infinity","valueOffset","_initImgData","getImageData","imgData","_this$options","ctx","clearRect","gradient","createLinearGradient","_colors$i","stop","color","s","addColorStop","fillStyle","fillRect","getColor","g","isMapSupported","Map","colorInCache","createFunction","parameters","defaultType","fun","isFeatureConstant","isZoomConstant","isFunctionDefinition","zoomAndFeatureDependent","stops","featureDependent","zoomDependent","innerFun","evaluateExponentialFunction","evaluateIntervalFunction","evaluateCategoricalFunction","evaluateIdentityFunction","evaluateColorInterpolateFunction","featureFunctions","featureFunctionStops","zoom","default","feature","base","coalesce","interpolate$1","COLORIN_OPTIONS","colorIn","stringify","has","_colorIn","_colorIn$getColor","inputLower","inputUpper","outputLower","outputUpper","evaluatedLower","evaluatedUpper","interpolateArray","interpolateNumber","difference","progress","pow","hasFunctionDefinition","interpolated","createFunction1","piecewiseConstant","loadFunctionTypes","argFn","hit","multResult","loaded","buildFn","_i","getFunctionTypeResources","l","_fn","types","isObject$1","createFilter","filter","compile","isFeatureFilter","op","_iterator","_isArray","iterator","_ref","next","done","f","compileComparisonOp","compileLogicalOp","compileNegation","compileInOp","compileHasOp","compileContains","compileFunction","propertyObj","checkType","funName","left","compilePropertyReference","getComparisonCode","index","prop","substring","right","expressions","values","sort","compare","expression","getFilterFeature","geometry","_toJSON","compileStyle","styles","compiled","extend$1","loadGeoSymbol","symbol","geo","getMap","set$1","getZoom","getProperties","setProp","getBearing","getPitch","a0","a1","freeze","translateToSVGStyles","getMarkerPathBase64","svgStyles","_p","pathes","path","pathesToRender","svg","strPath","_p2","b64","getExternalResources","toAbsolute","symbols","resources","resSizeProp","h","convertResourceUrl","iii","_iii","_convertUrl","Size","toPoint","trim","replace","specialPattern","escapeSpecialChars","splitWords","chr","split","rulerCtx","stringWidth","text","font","measureText","stringLength","splitContent","content","wrapWidth","textWidth","chrWidth","minChrCount","testStr","prew","CONTENT_EXPRE","replaceVariable","describeText","textContent","maxHeight","textDesc","splitTextToRow","getAlignPoint","horizontalAlignment","verticalAlignment","alignW","alignH","DEFAULT_FONT","getFont","lineSpacing","textHeight","wrapChar","textRows","actualWidth","texts","tWidth","contents","_contents","_w","rowNum","textSize","hashCode","hash","strlen","strings","isGradient","getGradientStamp","getSymbolStamp","getSymbolHash","sortedKeys","sortedSymbol","reduce","accumulator","curValue","lowerSymbolOpacity","_symbol","_ratio","lower","extendSymbol","sources","args","parseStyleRootPath","root","iconset","replacer","convertStylePath","parseSymbolPath","URL_PATTERN","parseStops","defaultValue","isDashLine","symbolizers","symbolizer","_symbolizer$style","lineDasharray","lineWidth","index$1","_defaults","first","testProp","TRANSFORM","TRANSFORMORIGIN","TRANSITION","CSSFILTER","createEl","tagName","className","el","setClass","createElOn","container","setStyle","appendChild","removeDomNode","innerHTML","parentNode","removeChild","addDomEvent","typeArr","handler","eventHandler","event","listensDomEvent","warn","removeDomEvent","callback","capture","doRemove","removeEventListener","handlers","j","jlen","hitHandler","preventDefault","returnValue","stopPropagation","_cancelBubble","cancelBubble","preventSelection","dom","onselectstart","ondragstart","setAttribute","offsetDom","offset","setTransform","top","computeDomPosition","getComputedStyle","padding","parseInt","rect","getBoundingClientRect","offsetWidth","offsetHeight","scaleX","scaleY","__position","getEventContainerPoint","ev","domPos","clientX","clientLeft","clientY","clientTop","endsWith","suffix","strCss","cssText","hasClass","classList","contains","getClass","RegExp","addClass","classes","baseVal","setOpacity","opacity","pos","setTransformMatrix","m","removeTransform","isHTML","measureDom","parentTag","ruler","getDomRuler","clientWidth","clientHeight","tag","span","body","on","off","isMoveEvent","isMapSupported$1","nullOnRemove","ArrayLRUCache","onRemove","reset","order","clear","removedData","getAndRemove","remove","setMaxSize","MapLRUCache","_proto2","delete","_iterator2","_isArray2","_i2","_ref2","shrink","item","LRUCache","Ajax","jsonp","script","getElementsByTagName","client","_getClient","open","headers","setRequestHeader","withCredentials","credentials","responseType","send","post","postData","_t","_wrapCallback","readyState","status","response","byteLength","cacheControl","getResponseHeader","expires","responseText","statusText","XMLHttpRequest","ActiveXObject","onreadystatechange","getArrayBuffer","getImage","onerror","URL","webkitURL","onload","revokeObjectURL","createObjectURL","getJSON","resp","minx","miny","maxx","maxy","getDefaultBBOX","BBOX_TEMP","resetBBOX","bbox","pointsBBOX","out","_len","_points$_i","setBBOX","x2","y2","validateBBOX","bufferBBOX","bufferSize","DEFAULT_STROKE_COLOR","DEFAULT_FILL_COLOR","DEFAULT_TEXT_COLOR","hitTesting","TEMP_CANVAS","RADIAN","textOffsetY","Canvas","getCanvas2DContext","willReadFrequently","setHitTesting","testing","createCanvas","canvasClass","prepareCanvasFont","textBaseline","fill","getRgba","prepareCanvas","strokeWidth","strokePattern","strokeColor","strokeStyle","patternOffset","_setStrokePattern","_createGradient","normalizeColorToRGBA","lineJoin","lineCap","setLineDash","polygonPattern","fillImgUrl","extractImageUrl","fillTexture","Image","image","createPattern","extent","places","getMin","getMax","getWidth","getHeight","getCenter","createRadialGradient","forEach","linePatternOffset","imgUrl","imageTexture","imageRes","patternCanvas","addResource","_drawn","fillCanvas","fillOpacity","isPattern","_isPattern","alpha","globalAlpha","translate","drawImage","_text","_textOnMultiRow","splitTextSize","ptAlign","lineHeight","basePoint","rowAlign","_point","_textOnLine","_textSize","textHaloRadius","textHaloFill","textHaloAlpha","drawHalo","gco","shadowBlur","shadowOffsetX","shadowOffsetY","miterLimit","strokeText","globalCompositeOperation","fillText","rgba","_stroke","strokeOpacity","stroke","_path","lineDashArray","lineOpacity","ignoreStrokePattern","fillWithPattern","p1","p2","degree","save","cosd","restore","isDashed","isPatternLine","prePoint","nextPoint","lineTo","beginPath","moveTo","drawDashLine","_multiClip","polygon","smoothness","isMultiClip","isClip","fillFirst","savedCtx","copyProperties","_ring","paintSmoothLine","closePath","ring","ignorePattern","smoothValue","close","tailIdx","tailRatio","interpolate$$1","t0","t1","bx1","by1","bx2","by2","u0","u1","qxa","qxb","qxc","qxd","qya","qyb","qyc","qyd","xb","xc","xd","yb","yc","yd","getCubicControlPoints","x3","y3","xc1","yc1","xc2","yc2","xc3","yc3","len1","len2","len3","k1","k2","xm1","ym1","xm2","ym2","ctrl1X","ctrl1Y","ctrl2X","ctrl2Y","ctrlPoints","preCtrlPoints","bezierCurveTo","lastPoint","prevCtrlPoint","nextCtrlPoint","_arcBetween","dist","p1p2","asin","cp2","da","cx","cy","startAngle","endAngle","arc","_lineTo","bezierCurveAndFill","start","_bezierCurveTo","p3","ellipse","heightTop","heightBottom","bezierEllipse","b1","ox","oy","oy1","rectangle","sector","angles","rad","radius","sDeg","eDeg","drawCross","pixelRect","isStroke","strokeRect","startPoint","endPoint","dashArray","fromX","fromY","toX","toY","pattern","lt","gt","capmin","capmax","checkX","thereYet","cap","checkY","offsetX","offsetY","dash","ang","lineDashOffset","shadowColor","promise","Promise","Promise$1","Eventable","Base","_Base","_class","on$$1","eventsOn","_switch","_eventMap","eventTypes","evtType","handlerChain","isTest","once","_wrapOnceHandler","evetTypes","off$$1","eventsOff","eventType","listeners","wrapKey","jl","listener","listens","getListeningEvents","copyEventListeners","eventMap","fire","_eventParent","_fire","called","onceHandler","to","eventKeys","_clearListeners","_clearAllListeners","_setEventParent","parent","_setEventTarget","_eventTarget","param","queue","bubble","passed","Handler","enable","_enabled","addHooks","disable","removeHooks","enabled","Handler$1","Class","setOptions","callInitHooks","_isUpdatingOptions","proxyOptions","_this","isExtensible","opts","config","proto","getPrototypeOf","_visitInitHooks","conf","onConfig","_initHooksCalled","parentProto","hooks","_initHooks","addInitHook","_key","init","include","mergeOptions","registeredTypes","JSONAble","registerJSONType","getJSONClass","getJSONType","_jsonType","clazz","CollisionIndex","_tree","collides","box","minX","minY","maxX","maxY","insertBox","tree","insert","bulkInsertBox","boxes","load","Handlerable","addHandler","handlerClass","_handlers","removeHandler","_clearHandlers","START_EVENTS","MOVE_EVENTS","mousedown","touchstart","pointerdown","MSPointerDown","END_EVENTS","DragHandler","_Handler","_onMouseDown","onMouseDown","_offEvents","button","touches","setCapture","captureEvents","MOUSEMOVE","MOUSEUP","moved","actual","startPos","onMouseMove","onMouseUp","interupted","newPos","changedTouches","Coordinate","toNumberArrays","coordinates","coord","toCoordinates","child","CRS","properties","createProj4","proj","fromProjectionCode","code","toUpperCase","WGS84","EPSG4326","EPSG3857","IDENTITY","CGCS2000","EPSG4490","BD09LL","GCJ02","TEMP_POINT0","TEMP_COORD0","TEMP_COORD1","TEMP_COORD2","TEMP_COORD3","TEMP_COORD4","TEMP_COORD5","TEMP_COORD6","TEMP_COORD7","MINMAX","TEMP_EXTENT","TEMP_COMBINE","Extent","p4","_clazz","unproject","projection","_dirty","_initialize","xmin","xmax","ymin","ymax","_scale","isValid","ext2","intersects","_project","rxmin","rymin","rxmax","rymax","within","pxmin","pxmax","pymin","pymax","project","getSize","__combine","inited","_combine","ext","combine","intersection","expand","distance","_expand","convertTo","minmax","projectCoords","PointExtent","_Extent","Transformation","matrix","transform","scale","untransform","Common","antiMeridian","isSphere","coords","antiMeridianEnable","circum","getCircum","getSphereExtent","sx","sy","wrapX","wrapY","pre","current","prj","unprojectCoords","projCoords","sphere","isOutSphere","pcoord","wrapCoord","wrapped","Common$1","measureLength","c1","c2","measureLenBetween","Identity","measureArea","area","locate","xDist","yDist","_locate","pivot","tmp","Sphere","ry","rx","initialAngle","rhumbBearing","finalAngle","calculateRhumbDestination","end","bear360","final","calculateRhumbBearing","bear180","from","phi1","phi2","deltaLambda","deltaPsi","tan","theta","origin","bearing","lambda1","DeltaPhi","DeltaPsi","q","DeltaLambda","lambda2","WGS84Sphere","BaiduSphere","DEFAULT","measurers","registerMeasurer","measure","Measurer","getInstance","mName","index$2","metersPerDegree","maxLatitude","lnglat","lng","lat","pLnglat","atan","exp","PROJ4326","Projection_EPSG4490","Projection_Baidu","convertLL2MC","convertMC2LL","EARTHRADIUS","MCBAND","LLBAND","MC2LL","LL2MC","cB","cE","cD","T","convertor","cC","getLoop","getRange","toRadians","toDegrees","Projection_IDENTITY","DEFAULT$1","projections","BAIDU","Renderable","registerRenderer","_rendererClasses","getRendererClass","imageFetchWorkerKey","globalWorkerPool","setWorkerPool","pool","getWorkerPool","workersCreated","setWorkersCreated","workersHasCreated","ADAPTER_CREATED_LIST","adapterHasCreated","workerKey","pushAdapterCreated","adapters","registerWorkerAdapter","adapter","header","footer","compileWorkerSource","getWorkerSourcePath","createAdapter","workerPool","workers","messageCB","msg","adapterName","worker","postMessage","messageType","hardwareConcurrency","workerCount","MessageBatch","limit","_limit","_messages","buffers","addMessage","isFull","getMessage","messages","WorkerPool","active","MAPTALKS_WORKER_COUNT","_messageBuffers","acquire","Worker","release","terminate","workerId","batches","batch","commit","shift","globalWorkerPool$1","getGlobalWorkerPool","frameLoop","dedicatedWorker","EMPTY_BUFFERS","Actor","_delayMessages","initializing","hasCreated","created","currentActor","actorId","callbacks","callbackID","receiveFn","receive","_this2","message","command","isActive","broadcast","_this3","asyncAll","_this4","params","cbData","_this5","targetID","getDedicatedWorker","remaining","results","EMPTY_ARRAY","ResourceWorkerConnection","_Actor","fetchImage","CanvasRenderer","_Class","layer","_painted","_drawTime","_resWorkerConn","setToRedraw","render","framestamp","prepareRender","ResourceCache","checkAndDraw","_tryToDraw","drawFn","_toRedraw","checkResources","_loadingResource","loadResources","then","callInNextFrame","testIfNeedRedraw","isInteracting","drawOnInteracting","needToRedraw","isViewChanged","isMoving","isZooming","isRotating","onSkipDrawOnInteracting","isLoadingResource","isRenderComplete","_renderComplete","mustRenderOnInteracting","setCanvasUpdated","_canvasUpdated","isCanvasUpdated","southWest","canvasExtent2D","_extent2D","onAdd","getCanvasImage","_renderZoom","isBlank","containerPoint","_pointToContainerPoint","clearCanvas","setZIndex","hitDetect","_errorThrown","imageData","resourceUrls","promises","cache","isResourceLoaded","_promiseResource","all","_get2DExtent","_containerPointToPoint","_canvas","CanvasClass","onCanvasCreate","createContext","gl","dpr","resetCanvasTransform","resizeCanvas","canvasSize","_calCanvasSize","rScale","_maskExtent","mask","getMask","maskExtent2D","_getMaskPainter","get2DExtent","clipCanvas","old","getGeometries","masks","_mask","painter","paint","clip","getViewExtent","completeRender","getEvents","onZoomStart","onZooming","onZoomEnd","onResize","onMoveStart","onMoving","onMoveEnd","onDragRotateStart","onDragRotating","onDragRotateEnd","onSpatialReferenceChange","getDrawTime","_drawAndRecord","painted","draw","getId","crossOrigin","resolve","fetchInWorker","uri","bitmap","_cacheResource","onabort","markErrorResource","_errors","_proto3","refCnt","imageBitmap","checkSVG","_getImgUrl","login","logout","merge","workerSource","registerWorkerSource","DEFAULT_MARKER_SYMBOLS","markerWidth","markerHeight","markerLineWidth","TEMP_DXDYPOINT","getDxDyRad","dxdy","getImageRotateBBOX","rad2","rad3","rad4","r2","r3","r4","p1x","p1y","p2x","p2y","p3x","p3y","p4x","p4y","getMarkerRotationExtent","alignPoint","dxdyRad","_getImageRotateBBOX","getVectorPadding","DXDY","getFixedExtent","rotation","rotateExtent","SIZE","getVectorMarkerFixedExtent","calVectorMarkerSize","getVectorMarkerAnchor","getMarkerRotation","getDefaultHAlign","markerType","getDefaultVAlign","TEMP_SIZE","shadow","margin","ROTATE_EXTENT","fixedExtent","getImageMarkerFixedExtent","getTextMarkerFixedExtent","FIXED_EXTENT","getMarkerFixedExtent","isTextSymbol","isImageSymbol","isVectorSymbol","isPathSymbol","DYNAMIC_SYMBOL_PROPS","SIZE_SYMBOL_PROPS","clipLine","bounds","noCut","parts","segment","clipSegment","_lastCode","useLastCode","codeA","_getBitCode","codeB","codeOut","newCode","_getEdgeIntersection","clipPolygon","edges","clippedPoints","_code","withInEllipse","center","southeast","tolerance","xfocus","f1","f2","Symbolizer","_setBBOX","isHitTesting","_bufferBBOX","getPainter","isDynamicSize","testColor","CanvasSymbolizer","_Symbolizer","_prepareContext","_opacityFn","_defineStyle","drawVectorMarker","strokeAndFill","translateMarkerLineAndFill","vectorArray","getVectorMarkerPoints","gradientExtent","getGraidentExtent","hLineWidth","_j","_j2","_lineCap","hh","hw","v0","v1","v2","v3","extWidth","TEMP_POINT0$1","TEMP_POINT1","TEMP_POINT2","TEMP_POINT3","PointSymbolizer","_CanvasSymbolizer","glRes","getGLRes","renderPoints","_getRenderPoints","_pointAtResToPoint","_rotateExtent","placement","isSpriting","getPlacement","getRenderPoints","_getRenderContainerPoints","ignoreAltitude","getDxDy","cpoints","_cPoint","containerOffset","_pointContainerPoints","flat","getRotation","_getRotationAt","rotations","p0","isTransforming","_pointAtResToContainerPoint","DebugSymbolizer","_PointSymbolizer","symbolize","getLayer","outline","getContainerExtent","cross","TEMP_SIZE$1","TEMP_EXTENT$1","ImageMarkerSymbolizer","cookedPoints","_getImage","_url","imgURL","removeCache","pixel","_fixedExtent","TEMP_COORD0$1","TEMP_COORD1$1","StrokeAndFillSymbolizer","paintParams","_getPaintParams","isGradient$$1","isPath","geometryEventTolerance","_hitTestTolerance","isSplitted","_paintOn","_params","_bbox","_getPrjExtent","_extMin","_extMax","_prjToPoint","_pxExtent","getPaintParams","lineColor","grad","TextMarkerSymbolizer","_dynamic","translateLineAndFill","_textDesc","getTextDesc","_index","MARKER_SIZE","TEMP_EXTENT$2","VectorMarkerSymbolizer","_drawMarkers","_drawMarkersWithCache","_drawVectorMarker","stamp","_stampSymbol","_createMarkerImage","anchor","_getCacheImageAnchor","_stamp","_getGraidentExtent","isDynamic","ha","va","VectorPathMarkerSymbolizer","_ImageMarkerSymbolize","defaultSymbol","polygonFill","polygonOpacity","DrawAltitudeSymbolizer","_getStyle","groundPoints","_drawLineAltitude","groundPoint","_drawMarkerAltitude","_drawLine","index$3","registerSymbolizers","testCanvas","TEMP_POINT0$2","TEMP_PAINT_EXTENT","TEMP_FIXED_EXTENT","TEMP_CLIP_EXTENT0","TEMP_CLIP_EXTENT1","TEMP_CLIP_EXTENT2","PROJECTION","TEMP_BBOX","Painter","_createSymbolizers","_altAtGL","_getGeometryAltitude","_setDrawTime","time","getRenderBBOX","geoSymbol","getSymbol","regSymbolizers","_hasPoint","getType","_debugSymbolizer","hasPoint","_verifyProjection","_renderPoints","disableClip","ptkey","_getRenderer","mapStateCache","resolution","pitch","glScale","containerExtent","_hitPoint","getResolution","getGLScale","pitched","rotated","_cachedParams","paintAsPath","_paintAsPath","_unsimpledParams","_res","_pitched","_redrawWhenPitch","_rotated","_redrawWhenRotate","_simplified","zoomScale","tr","mapExtent","cPoints","pointPlacement","_aboveCamera","roundPoint","needClip","clipBBoxBufferSize","pointsContainerPoints","viewPoints","alts","pts","_pointsAtResToContainerPoints","getShell","getHoles","clipPts","_points","clipPt","altitude","getAltitude","_geometry","clipped","_clip","inView","clipPoints","alt","altitudeIsNumber","_cring","altArray","cring","_containerBbox","hasAltitude","_2DExtent","glExtent","_get2DExtentAtRes","extent2D","cameraLookAt","cameraPosition","glExtent2D","_glScale","part","_i3","_interpolateSegAlt","clipSegs","orig","cc","segsWithAlt","interpolateAlt","cp","_getInternalSymbol","_resetSymbolizersBBOX","_isCheck","_beforePaint","contexts","_prepareShadow","_afterPaint","getSprite","_spriting","_sprite","markerExtent","bak","hitTest","_eachSymbolizer","_isDynamicSize","_zoom","_computeExtent2D","_computeFixedExtent","_this$_fixedExtent","getMinAltitude","altitudeToPoint","frustumAlt","getFrustumAltitude","change","isCanvasRender","repaint","refreshSymbol","_removeSymbolizers","_paintParams","propAlt","_getAltitude","_propAlt","minAltitude","getMaxAltitude","maxAltitude","MAX_VALUE","MIN_VALUE","_getProjection","_projCode","w0","w1","TEMP_EXTENT$3","CollectionPainter","isMask","_eachPainter","geometries","_getPainter","MAX_ZOOM","DefaultSpatialReference","resolutions","SpatialReference","_initSpatialRef","registerPreset","getPreset","preset","getAllPresets","getProjectionInstance","prjName","sp1","sp2","fullExtent","bottom","r1","_projection","defaultSpatialRef","isEPSG","_resolutions","_pyramid","_fullExtent","_transformation","getResolutions","getProjection","getFullExtent","getTransformation","getMinZoom","getMaxZoom","getZoomDirection","isPyramid","TEMP_POINT0$3","TEMP_EXTENT$4","TEMP_PROPERTIES","Geometry","_JSONAble","setSymbol","_genSizeSymbol","setProperties","setId","getFirstCoordinate","getCoordinates","getLastCoordinate","addTo","fitview","addGeometry","_layer","_id","oldId","_fireEvent","_getParent","_repaint","_symbolUpdated","_prepareSymbol","onSymbolChanged","_compiledSymbol","_symbolHash","getSymbolHash$$1","updateSymbol","_getSymbol","_eventSymbolProperties","getTextContent","_sizeSymbol","_computeCenter","_getMeasurer","getExtent","prjExt","_computeExtent","extent2d","extent2","groundExtent","_getFixedExtent","_extent2d","_prjToPointAtRes","containsPoint","coordToContainerPoint","_containsPoint","onHide","getZIndex","zIndex","setZIndexSilently","bringToFront","getGeoMaxZIndex","topZ","bringToBack","getGeoMinZIndex","bottomZ","_silence","translated","setCoordinates","flash$$1","ret","fromJSON","_unbind","toGeoJSONGeometry","gJson","_exportGeoJSONGeometry","toGeoJSON","geoJSON","_exportProperties","other","_exportGraphicOptions","getLength","_computeGeodesicLength","getArea","_computeGeodesicArea","measurer","_getConnectPoints","_initOptions","_bindLayer","_clearCache","_bindInfoWindow","_bindMenu","cookedSymbols","_checkAndCopySymbol","_setExternSymbol","_externSymbol","_extent","_computePrjExtent","_animPlayer","finish","_unbindMenu","_unbindInfoWindow","isEditing","endEdit","_removePainter","onRemoveGeometry","_internalId","_getInternalId","_setInternalId","_clearProjection","_getExternalResources","_painter","getCollectionPainterClass","getPainterClass","_maskPainter","_paint","_dirtyCoords","_pcenter","_coordinates","closeMenu","closeInfoWindow","onShapeChanged","onPositionChanged","dynamicSize","_getSizeSymbol","symbolSize","lineDx","lineDy","_getCompiledSymbol","needRepaint","_setParent","_parent","eventName","_onGeometryEvent","_infoWinOptions","geoProperties","layerOpts","layerAltitude","enableAltitude","altitudeProperty","getAltitudeProperty","getGeometryCoordinatesAlts","setAltitude","setCoordinatesAlt","_genMinMaxAlt","_minAlt","_maxAlt","layerAlt","tempAlts","coordinatesHasAlt","getCoordinatesAlts","options$1","Layer","setMask","onLoad","_initRenderer","_renderer","onLoadEnd","addLayer","_zIndex","_sortLayersByZIndex","minZoom","maxZoom","getOpacity","layers","_getLayerList","topLayer","bottomLayer","removeLayer","_isVectorMarker","removeMask","isLoaded","_loaded","getCollisionIndex","_collisionIndex","clearCollisionIndex","needUpdate","_optionsHook","_silentConfig","onRendererCreate","_bindMap","_switchEvents","_doRemove","emitter","_layers","_getMask2DExtent","_onLayerEvent","visible","TEMP_COORD","TEMP_POINT","REDRAW_OPTIONS_PROPERTIES","options$2","Map$1","_Handlerable","baseLayer","VERSION","_initContainer","_panels","_baseLayer","_zoomLevel","_center","setSpatialReference","_mapViewPoint","_updateMapSize","_getContainerDomSize","setBaseLayer","setMaxExtent","_Load","addOnLoadHook","_onLoadHooks","getContainer","_containerDOM","getSpatialReference","_spatialReference","ref","oldRef","_updateSpatialReference","_resetMapStatus","setCursor","cursor","_cursor","_trySetCursor","resetCursor","_prjCenter","centerAltitude","setCenter","_getCenterByPadding","pcenter","_verifyExtent","_setPrjCenter","_parseEventFromCoord","visualHeight","maxVisualPitch","_getVisualHeight","visualPitch","fov","getFov","cameraToCenter","cameraCenterDistance","tanB","tanP","visualDistance","_pointToExtent","getProjExtent","_pointToPrj","getPrjExtent","getMaxExtent","maxExt","_prjMaxExtent","_getPrjCenter","_panTo","getZoomForScale","fromZoom","isFraction","_getResolution","targetRes","scaleZoom","getZoomFromRes","_getResolutions","minRes","maxRes","gap","setZoom","_zoomAnimation","getMaxNativeZoom","setMaxZoom","viewMaxZoom","setMinZoom","viewMinZoom","_glRes","zoomIn","zoomOut","_zooming","setCenterAndZoom","animation","_getPaddingSize","getFitZoom","paddingSize","coordToPoint","getView","setView","setPitch","setBearing","getScale","coordinateToPoint","_padding","_padding$paddingLeft","paddingLeft","_padding$paddingRight","paddingRight","_padding$paddingTop","paddingTop","_padding$paddingBotto","paddingBottom","pX","pY","newPoint","pointToCoordinate","fitExtent","zoomOffset","step","_animateTo","getBaseLayer","isChange","onbaseLayerload","removeBaseLayer","getLayers","_getLayers","_layerCache","mapLayers","removed","_removeLayer","setLayerCanvasUpdated","sortLayers","layersToOrder","minZ","_l","toDataURL","mimeType","file","dataURL","quality","dlLink","download","click","coordinate","coordToPointAtRes","coordinateToPointAtRes","pointToCoord","pointAtResToCoord","pointAtResToCoordinate","coordToViewPoint","coordinateToViewPoint","viewPointToCoord","viewPoint","viewPointToCoordinate","coordinateToContainerPoint","containerPointToCoord","containerPointToCoordinate","containerPointToViewPoint","getViewPoint","viewPointToContainerPoint","force","justStart","_initTime","watched","oldHeight","oldWidth","vh","nwCP","nwCoord","_containerPointToPrj","vhAfter","nwCPAfter","_setPrjCoordAtContainerPoint","_mapViewCoord","hided","_eventSilence","getMainPanel","getPanels","isRemoved","_removeDomEvents","childNodes","_moving","_mapAnimPlayer","_stopAnim","prjCenter","_originCenter","_parseEvent","_suppressRecenter","_recenterOnTerrain","_dragRotating","isDragRotating","isOffscreen","viewportPadding","screenRightBoundary","screenBottomBoundary","setDevicePixelRatio","getElementById","_priorityCursor","_setCursorToPanel","_setPriorityCursor","hasCursor","panel","layerList","_order","sortLayersByZIndex","underline","_loadAllLayers","_callOnLoadHooks","loadLayer","_eachLayer","layerLists","_calcMatrices","resetContainer","containerDOM","_containerDomContentRect","mSize","updateMapSize","_offsetCenterByPixel","containerCenter","offsetPlatform","_getViewPointFrameOffset","panelOffset","_resetMapViewPoint","_mapRes","pCoord","_prjsToPointsAtRes","pCoords","transformation","_pointToPrjAtRes","_pointToPoint","_pointToPointAtRes","_fixPrjOnWorldWide","prjCoord","COORD","_prjToViewPoint","_viewPointToPrj","coordinateToContainerPointAtRes","pCoordinate","_prjToContainerPointAtRes","coordinatesToContainerPoints","coordinatesToContainerPointsAtRes","prjOut","centerPoint","_toContainerPoint","containerToExtent","POINT0","POINT1","distanceToPixel","distanceToPoint","paramCenter","distanceToPointAtRes","POINT","DEFAULT_CENTER","originCenter","heightFactor","pointAtResToAltitude","pointAtResToDistance","pixelToDistance","COORD0","COORD1","TARGET0","TARGET1","fullExt","coord0","coord1","target0","target1","pointToDistance","PRJ_COORD","locateByPoint","px","py","cached","_mapExtent2D","_mapGlRes","_mapGlExtent2D","cExtent","_containerPointToPointAtRes","min2d","max2d","_ref3","_prjToContainerPoint","_viewPointToPoint","_pointToViewPoint","MapDoubleClickZoomHandler","_onDoubleClick","oldZoom","MapDragHandler","mapWrapper","_dragHandler","_cancelOn","_onDragStart","_onDragging","_onDragEnd","domEvent","_ignore","_ignoreEvent","startDragTime","_mode","switchDragButton","rotateModeButton","isTouch","isRotatonMode","ctrlKey","_moveStart","_rotateStart","_isEventOutMap","_rotating","_moveEnd","_rotateEnd","startBearing","_start","preX","preY","startX","startY","_startPrjCenter","_getActualEvent","startPrjCoord","mx","my","currentCenter","dxy","_clear","dscale","targetPrjCoord","_rotateMode","_db","prePitch","preBearing","factor","db","_setBearing","_setPitch","_bearing","EVENTS","MOUSEEVENT_ASSOCIATION_TABLE","isGeo","getGeoId","fireGeoEvent","_onEvent","MapGeometryEventsHandler","allLayers","_identifyGeometryEvents","oneMoreEvent","isMousedown","_mouseDownTime","downTime","geometryCursorStyle","tops","getTopElements","topOnlyEvent","events","onEvent","identify","identifyOptions","eventToFire","_getEventTypeToFire","fireGeometryEvent","_queryIdentifyTimeout","identifyAtPoint","propagation","getOldGeos","geos","_prevOverGeos","oldGeosMouseout","oldTargets","geoMap","oldTarget","oldTargetId","iid","geomap","_oldTargets","wheelZoomDelta","defaultZoomRate","wheelZoomRate","maxScalePerFrame","MapScrollWheelZoomHandler","_thisScrollZoom","_scrollZoom","_wheelZoomRate","_defaultZoomRate","_delta","_onWheelScroll","evt","_checkZoomOrigin","_trackPadSuspect","_ensureTrackpad","_seamless","_interval","deltaMode","WheelEvent","DOM_DELTA_LINE","deltaY","shiftKey","_lastWheelEvent","_zoomOrigin","_active","zoomRate","targetZoom","_timeout","_requesting","levelValue","wheelDelta","detail","nextZoom","_checkZoom","_origin","_startZoom","duration","frame","state","playState","MapTouchZoomHandler","_onTouchStart","_startP1","_startP2","_startDist","_startVector","_startBearing","_onTouchMove","_onTouchEnd","d1","d2","vector","mode","_startTouching","_Origin","KEY","Easing","outExpo","outQuint","in","_in","inAndOut","linear","upAndDown","Frame","Player","onFrame","_animation","_onFrame","ready","finished","Animation","speed","_resolveStyles","resolveChild","_styles","resolveVal","isChild","childStyles","framing","easing","dStyles","startStyles","destStyles","deltaStyles","_startStyles","_dStyles","children","elapsed","_requestAnimFrame","_frameQueue","_a","_animationFrameId","_frameFn","_run","running","animate","player","_prepare","_framer","play","currentTime","startTime","_playStartTime","pause","cancel","reverse","_frame","Animation$1","options$3","Path","_Geometry","animateShow","_showPlayer","_animIdx","_animLenSoFar","isPolygon","animCoords","prjAnimCoords","_prjAniShowCenter","_aniShowCenter","_distance","_tempCoord","_tempPrjCoord","currentCoord","_drawAnimShowFrame","_animTailRatio","prjCoords","targetLength","segLen","lastCoord","targetCoord","_setPrjCoordinates","_animCoords","_prjAnimCoords","_getCenterInExtent","clipFn","meExtent","sumx","sumy","counter","_getPath2DPoints","disableSimplify","isSimplify","_shouldSimplify","isMulti","glPointKey","prjPoints","_prjCoords","_getPrjCoordinates","_projectCoords","_updateCache","_unprojectCoords","shell","rings","hasHoles","_coords2Extent","_getPrjHoles","_get2DLength","vertexes","JSON_TYPE","Polygon","_Path","getOutline","_holes","_projectRings","_trimRing","holes","_copyAndCloseRing","getCenterInExtent","_prjHoles","_cleanRing","_checkRing","isClose","_getPrjShell","_prjShell","CenterMixin","_getCenter2DPoint","TEMP_EXTENT$5","options$4","Marker","_CenterMixin","_CenterMixin$prototyp","dynamic","_v","sizeSymbol","_canEdit","computeExtent","_getSprite","options$5","LineString","TEMP_EXTENT$6","GeometryCollection","setGeometries","_geometries","_checkGeometries","_bindGeometriesToLayer","selected","isFn","isEmpty$$1","is","invalidGeoError","_checkGeo","sumX","sumY","_pickGeometryIndex","computeExtent$1","subType","anchors","startEdit","_originalSymbol","_draggbleBeforeEdit","_editing","needShadow","MultiGeometry","_GeometryCollection","geoType","GeometryType","_initData","MultiPoint","_MultiGeometry","findClosest","MultiPath","MultiLineString","_MultiPath","MultiPolygon","types$1","GeoJSON","toGeometry","foreachFn","resultGeos","_convert","resultGeo","features","_result2","mGeos","_result","options$6","Circle","circle","_radius","getRadius","setRadius","numberOfPoints","vertex","se","_getMinMax","pminmax","leftx","rightx","topy","bottomy","options$7","Ellipse","setWidth","setHeight","deg","pps","longer","Rectangle","_Polygon","_width","_height","nw","fExt","_pnw","pnw","sphereExtent","_getSouthEast","prjs","rightPoint","bottomPoint","options$8","Sector","_Circle","getStartAngle","setStartAngle","getEndAngle","setEndAngle","pc","sAngle","eAngle","between","options$9","Curve","_LineString","_arc","ctrlPoint","_quadraticCurve","quadraticCurveTo","_bezierCurve","_getCurveArrowPoints","arrows","segments","arrowStyle","arrow","_getArrowShape","_arrow","options$a","ArcCurve","_Curve","_paintArrow","CubicBezierCurve","curve","_getArrowPoints","QuadBezierCurve","defaultSymbol$1","defaultBoxSymbol","TextMarker","_Marker","getContent","_content","setContent","_refresh","_refreshing","_parseSymbol","setTextStyle","getTextStyle","setTextSymbol","setBoxStyle","_style","getBoxStyle","setBoxSymbol","_getTextSize","_getDefaultTextSymbol","_getDefaultBoxSymbol","_getDefaultPadding","options$b","TextBox","_TextMarker","boxSymbol","textStyle","getBoxSymbol","textBox","maxWidth","_stops","hAlign","_stops2","vAlign","_stops3","_oldWidth","_oldHeight","widthFn","oldExpectedWidth","heightFn","oldExpectedHeight","_stops4","_i4","options$c","textSymbol","Label","boxStyle","getTextSymbol","label","sizes","_getBoxSize","boxSize","textAlignPoint","Connectable","_hasConnectors","__connectors","_getConnectors","getConnectSource","_connSource","setConnectSource","_connTarget","getConnectTarget","setConnectTarget","_updateCoordinates","_registerEvents","srcPoints","targetPoints","minDist","oldCoordinates","computeLength","_showConnect","trigger","options$d","showOn","ConnectorLine","_Connectable","ArcConnectorLine","_Connectable2","options$e","TMP_EVENTS_ARR","OverlayLayer","_Layer","_maxZIndex","_minZIndex","_initCache","getGeometryById","_geoMap","_geoList","filtered","getFirstGeometry","getLastGeometry","getCount","copyOnWrite","fitView","last","_toSort","onGeometryAdd","animateTo","zoomAnimationDuration","_updateZIndex","geoId","internalId","onAddGeometry","_cookedStyles","_styleGeometry","removeGeometry","_clearing","onGeometryRemove","clearImageData","_lastGeosToDraw","_findInList","getStyle","removeStyle","_sortGeometries","_compare","low","high","middle","_onGeometryIdChange","_onGeometryZIndexChange","_onGeometryPositionChange","_onGeometryShapeChange","_onGeometrySymbolChange","_onGeometryShow","_onGeometryHide","_onGeometryPropertiesChange","onGeometryZIndexChange","onGeometryPositionChange","onGeometryShapeChange","onGeometrySymbolChange","onGeometryShow","onGeometryHide","onGeometryPropertiesChange","_hasGeoListeners","TEMP_EXTENT$7","options$f","VectorLayer","_OverlayLayer","_hitGeos","hits","hitTolerance","cpx","cpy","_x","_y","_getArrowStyle","profile","clipExtent","geoJSONs","geoExt","MapTool","_Eventable","_map","onEnable","onDisable","isEnabled","options$g","registeredMode","DrawTool","_MapTool","registerMode","modeAction","getRegisterMode","_checkMode","_events","_clickHandler","_mouseMoveHandler","_doubleClickHandler","_mouseDownHandler","_mouseUpHandler","getMode","setMode","_clearStage","_restoreMapCfg","_saveMapCfg","getCurrentGeometry","_drawToolLayer","_getDrawLayer","_loadResources","_mapAutoPanAtEdge","autoPanAtEdge","_geometryEvents","endDraw","ignoreEndEvent","undo","_getRegisterMode","action","_shouldRecordHistory","_historyPointer","_clickCoords","update","redo","actions","_mapDoubleClickZoom","dragging","_mapDraggable","_createGeometry","_prjCoord","snapTo","snapResult","_getSnapResult","effectedVertex","drawTool","_addGeometryToStage","_prjCoord2","_getMouseContainerPoint","_isValidContainerPoint","snapAdditionVertex","clickCoords","drawLayer","_ending","_vertexes","mapSize","lastContainerPoints","edgeAutoComplete","beforeLastCoord","drawLayerId","drawToolLayer","tempGeometry","MapBoxZoomHander","_boxZoom","PANOFFSET","MapAutoPanAtEdgeHandler","_onMouseMove","panBy","currView","empty","_from","_to","_isInternalAnimation","_prevAnimPlayer","zoomOrigin","framer","_interupted","_endAnim","_startAnim","flyTo","z0","z1","startZoom","startPitch","rho","animMinZoom","wMax","rho2","sinh","cosh","tanh","r0","u","S","isFinite","newCenter","newZoom","newPitch","interpolate$2","newBearing","_center2","isAnimating","_animRotating","endCoord","_endCoord","_resumePrev","prevPlayer","_registerDomEvents","_handleDOMEvent","clickTimeThreshold","isMouseDown","_domMouseDownTime","_domMouseDownView","isRotatingMap","_fireDOMEvent","mimicClick","_downTime","_time","mimicEvent","_clickTime","control","srcElement","preTarget","actualEvent","eventPos","eventParam","_getEventParams","mouseDownView","isFullScreen","webkitIsFullScreen","mozFullScreen","msFullscreenElement","fullscreenElement","requestFullScreen","_requestFullScreen","cancelFullScreen","_cancelFullScreen","requestFullscreen","mozRequestFullScreen","webkitRequestFullScreen","msRequestFullScreen","availWidth","availHeight","newWin","location","opener","exitFullscreen","mozCancelFullScreen","webkitCancelFullScreen","panTo","_panAnimation","setInfoWindow","layerJSON","layerType","extraLayerOptions","layersJSON","exportOption","_opts","layerJSONs","coord2","computeGeometryLength","computeGeometryArea","_identify","isMapGeometryEvent","includeInternals","reqLayers","layerHits","_frameZoom","startScale","_startZoomAnim","endScale","_startZoomVal","cameraZenithDistance","_startZoomCoord","frameZoom","_zoomTo","fromRes","originOffset","startZoomVal","perspective","fovy","aspect","near","far","nf","a00","a01","a02","a03","a10","a11","a12","a13","a20","a21","a22","a23","rotateX","rotateZ","multiply","a30","a31","a32","a33","b0","b2","b3","invert","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","det","identity","set$2","subtract","normalize","dot","scale$1","ax","ay","az","bx","by","bz","hypot","transformMat4","applyMatrix","matrixToQuaternion","te","m11","m12","m13","m21","m22","m23","m31","m32","m33","trace","quaternionToMatrix","z2","xx","xy","xz","yy","yz","zz","wx","wy","wz","setPosition","lookAt","eye","up","RADIAN$1","DEFAULT_FOV","TEMP_COORD$1","TEMP_POINT$1","altitudesHasData","altitudes","_fov","setFov","_renderLayers","_angle","_pitch","setCameraMovements","frameOptions","extraOptions","frameOption","timestamp","autoRotate","calculateBearing","_setCameraMovement","currentBearing","setCameraPosition","position","cameraAltitude","_meterToGLPoint","centerPointZ","cz","pitchRadian","cameraToGroundDistance","cameraToCenterDistance","_getZoomFromCameraToCenterDistance","wrapBearing","bearingRadian","tempCoord","tempPoint","distance$$1","_getFovRatio","scale$$1","_frustumAltitude","_calcFrustumAltitude","cameraAlt","_this$_get2DExtent","_this$getSize","dxPerPixel","dyPerPixel","altitudeIsArray","_pt","w2","h2","_altitudeScale","_projIfBehindCamera","cameraForward","projViewMatrix","vectorFromCam","cameraPos","camForward","camNormDot","projViewMatrixInverse","m1","createMat4","worldMatrix","_getCameraWorldMatrix","farZ","_getCameraFar","cameraFar","cameraNear","projMatrix","viewMatrix","_calcCascadeMatrixes","domCssMatrix","_calcDomMatrix","tanFov","cal","curPitch","cascadePitch0","cascadePitch1","projViewMatrix0","cascadeFrustumMatrix0","projViewMatrix1","cascadeFrustumMatrix1","minusY","_getFovZ","center2D","cameraUp","cameraWorldMatrix","updateCenterAltitude","_hasAltitudeLayer","queriedAltitude","_queryTerrainByProjCoord","altDist","newCameraToGroundDistance","queryTerrainByProjCoord","getTerrainLayer","lon1","lon2","lat1","lat2","_onViewChange","_viewHistory","_viewHistoryPointer","_getCurrentView","_fireViewChange","zoomToPreviousView","hasPreviousView","_zoomToView","zoomToNextView","hasNextView","getViewHistory","_insertUICollidesQueue","UICollisionIndex","createCollisionIndex","collisionFrameTime","_uiCollidesQueue","uiCollides","uiList","collisionIndex","ui","_ui$options","collisionBufferSize","collision","getDOM","bcRect","_collidesEffect","_addUI","_removeUI","options$h","DistanceTool","_DrawTool","_afterEnable","_afterDisable","_measureLayers","_lastMeasure","_lastVertex","getMeasureLayers","getLastMeasure","marker","_measureMarkerLayer","_measure","toMeasure","units","decimals","_registerMeasureEvents","_msOnDrawStart","_msOnDrawVertex","_msOnMouseMove","_msOnDrawEnd","layerId","markerLayerId","_measureLineLayer","startLabel","_addVertexMarker","ms","_msGetCoordsToMeasure","_tailMarker","_tailLabel","vertexLabel","_clearTailMarker","_clearMeasureLayers","_addClearMarker","dxSymbol","endMarker","measureLineLayer","measureMarkerLayer","options$i","AreaTool","_DistanceTool","sqmi","vertexMarker","endLabel","circleHooks","prjPath","nextCoord","generate","ellipseHooks","rectangleHooks","_firstClick","firstClick","polygonHooks","line","pSymbol","lineStringHooks","arcConf","tileInfo","tileSize","lods","tileSystem","loadArcgis","spatialRef","getProjectionCode","newcode","codeArray","strReplace","repArray","rep","template","getTransformValue","isArcgis","isGeoServer","isSuperMap","transformValue","ns","element","localName","getTileMatrixSet","TileMatrixSets","TileMatrixSetLink","TileMatrixSet","parseWMTSXML","requestUrl","parser","DOMParser","xmlDoc","parseFromString","querySelectorAll","layerName","tileMatrixSetLinks","tileMatrixSetLink","tileMatrixSet","resourceURL","attributes","_parseTileMatrixSet","parseTileMatrixSet","levelStr","substr","lastIndexOf","urlTemplate","spatialReference","info","TileMatrixs","tset","supportedCRS","minLevel","TileMatrix","level","ScaleDenominator","TopLeftCorner","TileWidth","TileHeight","_TopLeftCorner$split$","parseFloat","loadWMTS","xml","options$j","UIComponent","owner","_owner","_collides","visibility","hasClass$$1","_coordinate","_showBySymbolChange","_getUIContainer","_removePrevDOM","_mapEventsOn","_switchMapEvents","__uiDOM","buildOn","_observerDomSize","_measureSize","_singleton","_uiComponent","_uiDomKey","_setPosition","anim","_getAnimation","ok","fade","getTransformOrigin","_toCSSTranslate","_pos","isSupportZoomFilter","display","transition","_autoPanId","_autoPan","_onDomMouseout","_domContentRect","_size","getOwner","_roundPoint","getPosition","_getViewPoint","getOffset","animations","trimed","_meterToPoint","mapWidth","mapHeight","_margin","_left","_top","containerPoint0","domWidth","domHeight","newContainerPoint","onDomRemove","eventsToStop","uiComponent","hideDom","_resizeObserver","disconnect","_getClassName","_getDefaultEvents","ownerEvents","_getOwnerEvents","positionchange","symbolchange","_updatePosition","getOwnerEvents","onDomSizeChange","entries","borderBoxSize","inlineSize","blockSize","contentRect","observe","isSupport","options$k","domEvents","UIMarker","_markerCoord","isStr","_registerDOMEvents","_removeDOMEvents","isDragging","_onDomEvents","_mousedownEvent","_mouseupEvent","_mouseClickPositionIsChange","_touchstartTime","onZoomFilter","_this$options2","EVENTS$1","UIMarkerDragHandler","_startDrag","_endDrag","_lastCoord","_lastPoint","_prepareDragHandler","_dragging","_isDragging","coordOffset","pointOffset","PROPERTY_PATTERN","options$l","EMPTY_SIZE","InfoWindow","_UIComponent","getInfoWindow","removeInfoWindow","_infoWindow","setTitle","title","getTitle","isFunc","_dom","_replaceTemplate","_bindDomEvents","_getWindowWidth","msgContent","querySelector","_onCloseBtnClick","closeBtn","html","markerSize","fixExtent","_onAutoOpen","_rectifyMouseCoordinte","mouseCoordinate","_rectifyLineStringMouseCoordinate","lineString","dis","mousePt","minDis","coordinateIndex","filterPts","xys","_this$getMap$getSize","pt1","pt2","minPtDis","ptIndex","_len2","_dis","defaultWidth","_getDomEvents","bindEvent","_onDomMouseover","HIDEDOMEVENTS","options$m","ToolTip","onMouseOut","setStyle$$1","cssName","containerClass","onMouseOver","defaultOptions","Menu","_menu","removeMenu","setItems","items","getItems","_getMenuWidth","menuItems","_createMenuItemDom","ul","onMenuClick","_callback","itemDOM","itemTitle","Menuable","setMenu","_menuOptions","_defaultOpenMenu","getMenu","openMenu","setMenuItems","getMenuItems","index$4","Control","controlContainer","__ctrlContainer","_controlDom","_parse","getContainerPoint","positions","addControl","removeControl","options$n","layerEvents","Attribution","_Control","_attributionContainer","_update","attributions","attributionControl","options$o","Compass","compass","_getCompass","_compass","_rotateCompass","_resetView","compassControl","options$p","LayerSwitcher","_show","_hide","_createPanel","toElement","relatedTarget","elm","baseLayers","li","_isExcluded","_renderLayer","_li","_ul","_label","checked","groupInputOnChange","parentLayerShow","layerShow","checkbox","childUl","groupLi","groupUl","groupLabel","groupInput","onchange","groupLayers","excludeLayers","isBase","parentChecked","layerSwitcherControl","options$q","Overview","mapContainer","_createOverview","_updateBaseLayer","_onButtonClick","_updateButtonText","_overview","_perspective","maxmize","minimize","getOverviewMap","_getOverviewZoom","_getPerspectiveCoords","showIndex","overviewControl","options$r","Panel","closeButton","innerText","onclick","panelContent","draggable","_startPos","_startPosition","startPosition","options$s","Reset","_getReset","_reset","_view","resetControl","options$t","EVENTS_TO_LISTEN","Scale","_scaleContainer","_addScales","css","_mScale","_iScale","maxMeters","_updateScales","_updateMetric","_updateImperial","meters","_getRoundNum","_updateScale","maxFeet","maxMiles","miles","feet","num","pow10","scaleControl","options$u","Toolbar","onButtonClick","childIndex","targetDom","_getItems","textAlign","itemSize","dropMenu","_createDropMenu","menuDom","menuUL","liWidth","options$v","Zoom","levelWrapper","levelDOM","_levelDOM","zoomDOM","zoomInButton","_zoomInButton","zoomOutButton","_zoomOutButton","_updateText","_onZoomInClick","_onZoomOutClick","zoomControl","index$5","TileSystem","getDefault","semiCircum","TileConfig","prepareTileInfo","_xScale","_yScale","_pointOrigin","_getTileNum","tileX","tileY","getTileIndex","repeatWorld","tileIndex","getNeighorTileIndex","idy","_getTileFullIndex","_tileFullIndex","nwIndex","seIndex","getTilePrjNW","getTilePointNW","getTilePrjSE","getTilePointSE","getTilePrjExtent","DEFAULT_MAXERROR","TEMP_POINT$2","MAX_ROOT_NODES","isSetAvailable","Set","TileHashset","_table","add$$1","options$w","URL_PATTERN$1","TEMP_POINT0$4","TEMP_POINT1$1","TEMP_POINT2$1","TEMP_POINT3$1","TEMP_POINT4","TEMP_POINT6","TILE_BOX","TILE_MIN","TILE_MAX","ARR3","TileLayer","forceReload","getTileSize","_tileSize","getTiles","parentLayer","_coordCache","_isPyramidMode","_getPyramidTiles","_getCascadeTiles","sr","_disablePyramid","_hasOwnSR","_getTileFullExtent","_tileFullExtent","_getRootNodes","offset0","_rootNodes","_this$_rootNodes","_tiles","tiles","_error","_getRootError","tileConfig","_getTileConfig","_tileConfig$tileSyste","extent000","_getTileId","getTileUrl","aspectRatio","cameraZ","heightZ","widthZ","diagonalZ","fov0","_getTileZoom","projectionView","_getTileOffset","mapContainerExtent","mapExtent2D","_convertToExtent2d","visualHeight1","visualContainerExtent","_visitedTiles","tileGrid","_getTiles","rootNodes","offsets","parents","pop","_splitNode","isParentTile","sortingTiles","tileGrids","tile","stackMinZoom","stackMaxZoom","gridExtent","parentRenderer","childScale","hasCurrentIn","childX","childY","childIdx","childIdy","tileId","isTileCachedOrLoading","childNode","tileInfoCache","nwx","nwy","swx","swy","_isTileVisible","_isTileInFrustum","maxError","_getScreenSpaceError","_zScale","_node$extent2d","avgMinAltitude","avgMaxAltitude","geometricError","_node$extent2d2","distanceToCamera","distanceToRect","tileZoom","_currentTiles","visualHeight0","extent0","currentTiles","cascadeHeight","cascadeLevels","cascadeTiles1","extent1","cascadeTiles2","domain","subdomains","length$$1","token","customTags","_sr","_srMinZoom","_srMaxZoom","res0","res1","dz","cascadeLevel","ignoreMinZoom","frustumMatrix","canSplitTile","hasOffset","emptyGrid","tileOffsets","maskExtent","extentScale","pmin","pmax","centerTile","ltTile","rbTile","allCount","tilePoint","leftVisitEnd","rightVisitEnd","_tileInfo","_unproject","pse","tileExtent","_isTileInExtent","tileRes","_splitTiles","point0","point1","tileIdx","yOrder","corner","_checkAndAddTile","childExtent","_isSplittedTileInExtent","childRes","mapProjection","_initTileConfig","_defaultTileConfig","_tileConfig","_onSpatialReferenceChange","tileCenter","ndc","getPolygonOffsetCount","getPolygonOffset","_polygonOffset","setPolygonOffset","xyz","options$x","DEFAULT_TILESIZE","EVENTS$2","checkLayers","tileLayers","GroupTileLayer","_TileLayer","_checkChildren","layerMap","_groupChildren","tileLayer","_sortLayers","_onLayerShowHide","clearLayers","childGrid","getChildLayer","_removeChildTileCache","validateCache","tileCache","tilesInView","tilesLoading","abortTileLoading","_this6","_this7","ids","options$y","crs","uppercase","detectRetina","defaultWmsParams","service","request","format","transparent","wmsExcludeParams","WMSTileLayer","wmsParams","_wmsVersion","projectionKey","getParamString","existingUrl","encodeURIComponent","CanvasTileLayer","drawTile","createGLContext","names","compileShader","shader","createShader","shaderSource","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","deleteShader","createProgram","vert","frag","vertexShader","VERTEX_SHADER","fragmentShader","FRAGMENT_SHADER","program","attachShader","linkProgram","enableVertexAttrib","FSIZE","Float32Array","BYTES_PER_ELEMENT","STRIDE","attr","getAttribLocation","vertexAttribPointer","enableVertexAttribArray","_attr","DEPTH_FUNC_CONSTANTS","getDepthFunc","DEFAULT_BASE_COLOR","shaders","arr16","DEBUG_POINT","ImageGLRenderable","renderable","drawGLImage","debug","baseColor","useProgram","loadTexture","inGroup","layerOpacity","altIsNumber","_layerAlt","_layerAltitude","uMatrix","uniformMatrix4fv","uniform1f","uniform4fv","glBuffer","saveImageBuffer","bufferTileData","bindBuffer","ARRAY_BUFFER","drawArrays","TRIANGLE_STRIP","drawDebug","debugInfo","DEPTH_TEST","_debugBuffer","bufferData","DYNAMIC_DRAW","LINE_STRIP","_debugInfoCanvas","_ctx","texImage2D","TEXTURE_2D","RGBA","UNSIGNED_BYTE","set8","buffer","set8Int","loadImageBuffer","Int16Array","drawTinImage","vertices","texCoords","indices","posBuffer","texBuffer","ELEMENT_ARRAY_BUFFER","Uint16Array","drawElements","TRIANGLES","UNSIGNED_SHORT","createCanvas2","canvas2","createGLContext$$1","clearColor","STENCIL_TEST","BLEND","blendFunc","ONE","ONE_MINUS_SRC_ALPHA","createBuffer","STATIC_DRAW","enableSampler","activeTexture","pixelStorei","UNPACK_PREMULTIPLY_ALPHA_WEBGL","resizeGLCanvas","viewport","clearGLCanvas","clearStencil","COLOR_BUFFER_BIT","STENCIL_BUFFER_BIT","DEPTH_BUFFER_BIT","disposeImage","texture","saveTexture","_createTexture","getTexture","createTexture","bindTexture","texParameteri","TEXTURE_MIN_FILTER","LINEAR","TEXTURE_MAG_FILTER","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","isPowerOfTwo","resize","generateMipmap","_textures","textures","LINEAR_MIPMAP_LINEAR","getImageBuffer","_imageBuffers","imageBuffers","createImageBuffer","removeGLCanvas","deleteBuffer","_buffers","deleteTexture","deleteProgram","enableVertexAttrib$$1","createProgram$$1","_createProgram2","numUniforms","getProgramParameter","activeUniforms","getActiveUniform","_initUniforms","sampler","texIdx","uSampler","_getUniform","uniform1i","uniforms","uniform","uniformName","getUniformLocation","a2","a3","a4","a5","a6","a7","floorPowerOfTwo","LN2","options$z","alphaTest","depthMask","depthFunc","TEMP_POINT$3","ImageLayer","images","_images","_prepareImages","setImages","getImages","_imageData","refreshImages","EMPTY_ARRAY$1","ImageLayerCanvasRenderer","_CanvasRenderer","isDrawable","_imageLoaded","urls","unloaded","retireImage","_drawImages","_drawImage","ImageLayerGLRenderer","_ImageGLRenderable","_prepareGLContext","POLYGON_OFFSET_FILL","SRC_ALPHA","parentContext","renderTarget","fbo","framebuffer","getFramebuffer","bindFramebuffer","FRAMEBUFFER","_fbo","CanvasLayerRenderer","getPrepareParams","getDrawParams","prepareDrawContext","_drawLayer","_drawLayerOnInteracting","canvasImg","bufferContext","prevent","doubleBuffer","_drawContext","_predrawed","ensureParams","prepareToDraw","_prepareDrawParams","_key2","options$A","CanvasLayer","redraw","isPlaying","requestMapToRender","TEMP_POINT$4","options$B","ParticleLayer","_CanvasLayer","getParticles","_shouldClear","_fillCanvas","trail","_CanvasLayerRenderer","prevX","prevY","EditHandle","_fetchImage","getCursor","markerFile","_img","setContainerPoint","_this$_point","_delete","removeTopElement","_dragger","addTopElement","onDragstart","dragHandler","onDragging","onDragend","activeMap","prevCoord","EditOutline","setPoints","allX","allY","EDIT_STAGE_LAYER_PREFIX","createHandleSymbol","options$C","GeometryEditor","prepare","_prepareEditStageLayer","shadowId","_shadowLayer","LayerType","editing","_geometryDraggble","_shadow","_switchGeometryEvents","_createOrRefreshOutline","_createCenterHandle","_onMarkerDragEnd","createMarkerEditor","createCircleEditor","createEllipseOrRectEditor","createPolygonEditor","_history","_editOutline","_refreshHooks","_getGeometryEvents","_onGeoSymbolChange","_exeAndReset","oper","_addRefreshHook","cointainerPoint","handle","createHandle","onDown","onMove","onUp","shadowFirst","_createHandleInstance","removeVertexOn","onHandleDragstart","_updating","onHandleDragging","_hideContext","onHandleDragEnd","onRefresh","refresh","_createResizeHandles","blackList","onHandleMove","onHandleUp","cursors","axis","isMarker","getResizeAnchors","_ext","resizeHandles","anchorIndexes","handleSymbol","fnLocateHandles","_loop","isBlack","some","ele","_ret","geometryToEdit","_recordHistory","getUpdates","verticalAnchor","horizontalAnchor","resizeAbilities","newCoordinates","_updateCoordFromShadow","mirrorHandle","mirror","viewCenter","wh","vr","hr","ability","updates","handleContainerPoint","wline","hline","isRect","mouseContainerPoint","pointSub","targetPoint","mirrorContainerPoint","absSub","geoCoord","mirrorCoordinate","mirrorCoord","_mirrorCoord","_mouseCoordinate","_wline","_hline","geoToEdit","verticeLimit","propertyOfVertexIndex","vertexHandles","newVertexHandles","getVertexCoordinates","ringIndex","getVertexPrjCoordinates","onVertexAddOrRemove","removeVertex","_ringIndex","prjCoordinates","isEnd","nextIndex","createNewVertexHandle","coordiantes","moveVertexHandle","handleConatainerPoint","vertice","nVertex","pVertex","hanldeDxdy","compiledSymbol","createVertexHandle","ringCoordinates","rIndex","pauseRefresh","vertexCoordinates","nextVertex","vertexIndex","refreshVertex","_vertexCoordinates","_ringIndex2","_ringIndex3","_ringCoordinates","method","_exeHistory","ignoreRecord","updating","_len3","lastOperation","record","history","TextEditable","startEditText","endEditText","_prepareEditor","_textEditor","_editUIMarker","onkeyup","isEditingText","getTextEditor","editContainer","_createEditor","_getEditorOffset","_setCursorToLast","labelSize","textColor","spacing","editor","contentEditable","keyCode","range","getSelection","focus","selectAllChildren","collapseToEnd","selection","createRange","moveToElementText","collapse","select","animate$$1","stylesToAnimate","_prepareAnimationStyles","preTranslate","isFocusing","_animationStarted","fnName","toTranslate","dSymbol","_fireAnimateEvent","symbolToAnimate","symbolInStyles","sp","_sp","DRAG_STAGE_LAYER_ID","EVENTS$3","GeometryDragHandler","_prepareDragStageLayer","shadows","_updateShadowSymbol","_prepareShadowConnectors","_dragStageLayer","shadowConnectors","connectors","targetConn","connOptions","connSymbol","conn","_shadowConnectors","_onTargetUpdated","_correctCoord","_startParam","_moved","dragOnScreenAxis","_updateTargetAndRemoveShadow","_editor","redoEdit","undoEdit","cancelEdit","pickGeometryIndex","openInfoWindow","TILE_POINT","TEMP_POINT$5","TEMP_POINT1$2","TEMP_POINT2$2","EMPTY_ARRAY$2","TileWorkerConnection","checkUrl","fetchOptions","BLANK_IMAGE","TileLayerCanvasRenderer","_parentTiles","_childTiles","_tileQueue","deleteTile","_tileImageWorkerConn","_compareTiles","compareTiles","getCurrentTileZoom","_tileZoom","mask2DExtent","_renderTimestamp","_consumeTileQueue","_computeAvgTileAltitude","hasFreshTiles","frameTiles","_frameTiles","_getTilesInCurrentFrame","loadingCount","loadTileQueue","tileQueue","childTiles","parentTiles","placeholders","loading","_drawTiles","_retireTiles","getTileGridsInCurrentFrame","_frameTileGrids","acc","curr","checkedTiles","parentKeys","childKeys","placeholderKeys","preLoadingCount","_markTiles","loadingLimit","_getLoadLimit","gridTiles","parentCount","allTiles","placeholder","_generatePlaceHolder","tileLoading","_isLoadingTile","_getCachedTile","isTileFadingIn","isTileComplete","hitLimit","_findChildTiles","parentTile","_findParentTile","parentId","removeTileCache","isTileCached","tileImage","_getTileFadingOpacity","drawBackground","backgroundTimestamp","_parentTileTimestamp","onDrawTileStart","fadingAnimation","drawingChildTiles","_drawTile","drawingParentTiles","drawingCurrentTiles","_drawTileAndCache","_fadingAnimation","onDrawTileEnd","_clipByPitch","loadTile","loadTime","loadTileBitmap","onTileLoad","loadTileImage","onTileError","referrer","accept","removeTileLoading","falseFn","tileData","_queue$shift","checkTileInQueue","consumeTile","sumMin","sumMax","resetTileLoadTime","_addTileToCache","onerrorTick","tileRetryCount","errorUrl","transformed","getTileOpacity","getDebugInfo","_getLayerOfTile","_zoomDiff","jj","canVisit","isValidCachedTile","_jj","_jj2","zoomDiff","_findChildTilesAt","childZoom","dmin","dmax","ex","ey","diff","_diff","_z","_tile","isParent","_tilesLoading$tileId","childLayer","_tilePlaceHolder","_tile2","defaultPlaceholder","cw","ch","TILE_POINT$1","MESH_TO_TEST","TileLayerGLRenderer","_gl","LEQUAL","stencilOp","KEEP","REPLACE","sceneFilter","_bindGLBuffer","stencilFunc","layerPolygonOffset","polygonOffset","_loadTile","tileCanvas","CanvasRenderer$1","_TileLayerCanvasRende","GLRenderer","_TileLayerGLRenderer","quadVertices","Int8Array","QuadStencil","stencilMask","_save","_createBuffer","_createProgram","transformLoc","colorLoc","colorMask","_restore","uniform3fv","random","func","fail","zfail","zpass","resetFunc","ALWAYS","_savedProgram","Uint8ClampedArray","OverlayLayerRenderer","_geosToCheck","_resourceChecked","_addGeoToCheckRes","TEMP_EXTENT$8","TEMP_VEC3","TEMP_FIXEDEXTENT","PLACEMENT_CENTER","tempCollisionIndex","VectorLayerRenderer","_OverlayLayerCanvasRe","_geoIsCollision","_lastRenderTime","_this$context$canvas","drawGeos","_geosToDraw","_updateMapStateCache","_updateDisplayExtent","_drawnRes","_batchConversionMarkers","_onlyHasPoint","forEachGeo","checkGeo","_sortByDistanceToCamera","_this$layer$options","collisionDelay","_lastCollisionTime","_collidesGeos","_inCurrentView","_displayExtent","_setDrawGeosDrawTime","drawTime","inCurrentView","collisionScope","_constructorIsThis","markers","altitudeCache","extentCache","_geo","_pts$_i","symbolkey","meterScale","type0","type1","painter0","painter1","alt0","alt1","dist0","dist1","MapRenderer","_handlerQueue","_thisDocVisibilitychange","_onDocVisibilitychange","_thisDocDragStart","_onDocDragStart","_thisDocDragEnd","_onDocDragEnd","executeFrameCallbacks","front","panels","hasFront","_frontCount","back","layerDOM","childElementCount","hasBack","_backCount","hasUI","_uiCount","uiDOM","domChanged","frontCount","backCount","uiCount","_frameLoop","visibilityState","_getWrapPanel","wrapPanel","overflow","_containerIsOffscreen","minSize","MapCanvasRenderer","_MapRenderer","_containerIsCanvas","_loopTime","_resizeEventList","_resizeTime","initContainer","renderFrame","_handleResizeEventList","_updateDomPosition","_isViewChanged","updateMapDOM","_getAllLayerToRender","drawLayers","updated","drawLayerCanvas","drawTops","_drawCenterCross","_debugSky","_needClear","_recordView","_mapview","_getMapView","_spatialRefChanged","_fireLayerLoadEvents","canvasIds","updatedIds","fps","timeLimit","layerLimit","isCanvas","needsRedraw","_checkLayerRedraw","transformMatrix","__zoomTransformMatrix","_zoomMatrix","_drawCanvasLayerOnInteracting","_eventParam","preCanvasIds","_canvasIds","preUpdatedIds","_updatedIds","isLayerCanvasUpdated","sep","isSpatialReferenceChanged","inTime","_updateCanvasSize","interacting","baseLayerImage","layerImage","_getLayerImage","targetWidth","targetHeight","_drawLayerCanvasImage","_drawFog","_resizeInterval","clearInterval","_cancelFrameLoop","createContainer","enableSelect","POSITION0","mapAllLayers","backStatic","backLayer","canvasContainer","frontStatic","frontLayer","previous","_frameTimestamp","_resizeCount","_animationFrame","canvasImage","imgOp","_drawContainerExtent","cascadePitches","h30","h60","fogThickness","landscape","topCtx","_checkPositionTime","dTime","_checkSize","_setCheckSizeInterval","_checkSizeInterval","setInterval","_onMapMouseMove","_hitDetectFrame","_getCanvasLayers","_tops","index$6","CanvasTileLayerCanvasRenderer","CanvasTileLayerGLRenderer","OverlayLayerCanvasRenderer","VectorLayerCanvasRenderer","CenterPointRenderer","PolyRenderer","_l2","_ii","_ll","_l3","_l4","_coords","_l5","curretPoint","TEMP_WITHIN","isWithinPixel","_painter$_containerBb","offsetx","offsety","_getRenderBBOX","_getRenderSize","prjExtent","arrowStyles","normal","prjVertexes","dasharray","_getArrowPlacement","_getArrows","prjHoles","holePoints","simplified","hole","Util","DomUtil","StringUtil","MapboxUtil"],"sources":["C:/Users/yati0/NURA_GCS/node_modules/maptalks/dist/maptalks.es-bundler.js"],"sourcesContent":["/*!\n * maptalks v1.0.0-rc.25\n * LICENSE : BSD-3-Clause\n * (c) 2016-2023 maptalks.org\n */\nimport Zousan from 'zousan';\nimport rbush from 'rbush';\nimport simplify from 'simplify-js';\nimport { intersectsBox } from 'frustum-intersects';\n\nvar version = \"1.0.0-rc.25\";\n\nvar INTERNAL_LAYER_PREFIX = '_maptalks__internal_layer_';\nvar GEOMETRY_COLLECTION_TYPES = ['MultiPoint', 'MultiLineString', 'MultiPolygon', 'GeometryCollection'];\nvar GEOJSON_TYPES = ['FeatureCollection', 'Feature', 'Point', 'LineString', 'Polygon'].concat(GEOMETRY_COLLECTION_TYPES);\nvar RESOURCE_PROPERTIES = ['markerFile', 'polygonPatternFile', 'linePatternFile', 'markerFillPatternFile', 'markerLinePatternFile'];\nvar RESOURCE_SIZE_PROPERTIES = [['markerWidth', 'markerHeight'], [], [null, 'lineWidth'], [], [null, 'markerLineWidth']];\nvar NUMERICAL_PROPERTIES = {\n  'lineWidth': 1,\n  'lineOpacity': 1,\n  'lineDx': 1,\n  'lineDy': 1,\n  'polygonOpacity': 1,\n  'markerWidth': 1,\n  'markerHeight': 1,\n  'markerDx': 1,\n  'markerDy': 1,\n  'markerOpacity': 1,\n  'markerFillOpacity': 1,\n  'markerLineWidth': 1,\n  'markerLineOpacity': 1,\n  'textSize': 1,\n  'textOpacity': 1,\n  'textHaloRadius': 1,\n  'textWrapWidth': 1,\n  'textLineSpacing': 1,\n  'textDx': 1,\n  'textDy': 1\n};\nvar COLOR_PROPERTIES = ['lineColor', 'polygonFill', 'markerFill', 'markerLineColor', 'textFill'];\nvar DEFAULT_TEXT_SIZE = 14;\n\nfunction now() {\n  return Date.now();\n}\nfunction extend(dest) {\n  for (var i = 1; i < arguments.length; i++) {\n    var src = arguments[i];\n    for (var k in src) {\n      dest[k] = src[k];\n    }\n  }\n  return dest;\n}\nfunction isNil(obj) {\n  return obj == null;\n}\nfunction isNumber(val) {\n  return typeof val === 'number' && !isNaN(val);\n}\nfunction isInteger(n) {\n  return (n | 0) === n;\n}\nfunction isObject(obj) {\n  return typeof obj === 'object' && !!obj;\n}\nfunction isString(obj) {\n  if (isNil(obj)) {\n    return false;\n  }\n  return typeof obj === 'string' || obj.constructor !== null && obj.constructor === String;\n}\nfunction isFunction(obj) {\n  if (isNil(obj)) {\n    return false;\n  }\n  return typeof obj === 'function' || obj.constructor !== null && obj.constructor === Function;\n}\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nfunction hasOwn(obj, key) {\n  return hasOwnProperty.call(obj, key);\n}\nfunction join(arr, seperator) {\n  if (arr.join) {\n    return arr.join(seperator || ',');\n  } else {\n    return Array.prototype.join.call(arr, seperator || ',');\n  }\n}\nfunction isEmpty(object) {\n  var property;\n  for (property in object) {\n    return false;\n  }\n  return !property;\n}\nvar pi = Math.PI / 180;\nfunction toRadian(d) {\n  return d * pi;\n}\nfunction toDegree(r) {\n  return r / pi;\n}\n\nvar IS_NODE = Object.prototype.toString.call(typeof process !== 'undefined' ? process : 0) === '[object process]' && !process.versions['electron'] && !process.versions['nw'] && !process.versions['node-webkit'];\n\nvar Browser = {};\nvar maps = {};\nfunction getDevicePixelRatio() {\n  return window.devicePixelRatio || window.screen.deviceXDPI / window.screen.logicalXDPI;\n}\nif (!IS_NODE) {\n  var ua = navigator.userAgent.toLowerCase(),\n    doc = document.documentElement || {\n      style: {}\n    },\n    ie = ('ActiveXObject' in window),\n    webkit = ua.indexOf('webkit') !== -1,\n    phantomjs = ua.indexOf('phantom') !== -1,\n    android23 = ua.search('android [23]') !== -1,\n    chrome = ua.indexOf('chrome') !== -1,\n    gecko = ua.indexOf('gecko') !== -1 && !webkit && !window.opera && !ie,\n    iosWeixin = /iphone/i.test(ua) && /micromessenger/i.test(ua),\n    mobile = typeof orientation !== 'undefined' || ua.indexOf('mobile') !== -1,\n    msPointer = !window.PointerEvent && window.MSPointerEvent,\n    pointer = window.PointerEvent && navigator.pointerEnabled || msPointer,\n    ie3d = ie && 'transition' in doc.style,\n    webkit3d = 'WebKitCSSMatrix' in window && 'm11' in new window.WebKitCSSMatrix() && !android23,\n    gecko3d = ('MozPerspective' in doc.style),\n    opera12 = ('OTransition' in doc.style),\n    any3d = (ie3d || webkit3d || gecko3d) && !opera12 && !phantomjs,\n    imageBitMap = typeof window !== 'undefined' && isFunction(window.createImageBitmap),\n    resizeObserver = typeof window !== 'undefined' && isFunction(window.ResizeObserver),\n    btoa = typeof window !== 'undefined' && isFunction(window.btoa),\n    proxy = typeof window !== 'undefined' && isFunction(window.Proxy);\n  var chromeVersion = 0;\n  if (chrome) {\n    chromeVersion = ua.match(/chrome\\/([\\d.]+)/)[1];\n  }\n  var touch = !phantomjs && (pointer || 'ontouchstart' in window || window.DocumentTouch && document instanceof window.DocumentTouch);\n  var webgl = typeof window !== 'undefined' && 'WebGLRenderingContext' in window;\n  var devicePixelRatio = getDevicePixelRatio();\n  var decodeImageInWorker = false;\n  try {\n    var offCanvas = new OffscreenCanvas(2, 2);\n    offCanvas.getContext('2d');\n    decodeImageInWorker = true;\n  } catch (err) {\n    decodeImageInWorker = false;\n  }\n  var supportsPassive = false;\n  try {\n    window.addEventListener('testPassive', function () {}, {\n      get passive() {\n        supportsPassive = true;\n      }\n    });\n  } catch (e) {}\n  Browser = {\n    ie: ie,\n    ielt9: ie && !document.addEventListener,\n    edge: 'msLaunchUri' in navigator && !('documentMode' in document),\n    webkit: webkit,\n    gecko: gecko,\n    android: ua.indexOf('android') !== -1,\n    android23: android23,\n    chrome: chrome,\n    chromeVersion: chromeVersion,\n    safari: !chrome && ua.indexOf('safari') !== -1,\n    phantomjs: phantomjs,\n    ie3d: ie3d,\n    webkit3d: webkit3d,\n    gecko3d: gecko3d,\n    opera12: opera12,\n    any3d: any3d,\n    iosWeixin: iosWeixin,\n    mobile: mobile,\n    mobileWebkit: mobile && webkit,\n    mobileWebkit3d: mobile && webkit3d,\n    mobileOpera: mobile && window.opera,\n    mobileGecko: mobile && gecko,\n    touch: !!touch,\n    msPointer: !!msPointer,\n    pointer: !!pointer,\n    retina: devicePixelRatio > 1,\n    devicePixelRatio: devicePixelRatio,\n    language: navigator.browserLanguage ? navigator.browserLanguage : navigator.language,\n    ie9: ie && document.documentMode === 9,\n    ie10: ie && document.documentMode === 10,\n    webgl: webgl,\n    imageBitMap: imageBitMap,\n    resizeObserver: resizeObserver,\n    btoa: btoa,\n    decodeImageInWorker: decodeImageInWorker,\n    monitorDPRChange: true,\n    supportsPassive: supportsPassive,\n    proxy: proxy,\n    removeDPRListening: function removeDPRListening(map) {\n      if (map) {\n        delete maps[map.id];\n      }\n    },\n    checkDevicePixelRatio: function checkDevicePixelRatio() {\n      if (typeof window !== 'undefined' && Browser.monitorDPRChange) {\n        var _devicePixelRatio = getDevicePixelRatio();\n        var changed = _devicePixelRatio !== Browser.devicePixelRatio;\n        if (changed) {\n          Browser.devicePixelRatio = _devicePixelRatio;\n        }\n        return changed;\n      }\n      return false;\n    },\n    addDPRListening: function addDPRListening(map) {\n      if (map) {\n        maps[map.id] = map;\n      }\n    }\n  };\n  if (typeof window !== 'undefined' && window.matchMedia) {\n    for (var i = 1; i < 500; i++) {\n      var dpi = (i * 0.01).toFixed(2);\n      var screen$1 = window.matchMedia(\"screen and (resolution: \" + dpi + \"dppx)\");\n      if (screen$1) {\n        if (screen$1.addEventListener) {\n          screen$1.addEventListener('change', Browser.checkDevicePixelRatio);\n        } else if (screen$1.addListener) {\n          screen$1.addListener(Browser.checkDevicePixelRatio);\n        }\n      }\n    }\n  }\n  if (Browser.devicePixelRatio) {\n    var tempDPI = Browser.devicePixelRatio;\n    Object.defineProperty(Browser, 'devicePixelRatio', {\n      get: function get() {\n        return tempDPI;\n      },\n      set: function set(value) {\n        if (value === tempDPI) {\n          return;\n        }\n        tempDPI = value;\n        if (!Browser.monitorDPRChange) {\n          return;\n        }\n        for (var mapId in maps) {\n          var map = maps[mapId];\n          if (!map || !map.options || map.options['devicePixelRatio'] || !map.checkSize || !map.getRenderer) {\n            continue;\n          }\n          var renderer = map.getRenderer();\n          if (renderer) {\n            map.checkSize(true);\n          }\n        }\n      }\n    });\n  }\n}\nvar Browser$1 = Browser;\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  _setPrototypeOf(subClass, superClass);\n}\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return self;\n}\nfunction _toPrimitive(input, hint) {\n  if (typeof input !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (typeof res !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n  return typeof key === \"symbol\" ? key : String(key);\n}\n\nvar Position = function () {\n  function Position(x, y, z) {\n    if (!isNil(x) && !isNil(y)) {\n      this.x = +x;\n      this.y = +y;\n      this.z = z;\n    } else if (!isNil(x.x) && !isNil(x.y)) {\n      this.x = +x.x;\n      this.y = +x.y;\n      this.z = x.z;\n    } else if (Array.isArray(x)) {\n      this.x = +x[0];\n      this.y = +x[1];\n      this.z = x[2];\n    }\n    if (this._isNaN()) {\n      throw new Error('Position is NaN');\n    }\n  }\n  var _proto = Position.prototype;\n  _proto.set = function set(x, y, z) {\n    this.x = x;\n    this.y = y;\n    this.z = z || 0;\n    return this;\n  };\n  _proto.abs = function abs() {\n    return new this.constructor(Math.abs(this.x), Math.abs(this.y));\n  };\n  _proto._abs = function _abs() {\n    this.x = Math.abs(this.x);\n    this.y = Math.abs(this.y);\n    return this;\n  };\n  _proto._round = function _round() {\n    this.x = Math.round(this.x);\n    this.y = Math.round(this.y);\n    return this;\n  };\n  _proto.round = function round() {\n    return new this.constructor(Math.round(this.x), Math.round(this.y));\n  };\n  _proto._ceil = function _ceil() {\n    this.x = Math.ceil(this.x);\n    this.y = Math.ceil(this.y);\n    return this;\n  };\n  _proto.ceil = function ceil() {\n    return new this.constructor(Math.ceil(this.x), Math.ceil(this.y));\n  };\n  _proto.distanceTo = function distanceTo(point) {\n    var x = point.x - this.x,\n      y = point.y - this.y;\n    return Math.sqrt(x * x + y * y);\n  };\n  _proto.mag = function mag() {\n    return Math.sqrt(this.x * this.x + this.y * this.y);\n  };\n  _proto._floor = function _floor() {\n    this.x = Math.floor(this.x);\n    this.y = Math.floor(this.y);\n    return this;\n  };\n  _proto.floor = function floor() {\n    return new this.constructor(Math.floor(this.x), Math.floor(this.y));\n  };\n  _proto.copy = function copy() {\n    return new this.constructor(this.x, this.y, this.z);\n  };\n  _proto._add = function _add(x, y) {\n    if (!isNil(x.x)) {\n      this.x += x.x;\n      this.y += x.y;\n    } else if (!isNil(x[0])) {\n      this.x += x[0];\n      this.y += x[1];\n    } else {\n      this.x += x;\n      this.y += y;\n    }\n    return this;\n  };\n  _proto.add = function add(x, y) {\n    var nx, ny;\n    if (!isNil(x.x)) {\n      nx = this.x + x.x;\n      ny = this.y + x.y;\n    } else if (!isNil(x[0])) {\n      nx = this.x + x[0];\n      ny = this.y + x[1];\n    } else {\n      nx = this.x + x;\n      ny = this.y + y;\n    }\n    return new this.constructor(nx, ny);\n  };\n  _proto._sub = function _sub(x, y) {\n    if (!isNil(x.x)) {\n      this.x -= x.x;\n      this.y -= x.y;\n    } else if (!isNil(x[0])) {\n      this.x -= x[0];\n      this.y -= x[1];\n    } else {\n      this.x -= x;\n      this.y -= y;\n    }\n    return this;\n  };\n  _proto._substract = function _substract() {\n    return this._sub.apply(this, arguments);\n  };\n  _proto.sub = function sub(x, y) {\n    var nx, ny;\n    if (!isNil(x.x)) {\n      nx = this.x - x.x;\n      ny = this.y - x.y;\n    } else if (!isNil(x[0])) {\n      nx = this.x - x[0];\n      ny = this.y - x[1];\n    } else {\n      nx = this.x - x;\n      ny = this.y - y;\n    }\n    return new this.constructor(nx, ny);\n  };\n  _proto.substract = function substract() {\n    return this.sub.apply(this, arguments);\n  };\n  _proto.multi = function multi(ratio) {\n    return new this.constructor(this.x * ratio, this.y * ratio);\n  };\n  _proto._multi = function _multi(ratio) {\n    this.x *= ratio;\n    this.y *= ratio;\n    return this;\n  };\n  _proto.div = function div(n) {\n    return this.multi(1 / n);\n  };\n  _proto._div = function _div(n) {\n    return this._multi(1 / n);\n  };\n  _proto.equals = function equals(c) {\n    if (!(c instanceof this.constructor)) {\n      return false;\n    }\n    return this.x === c.x && this.y === c.y && this.z === c.z;\n  };\n  _proto._isNaN = function _isNaN() {\n    return isNaN(this.x) || isNaN(this.y) || isNumber(this.z) && isNaN(this.z);\n  };\n  _proto.isZero = function isZero() {\n    return this.x === 0 && this.y === 0;\n  };\n  _proto.toArray = function toArray() {\n    if (isNumber(this.z)) {\n      return [this.x, this.y, this.z];\n    }\n    return [this.x, this.y];\n  };\n  _proto.toFixed = function toFixed(n) {\n    return new this.constructor(this.x.toFixed(n), this.y.toFixed(n), isNumber(this.z) ? this.z.toFixed : undefined);\n  };\n  _proto.toJSON = function toJSON() {\n    var json = {\n      x: this.x,\n      y: this.y\n    };\n    if (isNumber(this.z)) {\n      json.z = this.z;\n    }\n    return json;\n  };\n  return Position;\n}();\n\nvar Point = function (_Position) {\n  _inheritsLoose(Point, _Position);\n  function Point() {\n    return _Position.apply(this, arguments) || this;\n  }\n  var _proto = Point.prototype;\n  _proto.closeTo = function closeTo(p, delta) {\n    if (!delta) {\n      delta = 0;\n    }\n    return this.x >= p.x - delta && this.x <= p.x + delta && this.y >= p.y - delta && this.y <= p.y + delta;\n  };\n  _proto.mag = function mag() {\n    return Math.sqrt(this.x * this.x + this.y * this.y);\n  };\n  _proto.unit = function unit() {\n    return this.copy()._unit();\n  };\n  _proto._unit = function _unit() {\n    this._div(this.mag());\n    return this;\n  };\n  _proto.perp = function perp() {\n    return this.copy()._perp();\n  };\n  _proto._perp = function _perp() {\n    var y = this.y;\n    this.y = this.x;\n    this.x = -y;\n    return this;\n  };\n  _proto.angleWith = function angleWith(b) {\n    return this.angleWithSep(b.x, b.y);\n  };\n  _proto.angleWithSep = function angleWithSep(x, y) {\n    return Math.atan2(this.x * y - this.y * x, this.x * x + this.y * y);\n  };\n  _proto._rotate = function _rotate(angle) {\n    var cos = Math.cos(angle),\n      sin = Math.sin(angle),\n      x = cos * this.x - sin * this.y,\n      y = sin * this.x + cos * this.y;\n    this.x = x;\n    this.y = y;\n    return this;\n  };\n  _proto.rotate = function rotate(a) {\n    return this.copy()._rotate(a);\n  };\n  return Point;\n}(Position);\n\nvar requestAnimFrame, cancelAnimFrame;\n(function () {\n  if (IS_NODE) {\n    requestAnimFrame = function requestAnimFrame(fn) {\n      return setTimeout(fn, 16);\n    };\n    cancelAnimFrame = clearTimeout;\n    return;\n  }\n  var requestFn, cancelFn;\n  var timeToCall = 1000 / 30;\n  function timeoutDefer(fn) {\n    return setTimeout(fn, timeToCall);\n  }\n  function getPrefixed(name) {\n    return window['webkit' + name] || window['moz' + name] || window['ms' + name];\n  }\n  if (typeof window != 'undefined') {\n    requestFn = window['requestAnimationFrame'] || getPrefixed('RequestAnimationFrame') || timeoutDefer;\n    cancelFn = window['cancelAnimationFrame'] || getPrefixed('CancelAnimationFrame') || getPrefixed('CancelRequestAnimationFrame') || function (id) {\n      window.clearTimeout(id);\n    };\n  } else {\n    requestFn = timeoutDefer;\n    cancelFn = clearTimeout;\n  }\n  requestAnimFrame = function requestAnimFrame(fn) {\n    return requestFn(fn);\n  };\n  cancelAnimFrame = function cancelAnimFrame(id) {\n    if (id) {\n      cancelFn(id);\n    }\n  };\n})();\nfunction isSVG(url) {\n  var prefix = 'data:image/svg+xml';\n  if (url.length > 4 && url.slice(-4) === '.svg') {\n    return 1;\n  } else if (url.slice(0, prefix.length) === prefix) {\n    return 2;\n  }\n  return 0;\n}\nfunction loadImage(img, imgDesc) {\n  if (IS_NODE && loadImage.node) {\n    loadImage.node(img, imgDesc);\n    return;\n  }\n  img.src = imgDesc[0];\n}\nvar uid = 0;\nfunction UID() {\n  return uid++;\n}\nvar GUID = UID;\nfunction parseJSON(str) {\n  if (!str || !isString(str)) {\n    return str;\n  }\n  return JSON.parse(str);\n}\nfunction pushIn(dest) {\n  for (var i = 1; i < arguments.length; i++) {\n    var src = arguments[i];\n    if (src) {\n      for (var ii = 0, ll = src.length; ii < ll; ii++) {\n        dest.push(src[ii]);\n      }\n    }\n  }\n  return dest.length;\n}\nfunction removeFromArray(obj, array) {\n  var i = array.indexOf(obj);\n  if (i > -1) {\n    array.splice(i, 1);\n  }\n}\nfunction forEachCoord(arr, fn, context) {\n  if (!Array.isArray(arr)) {\n    return context ? fn.call(context, arr) : fn(arr);\n  }\n  var result = [];\n  var p, pp;\n  for (var i = 0, len = arr.length; i < len; i++) {\n    p = arr[i];\n    if (isNil(p)) {\n      result.push(null);\n      continue;\n    }\n    if (Array.isArray(p)) {\n      result.push(forEachCoord(p, fn, context));\n    } else {\n      pp = context ? fn.call(context, p) : fn(p);\n      result.push(pp);\n    }\n  }\n  return result;\n}\nfunction getValueOrDefault(v, d) {\n  return v === undefined ? d : v;\n}\nfunction sign(x) {\n  if (Math.sign) {\n    return Math.sign(x);\n  }\n  x = +x;\n  if (x === 0 || isNaN(x)) {\n    return Number(x);\n  }\n  return x > 0 ? 1 : -1;\n}\nfunction log2(x) {\n  if (Math.log2) {\n    return Math.log2(x);\n  }\n  var v = Math.log(x) * Math.LOG2E;\n  var rounded = Math.round(v);\n  if (Math.abs(rounded - v) < 1E-14) {\n    return rounded;\n  } else {\n    return v;\n  }\n}\nfunction interpolate(a, b, t) {\n  return a * (1 - t) + b * t;\n}\nfunction wrap(n, min, max) {\n  if (n === max || n === min) {\n    return n;\n  }\n  var d = max - min;\n  var w = ((n - min) % d + d) % d + min;\n  return w;\n}\nfunction clamp(n, min, max) {\n  return Math.min(max, Math.max(min, n));\n}\nfunction isArrayHasData(obj) {\n  return Array.isArray(obj) && obj.length > 0;\n}\nvar urlPattern = /^([a-z][a-z\\d+\\-.]*:)?\\/\\//i;\nfunction isURL(url) {\n  return urlPattern.test(url);\n}\nvar cssUrlReWithQuote = /^url\\((['\"])(.+)\\1\\)$/i;\nvar cssUrlRe = /^url\\(([^'\"].*[^'\"])\\)$/i;\nfunction isCssUrl(str) {\n  if (!isString(str)) {\n    return 0;\n  }\n  if (cssUrlRe.test(str)) {\n    return 1;\n  }\n  if (cssUrlReWithQuote.test(str)) {\n    return 2;\n  }\n  return 3;\n}\nfunction extractCssUrl(str) {\n  var test = isCssUrl(str);\n  var matches;\n  if (test === 3) {\n    return str;\n  } else if (test === 1) {\n    matches = cssUrlRe.exec(str);\n    return matches[1];\n  } else if (test === 2) {\n    matches = cssUrlReWithQuote.exec(str);\n    return matches[2];\n  } else {\n    return str;\n  }\n}\nvar b64chrs = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\nfunction btoa$1(input) {\n  if (Browser$1.btoa) {\n    return window.btoa(input);\n  }\n  var str = String(input);\n  var output = '';\n  for (var block, charCode, idx = 0, map = b64chrs; str.charAt(idx | 0) || (map = '=', idx % 1); output += map.charAt(63 & block >> 8 - idx % 1 * 8)) {\n    charCode = str.charCodeAt(idx += 3 / 4);\n    if (charCode > 0xFF) {\n      throw new Error('\\'btoa\\' failed: The string to be encoded contains characters outside of the Latin1 range.');\n    }\n    block = block << 8 | charCode;\n  }\n  return output;\n}\nfunction b64toBlob(b64Data, contentType) {\n  var byteCharacters = atob(b64Data);\n  var arraybuffer = new ArrayBuffer(byteCharacters.length);\n  var view = new Uint8Array(arraybuffer);\n  for (var i = 0; i < byteCharacters.length; i++) {\n    view[i] = byteCharacters.charCodeAt(i) & 0xff;\n  }\n  var blob = new Blob([arraybuffer], {\n    type: contentType\n  });\n  return blob;\n}\nfunction computeDegree(x0, y0, x1, y1) {\n  var dx = x1 - x0;\n  var dy = y1 - y0;\n  return Math.atan2(dy, dx);\n}\nvar emptyImageUrl = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7';\nfunction equalMapView(obj1, obj2) {\n  if (!obj1 && !obj2) {\n    return true;\n  } else if (!obj1 || !obj2) {\n    return false;\n  }\n  for (var p in obj1) {\n    if (p === 'center') {\n      if (!obj2[p] || !approx(obj1[p][0], obj2[p][0]) || !approx(obj1[p][1], obj2[p][1])) {\n        return false;\n      }\n    } else if (obj1[p] !== obj2[p]) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction approx(val, expected, delta) {\n  if (delta == null) {\n    delta = 1e-6;\n  }\n  return val >= expected - delta && val <= expected + delta;\n}\nfunction flash(interval, count, cb, context) {\n  if (!interval) {\n    interval = 100;\n  }\n  if (!count) {\n    count = 4;\n  }\n  var me = this;\n  var initVisible = this.isVisible();\n  count *= 2;\n  if (this._flashTimeout) {\n    clearTimeout(this._flashTimeout);\n  }\n  function flashGeo() {\n    if (count === 0) {\n      if (initVisible) {\n        me.show();\n      } else {\n        me.hide();\n      }\n      if (cb) {\n        if (context) {\n          cb.call(context);\n        } else {\n          cb();\n        }\n      }\n      return;\n    }\n    if (count % 2 === 0) {\n      me.hide();\n    } else {\n      me.show();\n    }\n    count--;\n    me._flashTimeout = setTimeout(flashGeo, interval);\n  }\n  this._flashTimeout = setTimeout(flashGeo, interval);\n  return this;\n}\nfunction _defaults$1(obj, defaults) {\n  var keys = Object.getOwnPropertyNames(defaults);\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    var value = Object.getOwnPropertyDescriptor(defaults, key);\n    if (value && value.configurable && obj[key] === undefined) {\n      Object.defineProperty(obj, key, value);\n    }\n  }\n  return obj;\n}\nfunction getPointsResultPts(points, ptKey) {\n  if (points === void 0) {\n    points = [];\n  }\n  if (ptKey === void 0) {\n    ptKey = '_pt';\n  }\n  var resultPoints = [];\n  for (var i = 0, len = points.length; i < len; i++) {\n    var point = points[i];\n    if (!point) {\n      resultPoints.push(null);\n      continue;\n    }\n    if (!point[ptKey]) {\n      point[ptKey] = new Point(0, 0);\n    }\n    var pt = point[ptKey];\n    pt.x = 0;\n    pt.y = 0;\n    resultPoints.push(pt);\n  }\n  return resultPoints;\n}\nfunction getImageBitMap(data, cb) {\n  cb(data.data);\n}\nfunction getAbsoluteURL(url) {\n  if (url && url.indexOf('http://') === 0 || url.indexOf('https://') === 0) {\n    return url;\n  }\n  var a = document.createElement('a');\n  a.href = url;\n  url = a.href;\n  a = null;\n  return url;\n}\nvar CANVAS_SIZE_TEMP = {\n  cssWidth: '1px',\n  cssHeight: '1px',\n  width: 1,\n  height: 1\n};\nfunction calCanvasSize(size, devicePixelRatio) {\n  if (devicePixelRatio === void 0) {\n    devicePixelRatio = 1;\n  }\n  var width = size.width,\n    height = size.height;\n  CANVAS_SIZE_TEMP.cssWidth = width + 'px';\n  CANVAS_SIZE_TEMP.cssHeight = height + 'px';\n  CANVAS_SIZE_TEMP.width = Math.round(width * devicePixelRatio);\n  CANVAS_SIZE_TEMP.height = Math.round(height * devicePixelRatio);\n  return CANVAS_SIZE_TEMP;\n}\n\nvar canvas;\nvar OPTIONS = {\n  width: 100,\n  height: 10\n};\nfunction getCanvas() {\n  if (!canvas) {\n    var width = OPTIONS.width,\n      height = OPTIONS.height;\n    if (OffscreenCanvas) {\n      canvas = new OffscreenCanvas(width, height);\n    } else {\n      canvas = document.createElement('canvas');\n      canvas.width = width;\n      canvas.height = height;\n    }\n  }\n  return canvas;\n}\nvar ColorIn = function () {\n  function ColorIn(colors, options) {\n    if (options === void 0) {\n      options = {};\n    }\n    if (!Array.isArray(colors)) {\n      console.error('colors is not array');\n      return;\n    }\n    if (colors.length < 2) {\n      console.error('colors.length should >1');\n      return;\n    }\n    this.colors = colors;\n    var min = Infinity,\n      max = -Infinity;\n    for (var i = 0, len = colors.length; i < len; i++) {\n      var value = colors[i][0];\n      min = Math.min(value, min);\n      max = Math.max(value, max);\n    }\n    this.min = min;\n    this.max = max;\n    this.valueOffset = this.max - this.min;\n    this.options = Object.assign({}, OPTIONS, options);\n    this._initImgData();\n  }\n  var _proto = ColorIn.prototype;\n  _proto.getImageData = function getImageData() {\n    return this.imgData;\n  };\n  _proto._initImgData = function _initImgData() {\n    var canvas = getCanvas();\n    var _this$options = this.options,\n      width = _this$options.width,\n      height = _this$options.height;\n    canvas.width = width;\n    canvas.height = height;\n    var ctx = canvas.getContext('2d');\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    var gradient = ctx.createLinearGradient(0, 0, canvas.width, 0);\n    var colors = this.colors,\n      valueOffset = this.valueOffset;\n    for (var i = 0, len = colors.length; i < len; i++) {\n      var _colors$i = colors[i],\n        stop = _colors$i[0],\n        color = _colors$i[1];\n      var s = (stop - this.min) / valueOffset;\n      gradient.addColorStop(s, color);\n    }\n    ctx.fillStyle = gradient;\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n    this.imgData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n  };\n  _proto.getColor = function getColor(stop) {\n    stop = Math.max(this.min, stop);\n    stop = Math.min(stop, this.max);\n    var s = (stop - this.min) / this.valueOffset;\n    var x = Math.round(s * this.imgData.width);\n    x = Math.min(x, this.imgData.width - 1);\n    var idx = x * 4;\n    var r = this.imgData.data[idx];\n    var g = this.imgData.data[idx + 1];\n    var b = this.imgData.data[idx + 2];\n    var a = this.imgData.data[idx + 3];\n    return [r, g, b, a];\n  };\n  return ColorIn;\n}();\n\nvar isMapSupported = typeof Map === 'function';\nvar colorInCache;\nif (isMapSupported) {\n  colorInCache = new Map();\n}\nfunction createFunction(parameters, defaultType) {\n  var fun;\n  var isFeatureConstant, isZoomConstant;\n  if (!isFunctionDefinition(parameters)) {\n    fun = function fun() {\n      return parameters;\n    };\n    isFeatureConstant = true;\n    isZoomConstant = true;\n  } else {\n    var zoomAndFeatureDependent = parameters.stops && typeof parameters.stops[0][0] === 'object';\n    var featureDependent = zoomAndFeatureDependent || parameters.property !== undefined;\n    var zoomDependent = zoomAndFeatureDependent || !featureDependent;\n    var type = parameters.type || defaultType || 'exponential';\n    var innerFun;\n    if (type === 'exponential') {\n      innerFun = evaluateExponentialFunction;\n    } else if (type === 'interval') {\n      innerFun = evaluateIntervalFunction;\n    } else if (type === 'categorical') {\n      innerFun = evaluateCategoricalFunction;\n    } else if (type === 'identity') {\n      innerFun = evaluateIdentityFunction;\n    } else if (type === 'color-interpolate') {\n      innerFun = evaluateColorInterpolateFunction;\n    } else {\n      throw new Error('Unknown function type \"' + type + '\"');\n    }\n    if (zoomAndFeatureDependent) {\n      var featureFunctions = {};\n      var featureFunctionStops = [];\n      for (var s = 0; s < parameters.stops.length; s++) {\n        var stop = parameters.stops[s];\n        if (featureFunctions[stop[0].zoom] === undefined) {\n          featureFunctions[stop[0].zoom] = {\n            zoom: stop[0].zoom,\n            type: parameters.type,\n            property: parameters.property,\n            default: parameters.default,\n            stops: []\n          };\n        }\n        featureFunctions[stop[0].zoom].stops.push([stop[0].value, stop[1]]);\n      }\n      for (var z in featureFunctions) {\n        featureFunctionStops.push([featureFunctions[z].zoom, createFunction(featureFunctions[z])]);\n      }\n      fun = function fun(zoom, feature) {\n        var value = evaluateExponentialFunction({\n          stops: featureFunctionStops,\n          base: parameters.base\n        }, zoom)(zoom, feature);\n        return typeof value === 'function' ? value(zoom, feature) : value;\n      };\n      isFeatureConstant = false;\n      isZoomConstant = false;\n    } else if (zoomDependent) {\n      fun = function fun(zoom) {\n        var value = innerFun(parameters, zoom);\n        return typeof value === 'function' ? value(zoom) : value;\n      };\n      isFeatureConstant = true;\n      isZoomConstant = false;\n    } else {\n      fun = function fun(zoom, feature) {\n        var value = innerFun(parameters, feature ? feature[parameters.property] : null);\n        return typeof value === 'function' ? value(zoom, feature) : value;\n      };\n      isFeatureConstant = false;\n      isZoomConstant = true;\n    }\n  }\n  fun.isZoomConstant = isZoomConstant;\n  fun.isFeatureConstant = isFeatureConstant;\n  return fun;\n}\nfunction coalesce(a, b, c) {\n  if (a !== undefined) return a;\n  if (b !== undefined) return b;\n  if (c !== undefined) return c;\n  return null;\n}\nfunction evaluateCategoricalFunction(parameters, input) {\n  for (var i = 0; i < parameters.stops.length; i++) {\n    if (input === parameters.stops[i][0]) {\n      return parameters.stops[i][1];\n    }\n  }\n  return parameters.default;\n}\nfunction evaluateIntervalFunction(parameters, input) {\n  for (var i = 0; i < parameters.stops.length; i++) {\n    if (input < parameters.stops[i][0]) break;\n  }\n  return parameters.stops[Math.max(i - 1, 0)][1];\n}\nfunction evaluateExponentialFunction(parameters, input) {\n  var base = parameters.base !== undefined ? parameters.base : 1;\n  var i = 0;\n  while (true) {\n    if (i >= parameters.stops.length) break;else if (input <= parameters.stops[i][0]) break;else i++;\n  }\n  if (i === 0) {\n    return parameters.stops[i][1];\n  } else if (i === parameters.stops.length) {\n    return parameters.stops[i - 1][1];\n  } else {\n    return interpolate$1(input, base, parameters.stops[i - 1][0], parameters.stops[i][0], parameters.stops[i - 1][1], parameters.stops[i][1]);\n  }\n}\nvar COLORIN_OPTIONS = {\n  width: 100,\n  height: 1\n};\nfunction evaluateColorInterpolateFunction(parameters, input) {\n  var stops = parameters.stops;\n  if (stops && stops.length > 1) {\n    var colorIn;\n    if (colorInCache) {\n      var key = JSON.stringify(stops);\n      if (!colorInCache.has(key)) {\n        var _colorIn = new ColorIn(stops, COLORIN_OPTIONS);\n        colorInCache.set(key, _colorIn);\n      }\n      colorIn = colorInCache.get(key);\n    } else {\n      colorIn = new ColorIn(stops, COLORIN_OPTIONS);\n    }\n    var _colorIn$getColor = colorIn.getColor(input),\n      r = _colorIn$getColor[0],\n      g = _colorIn$getColor[1],\n      b = _colorIn$getColor[2],\n      a = _colorIn$getColor[3];\n    return [r / 255, g / 255, b / 255, a / 255];\n  } else if (stops && stops.length === 1) {\n    return stops[0][1];\n  }\n  return null;\n}\nfunction evaluateIdentityFunction(parameters, input) {\n  return coalesce(input, parameters.default);\n}\nfunction interpolate$1(input, base, inputLower, inputUpper, outputLower, outputUpper) {\n  if (typeof outputLower === 'function') {\n    return function () {\n      var evaluatedLower = outputLower.apply(undefined, arguments);\n      var evaluatedUpper = outputUpper.apply(undefined, arguments);\n      return interpolate$1(input, base, inputLower, inputUpper, evaluatedLower, evaluatedUpper);\n    };\n  } else if (outputLower.length) {\n    return interpolateArray(input, base, inputLower, inputUpper, outputLower, outputUpper);\n  } else {\n    return interpolateNumber(input, base, inputLower, inputUpper, outputLower, outputUpper);\n  }\n}\nfunction interpolateNumber(input, base, inputLower, inputUpper, outputLower, outputUpper) {\n  var difference = inputUpper - inputLower;\n  var progress = input - inputLower;\n  var ratio;\n  if (base === 1) {\n    ratio = progress / difference;\n  } else {\n    ratio = (Math.pow(base, progress) - 1) / (Math.pow(base, difference) - 1);\n  }\n  return outputLower * (1 - ratio) + outputUpper * ratio;\n}\nfunction interpolateArray(input, base, inputLower, inputUpper, outputLower, outputUpper) {\n  var output = [];\n  for (var i = 0; i < outputLower.length; i++) {\n    output[i] = interpolateNumber(input, base, inputLower, inputUpper, outputLower[i], outputUpper[i]);\n  }\n  return output;\n}\nfunction isFunctionDefinition(obj) {\n  return obj && typeof obj === 'object' && (obj.stops || obj.property && obj.type === 'identity');\n}\nfunction hasFunctionDefinition(obj) {\n  for (var p in obj) {\n    if (isFunctionDefinition(obj[p])) {\n      return true;\n    }\n  }\n  return false;\n}\nfunction interpolated(parameters) {\n  return createFunction1(parameters, 'exponential');\n}\nfunction piecewiseConstant(parameters) {\n  return createFunction1(parameters, 'interval');\n}\nfunction loadFunctionTypes(obj, argFn) {\n  if (!obj) {\n    return null;\n  }\n  var hit = false;\n  if (Array.isArray(obj)) {\n    var multResult = [],\n      loaded;\n    for (var i = 0; i < obj.length; i++) {\n      loaded = loadFunctionTypes(obj[i], argFn);\n      if (!loaded) {\n        multResult.push(obj[i]);\n      } else {\n        multResult.push(loaded);\n        hit = true;\n      }\n    }\n    return hit ? multResult : obj;\n  }\n  var result = {\n      '__fn_types_loaded': true\n    },\n    props = [],\n    p;\n  for (p in obj) {\n    if (obj.hasOwnProperty(p)) {\n      props.push(p);\n    }\n  }\n  var buildFn = function buildFn(p) {\n    Object.defineProperty(result, p, {\n      get: function get() {\n        if (!this['__fn_' + p]) {\n          this['__fn_' + p] = interpolated(this['_' + p]);\n        }\n        return this['__fn_' + p].apply(this, argFn());\n      },\n      set: function set(v) {\n        this['_' + p] = v;\n      },\n      configurable: true,\n      enumerable: true\n    });\n  };\n  for (var _i = 0, len = props.length; _i < len; _i++) {\n    p = props[_i];\n    if (isFunctionDefinition(obj[p])) {\n      hit = true;\n      result['_' + p] = obj[p];\n      buildFn(p);\n    } else {\n      result[p] = obj[p];\n    }\n  }\n  return hit ? result : obj;\n}\nfunction getFunctionTypeResources(t) {\n  if (!t || !t.stops) {\n    return [];\n  }\n  var res = [];\n  for (var i = 0, l = t.stops.length; i < l; i++) {\n    res.push(t.stops[i][1]);\n  }\n  return res;\n}\nfunction createFunction1(parameters, defaultType) {\n  if (!isFunctionDefinition(parameters)) {\n    return function () {\n      return parameters;\n    };\n  }\n  parameters = JSON.parse(JSON.stringify(parameters));\n  var isZoomConstant = true;\n  var isFeatureConstant = true;\n  var stops = parameters.stops;\n  if (stops) {\n    for (var i = 0; i < stops.length; i++) {\n      if (isFunctionDefinition(stops[i][1])) {\n        var _fn = createFunction1(stops[i][1], defaultType);\n        isZoomConstant = isZoomConstant && _fn.isZoomConstant;\n        isFeatureConstant = isFeatureConstant && _fn.isFeatureConstant;\n        stops[i] = [stops[i][0], _fn];\n      }\n    }\n  }\n  var fn = createFunction(parameters, defaultType);\n  fn.isZoomConstant = isZoomConstant && fn.isZoomConstant;\n  fn.isFeatureConstant = isFeatureConstant && fn.isFeatureConstant;\n  return fn;\n}\n\nvar types = ['Unknown', 'Point', 'LineString', 'Polygon', 'MultiPoint', 'MultiLineString', 'MultiPolygon', 'GeometryCollection'];\nfunction isObject$1(obj) {\n  return typeof obj === 'object' && !!obj;\n}\nfunction createFilter(filter) {\n  return new Function('f', \"var p = (f && f.properties || {}); return \" + compile(filter));\n}\nfunction isFeatureFilter(filter) {\n  if (filter === true || filter === false) {\n    return true;\n  }\n  if (!Array.isArray(filter) || filter.length === 0) {\n    return false;\n  }\n  switch (filter[0]) {\n    case 'has':\n    case '!has':\n      return filter.length === 2 && (typeof filter[1] === 'string' || filter[1].property && filter[1].op);\n    case 'in':\n    case '!in':\n      return filter.length >= 2 && (typeof filter[1] === 'string' || filter[1].property && filter[1].op);\n    case '==':\n    case '!=':\n    case '>':\n    case '>=':\n    case '<':\n    case '<=':\n      return filter.length === 3 && (typeof filter[1] === 'string' || filter[1].property && filter[1].op);\n    case 'none':\n    case 'any':\n    case 'all':\n      for (var _iterator = filter.slice(1), _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n        var _ref;\n        if (_isArray) {\n          if (_i >= _iterator.length) break;\n          _ref = _iterator[_i++];\n        } else {\n          _i = _iterator.next();\n          if (_i.done) break;\n          _ref = _i.value;\n        }\n        var f = _ref;\n        if (!isFeatureFilter(f) && typeof f !== 'boolean') {\n          return false;\n        }\n      }\n      return true;\n    case 'contains':\n      return true;\n    default:\n      return false;\n  }\n}\nfunction compile(filter) {\n  if (!filter) return 'true';\n  var op = filter[0];\n  if (filter.length <= 1) return op === 'any' ? 'false' : 'true';\n  var str = op === '==' ? compileComparisonOp(filter[1], filter[2], '===', false) : op === '!=' ? compileComparisonOp(filter[1], filter[2], '!==', false) : op === '<' || op === '>' || op === '<=' || op === '>=' ? compileComparisonOp(filter[1], filter[2], op, true) : op === 'any' ? compileLogicalOp(filter.slice(1), '||') : op === 'all' ? compileLogicalOp(filter.slice(1), '&&') : op === 'none' ? compileNegation(compileLogicalOp(filter.slice(1), '||')) : op === 'in' ? compileInOp(filter[1], filter.slice(2)) : op === '!in' ? compileNegation(compileInOp(filter[1], filter.slice(2))) : op === 'has' ? compileHasOp(filter[1]) : op === '!has' ? compileNegation(compileHasOp(filter[1])) : op === 'contains' ? compileContains(filter[1], filter[2], filter[3]) : 'true';\n  return \"(\" + str + \")\";\n}\nfunction compileFunction(propertyObj, value, op, checkType) {\n  var property = propertyObj.property,\n    funName = propertyObj.op;\n  var left = compilePropertyReference(property);\n  if (funName === 'length') {\n    left = \"((\" + left + \"+='').length)\";\n  } else {\n    console.error(\"not support \" + funName + \" op\");\n    return 'false';\n  }\n  return getComparisonCode(left, property, value, op, checkType);\n}\nfunction compileContains(property, str, index) {\n  var prop = compilePropertyReference(property);\n  if (index !== undefined) {\n    return \"(\" + prop + \" + '').indexOf(\\\"\" + str + \"\\\") === \" + index;\n  } else {\n    return \"(\" + prop + \" + '').indexOf(\\\"\" + str + \"\\\") >= 0\";\n  }\n}\nfunction compilePropertyReference(property) {\n  return property[0] === '$' ? 'f.' + property.substring(1) : 'p[' + JSON.stringify(property) + ']';\n}\nfunction compileComparisonOp(property, value, op, checkType) {\n  if (isObject$1(property) && property.op) {\n    return compileFunction(property, value, op, checkType);\n  }\n  var left = compilePropertyReference(property);\n  return getComparisonCode(left, property, value, op, checkType);\n}\nfunction getComparisonCode(left, property, value, op, checkType) {\n  var right = property === '$type' ? types.indexOf(value) : JSON.stringify(value);\n  return (checkType ? \"typeof \" + left + \"=== typeof \" + right + \"&&\" : '') + left + op + right;\n}\nfunction compileLogicalOp(expressions, op) {\n  return expressions.map(compile).join(op);\n}\nfunction compileInOp(property, values) {\n  if (property === '$type') values = values.map(function (value) {\n    return types.indexOf(value);\n  });\n  var left = JSON.stringify(values.sort(compare));\n  var right = compilePropertyReference(property);\n  if (values.length <= 200) return left + \".indexOf(\" + right + \") !== -1\";\n  return \"function(v, a, i, j) {\\n        while (i <= j) { var m = (i + j) >> 1;\\n            if (a[m] === v) return true; if (a[m] > v) j = m - 1; else i = m + 1;\\n        }\\n    return false; }(\" + right + \", \" + left + \",0,\" + (values.length - 1) + \")\";\n}\nfunction compileHasOp(property) {\n  return property === '$id' ? '\"id\" in f' : JSON.stringify(property) + \" in p\";\n}\nfunction compileNegation(expression) {\n  return \"!(\" + expression + \")\";\n}\nfunction compare(a, b) {\n  return a < b ? -1 : a > b ? 1 : 0;\n}\nfunction getFilterFeature(geometry) {\n  var json = geometry._toJSON(),\n    g = json['feature'];\n  g['type'] = types.indexOf(g['geometry']['type']);\n  g['subType'] = json['subType'];\n  return g;\n}\nfunction compileStyle(styles) {\n  if (!Array.isArray(styles)) {\n    return compileStyle([styles]);\n  }\n  var compiled = [];\n  for (var i = 0; i < styles.length; i++) {\n    var filter = void 0;\n    if (styles[i]['filter'] === true) {\n      filter = function filter() {\n        return true;\n      };\n    } else {\n      filter = createFilter(styles[i]['filter']);\n    }\n    compiled.push(extend$1({}, styles[i], {\n      filter: filter\n    }));\n  }\n  return compiled;\n}\nfunction extend$1(dest) {\n  for (var i = 1; i < arguments.length; i++) {\n    var src = arguments[i];\n    for (var k in src) {\n      dest[k] = src[k];\n    }\n  }\n  return dest;\n}\n\nvar arr = [],\n  prop = {};\nfunction loadGeoSymbol(symbol, geo) {\n  return loadFunctionTypes(symbol, function () {\n    var map = geo.getMap();\n    return set$1(arr, map ? map.getZoom() : 12, extend({}, geo.getProperties(), setProp(prop, map && map.getBearing() || 0, map && map.getPitch() || 0, map ? map.getZoom() : 10)));\n  });\n}\nfunction set$1(arr, a0, a1) {\n  arr[0] = a0;\n  arr[1] = a1;\n  return arr;\n}\nfunction setProp(prop, b, p, z) {\n  prop['{bearing}'] = b;\n  prop['{pitch}'] = p;\n  prop['{zoom}'] = z;\n  return prop;\n}\n\nvar index = /*#__PURE__*/Object.freeze({\n  loadGeoSymbol: loadGeoSymbol,\n  createFilter: createFilter,\n  isFeatureFilter: isFeatureFilter,\n  getFilterFeature: getFilterFeature,\n  compileStyle: compileStyle,\n  isFunctionDefinition: isFunctionDefinition,\n  hasFunctionDefinition: hasFunctionDefinition,\n  interpolated: interpolated,\n  piecewiseConstant: piecewiseConstant,\n  loadFunctionTypes: loadFunctionTypes,\n  getFunctionTypeResources: getFunctionTypeResources\n});\n\nfunction translateToSVGStyles(s) {\n  var result = {\n    'stroke': {\n      'stroke': s['markerLineColor'],\n      'stroke-width': s['markerLineWidth'],\n      'stroke-opacity': s['markerLineOpacity'],\n      'stroke-dasharray': null,\n      'stroke-linecap': 'butt',\n      'stroke-linejoin': 'round'\n    },\n    'fill': {\n      'fill': s['markerFill'],\n      'fill-opacity': s['markerFillOpacity']\n    }\n  };\n  if (result['stroke']['stroke-width'] === 0) {\n    result['stroke']['stroke-opacity'] = 0;\n  }\n  return result;\n}\nfunction getMarkerPathBase64(symbol, width, height) {\n  if (!symbol['markerPath']) {\n    return null;\n  }\n  var op = 1;\n  var styles = translateToSVGStyles(symbol);\n  if (isNumber(symbol['markerOpacity'])) {\n    op = symbol['markerOpacity'];\n  }\n  if (isNumber(symbol['opacity'])) {\n    op *= symbol['opacity'];\n  }\n  var svgStyles = {};\n  if (styles) {\n    for (var p in styles['stroke']) {\n      if (styles['stroke'].hasOwnProperty(p)) {\n        if (!isNil(styles['stroke'][p])) {\n          svgStyles[p] = styles['stroke'][p];\n        }\n      }\n    }\n    for (var _p in styles['fill']) {\n      if (styles['fill'].hasOwnProperty(_p)) {\n        if (!isNil(styles['fill'][_p])) {\n          svgStyles[_p] = styles['fill'][_p];\n        }\n      }\n    }\n  }\n  var pathes = Array.isArray(symbol['markerPath']) ? symbol['markerPath'] : [symbol['markerPath']];\n  var path;\n  var pathesToRender = [];\n  for (var i = 0; i < pathes.length; i++) {\n    path = isString(pathes[i]) ? {\n      'path': pathes[i]\n    } : pathes[i];\n    path = extend({}, path, svgStyles);\n    path['d'] = path['path'];\n    delete path['path'];\n    pathesToRender.push(path);\n  }\n  var svg = ['<svg version=\"1.1\"', 'xmlns=\"http://www.w3.org/2000/svg\"'];\n  if (op < 1) {\n    svg.push('opacity=\"' + op + '\"');\n  }\n  if (symbol['markerPathWidth'] && symbol['markerPathHeight']) {\n    svg.push('viewBox=\"0 0 ' + symbol['markerPathWidth'] + ' ' + symbol['markerPathHeight'] + '\"');\n  }\n  svg.push('preserveAspectRatio=\"none\"');\n  if (width) {\n    svg.push('width=\"' + width + '\"');\n  }\n  if (height) {\n    svg.push('height=\"' + height + '\"');\n  }\n  svg.push('><defs></defs>');\n  for (var _i = 0; _i < pathesToRender.length; _i++) {\n    var strPath = '<path ';\n    for (var _p2 in pathesToRender[_i]) {\n      if (pathesToRender[_i].hasOwnProperty(_p2)) {\n        strPath += ' ' + _p2 + '=\"' + pathesToRender[_i][_p2] + '\"';\n      }\n    }\n    strPath += '></path>';\n    svg.push(strPath);\n  }\n  svg.push('</svg>');\n  var b64 = 'data:image/svg+xml;base64,' + btoa$1(svg.join(' '));\n  return b64;\n}\nfunction getExternalResources(symbol, toAbsolute) {\n  if (!symbol) {\n    return [];\n  }\n  var symbols = symbol;\n  if (!Array.isArray(symbol)) {\n    symbols = [symbol];\n  }\n  var resources = [];\n  var props = RESOURCE_PROPERTIES;\n  var res, resSizeProp;\n  var w, h;\n  for (var i = symbols.length - 1; i >= 0; i--) {\n    symbol = symbols[i];\n    if (!symbol) {\n      continue;\n    }\n    if (toAbsolute) {\n      symbol = convertResourceUrl(symbol);\n    }\n    for (var ii = 0; ii < props.length; ii++) {\n      res = symbol[props[ii]];\n      if (isFunctionDefinition(res)) {\n        res = getFunctionTypeResources(res);\n      }\n      if (!res) {\n        continue;\n      }\n      if (!Array.isArray(res)) {\n        res = [res];\n      }\n      for (var iii = 0; iii < res.length; iii++) {\n        if (res[iii].slice(0, 4) === 'url(') {\n          res[iii] = extractCssUrl(res[iii]);\n        }\n        resSizeProp = RESOURCE_SIZE_PROPERTIES[ii];\n        resources.push([res[iii], symbol[resSizeProp[0]], symbol[resSizeProp[1]]]);\n      }\n    }\n    if (symbol['markerType'] === 'path' && symbol['markerPath']) {\n      w = isFunctionDefinition(symbol['markerWidth']) ? 200 : symbol['markerWidth'];\n      h = isFunctionDefinition(symbol['markerHeight']) ? 200 : symbol['markerHeight'];\n      if (isFunctionDefinition(symbol['markerPath'])) {\n        res = getFunctionTypeResources(symbol['markerPath']);\n        var path = symbol['markerPath'];\n        for (var _iii = 0; _iii < res.length; _iii++) {\n          symbol['markerPath'] = res[_iii];\n          resources.push([getMarkerPathBase64(symbol), w, h]);\n        }\n        symbol['markerPath'] = path;\n      } else {\n        resources.push([getMarkerPathBase64(symbol), w, h]);\n      }\n    }\n  }\n  return resources;\n}\nfunction convertResourceUrl(symbol) {\n  if (!symbol) {\n    return null;\n  }\n  var s = symbol;\n  if (IS_NODE) {\n    return s;\n  }\n  var props = RESOURCE_PROPERTIES;\n  var res;\n  for (var ii = 0, len = props.length; ii < len; ii++) {\n    res = s[props[ii]];\n    if (!res) {\n      continue;\n    }\n    s[props[ii]] = _convertUrl(res);\n  }\n  return s;\n}\nfunction _convertUrl(res) {\n  if (isFunctionDefinition(res)) {\n    var stops = res.stops;\n    for (var i = 0; i < stops.length; i++) {\n      stops[i][1] = _convertUrl(stops[i][1]);\n    }\n    return res;\n  }\n  if (res.slice(0, 4) === 'url(') {\n    res = extractCssUrl(res);\n  }\n  return res;\n}\n\nvar Size = function () {\n  function Size(width, height) {\n    if (isNumber(width) && isNumber(height)) {\n      this.width = width;\n      this.height = height;\n    } else if (isNumber(width['width'])) {\n      this.width = width.width;\n      this.height = width.height;\n    } else if (Array.isArray(width)) {\n      this.width = width[0];\n      this.height = width[1];\n    }\n  }\n  var _proto = Size.prototype;\n  _proto.copy = function copy() {\n    return new Size(this['width'], this['height']);\n  };\n  _proto.add = function add(x, y) {\n    var w, h;\n    if (x instanceof Size) {\n      w = this.width + x.width;\n      h = this.height + x.height;\n    } else {\n      w = this.width + x;\n      h = this.height + y;\n    }\n    return new Size(w, h);\n  };\n  _proto.equals = function equals(size) {\n    return this['width'] === size['width'] && this['height'] === size['height'];\n  };\n  _proto.multi = function multi(ratio) {\n    return new Size(this['width'] * ratio, this['height'] * ratio);\n  };\n  _proto._multi = function _multi(ratio) {\n    this['width'] *= ratio;\n    this['height'] *= ratio;\n    return this;\n  };\n  _proto._round = function _round() {\n    this['width'] = Math.round(this['width']);\n    this['height'] = Math.round(this['height']);\n    return this;\n  };\n  _proto.toPoint = function toPoint() {\n    return new Point(this['width'], this['height']);\n  };\n  _proto.toArray = function toArray() {\n    return [this['width'], this['height']];\n  };\n  _proto.toJSON = function toJSON() {\n    return {\n      'width': this['width'],\n      'height': this['height']\n    };\n  };\n  return Size;\n}();\n\nfunction trim(str) {\n  return str.trim ? str.trim() : str.replace(/^\\s+|\\s+$/g, '');\n}\nvar specialPattern = /[\\b\\t\\r\\v\\f]/igm;\nfunction escapeSpecialChars(str) {\n  if (!isString(str)) {\n    return str;\n  }\n  return str.replace(specialPattern, '');\n}\nfunction splitWords(chr) {\n  return trim(chr).split(/\\s+/);\n}\nvar rulerCtx = typeof document !== 'undefined' ? document.createElement('canvas').getContext('2d') : null;\nfunction stringWidth(text, font) {\n  if (stringWidth.node) {\n    return stringWidth.node(text, font);\n  }\n  rulerCtx.font = font;\n  return rulerCtx.measureText(text).width;\n}\nfunction stringLength(text, font, size) {\n  var w = stringWidth(text, font);\n  return new Size(w, size || DEFAULT_TEXT_SIZE);\n}\nfunction splitContent(content, font, wrapWidth, textWidth) {\n  if (!content || content.length === 0) {\n    return [{\n      'text': '',\n      'width': 0\n    }];\n  }\n  var width = isNil(textWidth) ? stringWidth(content, font) : textWidth;\n  var chrWidth = width / content.length,\n    minChrCount = Math.floor(wrapWidth / chrWidth / 2);\n  if (chrWidth >= wrapWidth || minChrCount <= 0) {\n    return [{\n      'text': '',\n      'width': wrapWidth\n    }];\n  }\n  if (width <= wrapWidth) return [{\n    'text': content,\n    'width': width\n  }];\n  var result = [];\n  var testStr = content.substring(0, minChrCount),\n    prew = chrWidth * minChrCount;\n  for (var i = minChrCount, l = content.length; i < l; i++) {\n    var chr = content[i];\n    var w = stringWidth(testStr + chr);\n    if (w >= wrapWidth) {\n      result.push({\n        'text': testStr,\n        'width': prew\n      });\n      testStr = content.substring(i, minChrCount + i);\n      i += minChrCount - 1;\n      prew = chrWidth * minChrCount;\n    } else {\n      testStr += chr;\n      prew = w;\n    }\n    if (i >= l - 1) {\n      prew = stringWidth(testStr);\n      result.push({\n        'text': testStr,\n        'width': prew\n      });\n    }\n  }\n  return result;\n}\nvar CONTENT_EXPRE = /\\{([\\w_]+)\\}/g;\nfunction replaceVariable(str, props) {\n  if (!isString(str)) {\n    return str;\n  }\n  return str.replace(CONTENT_EXPRE, function (str, key) {\n    if (!props) {\n      return '';\n    }\n    var value = props[key];\n    if (isNil(value)) {\n      return '';\n    } else if (Array.isArray(value)) {\n      return value.join();\n    }\n    return value;\n  });\n}\nfunction describeText(textContent, symbol) {\n  if (isNumber(textContent)) {\n    textContent += '';\n  }\n  textContent = textContent || '';\n  var maxHeight = symbol['textMaxHeight'] || 0;\n  var textDesc = splitTextToRow(textContent, symbol);\n  if (maxHeight && maxHeight < textDesc.size.height) {\n    textDesc.size.height = maxHeight;\n  }\n  return textDesc;\n}\nfunction getAlignPoint(size, horizontalAlignment, verticalAlignment) {\n  var width = size['width'],\n    height = size['height'];\n  var alignW, alignH;\n  if (horizontalAlignment === 'left') {\n    alignW = -width;\n  } else if (horizontalAlignment === 'right') {\n    alignW = 0;\n  } else {\n    alignW = -width / 2;\n  }\n  if (verticalAlignment === 'top') {\n    alignH = -height;\n  } else if (verticalAlignment === 'bottom') {\n    alignH = 0;\n  } else {\n    alignH = -height / 2;\n  }\n  return new Point(alignW, alignH);\n}\nvar DEFAULT_FONT = 'monospace';\nfunction getFont(style) {\n  if (style['textFont']) {\n    return style['textFont'];\n  } else {\n    return (style['textStyle'] && style['textStyle'] !== 'normal' ? style['textStyle'] + ' ' : '') + (style['textWeight'] && style['textWeight'] !== 'normal' ? style['textWeight'] + ' ' : '') + style['textSize'] + 'px ' + (!style['textFaceName'] ? DEFAULT_FONT : style['textFaceName'][0] === '\"' ? style['textFaceName'] : '\"' + style['textFaceName'] + '\"');\n  }\n}\nfunction splitTextToRow(text, style) {\n  var font = getFont(style),\n    lineSpacing = style['textLineSpacing'] || 0,\n    size = stringLength(text, font, style['textSize']),\n    textWidth = size['width'],\n    textHeight = size['height'],\n    wrapChar = style['textWrapCharacter'],\n    textRows = [];\n  var wrapWidth = style['textWrapWidth'];\n  if (!wrapWidth || wrapWidth > textWidth) {\n    wrapWidth = textWidth;\n  }\n  if (!isString(text)) {\n    text += '';\n  }\n  var actualWidth = 0;\n  if (wrapChar && text.indexOf(wrapChar) >= 0) {\n    var texts = text.split(wrapChar);\n    for (var i = 0, l = texts.length; i < l; i++) {\n      var t = texts[i];\n      var tWidth = stringWidth(t, font);\n      if (tWidth > wrapWidth) {\n        var contents = splitContent(t, font, wrapWidth, tWidth);\n        for (var ii = 0, ll = contents.length; ii < ll; ii++) {\n          var w = contents[ii].width;\n          if (w > actualWidth) {\n            actualWidth = w;\n          }\n          textRows.push({\n            'text': contents[ii].text,\n            'size': new Size(w, textHeight)\n          });\n        }\n      } else {\n        if (tWidth > actualWidth) {\n          actualWidth = tWidth;\n        }\n        textRows.push({\n          'text': t,\n          'size': new Size(tWidth, textHeight)\n        });\n      }\n    }\n  } else if (textWidth > wrapWidth) {\n    var _contents = splitContent(text, font, wrapWidth, textWidth);\n    for (var _i = 0; _i < _contents.length; _i++) {\n      var _w = _contents[_i].width;\n      if (_w > actualWidth) {\n        actualWidth = _w;\n      }\n      textRows.push({\n        'text': _contents[_i].text,\n        'size': new Size(_w, textHeight)\n      });\n    }\n  } else {\n    if (textWidth > actualWidth) {\n      actualWidth = textWidth;\n    }\n    textRows.push({\n      'text': text,\n      'size': size\n    });\n  }\n  var rowNum = textRows.length;\n  var textSize = new Size(actualWidth, textHeight * rowNum + lineSpacing * (rowNum - 1));\n  return {\n    'total': rowNum,\n    'size': textSize,\n    'rows': textRows,\n    'rawSize': size\n  };\n}\nfunction hashCode(s) {\n  var hash = 0;\n  var strlen = s && s.length || 0;\n  if (!strlen) {\n    return hash;\n  }\n  var c;\n  for (var i = 0; i < strlen; i++) {\n    c = s.charCodeAt(i);\n    hash = (hash << 5) - hash + c;\n    hash = hash & hash;\n  }\n  return hash;\n}\n\nvar strings = /*#__PURE__*/Object.freeze({\n  trim: trim,\n  escapeSpecialChars: escapeSpecialChars,\n  splitWords: splitWords,\n  stringWidth: stringWidth,\n  stringLength: stringLength,\n  splitContent: splitContent,\n  CONTENT_EXPRE: CONTENT_EXPRE,\n  replaceVariable: replaceVariable,\n  describeText: describeText,\n  getAlignPoint: getAlignPoint,\n  getFont: getFont,\n  splitTextToRow: splitTextToRow,\n  hashCode: hashCode\n});\n\nfunction isGradient(g) {\n  return g && g['colorStops'];\n}\nfunction getGradientStamp(g) {\n  var keys = [g['type']];\n  if (g['places']) {\n    keys.push(g['places'].join());\n  }\n  if (g['colorStops']) {\n    var stops = [];\n    for (var i = g['colorStops'].length - 1; i >= 0; i--) {\n      stops.push(g['colorStops'][i].join());\n    }\n    keys.push(stops.join(','));\n  }\n  return keys.join('_');\n}\nfunction getSymbolStamp(symbol, prefix) {\n  return getSymbolHash(symbol, prefix);\n}\nfunction getSymbolHash(symbol, prefix) {\n  if (!symbol) {\n    return 1;\n  }\n  var keys = [];\n  if (Array.isArray(symbol)) {\n    for (var i = 0; i < symbol.length; i++) {\n      keys.push(getSymbolHash(symbol[i], prefix));\n    }\n    return keys.sort().join(',');\n  }\n  var sortedKeys = Object.keys(symbol).sort();\n  var sortedSymbol = sortedKeys.reduce(function (accumulator, curValue) {\n    if (!prefix || curValue.indexOf(prefix) === 0) {\n      accumulator[curValue] = symbol[curValue];\n    }\n    return accumulator;\n  }, {});\n  var hash = hashCode(JSON.stringify(sortedSymbol));\n  return hash;\n}\nfunction lowerSymbolOpacity(symbol, ratio) {\n  function s(_symbol, _ratio) {\n    var op = _symbol['opacity'];\n    if (isNil(op)) {\n      _symbol['opacity'] = _ratio;\n    } else {\n      _symbol['opacity'] *= _ratio;\n    }\n  }\n  var lower;\n  if (Array.isArray(symbol)) {\n    lower = [];\n    for (var i = 0; i < symbol.length; i++) {\n      var d = extend({}, symbol[i]);\n      s(d, ratio);\n      lower.push(d);\n    }\n  } else {\n    lower = extend({}, symbol);\n    s(lower, ratio);\n  }\n  return lower;\n}\nfunction extendSymbol(symbol) {\n  var sources = Array.prototype.slice.call(arguments, 1);\n  if (!sources || !sources.length) {\n    sources = [{}];\n  }\n  if (Array.isArray(symbol)) {\n    var s, dest;\n    var result = [];\n    for (var i = 0, l = symbol.length; i < l; i++) {\n      s = symbol[i];\n      dest = {};\n      for (var ii = 0, ll = sources.length; ii < ll; ii++) {\n        if (!Array.isArray(sources[ii])) {\n          extend(dest, s, sources[ii] ? sources[ii] : {});\n        } else if (!isNil(sources[ii][i])) {\n          extend(dest, s, sources[ii][i]);\n        } else {\n          extend(dest, s ? s : {});\n        }\n      }\n      result.push(dest);\n    }\n    return result;\n  } else {\n    var args = [{}, symbol];\n    args.push.apply(args, sources);\n    return extend.apply(this, args);\n  }\n}\nfunction parseStyleRootPath(style) {\n  if (style.symbol) {\n    style = [style];\n  }\n  if (Array.isArray(style)) {\n    return style;\n  }\n  var root = style['$root'];\n  var iconset = style['$iconset'];\n  style = style.style;\n  if (root || iconset) {\n    if (root && root[root.length - 1] === '/') {\n      root = root.substring(0, root.length - 1);\n    }\n    if (iconset && iconset[iconset.length - 1] === '/') {\n      iconset = iconset.substring(0, iconset.length - 1);\n    }\n    var replacer = function replacer(match) {\n      if (match === '{$root}') {\n        return root;\n      } else if (match === '{$iconset}') {\n        return iconset;\n      }\n      return null;\n    };\n    convertStylePath(style, replacer);\n  }\n  return style;\n}\nfunction convertStylePath(styles, replacer) {\n  for (var i = 0; i < styles.length; i++) {\n    var symbol = styles[i].symbol;\n    if (symbol) {\n      parseSymbolPath(symbol, replacer);\n    }\n  }\n}\nvar URL_PATTERN = /(\\{\\$root\\}|\\{\\$iconset\\})/g;\nfunction parseSymbolPath(symbol, replacer) {\n  for (var p in symbol) {\n    if (symbol.hasOwnProperty(p) && p !== 'textName') {\n      if (isString(symbol[p]) && symbol[p].length > 2) {\n        symbol[p] = symbol[p].replace(URL_PATTERN, replacer);\n      } else if (isFunctionDefinition(symbol[p])) {\n        symbol[p] = parseStops(symbol[p], replacer);\n      } else if (isObject(symbol[p])) {\n        parseSymbolPath(symbol[p], replacer);\n      }\n    }\n  }\n}\nfunction parseStops(value, replacer) {\n  var defaultValue = value['default'];\n  if (isString(defaultValue)) {\n    value['default'] = defaultValue.replace(URL_PATTERN, replacer);\n  }\n  var stops = value.stops;\n  for (var i = 0; i < stops.length; i++) {\n    if (!Array.isArray(stops[i])) {\n      continue;\n    }\n    if (isString(stops[i][1])) {\n      stops[i][1] = stops[i][1].replace(URL_PATTERN, replacer);\n    } else if (isFunctionDefinition(stops[i][1])) {\n      stops[i][1] = parseStops(stops[i][1], replacer);\n    }\n  }\n  return value;\n}\nfunction isDashLine(symbolizers) {\n  if (symbolizers === void 0) {\n    symbolizers = [];\n  }\n  if (!Array.isArray(symbolizers)) {\n    symbolizers = [symbolizers];\n  }\n  var len = symbolizers.length;\n  for (var i = 0; i < len; i++) {\n    var symbolizer = symbolizers[i];\n    if (!symbolizer.style) {\n      continue;\n    }\n    var _symbolizer$style = symbolizer.style,\n      lineDasharray = _symbolizer$style.lineDasharray,\n      lineWidth = _symbolizer$style.lineWidth;\n    if (lineWidth && isNumber(lineWidth) && lineWidth > 0 && lineDasharray && Array.isArray(lineDasharray) && lineDasharray.length) {\n      return true;\n    }\n  }\n  return false;\n}\n\n\n\nvar index$1 = /*#__PURE__*/Object.freeze({\n  now: now,\n  extend: extend,\n  isNil: isNil,\n  isNumber: isNumber,\n  isInteger: isInteger,\n  isObject: isObject,\n  isString: isString,\n  isFunction: isFunction,\n  hasOwn: hasOwn,\n  join: join,\n  isEmpty: isEmpty,\n  toRadian: toRadian,\n  toDegree: toDegree,\n  IS_NODE: IS_NODE,\n  get requestAnimFrame () { return requestAnimFrame; },\n  get cancelAnimFrame () { return cancelAnimFrame; },\n  isSVG: isSVG,\n  loadImage: loadImage,\n  UID: UID,\n  GUID: GUID,\n  parseJSON: parseJSON,\n  pushIn: pushIn,\n  removeFromArray: removeFromArray,\n  forEachCoord: forEachCoord,\n  getValueOrDefault: getValueOrDefault,\n  sign: sign,\n  log2: log2,\n  interpolate: interpolate,\n  wrap: wrap,\n  clamp: clamp,\n  isArrayHasData: isArrayHasData,\n  isURL: isURL,\n  isCssUrl: isCssUrl,\n  extractCssUrl: extractCssUrl,\n  btoa: btoa$1,\n  b64toBlob: b64toBlob,\n  computeDegree: computeDegree,\n  emptyImageUrl: emptyImageUrl,\n  equalMapView: equalMapView,\n  flash: flash,\n  _defaults: _defaults$1,\n  getPointsResultPts: getPointsResultPts,\n  getImageBitMap: getImageBitMap,\n  getAbsoluteURL: getAbsoluteURL,\n  calCanvasSize: calCanvasSize,\n  translateToSVGStyles: translateToSVGStyles,\n  getMarkerPathBase64: getMarkerPathBase64,\n  getExternalResources: getExternalResources,\n  convertResourceUrl: convertResourceUrl,\n  isGradient: isGradient,\n  getGradientStamp: getGradientStamp,\n  getSymbolStamp: getSymbolStamp,\n  getSymbolHash: getSymbolHash,\n  lowerSymbolOpacity: lowerSymbolOpacity,\n  extendSymbol: extendSymbol,\n  parseStyleRootPath: parseStyleRootPath,\n  convertStylePath: convertStylePath,\n  parseSymbolPath: parseSymbolPath,\n  isDashLine: isDashLine,\n  trim: trim,\n  escapeSpecialChars: escapeSpecialChars,\n  splitWords: splitWords,\n  stringWidth: stringWidth,\n  stringLength: stringLength,\n  splitContent: splitContent,\n  CONTENT_EXPRE: CONTENT_EXPRE,\n  replaceVariable: replaceVariable,\n  describeText: describeText,\n  getAlignPoint: getAlignPoint,\n  getFont: getFont,\n  splitTextToRow: splitTextToRow,\n  hashCode: hashCode\n});\n\nvar first = function first(props) {\n  return props[0];\n};\nvar testProp = IS_NODE ? first : function (props) {\n  var style = document.documentElement && document.documentElement.style || {};\n  for (var i = 0; i < props.length; i++) {\n    if (props[i] in style) {\n      return props[i];\n    }\n  }\n  return false;\n};\nvar TRANSFORM = testProp(['transform', 'WebkitTransform', 'OTransform', 'MozTransform', 'msTransform']);\nvar TRANSFORMORIGIN = testProp(['transformOrigin', 'WebkitTransformOrigin', 'OTransformOrigin', 'MozTransformOrigin', 'msTransformOrigin']);\nvar TRANSITION = testProp(['transition', 'WebkitTransition', 'OTransition', 'MozTransition', 'msTransition']);\nvar CSSFILTER = testProp(['filter', 'WebkitFilter', 'OFilter', 'MozFilter', 'msFilter']);\nfunction createEl(tagName, className) {\n  var el = document.createElement(tagName);\n  if (className) {\n    setClass(el, className);\n  }\n  return el;\n}\nfunction createElOn(tagName, style, container) {\n  var el = createEl(tagName);\n  if (style) {\n    setStyle(el, style);\n  }\n  if (container) {\n    container.appendChild(el);\n  }\n  return el;\n}\nfunction removeDomNode(node) {\n  if (!node) {\n    return this;\n  }\n  if (Browser$1.ielt9 || Browser$1.ie9) {\n    var d = createEl('div');\n    d.appendChild(node);\n    d.innerHTML = '';\n    d = null;\n  } else if (node.parentNode) {\n    node.parentNode.removeChild(node);\n  }\n  return this;\n}\nfunction addDomEvent(obj, typeArr, handler, context) {\n  if (!obj || !obj.addEventListener || !typeArr || !handler) {\n    return this;\n  }\n  var eventHandler = function eventHandler(e) {\n    if (!e) {\n      e = window.event;\n    }\n    handler.call(context || obj, e);\n    return;\n  };\n  var types = typeArr.split(' ');\n  for (var i = types.length - 1; i >= 0; i--) {\n    var type = types[i];\n    if (!type) {\n      continue;\n    }\n    if (!obj['Z__' + type]) {\n      obj['Z__' + type] = [];\n    }\n    var hit = listensDomEvent(obj, type, handler);\n    if (hit >= 0) {\n      console.warn(obj, \"find '\" + type + \"' handler:\", handler, ' The old listener function will be removed');\n      removeDomEvent(obj, type, handler);\n    }\n    obj['Z__' + type].push({\n      callback: eventHandler,\n      src: handler\n    });\n    obj.addEventListener(type, eventHandler, Browser$1.supportsPassive ? {\n      capture: false,\n      passive: false\n    } : false);\n  }\n  return this;\n}\nfunction removeDomEvent(obj, typeArr, handler) {\n  function doRemove(type, callback) {\n    if (type === 'mousewheel' && Browser$1.gecko) {\n      type = 'DOMMouseScroll';\n    }\n    obj.removeEventListener(type, callback, false);\n  }\n  if (!obj || !obj.removeEventListener || !typeArr) {\n    return this;\n  }\n  var types = typeArr.split(' ');\n  for (var i = types.length - 1; i >= 0; i--) {\n    var type = types[i];\n    if (!type) {\n      continue;\n    }\n    if (!handler && obj['Z__' + type]) {\n      var handlers = obj['Z__' + type];\n      for (var j = 0, jlen = handlers.length; j < jlen; j++) {\n        doRemove(handlers[j].callback);\n      }\n      delete obj['Z__' + type];\n      return this;\n    }\n    var hit = listensDomEvent(obj, type, handler);\n    if (hit < 0) {\n      return this;\n    }\n    var hitHandler = obj['Z__' + type][hit];\n    doRemove(type, hitHandler.callback);\n    obj['Z__' + type].splice(hit, 1);\n  }\n  return this;\n}\nfunction listensDomEvent(obj, type, handler) {\n  if (!obj || !obj['Z__' + type] || !handler) {\n    return -1;\n  }\n  var handlers = obj['Z__' + type];\n  for (var i = 0, len = handlers.length; i < len; i++) {\n    if (handlers[i].src === handler) {\n      return i;\n    }\n  }\n  return -1;\n}\nfunction preventDefault(event) {\n  if (event.preventDefault) {\n    event.preventDefault();\n  } else {\n    event.returnValue = false;\n  }\n  return this;\n}\nfunction stopPropagation(e) {\n  e._cancelBubble = true;\n  if (e.stopPropagation) {\n    e.stopPropagation();\n  } else {\n    e.cancelBubble = true;\n  }\n  return this;\n}\nfunction preventSelection(dom) {\n  dom.onselectstart = function () {\n    return false;\n  };\n  dom.ondragstart = function () {\n    return false;\n  };\n  dom.setAttribute('unselectable', 'on');\n  return this;\n}\nfunction offsetDom(dom, offset) {\n  if (!dom) {\n    return null;\n  }\n  if (Browser$1.any3d) {\n    setTransform(dom, offset);\n  } else {\n    dom.style.left = offset.x + 'px';\n    dom.style.top = offset.y + 'px';\n  }\n  return offset;\n}\nfunction computeDomPosition(dom) {\n  var style = window.getComputedStyle(dom);\n  var padding = [parseInt(style['padding-left']), parseInt(style['padding-top'])];\n  var rect = dom.getBoundingClientRect();\n  var offsetWidth = dom.offsetWidth,\n    offsetHeight = dom.offsetHeight;\n  var scaleX = offsetWidth ? rect.width / offsetWidth : 1,\n    scaleY = offsetHeight ? rect.height / offsetHeight : 1;\n  dom.__position = [rect.left + padding[0], rect.top + padding[1], scaleX, scaleY];\n  return dom.__position;\n}\nfunction getEventContainerPoint(ev, dom) {\n  if (!ev) {\n    ev = window.event;\n  }\n  var domPos = dom.__position;\n  if (!domPos) {\n    domPos = computeDomPosition(dom);\n  }\n  return new Point((ev.clientX - domPos[0] - dom.clientLeft) / domPos[2], (ev.clientY - domPos[1] - dom.clientTop) / domPos[3]);\n}\nfunction endsWith(str, suffix) {\n  var l = str.length - suffix.length;\n  return l >= 0 && str.indexOf(suffix, l) === l;\n}\nfunction setStyle(dom, strCss) {\n  var cssText = dom.style.cssText;\n  if (!endsWith(cssText, ';')) {\n    cssText += ';';\n  }\n  dom.style.cssText = cssText + strCss;\n  return this;\n}\nfunction hasClass(el, name) {\n  if (el.classList !== undefined) {\n    return el.classList.contains(name);\n  }\n  var className = getClass(el);\n  return className.length > 0 && new RegExp('(^|\\\\s)' + name + '(\\\\s|$)').test(className);\n}\nfunction addClass(el, name) {\n  if (el.classList !== undefined && !hasClass(el, name)) {\n    var classes = splitWords(name);\n    for (var i = 0, len = classes.length; i < len; i++) {\n      el.classList.add(classes[i]);\n    }\n  } else {\n    var className = getClass(el);\n    setClass(el, (className ? className + ' ' : '') + name);\n  }\n  return this;\n}\nfunction setClass(el, name) {\n  if (isNil(el.className.baseVal)) {\n    el.className = name;\n  } else {\n    el.className.baseVal = name;\n  }\n  return this;\n}\nfunction getClass(el) {\n  return isNil(el.className.baseVal) ? el.className : el.className.baseVal;\n}\nfunction setOpacity(el, value) {\n  el.style.opacity = value;\n  return this;\n}\nfunction setTransform(el, offset) {\n  var pos = offset || new Point(0, 0);\n  el.style[TRANSFORM] = Browser$1.any3d ? 'translate3d(' + pos.x + 'px,' + pos.y + 'px,0px)' : 'translate(' + pos.x + 'px,' + pos.y + 'px)';\n  return this;\n}\nfunction setTransformMatrix(el, m) {\n  var text = 'matrix(' + (isString(m) ? m : m.join()) + ')';\n  if (el.style[TRANSFORM] !== text) {\n    el.style[TRANSFORM] = text;\n  }\n  return this;\n}\nfunction removeTransform(el) {\n  if (el.style[TRANSFORM]) {\n    el.style[TRANSFORM] = '';\n  }\n  return this;\n}\nfunction isHTML(str) {\n  return /<[a-z\\][\\s\\S]*>/i.test(str);\n}\nfunction measureDom(parentTag, dom) {\n  var ruler = getDomRuler(parentTag);\n  if (isString(dom)) {\n    ruler.innerHTML = dom;\n  } else {\n    ruler.appendChild(dom);\n  }\n  var result = new Size(ruler.clientWidth, ruler.clientHeight);\n  removeDomNode(ruler);\n  return result;\n}\nfunction getDomRuler(tag) {\n  var span = document.createElement(tag);\n  span.style.cssText = 'position:absolute;left:-10000px;top:-10000px;';\n  document.body.appendChild(span);\n  return span;\n}\nvar on = addDomEvent;\nvar off = removeDomEvent;\nfunction isMoveEvent(type) {\n  return type && (type === 'mousemove' || type === 'touchmove');\n}\n\nvar dom = /*#__PURE__*/Object.freeze({\n  TRANSFORM: TRANSFORM,\n  TRANSFORMORIGIN: TRANSFORMORIGIN,\n  TRANSITION: TRANSITION,\n  CSSFILTER: CSSFILTER,\n  createEl: createEl,\n  createElOn: createElOn,\n  removeDomNode: removeDomNode,\n  addDomEvent: addDomEvent,\n  removeDomEvent: removeDomEvent,\n  listensDomEvent: listensDomEvent,\n  preventDefault: preventDefault,\n  stopPropagation: stopPropagation,\n  preventSelection: preventSelection,\n  offsetDom: offsetDom,\n  computeDomPosition: computeDomPosition,\n  getEventContainerPoint: getEventContainerPoint,\n  setStyle: setStyle,\n  hasClass: hasClass,\n  addClass: addClass,\n  setClass: setClass,\n  getClass: getClass,\n  setOpacity: setOpacity,\n  setTransform: setTransform,\n  setTransformMatrix: setTransformMatrix,\n  removeTransform: removeTransform,\n  isHTML: isHTML,\n  measureDom: measureDom,\n  getDomRuler: getDomRuler,\n  on: on,\n  off: off,\n  isMoveEvent: isMoveEvent\n});\n\nvar isMapSupported$1 = typeof Map === 'function';\nvar nullOnRemove = function nullOnRemove() {};\nvar ArrayLRUCache = function () {\n  function ArrayLRUCache(max, onRemove) {\n    this.max = max;\n    this.onRemove = onRemove || nullOnRemove;\n    this.reset();\n  }\n  var _proto = ArrayLRUCache.prototype;\n  _proto.reset = function reset() {\n    for (var key in this.data) {\n      this.onRemove(this.data[key]);\n    }\n    this.data = {};\n    this.order = [];\n    return this;\n  };\n  _proto.clear = function clear() {\n    this.reset();\n    delete this.onRemove;\n  };\n  _proto.add = function add(key, data) {\n    if (this.has(key)) {\n      this.order.splice(this.order.indexOf(key), 1);\n      this.data[key] = data;\n      this.order.push(key);\n    } else {\n      this.data[key] = data;\n      this.order.push(key);\n      if (this.order.length > this.max) {\n        var removedData = this.getAndRemove(this.order[0]);\n        if (removedData) this.onRemove(removedData);\n      }\n    }\n    return this;\n  };\n  _proto.has = function has(key) {\n    return key in this.data;\n  };\n  _proto.keys = function keys() {\n    return this.order;\n  };\n  _proto.getAndRemove = function getAndRemove(key) {\n    if (!this.has(key)) {\n      return null;\n    }\n    var data = this.data[key];\n    delete this.data[key];\n    this.order.splice(this.order.indexOf(key), 1);\n    return data;\n  };\n  _proto.get = function get(key) {\n    if (!this.has(key)) {\n      return null;\n    }\n    var data = this.data[key];\n    return data;\n  };\n  _proto.remove = function remove(key) {\n    if (!this.has(key)) {\n      return this;\n    }\n    var data = this.data[key];\n    delete this.data[key];\n    this.onRemove(data);\n    this.order.splice(this.order.indexOf(key), 1);\n    return this;\n  };\n  _proto.setMaxSize = function setMaxSize(max) {\n    this.max = max;\n    while (this.order.length > this.max) {\n      var removedData = this.getAndRemove(this.order[0]);\n      if (removedData) this.onRemove(removedData);\n    }\n    return this;\n  };\n  return ArrayLRUCache;\n}();\nvar MapLRUCache;\nif (isMapSupported$1) {\n  MapLRUCache = function () {\n    function MapLRUCache(max, onRemove) {\n      this.max = max;\n      this.onRemove = onRemove || nullOnRemove;\n      this.reset();\n    }\n    var _proto2 = MapLRUCache.prototype;\n    _proto2.reset = function reset() {\n      if (this.data) {\n        var values = this.data.values();\n        for (var _iterator = values, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n          var _ref;\n          if (_isArray) {\n            if (_i >= _iterator.length) break;\n            _ref = _iterator[_i++];\n          } else {\n            _i = _iterator.next();\n            if (_i.done) break;\n            _ref = _i.value;\n          }\n          var p = _ref;\n          this.onRemove(p);\n        }\n      }\n      this.data = new Map();\n      return this;\n    };\n    _proto2.clear = function clear() {\n      this.reset();\n      delete this.onRemove;\n    };\n    _proto2.add = function add(key, data) {\n      if (!data) {\n        return this;\n      }\n      if (this.has(key)) {\n        this.data.delete(key);\n        this.data.set(key, data);\n      } else {\n        this.data.set(key, data);\n      }\n      return this;\n    };\n    _proto2.keys = function keys() {\n      var keys = new Array(this.data.size);\n      var i = 0;\n      var iterator = this.data.keys();\n      for (var _iterator2 = iterator, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {\n        var _ref2;\n        if (_isArray2) {\n          if (_i2 >= _iterator2.length) break;\n          _ref2 = _iterator2[_i2++];\n        } else {\n          _i2 = _iterator2.next();\n          if (_i2.done) break;\n          _ref2 = _i2.value;\n        }\n        var k = _ref2;\n        keys[i++] = k;\n      }\n      return keys;\n    };\n    _proto2.shrink = function shrink() {\n      var iterator = this.data.keys();\n      var item = iterator.next();\n      while (this.data.size > this.max) {\n        var removedData = this.getAndRemove(item.value);\n        if (removedData) {\n          this.onRemove(removedData);\n        }\n        item = iterator.next();\n      }\n    };\n    _proto2.has = function has(key) {\n      return this.data.has(key);\n    };\n    _proto2.getAndRemove = function getAndRemove(key) {\n      if (!this.has(key)) {\n        return null;\n      }\n      var data = this.data.get(key);\n      this.data.delete(key);\n      return data;\n    };\n    _proto2.get = function get(key) {\n      if (!this.has(key)) {\n        return null;\n      }\n      var data = this.data.get(key);\n      return data;\n    };\n    _proto2.remove = function remove(key) {\n      if (!this.has(key)) {\n        return this;\n      }\n      var data = this.data.get(key);\n      this.data.delete(key);\n      this.onRemove(data);\n      return this;\n    };\n    _proto2.setMaxSize = function setMaxSize(max) {\n      this.max = max;\n      if (this.data.size > this.max) {\n        this.shrink();\n      }\n      return this;\n    };\n    return MapLRUCache;\n  }();\n}\nvar LRUCache = isMapSupported$1 ? MapLRUCache : ArrayLRUCache;\n\nvar Ajax = {\n  jsonp: function jsonp(url, callback) {\n    var name = '_maptalks_jsonp_' + UID();\n    if (url.match(/\\?/)) url += '&callback=' + name;else url += '?callback=' + name;\n    var script = document.createElement('script');\n    script.type = 'text/javascript';\n    script.src = url;\n    window[name] = function (data) {\n      callback(null, data);\n      document.getElementsByTagName('head')[0].removeChild(script);\n      script = null;\n      delete window[name];\n    };\n    document.getElementsByTagName('head')[0].appendChild(script);\n    return this;\n  },\n  get: function get(url, options, cb) {\n    if (isFunction(options)) {\n      var t = cb;\n      cb = options;\n      options = t;\n    }\n    if (IS_NODE && Ajax.get.node) {\n      return Ajax.get.node(url, cb, options);\n    }\n    var client = Ajax._getClient(cb);\n    client.open('GET', url, true);\n    if (options) {\n      for (var k in options.headers) {\n        client.setRequestHeader(k, options.headers[k]);\n      }\n      client.withCredentials = options.credentials === 'include';\n      if (options['responseType']) {\n        client.responseType = options['responseType'];\n      }\n    }\n    client.send(null);\n    return client;\n  },\n  post: function post(url, options, cb) {\n    var postData;\n    if (!isString(url)) {\n      var t = cb;\n      postData = options;\n      options = url;\n      url = options.url;\n      cb = t;\n    } else {\n      if (isFunction(options)) {\n        var _t = cb;\n        cb = options;\n        options = _t;\n      }\n      options = options || {};\n      postData = options.postData;\n    }\n    if (IS_NODE && Ajax.post.node) {\n      options.url = url;\n      return Ajax.post.node(options, postData, cb);\n    }\n    var client = Ajax._getClient(cb);\n    client.open('POST', options.url, true);\n    if (!options.headers) {\n      options.headers = {};\n    }\n    if (!options.headers['Content-Type']) {\n      options.headers['Content-Type'] = 'application/x-www-form-urlencoded';\n    }\n    if ('setRequestHeader' in client) {\n      for (var p in options.headers) {\n        if (options.headers.hasOwnProperty(p)) {\n          client.setRequestHeader(p, options.headers[p]);\n        }\n      }\n    }\n    if (!isString(postData)) {\n      postData = JSON.stringify(postData);\n    }\n    client.send(postData);\n    return client;\n  },\n  _wrapCallback: function _wrapCallback(client, cb) {\n    return function () {\n      if (client.readyState === 4) {\n        if (client.status === 200) {\n          if (client.responseType === 'arraybuffer') {\n            var response = client.response;\n            if (response.byteLength === 0) {\n              cb(new Error('http status 200 returned without content.'));\n            } else {\n              cb(null, {\n                data: client.response,\n                cacheControl: client.getResponseHeader('Cache-Control'),\n                expires: client.getResponseHeader('Expires'),\n                contentType: client.getResponseHeader('Content-Type')\n              });\n            }\n          } else {\n            cb(null, client.responseText);\n          }\n        } else {\n          cb(new Error(client.statusText + ',' + client.status));\n        }\n      }\n    };\n  },\n  _getClient: function _getClient(cb) {\n    var client;\n    try {\n      client = new XMLHttpRequest();\n    } catch (e) {\n      try {\n        client = new ActiveXObject('Msxml2.XMLHTTP');\n      } catch (e) {\n        try {\n          client = new ActiveXObject('Microsoft.XMLHTTP');\n        } catch (e) {}\n      }\n    }\n    client.onreadystatechange = Ajax._wrapCallback(client, cb);\n    return client;\n  },\n  getArrayBuffer: function getArrayBuffer(url, options, cb) {\n    if (isFunction(options)) {\n      var t = cb;\n      cb = options;\n      options = t;\n    }\n    if (!options) {\n      options = {};\n    }\n    options['responseType'] = 'arraybuffer';\n    return Ajax.get(url, options, cb);\n  },\n  getImage: function getImage(img, url, options) {\n    return Ajax.getArrayBuffer(url, options, function (err, imgData) {\n      if (err) {\n        if (img.onerror) {\n          img.onerror(err);\n        }\n      } else if (imgData) {\n        var URL = window.URL || window.webkitURL;\n        var onload = img.onload;\n        img.onload = function () {\n          if (onload) {\n            onload();\n          }\n          URL.revokeObjectURL(img.src);\n        };\n        var blob = new Blob([new Uint8Array(imgData.data)], {\n          type: imgData.contentType\n        });\n        img.cacheControl = imgData.cacheControl;\n        img.expires = imgData.expires;\n        img.src = imgData.data.byteLength ? URL.createObjectURL(blob) : emptyImageUrl;\n      }\n    });\n  }\n};\nAjax.getJSON = function (url, options, cb) {\n  if (isFunction(options)) {\n    var t = cb;\n    cb = options;\n    options = t;\n  }\n  var callback = function callback(err, resp) {\n    var data = resp ? parseJSON(resp) : null;\n    cb(err, data);\n  };\n  if (options && options['jsonp']) {\n    return Ajax.jsonp(url, callback);\n  }\n  return Ajax.get(url, options, callback);\n};\n\nvar minx = Infinity,\n  miny = Infinity,\n  maxx = -Infinity,\n  maxy = -Infinity;\nfunction getDefaultBBOX() {\n  return [minx, miny, maxx, maxy];\n}\nvar BBOX_TEMP = getDefaultBBOX();\nfunction resetBBOX(bbox) {\n  bbox[0] = minx;\n  bbox[1] = miny;\n  bbox[2] = maxx;\n  bbox[3] = maxy;\n}\nfunction pointsBBOX(points, out) {\n  if (!points) {\n    return;\n  }\n  if (Array.isArray(points[0])) {\n    for (var i = 0, len = points.length; i < len; i++) {\n      pointsBBOX(points[i], out);\n    }\n  } else if (Array.isArray(points)) {\n    for (var _i = 0, _len = points.length; _i < _len; _i++) {\n      var _points$_i = points[_i],\n        x = _points$_i.x,\n        y = _points$_i.y;\n      out[0] = Math.min(x, out[0]);\n      out[1] = Math.min(y, out[1]);\n      out[2] = Math.max(x, out[2]);\n      out[3] = Math.max(y, out[3]);\n    }\n  } else {\n    var x = points.x,\n      y = points.y;\n    out[0] = Math.min(x, out[0]);\n    out[1] = Math.min(y, out[1]);\n    out[2] = Math.max(x, out[2]);\n    out[3] = Math.max(y, out[3]);\n  }\n}\nfunction setBBOX(bbox, x1, y1, x2, y2) {\n  if (x1 !== 0 && !x1) {\n    return;\n  }\n  if (Array.isArray(x1)) {\n    y1 = x1[1];\n    x2 = x1[2];\n    y2 = x1[3];\n    x1 = x1[0];\n  }\n  bbox[0] = Math.min(x1, bbox[0]);\n  bbox[1] = Math.min(y1, bbox[1]);\n  bbox[2] = Math.max(x2, bbox[2]);\n  bbox[3] = Math.max(y2, bbox[3]);\n}\nfunction validateBBOX(bbox) {\n  return bbox && bbox[0] !== Infinity && bbox[0] !== undefined;\n}\nfunction bufferBBOX(bbox, bufferSize) {\n  if (bufferSize === void 0) {\n    bufferSize = 0;\n  }\n  bbox[0] -= bufferSize;\n  bbox[1] -= bufferSize;\n  bbox[2] += bufferSize;\n  bbox[3] += bufferSize;\n}\n\nvar DEFAULT_STROKE_COLOR = '#000';\nvar DEFAULT_FILL_COLOR = 'rgba(255,255,255,0)';\nvar DEFAULT_TEXT_COLOR = '#000';\nvar hitTesting = false;\nvar TEMP_CANVAS = null;\nvar RADIAN = Math.PI / 180;\nvar textOffsetY = 1;\nvar Canvas = {\n  getCanvas2DContext: function getCanvas2DContext(canvas) {\n    return canvas.getContext('2d', {\n      willReadFrequently: true\n    });\n  },\n  setHitTesting: function setHitTesting(testing) {\n    hitTesting = testing;\n  },\n  createCanvas: function createCanvas(width, height, canvasClass) {\n    var canvas;\n    if (!IS_NODE) {\n      canvas = createEl('canvas');\n      canvas.width = width;\n      canvas.height = height;\n    } else {\n      canvas = new canvasClass(width, height);\n    }\n    return canvas;\n  },\n  prepareCanvasFont: function prepareCanvasFont(ctx, style) {\n    ctx.textBaseline = 'top';\n    ctx.font = getFont(style);\n    var fill = style['textFill'];\n    if (!fill) {\n      fill = DEFAULT_TEXT_COLOR;\n    }\n    ctx.fillStyle = Canvas.getRgba(fill, style['textOpacity']);\n  },\n  prepareCanvas: function prepareCanvas(ctx, style, resources, testing) {\n    if (!style) {\n      return;\n    }\n    var strokeWidth = style['lineWidth'];\n    if (!isNil(strokeWidth) && ctx.lineWidth !== strokeWidth) {\n      ctx.lineWidth = strokeWidth;\n    }\n    var strokePattern = style['linePatternFile'];\n    var strokeColor = style['lineColor'] || DEFAULT_STROKE_COLOR;\n    if (testing) {\n      ctx.strokeStyle = '#000';\n    } else if (strokePattern && resources) {\n      var patternOffset;\n      if (style['linePatternDx'] || style['linePatternDy']) {\n        patternOffset = [style['linePatternDx'], style['linePatternDy']];\n      }\n      Canvas._setStrokePattern(ctx, strokePattern, strokeWidth, patternOffset, resources);\n      style['lineDasharray'] = [];\n    } else if (isGradient(strokeColor)) {\n      if (style['lineGradientExtent']) {\n        ctx.strokeStyle = Canvas._createGradient(ctx, strokeColor, style['lineGradientExtent']);\n      } else {\n        ctx.strokeStyle = DEFAULT_STROKE_COLOR;\n      }\n    } else {\n        if (Array.isArray(strokeColor)) {\n          strokeColor = Canvas.normalizeColorToRGBA(strokeColor);\n        }\n        ctx.strokeStyle = strokeColor;\n      }\n    if (style['lineJoin']) {\n      ctx.lineJoin = style['lineJoin'];\n    }\n    if (style['lineCap']) {\n      ctx.lineCap = style['lineCap'];\n    }\n    if (ctx.setLineDash && isArrayHasData(style['lineDasharray'])) {\n      ctx.setLineDash(style['lineDasharray']);\n    }\n    var polygonPattern = style['polygonPatternFile'];\n    var fill = style['polygonFill'] || DEFAULT_FILL_COLOR;\n    if (testing) {\n      ctx.fillStyle = '#000';\n    } else if (polygonPattern && resources) {\n      var fillImgUrl = extractImageUrl(polygonPattern);\n      var fillTexture = resources.getImage([fillImgUrl, null, null]);\n      if (!fillTexture) {\n        fillTexture = resources.getImage([fillImgUrl + '-texture', null, strokeWidth]);\n      }\n      if (isSVG(fillImgUrl) && fillTexture instanceof Image && (Browser$1.edge || Browser$1.ie)) {\n        var w = fillTexture.width || 20,\n          h = fillTexture.height || 20;\n        var canvas = Canvas.createCanvas(w, h);\n        Canvas.image(canvas.getContext('2d'), fillTexture, 0, 0, w, h);\n        fillTexture = canvas;\n      }\n      if (!fillTexture) {\n        if (typeof console !== 'undefined') {\n          console.warn('img not found for', fillImgUrl);\n        }\n      } else {\n        ctx.fillStyle = ctx.createPattern(fillTexture, 'repeat');\n        if (style['polygonPatternDx'] || style['polygonPatternDy']) {\n          ctx.fillStyle['polygonPatternOffset'] = [style['polygonPatternDx'], style['polygonPatternDy']];\n        }\n      }\n    } else if (isGradient(fill)) {\n      if (style['polygonGradientExtent']) {\n        ctx.fillStyle = Canvas._createGradient(ctx, fill, style['polygonGradientExtent']);\n      } else {\n        ctx.fillStyle = 'rgba(255,255,255,0)';\n      }\n    } else {\n        if (Array.isArray(fill)) {\n          fill = Canvas.normalizeColorToRGBA(fill);\n        }\n        ctx.fillStyle = fill;\n      }\n  },\n  _createGradient: function _createGradient(ctx, g, extent) {\n    var gradient = null,\n      places = g['places'];\n    var min = extent.getMin(),\n      max = extent.getMax(),\n      width = extent.getWidth(),\n      height = extent.getHeight();\n    if (!g['type'] || g['type'] === 'linear') {\n      if (!places) {\n        places = [min.x, min.y, max.x, min.y];\n      } else {\n        if (places.length !== 4) {\n          throw new Error('A linear gradient\\'s places should have 4 numbers.');\n        }\n        places = [min.x + places[0] * width, min.y + places[1] * height, min.x + places[2] * width, min.y + places[3] * height];\n      }\n      gradient = ctx.createLinearGradient.apply(ctx, places);\n    } else if (g['type'] === 'radial') {\n      if (!places) {\n        var c = extent.getCenter()._round();\n        places = [c.x, c.y, Math.abs(c.x - min.x), c.x, c.y, 0];\n      } else {\n        if (places.length !== 6) {\n          throw new Error('A radial gradient\\'s places should have 6 numbers.');\n        }\n        places = [min.x + places[0] * width, min.y + places[1] * height, width * places[2], min.x + places[3] * width, min.y + places[4] * height, width * places[5]];\n      }\n      gradient = ctx.createRadialGradient.apply(ctx, places);\n    }\n    g['colorStops'].forEach(function (stop) {\n      gradient.addColorStop.apply(gradient, stop);\n    });\n    return gradient;\n  },\n  _setStrokePattern: function _setStrokePattern(ctx, strokePattern, strokeWidth, linePatternOffset, resources) {\n    var imgUrl = extractImageUrl(strokePattern);\n    var imageTexture;\n    if (IS_NODE) {\n      imageTexture = resources.getImage([imgUrl, null, strokeWidth]);\n    } else {\n      var key = imgUrl + '-texture-' + strokeWidth;\n      imageTexture = resources.getImage(key);\n      if (!imageTexture) {\n        var imageRes = resources.getImage([imgUrl, null, null]);\n        if (imageRes) {\n          var w;\n          if (!imageRes.width || !imageRes.height) {\n            w = strokeWidth;\n          } else {\n            w = Math.round(imageRes.width * strokeWidth / imageRes.height);\n          }\n          var patternCanvas = Canvas.createCanvas(w, strokeWidth, ctx.canvas.constructor);\n          Canvas.image(patternCanvas.getContext('2d'), imageRes, 0, 0, w, strokeWidth);\n          resources.addResource([key, null, strokeWidth], patternCanvas);\n          imageTexture = patternCanvas;\n        }\n      }\n    }\n    if (imageTexture) {\n      ctx.strokeStyle = ctx.createPattern(imageTexture, 'repeat');\n      ctx.strokeStyle['linePatternOffset'] = linePatternOffset;\n    } else if (typeof console !== 'undefined') {\n      console.warn('img not found for', imgUrl);\n    }\n  },\n  clearRect: function clearRect(ctx, x1, y1, x2, y2) {\n    ctx.canvas._drawn = false;\n    ctx.clearRect(x1, y1, x2, y2);\n  },\n  fillCanvas: function fillCanvas(ctx, fillOpacity, x, y) {\n    if (hitTesting) {\n      fillOpacity = 1;\n    }\n    ctx.canvas._drawn = true;\n    if (fillOpacity === 0) {\n      return;\n    }\n    var isPattern = Canvas._isPattern(ctx.fillStyle);\n    var offset = ctx.fillStyle && ctx.fillStyle['polygonPatternOffset'];\n    var dx = offset ? offset[0] : 0,\n      dy = offset ? offset[1] : 0;\n    if (isNil(fillOpacity)) {\n      fillOpacity = 1;\n    }\n    var alpha;\n    if (fillOpacity < 1) {\n      alpha = ctx.globalAlpha;\n      ctx.globalAlpha *= fillOpacity;\n    }\n    if (isPattern) {\n      x = x || 0;\n      y = y || 0;\n      ctx.translate(x + dx, y + dy);\n    }\n    ctx.fill();\n    if (isPattern) {\n      ctx.translate(-x - dx, -y - dy);\n    }\n    if (fillOpacity < 1) {\n      ctx.globalAlpha = alpha;\n    }\n  },\n  getRgba: function getRgba(color, op) {\n    if (isNil(op)) {\n      op = 1;\n    }\n    if (color[0] !== '#') {\n      if (Array.isArray(color)) {\n        color = Canvas.normalizeColorToRGBA(color, op);\n      }\n      return color;\n    }\n    var r, g, b;\n    if (color.length === 7) {\n      r = parseInt(color.substring(1, 3), 16);\n      g = parseInt(color.substring(3, 5), 16);\n      b = parseInt(color.substring(5, 7), 16);\n    } else {\n      r = parseInt(color.substring(1, 2), 16) * 17;\n      g = parseInt(color.substring(2, 3), 16) * 17;\n      b = parseInt(color.substring(3, 4), 16) * 17;\n    }\n    return 'rgba(' + r + ',' + g + ',' + b + ',' + op + ')';\n  },\n  normalizeColorToRGBA: function normalizeColorToRGBA(fill, opacity) {\n    if (opacity === void 0) {\n      opacity = 1;\n    }\n    return \"rgba(\" + fill[0] * 255 + \",\" + fill[1] * 255 + \",\" + fill[2] * 255 + \",\" + (fill.length === 4 ? fill[3] : 1) * opacity + \")\";\n  },\n  image: function image(ctx, img, x, y, width, height) {\n    ctx.canvas._drawn = true;\n    try {\n      if (isNumber(width) && isNumber(height)) {\n        ctx.drawImage(img, x, y, width, height);\n      } else {\n        ctx.drawImage(img, x, y);\n      }\n    } catch (error) {\n      if (console) {\n        console.warn('error when drawing image on canvas:', error);\n        console.warn(img);\n      }\n    }\n  },\n  text: function text(ctx, _text, pt, style, textDesc) {\n    return Canvas._textOnMultiRow(ctx, textDesc['rows'], style, pt, textDesc['size'], textDesc['rawSize']);\n  },\n  _textOnMultiRow: function _textOnMultiRow(ctx, texts, style, point, splitTextSize, textSize) {\n    var ptAlign = getAlignPoint(splitTextSize, style['textHorizontalAlignment'], style['textVerticalAlignment']),\n      lineHeight = textSize['height'] + style['textLineSpacing'],\n      basePoint = point.add(0, ptAlign.y),\n      maxHeight = style['textMaxHeight'];\n    var text,\n      rowAlign,\n      height = 0;\n    resetBBOX(BBOX_TEMP);\n    for (var i = 0, len = texts.length; i < len; i++) {\n      text = texts[i]['text'];\n      rowAlign = getAlignPoint(texts[i]['size'], style['textHorizontalAlignment'], style['textVerticalAlignment']);\n      var _point = basePoint.add(rowAlign.x, i * lineHeight);\n      Canvas._textOnLine(ctx, text, _point, style['textHaloRadius'], style['textHaloFill'], style['textHaloOpacity']);\n      var _textSize = texts[i].size;\n      var minx = _point.x,\n        miny = _point.y,\n        maxx = minx + _textSize.width,\n        maxy = miny + _textSize.height;\n      setBBOX(BBOX_TEMP, minx, miny, maxx, maxy);\n      if (maxHeight > 0) {\n        height += lineHeight;\n        if (height + _textSize['height'] >= maxHeight) {\n          break;\n        }\n      }\n    }\n    return BBOX_TEMP;\n  },\n  _textOnLine: function _textOnLine(ctx, text, pt, textHaloRadius, textHaloFill, textHaloAlpha) {\n    if (hitTesting) {\n      textHaloAlpha = 1;\n    }\n    var drawHalo = textHaloAlpha !== 0 && textHaloRadius !== 0;\n    ctx.textBaseline = 'top';\n    var gco, fill;\n    var shadowBlur = ctx.shadowBlur,\n      shadowOffsetX = ctx.shadowOffsetX,\n      shadowOffsetY = ctx.shadowOffsetY;\n    if (drawHalo) {\n      var alpha = ctx.globalAlpha;\n      ctx.globalAlpha *= textHaloAlpha;\n      ctx.miterLimit = 2;\n      ctx.lineJoin = 'round';\n      ctx.lineCap = 'round';\n      ctx.lineWidth = textHaloRadius * 2;\n      if (Array.isArray(textHaloFill)) {\n        textHaloFill = Canvas.normalizeColorToRGBA(textHaloFill);\n      }\n      ctx.strokeStyle = textHaloFill;\n      ctx.strokeText(text, pt.x, pt.y + textOffsetY);\n      ctx.miterLimit = 10;\n      ctx.globalAlpha = alpha;\n      gco = ctx.globalCompositeOperation;\n      ctx.globalCompositeOperation = 'destination-out';\n      fill = ctx.fillStyle;\n      ctx.fillStyle = '#000';\n    }\n    if (shadowBlur && drawHalo) {\n      ctx.shadowBlur = ctx.shadowOffsetX = ctx.shadowOffsetY = 0;\n    }\n    Canvas.fillText(ctx, text, pt);\n    if (gco) {\n      ctx.globalCompositeOperation = gco;\n      Canvas.fillText(ctx, text, pt, fill);\n      if (shadowBlur) {\n        ctx.shadowBlur = shadowBlur;\n        ctx.shadowOffsetX = shadowOffsetX;\n        ctx.shadowOffsetY = shadowOffsetY;\n      }\n    }\n  },\n  fillText: function fillText(ctx, text, pt, rgba) {\n    ctx.canvas._drawn = true;\n    if (rgba) {\n      ctx.fillStyle = rgba;\n    }\n    ctx.fillText(text, pt.x, pt.y + textOffsetY);\n  },\n  _stroke: function _stroke(ctx, strokeOpacity, x, y) {\n    if (hitTesting) {\n      strokeOpacity = 1;\n    }\n    ctx.canvas._drawn = true;\n    if (strokeOpacity === 0) {\n      return;\n    }\n    var offset = ctx.strokeStyle && ctx.strokeStyle['linePatternOffset'];\n    var dx = offset ? offset[0] : 0,\n      dy = offset ? offset[1] : 0;\n    var isPattern = Canvas._isPattern(ctx.strokeStyle) && (!isNil(x) && !isNil(y) || !isNil(dx) && !isNil(dy));\n    if (isNil(strokeOpacity)) {\n      strokeOpacity = 1;\n    }\n    var alpha;\n    if (strokeOpacity < 1) {\n      alpha = ctx.globalAlpha;\n      ctx.globalAlpha *= strokeOpacity;\n    }\n    if (isPattern) {\n      x = x || 0;\n      y = y || 0;\n      ctx.translate(x + dx, y + dy);\n    }\n    ctx.stroke();\n    if (isPattern) {\n      ctx.translate(-x - dx, -y - dy);\n    }\n    if (strokeOpacity < 1) {\n      ctx.globalAlpha = alpha;\n    }\n  },\n  _path: function _path(ctx, points, lineDashArray, lineOpacity, ignoreStrokePattern) {\n    if (!isArrayHasData(points)) {\n      return;\n    }\n    function fillWithPattern(p1, p2) {\n      var degree = computeDegree(p1.x, p1.y, p2.x, p2.y);\n      ctx.save();\n      var cosd = Math.cos(degree);\n      if (Math.abs(cosd) < 1E-7) {\n        ctx.translate(p1.x - ctx.lineWidth / 2, p1.y);\n      } else {\n        ctx.translate(p1.x, p1.y - ctx.lineWidth / 2 / cosd);\n      }\n      ctx.rotate(degree);\n      Canvas._stroke(ctx, lineOpacity);\n      ctx.restore();\n    }\n    var isDashed = isArrayHasData(lineDashArray);\n    var isPatternLine = ignoreStrokePattern === true ? false : Canvas._isPattern(ctx.strokeStyle);\n    var point, prePoint, nextPoint;\n    for (var i = 0, len = points.length; i < len; i++) {\n      point = points[i];\n      if (!isDashed || ctx.setLineDash) {\n        ctx.lineTo(point.x, point.y);\n        if (isPatternLine && i > 0) {\n          prePoint = points[i - 1];\n          fillWithPattern(prePoint, point);\n          ctx.beginPath();\n          ctx.moveTo(point.x, point.y);\n        }\n      } else if (isDashed) {\n        if (i === len - 1) {\n          break;\n        }\n        nextPoint = points[i + 1];\n        drawDashLine(ctx, point, nextPoint, lineDashArray, isPatternLine);\n      }\n    }\n  },\n  path: function path(ctx, points, lineOpacity, fillOpacity, lineDashArray) {\n    if (!isArrayHasData(points)) {\n      return;\n    }\n    ctx.beginPath();\n    ctx.moveTo(points[0].x, points[0].y);\n    Canvas._path(ctx, points, lineDashArray, lineOpacity);\n    Canvas._stroke(ctx, lineOpacity);\n  },\n  _multiClip: function _multiClip(ctx, points) {\n    if (!points || points.length === 0) return;\n    points = points[0];\n    for (var i = 0, len = points.length; i < len; i++) {\n      var point = points[i];\n      var x = point.x,\n        y = point.y;\n      if (i === 0) {\n        ctx.moveTo(x, y);\n      } else {\n        ctx.lineTo(x, y);\n      }\n      if (i === len - 1) {\n        x = points[0].x;\n        y = points[0].y;\n        ctx.lineTo(x, y);\n      }\n    }\n  },\n  polygon: function polygon(ctx, points, lineOpacity, fillOpacity, lineDashArray, smoothness) {\n    if (ctx.isMultiClip) {\n      Canvas._multiClip(ctx, points);\n      return;\n    }\n    if (ctx.isClip) {\n      Canvas._multiClip(ctx, Array.isArray(points[0]) ? points : [points]);\n      return;\n    }\n    if (!isArrayHasData(points)) {\n      return;\n    }\n    var isPatternLine = Canvas._isPattern(ctx.strokeStyle),\n      fillFirst = isArrayHasData(lineDashArray) && !ctx.setLineDash || isPatternLine && !smoothness;\n    if (!isArrayHasData(points[0])) {\n      points = [points];\n    }\n    var savedCtx = ctx;\n    if (points.length > 1 && !IS_NODE) {\n      if (!TEMP_CANVAS) {\n        TEMP_CANVAS = Canvas.createCanvas(1, 1);\n      }\n      ctx.canvas._drawn = false;\n      TEMP_CANVAS.width = ctx.canvas.width;\n      TEMP_CANVAS.height = ctx.canvas.height;\n      ctx = TEMP_CANVAS.getContext('2d');\n      copyProperties(ctx, savedCtx);\n    }\n    var op, i, len;\n    if (fillFirst) {\n      ctx.save();\n      for (i = 0, len = points.length; i < len; i++) {\n        if (!isArrayHasData(points[i])) {\n          continue;\n        }\n        Canvas._ring(ctx, points[i], null, 0, true);\n        op = fillOpacity;\n        if (i > 0) {\n          ctx.globalCompositeOperation = 'destination-out';\n          op = 1;\n        }\n        Canvas.fillCanvas(ctx, op, points[i][0].x, points[i][0].y);\n        if (i > 0) {\n          ctx.globalCompositeOperation = 'source-over';\n        } else if (len > 1) {\n          ctx.fillStyle = '#fff';\n        }\n        Canvas._stroke(ctx, 0);\n      }\n      ctx.restore();\n    }\n    var fillStyle = ctx.fillStyle;\n    for (i = 0, len = points.length; i < len; i++) {\n      if (!isArrayHasData(points[i])) {\n        continue;\n      }\n      if (smoothness) {\n        Canvas.paintSmoothLine(ctx, points[i], lineOpacity, smoothness, true);\n        ctx.closePath();\n      } else {\n        Canvas._ring(ctx, points[i], lineDashArray, lineOpacity);\n      }\n      if (!fillFirst) {\n        op = fillOpacity;\n        if (i > 0) {\n          ctx.globalCompositeOperation = 'destination-out';\n          op = 1;\n        }\n        Canvas.fillCanvas(ctx, op, points[i][0].x, points[i][0].y);\n        if (i > 0) {\n          ctx.globalCompositeOperation = 'source-over';\n        } else if (len > 1) {\n          ctx.fillStyle = '#fff';\n        }\n      }\n      Canvas._stroke(ctx, lineOpacity);\n    }\n    if (ctx.fillStyle !== fillStyle) {\n      ctx.fillStyle = fillStyle;\n    }\n    if (points.length > 1 && !IS_NODE) {\n      savedCtx.drawImage(TEMP_CANVAS, 0, 0);\n      savedCtx.canvas._drawn = ctx.canvas._drawn;\n      copyProperties(savedCtx, ctx);\n    }\n  },\n  _ring: function _ring(ctx, ring, lineDashArray, lineOpacity, ignorePattern) {\n    var isPattern = Canvas._isPattern(ctx.strokeStyle);\n    if (!ignorePattern && isPattern && !ring[0].equals(ring[ring.length - 1])) {\n      ring = ring.concat([ring[0]]);\n    }\n    ctx.beginPath();\n    ctx.moveTo(ring[0].x, ring[0].y);\n    Canvas._path(ctx, ring, lineDashArray, lineOpacity, ignorePattern);\n    if (!isPattern) {\n      ctx.closePath();\n    }\n  },\n  paintSmoothLine: function paintSmoothLine(ctx, points, lineOpacity, smoothValue, close, tailIdx, tailRatio) {\n    if (!points) {\n      return;\n    }\n    if (points.length <= 2 || !smoothValue) {\n      Canvas.path(ctx, points, lineOpacity);\n      return;\n    }\n    function interpolate$$1(t0, t1, x1, y1, bx1, by1, bx2, by2, x2, y2) {\n      var u0 = 1.0 - t0;\n      var u1 = 1.0 - t1;\n      var qxa = x1 * u0 * u0 + bx1 * 2 * t0 * u0 + bx2 * t0 * t0;\n      var qxb = x1 * u1 * u1 + bx1 * 2 * t1 * u1 + bx2 * t1 * t1;\n      var qxc = bx1 * u0 * u0 + bx2 * 2 * t0 * u0 + x2 * t0 * t0;\n      var qxd = bx1 * u1 * u1 + bx2 * 2 * t1 * u1 + x2 * t1 * t1;\n      var qya = y1 * u0 * u0 + by1 * 2 * t0 * u0 + by2 * t0 * t0;\n      var qyb = y1 * u1 * u1 + by1 * 2 * t1 * u1 + by2 * t1 * t1;\n      var qyc = by1 * u0 * u0 + by2 * 2 * t0 * u0 + y2 * t0 * t0;\n      var qyd = by1 * u1 * u1 + by2 * 2 * t1 * u1 + y2 * t1 * t1;\n      var xb = qxa * u1 + qxc * t1;\n      var xc = qxb * u0 + qxd * t0;\n      var xd = qxb * u1 + qxd * t1;\n      var yb = qya * u1 + qyc * t1;\n      var yc = qyb * u0 + qyd * t0;\n      var yd = qyb * u1 + qyd * t1;\n      return [xb, yb, xc, yc, xd, yd];\n    }\n    function getCubicControlPoints(x0, y0, x1, y1, x2, y2, x3, y3, smoothValue, t) {\n      var xc1 = (x0 + x1) / 2.0,\n        yc1 = (y0 + y1) / 2.0;\n      var xc2 = (x1 + x2) / 2.0,\n        yc2 = (y1 + y2) / 2.0;\n      var xc3 = (x2 + x3) / 2.0,\n        yc3 = (y2 + y3) / 2.0;\n      var len1 = Math.sqrt((x1 - x0) * (x1 - x0) + (y1 - y0) * (y1 - y0));\n      var len2 = Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\n      var len3 = Math.sqrt((x3 - x2) * (x3 - x2) + (y3 - y2) * (y3 - y2));\n      var k1 = len1 / (len1 + len2);\n      var k2 = len2 / (len2 + len3);\n      var xm1 = xc1 + (xc2 - xc1) * k1,\n        ym1 = yc1 + (yc2 - yc1) * k1;\n      var xm2 = xc2 + (xc3 - xc2) * k2,\n        ym2 = yc2 + (yc3 - yc2) * k2;\n      var ctrl1X = xm1 + (xc2 - xm1) * smoothValue + x1 - xm1,\n        ctrl1Y = ym1 + (yc2 - ym1) * smoothValue + y1 - ym1,\n        ctrl2X = xm2 + (xc2 - xm2) * smoothValue + x2 - xm2,\n        ctrl2Y = ym2 + (yc2 - ym2) * smoothValue + y2 - ym2;\n      var ctrlPoints = [ctrl1X, ctrl1Y, ctrl2X, ctrl2Y];\n      if (t < 1) {\n        return interpolate$$1(0, t, x1, y1, ctrl1X, ctrl1Y, ctrl2X, ctrl2Y, x2, y2);\n      } else {\n        return ctrlPoints;\n      }\n    }\n    var count = points.length;\n    var l = close ? count : count - 1;\n    ctx.beginPath();\n    ctx.moveTo(points[0].x, points[0].y);\n    if (tailRatio !== undefined) l -= Math.max(l - tailIdx - 1, 0);\n    var preCtrlPoints;\n    for (var i = 0; i < l; i++) {\n      var x1 = points[i].x,\n        y1 = points[i].y;\n      var x0 = void 0,\n        y0 = void 0,\n        x2 = void 0,\n        y2 = void 0,\n        x3 = void 0,\n        y3 = void 0;\n      if (i - 1 < 0) {\n        if (!close) {\n          x0 = points[i + 1].x;\n          y0 = points[i + 1].y;\n        } else {\n          x0 = points[l - 1].x;\n          y0 = points[l - 1].y;\n        }\n      } else {\n        x0 = points[i - 1].x;\n        y0 = points[i - 1].y;\n      }\n      if (i + 1 < count) {\n        x2 = points[i + 1].x;\n        y2 = points[i + 1].y;\n      } else {\n        x2 = points[i + 1 - count].x;\n        y2 = points[i + 1 - count].y;\n      }\n      if (i + 2 < count) {\n        x3 = points[i + 2].x;\n        y3 = points[i + 2].y;\n      } else if (!close) {\n        x3 = points[i].x;\n        y3 = points[i].y;\n      } else {\n        x3 = points[i + 2 - count].x;\n        y3 = points[i + 2 - count].y;\n      }\n      var ctrlPoints = getCubicControlPoints(x0, y0, x1, y1, x2, y2, x3, y3, smoothValue, i === l - 1 ? tailRatio : 1);\n      if (i === l - 1 && tailRatio >= 0 && tailRatio < 1) {\n        ctx.bezierCurveTo(ctrlPoints[0], ctrlPoints[1], ctrlPoints[2], ctrlPoints[3], ctrlPoints[4], ctrlPoints[5]);\n        points.splice(l - 1, count - (l - 1) - 1);\n        var lastPoint = new Point(ctrlPoints[4], ctrlPoints[5]);\n        lastPoint.prevCtrlPoint = new Point(ctrlPoints[2], ctrlPoints[3]);\n        points.push(lastPoint);\n        count = points.length;\n      } else {\n        ctx.bezierCurveTo(ctrlPoints[0], ctrlPoints[1], ctrlPoints[2], ctrlPoints[3], x2, y2);\n      }\n      points[i].nextCtrlPoint = ctrlPoints.slice(0, 2);\n      points[i].prevCtrlPoint = preCtrlPoints ? preCtrlPoints.slice(2) : null;\n      preCtrlPoints = ctrlPoints;\n    }\n    if (!close && points[1].prevCtrlPoint) {\n      points[0].nextCtrlPoint = points[1].prevCtrlPoint;\n      delete points[0].prevCtrlPoint;\n    }\n    if (!points[count - 1].prevCtrlPoint) {\n      points[count - 1].prevCtrlPoint = points[count - 2].nextCtrlPoint;\n    }\n    Canvas._stroke(ctx, lineOpacity);\n  },\n  _arcBetween: function _arcBetween(ctx, p1, p2, degree) {\n    var a = degree,\n      dist = p1.distanceTo(p2),\n      r = dist / 2 / Math.sin(a / 2);\n    var p1p2 = Math.asin((p2.y - p1.y) / dist);\n    if (p1.x > p2.x) {\n      p1p2 = Math.PI - p1p2;\n    }\n    var cp2 = 90 * RADIAN - a / 2,\n      da = p1p2 - cp2;\n    var dx = Math.cos(da) * r,\n      dy = Math.sin(da) * r,\n      cx = p1.x + dx,\n      cy = p1.y + dy;\n    var startAngle = Math.asin((p2.y - cy) / r);\n    if (cx > p2.x) {\n      startAngle = Math.PI - startAngle;\n    }\n    var endAngle = startAngle + a;\n    ctx.beginPath();\n    ctx.arc(cx, cy, r, startAngle, endAngle);\n    return [cx, cy];\n  },\n  _lineTo: function _lineTo(ctx, p) {\n    ctx.lineTo(p.x, p.y);\n  },\n  bezierCurveAndFill: function bezierCurveAndFill(ctx, points, lineOpacity, fillOpacity) {\n    ctx.beginPath();\n    var start = points[0];\n    ctx.moveTo(start.x, start.y);\n    var args = [ctx];\n    args.push.apply(args, points.splice(1));\n    Canvas._bezierCurveTo.apply(Canvas, args);\n    Canvas.fillCanvas(ctx, fillOpacity);\n    Canvas._stroke(ctx, lineOpacity);\n  },\n  _bezierCurveTo: function _bezierCurveTo(ctx, p1, p2, p3) {\n    ctx.bezierCurveTo(p1.x, p1.y, p2.x, p2.y, p3.x, p3.y);\n  },\n  ellipse: function ellipse(ctx, pt, width, heightTop, heightBottom, lineOpacity, fillOpacity) {\n    function bezierEllipse(x, y, a, b, b1) {\n      var k = 0.5522848,\n        ox = a * k,\n        oy = b * k,\n        oy1 = b1 * k;\n      ctx.moveTo(x - a, y);\n      ctx.bezierCurveTo(x - a, y - oy, x - ox, y - b, x, y - b);\n      ctx.bezierCurveTo(x + ox, y - b, x + a, y - oy, x + a, y);\n      ctx.bezierCurveTo(x + a, y + oy1, x + ox, y + b1, x, y + b1);\n      ctx.bezierCurveTo(x - ox, y + b1, x - a, y + oy1, x - a, y);\n      ctx.closePath();\n    }\n    ctx.beginPath();\n    if (width === heightTop && width === heightBottom) {\n      ctx.arc(pt.x, pt.y, width, 0, 2 * Math.PI);\n    } else if (ctx.ellipse) {\n      if (heightTop !== heightBottom) {\n        ctx.ellipse(pt.x, pt.y, width, heightTop, 0, RADIAN * 180, RADIAN * 360, false);\n        ctx.ellipse(pt.x, pt.y, width, heightBottom, 0, 0, RADIAN * 180, false);\n      } else {\n        ctx.ellipse(pt.x, pt.y, width, heightTop, 0, 0, RADIAN * 360, false);\n      }\n    } else {\n      bezierEllipse(pt.x, pt.y, width, heightTop, heightBottom);\n    }\n    Canvas.fillCanvas(ctx, fillOpacity, pt.x - width, pt.y - heightTop);\n    Canvas._stroke(ctx, lineOpacity, pt.x - width, pt.y - heightTop);\n  },\n  rectangle: function rectangle(ctx, pt, size, lineOpacity, fillOpacity) {\n    var x = pt.x,\n      y = pt.y;\n    ctx.beginPath();\n    ctx.rect(x, y, size['width'], size['height']);\n    Canvas.fillCanvas(ctx, fillOpacity, x, y);\n    Canvas._stroke(ctx, lineOpacity, x, y);\n  },\n  sector: function sector(ctx, pt, size, angles, lineOpacity, fillOpacity) {\n    var rad = RADIAN;\n    var startAngle = angles[0],\n      endAngle = angles[1];\n    function sector(ctx, x, y, radius, startAngle, endAngle) {\n      var sDeg = rad * -endAngle;\n      var eDeg = rad * -startAngle;\n      ctx.beginPath();\n      ctx.moveTo(x, y);\n      ctx.arc(x, y, radius, sDeg, eDeg);\n      ctx.lineTo(x, y);\n      Canvas.fillCanvas(ctx, fillOpacity, x - radius, y - radius);\n      Canvas._stroke(ctx, lineOpacity, x - radius, y - radius);\n    }\n    sector(ctx, pt.x, pt.y, size, startAngle, endAngle);\n  },\n  _isPattern: function _isPattern(style) {\n    return !isString(style) && !('addColorStop' in style);\n  },\n  drawCross: function drawCross(ctx, x, y, lineWidth, color) {\n    ctx.canvas._drawn = true;\n    ctx.strokeStyle = color;\n    ctx.lineWidth = lineWidth;\n    ctx.beginPath();\n    ctx.moveTo(x - 5, y);\n    ctx.lineTo(x + 5, y);\n    ctx.moveTo(x, y - 5);\n    ctx.lineTo(x, y + 5);\n    ctx.stroke();\n  },\n  copy: function copy(canvas, c) {\n    var target = c || createEl('canvas');\n    target.width = canvas.width;\n    target.height = canvas.height;\n    target.getContext('2d').drawImage(canvas, 0, 0);\n    return target;\n  },\n  pixelRect: function pixelRect(ctx, point, lineOpacity, fillOpacity) {\n    var lineWidth = ctx.lineWidth;\n    var alpha = ctx.globalAlpha;\n    var isStroke = false;\n    if (lineWidth > 0 && lineOpacity > 0) {\n      isStroke = true;\n      if (lineOpacity < 1) {\n        ctx.globalAlpha *= lineOpacity;\n      }\n    } else if (fillOpacity > 0) {\n      if (fillOpacity < 1) {\n        ctx.globalAlpha *= fillOpacity;\n      }\n    } else {\n      return;\n    }\n    ctx.canvas._drawn = true;\n    if (isStroke) {\n      ctx.strokeRect(point[0], point[1], 1, 1);\n    } else {\n      ctx.fillRect(point[0], point[1], 1, 1);\n    }\n    if (ctx.globalAlpha !== alpha) {\n      ctx.globalAlpha = alpha;\n    }\n  }\n};\nfunction drawDashLine(ctx, startPoint, endPoint, dashArray) {\n  var fromX = startPoint.x,\n    fromY = startPoint.y,\n    toX = endPoint.x,\n    toY = endPoint.y;\n  var pattern = dashArray;\n  var lt = function lt(a, b) {\n    return a <= b;\n  };\n  var gt = function gt(a, b) {\n    return a >= b;\n  };\n  var capmin = function capmin(a, b) {\n    return Math.min(a, b);\n  };\n  var capmax = function capmax(a, b) {\n    return Math.max(a, b);\n  };\n  var checkX = {\n    thereYet: gt,\n    cap: capmin\n  };\n  var checkY = {\n    thereYet: gt,\n    cap: capmin\n  };\n  if (fromY - toY > 0) {\n    checkY.thereYet = lt;\n    checkY.cap = capmax;\n  }\n  if (fromX - toX > 0) {\n    checkX.thereYet = lt;\n    checkX.cap = capmax;\n  }\n  ctx.moveTo(fromX, fromY);\n  var offsetX = fromX;\n  var offsetY = fromY;\n  var idx = 0,\n    dash = true;\n  var ang, len;\n  while (!(checkX.thereYet(offsetX, toX) && checkY.thereYet(offsetY, toY))) {\n    ang = Math.atan2(toY - fromY, toX - fromX);\n    len = pattern[idx];\n    offsetX = checkX.cap(toX, offsetX + Math.cos(ang) * len);\n    offsetY = checkY.cap(toY, offsetY + Math.sin(ang) * len);\n    if (dash) {\n      ctx.lineTo(offsetX, offsetY);\n    } else {\n      ctx.moveTo(offsetX, offsetY);\n    }\n    idx = (idx + 1) % pattern.length;\n    dash = !dash;\n  }\n}\nvar prefix = 'data:image/';\nfunction extractImageUrl(url) {\n  if (url.substring(0, prefix.length) === prefix) {\n    return url;\n  }\n  return extractCssUrl(url);\n}\nfunction copyProperties(ctx, savedCtx) {\n  ctx.filter = savedCtx.filter;\n  ctx.fillStyle = savedCtx.fillStyle;\n  ctx.globalAlpha = savedCtx.globalAlpha;\n  ctx.lineCap = savedCtx.lineCap;\n  ctx.lineDashOffset = savedCtx.lineDashOffset;\n  ctx.lineJoin = savedCtx.lineJoin;\n  ctx.lineWidth = savedCtx.lineWidth;\n  ctx.shadowBlur = savedCtx.shadowBlur;\n  ctx.shadowColor = savedCtx.shadowColor;\n  ctx.shadowOffsetX = savedCtx.shadowOffsetX;\n  ctx.shadowOffsetY = savedCtx.shadowOffsetY;\n  ctx.strokeStyle = savedCtx.strokeStyle;\n}\n\nvar promise;\nif (typeof Promise !== 'undefined') {\n  promise = Promise;\n} else {\n  promise = Zousan;\n}\nvar Promise$1 = promise;\n\nvar Eventable = function Eventable(Base) {\n  return function (_Base) {\n    _inheritsLoose(_class, _Base);\n    function _class() {\n      return _Base.apply(this, arguments) || this;\n    }\n    var _proto = _class.prototype;\n    _proto.on = function on$$1(eventsOn, handler, context) {\n      if (!eventsOn) {\n        return this;\n      }\n      if (!isString(eventsOn)) {\n        return this._switch('on', eventsOn, handler);\n      }\n      if (!handler) {\n        return this;\n      }\n      if (!this._eventMap) {\n        this._eventMap = {};\n      }\n      var eventTypes = eventsOn.toLowerCase().split(' ');\n      var evtType;\n      if (!context) {\n        context = this;\n      }\n      var handlerChain;\n      for (var ii = 0, ll = eventTypes.length; ii < ll; ii++) {\n        evtType = eventTypes[ii];\n        handlerChain = this._eventMap[evtType];\n        if (!handlerChain) {\n          handlerChain = [];\n          this._eventMap[evtType] = handlerChain;\n        }\n        var l = handlerChain.length;\n        if (l > 0) {\n          for (var i = 0; i < l; i++) {\n            if (handler === handlerChain[i].handler && handlerChain[i].context === context) {\n              if (!Browser$1.isTest) {\n                console.warn(this, \"find '\" + eventsOn + \"' handler:\", handler, ' The old listener function will be removed');\n              }\n              return this;\n            }\n          }\n        }\n        handlerChain.push({\n          handler: handler,\n          context: context\n        });\n      }\n      return this;\n    };\n    _proto.addEventListener = function addEventListener() {\n      return this.on.apply(this, arguments);\n    };\n    _proto.once = function once(eventTypes, handler, context) {\n      if (!isString(eventTypes)) {\n        var once = {};\n        for (var p in eventTypes) {\n          if (eventTypes.hasOwnProperty(p)) {\n            once[p] = this._wrapOnceHandler(p, eventTypes[p], context);\n          }\n        }\n        return this._switch('on', once);\n      }\n      var evetTypes = eventTypes.split(' ');\n      for (var i = 0, l = evetTypes.length; i < l; i++) {\n        this.on(evetTypes[i], this._wrapOnceHandler(evetTypes[i], handler, context));\n      }\n      return this;\n    };\n    _proto.off = function off$$1(eventsOff, handler, context) {\n      if (!this._eventMap || !eventsOff) {\n        return this;\n      }\n      if (!isString(eventsOff)) {\n        return this._switch('off', eventsOff, handler);\n      }\n      if (!handler) {\n        return this;\n      }\n      var eventTypes = eventsOff.split(' ');\n      var eventType, listeners, wrapKey;\n      if (!context) {\n        context = this;\n      }\n      for (var j = 0, jl = eventTypes.length; j < jl; j++) {\n        eventType = eventTypes[j].toLowerCase();\n        wrapKey = 'Z__' + eventType;\n        listeners = this._eventMap[eventType];\n        if (!listeners) {\n          return this;\n        }\n        for (var i = listeners.length - 1; i >= 0; i--) {\n          var listener = listeners[i];\n          if ((handler === listener.handler || handler === listener.handler[wrapKey]) && listener.context === context) {\n            delete listener.handler[wrapKey];\n            listeners.splice(i, 1);\n          }\n        }\n        if (!listeners.length) {\n          delete this._eventMap[eventType];\n        }\n      }\n      return this;\n    };\n    _proto.removeEventListener = function removeEventListener() {\n      return this.off.apply(this, arguments);\n    };\n    _proto.listens = function listens(eventType, handler, context) {\n      if (!this._eventMap || !isString(eventType)) {\n        return 0;\n      }\n      var handlerChain = this._eventMap[eventType.toLowerCase()];\n      if (!handlerChain || !handlerChain.length) {\n        return 0;\n      }\n      if (!handler) {\n        return handlerChain.length;\n      }\n      for (var i = 0, len = handlerChain.length; i < len; i++) {\n        if (handler === handlerChain[i].handler && (isNil(context) || handlerChain[i].context === context)) {\n          return 1;\n        }\n      }\n      return 0;\n    };\n    _proto.getListeningEvents = function getListeningEvents() {\n      if (!this._eventMap) {\n        return [];\n      }\n      return Object.keys(this._eventMap);\n    };\n    _proto.copyEventListeners = function copyEventListeners(target) {\n      var eventMap = target._eventMap;\n      if (!eventMap) {\n        return this;\n      }\n      var handlerChain;\n      for (var eventType in eventMap) {\n        handlerChain = eventMap[eventType];\n        for (var i = 0, len = handlerChain.length; i < len; i++) {\n          this.on(eventType, handlerChain[i].handler, handlerChain[i].context);\n        }\n      }\n      return this;\n    };\n    _proto.fire = function fire() {\n      if (this._eventParent) {\n        return this._eventParent.fire.apply(this._eventParent, arguments);\n      }\n      return this._fire.apply(this, arguments);\n    };\n    _proto._wrapOnceHandler = function _wrapOnceHandler(evtType, handler, context) {\n      var me = this;\n      var key = 'Z__' + evtType;\n      var called = false;\n      var fn = function onceHandler() {\n        if (called) {\n          return;\n        }\n        delete fn[key];\n        called = true;\n        if (context) {\n          handler.apply(context, arguments);\n        } else {\n          handler.apply(this, arguments);\n        }\n        me.off(evtType, onceHandler, this);\n      };\n      fn[key] = handler;\n      return fn;\n    };\n    _proto._switch = function _switch(to, eventKeys, context) {\n      for (var p in eventKeys) {\n        if (eventKeys.hasOwnProperty(p)) {\n          this[to](p, eventKeys[p], context);\n        }\n      }\n      return this;\n    };\n    _proto._clearListeners = function _clearListeners(eventType) {\n      if (!this._eventMap || !isString(eventType)) {\n        return;\n      }\n      var handlerChain = this._eventMap[eventType.toLowerCase()];\n      if (!handlerChain) {\n        return;\n      }\n      this._eventMap[eventType] = null;\n    };\n    _proto._clearAllListeners = function _clearAllListeners() {\n      this._eventMap = null;\n    };\n    _proto._setEventParent = function _setEventParent(parent) {\n      this._eventParent = parent;\n      return this;\n    };\n    _proto._setEventTarget = function _setEventTarget(target) {\n      this._eventTarget = target;\n      return this;\n    };\n    _proto._fire = function _fire(eventType, param) {\n      if (!this._eventMap) {\n        return this;\n      }\n      var handlerChain = this._eventMap[eventType.toLowerCase()];\n      if (!handlerChain) {\n        return this;\n      }\n      if (!param) {\n        param = {};\n      }\n      param['type'] = eventType;\n      param['target'] = this._eventTarget || this;\n      var queue = handlerChain.slice(0);\n      var context, bubble, passed;\n      for (var i = 0, len = queue.length; i < len; i++) {\n        if (!queue[i]) {\n          continue;\n        }\n        context = queue[i].context;\n        bubble = true;\n        passed = extend({}, param);\n        if (context) {\n          bubble = queue[i].handler.call(context, passed);\n        } else {\n          bubble = queue[i].handler(passed);\n        }\n        if (bubble === false) {\n          if (param['domEvent']) {\n            stopPropagation(param['domEvent']);\n          }\n        }\n      }\n      return this;\n    };\n    return _class;\n  }(Base);\n};\n\nvar Handler = function () {\n  function Handler(target) {\n    this.target = target;\n  }\n  var _proto = Handler.prototype;\n  _proto.enable = function enable() {\n    if (this._enabled) {\n      return this;\n    }\n    this._enabled = true;\n    this.addHooks();\n    return this;\n  };\n  _proto.disable = function disable() {\n    if (!this._enabled) {\n      return this;\n    }\n    this._enabled = false;\n    this.removeHooks();\n    return this;\n  };\n  _proto.enabled = function enabled() {\n    return !!this._enabled;\n  };\n  _proto.remove = function remove() {\n    this.disable();\n    delete this.target;\n    delete this.dom;\n  };\n  return Handler;\n}();\nvar Handler$1 = Eventable(Handler);\n\nvar Class = function () {\n  function Class(options) {\n    if (!this || !this.setOptions) {\n      throw new Error('Class instance is being created without \"new\" operator.');\n    }\n    this.setOptions(options);\n    this.callInitHooks();\n    this._isUpdatingOptions = false;\n  }\n  var _proto = Class.prototype;\n  _proto.proxyOptions = function proxyOptions() {\n    var _this = this;\n    if (!Browser$1.proxy) {\n      return this;\n    }\n    if (this.options.isExtensible) {\n      return this;\n    }\n    this.options = new Proxy(this.options, {\n      set: function set(target, key, value) {\n        if (target[key] === value) {\n          return true;\n        }\n        target[key] = value;\n        if (_this._isUpdatingOptions) {\n          return true;\n        }\n        var opts = {};\n        opts[key] = value;\n        _this.config(opts);\n        return true;\n      }\n    });\n    return this;\n  };\n  _proto.callInitHooks = function callInitHooks() {\n    var proto = Object.getPrototypeOf(this);\n    this._visitInitHooks(proto);\n    return this;\n  };\n  _proto.setOptions = function setOptions(options) {\n    if (!this.hasOwnProperty('options')) {\n      this.options = this.options ? Object.create(this.options) : {};\n    }\n    if (!options) {\n      return this;\n    }\n    for (var i in options) {\n      this.options[i] = options[i];\n    }\n    return this;\n  };\n  _proto.config = function config(conf) {\n    this._isUpdatingOptions = true;\n    if (!conf) {\n      var config = {};\n      for (var p in this.options) {\n        if (this.options.hasOwnProperty(p)) {\n          config[p] = this.options[p];\n        }\n      }\n      this._isUpdatingOptions = false;\n      return config;\n    } else {\n      if (arguments.length === 2) {\n        var t = {};\n        t[conf] = arguments[1];\n        conf = t;\n      }\n      for (var i in conf) {\n        this.options[i] = conf[i];\n        if (this[i] && this[i] instanceof Handler$1) {\n          if (conf[i]) {\n            this[i].enable();\n          } else {\n            this[i].disable();\n          }\n        }\n      }\n      this.onConfig(conf);\n      this._isUpdatingOptions = false;\n    }\n    return this;\n  };\n  _proto.onConfig = function onConfig() {};\n  _proto._visitInitHooks = function _visitInitHooks(proto) {\n    if (this._initHooksCalled) {\n      return;\n    }\n    var parentProto = Object.getPrototypeOf(proto);\n    if (parentProto._visitInitHooks) {\n      parentProto._visitInitHooks.call(this, parentProto);\n    }\n    this._initHooksCalled = true;\n    var hooks = proto._initHooks;\n    if (hooks && hooks !== parentProto._initHooks) {\n      for (var i = 0; i < hooks.length; i++) {\n        hooks[i].call(this);\n      }\n    }\n  };\n  Class.addInitHook = function addInitHook(fn) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n    var init = typeof fn === 'function' ? fn : function () {\n      this[fn].apply(this, args);\n    };\n    var proto = this.prototype;\n    var parentProto = Object.getPrototypeOf(proto);\n    if (!proto._initHooks || proto._initHooks === parentProto._initHooks) {\n      proto._initHooks = [];\n    }\n    proto._initHooks.push(init);\n    return this;\n  };\n  Class.include = function include() {\n    for (var i = 0; i < arguments.length; i++) {\n      extend(this.prototype, i < 0 || arguments.length <= i ? undefined : arguments[i]);\n    }\n    return this;\n  };\n  Class.mergeOptions = function mergeOptions(options) {\n    var proto = this.prototype;\n    var parentProto = Object.getPrototypeOf(proto);\n    if (!proto.options || proto.options === parentProto.options) {\n      proto.options = proto.options ? Object.create(proto.options) : {};\n    }\n    extend(proto.options, options);\n    return this;\n  };\n  return Class;\n}();\n\nvar registeredTypes = {};\nvar JSONAble = (function (Base) {\n  return function (_Base) {\n    _inheritsLoose(_class, _Base);\n    function _class() {\n      return _Base.apply(this, arguments) || this;\n    }\n    _class.registerJSONType = function registerJSONType(type) {\n      if (!type) {\n        return this;\n      }\n      if (registeredTypes[type]) {\n        console.error(type + \" has register. please use Different name for:\", this);\n        return this;\n      }\n      registeredTypes[type] = this;\n      return this;\n    };\n    _class.getJSONClass = function getJSONClass(type) {\n      if (!type) {\n        return null;\n      }\n      return registeredTypes[type];\n    };\n    var _proto = _class.prototype;\n    _proto.getJSONType = function getJSONType() {\n      if (this._jsonType === undefined) {\n        var clazz = Object.getPrototypeOf(this).constructor;\n        for (var p in registeredTypes) {\n          if (registeredTypes[p] === clazz) {\n            this._jsonType = p;\n            break;\n          }\n        }\n      }\n      if (!this._jsonType) {\n        throw new Error('Found an unregistered Layer/Geometry class!');\n      }\n      return this._jsonType;\n    };\n    return _class;\n  }(Base);\n});\n\nvar search = {};\nvar CollisionIndex = function () {\n  function CollisionIndex() {\n    this._tree = rbush(9, ['[0]', '[1]', '[2]', '[3]']);\n  }\n  var _proto = CollisionIndex.prototype;\n  _proto.collides = function collides(box) {\n    search.minX = box[0];\n    search.minY = box[1];\n    search.maxX = box[2];\n    search.maxY = box[3];\n    return this._tree.collides(search);\n  };\n  _proto.insertBox = function insertBox(box) {\n    var tree = this._tree;\n    tree.insert(box);\n    return this;\n  };\n  _proto.bulkInsertBox = function bulkInsertBox(boxes) {\n    this._tree.load(boxes);\n    return this;\n  };\n  _proto.clear = function clear() {\n    this._tree.clear();\n    return this;\n  };\n  return CollisionIndex;\n}();\n\nfunction Handlerable (Base) {\n  return function (_Base) {\n    _inheritsLoose(_class, _Base);\n    function _class() {\n      return _Base.apply(this, arguments) || this;\n    }\n    var _proto = _class.prototype;\n    _proto.addHandler = function addHandler(name, handlerClass) {\n      if (!handlerClass) {\n        return this;\n      }\n      if (!this._handlers) {\n        this._handlers = [];\n      }\n      if (this[name]) {\n        this[name].enable();\n        return this;\n      }\n      var handler = this[name] = new handlerClass(this);\n      this._handlers.push(handler);\n      if (this.options[name]) {\n        handler.enable();\n      }\n      return this;\n    };\n    _proto.removeHandler = function removeHandler(name) {\n      if (!name) {\n        return this;\n      }\n      var handler = this[name];\n      if (handler) {\n        var hit = this._handlers.indexOf(handler);\n        if (hit >= 0) {\n          this._handlers.splice(hit, 1);\n        }\n        this[name].remove();\n        delete this[name];\n      }\n      return this;\n    };\n    _proto._clearHandlers = function _clearHandlers() {\n      for (var i = 0, len = this._handlers.length; i < len; i++) {\n        this._handlers[i].remove();\n      }\n      this._handlers = [];\n    };\n    return _class;\n  }(Base);\n}\n\nvar START_EVENTS = 'touchstart mousedown';\nvar MOVE_EVENTS = {\n  mousedown: 'mousemove',\n  touchstart: 'touchmove',\n  pointerdown: 'touchmove',\n  MSPointerDown: 'touchmove'\n};\nvar END_EVENTS = {\n  mousedown: 'mouseup',\n  touchstart: 'touchend',\n  pointerdown: 'touchend',\n  MSPointerDown: 'touchend'\n};\nvar DragHandler = function (_Handler) {\n  _inheritsLoose(DragHandler, _Handler);\n  function DragHandler(dom, options) {\n    var _this;\n    if (options === void 0) {\n      options = {};\n    }\n    _this = _Handler.call(this, null) || this;\n    _this.dom = dom;\n    _this.options = options;\n    return _this;\n  }\n  var _proto = DragHandler.prototype;\n  _proto.enable = function enable() {\n    if (!this.dom) {\n      return this;\n    }\n    this._onMouseDown = function (e) {\n      return this.onMouseDown(e);\n    };\n    on(this.dom, START_EVENTS, this._onMouseDown, this);\n    return this;\n  };\n  _proto.disable = function disable() {\n    if (!this.dom) {\n      return this;\n    }\n    this._offEvents();\n    off(this.dom, START_EVENTS, this._onMouseDown);\n    delete this._onMouseDown;\n    return this;\n  };\n  _proto.onMouseDown = function onMouseDown(event) {\n    if (!this.options['rightclick'] && event.button === 2) {\n      return;\n    }\n    if (event.touches && event.touches.length > 1) {\n      return;\n    }\n    if (this.options['cancelOn'] && this.options['cancelOn'](event) === true) {\n      return;\n    }\n    var dom = this.dom;\n    if (dom.setCapture) {\n      dom.setCapture();\n    } else if (window.captureEvents) {\n      window.captureEvents(window['Event'].MOUSEMOVE | window['Event'].MOUSEUP);\n    }\n    dom['ondragstart'] = function () {\n      return false;\n    };\n    delete this.moved;\n    var actual = event.touches ? event.touches[0] : event;\n    this.startPos = new Point(actual.clientX, actual.clientY);\n    off(document, MOVE_EVENTS[event.type], this.onMouseMove, this);\n    off(document, END_EVENTS[event.type], this.onMouseUp, this);\n    on(document, MOVE_EVENTS[event.type], this.onMouseMove, this);\n    on(document, END_EVENTS[event.type], this.onMouseUp, this);\n    if (!this.options['ignoreMouseleave']) {\n      off(this.dom, 'mouseleave', this.onMouseUp, this);\n      on(this.dom, 'mouseleave', this.onMouseUp, this);\n    }\n    this.fire('mousedown', {\n      'domEvent': event,\n      'mousePos': new Point(actual.clientX, actual.clientY)\n    });\n  };\n  _proto.onMouseMove = function onMouseMove(event) {\n    if (event.touches && event.touches.length > 1) {\n      if (this.moved) {\n        this.interupted = true;\n        this.onMouseUp(event);\n      }\n      return;\n    }\n    var actual = event.touches ? event.touches[0] : event;\n    var newPos = new Point(actual.clientX, actual.clientY),\n      offset = newPos.sub(this.startPos);\n    if (!offset.x && !offset.y) {\n      return;\n    }\n    if (!this.moved) {\n      this.fire('dragstart', {\n        'domEvent': event,\n        'mousePos': this.startPos.copy()\n      });\n      this.moved = true;\n    } else {\n      this.fire('dragging', {\n        'domEvent': event,\n        'mousePos': new Point(actual.clientX, actual.clientY)\n      });\n    }\n  };\n  _proto.onMouseUp = function onMouseUp(event) {\n    var actual = event.changedTouches ? event.changedTouches[0] : event;\n    this._offEvents();\n    var param = {\n      'domEvent': event\n    };\n    if (isNumber(actual.clientX)) {\n      param['mousePos'] = new Point(parseInt(actual.clientX, 0), parseInt(actual.clientY, 0));\n    }\n    if (this.moved) {\n      param.interupted = this.interupted;\n      this.fire('dragend', param);\n      delete this.interupted;\n      delete this.moved;\n    }\n    this.fire('mouseup', param);\n  };\n  _proto._offEvents = function _offEvents() {\n    var dom = this.dom;\n    off(dom, 'mouseleave', this.onMouseUp, this);\n    if (typeof document === 'undefined' || typeof window === 'undefined') {\n      return;\n    }\n    for (var i in MOVE_EVENTS) {\n      off(document, MOVE_EVENTS[i], this.onMouseMove, this);\n      off(document, END_EVENTS[i], this.onMouseUp, this);\n    }\n    if (dom['releaseCapture']) {\n      dom['releaseCapture']();\n    } else if (window.captureEvents) {\n      window.captureEvents(window['Event'].MOUSEMOVE | window['Event'].MOUSEUP);\n    }\n  };\n  return DragHandler;\n}(Handler$1);\n\nvar Coordinate = function (_Position) {\n  _inheritsLoose(Coordinate, _Position);\n  function Coordinate() {\n    return _Position.apply(this, arguments) || this;\n  }\n  Coordinate.toNumberArrays = function toNumberArrays(coordinates) {\n    if (!Array.isArray(coordinates)) {\n      return [coordinates.x, coordinates.y];\n    }\n    return forEachCoord(coordinates, function (coord) {\n      return [coord.x, coord.y];\n    });\n  };\n  Coordinate.toCoordinates = function toCoordinates(coordinates) {\n    if (isNumber(coordinates[0]) && isNumber(coordinates[1])) {\n      return new Coordinate(coordinates);\n    }\n    if (coordinates instanceof Coordinate) {\n      return coordinates;\n    }\n    var result = [];\n    for (var i = 0, len = coordinates.length; i < len; i++) {\n      var child = coordinates[i];\n      if (Array.isArray(child)) {\n        if (isNumber(child[0])) {\n          result.push(new Coordinate(child));\n        } else {\n          result.push(Coordinate.toCoordinates(child));\n        }\n      } else if (child instanceof Coordinate) {\n        result.push(child);\n      } else {\n        result.push(new Coordinate(child));\n      }\n    }\n    return result;\n  };\n  return Coordinate;\n}(Position);\n\nvar CRS = function () {\n  function CRS(type, properties) {\n    this.type = type;\n    this.properties = properties;\n  }\n  CRS.createProj4 = function createProj4(proj) {\n    return new CRS('proj4', {\n      'proj': proj\n    });\n  };\n  CRS.fromProjectionCode = function fromProjectionCode(code) {\n    if (!code) {\n      return null;\n    }\n    code = code.toUpperCase().replace(':', '');\n    return CRS[code] || null;\n  };\n  return CRS;\n}();\nCRS.WGS84 = CRS.createProj4('+proj=longlat +datum=WGS84 +no_defs');\nCRS.EPSG4326 = CRS.WGS84;\nCRS.EPSG3857 = CRS.createProj4('+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs');\nCRS.IDENTITY = CRS.createProj4('+proj=identity +no_defs');\nCRS.CGCS2000 = CRS.createProj4('+proj=longlat +datum=CGCS2000');\nCRS.EPSG4490 = CRS.CGCS2000;\nCRS.BD09LL = CRS.createProj4('+proj=longlat +datum=BD09');\nCRS.GCJ02 = CRS.createProj4('+proj=longlat +datum=GCJ02');\n\nvar TEMP_POINT0 = new Point(0, 0);\nvar TEMP_COORD0 = new Coordinate(0, 0);\nvar TEMP_COORD1 = new Coordinate(0, 0);\nvar TEMP_COORD2 = new Coordinate(0, 0);\nvar TEMP_COORD3 = new Coordinate(0, 0);\nvar TEMP_COORD4 = new Coordinate(0, 0);\nvar TEMP_COORD5 = new Coordinate(0, 0);\nvar TEMP_COORD6 = new Coordinate(0, 0);\nvar TEMP_COORD7 = new Coordinate(0, 0);\nvar MINMAX = [];\nvar TEMP_EXTENT;\nvar TEMP_COMBINE = [];\nvar Extent = function () {\n  function Extent(p1, p2, p3, p4) {\n    this._clazz = Coordinate;\n    var l = arguments.length;\n    var proj = l > 0 ? arguments[l - 1] : null;\n    if (proj && proj.unproject) {\n      this.projection = arguments[l - 1];\n    }\n    this._dirty = true;\n    this._initialize(p1, p2, p3, p4);\n  }\n  var _proto = Extent.prototype;\n  _proto._initialize = function _initialize(p1, p2, p3, p4) {\n    this.xmin = null;\n    this.xmax = null;\n    this.ymin = null;\n    this.ymax = null;\n    if (isNil(p1)) {\n      return;\n    }\n    var projection = this.projection;\n    if (isNumber(p1) && isNumber(p2) && isNumber(p3) && isNumber(p4)) {\n      if (projection) {\n        this.set(p1, p2, p3, p4);\n      } else {\n        this.set(Math.min(p1, p3), Math.min(p2, p4), Math.max(p1, p3), Math.max(p2, p4));\n      }\n      return;\n    } else if (Array.isArray(p1)) {\n      if (projection) {\n        this.set(p1[0], p1[1], p1[2], p1[3]);\n      } else {\n        this.set(Math.min(p1[0], p1[2]), Math.min(p1[1], p1[3]), Math.max(p1[0], p1[2]), Math.max(p1[1], p1[3]));\n      }\n    } else if (isNumber(p1.x) && isNumber(p2.x) && isNumber(p1.y) && isNumber(p2.y)) {\n      if (projection) {\n        this.set(p1.x, p1.y, p2.x, p2.y);\n      } else {\n        if (p1.x > p2.x) {\n          this['xmin'] = p2.x;\n          this['xmax'] = p1.x;\n        } else {\n          this['xmin'] = p1.x;\n          this['xmax'] = p2.x;\n        }\n        if (p1.y > p2.y) {\n          this['ymin'] = p2.y;\n          this['ymax'] = p1.y;\n        } else {\n          this['ymin'] = p1.y;\n          this['ymax'] = p2.y;\n        }\n      }\n    } else if (isNumber(p1['xmin']) && isNumber(p1['xmax']) && isNumber(p1['ymin']) && isNumber(p1['ymax'])) {\n      this.set(p1['xmin'], p1['ymin'], p1['xmax'], p1['ymax']);\n    }\n  };\n  _proto._add = function _add(p) {\n    this._dirty = true;\n    if (!isNil(p.x)) {\n      this['xmin'] += p.x;\n      this['ymin'] += p.y;\n      this['xmax'] += p.x;\n      this['ymax'] += p.y;\n    } else if (!isNil(p.xmin)) {\n      this['xmin'] += p.xmin;\n      this['ymin'] += p.ymin;\n      this['xmax'] += p.xmax;\n      this['ymax'] += p.ymax;\n    } else if (!isNil(p[0])) {\n      this['xmin'] += p[0];\n      this['ymin'] += p[1];\n      this['xmax'] += p[0];\n      this['ymax'] += p[1];\n    }\n    return this;\n  };\n  _proto.add = function add() {\n    var e = new this.constructor(this['xmin'], this['ymin'], this['xmax'], this['ymax'], this.projection);\n    return e._add.apply(e, arguments);\n  };\n  _proto._scale = function _scale(s) {\n    this._dirty = true;\n    this['xmin'] *= s;\n    this['ymin'] *= s;\n    this['xmax'] *= s;\n    this['ymax'] *= s;\n    return this;\n  };\n  _proto._sub = function _sub(p) {\n    this._dirty = true;\n    if (!isNil(p.x)) {\n      this['xmin'] -= p.x;\n      this['ymin'] -= p.y;\n      this['xmax'] -= p.x;\n      this['ymax'] -= p.y;\n    } else if (!isNil(p.xmin)) {\n      this['xmin'] -= p.xmin;\n      this['ymin'] -= p.ymin;\n      this['xmax'] -= p.xmax;\n      this['ymax'] -= p.ymax;\n    } else if (!isNil(p[0])) {\n      this['xmin'] -= p[0];\n      this['ymin'] -= p[1];\n      this['xmax'] -= p[0];\n      this['ymax'] -= p[1];\n    }\n    return this;\n  };\n  _proto._substract = function _substract() {\n    return this._sub.apply(this, arguments);\n  };\n  _proto.sub = function sub() {\n    var e = new this.constructor(this['xmin'], this['ymin'], this['xmax'], this['ymax'], this.projection);\n    return e._sub.apply(e, arguments);\n  };\n  _proto.substract = function substract() {\n    return this.sub.apply(this, arguments);\n  };\n  _proto.round = function round() {\n    return new this.constructor(Math.round(this['xmin']), Math.round(this['ymin']), Math.round(this['xmax']), Math.round(this['ymax']), this.projection);\n  };\n  _proto._round = function _round() {\n    this._dirty = true;\n    this['xmin'] = Math.round(this['xmin']);\n    this['ymin'] = Math.round(this['ymin']);\n    this['xmax'] = Math.round(this['xmax']);\n    this['ymax'] = Math.round(this['ymax']);\n    return this;\n  };\n  _proto.getMin = function getMin(out) {\n    if (out) {\n      out.set(this['xmin'], this['ymin']);\n      return out;\n    }\n    return new this._clazz(this['xmin'], this['ymin']);\n  };\n  _proto.getMax = function getMax(out) {\n    if (out) {\n      out.set(this['xmax'], this['ymax']);\n      return out;\n    }\n    return new this._clazz(this['xmax'], this['ymax']);\n  };\n  _proto.getCenter = function getCenter(out) {\n    var x = (this['xmin'] + this['xmax']) / 2;\n    var y = (this['ymin'] + this['ymax']) / 2;\n    if (out) {\n      out.set(x, y);\n      return out;\n    }\n    return new this._clazz(x, y);\n  };\n  _proto.isValid = function isValid() {\n    return !isNil(this['xmin']) && !isNil(this['ymin']) && !isNil(this['xmax']) && !isNil(this['ymax']);\n  };\n  _proto.equals = function equals(ext2) {\n    return this['xmin'] === ext2['xmin'] && this['xmax'] === ext2['xmax'] && this['ymin'] === ext2['ymin'] && this['ymax'] === ext2['ymax'];\n  };\n  _proto.intersects = function intersects(ext2) {\n    this._project(this);\n    this._project(ext2);\n    var rxmin = Math.max(this['pxmin'], ext2['pxmin']);\n    var rymin = Math.max(this['pymin'], ext2['pymin']);\n    var rxmax = Math.min(this['pxmax'], ext2['pxmax']);\n    var rymax = Math.min(this['pymax'], ext2['pymax']);\n    var intersects = !(rxmin > rxmax || rymin > rymax);\n    return intersects;\n  };\n  _proto.within = function within(extent) {\n    this._project(this);\n    this._project(extent);\n    return this.pxmin >= extent.pxmin && this.pxmax <= extent.pxmax && this.pymin >= extent.pymin && this.pymax <= extent.pymax;\n  };\n  _proto.contains = function contains(c) {\n    if (!c) {\n      return false;\n    }\n    this._project(this);\n    var proj = this.projection;\n    if (proj) {\n      if (c.x !== undefined) {\n        var coord = TEMP_COORD0;\n        if (Array.isArray(c)) {\n          coord.x = c[0];\n          coord.y = c[1];\n        } else {\n          coord.x = c.x;\n          coord.y = c.y;\n        }\n        c = proj.project(coord, coord);\n      } else if (c.xmin !== undefined) {\n        this._project(c);\n      }\n    }\n    return (c.x || c.pxmin || 0) >= this.pxmin && (c.x || c.pxmax || 0) <= this.pxmax && (c.y || c.pymin || 0) >= this.pymin && (c.y || c.pymax || 0) <= this.pymax;\n  };\n  _proto.getWidth = function getWidth() {\n    return Math.abs(this['xmax'] - this['xmin']);\n  };\n  _proto.getHeight = function getHeight() {\n    return Math.abs(this['ymax'] - this['ymin']);\n  };\n  _proto.getSize = function getSize() {\n    return new Size(this.getWidth(), this.getHeight());\n  };\n  _proto.set = function set(xmin, ymin, xmax, ymax) {\n    this.xmin = xmin;\n    this.ymin = ymin;\n    this.xmax = xmax;\n    this.ymax = ymax;\n    this._dirty = true;\n    return this;\n  };\n  _proto.__combine = function __combine(extent) {\n    if (extent.x !== undefined) {\n      TEMP_EXTENT.xmin = TEMP_EXTENT.xmax = extent.x;\n      TEMP_EXTENT.ymin = TEMP_EXTENT.ymax = extent.y;\n      extent = TEMP_EXTENT;\n    }\n    this._project(extent);\n    this._project(this);\n    var inited = isNumber(this.pxmin);\n    var xmin, ymin, xmax, ymax;\n    if (!inited) {\n      xmin = extent['pxmin'];\n      ymin = extent['pymin'];\n      xmax = extent['pxmax'];\n      ymax = extent['pymax'];\n    } else {\n      xmin = Math.min(this['pxmin'], extent['pxmin']);\n      ymin = Math.min(this['pymin'], extent['pymin']);\n      xmax = Math.max(this['pxmax'], extent['pxmax']);\n      ymax = Math.max(this['pymax'], extent['pymax']);\n    }\n    var proj = this.projection;\n    if (proj) {\n      TEMP_COORD1.set(xmin, ymin);\n      TEMP_COORD2.set(xmax, ymax);\n      var min = proj.unproject(TEMP_COORD1, TEMP_COORD1),\n        max = proj.unproject(TEMP_COORD2, TEMP_COORD2);\n      xmin = min.x;\n      ymin = min.y;\n      xmax = max.x;\n      ymax = max.y;\n    }\n    TEMP_COMBINE[0] = xmin;\n    TEMP_COMBINE[1] = ymin;\n    TEMP_COMBINE[2] = xmax;\n    TEMP_COMBINE[3] = ymax;\n    return TEMP_COMBINE;\n  };\n  _proto._combine = function _combine(extent) {\n    if (!extent || extent.isValid && !extent.isValid()) {\n      return this;\n    }\n    var ext = this.__combine(extent);\n    this.set(ext[0], ext[1], ext[2], ext[3]);\n    this._dirty = true;\n    return this;\n  };\n  _proto.combine = function combine(extent) {\n    if (!extent || extent.isValid && !extent.isValid()) {\n      return this;\n    }\n    var ext = this.__combine(extent);\n    return new this.constructor(ext[0], ext[1], ext[2], ext[3], this.projection);\n  };\n  _proto.intersection = function intersection(extent) {\n    if (!this.intersects(extent)) {\n      return null;\n    }\n    TEMP_COORD3.x = Math.max(this['pxmin'], extent['pxmin']);\n    TEMP_COORD3.y = Math.max(this['pymin'], extent['pymin']);\n    TEMP_COORD4.x = Math.min(this['pxmax'], extent['pxmax']);\n    TEMP_COORD4.y = Math.min(this['pymax'], extent['pymax']);\n    var min = TEMP_COORD3,\n      max = TEMP_COORD4;\n    var proj = this.projection;\n    if (proj) {\n      min = proj.unproject(min, min);\n      max = proj.unproject(max, max);\n    }\n    return new this.constructor(min, max, proj);\n  };\n  _proto.expand = function expand(distance) {\n    var w, h;\n    if (!isNumber(distance)) {\n      w = distance['width'] || distance['x'] || distance[0] || 0;\n      h = distance['height'] || distance['y'] || distance[1] || 0;\n    } else {\n      w = h = distance;\n    }\n    return new this.constructor(this['xmin'] - w, this['ymin'] - h, this['xmax'] + w, this['ymax'] + h, this.projection);\n  };\n  _proto._expand = function _expand(distance) {\n    var w, h;\n    if (!isNumber(distance)) {\n      w = distance['width'] || distance['x'] || distance[0] || 0;\n      h = distance['height'] || distance['y'] || distance[1] || 0;\n    } else {\n      w = h = distance;\n    }\n    this['xmin'] -= w;\n    this['ymin'] -= h;\n    this['xmax'] += w;\n    this['ymax'] += h;\n    this._dirty = true;\n    return this;\n  };\n  _proto.toJSON = function toJSON() {\n    return {\n      'xmin': this['xmin'],\n      'ymin': this['ymin'],\n      'xmax': this['xmax'],\n      'ymax': this['ymax']\n    };\n  };\n  _proto.toArray = function toArray(out) {\n    var xmin = this['xmin'],\n      ymin = this['ymin'],\n      xmax = this['xmax'],\n      ymax = this['ymax'];\n    if (!out) {\n      return [new this._clazz([xmin, ymax]), new this._clazz([xmax, ymax]), new this._clazz([xmax, ymin]), new this._clazz([xmin, ymin]), new this._clazz([xmin, ymax])];\n    } else {\n      out[0].x = xmin;\n      out[0].y = ymax;\n      out[1].x = xmax;\n      out[1].y = ymax;\n      out[2].x = xmax;\n      out[2].y = ymin;\n      out[3].x = xmin;\n      out[3].y = ymin;\n      out[4].x = xmin;\n      out[4].y = ymax;\n      return out;\n    }\n  };\n  _proto.toString = function toString() {\n    return this.xmin + \",\" + this.ymin + \",\" + this.xmax + \",\" + this.ymax;\n  };\n  _proto.copy = function copy() {\n    return new this.constructor(this['xmin'], this['ymin'], this['xmax'], this['ymax'], this.projection);\n  };\n  _proto.convertTo = function convertTo(fn, out) {\n    if (!this.isValid()) {\n      return null;\n    }\n    var e = out || new this.constructor();\n    if (out) {\n      e.set(null, null, null, null);\n    }\n    var coord;\n    if (this._clazz === Coordinate) {\n      coord = TEMP_COORD5;\n    } else if (this._clazz === Point) {\n      coord = TEMP_POINT0;\n    }\n    coord.x = this.xmin;\n    coord.y = this.ymax;\n    e._combine(fn(coord));\n    coord.x = this.xmax;\n    e._combine(fn(coord));\n    coord.y = this.ymin;\n    e._combine(fn(coord));\n    coord.x = this.xmin;\n    e._combine(fn(coord));\n    return e;\n  };\n  _proto._project = function _project(ext) {\n    if (!ext || !ext.isValid()) {\n      if (ext) {\n        ext.pxmin = ext.pxmax = ext.pymin = ext.pymax = null;\n      }\n      return;\n    }\n    var proj = this.projection;\n    if (proj) {\n      if (ext._dirty) {\n        TEMP_COORD6.set(ext.xmax, ext.ymin);\n        TEMP_COORD7.set(ext.xmin, ext.ymax);\n        MINMAX[0] = TEMP_COORD6;\n        MINMAX[1] = TEMP_COORD7;\n        var minmax = proj.projectCoords(MINMAX);\n        var min = minmax[0],\n          max = minmax[1];\n        ext.pxmin = Math.min(min.x, max.x);\n        ext.pymin = Math.min(min.y, max.y);\n        ext.pxmax = Math.max(min.x, max.x);\n        ext.pymax = Math.max(min.y, max.y);\n      }\n      delete ext._dirty;\n    } else {\n      ext.pxmin = ext.xmin;\n      ext.pxmax = ext.xmax;\n      ext.pymin = ext.ymin;\n      ext.pymax = ext.ymax;\n    }\n  };\n  return Extent;\n}();\nTEMP_EXTENT = new Extent(0, 0, 0, 0);\n\nvar PointExtent = function (_Extent) {\n  _inheritsLoose(PointExtent, _Extent);\n  function PointExtent(p1, p2, p3, p4) {\n    var _this;\n    _this = _Extent.call(this, p1, p2, p3, p4) || this;\n    _this._clazz = Point;\n    return _this;\n  }\n  return PointExtent;\n}(Extent);\n\nvar Transformation = function () {\n  function Transformation(matrix) {\n    this.matrix = matrix;\n  }\n  var _proto = Transformation.prototype;\n  _proto.transform = function transform(coordinates, scale, out) {\n    var x = this.matrix[0] * (coordinates.x - this.matrix[2]) / scale;\n    var y = -this.matrix[1] * (coordinates.y - this.matrix[3]) / scale;\n    if (out) {\n      out.x = x;\n      out.y = y;\n      return out;\n    }\n    return new Point(x, y);\n  };\n  _proto.untransform = function untransform(point, scale, out) {\n    var x = point.x * scale / this.matrix[0] + this.matrix[2];\n    var y = point.y * scale / -this.matrix[1] + this.matrix[3];\n    if (out) {\n      out.x = x;\n      out.y = y;\n      return out;\n    }\n    return new Coordinate(x, y);\n  };\n  return Transformation;\n}();\n\nvar Common = {\n  project: function project() {},\n  unproject: function unproject() {},\n  projectCoords: function projectCoords(coordinates, antiMeridian) {\n    var _this = this;\n    if (!coordinates) {\n      return [];\n    }\n    if (!Array.isArray(coordinates)) {\n      return this.project(coordinates);\n    }\n    if (coordinates.length === 0) {\n      return [];\n    }\n    if (!this.isSphere()) {\n      return forEachCoord(coordinates, this.project, this);\n    }\n    if (Array.isArray(coordinates[0])) {\n      return coordinates.map(function (coords) {\n        return _this.projectCoords(coords, antiMeridian);\n      });\n    } else {\n      var antiMeridianEnable = antiMeridian !== false;\n      var circum = this.getCircum();\n      var extent = this.getSphereExtent(),\n        sx = extent.sx,\n        sy = extent.sy;\n      var wrapX, wrapY;\n      var pre = coordinates[0],\n        current,\n        dx,\n        dy,\n        p;\n      var prj = [this.project(pre)];\n      for (var i = 1, l = coordinates.length; i < l; i++) {\n        current = coordinates[i];\n        dx = current.x - pre.x;\n        dy = current.y - pre.y;\n        p = this.project(current);\n        if (Math.abs(dx) > 180 && antiMeridianEnable) {\n          if (wrapX === undefined) {\n            wrapX = current.x > pre.x;\n          }\n          if (wrapX) {\n            p._add(-circum.x * sign(dx) * sx, 0);\n            current._add(-360 * sign(dx), 0);\n          }\n        }\n        if (Math.abs(dy) > 90 && antiMeridianEnable) {\n          if (wrapY === undefined) {\n            wrapY = current.y < pre.y;\n          }\n          if (wrapY) {\n            p._add(0, -circum.y * sign(dy) * sy);\n            current._add(0, -180 * sign(dy));\n          }\n        }\n        pre = current;\n        prj.push(p);\n      }\n      return prj;\n    }\n  },\n  unprojectCoords: function unprojectCoords(projCoords) {\n    if (!projCoords) {\n      return [];\n    }\n    if (!Array.isArray(projCoords)) {\n      return this.unproject(projCoords);\n    }\n    return forEachCoord(projCoords, this.unproject, this);\n  },\n  isSphere: function isSphere() {\n    return !!this.sphere;\n  },\n  isOutSphere: function isOutSphere(pcoord) {\n    if (!this.isSphere()) {\n      return false;\n    }\n    var extent = this.getSphereExtent();\n    return !extent.contains(pcoord);\n  },\n  wrapCoord: function wrapCoord(pcoord) {\n    if (!this.isSphere()) {\n      return pcoord;\n    }\n    var extent = this.getSphereExtent();\n    var wrapped = new Coordinate(pcoord);\n    if (!extent.contains(wrapped)) {\n      wrapped.x = wrap(pcoord.x, extent.xmin, extent.xmax);\n      wrapped.y = wrap(pcoord.y, extent.ymin, extent.ymax);\n    }\n    return wrapped;\n  },\n  getCircum: function getCircum() {\n    if (!this.circum && this.isSphere()) {\n      var extent = this.getSphereExtent();\n      this.circum = {\n        x: extent.getWidth(),\n        y: extent.getHeight()\n      };\n    }\n    return this.circum;\n  },\n  getSphereExtent: function getSphereExtent() {\n    if (!this.extent && this.isSphere()) {\n      var max = this.project(new Coordinate(180, 90)),\n        min = this.project(new Coordinate(-180, -90));\n      this.extent = new Extent(min, max, this);\n      this.extent.sx = max.x > min.x ? 1 : -1;\n      this.extent.sy = max.y > min.y ? 1 : -1;\n    }\n    return this.extent;\n  }\n};\n\nvar Common$1 = {\n  measureLength: function measureLength(c1, c2) {\n    if (!Array.isArray(c1)) {\n      return this.measureLenBetween(c1, c2);\n    }\n    var len = 0;\n    for (var i = 0, l = c1.length; i < l - 1; i++) {\n      len += this.measureLenBetween(c1[i], c1[i + 1]);\n    }\n    return len;\n  }\n};\n\nvar Identity = extend({\n  'measure': 'IDENTITY',\n  measureLenBetween: function measureLenBetween(c1, c2) {\n    if (!c1 || !c2) {\n      return 0;\n    }\n    try {\n      return Math.sqrt(Math.pow(c1.x - c2.x, 2) + Math.pow(c1.y - c2.y, 2));\n    } catch (err) {\n      return 0;\n    }\n  },\n  measureArea: function measureArea(coordinates) {\n    if (!Array.isArray(coordinates)) {\n      return 0;\n    }\n    var area = 0;\n    for (var i = 0, len = coordinates.length; i < len; i++) {\n      var c1 = coordinates[i];\n      var c2 = null;\n      if (i === len - 1) {\n        c2 = coordinates[0];\n      } else {\n        c2 = coordinates[i + 1];\n      }\n      area += c1.x * c2.y - c1.y * c2.x;\n    }\n    return Math.abs(area / 2);\n  },\n  locate: function locate(c, xDist, yDist, out) {\n    out = out || new Coordinate(0, 0);\n    out.set(c.x, c.y);\n    return this._locate(out, xDist, yDist);\n  },\n  _locate: function _locate(c, xDist, yDist) {\n    if (!c) {\n      return null;\n    }\n    if (!xDist) {\n      xDist = 0;\n    }\n    if (!yDist) {\n      yDist = 0;\n    }\n    if (!xDist && !yDist) {\n      return c;\n    }\n    c.x = c.x + xDist;\n    c.y = c.y + yDist;\n    return c;\n  },\n  rotate: function rotate(c, pivot, angle) {\n    c = new Coordinate(c.x, c.y);\n    return this._rotate(c, pivot, angle);\n  },\n  _rotate: function () {\n    var tmp = new Point(0, 0);\n    return function (c, pivot, angle) {\n      tmp.x = c.x - pivot.x;\n      tmp.y = c.y - pivot.y;\n      tmp._rotate(angle * Math.PI / 180);\n      c.x = pivot.x + tmp.x;\n      c.y = pivot.y + tmp.y;\n      return c;\n    };\n  }()\n}, Common$1);\n\nvar Sphere = function () {\n  function Sphere(radius) {\n    this.radius = radius;\n  }\n  var _proto = Sphere.prototype;\n  _proto.measureLenBetween = function measureLenBetween(c1, c2) {\n    if (!c1 || !c2) {\n      return 0;\n    }\n    var b = toRadian(c1.y);\n    var d = toRadian(c2.y),\n      e = b - d,\n      f = toRadian(c1.x) - toRadian(c2.x);\n    b = 2 * Math.asin(Math.sqrt(Math.pow(Math.sin(e / 2), 2) + Math.cos(b) * Math.cos(d) * Math.pow(Math.sin(f / 2), 2)));\n    b *= this.radius;\n    return b;\n  };\n  _proto.measureArea = function measureArea(coordinates) {\n    var a = toRadian(this.radius);\n    var b = 0,\n      c = coordinates,\n      d = c.length;\n    if (d < 3) {\n      return 0;\n    }\n    var i;\n    for (i = 0; i < d - 1; i++) {\n      var e = c[i],\n        f = c[i + 1];\n      b += e.x * a * Math.cos(toRadian(e.y)) * f.y * a - f.x * a * Math.cos(toRadian(f.y)) * e.y * a;\n    }\n    d = c[i];\n    c = c[0];\n    b += d.x * a * Math.cos(toRadian(d.y)) * c.y * a - c.x * a * Math.cos(toRadian(c.y)) * d.y * a;\n    return 0.5 * Math.abs(b);\n  };\n  _proto.locate = function locate(c, xDist, yDist, out) {\n    out = out || new Coordinate(0, 0);\n    out.set(c.x, c.y);\n    return this._locate(out, xDist, yDist);\n  };\n  _proto._locate = function _locate(c, xDist, yDist) {\n    if (!c) {\n      return null;\n    }\n    if (!xDist) {\n      xDist = 0;\n    }\n    if (!yDist) {\n      yDist = 0;\n    }\n    if (!xDist && !yDist) {\n      return c;\n    }\n    var x, y;\n    var ry = toRadian(c.y);\n    if (yDist !== 0) {\n      var dy = Math.abs(yDist);\n      var sy = Math.sin(dy / (2 * this.radius)) * 2;\n      ry = ry + sy * (yDist > 0 ? 1 : -1);\n      y = wrap(ry * 180 / Math.PI, -90, 90);\n    } else {\n      y = c.y;\n    }\n    if (xDist !== 0) {\n      var dx = Math.abs(xDist);\n      var rx = toRadian(c.x);\n      var sx = 2 * Math.sqrt(Math.pow(Math.sin(dx / (2 * this.radius)), 2) / Math.pow(Math.cos(ry), 2));\n      rx = rx + sx * (xDist > 0 ? 1 : -1);\n      x = wrap(rx * 180 / Math.PI, -180, 180);\n    } else {\n      x = c.x;\n    }\n    c.x = x;\n    c.y = y;\n    return c;\n  };\n  _proto.rotate = function rotate(c, pivot, angle) {\n    c = new Coordinate(c);\n    return this._rotate(c, pivot, angle);\n  };\n  _proto._rotate = function _rotate(c, pivot, angle) {\n    var initialAngle = rhumbBearing(pivot, c);\n    var finalAngle = initialAngle - angle;\n    var distance = this.measureLenBetween(pivot, c);\n    c.x = pivot.x;\n    c.y = pivot.y;\n    return calculateRhumbDestination(c, distance, finalAngle, this.radius);\n  };\n  return Sphere;\n}();\nfunction rhumbBearing(start, end, options) {\n  if (options === void 0) {\n    options = {};\n  }\n  var bear360;\n  if (options.final) bear360 = calculateRhumbBearing(end, start);else bear360 = calculateRhumbBearing(start, end);\n  var bear180 = bear360 > 180 ? -(360 - bear360) : bear360;\n  return bear180;\n}\nfunction calculateRhumbBearing(from, to) {\n  var phi1 = toRadian(from.y);\n  var phi2 = toRadian(to.y);\n  var deltaLambda = toRadian(to.x - from.x);\n  if (deltaLambda > Math.PI) deltaLambda -= 2 * Math.PI;\n  if (deltaLambda < -Math.PI) deltaLambda += 2 * Math.PI;\n  var deltaPsi = Math.log(Math.tan(phi2 / 2 + Math.PI / 4) / Math.tan(phi1 / 2 + Math.PI / 4));\n  var theta = Math.atan2(deltaLambda, deltaPsi);\n  return (toDegree(theta) + 360) % 360;\n}\nfunction calculateRhumbDestination(origin, distance, bearing, radius) {\n  var delta = distance / radius;\n  var lambda1 = origin.x * Math.PI / 180;\n  var phi1 = toRadian(origin.y);\n  var theta = toRadian(bearing);\n  var DeltaPhi = delta * Math.cos(theta);\n  var phi2 = phi1 + DeltaPhi;\n  if (Math.abs(phi2) > Math.PI / 2) phi2 = phi2 > 0 ? Math.PI - phi2 : -Math.PI - phi2;\n  var DeltaPsi = Math.log(Math.tan(phi2 / 2 + Math.PI / 4) / Math.tan(phi1 / 2 + Math.PI / 4));\n  var q = Math.abs(DeltaPsi) > 10e-12 ? DeltaPhi / DeltaPsi : Math.cos(phi1);\n  var DeltaLambda = delta * Math.sin(theta) / q;\n  var lambda2 = lambda1 + DeltaLambda;\n  origin.x = (lambda2 * 180 / Math.PI + 540) % 360 - 180;\n  origin.y = phi2 * 180 / Math.PI;\n  return origin;\n}\nvar WGS84Sphere = extend({\n  'measure': 'EPSG:4326',\n  sphere: new Sphere(6378137),\n  measureLenBetween: function measureLenBetween() {\n    return this.sphere.measureLenBetween.apply(this.sphere, arguments);\n  },\n  measureArea: function measureArea() {\n    return this.sphere.measureArea.apply(this.sphere, arguments);\n  },\n  _locate: function _locate() {\n    return this.sphere._locate.apply(this.sphere, arguments);\n  },\n  locate: function locate() {\n    return this.sphere.locate.apply(this.sphere, arguments);\n  },\n  _rotate: function _rotate() {\n    return this.sphere._rotate.apply(this.sphere, arguments);\n  },\n  rotate: function rotate() {\n    return this.sphere.rotate.apply(this.sphere, arguments);\n  }\n}, Common$1);\nvar BaiduSphere = extend({\n  'measure': 'BAIDU',\n  sphere: new Sphere(6370996.81),\n  measureLenBetween: function measureLenBetween() {\n    return this.sphere.measureLenBetween.apply(this.sphere, arguments);\n  },\n  measureArea: function measureArea() {\n    return this.sphere.measureArea.apply(this.sphere, arguments);\n  },\n  _locate: function _locate() {\n    return this.sphere._locate.apply(this.sphere, arguments);\n  },\n  locate: function locate() {\n    return this.sphere.locate.apply(this.sphere, arguments);\n  },\n  _rotate: function _rotate() {\n    return this.sphere._rotate.apply(this.sphere, arguments);\n  },\n  rotate: function rotate() {\n    return this.sphere.rotate.apply(this.sphere, arguments);\n  }\n}, Common$1);\n\nvar DEFAULT = WGS84Sphere;\nvar measurers = {};\nfunction registerMeasurer(m) {\n  measurers[m.measure] = m;\n}\nregisterMeasurer(Identity);\nregisterMeasurer(WGS84Sphere);\nregisterMeasurer(BaiduSphere);\nvar Measurer = {\n  getInstance: function getInstance(name) {\n    if (!name) {\n      return DEFAULT;\n    }\n    for (var p in measurers) {\n      if (hasOwn(measurers, p)) {\n        var mName = measurers[p]['measure'];\n        if (!mName) {\n          continue;\n        }\n        if (name.toLowerCase() === mName.toLowerCase()) {\n          return measurers[p];\n        }\n      }\n    }\n    return null;\n  }\n};\n\nvar index$2 = /*#__PURE__*/Object.freeze({\n  Identity: Identity,\n  DEFAULT: DEFAULT,\n  Measurer: Measurer,\n  WGS84Sphere: WGS84Sphere,\n  BaiduSphere: BaiduSphere\n});\n\nvar delta = 1E-7;\nvar EPSG3857 = extend({}, Common, {\n  code: 'EPSG:3857',\n  rad: Math.PI / 180,\n  metersPerDegree: 6378137 * Math.PI / 180,\n  maxLatitude: 85.0511287798,\n  project: function project(lnglat, out) {\n    var rad = this.rad,\n      metersPerDegree = this.metersPerDegree,\n      max = this.maxLatitude;\n    var lng = lnglat.x,\n      lat = Math.max(Math.min(max, lnglat.y), -max);\n    var c;\n    if (lat === 0) {\n      c = 0;\n    } else {\n      c = Math.log(Math.tan((90 + lat) * rad / 2)) / rad;\n    }\n    var x = lng * metersPerDegree;\n    var y = c * metersPerDegree;\n    if (out) {\n      out.x = x;\n      out.y = y;\n      return out;\n    }\n    return new Coordinate(x, y);\n  },\n  unproject: function unproject(pLnglat, out) {\n    var rad = this.rad;\n    var metersPerDegree = this.metersPerDegree;\n    var x = pLnglat.x / metersPerDegree;\n    var y = pLnglat.y;\n    var c;\n    if (y === 0) {\n      c = 0;\n    } else {\n      c = y / metersPerDegree;\n      c = (2 * Math.atan(Math.exp(c * rad)) - Math.PI / 2) / rad;\n    }\n    if (Math.abs(Math.abs(x) - 180) < delta) {\n      x = sign(x) * 180;\n    }\n    if (Math.abs(Math.abs(c) - this.maxLatitude) < delta) {\n      c = sign(c) * this.maxLatitude;\n    }\n    var rx = wrap(x, -180, 180);\n    var ry = wrap(c, -this.maxLatitude, this.maxLatitude);\n    if (out) {\n      out.x = rx;\n      out.y = ry;\n      return out;\n    }\n    return new Coordinate(rx, ry);\n  }\n}, WGS84Sphere);\n\nvar PROJ4326 = extend({}, Common, {\n  code: 'EPSG:4326',\n  project: function project(p, out) {\n    if (out) {\n      out.x = p.x;\n      out.y = p.y;\n      return out;\n    }\n    return new Coordinate(p);\n  },\n  unproject: function unproject(p, out) {\n    if (out) {\n      out.x = p.x;\n      out.y = p.y;\n      return out;\n    }\n    return new Coordinate(p);\n  }\n}, WGS84Sphere);\n\nvar Projection_EPSG4490 = extend({}, PROJ4326, {\n  code: 'EPSG:4490'\n});\n\nvar Projection_Baidu = extend({}, Common, {\n  code: 'BAIDU',\n  project: function project(p, out) {\n    return this.convertLL2MC(p, out);\n  },\n  unproject: function unproject(p, out) {\n    return this.convertMC2LL(p, out);\n  }\n}, BaiduSphere, {\n  EARTHRADIUS: 6370996.81,\n  MCBAND: [12890594.86, 8362377.87, 5591021, 3481989.83, 1678043.12, 0],\n  LLBAND: [75, 60, 45, 30, 15, 0],\n  MC2LL: [[1.410526172116255e-8, 0.00000898305509648872, -1.9939833816331, 200.9824383106796, -187.2403703815547, 91.6087516669843, -23.38765649603339, 2.57121317296198, -0.03801003308653, 17337981.2], [-7.435856389565537e-9, 0.000008983055097726239, -0.78625201886289, 96.32687599759846, -1.85204757529826, -59.36935905485877, 47.40033549296737, -16.50741931063887, 2.28786674699375, 10260144.86], [-3.030883460898826e-8, 0.00000898305509983578, 0.30071316287616, 59.74293618442277, 7.357984074871, -25.38371002664745, 13.45380521110908, -3.29883767235584, 0.32710905363475, 6856817.37], [-1.981981304930552e-8, 0.000008983055099779535, 0.03278182852591, 40.31678527705744, 0.65659298677277, -4.44255534477492, 0.85341911805263, 0.12923347998204, -0.04625736007561, 4482777.06], [3.09191371068437e-9, 0.000008983055096812155, 0.00006995724062, 23.10934304144901, -0.00023663490511, -0.6321817810242, -0.00663494467273, 0.03430082397953, -0.00466043876332, 2555164.4], [2.890871144776878e-9, 0.000008983055095805407, -3.068298e-8, 7.47137025468032, -0.00000353937994, -0.02145144861037, -0.00001234426596, 0.00010322952773, -0.00000323890364, 826088.5]],\n  LL2MC: [[-0.0015702102444, 111320.7020616939, 1704480524535203, -10338987376042340, 26112667856603880, -35149669176653700, 26595700718403920, -10725012454188240, 1800819912950474, 82.5], [0.0008277824516172526, 111320.7020463578, 647795574.6671607, -4082003173.641316, 10774905663.51142, -15171875531.51559, 12053065338.62167, -5124939663.577472, 913311935.9512032, 67.5], [0.00337398766765, 111320.7020202162, 4481351.045890365, -23393751.19931662, 79682215.47186455, -115964993.2797253, 97236711.15602145, -43661946.33752821, 8477230.501135234, 52.5], [0.00220636496208, 111320.7020209128, 51751.86112841131, 3796837.749470245, 992013.7397791013, -1221952.21711287, 1340652.697009075, -620943.6990984312, 144416.9293806241, 37.5], [-0.0003441963504368392, 111320.7020576856, 278.2353980772752, 2485758.690035394, 6070.750963243378, 54821.18345352118, 9540.606633304236, -2710.55326746645, 1405.483844121726, 22.5], [-0.0003218135878613132, 111320.7020701615, 0.00369383431289, 823725.6402795718, 0.46104986909093, 2351.343141331292, 1.58060784298199, 8.77738589078284, 0.37238884252424, 7.45]],\n  convertMC2LL: function convertMC2LL(cB, out) {\n    var cE;\n    for (var cD = 0, len = this.MCBAND.length; cD < len; cD++) {\n      if (Math.abs(cB.y) >= this.MCBAND[cD]) {\n        cE = this.MC2LL[cD];\n        break;\n      }\n    }\n    var T = this.convertor(cB, cE, out);\n    return T;\n  },\n  convertLL2MC: function convertLL2MC(T, out) {\n    var cD, cC, len;\n    T.x = this.getLoop(T.x, -180, 180);\n    T.y = this.getRange(T.y, -74, 74);\n    var cB = new Coordinate(T.x, T.y);\n    for (cC = 0, len = this.LLBAND.length; cC < len; cC++) {\n      if (cB.y >= this.LLBAND[cC]) {\n        cD = this.LL2MC[cC];\n        break;\n      }\n    }\n    if (!cD) {\n      for (cC = this.LLBAND.length - 1; cC >= 0; cC--) {\n        if (cB.y <= -this.LLBAND[cC]) {\n          cD = this.LL2MC[cC];\n          break;\n        }\n      }\n    }\n    var cE = this.convertor(T, cD, out);\n    return cE;\n  },\n  convertor: function convertor(cC, cD, out) {\n    if (!cC || !cD) {\n      return null;\n    }\n    var T = cD[0] + cD[1] * Math.abs(cC.x);\n    var cB = Math.abs(cC.y) / cD[9];\n    var cE = cD[2] + cD[3] * cB + cD[4] * cB * cB + cD[5] * cB * cB * cB + cD[6] * cB * cB * cB * cB + cD[7] * cB * cB * cB * cB * cB + cD[8] * cB * cB * cB * cB * cB * cB;\n    T *= cC.x < 0 ? -1 : 1;\n    cE *= cC.y < 0 ? -1 : 1;\n    if (out) {\n      out.x = T;\n      out.y = cE;\n      return out;\n    }\n    return new Coordinate(T, cE);\n  },\n  toRadians: function toRadians(T) {\n    return Math.PI * T / 180;\n  },\n  toDegrees: function toDegrees(T) {\n    return 180 * T / Math.PI;\n  },\n  getRange: function getRange(cC, cB, T) {\n    if (cB != null) {\n      cC = Math.max(cC, cB);\n    }\n    if (T != null) {\n      cC = Math.min(cC, T);\n    }\n    return cC;\n  },\n  getLoop: function getLoop(cC, cB, T) {\n    if (cC === Infinity) {\n      return T;\n    } else if (cC === -Infinity) {\n      return cB;\n    }\n    while (cC > T) {\n      cC -= T - cB;\n    }\n    while (cC < cB) {\n      cC += T - cB;\n    }\n    return cC;\n  }\n});\n\nvar Projection_IDENTITY = extend({}, Common, {\n  code: 'IDENTITY',\n  project: function project(p, out) {\n    if (out) {\n      out.x = p.x;\n      out.y = p.y;\n      return out;\n    }\n    return p.copy();\n  },\n  unproject: function unproject(p, out) {\n    if (out) {\n      out.x = p.x;\n      out.y = p.y;\n      return out;\n    }\n    return p.copy();\n  }\n}, Identity);\n\nvar DEFAULT$1 = EPSG3857;\n\nvar projections = /*#__PURE__*/Object.freeze({\n  EPSG3857: EPSG3857,\n  DEFAULT: DEFAULT$1,\n  EPSG4326: PROJ4326,\n  EPSG4490: Projection_EPSG4490,\n  BAIDU: Projection_Baidu,\n  IDENTITY: Projection_IDENTITY,\n  Common: Common\n});\n\nvar Renderable = (function (Base) {\n  return function (_Base) {\n    _inheritsLoose(_class, _Base);\n    function _class() {\n      return _Base.apply(this, arguments) || this;\n    }\n    _class.registerRenderer = function registerRenderer(name, clazz) {\n      var proto = this.prototype;\n      var parentProto = Object.getPrototypeOf(proto);\n      if (!proto._rendererClasses || proto._rendererClasses === parentProto._rendererClasses) {\n        proto._rendererClasses = proto._rendererClasses ? Object.create(proto._rendererClasses) : {};\n      }\n      proto._rendererClasses[name.toLowerCase()] = clazz;\n      return this;\n    };\n    _class.getRendererClass = function getRendererClass(name) {\n      var proto = this.prototype;\n      if (!proto._rendererClasses) {\n        return null;\n      }\n      return proto._rendererClasses[name.toLowerCase()];\n    };\n    return _class;\n  }(Base);\n});\n\nvar imageFetchWorkerKey = 'core-fetch-image';\nvar globalWorkerPool;\nfunction setWorkerPool(pool) {\n  globalWorkerPool = pool;\n}\nfunction getWorkerPool() {\n  return globalWorkerPool;\n}\nvar workersCreated = false;\nfunction setWorkersCreated() {\n  workersCreated = true;\n}\nfunction workersHasCreated() {\n  return workersCreated;\n}\nvar ADAPTER_CREATED_LIST = [];\nfunction adapterHasCreated(workerKey) {\n  return ADAPTER_CREATED_LIST.indexOf(workerKey) > -1;\n}\nfunction pushAdapterCreated(workerKey) {\n  if (!adapterHasCreated(workerKey)) {\n    ADAPTER_CREATED_LIST.push(workerKey);\n  }\n}\n\nvar adapters = {};\nfunction registerWorkerAdapter(workerKey, adapter) {\n  adapters[workerKey] = adapter;\n}\nvar header = \"\\n    var adapters = {};\\n    // Dynamic Create Adapter\\n    function createAdapter(key,code){\\n        if(adapters[key]||!code){\\n            return;\\n        }\\n        var func=new Function('exports',code+'(exports)');\\n        var workerExports={};\\n        func(workerExports,self);\\n        adapters[key]=workerExports;\\n        workerExports.initialize && workerExports.initialize(self);\\n        \\n    }\\n    onmessage = function (msg) {\\n        msg = msg.data;\\n        //createAdapter\\n        if (msg.messageType === 'createAdapter') {\\n           var key=msg.key;\\n           var code=msg.code;\\n           createAdapter(key,code);\\n           postMessage({adapterName:key});\\n           return;\\n        }\\n        if (msg.messageType === 'batch') {\\n            const messages = msg.messages;\\n            if (messages) {\\n                for (let i = 0; i < messages.length; i++) {\\n                    dispatch(messages[i]);\\n                }\\n            }\\n        } else {\\n            dispatch(msg);\\n        }\\n    };\\n\\n    function dispatch(msg) {\\n        var workerKey = msg.workerKey;\\n        var adapter = adapters[workerKey];\\n        if (!adapter) {\\n            post(msg.callback, 'Unregistered worker adapters for ' + workerKey);\\n            return;\\n        }\\n        try {\\n            adapter.onmessage(msg, wrap(msg.callback));\\n        } catch (err) {\\n            post(msg.callback, workerKey + ':' + err.message);\\n            console.error(err);\\n            throw err;\\n        }\\n    }\\n\\n    function post(callback, err, data, buffers) {\\n        var msg = {\\n            callback : callback\\n        };\\n        if (err) {\\n            msg.error = err;\\n        } else {\\n            msg.data = data;\\n        }\\n        if (buffers && buffers.length > 0) {\\n            postMessage(msg, buffers);\\n        } else {\\n            postMessage(msg);\\n        }\\n    }\\n    function wrap(callback) {\\n        return function (err, data, buffers) {\\n            post(callback, err, data, buffers);\\n        };\\n    }\\n    var workerExports;\\n\";\nvar footer = \"\\n    workerExports = null;\\n\";\nfunction compileWorkerSource() {\n  var source = header;\n  for (var p in adapters) {\n    var adapter = adapters[p];\n    pushAdapterCreated(p);\n    if (isFunction(adapter)) {\n      if (adapter.length === 0) {\n        adapter = adapter();\n      }\n    }\n    source += \"\\n    workerExports = {};\\n    (\" + adapter + \")(workerExports, self);\\n    adapters['\" + p + \"'] = workerExports\";\n    source += \"\\n    workerExports.initialize && workerExports.initialize(self);\\n        \";\n  }\n  source += footer;\n  return source;\n}\nvar url;\nfunction getWorkerSourcePath() {\n  if (typeof window === 'undefined') {\n    return null;\n  }\n  if (!url) {\n    var source = compileWorkerSource();\n    url = window.URL.createObjectURL(new Blob([source], {\n      type: 'text/javascript'\n    }));\n    adapters = {};\n  }\n  return url;\n}\nfunction createAdapter(key, cb) {\n  if (!adapters[key]) {\n    console.error(\"not find \" + key + \" adapter\");\n    return;\n  }\n  var adapter = adapters[key];\n  if (isFunction(adapter)) {\n    if (adapter.length === 0) {\n      adapter = adapter();\n    }\n  }\n  adapter = \"(\" + adapter + \")\";\n  var workerPool = getWorkerPool();\n  if (!workerPool) {\n    return;\n  }\n  var workers = workerPool.workers || [];\n  if (workers.length === 0) {\n    console.error('workerpool workers count is 0');\n  }\n  var count = 0;\n  var messageCB = function messageCB(msg) {\n    msg = msg.data || {};\n    if (msg.adapterName === key) {\n      count++;\n      if (count === workers.length) {\n        workers.forEach(function (worker) {\n          worker.removeEventListener('message', messageCB);\n        });\n        delete adapters[key];\n        cb();\n      }\n    }\n  };\n  workers.forEach(function (worker) {\n    worker.addEventListener('message', messageCB);\n    worker.postMessage({\n      key: key,\n      code: adapter,\n      messageType: 'createAdapter'\n    });\n  });\n}\n\nvar hardwareConcurrency = typeof window !== 'undefined' ? window.navigator.hardwareConcurrency || 4 : 0;\nvar workerCount = Math.max(Math.floor(hardwareConcurrency / 2), 1);\nvar MessageBatch = function () {\n  function MessageBatch(limit) {\n    if (limit === void 0) {\n      limit = 50;\n    }\n    this._limit = limit;\n    this._messages = [];\n    this.buffers = [];\n  }\n  var _proto = MessageBatch.prototype;\n  _proto.addMessage = function addMessage(msg, buffers) {\n    this._messages.push(msg);\n    if (!Array.isArray(buffers)) {\n      return;\n    }\n    for (var i = 0; i < buffers.length; i++) {\n      if (this.buffers.indexOf(buffers[i]) < 0) {\n        this.buffers.push(buffers[i]);\n      }\n    }\n  };\n  _proto.isFull = function isFull() {\n    return this._messages.length >= this._limit;\n  };\n  _proto.getMessage = function getMessage() {\n    return {\n      messageType: 'batch',\n      messages: this._messages\n    };\n  };\n  return MessageBatch;\n}();\nvar WorkerPool = function () {\n  function WorkerPool() {\n    this.active = {};\n    this.workerCount = typeof window !== 'undefined' ? window.MAPTALKS_WORKER_COUNT || workerCount : 0;\n    this._messages = [];\n    this._messageBuffers = [];\n  }\n  var _proto2 = WorkerPool.prototype;\n  _proto2.acquire = function acquire(id) {\n    if (!this.workers) {\n      this.workers = [];\n      var url = getWorkerSourcePath();\n      for (var i = 0; i < this.workerCount; i++) {\n        var worker = new Worker(url);\n        worker.id = i;\n        this.workers.push(worker);\n      }\n      URL.revokeObjectURL(url);\n      setWorkersCreated();\n    }\n    this.active[id] = true;\n    return this.workers.slice();\n  };\n  _proto2.release = function release(id) {\n    delete this.active[id];\n    if (Object.keys(this.active).length === 0) {\n      this.workers.forEach(function (w) {\n        w.terminate();\n      });\n      this.workers = null;\n    }\n  };\n  _proto2.addMessage = function addMessage(workerId, data, buffers) {\n    var batches = this._messages[workerId];\n    if (!batches || !batches.length) {\n      batches = this._messages[workerId] = [new MessageBatch()];\n    }\n    var batch = batches[batches.length - 1];\n    if (batch.isFull()) {\n      batch = new MessageBatch();\n      this._messages[workerId].push(batch);\n    }\n    batch.addMessage(data, buffers);\n  };\n  _proto2.commit = function commit() {\n    if (!this.workers) {\n      return;\n    }\n    if (this._messages.length) {\n      for (var i = 0; i < this._messages.length; i++) {\n        if (!this._messages[i] || !this._messages[i].length) {\n          continue;\n        }\n        var batch = this._messages[i].shift();\n        this.workers[i].postMessage(batch.getMessage(), batch.buffers);\n      }\n    }\n  };\n  return WorkerPool;\n}();\nvar globalWorkerPool$1;\nfunction getGlobalWorkerPool() {\n  if (!globalWorkerPool$1) {\n    globalWorkerPool$1 = new WorkerPool();\n    setWorkerPool(globalWorkerPool$1);\n  }\n  return globalWorkerPool$1;\n}\nfunction frameLoop() {\n  getGlobalWorkerPool().commit();\n  requestAnimFrame(frameLoop);\n}\nif (requestAnimFrame) {\n  requestAnimFrame(frameLoop);\n}\n\nvar dedicatedWorker = 0;\nvar EMPTY_BUFFERS = [];\nvar Actor = function () {\n  function Actor(workerKey) {\n    var _this = this;\n    this._delayMessages = [];\n    this.initializing = false;\n    var hasCreated = adapterHasCreated(workerKey);\n    if (workersHasCreated() && !hasCreated) {\n      this.initializing = true;\n      console.log(\"Injecting codes in worker with worker key: :\" + workerKey);\n      createAdapter(workerKey, function () {\n        _this.initializing = false;\n        _this.created();\n      });\n    }\n    this.workerKey = workerKey;\n    this.workerPool = getGlobalWorkerPool();\n    this.currentActor = 0;\n    this.actorId = UID();\n    this.workers = this.workerPool.acquire(this.actorId);\n    this.callbacks = {};\n    this.callbackID = 0;\n    this.receiveFn = this.receive.bind(this);\n    this.workers.forEach(function (w) {\n      w.addEventListener('message', _this.receiveFn, false);\n    });\n    pushAdapterCreated(workerKey);\n  }\n  var _proto = Actor.prototype;\n  _proto.created = function created() {\n    var _this2 = this;\n    this._delayMessages.forEach(function (message) {\n      var command = message.command,\n        data = message.data,\n        buffers = message.buffers,\n        cb = message.cb,\n        workerId = message.workerId;\n      _this2[command](data, buffers, cb, workerId);\n    });\n    this._delayMessages = [];\n  };\n  _proto.isActive = function isActive() {\n    return !!this.workers;\n  };\n  _proto.broadcast = function broadcast(data, buffers, cb) {\n    var _this3 = this;\n    if (this.initializing) {\n      this._delayMessages.push({\n        command: 'broadcast',\n        data: data,\n        buffers: buffers,\n        cb: cb\n      });\n      return this;\n    }\n    cb = cb || function () {};\n    asyncAll(this.workers, function (worker, done) {\n      _this3.send(data, buffers, done, worker.id);\n    }, cb);\n    return this;\n  };\n  _proto.send = function send(data, buffers, cb, workerId) {\n    if (this.initializing) {\n      this._delayMessages.push({\n        command: 'send',\n        data: data,\n        buffers: buffers,\n        cb: cb,\n        workerId: workerId\n      });\n      return this;\n    }\n    var id = cb ? this.actorId + \":\" + this.callbackID++ : null;\n    if (cb) this.callbacks[id] = cb;\n    this.post({\n      data: data,\n      callback: String(id)\n    }, buffers, workerId);\n    return this;\n  };\n  _proto.receive = function receive(message) {\n    var _this4 = this;\n    var data = message.data,\n      id = data.callback;\n    var callback = this.callbacks[id];\n    delete this.callbacks[id];\n    if (data.type === '<request>') {\n      if (this.actorId === data.actorId) {\n        this[data.command](data.params, function (err, cbData, buffers) {\n          var message = {\n            type: '<response>',\n            callback: data.callback\n          };\n          if (err) {\n            message.error = err.message;\n          } else {\n            message.data = cbData;\n          }\n          _this4.post(message, buffers || EMPTY_BUFFERS, data.workerId);\n        });\n      }\n    } else if (callback && data.error) {\n      callback(data.error);\n    } else if (callback) {\n      callback(null, data.data);\n    }\n  };\n  _proto.remove = function remove() {\n    var _this5 = this;\n    this.workers.forEach(function (w) {\n      w.removeEventListener('message', _this5.receiveFn, false);\n    });\n    delete this.receiveFn;\n    delete this.workers;\n    delete this.callbacks;\n    delete this.workerPool;\n  };\n  _proto.post = function post(data, buffers, targetID) {\n    if (typeof targetID !== 'number' || isNaN(targetID)) {\n      targetID = this.currentActor = (this.currentActor + 1) % this.workerPool.workerCount;\n    }\n    data.workerId = targetID;\n    data.workerKey = this.workerKey;\n    data.actorId = this.actorId;\n    this.workerPool.addMessage(targetID, data, buffers || EMPTY_BUFFERS);\n    return targetID;\n  };\n  _proto.getDedicatedWorker = function getDedicatedWorker() {\n    dedicatedWorker = (dedicatedWorker + 1) % this.workerPool.workerCount;\n    return dedicatedWorker;\n  };\n  return Actor;\n}();\nfunction asyncAll(array, fn, callback) {\n  if (!array.length) {\n    callback(null, []);\n  }\n  var remaining = array.length;\n  var results = new Array(array.length);\n  var error = null;\n  array.forEach(function (item, i) {\n    fn(item, function (err, result) {\n      if (err) error = err;\n      results[i] = result;\n      if (--remaining === 0) callback(error, results);\n    });\n  });\n}\n\nvar EMPTY_ARRAY = [];\nvar ResourceWorkerConnection = function (_Actor) {\n  _inheritsLoose(ResourceWorkerConnection, _Actor);\n  function ResourceWorkerConnection() {\n    return _Actor.call(this, imageFetchWorkerKey) || this;\n  }\n  var _proto = ResourceWorkerConnection.prototype;\n  _proto.fetchImage = function fetchImage(url, cb) {\n    var data = {\n      url: url\n    };\n    this.send(data, EMPTY_ARRAY, cb);\n  };\n  return ResourceWorkerConnection;\n}(Actor);\nvar CanvasRenderer = function (_Class) {\n  _inheritsLoose(CanvasRenderer, _Class);\n  function CanvasRenderer(layer) {\n    var _this;\n    _this = _Class.call(this) || this;\n    _this.layer = layer;\n    _this._painted = false;\n    _this._drawTime = 0;\n    if (Browser$1.decodeImageInWorker && !Browser$1.safari && !Browser$1.iosWeixin) {\n      _this._resWorkerConn = new ResourceWorkerConnection();\n    }\n    _this.setToRedraw();\n    return _this;\n  }\n  var _proto2 = CanvasRenderer.prototype;\n  _proto2.render = function render(framestamp) {\n    this.prepareRender();\n    if (!this.getMap() || !this.layer.isVisible()) {\n      return;\n    }\n    if (!this.resources) {\n      this.resources = new ResourceCache();\n    }\n    this.checkAndDraw(this._tryToDraw, framestamp);\n  };\n  _proto2.checkAndDraw = function checkAndDraw(drawFn) {\n    var _this2 = this;\n    this._toRedraw = false;\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n    if (this.checkResources) {\n      var resources = this.checkResources();\n      if (resources.length > 0) {\n        this._loadingResource = true;\n        this.loadResources(resources).then(function () {\n          _this2._loadingResource = false;\n          if (_this2.layer) {\n            _this2.layer.fire('resourceload');\n            var map = _this2.layer.getMap();\n            _this2.setToRedraw();\n            map.getRenderer().callInNextFrame(function () {\n              _this2.setToRedraw();\n            });\n          }\n        });\n      } else {\n        drawFn.call.apply(drawFn, [this].concat(args));\n      }\n    } else {\n      drawFn.call.apply(drawFn, [this].concat(args));\n    }\n  };\n  _proto2.testIfNeedRedraw = function testIfNeedRedraw() {\n    var map = this.getMap();\n    if (this._loadingResource) {\n      return false;\n    }\n    if (this._toRedraw) {\n      return true;\n    }\n    if (map.isInteracting() && !this.drawOnInteracting) {\n      return false;\n    }\n    if (this.needToRedraw()) {\n      return true;\n    }\n    return false;\n  };\n  _proto2.needToRedraw = function needToRedraw() {\n    var map = this.getMap();\n    if (map.isInteracting() || map.getRenderer().isViewChanged()) {\n      return !(!map.getPitch() && map.isMoving() && !map.isZooming() && !map.isRotating() && !this.layer.options['forceRenderOnMoving']);\n    }\n    return false;\n  };\n  _proto2.onSkipDrawOnInteracting = function onSkipDrawOnInteracting() {};\n  _proto2.isLoadingResource = function isLoadingResource() {\n    return this._loadingResource;\n  };\n  _proto2.isRenderComplete = function isRenderComplete() {\n    return !!this._renderComplete;\n  };\n  _proto2.mustRenderOnInteracting = function mustRenderOnInteracting() {\n    return !this._painted;\n  };\n  _proto2.setToRedraw = function setToRedraw() {\n    this._toRedraw = true;\n    return this;\n  };\n  _proto2.setCanvasUpdated = function setCanvasUpdated() {\n    this._canvasUpdated = true;\n    return this;\n  };\n  _proto2.isCanvasUpdated = function isCanvasUpdated() {\n    return !!this._canvasUpdated;\n  };\n  _proto2.remove = function remove() {\n    this.onRemove();\n    delete this._loadingResource;\n    delete this.southWest;\n    delete this.canvas;\n    delete this.context;\n    delete this.canvasExtent2D;\n    delete this._extent2D;\n    if (this.resources) {\n      this.resources.remove();\n    }\n    delete this.resources;\n    if (this._resWorkerConn) {\n      this._resWorkerConn.remove();\n      delete this._resWorkerConn;\n    }\n    delete this.layer;\n  };\n  _proto2.onRemove = function onRemove() {};\n  _proto2.onAdd = function onAdd() {};\n  _proto2.getMap = function getMap() {\n    if (!this.layer) {\n      return null;\n    }\n    return this.layer.getMap();\n  };\n  _proto2.getCanvasImage = function getCanvasImage() {\n    var map = this.getMap();\n    this._canvasUpdated = false;\n    if (this._renderZoom !== map.getZoom() || !this.canvas || !this._extent2D) {\n      return null;\n    }\n    if (this.isBlank()) {\n      return null;\n    }\n    if (this.layer.isEmpty && this.layer.isEmpty()) {\n      return null;\n    }\n    var containerPoint = map._pointToContainerPoint(this.southWest)._add(0, -map.height);\n    return {\n      'image': this.canvas,\n      'layer': this.layer,\n      'point': containerPoint\n    };\n  };\n  _proto2.clear = function clear() {\n    this.clearCanvas();\n  };\n  _proto2.isBlank = function isBlank() {\n    if (!this._painted) {\n      return true;\n    }\n    return false;\n  };\n  _proto2.show = function show() {\n    this.setToRedraw();\n  };\n  _proto2.hide = function hide() {\n    this.clear();\n    this.setToRedraw();\n  };\n  _proto2.setZIndex = function setZIndex() {\n    this.setToRedraw();\n  };\n  _proto2.hitDetect = function hitDetect(point) {\n    if (!this.context || this.layer.isEmpty && this.layer.isEmpty() || this.isBlank() || this._errorThrown || this.layer.isVisible && !this.layer.isVisible()) {\n      return false;\n    }\n    var map = this.getMap();\n    var r = map.getDevicePixelRatio();\n    var size = map.getSize();\n    if (point.x < 0 || point.x > size['width'] * r || point.y < 0 || point.y > size['height'] * r) {\n      return false;\n    }\n    var imageData = this.getImageData && this.getImageData();\n    if (imageData) {\n      var x = Math.round(r * point.x),\n        y = Math.round(r * point.y);\n      var idx = y * imageData.width * 4 + x * 4;\n      return imageData.data[idx + 3] > 0;\n    }\n    try {\n      var imgData = this.context.getImageData(r * point.x, r * point.y, 1, 1).data;\n      if (imgData[3] > 0) {\n        return true;\n      }\n    } catch (error) {\n      if (!this._errorThrown) {\n        if (console) {\n          console.warn('hit detect failed with tainted canvas, some geometries have external resources in another domain:\\n', error);\n        }\n        this._errorThrown = true;\n      }\n      return false;\n    }\n    return false;\n  };\n  _proto2.loadResources = function loadResources(resourceUrls) {\n    if (!this.resources) {\n      this.resources = new ResourceCache();\n    }\n    var resources = this.resources,\n      promises = [];\n    if (isArrayHasData(resourceUrls)) {\n      var cache = {};\n      for (var i = resourceUrls.length - 1; i >= 0; i--) {\n        var url = resourceUrls[i];\n        if (!url || !url.length || cache[url.join('-')]) {\n          continue;\n        }\n        cache[url.join('-')] = 1;\n        if (!resources.isResourceLoaded(url, true)) {\n          promises.push(new Promise$1(this._promiseResource(url)));\n        }\n      }\n    }\n    return Promise$1.all(promises);\n  };\n  _proto2.prepareRender = function prepareRender() {\n    delete this._renderComplete;\n    var map = this.getMap();\n    this._renderZoom = map.getZoom();\n    this.canvasExtent2D = this._extent2D = map._get2DExtent();\n    this.southWest = map._containerPointToPoint(new Point(0, map.height));\n  };\n  _proto2.createCanvas = function createCanvas() {\n    if (this.canvas) {\n      return;\n    }\n    var map = this.getMap();\n    var size = map.getSize();\n    var r = map.getDevicePixelRatio(),\n      w = Math.round(r * size.width),\n      h = Math.round(r * size.height);\n    if (this.layer._canvas) {\n      var canvas = this.layer._canvas;\n      canvas.width = w;\n      canvas.height = h;\n      if (canvas.style) {\n        canvas.style.width = size.width + 'px';\n        canvas.style.height = size.height + 'px';\n      }\n      this.canvas = this.layer._canvas;\n    } else {\n      this.canvas = Canvas.createCanvas(w, h, map.CanvasClass);\n    }\n    this.onCanvasCreate();\n  };\n  _proto2.onCanvasCreate = function onCanvasCreate() {};\n  _proto2.createContext = function createContext() {\n    if (this.gl && this.gl.canvas === this.canvas || this.context) {\n      return;\n    }\n    this.context = Canvas.getCanvas2DContext(this.canvas);\n    if (!this.context) {\n      return;\n    }\n    if (this.layer.options['globalCompositeOperation']) {\n      this.context.globalCompositeOperation = this.layer.options['globalCompositeOperation'];\n    }\n    var dpr = this.getMap().getDevicePixelRatio();\n    if (dpr !== 1) {\n      this.context.scale(dpr, dpr);\n    }\n  };\n  _proto2.resetCanvasTransform = function resetCanvasTransform() {\n    if (!this.context) {\n      return;\n    }\n    var dpr = this.getMap().getDevicePixelRatio();\n    this.context.setTransform(dpr, 0, 0, dpr, 0, 0);\n  };\n  _proto2.resizeCanvas = function resizeCanvas(canvasSize) {\n    var canvas = this.canvas;\n    if (!canvas) {\n      return;\n    }\n    var size = canvasSize || this.getMap().getSize();\n    var r = this.getMap().getDevicePixelRatio();\n    var _calCanvasSize = calCanvasSize(size, r),\n      width = _calCanvasSize.width,\n      height = _calCanvasSize.height,\n      cssWidth = _calCanvasSize.cssWidth,\n      cssHeight = _calCanvasSize.cssHeight;\n    if (this.layer._canvas && (canvas.style.width !== cssWidth || canvas.style.height !== cssHeight)) {\n      canvas.style.width = cssWidth;\n      canvas.style.height = cssHeight;\n    }\n    if (canvas.width === width && canvas.height === height) {\n      return;\n    }\n    canvas.height = height;\n    canvas.width = width;\n    if (r !== 1 && this.context) {\n      this.context.scale(r, r);\n    }\n  };\n  _proto2.clearCanvas = function clearCanvas() {\n    if (!this.context || !this.getMap()) {\n      return;\n    }\n    var r = this.getMap().getDevicePixelRatio();\n    var rScale = 1 / r;\n    var w = this.canvas.width * rScale,\n      h = this.canvas.height * rScale;\n    Canvas.clearRect(this.context, 0, 0, Math.max(w, this.canvas.width), Math.max(h, this.canvas.height));\n  };\n  _proto2.prepareCanvas = function prepareCanvas() {\n    if (!this.canvas) {\n      this.createCanvas();\n      this.createContext();\n      this.layer.onCanvasCreate();\n      this.layer.fire('canvascreate', {\n        'context': this.context,\n        'gl': this.gl\n      });\n    } else {\n      this.resetCanvasTransform();\n      this.clearCanvas();\n      this.resizeCanvas();\n    }\n    delete this._maskExtent;\n    var mask = this.layer.getMask();\n    if (!mask) {\n      this.layer.fire('renderstart', {\n        'context': this.context,\n        'gl': this.gl\n      });\n      return null;\n    }\n    var maskExtent2D = this._maskExtent = mask._getMaskPainter().get2DExtent();\n    if (!maskExtent2D.intersects(this._extent2D)) {\n      this.layer.fire('renderstart', {\n        'context': this.context,\n        'gl': this.gl\n      });\n      return maskExtent2D;\n    }\n    this.layer.fire('renderstart', {\n      'context': this.context,\n      'gl': this.gl\n    });\n    return maskExtent2D;\n  };\n  _proto2.clipCanvas = function clipCanvas(context) {\n    var mask = this.layer.getMask();\n    if (!mask) {\n      return false;\n    }\n    var old = this.southWest;\n    var map = this.getMap();\n    this.southWest = map._containerPointToPoint(new Point(0, map.height));\n    context.save();\n    var dpr = map.getDevicePixelRatio();\n    if (dpr !== 1) {\n      context.save();\n      context.scale(dpr, dpr);\n    }\n    if (mask.getGeometries) {\n      context.isMultiClip = true;\n      var masks = mask.getGeometries() || [];\n      context.beginPath();\n      masks.forEach(function (_mask) {\n        var painter = _mask._getMaskPainter();\n        painter.paint(null, context);\n      });\n      context.stroke();\n      context.isMultiClip = false;\n    } else {\n      context.isClip = true;\n      context.beginPath();\n      var painter = mask._getMaskPainter();\n      painter.paint(null, context);\n      context.isClip = false;\n    }\n    if (dpr !== 1) {\n      context.restore();\n    }\n    context.clip();\n    this.southWest = old;\n    return true;\n  };\n  _proto2.getViewExtent = function getViewExtent() {\n    return {\n      'extent': this._extent2D,\n      'maskExtent': this._maskExtent,\n      'zoom': this._renderZoom,\n      'southWest': this.southWest\n    };\n  };\n  _proto2.completeRender = function completeRender() {\n    if (this.getMap()) {\n      this._renderComplete = true;\n      this.layer.fire('renderend', {\n        'context': this.context,\n        'gl': this.gl\n      });\n      this.setCanvasUpdated();\n    }\n  };\n  _proto2.getEvents = function getEvents() {\n    return {\n      '_zoomstart': this.onZoomStart,\n      '_zooming': this.onZooming,\n      '_zoomend': this.onZoomEnd,\n      '_resize': this.onResize,\n      '_movestart': this.onMoveStart,\n      '_moving': this.onMoving,\n      '_moveend': this.onMoveEnd,\n      '_dragrotatestart': this.onDragRotateStart,\n      '_dragrotating': this.onDragRotating,\n      '_dragrotateend': this.onDragRotateEnd,\n      '_spatialreferencechange': this.onSpatialReferenceChange\n    };\n  };\n  _proto2.onZoomStart = function onZoomStart() {};\n  _proto2.onZoomEnd = function onZoomEnd() {\n    this.setToRedraw();\n  };\n  _proto2.onZooming = function onZooming() {};\n  _proto2.onMoveStart = function onMoveStart() {};\n  _proto2.onMoving = function onMoving() {};\n  _proto2.onMoveEnd = function onMoveEnd() {\n    this.setToRedraw();\n  };\n  _proto2.onResize = function onResize() {\n    delete this._extent2D;\n    this.resizeCanvas();\n    this.setToRedraw();\n  };\n  _proto2.onDragRotateStart = function onDragRotateStart() {};\n  _proto2.onDragRotating = function onDragRotating() {};\n  _proto2.onDragRotateEnd = function onDragRotateEnd() {\n    this.setToRedraw();\n  };\n  _proto2.onSpatialReferenceChange = function onSpatialReferenceChange() {};\n  _proto2.getDrawTime = function getDrawTime() {\n    return this._drawTime;\n  };\n  _proto2._tryToDraw = function _tryToDraw(framestamp) {\n    this._toRedraw = false;\n    if (!this.canvas && this.layer.isEmpty && this.layer.isEmpty()) {\n      this._renderComplete = true;\n      return;\n    }\n    this._drawAndRecord(framestamp);\n  };\n  _proto2._drawAndRecord = function _drawAndRecord(framestamp) {\n    if (!this.getMap()) {\n      return;\n    }\n    var painted = this._painted;\n    this._painted = true;\n    var t = now();\n    this.draw(framestamp);\n    t = now() - t;\n    this._drawTime = painted ? t : t / 2;\n    if (painted && this.layer && this.layer.options['logDrawTime']) {\n      console.log(this.layer.getId(), 'frameTimeStamp:', framestamp, 'drawTime:', this._drawTime);\n    }\n  };\n  _proto2._promiseResource = function _promiseResource(url) {\n    var layer = this.layer;\n    var me = this,\n      resources = this.resources,\n      crossOrigin = layer.options['crossOrigin'];\n    var renderer = layer.options['renderer'] || '';\n    return function (resolve) {\n      if (resources.isResourceLoaded(url, true)) {\n        resolve(url);\n        return;\n      }\n      var fetchInWorker = !isSVG(url[0]) && me._resWorkerConn && (layer.options['renderer'] !== 'canvas' || layer.options['decodeImageInWorker']);\n      if (fetchInWorker) {\n        var uri = getAbsoluteURL(url[0]);\n        me._resWorkerConn.fetchImage(uri, function (err, data) {\n          if (err) {\n            if (err && typeof console !== 'undefined') {\n              console.warn(err);\n            }\n            resolve(url);\n            return;\n          }\n          getImageBitMap(data, function (bitmap) {\n            me._cacheResource(url, bitmap);\n            resolve(url);\n          });\n        });\n      } else {\n        var img = new Image();\n        if (!isNil(crossOrigin)) {\n          img['crossOrigin'] = crossOrigin;\n        } else if (renderer !== 'canvas') {\n          img['crossOrigin'] = '';\n        }\n        if (isSVG(url[0]) && !IS_NODE) {\n          if (url[1]) {\n            url[1] *= 2;\n          }\n          if (url[2]) {\n            url[2] *= 2;\n          }\n        }\n        img.onload = function () {\n          me._cacheResource(url, img);\n          resolve(url);\n        };\n        img.onabort = function (err) {\n          if (console) {\n            console.warn('image loading aborted: ' + url[0]);\n          }\n          if (err) {\n            if (console) {\n              console.warn(err);\n            }\n          }\n          resolve(url);\n        };\n        img.onerror = function (err) {\n          if (err && typeof console !== 'undefined') {\n            console.warn(err);\n          }\n          resources.markErrorResource(url);\n          resolve(url);\n        };\n        loadImage(img, url);\n      }\n    };\n  };\n  _proto2._cacheResource = function _cacheResource(url, img) {\n    if (!this.layer || !this.resources) {\n      return;\n    }\n    var w = url[1],\n      h = url[2];\n    if (this.layer.options['cacheSvgOnCanvas'] && isSVG(url[0]) === 1 && (Browser$1.edge || Browser$1.ie)) {\n      if (isNil(w)) {\n        w = img.width || this.layer.options['defaultIconSize'][0];\n      }\n      if (isNil(h)) {\n        h = img.height || this.layer.options['defaultIconSize'][1];\n      }\n      var canvas = Canvas.createCanvas(w, h);\n      Canvas.image(canvas.getContext('2d'), img, 0, 0, w, h);\n      img = canvas;\n    }\n    this.resources.addResource(url, img);\n  };\n  return CanvasRenderer;\n}(Class);\nvar ResourceCache = function () {\n  function ResourceCache() {\n    this.resources = {};\n    this._errors = {};\n  }\n  var _proto3 = ResourceCache.prototype;\n  _proto3.addResource = function addResource(url, img) {\n    var _this3 = this;\n    this.resources[url[0]] = {\n      image: img,\n      width: +url[1],\n      height: +url[2],\n      refCnt: 0\n    };\n    if (img && img.width && img.height && !img.close && Browser$1.imageBitMap && !Browser$1.safari && !Browser$1.iosWeixin) {\n      if (img.src && isSVG(img.src)) {\n        return;\n      }\n      createImageBitmap(img).then(function (imageBitmap) {\n        if (!_this3.resources[url[0]]) {\n          return;\n        }\n        _this3.resources[url[0]].image = imageBitmap;\n      });\n    }\n  };\n  _proto3.isResourceLoaded = function isResourceLoaded(url, checkSVG) {\n    if (!url) {\n      return false;\n    }\n    var imgUrl = this._getImgUrl(url);\n    if (this._errors[imgUrl]) {\n      return true;\n    }\n    var img = this.resources[imgUrl];\n    if (!img) {\n      return false;\n    }\n    if (checkSVG && isSVG(url[0]) && (+url[1] > img.width || +url[2] > img.height)) {\n      return false;\n    }\n    return true;\n  };\n  _proto3.login = function login(url) {\n    var res = this.resources[url];\n    if (res) {\n      res.refCnt++;\n    }\n  };\n  _proto3.logout = function logout(url) {\n    var res = this.resources[url];\n    if (res && res.refCnt-- <= 0) {\n      if (res.image && res.image.close) {\n        res.image.close();\n      }\n      delete this.resources[url];\n    }\n  };\n  _proto3.getImage = function getImage(url) {\n    var imgUrl = this._getImgUrl(url);\n    if (!this.isResourceLoaded(url) || this._errors[imgUrl]) {\n      return null;\n    }\n    return this.resources[imgUrl].image;\n  };\n  _proto3.markErrorResource = function markErrorResource(url) {\n    this._errors[this._getImgUrl(url)] = 1;\n  };\n  _proto3.merge = function merge(res) {\n    if (!res) {\n      return this;\n    }\n    for (var p in res.resources) {\n      var img = res.resources[p];\n      this.addResource([p, img.width, img.height], img.image);\n    }\n    return this;\n  };\n  _proto3.forEach = function forEach(fn) {\n    if (!this.resources) {\n      return this;\n    }\n    for (var p in this.resources) {\n      if (hasOwn(this.resources, p)) {\n        fn(p, this.resources[p]);\n      }\n    }\n    return this;\n  };\n  _proto3._getImgUrl = function _getImgUrl(url) {\n    if (!Array.isArray(url)) {\n      return url;\n    }\n    return url[0];\n  };\n  _proto3.remove = function remove() {\n    for (var p in this.resources) {\n      var res = this.resources[p];\n      if (res && res.image && res.image.close) {\n        res.image.close();\n      }\n    }\n    this.resources = {};\n  };\n  return ResourceCache;\n}();\nvar workerSource = \"\\nfunction (exports) {\\n    exports.onmessage = function (msg, postResponse) {\\n        var url = msg.data.url;\\n        var fetchOptions = msg.data.fetchOptions;\\n        requestImageOffscreen(url, function (err, data) {\\n            var buffers = [];\\n            if (data && data.data) {\\n                buffers.push(data.data);\\n            }\\n            postResponse(err, data, buffers);\\n        }, fetchOptions);\\n    };\\n\\n    function requestImageOffscreen(url, cb, fetchOptions) {\\n        fetch(url, fetchOptions ? fetchOptions : {})\\n            .then(response => response.arrayBuffer())\\n            .then(arrayBuffer => {\\n                const blob=new Blob([arrayBuffer]);\\n                return createImageBitmap(blob);\\n            })\\n            .then(bitmap => {\\n                cb(null, {data:bitmap});\\n            }).catch(err => {\\n                console.warn('error when loading tile:', url);\\n                console.warn(err);\\n                cb(err);\\n            });\\n    }\\n}\";\nfunction registerWorkerSource() {\n  if (!Browser$1.decodeImageInWorker) {\n    return;\n  }\n  registerWorkerAdapter(imageFetchWorkerKey, function () {\n    return workerSource;\n  });\n}\nregisterWorkerSource();\n\nvar DEFAULT_MARKER_SYMBOLS = {\n  markerWidth: 10,\n  markerHeight: 10,\n  markerLineWidth: 1\n};\nvar TEMP_DXDYPOINT = new Point(0, 0);\nfunction getDxDyRad(dxdy) {\n  if (!dxdy) {\n    return 0;\n  }\n  var x = dxdy.x,\n    y = dxdy.y;\n  if (x === 0 && y === 0) {\n    return 0;\n  }\n  if (x === 0 || !x) {\n    if (y < 0) {\n      return -Math.PI / 2;\n    }\n    if (y > 0) {\n      return Math.PI / 2;\n    }\n  }\n  var tan = y / x;\n  if (y < 0 && x < 0) {\n    return Math.atan(tan) - Math.PI;\n  } else if (y > 0 && x < 0) {\n    return Math.atan(tan) + Math.PI;\n  }\n  return Math.atan(tan);\n}\nfunction getImageRotateBBOX(width, height, rad) {\n  var rad2 = Math.PI / 2 + rad;\n  var rad3 = Math.PI / 4 + rad;\n  var rad4 = rad;\n  var r2 = height;\n  var r3 = Math.sqrt(width * width + height * height);\n  var r4 = width;\n  var p1x = 0,\n    p1y = 0;\n  var p2x = Math.cos(rad2) * r2,\n    p2y = Math.sin(rad2) * r2;\n  var p3x = Math.cos(rad3) * r3,\n    p3y = Math.sin(rad3) * r3;\n  var p4x = Math.cos(rad4) * r4,\n    p4y = Math.sin(rad4) * r4;\n  var minx = Math.min(p2x, p3x, p4x, p1x);\n  var miny = Math.min(p2y, p3y, p4y, p1y);\n  var maxx = Math.max(p2x, p3x, p4x, p1x);\n  var maxy = Math.max(p2y, p3y, p4y, p1y);\n  return [minx, miny, maxx - minx, maxy - miny];\n}\nfunction getMarkerRotationExtent(out, rad, width, height, dxdy, alignPoint) {\n  var x = dxdy.x + alignPoint.x,\n    y = dxdy.y + alignPoint.y;\n  TEMP_DXDYPOINT.x = x;\n  TEMP_DXDYPOINT.y = y;\n  var dxdyRad = getDxDyRad(TEMP_DXDYPOINT);\n  var radius = Math.sqrt(x * x + y * y);\n  var rx = Math.cos(rad + dxdyRad) * radius,\n    ry = Math.sin(rad + dxdyRad) * radius;\n  var minx = 0,\n    miny = 0;\n  minx += rx;\n  miny += ry;\n  var _getImageRotateBBOX = getImageRotateBBOX(width, height, rad, alignPoint),\n    offsetX = _getImageRotateBBOX[0],\n    offsetY = _getImageRotateBBOX[1],\n    w = _getImageRotateBBOX[2],\n    h = _getImageRotateBBOX[3];\n  minx += offsetX;\n  miny += offsetY;\n  var maxx = minx + Math.max(width, w),\n    maxy = miny + Math.max(height, h);\n  out.set(minx, miny, maxx, maxy);\n  return out;\n}\nfunction getVectorPadding() {\n  return 0.5;\n}\nvar DXDY = new Point(0, 0);\nfunction getFixedExtent(out, dx, dy, rotation, alignPoint, w, h) {\n  var dxdy = DXDY.set(dx, dy);\n  if (rotation) {\n    return getMarkerRotationExtent(out, rotation, w, h, dxdy, alignPoint);\n  }\n  var result = out.set(dxdy.x, dxdy.y, dxdy.x + w, dxdy.y + h);\n  result._add(alignPoint);\n  if (rotation) {\n    rotateExtent(result, rotation);\n  }\n  return result;\n}\nvar SIZE = [];\nfunction getVectorMarkerFixedExtent(out, symbol, size) {\n  size = size || calVectorMarkerSize(SIZE, symbol);\n  var alignPoint = getVectorMarkerAnchor(symbol, size[0], size[1]);\n  return getFixedExtent(out, symbol['markerDx'] || 0, symbol['markerDy'] || 0, getMarkerRotation(symbol), alignPoint, size[0], size[1]);\n}\nfunction getDefaultHAlign(markerType) {\n  if (markerType === 'rectangle') {\n    return 'right';\n  } else {\n    return 'middle';\n  }\n}\nfunction getDefaultVAlign(markerType) {\n  if (markerType === 'bar' || markerType === 'pie' || markerType === 'pin') {\n    return 'top';\n  } else if (markerType === 'rectangle') {\n    return 'bottom';\n  } else {\n    return 'middle';\n  }\n}\nvar TEMP_SIZE = new Size(0, 0);\nfunction getVectorMarkerAnchor(symbol, w, h) {\n  var padding = getVectorPadding();\n  var shadow = 2 * (symbol['shadowBlur'] || 0),\n    margin = shadow + padding;\n  TEMP_SIZE.width = w;\n  TEMP_SIZE.height = h;\n  var markerType = symbol['markerType'];\n  var p = getAlignPoint(TEMP_SIZE, symbol['markerHorizontalAlignment'] || getDefaultHAlign(markerType), symbol['markerVerticalAlignment'] || getDefaultVAlign(markerType));\n  if (p.x !== -w / 2) {\n    p.x -= sign(p.x + w / 2) * margin;\n  }\n  if (p.y !== -h / 2) {\n    p.y -= sign(p.y + h / 2) * margin;\n  }\n  return p;\n}\nfunction calVectorMarkerSize(out, symbol) {\n  var padding = getVectorPadding(symbol);\n  var width = getValueOrDefault(symbol['markerWidth'], DEFAULT_MARKER_SYMBOLS.markerWidth);\n  var height = getValueOrDefault(symbol['markerHeight'], DEFAULT_MARKER_SYMBOLS.markerHeight);\n  var lineWidth = getValueOrDefault(symbol['markerLineWidth'], DEFAULT_MARKER_SYMBOLS.markerLineWidth),\n    shadow = 2 * ((symbol['shadowBlur'] || 0) + Math.max(Math.abs(symbol['shadowOffsetX'] || 0) + Math.abs(symbol['shadowOffsetY'] || 0))),\n    w = Math.round(width + lineWidth + shadow + padding * 2),\n    h = Math.round(height + lineWidth + shadow + padding * 2);\n  out[0] = w;\n  out[1] = h;\n  return out;\n}\nvar ROTATE_EXTENT = new PointExtent();\nfunction rotateExtent(fixedExtent, angle) {\n  var xmin = fixedExtent.xmin,\n    ymin = fixedExtent.ymin,\n    xmax = fixedExtent.xmax,\n    ymax = fixedExtent.ymax;\n  ROTATE_EXTENT.set(xmin, ymin, xmax, ymax);\n  return ROTATE_EXTENT.convertTo(function (p) {\n    return p._rotate(angle);\n  }, fixedExtent);\n}\nfunction getMarkerRotation(symbol, prop) {\n  if (prop === void 0) {\n    prop = 'markerRotation';\n  }\n  var r = symbol[prop];\n  if (!isNumber(r)) {\n    return 0;\n  }\n  return -r * Math.PI / 180;\n}\nfunction getImageMarkerFixedExtent(out, symbol, resources) {\n  var url = symbol['markerFile'],\n    img = resources ? resources.getImage(url) : null;\n  var width = symbol['markerWidth'] || (img ? img.width : 0),\n    height = symbol['markerHeight'] || (img ? img.height : 0);\n  TEMP_SIZE.width = width;\n  TEMP_SIZE.height = height;\n  var alignPoint = getAlignPoint(TEMP_SIZE, symbol['markerHorizontalAlignment'] || 'middle', symbol['markerVerticalAlignment'] || 'top');\n  return getFixedExtent(out, symbol['markerDx'] || 0, symbol['markerDy'] || 0, getMarkerRotation(symbol), alignPoint, width, height);\n}\nfunction getTextMarkerFixedExtent(out, symbol, textDesc) {\n  var size = textDesc['size'];\n  var alignPoint = getAlignPoint(size, symbol['textHorizontalAlignment'], symbol['textVerticalAlignment']);\n  if (symbol['textHaloRadius']) {\n    var r = symbol['textHaloRadius'];\n    size = size.add(r * 2, r * 2);\n  }\n  return getFixedExtent(out, symbol['textDx'] || 0, symbol['textDy'] || 0, getMarkerRotation(symbol, 'textRotation'), alignPoint, size.width, size.height);\n}\nvar FIXED_EXTENT = new PointExtent();\nfunction getMarkerFixedExtent(out, symbol, resources, textDesc) {\n  var extent = out || new PointExtent();\n  if (Array.isArray(symbol)) {\n    var symbols = symbol;\n    for (var i = 0; i < symbols.length; i++) {\n      getMarkerFixedExtent(extent, symbols[i], resources, textDesc[i]);\n    }\n    return extent;\n  }\n  if (isTextSymbol(symbol)) {\n    extent._combine(getTextMarkerFixedExtent(FIXED_EXTENT, symbol, textDesc));\n  }\n  if (isImageSymbol(symbol)) {\n    extent._combine(getImageMarkerFixedExtent(FIXED_EXTENT, symbol, resources));\n  }\n  if (isVectorSymbol(symbol)) {\n    extent._combine(getVectorMarkerFixedExtent(FIXED_EXTENT, symbol));\n  }\n  if (isPathSymbol(symbol)) {\n    extent._combine(getImageMarkerFixedExtent(FIXED_EXTENT, symbol));\n  }\n  return extent;\n}\nfunction isTextSymbol(symbol) {\n  if (!symbol) {\n    return false;\n  }\n  if (!isNil(symbol['textName'])) {\n    return true;\n  }\n  return false;\n}\nfunction isImageSymbol(symbol) {\n  if (!symbol) {\n    return false;\n  }\n  if (!isNil(symbol['markerFile'])) {\n    return true;\n  }\n  return false;\n}\nfunction isVectorSymbol(symbol) {\n  if (!symbol) {\n    return false;\n  }\n  if (isNil(symbol['markerFile']) && !isNil(symbol['markerType']) && symbol['markerType'] !== 'path') {\n    return true;\n  }\n  return false;\n}\nfunction isPathSymbol(symbol) {\n  if (!symbol) {\n    return false;\n  }\n  if (isNil(symbol['markerFile']) && symbol['markerType'] === 'path') {\n    return true;\n  }\n  return false;\n}\nvar DYNAMIC_SYMBOL_PROPS = ['markerWidth', 'markerHeight', 'markerHorizontalAlignment', 'markerVerticalAlignment', 'markerDx', 'markerDy', 'markerRotation', 'textName', 'textSize', 'textDx', 'textDy', 'textVerticalAlignment', 'textHorizontalAlignment', 'textRotation'];\nvar SIZE_SYMBOL_PROPS = ['textName', 'markerType', 'markerFile', 'textHaloRadius', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY', 'textWrapWidth'];\n\nfunction clipLine(points, bounds, round, noCut) {\n  var parts = [];\n  var k = 0,\n    segment;\n  for (var j = 0, l = points.length; j < l - 1; j++) {\n    segment = clipSegment(points[j], points[j + 1], bounds, j, round, noCut);\n    if (!segment) {\n      continue;\n    }\n    parts[k] = parts[k] || [];\n    parts[k].push({\n      'point': segment[0],\n      'index': j\n    });\n    if (segment[1] !== points[j + 1] || j === l - 2) {\n      parts[k].push({\n        'point': segment[1],\n        'index': j + 1\n      });\n      k++;\n    }\n  }\n  return parts;\n}\nvar _lastCode;\nfunction clipSegment(a, b, bounds, useLastCode, round, noCut) {\n  var codeA = useLastCode ? _lastCode : _getBitCode(a, bounds),\n    codeB = _getBitCode(b, bounds),\n    codeOut,\n    p,\n    newCode;\n  _lastCode = codeB;\n  while (true) {\n    if (!(codeA | codeB)) {\n      return [a, b];\n    }\n    if (codeA & codeB) {\n      return false;\n    }\n    if (noCut) {\n      return [a, b];\n    }\n    codeOut = codeA || codeB;\n    p = _getEdgeIntersection(a, b, codeOut, bounds, round);\n    newCode = _getBitCode(p, bounds);\n    if (codeOut === codeA) {\n      a = p;\n      codeA = newCode;\n    } else {\n      b = p;\n      codeB = newCode;\n    }\n  }\n}\nfunction clipPolygon(points, bounds, round) {\n  var edges = [1, 4, 2, 8];\n  var clippedPoints, i, j, k, a, b, len, edge, p;\n  for (i = 0, len = points.length; i < len; i++) {\n    points[i]._code = _getBitCode(points[i], bounds);\n  }\n  for (k = 0; k < 4; k++) {\n    edge = edges[k];\n    clippedPoints = [];\n    for (i = 0, len = points.length, j = len - 1; i < len; j = i++) {\n      a = points[i];\n      b = points[j];\n      if (!(a._code & edge)) {\n        if (b._code & edge) {\n          p = _getEdgeIntersection(b, a, edge, bounds, round);\n          p._code = _getBitCode(p, bounds);\n          clippedPoints.push(p);\n        }\n        clippedPoints.push(a);\n      } else if (!(b._code & edge)) {\n        p = _getEdgeIntersection(b, a, edge, bounds, round);\n        p._code = _getBitCode(p, bounds);\n        clippedPoints.push(p);\n      }\n    }\n    points = clippedPoints;\n  }\n  return points;\n}\nfunction _getEdgeIntersection(a, b, code, bounds, round) {\n  var dx = b.x - a.x,\n    dy = b.y - a.y,\n    min = bounds.getMin(),\n    max = bounds.getMax();\n  var x, y;\n  if (code & 8) {\n    x = a.x + dx * (max.y - a.y) / dy;\n    y = max.y;\n  } else if (code & 4) {\n    x = a.x + dx * (min.y - a.y) / dy;\n    y = min.y;\n  } else if (code & 2) {\n    x = max.x;\n    y = a.y + dy * (max.x - a.x) / dx;\n  } else if (code & 1) {\n    x = min.x;\n    y = a.y + dy * (min.x - a.x) / dx;\n  }\n  var p = new Point(x, y);\n  if (round) {\n    p._round();\n  }\n  return p;\n}\nfunction _getBitCode(p, bounds) {\n  var code = 0;\n  if (p.x < bounds.getMin().x) {\n    code |= 1;\n  } else if (p.x > bounds.getMax().x) {\n    code |= 2;\n  }\n  if (p.y < bounds.getMin().y) {\n    code |= 4;\n  } else if (p.y > bounds.getMax().y) {\n    code |= 8;\n  }\n  return code;\n}\nfunction withInEllipse(point, center, southeast, tolerance) {\n  point = new Point(point);\n  var a = Math.abs(southeast.x - center.x),\n    b = Math.abs(southeast.y - center.y),\n    c = Math.sqrt(Math.abs(a * a - b * b)),\n    xfocus = a >= b;\n  var f1, f2, d;\n  if (xfocus) {\n    f1 = new Point(center.x - c, center.y);\n    f2 = new Point(center.x + c, center.y);\n    d = a * 2;\n  } else {\n    f1 = new Point(center.x, center.y - c);\n    f2 = new Point(center.x, center.y + c);\n    d = b * 2;\n  }\n  return point.distanceTo(f1) + point.distanceTo(f2) <= d + 2 * tolerance;\n}\n\nvar Symbolizer = function () {\n  function Symbolizer() {\n    this.bbox = getDefaultBBOX();\n  }\n  var _proto = Symbolizer.prototype;\n  _proto._setBBOX = function _setBBOX(ctx, x1, y1, x2, y2) {\n    if (!ctx.isHitTesting) {\n      setBBOX(this.bbox, x1, y1, x2, y2);\n    }\n    return this;\n  };\n  _proto._bufferBBOX = function _bufferBBOX(ctx, bufferSize) {\n    if (bufferSize === void 0) {\n      bufferSize = 0;\n    }\n    if (!ctx.isHitTesting) {\n      bufferBBOX(this.bbox, bufferSize);\n    }\n    return this;\n  };\n  _proto.getMap = function getMap() {\n    return this.geometry.getMap();\n  };\n  _proto.getPainter = function getPainter() {\n    return this.painter;\n  };\n  _proto.isDynamicSize = function isDynamicSize() {\n    return false;\n  };\n  Symbolizer.testColor = function testColor(prop) {\n    if (!prop || !isString(prop)) {\n      return false;\n    }\n    if (COLOR_PROPERTIES.indexOf(prop) >= 0) {\n      return true;\n    }\n    return false;\n  };\n  return Symbolizer;\n}();\n\nvar CanvasSymbolizer = function (_Symbolizer) {\n  _inheritsLoose(CanvasSymbolizer, _Symbolizer);\n  function CanvasSymbolizer() {\n    return _Symbolizer.apply(this, arguments) || this;\n  }\n  var _proto = CanvasSymbolizer.prototype;\n  _proto._prepareContext = function _prepareContext(ctx) {\n    if (isFunctionDefinition(this.symbol['opacity'])) {\n      if (!this._opacityFn) {\n        this._opacityFn = interpolated(this.symbol['opacity']);\n      }\n    } else {\n      delete this._opacityFn;\n    }\n    if (isNumber(this.symbol['opacity'])) {\n      if (ctx.globalAlpha !== this.symbol['opacity']) {\n        ctx.globalAlpha = this.symbol['opacity'];\n      }\n    } else if (this._opacityFn) {\n      var map = this.getMap();\n      ctx.globalAlpha = this._opacityFn(map.getZoom());\n    } else if (ctx.globalAlpha !== 1) {\n      ctx.globalAlpha = 1;\n    }\n  };\n  _proto.prepareCanvas = function prepareCanvas(ctx, style, resources) {\n    if (ctx.setLineDash && isArrayHasData(style['lineDasharray'])) {\n      ctx.setLineDash(style['lineDasharray']);\n    }\n    var isHitTesting = this.getPainter().isHitTesting();\n    Canvas.prepareCanvas(ctx, style, resources, isHitTesting);\n  };\n  _proto.remove = function remove() {};\n  _proto.setZIndex = function setZIndex() {};\n  _proto.show = function show() {};\n  _proto.hide = function hide() {};\n  _proto._defineStyle = function _defineStyle(style) {\n    return loadGeoSymbol(style, this.geometry);\n  };\n  return CanvasSymbolizer;\n}(Symbolizer);\n\nfunction getImage(resources, url) {\n  var img = resources && resources.getImage(url);\n  return img || null;\n}\nfunction drawVectorMarker(ctx, point, symbol, resources) {\n  var strokeAndFill = translateMarkerLineAndFill(symbol);\n  var style = symbol,\n    markerType = style['markerType'].toLowerCase(),\n    vectorArray = getVectorMarkerPoints(markerType, style['markerWidth'], style['markerHeight']),\n    lineOpacity = strokeAndFill['lineOpacity'],\n    fillOpacity = strokeAndFill['polygonOpacity'];\n  var gradient = isGradient(strokeAndFill['polygonFill']);\n  if (gradient) {\n    var gradientExtent;\n    if (isGradient(strokeAndFill['polygonFill'])) {\n      if (!gradientExtent) {\n        gradientExtent = getGraidentExtent(point, style.markerWidth, style.markerHeight);\n      }\n      strokeAndFill['polygonGradientExtent'] = gradientExtent;\n    }\n  }\n  Canvas.prepareCanvas(ctx, strokeAndFill, resources);\n  var width = style['markerWidth'],\n    height = style['markerHeight'],\n    hLineWidth = style['markerLineWidth'] / 2;\n  if (markerType === 'ellipse') {\n    Canvas.ellipse(ctx, point, width / 2, height / 2, height / 2, lineOpacity, fillOpacity);\n  } else if (markerType === 'cross' || markerType === 'x') {\n    for (var j = vectorArray.length - 1; j >= 0; j--) {\n      vectorArray[j]._add(point);\n    }\n    Canvas.path(ctx, vectorArray.slice(0, 2), lineOpacity);\n    Canvas.path(ctx, vectorArray.slice(2, 4), lineOpacity);\n  } else if (markerType === 'diamond' || markerType === 'bar' || markerType === 'square' || markerType === 'rectangle' || markerType === 'triangle') {\n    if (markerType === 'bar') {\n      point = point.add(0, -hLineWidth);\n    } else if (markerType === 'rectangle') {\n      point = point.add(hLineWidth, hLineWidth);\n    }\n    for (var _j = vectorArray.length - 1; _j >= 0; _j--) {\n      vectorArray[_j]._add(point);\n    }\n    Canvas.polygon(ctx, vectorArray, lineOpacity, fillOpacity);\n  } else if (markerType === 'pin') {\n    point = point.add(0, -hLineWidth);\n    for (var _j2 = vectorArray.length - 1; _j2 >= 0; _j2--) {\n      vectorArray[_j2]._add(point);\n    }\n    var lineCap = ctx.lineCap;\n    ctx.lineCap = 'round';\n    Canvas.bezierCurveAndFill(ctx, vectorArray, lineOpacity, fillOpacity);\n    ctx.lineCap = lineCap;\n  } else if (markerType === 'pie') {\n    point = point.add(0, -hLineWidth);\n    var angle = Math.atan(width / 2 / height) * 180 / Math.PI;\n    var _lineCap = ctx.lineCap;\n    ctx.lineCap = 'round';\n    Canvas.sector(ctx, point, height, [90 - angle, 90 + angle], lineOpacity, fillOpacity);\n    ctx.lineCap = _lineCap;\n  } else {\n    throw new Error('unsupported markerType: ' + markerType);\n  }\n  return ctx.canvas;\n}\nfunction getGraidentExtent(point, w, h) {\n  var e = new PointExtent();\n  e._combine(point);\n  e['xmin'] += -w / 2;\n  e['ymin'] += -h / 2;\n  e['xmax'] += w / 2;\n  e['ymax'] += h / 2;\n  return e;\n}\nfunction translateMarkerLineAndFill(s) {\n  var result = {\n    'lineColor': s['markerLineColor'],\n    'linePatternFile': s['markerLinePatternFile'],\n    'lineWidth': s['markerLineWidth'],\n    'lineOpacity': s['markerLineOpacity'],\n    'lineDasharray': s['markerLineDasharray'],\n    'lineCap': 'butt',\n    'lineJoin': 'round',\n    'polygonFill': s['markerFill'],\n    'polygonPatternFile': s['markerFillPatternFile'],\n    'polygonOpacity': s['markerFillOpacity']\n  };\n  if (result['lineWidth'] === 0) {\n    result['lineOpacity'] = 0;\n  }\n  return result;\n}\nfunction getVectorMarkerPoints(markerType, width, height) {\n  var hh = height / 2,\n    hw = width / 2;\n  var left = 0,\n    top = 0;\n  var v0, v1, v2, v3;\n  if (markerType === 'triangle') {\n    v0 = new Point(left, top - hh);\n    v1 = new Point(left - hw, top + hh);\n    v2 = new Point(left + hw, top + hh);\n    return [v0, v1, v2];\n  } else if (markerType === 'cross') {\n    v0 = new Point(left - hw, top);\n    v1 = new Point(left + hw, top);\n    v2 = new Point(left, top - hh);\n    v3 = new Point(left, top + hh);\n    return [v0, v1, v2, v3];\n  } else if (markerType === 'diamond') {\n    v0 = new Point(left - hw, top);\n    v1 = new Point(left, top - hh);\n    v2 = new Point(left + hw, top);\n    v3 = new Point(left, top + hh);\n    return [v0, v1, v2, v3];\n  } else if (markerType === 'square') {\n    v0 = new Point(left - hw, top + hh);\n    v1 = new Point(left + hw, top + hh);\n    v2 = new Point(left + hw, top - hh);\n    v3 = new Point(left - hw, top - hh);\n    return [v0, v1, v2, v3];\n  } else if (markerType === 'rectangle') {\n    v0 = new Point(left, top);\n    v1 = v0.add(width, 0);\n    v2 = v0.add(width, height);\n    v3 = v0.add(0, height);\n    return [v0, v1, v2, v3];\n  } else if (markerType === 'x') {\n    v0 = new Point(left - hw, top + hh);\n    v1 = new Point(left + hw, top - hh);\n    v2 = new Point(left + hw, top + hh);\n    v3 = new Point(left - hw, top - hh);\n    return [v0, v1, v2, v3];\n  } else if (markerType === 'bar') {\n    v0 = new Point(left - hw, top - height);\n    v1 = new Point(left + hw, top - height);\n    v2 = new Point(left + hw, top);\n    v3 = new Point(left - hw, top);\n    return [v0, v1, v2, v3];\n  } else if (markerType === 'pin' || markerType === 'pie') {\n    var extWidth = height * Math.atan(hw / hh);\n    v0 = new Point(left, top);\n    v1 = new Point(left - extWidth, top - height);\n    v2 = new Point(left + extWidth, top - height);\n    v3 = new Point(left, top);\n    return [v0, v1, v2, v3];\n  }\n  return [];\n}\n\nvar TEMP_POINT0$1 = new Point(0, 0);\nvar TEMP_POINT1 = new Point(0, 0);\nvar TEMP_POINT2 = new Point(0, 0);\nvar TEMP_POINT3 = new Point(0, 0);\nvar PointSymbolizer = function (_CanvasSymbolizer) {\n  _inheritsLoose(PointSymbolizer, _CanvasSymbolizer);\n  function PointSymbolizer(symbol, geometry, painter) {\n    var _this;\n    _this = _CanvasSymbolizer.call(this) || this;\n    _this.symbol = symbol;\n    _this.geometry = geometry;\n    _this.painter = painter;\n    return _this;\n  }\n  var _proto = PointSymbolizer.prototype;\n  _proto.get2DExtent = function get2DExtent() {\n    var map = this.getMap();\n    var glRes = map.getGLRes();\n    var extent = new PointExtent();\n    var renderPoints = this._getRenderPoints()[0];\n    for (var i = renderPoints.length - 1; i >= 0; i--) {\n      if (renderPoints[i]) {\n        extent._combine(map._pointAtResToPoint(renderPoints[i], glRes));\n      }\n    }\n    return extent;\n  };\n  _proto.isDynamicSize = function isDynamicSize() {\n    var symbol = this.symbol;\n    return isFunctionDefinition(symbol['markerWidth']) || isFunctionDefinition(symbol['markerHeight']) || isFunctionDefinition(symbol['textSize']);\n  };\n  _proto._rotateExtent = function _rotateExtent(fixedExtent, angle) {\n    return fixedExtent.convertTo(function (p) {\n      return p._rotate(angle);\n    });\n  };\n  _proto._getRenderPoints = function _getRenderPoints() {\n    var painter = this.getPainter();\n    var placement = painter.isSpriting() ? 'center' : this.getPlacement();\n    return this.getPainter().getRenderPoints(placement);\n  };\n  _proto._getRenderContainerPoints = function _getRenderContainerPoints(ignoreAltitude) {\n    var painter = this.getPainter();\n    if (painter.isSpriting()) {\n      return this._getRenderPoints()[0];\n    }\n    var geometry = this.geometry;\n    var dxdy = this.getDxDy();\n    var cpoints;\n    if (geometry._cPoint && !ignoreAltitude) {\n      var p = ignoreAltitude ? TEMP_POINT2 : TEMP_POINT3;\n      p.set(geometry._cPoint.x, geometry._cPoint.y);\n      var containerOffset = painter.containerOffset;\n      p._sub(containerOffset);\n      var dx = dxdy.x,\n        dy = dxdy.y;\n      if (dx || dy) {\n        p._add(dx || 0, dy || 0);\n      }\n      cpoints = [p];\n    } else {\n      var points = this._getRenderPoints()[0];\n      cpoints = this.painter._pointContainerPoints(points, dxdy.x, dxdy.y, ignoreAltitude, true, this.getPlacement());\n    }\n    if (!cpoints || !Array.isArray(cpoints[0])) {\n      return cpoints;\n    }\n    var flat = [];\n    for (var i = 0, l = cpoints.length; i < l; i++) {\n      for (var ii = 0, ll = cpoints[i].length; ii < ll; ii++) {\n        flat.push(cpoints[i][ii]);\n      }\n    }\n    return flat;\n  };\n  _proto.getPlacement = function getPlacement() {\n    return this.symbol['markerPlacement'];\n  };\n  _proto.getRotation = function getRotation() {\n    return getMarkerRotation(this.style);\n  };\n  _proto.getDxDy = function getDxDy() {\n    var s = this.style;\n    var dx = s['markerDx'],\n      dy = s['markerDy'];\n    return new Point(dx, dy);\n  };\n  _proto._getRotationAt = function _getRotationAt(i) {\n    var r = this.getRotation();\n    if (!r) {\n      r = 0;\n    }\n    var rotations = this._getRenderPoints()[1];\n    if (!rotations || !rotations[i]) {\n      return r;\n    }\n    var map = this.getMap();\n    var p0 = rotations[i][0],\n      p1 = rotations[i][1];\n    if (map.isTransforming()) {\n      var glRes = map.getGLRes();\n      p0 = map._pointAtResToContainerPoint(rotations[i][0], glRes, 0, TEMP_POINT0$1);\n      p1 = map._pointAtResToContainerPoint(rotations[i][1], glRes, 0, TEMP_POINT1);\n      return r + computeDegree(p0.x, p0.y, p1.x, p1.y);\n    } else {\n      return r + -computeDegree(p0.x, p0.y, p1.x, p1.y);\n    }\n  };\n  _proto._rotate = function _rotate(ctx, origin, rotation) {\n    if (rotation) {\n      var dxdy = this.getDxDy();\n      var p = origin.sub(dxdy);\n      ctx.save();\n      ctx.translate(p.x, p.y);\n      ctx.rotate(rotation);\n      return dxdy;\n    }\n    return null;\n  };\n  return PointSymbolizer;\n}(CanvasSymbolizer);\n\nvar DebugSymbolizer = function (_PointSymbolizer) {\n  _inheritsLoose(DebugSymbolizer, _PointSymbolizer);\n  function DebugSymbolizer() {\n    return _PointSymbolizer.apply(this, arguments) || this;\n  }\n  var _proto = DebugSymbolizer.prototype;\n  _proto.getPlacement = function getPlacement() {\n    return 'point';\n  };\n  _proto.getDxDy = function getDxDy() {\n    return new Point(0, 0);\n  };\n  _proto.symbolize = function symbolize(ctx) {\n    var geometry = this.geometry,\n      layer = geometry.getLayer();\n    if (!geometry.options['debug'] && layer && !layer.options['debug']) {\n      return;\n    }\n    var map = this.getMap();\n    if (!map || map.isZooming()) {\n      return;\n    }\n    var color = layer.options['debugOutline'],\n      op = 1;\n    ctx.strokeStyle = color;\n    ctx.fillStyle = color;\n    var outline = geometry.getContainerExtent().toArray();\n    Canvas.polygon(ctx, [outline], op, 0);\n    var points = this._getRenderContainerPoints(),\n      id = this.geometry.getId(),\n      cross = getVectorMarkerPoints('cross', 10, 10);\n    for (var i = 0; i < points.length; i++) {\n      var p = points[i];\n      if (!isNil(id)) {\n        Canvas.fillText(ctx, id, p.add(8, -4), color);\n      }\n      var c = [];\n      for (var ii = 0; ii < cross.length; ii++) {\n        c.push(cross[ii].add(p));\n      }\n      Canvas.path(ctx, c.slice(0, 2), op);\n      Canvas.path(ctx, c.slice(2, 4), op);\n    }\n  };\n  return DebugSymbolizer;\n}(PointSymbolizer);\n\nvar TEMP_SIZE$1 = new Size(1, 1);\nvar TEMP_EXTENT$1 = new PointExtent();\nvar ImageMarkerSymbolizer = function (_PointSymbolizer) {\n  _inheritsLoose(ImageMarkerSymbolizer, _PointSymbolizer);\n  ImageMarkerSymbolizer.test = function test(symbol) {\n    return isImageSymbol(symbol);\n  };\n  function ImageMarkerSymbolizer(symbol, geometry, painter) {\n    var _this;\n    _this = _PointSymbolizer.call(this, symbol, geometry, painter) || this;\n    _this.style = _this._defineStyle(_this.translate());\n    return _this;\n  }\n  var _proto = ImageMarkerSymbolizer.prototype;\n  _proto.symbolize = function symbolize(ctx, resources) {\n    var style = this.style;\n    if (!this.painter.isHitTesting() && (style['markerWidth'] === 0 || style['markerHeight'] === 0 || style['markerOpacity'] === 0)) {\n      return;\n    }\n    var cookedPoints = this._getRenderContainerPoints();\n    if (!isArrayHasData(cookedPoints)) {\n      return;\n    }\n    var img = this._getImage(resources);\n    if (!img) {\n      if (typeof console !== 'undefined') {\n        console.warn('no img found for ' + (this.style['markerFile'] || this._url[0]));\n      }\n      return;\n    }\n    this._prepareContext(ctx);\n    var width = style['markerWidth'];\n    var height = style['markerHeight'];\n    if (!isNumber(width) || !isNumber(height)) {\n      width = img.width;\n      height = img.height;\n      style['markerWidth'] = width;\n      style['markerHeight'] = height;\n      var imgURL = style['markerFile'];\n      if (!resources.isResourceLoaded(imgURL)) {\n        resources.addResource(imgURL, img);\n      }\n      var painter = this.getPainter();\n      if (!painter.isSpriting()) {\n        painter.removeCache();\n      }\n    }\n    var alpha;\n    if (this.symbol['markerType'] !== 'path' && isNumber(style['markerOpacity']) && style['markerOpacity'] < 1) {\n      alpha = ctx.globalAlpha;\n      ctx.globalAlpha *= style['markerOpacity'];\n    }\n    TEMP_SIZE$1.width = width;\n    TEMP_SIZE$1.height = height;\n    var alignPoint = getAlignPoint(TEMP_SIZE$1, style['markerHorizontalAlignment'], style['markerVerticalAlignment']);\n    for (var i = 0, len = cookedPoints.length; i < len; i++) {\n      var p = cookedPoints[i];\n      var origin = this.getRotation() ? this._rotate(ctx, p, this._getRotationAt(i)) : null;\n      var extent = void 0;\n      if (origin) {\n        var pixel = p.sub(origin);\n        p = origin;\n        var rad = this._getRotationAt(i);\n        extent = getMarkerRotationExtent(TEMP_EXTENT$1, rad, width, height, p, alignPoint);\n        extent._add(pixel);\n      }\n      var x = p.x + alignPoint.x,\n        y = p.y + alignPoint.y;\n      Canvas.image(ctx, img, x, y, width, height);\n      if (origin) {\n        ctx.restore();\n      }\n      if (origin) {\n        this._setBBOX(ctx, extent.xmin, extent.ymin, extent.xmax, extent.ymax);\n      } else {\n        this._setBBOX(ctx, x, y, x + width, y + height);\n      }\n    }\n    if (alpha !== undefined) {\n      ctx.globalAlpha = alpha;\n    }\n  };\n  _proto._getImage = function _getImage(resources) {\n    return getImage(resources, this.style['markerFile']);\n  };\n  _proto.getFixedExtent = function getFixedExtent(resources) {\n    this._fixedExtent = this._fixedExtent || new PointExtent();\n    return getImageMarkerFixedExtent(this._fixedExtent, this.style, resources);\n  };\n  _proto.translate = function translate() {\n    var s = this.symbol;\n    return {\n      'markerFile': s['markerFile'],\n      'markerOpacity': getValueOrDefault(s['markerOpacity'], 1),\n      'markerWidth': getValueOrDefault(s['markerWidth'], null),\n      'markerHeight': getValueOrDefault(s['markerHeight'], null),\n      'markerRotation': getValueOrDefault(s['markerRotation'], 0),\n      'markerDx': getValueOrDefault(s['markerDx'], 0),\n      'markerDy': getValueOrDefault(s['markerDy'], 0),\n      'markerHorizontalAlignment': getValueOrDefault(s['markerHorizontalAlignment'], 'middle'),\n      'markerVerticalAlignment': getValueOrDefault(s['markerVerticalAlignment'], 'top')\n    };\n  };\n  return ImageMarkerSymbolizer;\n}(PointSymbolizer);\n\nvar TEMP_COORD0$1 = new Coordinate(0, 0);\nvar TEMP_COORD1$1 = new Coordinate(0, 0);\nvar StrokeAndFillSymbolizer = function (_CanvasSymbolizer) {\n  _inheritsLoose(StrokeAndFillSymbolizer, _CanvasSymbolizer);\n  StrokeAndFillSymbolizer.test = function test(symbol, geometry) {\n    if (!symbol) {\n      return false;\n    }\n    if (geometry && geometry.type === 'Point') {\n      return false;\n    }\n    for (var p in symbol) {\n      var f = p.slice(0, 4);\n      if (f === 'line' || f === 'poly') {\n        return true;\n      }\n    }\n    return false;\n  };\n  function StrokeAndFillSymbolizer(symbol, geometry, painter) {\n    var _this;\n    _this = _CanvasSymbolizer.call(this) || this;\n    _this.symbol = symbol;\n    _this.geometry = geometry;\n    _this.painter = painter;\n    if (geometry.type === 'Point') {\n      return _assertThisInitialized(_this);\n    }\n    _this.style = _this._defineStyle(_this.translate());\n    return _this;\n  }\n  var _proto = StrokeAndFillSymbolizer.prototype;\n  _proto.symbolize = function symbolize(ctx, resources) {\n    var style = this.style;\n    if (style['polygonOpacity'] === 0 && style['lineOpacity'] === 0 && !this.painter.isHitTesting()) {\n      return;\n    }\n    var paintParams = this._getPaintParams();\n    if (!paintParams) {\n      return;\n    }\n    this._prepareContext(ctx);\n    var isGradient$$1 = isGradient(style['lineColor']),\n      isPath = this.geometry.getJSONType() === 'Polygon' || this.geometry.type === 'LineString';\n    if (isGradient$$1 && (style['lineColor']['places'] || !isPath)) {\n      style['lineGradientExtent'] = this.geometry.getContainerExtent()._expand(style['lineWidth']);\n    }\n    if (isGradient(style['polygonFill'])) {\n      style['polygonGradientExtent'] = this.geometry.getContainerExtent();\n    }\n    var geometryEventTolerance = this.geometry.getLayer().options['geometryEventTolerance'] || 0;\n    var tolerance = this.geometry._hitTestTolerance() + geometryEventTolerance;\n    var points = paintParams[0],\n      isSplitted = this.geometry.getJSONType() === 'Polygon' && points.length > 0 && Array.isArray(points[0][0]) || this.geometry.type === 'LineString' && points.length > 0 && Array.isArray(points[0]);\n    if (isSplitted) {\n      for (var i = 0; i < points.length; i++) {\n        this.prepareCanvas(ctx, style, resources);\n        if (isGradient$$1 && isPath && !style['lineColor']['places']) {\n          this._createGradient(ctx, points[i], style['lineColor']);\n        }\n        var params = [ctx, points[i]];\n        if (paintParams.length > 1) {\n          params.push.apply(params, paintParams.slice(1));\n        }\n        params.push(style['lineOpacity'], style['polygonOpacity'], style['lineDasharray']);\n        var bbox = this.geometry._paintOn.apply(this.geometry, params);\n        this._setBBOX(ctx, bbox);\n        this._bufferBBOX(ctx, tolerance);\n      }\n    } else {\n      this.prepareCanvas(ctx, style, resources);\n      if (isGradient$$1 && isPath && !style['lineColor']['places']) {\n        this._createGradient(ctx, points, style['lineColor']);\n      }\n      var _params = [ctx];\n      _params.push.apply(_params, paintParams);\n      _params.push(style['lineOpacity'], style['polygonOpacity'], style['lineDasharray']);\n      var _bbox = this.geometry._paintOn.apply(this.geometry, _params);\n      this._setBBOX(ctx, _bbox);\n      this._bufferBBOX(ctx, tolerance);\n    }\n    if (ctx.setLineDash && Array.isArray(style['lineDasharray'])) {\n      ctx.setLineDash([]);\n    }\n  };\n  _proto.get2DExtent = function get2DExtent() {\n    var map = this.getMap();\n    var extent = this.geometry._getPrjExtent();\n    if (!extent) {\n      return null;\n    }\n    if (!this._extMin || !this._extMax) {\n      this._extMin = new Coordinate(0, 0);\n      this._extMax = new Coordinate(0, 0);\n    }\n    this._extMin.x = extent['xmin'];\n    this._extMin.y = extent['ymin'];\n    this._extMax.x = extent['xmax'];\n    this._extMax.y = extent['ymax'];\n    var min = map._prjToPoint(this._extMin, undefined, TEMP_COORD0$1),\n      max = map._prjToPoint(this._extMax, undefined, TEMP_COORD1$1);\n    if (!this._pxExtent) {\n      this._pxExtent = new PointExtent(min, max);\n    } else {\n      this._pxExtent.set(Math.min(min.x, max.x), Math.min(min.y, max.y), Math.max(min.x, max.x), Math.max(min.y, max.y));\n    }\n    return this._pxExtent;\n  };\n  _proto.getFixedExtent = function getFixedExtent() {\n    var t = this.style['lineWidth'] / 2;\n    return new PointExtent(-t, -t, t, t);\n  };\n  _proto._getPaintParams = function _getPaintParams() {\n    return this.getPainter().getPaintParams(this.style['lineDx'], this.style['lineDy']);\n  };\n  _proto.translate = function translate() {\n    var s = this.symbol;\n    var result = {\n      'lineColor': getValueOrDefault(s['lineColor'], '#000'),\n      'lineWidth': getValueOrDefault(s['lineWidth'], 2),\n      'lineOpacity': getValueOrDefault(s['lineOpacity'], 1),\n      'lineDasharray': getValueOrDefault(s['lineDasharray'], []),\n      'lineCap': getValueOrDefault(s['lineCap'], 'butt'),\n      'lineJoin': getValueOrDefault(s['lineJoin'], 'miter'),\n      'linePatternFile': getValueOrDefault(s['linePatternFile'], null),\n      'lineDx': getValueOrDefault(s['lineDx'], 0),\n      'lineDy': getValueOrDefault(s['lineDy'], 0),\n      'polygonFill': getValueOrDefault(s['polygonFill'], null),\n      'polygonOpacity': getValueOrDefault(s['polygonOpacity'], 1),\n      'polygonPatternFile': getValueOrDefault(s['polygonPatternFile'], null),\n      'polygonPatternDx': getValueOrDefault(s['polygonPatternDx'], 0),\n      'polygonPatternDy': getValueOrDefault(s['polygonPatternDy'], 0),\n      'linePatternDx': getValueOrDefault(s['linePatternDx'], 0),\n      'linePatternDy': getValueOrDefault(s['linePatternDy'], 0)\n    };\n    if (result['lineWidth'] === 0) {\n      result['lineOpacity'] = 0;\n    }\n    if (this.geometry.type === 'LineString' && !result['polygonFill']) {\n      result['polygonFill'] = result['lineColor'];\n    }\n    return result;\n  };\n  _proto._createGradient = function _createGradient(ctx, points, lineColor) {\n    if (!Array.isArray(points) || !points.length) {\n      return;\n    }\n    var len = points.length;\n    var grad = ctx.createLinearGradient(points[0].x, points[0].y, points[len - 1].x, points[len - 1].y);\n    lineColor['colorStops'].forEach(function (stop) {\n      grad.addColorStop.apply(grad, stop);\n    });\n    ctx.strokeStyle = grad;\n  };\n  return StrokeAndFillSymbolizer;\n}(CanvasSymbolizer);\n\nvar TextMarkerSymbolizer = function (_PointSymbolizer) {\n  _inheritsLoose(TextMarkerSymbolizer, _PointSymbolizer);\n  TextMarkerSymbolizer.test = function test(symbol) {\n    return isTextSymbol(symbol);\n  };\n  function TextMarkerSymbolizer(symbol, geometry, painter) {\n    var _this;\n    _this = _PointSymbolizer.call(this, symbol, geometry, painter) || this;\n    var style = _this.translate();\n    _this._dynamic = hasFunctionDefinition(style);\n    _this.style = _this._defineStyle(style);\n    if (_this.style['textWrapWidth'] === 0) {\n      return _assertThisInitialized(_this);\n    }\n    _this.strokeAndFill = _this._defineStyle(_this.translateLineAndFill(_this.style));\n    return _this;\n  }\n  var _proto = TextMarkerSymbolizer.prototype;\n  _proto.symbolize = function symbolize(ctx, resources) {\n    if (!this.painter.isHitTesting() && (this.style['textSize'] === 0 || !this.style['textOpacity'] && (!this.style['textHaloRadius'] || !this.style['textHaloOpacity']) || this.style['textWrapWidth'] === 0)) {\n      return;\n    }\n    var cookedPoints = this._getRenderContainerPoints();\n    if (!isArrayHasData(cookedPoints)) {\n      return;\n    }\n    var style = this.style,\n      strokeAndFill = this.strokeAndFill;\n    var textContent = replaceVariable(this.style['textName'], this.geometry.getProperties());\n    if (this._dynamic) {\n      delete this._textDesc;\n    }\n    var textDesc = this._textDesc = this._textDesc || describeText(textContent, this.style);\n    this._prepareContext(ctx);\n    this.prepareCanvas(ctx, strokeAndFill, resources);\n    Canvas.prepareCanvasFont(ctx, style);\n    for (var i = 0, len = cookedPoints.length; i < len; i++) {\n      var p = cookedPoints[i];\n      var origin = this.getRotation() ? this._rotate(ctx, p, this._getRotationAt(i)) : null;\n      if (origin) {\n        p = origin;\n      }\n      var bbox = Canvas.text(ctx, textContent, p, style, textDesc);\n      this._setBBOX(ctx, bbox);\n      if (origin) {\n        ctx.restore();\n      }\n    }\n  };\n  _proto.getPlacement = function getPlacement() {\n    return this.symbol['textPlacement'];\n  };\n  _proto.getRotation = function getRotation() {\n    var r = this.style['textRotation'];\n    if (!isNumber(r)) {\n      return null;\n    }\n    return -r * Math.PI / 180;\n  };\n  _proto.getDxDy = function getDxDy() {\n    var s = this.style;\n    return new Point(s['textDx'], s['textDy']);\n  };\n  _proto.getFixedExtent = function getFixedExtent() {\n    var textDesc = this.geometry.getTextDesc();\n    if (Array.isArray(textDesc)) {\n      textDesc = textDesc[this._index];\n    }\n    this._fixedExtent = this._fixedExtent || new PointExtent();\n    if (!textDesc) {\n      return this._fixedExtent;\n    }\n    return getTextMarkerFixedExtent(this._fixedExtent, this.style, textDesc);\n  };\n  _proto.translate = function translate() {\n    var s = this.symbol;\n    var result = {\n      'textName': s['textName'],\n      'textFaceName': getValueOrDefault(s['textFaceName'], 'monospace'),\n      'textWeight': getValueOrDefault(s['textWeight'], 'normal'),\n      'textStyle': getValueOrDefault(s['textStyle'], 'normal'),\n      'textSize': getValueOrDefault(s['textSize'], DEFAULT_TEXT_SIZE),\n      'textFont': getValueOrDefault(s['textFont'], null),\n      'textFill': getValueOrDefault(s['textFill'], '#000'),\n      'textOpacity': getValueOrDefault(s['textOpacity'], 1),\n      'textHaloFill': getValueOrDefault(s['textHaloFill'], '#ffffff'),\n      'textHaloRadius': getValueOrDefault(s['textHaloRadius'], 0),\n      'textHaloOpacity': getValueOrDefault(s['textHaloOpacity'], 1),\n      'textWrapWidth': getValueOrDefault(s['textWrapWidth'], null),\n      'textWrapCharacter': getValueOrDefault(s['textWrapCharacter'], '\\n'),\n      'textLineSpacing': getValueOrDefault(s['textLineSpacing'], 0),\n      'textDx': getValueOrDefault(s['textDx'], 0),\n      'textDy': getValueOrDefault(s['textDy'], 0),\n      'textHorizontalAlignment': getValueOrDefault(s['textHorizontalAlignment'], 'middle'),\n      'textVerticalAlignment': getValueOrDefault(s['textVerticalAlignment'], 'middle'),\n      'textAlign': getValueOrDefault(s['textAlign'], 'center'),\n      'textRotation': getValueOrDefault(s['textRotation'], 0),\n      'textMaxWidth': getValueOrDefault(s['textMaxWidth'], 0),\n      'textMaxHeight': getValueOrDefault(s['textMaxHeight'], 0)\n    };\n    if (result['textMaxWidth'] > 0 && (!result['textWrapWidth'] || result['textWrapWidth'] > result['textMaxWidth'])) {\n      if (!result['textWrapWidth']) {\n        result['textMaxHeight'] = 1;\n      }\n      result['textWrapWidth'] = result['textMaxWidth'];\n    }\n    return result;\n  };\n  _proto.translateLineAndFill = function translateLineAndFill(s) {\n    return {\n      'lineColor': s['textHaloRadius'] ? s['textHaloFill'] : s['textFill'],\n      'lineWidth': s['textHaloRadius'],\n      'lineOpacity': s['textOpacity'],\n      'lineDasharray': null,\n      'lineCap': 'butt',\n      'lineJoin': 'round',\n      'polygonFill': s['textFill'],\n      'polygonOpacity': s['textOpacity']\n    };\n  };\n  return TextMarkerSymbolizer;\n}(PointSymbolizer);\n\nvar MARKER_SIZE = [];\nvar TEMP_EXTENT$2 = new PointExtent();\nvar VectorMarkerSymbolizer = function (_PointSymbolizer) {\n  _inheritsLoose(VectorMarkerSymbolizer, _PointSymbolizer);\n  VectorMarkerSymbolizer.test = function test(symbol) {\n    return isVectorSymbol(symbol);\n  };\n  function VectorMarkerSymbolizer(symbol, geometry, painter) {\n    var _this;\n    _this = _PointSymbolizer.call(this, symbol, geometry, painter) || this;\n    var style = _this.translate();\n    _this._dynamic = hasFunctionDefinition(style);\n    _this.style = _this._defineStyle(style);\n    _this.strokeAndFill = _this._defineStyle(translateMarkerLineAndFill(_this.style));\n    _this.padding = 0;\n    return _this;\n  }\n  var _proto = VectorMarkerSymbolizer.prototype;\n  _proto.symbolize = function symbolize(ctx, resources) {\n    var style = this.style;\n    if (!this.painter.isHitTesting() && (style['markerWidth'] === 0 || style['markerHeight'] === 0 || style['polygonOpacity'] === 0 && style['lineOpacity'] === 0)) {\n      return;\n    }\n    var cookedPoints = this._getRenderContainerPoints();\n    if (!isArrayHasData(cookedPoints)) {\n      return;\n    }\n    this._prepareContext(ctx);\n    if (this.getPainter().isSpriting() || this.geometry.getLayer().getMask() === this.geometry || this._dynamic || this.geometry.getLayer().options['cacheVectorOnCanvas'] === false) {\n      this._drawMarkers(ctx, cookedPoints, resources);\n    } else {\n      this._drawMarkersWithCache(ctx, cookedPoints, resources);\n    }\n  };\n  _proto._drawMarkers = function _drawMarkers(ctx, cookedPoints, resources) {\n    for (var i = cookedPoints.length - 1; i >= 0; i--) {\n      var point = cookedPoints[i];\n      var origin = this.getRotation() ? this._rotate(ctx, point, this._getRotationAt(i)) : null;\n      if (origin) {\n        point = origin;\n      }\n      this._drawVectorMarker(ctx, point, resources);\n      if (origin) {\n        ctx.restore();\n      }\n    }\n  };\n  _proto._drawMarkersWithCache = function _drawMarkersWithCache(ctx, cookedPoints, resources) {\n    var stamp = this._stampSymbol();\n    var image = resources.getImage(stamp);\n    if (!image) {\n      image = this._createMarkerImage(ctx, resources);\n      resources.addResource([stamp, image.width, image.height], image);\n    }\n    var anchor = getVectorMarkerAnchor(this.style, image.width, image.height);\n    for (var i = cookedPoints.length - 1; i >= 0; i--) {\n      var point = cookedPoints[i];\n      var origin = this.getRotation() ? this._rotate(ctx, point, this._getRotationAt(i)) : null;\n      var extent = void 0;\n      if (origin) {\n        var pixel = point.sub(origin);\n        point = origin;\n        var rad = this._getRotationAt(i);\n        extent = getMarkerRotationExtent(TEMP_EXTENT$2, rad, image.width, image.height, point, anchor);\n        extent._add(pixel);\n      }\n      var x = point.x + anchor.x,\n        y = point.y + anchor.y;\n      Canvas.image(ctx, image, x, y);\n      if (origin) {\n        ctx.restore();\n        this._setBBOX(ctx, extent.xmin, extent.ymin, extent.xmax, extent.ymax);\n      } else {\n        this._setBBOX(ctx, x, y, x + image.width, y + image.height);\n      }\n    }\n  };\n  _proto._createMarkerImage = function _createMarkerImage(ctx, resources) {\n    var canvasClass = ctx.canvas.constructor,\n      size = calVectorMarkerSize(MARKER_SIZE, this.style),\n      canvas = Canvas.createCanvas(size[0], size[1], canvasClass),\n      point = this._getCacheImageAnchor(size[0], size[1]);\n    var context = canvas.getContext('2d');\n    this._drawVectorMarker(context, point, resources);\n    return canvas;\n  };\n  _proto._stampSymbol = function _stampSymbol() {\n    if (!this._stamp) {\n      this._stamp = hashCode([this.style['markerType'], isGradient(this.style['markerFill']) ? getGradientStamp(this.style['markerFill']) : this.style['markerFill'], this.style['markerFillOpacity'], this.style['markerFillPatternFile'], isGradient(this.style['markerLineColor']) ? getGradientStamp(this.style['markerLineColor']) : this.style['markerLineColor'], this.style['markerLineWidth'], this.style['markerLineOpacity'], this.style['markerLineDasharray'] ? this.style['markerLineDasharray'].join(',') : '', this.style['markerLinePatternFile'], this.style['markerWidth'], this.style['markerHeight'], this.style['markerHorizontalAlignment'], this.style['markerVerticalAlignment']].join('_'));\n    }\n    return this._stamp;\n  };\n  _proto._getCacheImageAnchor = function _getCacheImageAnchor(w, h) {\n    var shadow = 2 * (this.symbol['shadowBlur'] || 0),\n      margin = shadow + this.padding;\n    var markerType = this.style['markerType'];\n    if (markerType === 'bar' || markerType === 'pie' || markerType === 'pin') {\n      return new Point(w / 2, h - margin);\n    } else if (markerType === 'rectangle') {\n      return new Point(margin, margin);\n    } else {\n      return new Point(w / 2, h / 2);\n    }\n  };\n  _proto._getGraidentExtent = function _getGraidentExtent(points) {\n    var e = new PointExtent(),\n      dxdy = this.getDxDy(),\n      m = this.getFixedExtent();\n    if (Array.isArray(points)) {\n      for (var i = points.length - 1; i >= 0; i--) {\n        e._combine(points[i]);\n      }\n    } else {\n      e._combine(points);\n    }\n    e['xmin'] += m['xmin'] - dxdy.x;\n    e['ymin'] += m['ymin'] - dxdy.y;\n    e['xmax'] += m['xmax'] - dxdy.x;\n    e['ymax'] += m['ymax'] - dxdy.y;\n    return e;\n  };\n  _proto._drawVectorMarker = function _drawVectorMarker(ctx, point, resources) {\n    drawVectorMarker(ctx, point, this.style, resources);\n  };\n  _proto.getFixedExtent = function getFixedExtent() {\n    var isDynamic = this.isDynamicSize();\n    var w = this.style.markerWidth;\n    var h = this.style.markerHeight;\n    this._fixedExtent = this._fixedExtent || new PointExtent();\n    return getVectorMarkerFixedExtent(this._fixedExtent, this.style, isDynamic ? [128, 128 * (w === 0 ? 1 : h / w)] : null);\n  };\n  _proto.translate = function translate() {\n    var s = this.symbol;\n    var result = {\n      'markerType': getValueOrDefault(s['markerType'], 'ellipse'),\n      'markerFill': getValueOrDefault(s['markerFill'], '#00f'),\n      'markerFillOpacity': getValueOrDefault(s['markerFillOpacity'], 1),\n      'markerFillPatternFile': getValueOrDefault(s['markerFillPatternFile'], null),\n      'markerLineColor': getValueOrDefault(s['markerLineColor'], '#000'),\n      'markerLineWidth': getValueOrDefault(s['markerLineWidth'], DEFAULT_MARKER_SYMBOLS.markerLineWidth),\n      'markerLineOpacity': getValueOrDefault(s['markerLineOpacity'], 1),\n      'markerLineDasharray': getValueOrDefault(s['markerLineDasharray'], []),\n      'markerLinePatternFile': getValueOrDefault(s['markerLinePatternFile'], null),\n      'markerDx': getValueOrDefault(s['markerDx'], 0),\n      'markerDy': getValueOrDefault(s['markerDy'], 0),\n      'markerWidth': getValueOrDefault(s['markerWidth'], DEFAULT_MARKER_SYMBOLS.markerWidth),\n      'markerHeight': getValueOrDefault(s['markerHeight'], DEFAULT_MARKER_SYMBOLS.markerHeight),\n      'markerRotation': getValueOrDefault(s['markerRotation'], 0),\n      'shadowBlur': getValueOrDefault(s['shadowBlur'], 0),\n      'shadowOffsetX': getValueOrDefault(s['shadowOffsetX'], 0),\n      'shadowOffsetY': getValueOrDefault(s['shadowOffsetY'], 0)\n    };\n    var markerType = result['markerType'];\n    var ha = getDefaultHAlign(markerType);\n    var va = getDefaultVAlign(markerType);\n    result['markerHorizontalAlignment'] = getValueOrDefault(s['markerHorizontalAlignment'], ha);\n    result['markerVerticalAlignment'] = getValueOrDefault(s['markerVerticalAlignment'], va);\n    if (isNumber(s['markerOpacity'])) {\n      if (isNumber(s['markerFillOpacity'])) {\n        result['markerFillOpacity'] *= s['markerOpacity'];\n      }\n      if (isNumber(s['markerLineOpacity'])) {\n        result['markerLineOpacity'] *= s['markerOpacity'];\n      }\n    }\n    return result;\n  };\n  return VectorMarkerSymbolizer;\n}(PointSymbolizer);\n\nvar VectorPathMarkerSymbolizer = function (_ImageMarkerSymbolize) {\n  _inheritsLoose(VectorPathMarkerSymbolizer, _ImageMarkerSymbolize);\n  VectorPathMarkerSymbolizer.test = function test(symbol) {\n    return isPathSymbol(symbol);\n  };\n  function VectorPathMarkerSymbolizer(symbol, geometry, painter) {\n    var _this;\n    if (isNil(symbol['markerWidth'])) {\n      symbol['markerWidth'] = 80;\n    }\n    if (isNil(symbol['markerHeight'])) {\n      symbol['markerHeight'] = 80;\n    }\n    _this = _ImageMarkerSymbolize.call(this, symbol, geometry, painter) || this;\n    symbol = extend(symbol, _this.translate());\n    var style = _this.style = _this._defineStyle(symbol);\n    if (Browser$1.gecko) {\n      _this._url = [getMarkerPathBase64(style, style['markerWidth'], style['markerHeight']), style['markerWidth'], style['markerHeight']];\n    } else {\n      _this._url = [getMarkerPathBase64(style), style['markerWidth'], style['markerHeight']];\n    }\n    return _this;\n  }\n  var _proto = VectorPathMarkerSymbolizer.prototype;\n  _proto._prepareContext = function _prepareContext() {};\n  _proto._getImage = function _getImage(resources) {\n    var _this2 = this;\n    if (resources && resources.isResourceLoaded(this._url)) {\n      return resources.getImage(this._url);\n    }\n    var painter = this.painter;\n    var image = new Image();\n    image.onload = function () {\n      var renderer = painter.getLayer() && painter.getLayer().getRenderer();\n      if (renderer) {\n        renderer.setToRedraw();\n      }\n    };\n    image.onerror = function (err) {\n      if (err && typeof console !== 'undefined') {\n        console.warn(err);\n      }\n      resources.markErrorResource(_this2._url);\n    };\n    image.src = this._url[0];\n    if (resources) {\n      resources.addResource(this._url, image);\n    }\n    return image;\n  };\n  return VectorPathMarkerSymbolizer;\n}(ImageMarkerSymbolizer);\n\nvar defaultSymbol = {\n  lineWidth: 1,\n  polygonFill: '#fff',\n  polygonOpacity: 0.5\n};\nvar DrawAltitudeSymbolizer = function (_PointSymbolizer) {\n  _inheritsLoose(DrawAltitudeSymbolizer, _PointSymbolizer);\n  DrawAltitudeSymbolizer.test = function test(symbol, geometry) {\n    var layer = geometry.getLayer();\n    if (!layer) {\n      return false;\n    }\n    var type = geometry.getJSONType();\n    return type === 'Marker' || type === 'LineString';\n  };\n  function DrawAltitudeSymbolizer(symbol, geometry, painter) {\n    var _this;\n    _this = _PointSymbolizer.call(this, symbol, geometry, painter) || this;\n    _this.style = geometry.getLayer().options['drawAltitude'];\n    if (!_this.style || !isObject(_this.style)) {\n      _this.style = {\n        'lineWidth': 2\n      };\n    }\n    if (!_this.style['lineWidth']) {\n      _this.style['lineWidth'] = 0;\n    }\n    _this.dxdy = _this._defineStyle({\n      'dx': symbol['textDx'] || symbol['markerDx'],\n      'dy': symbol['textDy'] || symbol['markerDy']\n    });\n    return _this;\n  }\n  var _proto = DrawAltitudeSymbolizer.prototype;\n  _proto.symbolize = function symbolize(ctx) {\n    var layer = this.geometry.getLayer();\n    if (!layer.options['drawAltitude']) {\n      return;\n    }\n    var properties = this.geometry.getProperties();\n    if (!properties || !properties[layer.options['altitudeProperty']]) {\n      return;\n    }\n    var style = this._getStyle();\n    this._prepareContext(ctx);\n    if (this.geometry.type === 'LineString') {\n      var paintParams = this._getPaintParams(style['lineDx'], style['lineDy'], false, true);\n      if (!paintParams) {\n        return;\n      }\n      var groundPoints = this.getPainter().getPaintParams(style['lineDx'], style['lineDy'], true, true, '_groundpt')[0];\n      this._drawLineAltitude(ctx, paintParams[0], groundPoints);\n    } else {\n      var point = this._getRenderContainerPoints(),\n        groundPoint = this._getRenderContainerPoints(true);\n      if (!point || point.length === 0) {\n        return;\n      }\n      this._drawMarkerAltitude(ctx, point[0], groundPoint[0]);\n    }\n  };\n  _proto.getDxDy = function getDxDy() {\n    var s = this.dxdy;\n    return new Point(s['dx'] || 0, s['dy'] || 0);\n  };\n  _proto.get2DExtent = function get2DExtent() {\n    if (this.geometry.type === 'LineString') {\n      return StrokeAndFillSymbolizer.prototype.get2DExtent.apply(this);\n    } else {\n      return _PointSymbolizer.prototype.get2DExtent.call(this);\n    }\n  };\n  _proto.getPlacement = function getPlacement() {\n    return 'point';\n  };\n  _proto._getPaintParams = function _getPaintParams(dx, dy) {\n    return this.getPainter().getPaintParams(dx || 0, dy || 0, null, true, '_altpt');\n  };\n  _proto._drawMarkerAltitude = function _drawMarkerAltitude(ctx, point, groundPoint) {\n    var style = this._getStyle();\n    this.prepareCanvas(ctx, style);\n    Canvas.path(ctx, [point, groundPoint], style['lineOpacity'], null, style['lineDasharray']);\n  };\n  _proto._drawLineAltitude = function _drawLineAltitude(ctx, points, groundPoints) {\n    var style = this._getStyle();\n    var isSplitted = points.length > 0 && Array.isArray(points[0]);\n    if (isSplitted) {\n      for (var i = 0; i < points.length; i++) {\n        this._drawLine(ctx, points[i], groundPoints[i]);\n      }\n    } else {\n      this._drawLine(ctx, points, groundPoints);\n    }\n    if (ctx.setLineDash && Array.isArray(style['lineDasharray'])) {\n      ctx.setLineDash([]);\n    }\n  };\n  _proto._drawLine = function _drawLine(ctx, points, groundPoints) {\n    var style = this._getStyle();\n    this.prepareCanvas(ctx, style);\n    for (var i = 0, l = points.length - 1; i < l; i++) {\n      Canvas.polygon(ctx, [points[i], points[i + 1], groundPoints[i + 1], groundPoints[i]], style['lineOpacity'], style['polygonOpacity'], style['lineDasharray']);\n    }\n  };\n  _proto._getStyle = function _getStyle() {\n    var style = this.geometry.getLayer().options['drawAltitude'];\n    if (!isObject(style)) {\n      style = defaultSymbol;\n    }\n    if (!style['lineWidth']) {\n      style['lineWidth'] = 0;\n      style['lineOpacity'] = 0;\n    }\n    return style;\n  };\n  return DrawAltitudeSymbolizer;\n}(PointSymbolizer);\n\n\n\nvar index$3 = /*#__PURE__*/Object.freeze({\n  Symbolizer: Symbolizer,\n  CanvasSymbolizer: CanvasSymbolizer,\n  DebugSymbolizer: DebugSymbolizer,\n  ImageMarkerSymbolizer: ImageMarkerSymbolizer,\n  PointSymbolizer: PointSymbolizer,\n  StrokeAndFillSymbolizer: StrokeAndFillSymbolizer,\n  TextMarkerSymbolizer: TextMarkerSymbolizer,\n  VectorMarkerSymbolizer: VectorMarkerSymbolizer,\n  VectorPathMarkerSymbolizer: VectorPathMarkerSymbolizer,\n  DrawAltitudeSymbolizer: DrawAltitudeSymbolizer\n});\n\nvar registerSymbolizers = [DrawAltitudeSymbolizer, StrokeAndFillSymbolizer, ImageMarkerSymbolizer, VectorPathMarkerSymbolizer, VectorMarkerSymbolizer, TextMarkerSymbolizer];\nvar testCanvas;\nvar TEMP_POINT0$2 = new Point(0, 0);\nvar TEMP_PAINT_EXTENT = new PointExtent();\nvar TEMP_FIXED_EXTENT = new PointExtent();\nvar TEMP_CLIP_EXTENT0 = new PointExtent();\nvar TEMP_CLIP_EXTENT1 = new PointExtent();\nvar TEMP_CLIP_EXTENT2 = new PointExtent();\nvar PROJECTION = {};\nvar TEMP_BBOX = {\n  minx: Infinity,\n  miny: Infinity,\n  maxx: -Infinity,\n  maxy: -Infinity\n};\nvar Painter = function (_Class) {\n  _inheritsLoose(Painter, _Class);\n  function Painter(geometry) {\n    var _this;\n    _this = _Class.call(this) || this;\n    _this.geometry = geometry;\n    _this.symbolizers = _this._createSymbolizers();\n    _this._altAtGL = _this._getGeometryAltitude();\n    _this.bbox = getDefaultBBOX();\n    _this._drawTime = 0;\n    return _this;\n  }\n  var _proto = Painter.prototype;\n  _proto._setDrawTime = function _setDrawTime(time) {\n    this._drawTime = time;\n    return this;\n  };\n  _proto.getRenderBBOX = function getRenderBBOX() {\n    var layer = this.getLayer();\n    if (layer && layer._drawTime !== this._drawTime) {\n      return null;\n    }\n    resetBBOX(this.bbox);\n    for (var i = this.symbolizers.length - 1; i >= 0; i--) {\n      var symbolizer = this.symbolizers[i];\n      var bbox = symbolizer.bbox;\n      if (!validateBBOX(bbox)) {\n        continue;\n      }\n      setBBOX(this.bbox, bbox);\n    }\n    if (validateBBOX(this.bbox)) {\n      return this.bbox;\n    }\n    return null;\n  };\n  _proto.getMap = function getMap() {\n    return this.geometry.getMap();\n  };\n  _proto.getLayer = function getLayer() {\n    return this.geometry && this.geometry.getLayer();\n  };\n  _proto._createSymbolizers = function _createSymbolizers() {\n    var geoSymbol = this.getSymbol(),\n      symbolizers = [],\n      regSymbolizers = registerSymbolizers;\n    var symbols = geoSymbol;\n    if (!Array.isArray(geoSymbol)) {\n      symbols = [geoSymbol];\n    }\n    for (var ii = symbols.length - 1; ii >= 0; ii--) {\n      var symbol = symbols[ii];\n      for (var i = regSymbolizers.length - 1; i >= 0; i--) {\n        if (regSymbolizers[i].test(symbol, this.geometry)) {\n          var symbolizer = new regSymbolizers[i](symbol, this.geometry, this);\n          symbolizer._index = ii;\n          symbolizers.push(symbolizer);\n          if (symbolizer instanceof PointSymbolizer) {\n            this._hasPoint = true;\n          }\n        }\n      }\n    }\n    if (!symbolizers.length) {\n      if (console) {\n        var id = this.geometry.getId();\n        console.warn('invalid symbol for geometry(' + (this.geometry ? this.geometry.getType() + (id ? ':' + id : '') : '') + ') to draw : ' + JSON.stringify(geoSymbol));\n      }\n    }\n    this._debugSymbolizer = new DebugSymbolizer(geoSymbol, this.geometry, this);\n    return symbolizers;\n  };\n  _proto.hasPoint = function hasPoint() {\n    return !!this._hasPoint;\n  };\n  _proto.getRenderPoints = function getRenderPoints(placement) {\n    this._verifyProjection();\n    if (!this._renderPoints) {\n      this._renderPoints = {};\n    }\n    if (!placement) {\n      placement = 'center';\n    }\n    if (!this._renderPoints[placement]) {\n      this._renderPoints[placement] = this.geometry._getRenderPoints(placement);\n    }\n    return this._renderPoints[placement];\n  };\n  _proto.getPaintParams = function getPaintParams(dx, dy, ignoreAltitude, disableClip, ptkey) {\n    if (ptkey === void 0) {\n      ptkey = '_pt';\n    }\n    var renderer = this.getLayer()._getRenderer();\n    var mapStateCache = renderer.mapStateCache;\n    var resolution, pitch, bearing, glScale, containerExtent;\n    var map = this.getMap();\n    if (mapStateCache && !this._hitPoint) {\n      resolution = mapStateCache.resolution;\n      pitch = mapStateCache.pitch;\n      bearing = mapStateCache.bearing;\n      glScale = mapStateCache.glScale;\n      containerExtent = mapStateCache.containerExtent;\n    } else {\n      resolution = map.getResolution();\n      pitch = map.getPitch();\n      bearing = map.getBearing();\n      glScale = map.getGLScale();\n      containerExtent = map.getContainerExtent();\n    }\n    var geometry = this.geometry,\n      res = resolution,\n      pitched = pitch !== 0,\n      rotated = bearing !== 0;\n    var params = this._cachedParams;\n    var paintAsPath = geometry._paintAsPath && geometry._paintAsPath();\n    if (paintAsPath && this._unsimpledParams && res <= this._unsimpledParams._res) {\n      params = this._unsimpledParams;\n    } else if (!params || params._res !== resolution || this._pitched !== pitched && geometry._redrawWhenPitch() || this._rotated !== rotated && geometry._redrawWhenRotate()) {\n      params = geometry._getPaintParams();\n      if (!params) {\n        return null;\n      }\n      params._res = res;\n      if (!geometry._simplified && paintAsPath) {\n        if (!this._unsimpledParams) {\n          this._unsimpledParams = params;\n        }\n        if (res > this._unsimpledParams._res) {\n          this._unsimpledParams._res = res;\n        }\n      }\n      this._cachedParams = params;\n    }\n    if (!params) {\n      return null;\n    }\n    this._pitched = pitched;\n    this._rotated = rotated;\n    var zoomScale = glScale,\n      tr = [],\n      points = params[0];\n    var mapExtent = containerExtent;\n    var cPoints = this._pointContainerPoints(points, dx, dy, ignoreAltitude, disableClip || this._hitPoint && !mapExtent.contains(this._hitPoint), null, ptkey);\n    if (!cPoints) {\n      return null;\n    }\n    tr.push(cPoints);\n    for (var i = 1, l = params.length; i < l; i++) {\n      if (isNumber(params[i]) || params[i] instanceof Size) {\n        if (isNumber(params[i])) {\n          tr.push(params[i] / zoomScale);\n        } else {\n          tr.push(params[i].multi(1 / zoomScale));\n        }\n      } else {\n        tr.push(params[i]);\n      }\n    }\n    return tr;\n  };\n  _proto._pointContainerPoints = function _pointContainerPoints(points, dx, dy, ignoreAltitude, disableClip, pointPlacement, ptkey) {\n    if (ptkey === void 0) {\n      ptkey = '_pt';\n    }\n    if (this._aboveCamera()) {\n      return null;\n    }\n    var renderer = this.getLayer()._getRenderer();\n    var mapStateCache = renderer.mapStateCache;\n    var map = this.getMap(),\n      geometry = this.geometry,\n      containerOffset = this.containerOffset;\n    var glRes, containerExtent;\n    if (mapStateCache) {\n      glRes = mapStateCache.glRes;\n      containerExtent = mapStateCache.containerExtent;\n    } else {\n      glRes = map.getGLRes();\n      containerExtent = map.getContainerExtent();\n    }\n    var cPoints;\n    var roundPoint = this.getLayer().options['roundPoint'];\n    var minx = Infinity,\n      miny = Infinity,\n      maxx = -Infinity,\n      maxy = -Infinity;\n    var needClip = !disableClip;\n    var clipBBoxBufferSize = renderer.layer.options['clipBBoxBufferSize'] || 3;\n    var symbolizers = this.symbolizers;\n    function pointsContainerPoints(viewPoints, alts) {\n      if (viewPoints === void 0) {\n        viewPoints = [];\n      }\n      if (alts === void 0) {\n        alts = [];\n      }\n      var pts = getPointsResultPts(viewPoints, ptkey);\n      pts = map._pointsAtResToContainerPoints(viewPoints, glRes, alts, pts);\n      for (var i = 0, len = pts.length; i < len; i++) {\n        var p = pts[i];\n        p._sub(containerOffset);\n        if (dx || dy) {\n          p._add(dx || 0, dy || 0);\n        }\n        if (roundPoint) {\n          p.x = Math.ceil(p.x);\n          p.y = Math.ceil(p.y);\n        }\n        minx = Math.min(p.x, minx);\n        miny = Math.min(p.y, miny);\n        maxx = Math.max(p.x, maxx);\n        maxy = Math.max(p.y, maxy);\n      }\n      if (needClip && isDashLine(symbolizers)) {\n        TEMP_CLIP_EXTENT2.ymin = containerExtent.ymin;\n        if (TEMP_CLIP_EXTENT2.ymin < clipBBoxBufferSize) {\n          TEMP_CLIP_EXTENT2.ymin = containerExtent.ymin - clipBBoxBufferSize;\n        }\n        TEMP_CLIP_EXTENT2.xmin = containerExtent.xmin - clipBBoxBufferSize;\n        TEMP_CLIP_EXTENT2.xmax = containerExtent.xmax + clipBBoxBufferSize;\n        TEMP_CLIP_EXTENT2.ymax = containerExtent.ymax + clipBBoxBufferSize;\n        if (geometry.getShell && geometry.getHoles) {\n          return clipPolygon(pts, TEMP_CLIP_EXTENT2);\n        }\n        var clipPts = clipLine(pts, TEMP_CLIP_EXTENT2, false);\n        if (clipPts.length) {\n          var _points = [];\n          clipPts.forEach(function (clipPt) {\n            for (var _i = 0, _len = clipPt.length; _i < _len; _i++) {\n              _points.push(clipPt[_i].point);\n            }\n          });\n          return _points;\n        }\n      }\n      return pts;\n    }\n    var altitude = this.getAltitude();\n    if (Array.isArray(points)) {\n      var _geometry = this.geometry;\n      var clipped;\n      if (!disableClip && _geometry.options['enableClip']) {\n        clipped = this._clip(points, altitude);\n        if (clipped.inView) {\n          needClip = false;\n        }\n      } else {\n        clipped = {\n          points: points,\n          altitude: altitude\n        };\n      }\n      var clipPoints = clipped.points;\n      altitude = clipped.altitude;\n      if (ignoreAltitude) {\n        altitude = 0;\n      }\n      var alt = altitude;\n      cPoints = [];\n      var alts = [];\n      var altitudeIsNumber = isNumber(altitude);\n      for (var i = 0, l = clipPoints.length; i < l; i++) {\n        var c = clipPoints[i];\n        if (Array.isArray(c)) {\n          if (altitudeIsNumber) {\n            var _cring = pointsContainerPoints(c, altitude);\n            cPoints.push(_cring);\n            continue;\n          }\n          var altArray = [];\n          for (var ii = 0, ll = c.length; ii < ll; ii++) {\n            if (Array.isArray(altitude)) {\n              if (altitude[i]) {\n                alt = altitude[i][ii];\n              } else {\n                alt = 0;\n              }\n            }\n            altArray.push(alt);\n          }\n          var cring = pointsContainerPoints(c, altArray);\n          cPoints.push(cring);\n        } else {\n          if (Array.isArray(altitude)) {\n            if (pointPlacement === 'vertex-last') {\n              alt = altitude[altitude.length - 1 - i];\n            } else if (pointPlacement === 'line') {\n              alt = (altitude[i] + altitude[i + 1]) / 2;\n            } else {\n              alt = altitude[i];\n            }\n          }\n          alts.push(alt);\n        }\n      }\n      if (alts.length) {\n        cPoints = pointsContainerPoints(clipPoints, alts);\n      }\n    } else if (points instanceof Point) {\n      if (ignoreAltitude) {\n        altitude = 0;\n      }\n      cPoints = map._pointAtResToContainerPoint(points, glRes, altitude)._sub(containerOffset);\n      if (dx || dy) {\n        cPoints._add(dx, dy);\n      }\n    }\n    TEMP_BBOX.minx = minx;\n    TEMP_BBOX.miny = miny;\n    TEMP_BBOX.maxx = maxx;\n    TEMP_BBOX.maxy = maxy;\n    this._containerBbox = TEMP_BBOX;\n    return cPoints;\n  };\n  _proto._clip = function _clip(points, altitude) {\n    if (isNumber(altitude) && altitude !== 0) {\n      return {\n        points: points,\n        altitude: altitude\n      };\n    }\n    if (Array.isArray(altitude)) {\n      var hasAltitude = false;\n      for (var i = 0, len = altitude.length; i < len; i++) {\n        if (altitude[i] !== 0) {\n          hasAltitude = true;\n          break;\n        }\n      }\n      if (hasAltitude) {\n        return {\n          points: points,\n          altitude: altitude\n        };\n      }\n    }\n    var map = this.getMap(),\n      geometry = this.geometry;\n    var lineWidth = this.getSymbol()['lineWidth'];\n    if (!isNumber(lineWidth)) {\n      lineWidth = 4;\n    }\n    var renderer = this.getLayer()._getRenderer();\n    var mapStateCache = renderer.mapStateCache;\n    var _2DExtent, glExtent, pitch;\n    if (mapStateCache) {\n      _2DExtent = mapStateCache._2DExtent;\n      glExtent = mapStateCache.glExtent;\n      pitch = mapStateCache.pitch;\n    } else {\n      _2DExtent = map._get2DExtent();\n      glExtent = map._get2DExtentAtRes(map.getGLRes());\n      pitch = map.getPitch();\n    }\n    var extent2D = _2DExtent._expand(lineWidth);\n    if (pitch > 0 && altitude) {\n      var c = map.cameraLookAt;\n      var pos = map.cameraPosition;\n      TEMP_POINT0$2.set(pos.x, pos.y);\n      extent2D = extent2D._combine(TEMP_POINT0$2._add(sign(c[0] - pos[0]), sign(c[1] - pos[1])));\n    }\n    var e = this.get2DExtent(null, TEMP_CLIP_EXTENT1);\n    var clipPoints = points;\n    if (e.within(extent2D)) {\n      return {\n        points: clipPoints,\n        altitude: altitude,\n        inView: true\n      };\n    }\n    var glExtent2D = glExtent._expand(lineWidth * map._glScale);\n    TEMP_CLIP_EXTENT0.xmin = glExtent2D.xmin;\n    TEMP_CLIP_EXTENT0.xmax = glExtent2D.xmax;\n    TEMP_CLIP_EXTENT0.ymin = glExtent2D.ymin;\n    TEMP_CLIP_EXTENT0.ymax = glExtent2D.ymax;\n    var smoothness = geometry.options['smoothness'];\n    if (geometry.getShell && this.geometry.getHoles && !smoothness) {\n      var xmin = glExtent2D.xmin,\n        ymin = glExtent2D.ymin,\n        xmax = glExtent2D.xmax,\n        ymax = glExtent2D.ymax;\n      var dx = Math.abs(xmax - xmin),\n        dy = Math.abs(ymax - ymin);\n      var r = Math.sqrt(dx * dx + dy * dy);\n      var rx = (r - dx) / 2,\n        ry = (r - dy) / 2;\n      TEMP_CLIP_EXTENT0.xmin = glExtent2D.xmin - rx;\n      TEMP_CLIP_EXTENT0.xmax = glExtent2D.xmax + rx;\n      TEMP_CLIP_EXTENT0.ymin = glExtent2D.ymin - ry;\n      TEMP_CLIP_EXTENT0.ymax = glExtent2D.ymax + ry;\n      if (!Array.isArray(points[0])) {\n        clipPoints = clipPolygon(points, TEMP_CLIP_EXTENT0);\n      } else {\n        clipPoints = [];\n        for (var _i2 = 0; _i2 < points.length; _i2++) {\n          var part = clipPolygon(points[_i2], TEMP_CLIP_EXTENT0);\n          if (part.length) {\n            clipPoints.push(part);\n          }\n        }\n      }\n    } else if (geometry.getJSONType() === 'LineString' && !smoothness) {\n      if (!Array.isArray(points[0])) {\n        clipPoints = clipLine(points, TEMP_CLIP_EXTENT0, false, !!smoothness);\n      } else {\n        clipPoints = [];\n        for (var _i3 = 0; _i3 < points.length; _i3++) {\n          pushIn(clipPoints, clipLine(points[_i3], TEMP_CLIP_EXTENT0, false, !!smoothness));\n        }\n      }\n      return this._interpolateSegAlt(clipPoints, points, altitude);\n    }\n    return {\n      points: clipPoints,\n      altitude: altitude\n    };\n  };\n  _proto._interpolateSegAlt = function _interpolateSegAlt(clipSegs, orig, altitude) {\n    if (!Array.isArray(altitude)) {\n      var fn = function fn(cc) {\n        return cc.point;\n      };\n      return {\n        points: clipSegs.map(function (c) {\n          if (Array.isArray(c)) {\n            return c.map(fn);\n          }\n          return c.point;\n        }),\n        altitude: altitude\n      };\n    }\n    var segsWithAlt = interpolateAlt(clipSegs, orig, altitude);\n    altitude = [];\n    var points = segsWithAlt.map(function (p) {\n      if (Array.isArray(p)) {\n        var alt = [];\n        var cp = p.map(function (pp) {\n          alt.push(pp.altitude);\n          return pp.point;\n        });\n        altitude.push(alt);\n        return cp;\n      }\n      altitude.push(p.altitude);\n      return p.point;\n    });\n    return {\n      points: points,\n      altitude: altitude\n    };\n  };\n  _proto.getSymbol = function getSymbol() {\n    return this.geometry._getInternalSymbol();\n  };\n  _proto._resetSymbolizersBBOX = function _resetSymbolizersBBOX() {\n    for (var i = this.symbolizers.length - 1; i >= 0; i--) {\n      var symbolizer = this.symbolizers[i];\n      var bbox = symbolizer.bbox;\n      resetBBOX(bbox);\n    }\n    return this;\n  };\n  _proto.paint = function paint(extent, context, offset) {\n    if (!this.symbolizers) {\n      return;\n    }\n    var layer = this.getLayer();\n    var renderer = layer._getRenderer();\n    if (!renderer || !renderer.context && !context) {\n      return;\n    }\n    var mapStateCache = renderer.mapStateCache || {};\n    if (!this.geometry._isCheck) {\n      if (extent && !extent.intersects(this.get2DExtent(renderer.resources, TEMP_PAINT_EXTENT))) {\n        return;\n      }\n    }\n    var map = this.getMap();\n    if (this._aboveCamera()) {\n      return;\n    }\n    this.containerOffset = offset || mapStateCache.offset || map._pointToContainerPoint(renderer.southWest)._add(0, -map.height);\n    this._beforePaint();\n    var ctx = context || renderer.context;\n    if (!ctx.isHitTesting) {\n      this._resetSymbolizersBBOX();\n    }\n    var contexts = [ctx, renderer.resources];\n    for (var i = this.symbolizers.length - 1; i >= 0; i--) {\n      if (ctx.shadowBlur || this.symbolizers[i].symbol['shadowBlur']) {\n        this._prepareShadow(ctx, this.symbolizers[i].symbol);\n      }\n      this.symbolizers[i].symbolize.apply(this.symbolizers[i], contexts);\n    }\n    this._afterPaint();\n    this._painted = true;\n    if (this.geometry.options['debug'] || layer.options['debug']) {\n      this._debugSymbolizer.symbolize.apply(this._debugSymbolizer, contexts);\n    }\n  };\n  _proto.getSprite = function getSprite(resources, canvasClass) {\n    if (this.geometry.type !== 'Point') {\n      return null;\n    }\n    this._spriting = true;\n    if (!this._sprite && this.symbolizers.length > 0) {\n      var extent = new PointExtent();\n      this.symbolizers.forEach(function (s) {\n        var markerExtent = s.getFixedExtent(resources);\n        extent._combine(markerExtent);\n      });\n      var origin = extent.getMin().multi(-1);\n      var clazz = canvasClass || (this.getMap() ? this.getMap().CanvasClass : null);\n      var canvas = Canvas.createCanvas(extent.getWidth(), extent.getHeight(), clazz);\n      var bak;\n      if (this._renderPoints) {\n        bak = this._renderPoints;\n      }\n      var ctx = canvas.getContext('2d');\n      var contexts = [ctx, resources];\n      for (var i = this.symbolizers.length - 1; i >= 0; i--) {\n        var dxdy = this.symbolizers[i].getDxDy();\n        this._renderPoints = {\n          'center': [[origin.add(dxdy)]]\n        };\n        this._prepareShadow(ctx, this.symbolizers[i].symbol);\n        this.symbolizers[i].symbolize.apply(this.symbolizers[i], contexts);\n      }\n      if (bak) {\n        this._renderPoints = bak;\n      }\n      this._sprite = {\n        'canvas': canvas,\n        'offset': extent.getCenter()\n      };\n    }\n    this._spriting = false;\n    return this._sprite;\n  };\n  _proto.isSpriting = function isSpriting() {\n    return !!this._spriting;\n  };\n  _proto.hitTest = function hitTest(cp, tolerance) {\n    if (!tolerance || tolerance < 0.5) {\n      tolerance = 0.5;\n    }\n    this._hitPoint = cp.sub(tolerance, tolerance);\n    if (!testCanvas) {\n      var canvasClass = this.getMap() ? this.getMap().CanvasClass : null;\n      testCanvas = Canvas.createCanvas(1, 1, canvasClass);\n    }\n    Canvas.setHitTesting(true);\n    testCanvas.width = testCanvas.height = 2 * tolerance;\n    var ctx = Canvas.getCanvas2DContext(testCanvas);\n    ctx.isHitTesting = true;\n    try {\n      this.paint(null, ctx, this._hitPoint);\n    } catch (e) {\n      throw e;\n    } finally {\n      Canvas.setHitTesting(false);\n    }\n    delete this._hitPoint;\n    var imgData = ctx.getImageData(0, 0, testCanvas.width, testCanvas.height).data;\n    for (var i = 3, l = imgData.length; i < l; i += 4) {\n      if (imgData[i] > 0) {\n        return true;\n      }\n    }\n    return false;\n  };\n  _proto.isHitTesting = function isHitTesting() {\n    return !!this._hitPoint;\n  };\n  _proto._prepareShadow = function _prepareShadow(ctx, symbol) {\n    if (symbol['shadowBlur']) {\n      ctx.shadowBlur = this.isHitTesting() ? 0 : symbol['shadowBlur'];\n      ctx.shadowColor = symbol['shadowColor'] || '#000';\n      ctx.shadowOffsetX = symbol['shadowOffsetX'] || 0;\n      ctx.shadowOffsetY = symbol['shadowOffsetY'] || 0;\n    } else if (ctx.shadowBlur) {\n      ctx.shadowBlur = null;\n      ctx.shadowColor = null;\n      ctx.shadowOffsetX = null;\n      ctx.shadowOffsetY = null;\n    }\n  };\n  _proto._eachSymbolizer = function _eachSymbolizer(fn, context) {\n    if (!this.symbolizers) {\n      return;\n    }\n    if (!context) {\n      context = this;\n    }\n    for (var i = this.symbolizers.length - 1; i >= 0; i--) {\n      fn.apply(context, [this.symbolizers[i]]);\n    }\n  };\n  _proto.get2DExtent = function get2DExtent(resources, out) {\n    this._verifyProjection();\n    var map = this.getMap();\n    resources = resources || this.getLayer()._getRenderer().resources;\n    var zoom = map.getZoom();\n    var isDynamicSize = this._isDynamicSize();\n    if (!this._extent2D || this._extent2D._zoom !== zoom || !this._fixedExtent) {\n      if (this._extent2D && this._extent2D._zoom !== zoom) {\n        delete this._extent2D;\n      }\n      if (this.symbolizers) {\n        if (!this._extent2D) {\n          this._extent2D = this._computeExtent2D(new PointExtent());\n          this._extent2D._zoom = zoom;\n        }\n        if (!this._fixedExtent) {\n          this._fixedExtent = this._computeFixedExtent(resources, new PointExtent());\n        }\n      }\n    }\n    if (!this._extent2D) {\n      if (isDynamicSize) {\n        delete this._fixedExtent;\n      }\n      return null;\n    }\n    var _this$_fixedExtent = this._fixedExtent,\n      xmin = _this$_fixedExtent.xmin,\n      ymin = _this$_fixedExtent.ymin,\n      xmax = _this$_fixedExtent.xmax,\n      ymax = _this$_fixedExtent.ymax;\n    if (isDynamicSize) {\n      delete this._fixedExtent;\n    }\n    TEMP_FIXED_EXTENT.set(xmin, -ymax, xmax, -ymin);\n    if (out) {\n      out.set(this._extent2D['xmin'], this._extent2D['ymin'], this._extent2D['xmax'], this._extent2D['ymax']);\n      out._add(TEMP_FIXED_EXTENT);\n      return out;\n    }\n    return this._extent2D.add(TEMP_FIXED_EXTENT);\n  };\n  _proto._computeExtent2D = function _computeExtent2D(extent) {\n    for (var i = this.symbolizers.length - 1; i >= 0; i--) {\n      var symbolizer = this.symbolizers[i];\n      extent._combine(symbolizer.get2DExtent());\n    }\n    return extent;\n  };\n  _proto._computeFixedExtent = function _computeFixedExtent(resources, extent) {\n    for (var i = this.symbolizers.length - 1; i >= 0; i--) {\n      var symbolizer = this.symbolizers[i];\n      if (symbolizer.getFixedExtent) {\n        extent._combine(symbolizer.getFixedExtent(resources));\n      }\n    }\n    return extent;\n  };\n  _proto._isDynamicSize = function _isDynamicSize() {\n    for (var i = this.symbolizers.length - 1; i >= 0; i--) {\n      var symbolizer = this.symbolizers[i];\n      if (symbolizer.isDynamicSize()) {\n        return true;\n      }\n    }\n    return false;\n  };\n  _proto._aboveCamera = function _aboveCamera() {\n    var altitude = this.getMinAltitude();\n    var map = this.getMap();\n    var glRes = map.getGLRes();\n    altitude = map.altitudeToPoint(altitude, glRes) * sign(altitude);\n    var frustumAlt = map.getFrustumAltitude();\n    return altitude && frustumAlt && frustumAlt < altitude;\n  };\n  _proto.getFixedExtent = function getFixedExtent() {\n    var map = this.getMap();\n    var zoom = map.getZoom();\n    if (this._isDynamicSize()) {\n      return this._computeFixedExtent(null, new PointExtent());\n    }\n    if (!this._extent2D || this._extent2D._zoom !== zoom) {\n      this.get2DExtent(null, TEMP_FIXED_EXTENT);\n    }\n    return this._fixedExtent;\n  };\n  _proto.setZIndex = function setZIndex(change) {\n    this._eachSymbolizer(function (symbolizer) {\n      symbolizer.setZIndex(change);\n    });\n  };\n  _proto.show = function show() {\n    if (!this._painted) {\n      var layer = this.getLayer();\n      if (!layer.isCanvasRender()) {\n        this.paint();\n      }\n    } else {\n      this.removeCache();\n      this._eachSymbolizer(function (symbolizer) {\n        symbolizer.show();\n      });\n    }\n  };\n  _proto.hide = function hide() {\n    this._eachSymbolizer(function (symbolizer) {\n      symbolizer.hide();\n    });\n  };\n  _proto.repaint = function repaint() {\n    this._altAtGL = this._getGeometryAltitude();\n    this.removeCache();\n    var layer = this.getLayer();\n    if (!layer) {\n      return;\n    }\n    var renderer = layer.getRenderer();\n    if (!renderer || !renderer.setToRedraw()) {\n      return;\n    }\n    renderer.setToRedraw();\n  };\n  _proto.refreshSymbol = function refreshSymbol() {\n    this.removeCache();\n    this._removeSymbolizers();\n    this.symbolizers = this._createSymbolizers();\n  };\n  _proto.remove = function remove() {\n    this.removeCache();\n    this._removeSymbolizers();\n  };\n  _proto._removeSymbolizers = function _removeSymbolizers() {\n    this._eachSymbolizer(function (symbolizer) {\n      delete symbolizer.painter;\n      symbolizer.remove();\n    });\n    delete this.symbolizers;\n  };\n  _proto.removeCache = function removeCache() {\n    delete this._renderPoints;\n    delete this._paintParams;\n    delete this._sprite;\n    delete this._extent2D;\n    delete this._fixedExtent;\n    delete this._cachedParams;\n    delete this._unsimpledParams;\n  };\n  _proto.getAltitude = function getAltitude() {\n    var propAlt = this.geometry._getAltitude();\n    if (propAlt !== this._propAlt) {\n      this._altAtGL = this._getGeometryAltitude();\n    }\n    if (!this._altAtGL) {\n      return 0;\n    }\n    return this._altAtGL;\n  };\n  _proto.getMinAltitude = function getMinAltitude() {\n    if (!this.minAltitude) {\n      return 0;\n    }\n    return this.minAltitude;\n  };\n  _proto.getMaxAltitude = function getMaxAltitude() {\n    if (!this.maxAltitude) {\n      return 0;\n    }\n    return this.maxAltitude;\n  };\n  _proto._getGeometryAltitude = function _getGeometryAltitude() {\n    var _this2 = this;\n    var map = this.getMap();\n    if (!map) {\n      return 0;\n    }\n    var altitude = this.geometry._getAltitude();\n    this._propAlt = altitude;\n    if (!altitude) {\n      this.minAltitude = this.maxAltitude = 0;\n      return 0;\n    }\n    var center = this.geometry.getCenter();\n    if (!center) {\n      return 0;\n    }\n    if (Array.isArray(altitude)) {\n      this.minAltitude = Number.MAX_VALUE;\n      this.maxAltitude = Number.MIN_VALUE;\n      return altitude.map(function (alt) {\n        var a = alt;\n        if (a < _this2.minAltitude) {\n          _this2.minAltitude = a;\n        }\n        if (a > _this2.maxAltitude) {\n          _this2.maxAltitude = a;\n        }\n        return a;\n      });\n    } else {\n      this.minAltitude = this.maxAltitude = altitude;\n      return this.minAltitude;\n    }\n  };\n  _proto._verifyProjection = function _verifyProjection() {\n    var projection = this.geometry._getProjection() || PROJECTION;\n    if (this._projCode && this._projCode !== projection.code) {\n      this.removeCache();\n    }\n    this._projCode = projection.code;\n  };\n  _proto._beforePaint = function _beforePaint() {};\n  _proto._afterPaint = function _afterPaint() {};\n  return Painter;\n}(Class);\nfunction interpolateAlt(points, orig, altitude) {\n  if (!Array.isArray(altitude)) {\n    return points;\n  }\n  var parts = [];\n  for (var i = 0, l = points.length; i < l; i++) {\n    if (Array.isArray(points[i])) {\n      parts.push(interpolateAlt(points[i], orig, altitude));\n    } else {\n      var p = points[i];\n      if (!p.point.equals(orig[p.index])) {\n        var w0 = void 0,\n          w1 = void 0;\n        if (p.index === 0) {\n          w0 = p.index;\n          w1 = p.index + 1;\n        } else {\n          w0 = p.index - 1;\n          w1 = p.index;\n        }\n        var t0 = p.point.distanceTo(orig[w1]);\n        var t = t0 / (t0 + orig[w0].distanceTo(p.point));\n        var alt = interpolate(altitude[w0], altitude[w1], 1 - t);\n        p.altitude = alt;\n        parts.push(p);\n      } else {\n        p.altitude = altitude[p.index];\n        parts.push(p);\n      }\n    }\n  }\n  return parts;\n}\n\nvar TEMP_EXTENT$3 = new PointExtent();\nvar CollectionPainter = function (_Class) {\n  _inheritsLoose(CollectionPainter, _Class);\n  function CollectionPainter(geometry, isMask) {\n    var _this;\n    _this = _Class.call(this) || this;\n    _this.geometry = geometry;\n    _this.isMask = isMask;\n    _this.bbox = getDefaultBBOX();\n    _this._drawTime = 0;\n    return _this;\n  }\n  var _proto = CollectionPainter.prototype;\n  _proto._setDrawTime = function _setDrawTime(time) {\n    this._drawTime = time;\n    this._eachPainter(function (painter) {\n      painter._setDrawTime(time);\n    });\n    return this;\n  };\n  _proto.getRenderBBOX = function getRenderBBOX() {\n    var _this2 = this;\n    var layer = this.getLayer();\n    if (layer && layer._drawTime !== this._drawTime) {\n      return null;\n    }\n    resetBBOX(this.bbox);\n    this._eachPainter(function (painter) {\n      var bbox = painter.getRenderBBOX();\n      if (!validateBBOX(bbox)) {\n        return;\n      }\n      setBBOX(_this2.bbox, bbox);\n    });\n    if (validateBBOX(this.bbox)) {\n      return this.bbox;\n    }\n    return null;\n  };\n  _proto._eachPainter = function _eachPainter(fn) {\n    var geometries = this.geometry.getGeometries();\n    var painter;\n    for (var i = 0, len = geometries.length; i < len; i++) {\n      painter = this.isMask ? geometries[i]._getMaskPainter() : geometries[i]._getPainter();\n      if (!painter) {\n        continue;\n      }\n      if (painter) {\n        if (fn.call(this, painter) === false) {\n          break;\n        }\n      }\n    }\n  };\n  _proto.getLayer = function getLayer() {\n    return this.geometry && this.geometry.getLayer();\n  };\n  _proto.paint = function paint(extent) {\n    if (!this.geometry) {\n      return;\n    }\n    this._eachPainter(function (painter) {\n      painter.paint(extent);\n    });\n  };\n  _proto.get2DExtent = function get2DExtent(resources, out) {\n    if (out) {\n      out.set(null, null, null, null);\n    }\n    var extent = out || new PointExtent();\n    this._eachPainter(function (painter) {\n      extent = extent._combine(painter.get2DExtent(resources, TEMP_EXTENT$3));\n    });\n    return extent;\n  };\n  _proto.remove = function remove() {\n    var args = arguments;\n    this._eachPainter(function (painter) {\n      painter.remove.apply(painter, args);\n    });\n  };\n  _proto.setZIndex = function setZIndex() {\n    var args = arguments;\n    this._eachPainter(function (painter) {\n      painter.setZIndex.apply(painter, args);\n    });\n  };\n  _proto.show = function show() {\n    var args = arguments;\n    this._eachPainter(function (painter) {\n      painter.show.apply(painter, args);\n    });\n  };\n  _proto.hide = function hide() {\n    var args = arguments;\n    this._eachPainter(function (painter) {\n      painter.hide.apply(painter, args);\n    });\n  };\n  _proto.repaint = function repaint() {\n    var args = arguments;\n    this._eachPainter(function (painter) {\n      painter.repaint.apply(painter, args);\n    });\n  };\n  _proto.refreshSymbol = function refreshSymbol() {\n    var args = arguments;\n    this._eachPainter(function (painter) {\n      painter.refreshSymbol.apply(painter, args);\n    });\n  };\n  _proto.hasPoint = function hasPoint() {\n    var result = false;\n    this._eachPainter(function (painter) {\n      if (painter.hasPoint()) {\n        result = true;\n        return false;\n      }\n      return true;\n    });\n    return result;\n  };\n  _proto.getMinAltitude = function getMinAltitude() {\n    var first = true;\n    var result = 0;\n    this._eachPainter(function (painter) {\n      var alt = painter.getMinAltitude();\n      if (first || alt < result) {\n        first = false;\n        result = alt;\n      }\n    });\n    return result;\n  };\n  _proto.getMaxAltitude = function getMaxAltitude() {\n    var result = 0;\n    this._eachPainter(function (painter) {\n      var alt = painter.getMaxAltitude();\n      if (alt > result) {\n        result = alt;\n      }\n    });\n    return result;\n  };\n  return CollectionPainter;\n}(Class);\n\nvar MAX_ZOOM = 23;\nvar DefaultSpatialReference = {\n  'EPSG:3857': {\n    'projection': 'EPSG:3857',\n    'resolutions': function () {\n      var resolutions = [];\n      var d = 2 * 6378137 * Math.PI;\n      for (var i = 0; i < MAX_ZOOM; i++) {\n        resolutions[i] = d / (256 * Math.pow(2, i));\n      }\n      return resolutions;\n    }(),\n    'fullExtent': {\n      'top': 6378137 * Math.PI,\n      'left': -6378137 * Math.PI,\n      'bottom': -6378137 * Math.PI,\n      'right': 6378137 * Math.PI\n    }\n  },\n  'EPSG:4326': {\n    'projection': 'EPSG:4326',\n    'fullExtent': {\n      'top': 90,\n      'left': -180,\n      'bottom': -90,\n      'right': 180\n    },\n    'resolutions': function () {\n      var resolutions = [];\n      for (var i = 0; i < MAX_ZOOM; i++) {\n        resolutions[i] = 180 / (Math.pow(2, i) * 128);\n      }\n      return resolutions;\n    }()\n  },\n  'BAIDU': {\n    'projection': 'baidu',\n    'resolutions': function () {\n      var res = Math.pow(2, 18);\n      var resolutions = [];\n      for (var i = 0; i < MAX_ZOOM; i++) {\n        resolutions[i] = res;\n        res *= 0.5;\n      }\n      return resolutions;\n    }(),\n    'fullExtent': {\n      'top': 33554432,\n      'left': -33554432,\n      'bottom': -33554432,\n      'right': 33554432\n    }\n  },\n  'IDENTITY': {\n    'projection': 'identity',\n    'resolutions': function () {\n      var res = Math.pow(2, 8);\n      var resolutions = [];\n      for (var i = 0; i < MAX_ZOOM; i++) {\n        resolutions[i] = res;\n        res *= 0.5;\n      }\n      return resolutions;\n    }(),\n    'fullExtent': {\n      'top': 200000,\n      'left': -200000,\n      'bottom': -200000,\n      'right': 200000\n    }\n  },\n  'PRESET-VT-3857': {\n    'projection': 'EPSG:3857',\n    'resolutions': function () {\n      var resolutions = [];\n      var d = 6378137 * Math.PI;\n      for (var i = 0; i < MAX_ZOOM; i++) {\n        resolutions[i] = d / (256 * Math.pow(2, i));\n      }\n      return resolutions;\n    }(),\n    'fullExtent': {\n      'top': 6378137 * Math.PI,\n      'left': -6378137 * Math.PI,\n      'bottom': -6378137 * Math.PI,\n      'right': 6378137 * Math.PI\n    }\n  }\n};\nDefaultSpatialReference['EPSG:4490'] = DefaultSpatialReference['EPSG:4326'];\nvar SpatialReference = function () {\n  function SpatialReference(options) {\n    if (options === void 0) {\n      options = {};\n    }\n    this.options = options;\n    this._initSpatialRef();\n  }\n  SpatialReference.registerPreset = function registerPreset(name, value) {\n    name = name && name.toUpperCase();\n    if (DefaultSpatialReference[name]) {\n      throw new Error(\"Spatial reference \" + name + \" already existed.\");\n    }\n    DefaultSpatialReference[name] = value;\n  };\n  SpatialReference.getPreset = function getPreset(preset) {\n    return DefaultSpatialReference[preset.toUpperCase()];\n  };\n  SpatialReference.getAllPresets = function getAllPresets() {\n    return Object.keys(DefaultSpatialReference);\n  };\n  SpatialReference.getProjectionInstance = function getProjectionInstance(prjName) {\n    if (!prjName) {\n      return null;\n    }\n    if (isObject(prjName)) {\n      if (!prjName.locate) {\n        prjName = extend({}, prjName);\n        if (prjName.measure === 'identity') {\n          extend(prjName, Measurer.getInstance('IDENTITY'));\n        } else {\n          extend(prjName, Measurer.getInstance('EPSG:4326'));\n        }\n      }\n      return prjName;\n    }\n    prjName = (prjName + '').toLowerCase();\n    for (var p in projections) {\n      if (hasOwn(projections, p)) {\n        var code = projections[p]['code'];\n        if (code && code.toLowerCase() === prjName) {\n          return projections[p];\n        }\n      }\n    }\n    return null;\n  };\n  SpatialReference.equals = function equals(sp1, sp2) {\n    if (isString(sp1) || isString(sp2)) {\n      return sp1 === sp2;\n    }\n    if (!sp1 && !sp2) {\n      return true;\n    } else if (!sp1 || !sp2) {\n      return false;\n    }\n    if (sp1.projection !== sp2.projection) {\n      return false;\n    }\n    var f1 = sp1.fullExtent,\n      f2 = sp2.fullExtent;\n    if (f1 && !f2 || !f1 && f2) {\n      return false;\n    }\n    if (f1 && f2) {\n      if (f1.top !== f2.top || f1.bottom !== f2.bottom || f1.left !== f2.left || f1.right !== f2.right) {\n        return false;\n      }\n    }\n    var r1 = sp1.resolutions,\n      r2 = sp2.resolutions;\n    if (r1 && r2) {\n      if (r1.length !== r2.length) {\n        return false;\n      }\n      for (var i = 0; i < r1.length; i++) {\n        if (r1[i] !== r2[i]) {\n          return false;\n        }\n      }\n    } else if (r1 || r2) {\n      return false;\n    }\n    return true;\n  };\n  var _proto = SpatialReference.prototype;\n  _proto._initSpatialRef = function _initSpatialRef() {\n    var projection = this.options['projection'];\n    if (projection) {\n      projection = SpatialReference.getProjectionInstance(projection);\n    } else {\n      projection = DEFAULT$1;\n    }\n    if (!projection) {\n      throw new Error('must provide a valid projection in map\\'s spatial reference.');\n    }\n    projection = extend({}, Common, projection);\n    if (!projection.measureLength) {\n      extend(projection, Measurer.DEFAULT);\n    }\n    this._projection = projection;\n    var defaultSpatialRef,\n      resolutions = this.options['resolutions'];\n    if (!resolutions) {\n      if (projection['code']) {\n        defaultSpatialRef = DefaultSpatialReference[projection['code'].toUpperCase()];\n        if (defaultSpatialRef) {\n          resolutions = defaultSpatialRef['resolutions'];\n          this.isEPSG = projection['code'] !== 'IDENTITY';\n        }\n      }\n      if (!resolutions) {\n        throw new Error('must provide valid resolutions in map\\'s spatial reference.');\n      }\n    }\n    this._resolutions = resolutions;\n    this._pyramid = true;\n    if (this._pyramid) {\n      for (var i = 0; i < resolutions.length; i++) {\n        if (resolutions[i] && resolutions[i - 1]) {\n          if (resolutions[i - 1] / resolutions[i] !== 2) {\n            this._pyramid = false;\n            break;\n          }\n        }\n      }\n    }\n    var fullExtent = this.options['fullExtent'];\n    if (!fullExtent) {\n      if (projection['code']) {\n        defaultSpatialRef = DefaultSpatialReference[projection['code'].toUpperCase()];\n        if (defaultSpatialRef) {\n          fullExtent = defaultSpatialRef['fullExtent'];\n        }\n      }\n      if (!fullExtent) {\n        throw new Error('must provide a valid fullExtent in map\\'s spatial reference.');\n      }\n    }\n    if (!isNil(fullExtent['left'])) {\n      this._fullExtent = new Extent(new Coordinate(fullExtent['left'], fullExtent['top']), new Coordinate(fullExtent['right'], fullExtent['bottom']));\n    } else {\n      this._fullExtent = new Extent(fullExtent);\n      fullExtent['left'] = fullExtent['xmin'];\n      fullExtent['right'] = fullExtent['xmax'];\n      fullExtent['top'] = fullExtent['ymax'];\n      fullExtent['bottom'] = fullExtent['ymin'];\n    }\n    if (isNil(fullExtent['top']) || isNil(fullExtent['bottom']) || isNil(fullExtent['left']) || isNil(fullExtent['right'])) {\n      throw new Error('must provide valid top/bottom/left/right in fullExtent.');\n    }\n    extend(this._fullExtent, fullExtent);\n    this._projection.fullExtent = fullExtent;\n    var a = fullExtent['right'] >= fullExtent['left'] ? 1 : -1,\n      b = fullExtent['top'] >= fullExtent['bottom'] ? -1 : 1;\n    this._transformation = new Transformation([a, b, 0, 0]);\n  };\n  _proto.getResolutions = function getResolutions() {\n    return this._resolutions || [];\n  };\n  _proto.getResolution = function getResolution(zoom) {\n    var z = zoom | 0;\n    if (z < 0) {\n      z = 0;\n    } else if (z > this._resolutions.length - 1) {\n      z = this._resolutions.length - 1;\n    }\n    var res = this._resolutions[z];\n    if (z !== zoom && zoom > 0 && z < this._resolutions.length - 1) {\n      var next = this._resolutions[z + 1];\n      return res + (next - res) * (zoom - z);\n    }\n    return res;\n  };\n  _proto.getProjection = function getProjection() {\n    return this._projection;\n  };\n  _proto.getFullExtent = function getFullExtent() {\n    return this._fullExtent;\n  };\n  _proto.getTransformation = function getTransformation() {\n    return this._transformation;\n  };\n  _proto.getMinZoom = function getMinZoom() {\n    for (var i = 0; i < this._resolutions.length; i++) {\n      if (!isNil(this._resolutions[i])) {\n        return i;\n      }\n    }\n    return 0;\n  };\n  _proto.getMaxZoom = function getMaxZoom() {\n    for (var i = this._resolutions.length - 1; i >= 0; i--) {\n      if (!isNil(this._resolutions[i])) {\n        return i;\n      }\n    }\n    return this._resolutions.length - 1;\n  };\n  _proto.getZoomDirection = function getZoomDirection() {\n    return sign(this._resolutions[this.getMinZoom()] - this._resolutions[this.getMaxZoom()]);\n  };\n  _proto.toJSON = function toJSON() {\n    if (!this.json) {\n      this.json = {\n        'resolutions': this._resolutions,\n        'fullExtent': {\n          'top': this._fullExtent.top,\n          'left': this._fullExtent.left,\n          'bottom': this._fullExtent.bottom,\n          'right': this._fullExtent.right\n        },\n        'projection': this._projection.code\n      };\n    }\n    return this.json;\n  };\n  _proto.isPyramid = function isPyramid() {\n    return this._pyramid;\n  };\n  return SpatialReference;\n}();\n\nvar TEMP_POINT0$3 = new Point(0, 0);\nvar TEMP_EXTENT$4 = new PointExtent();\nvar TEMP_PROPERTIES = {};\nvar options = {\n  'id': null,\n  'visible': true,\n  'interactive': true,\n  'editable': true,\n  'cursor': null,\n  'antiMeridian': false,\n  'defaultProjection': 'EPSG:4326'\n};\nvar Geometry = function (_JSONAble) {\n  _inheritsLoose(Geometry, _JSONAble);\n  function Geometry(options) {\n    var _this;\n    var opts = extend({}, options);\n    var symbol = opts['symbol'];\n    var properties = opts['properties'];\n    var id = opts['id'];\n    delete opts['symbol'];\n    delete opts['id'];\n    delete opts['properties'];\n    _this = _JSONAble.call(this, opts) || this;\n    if (symbol) {\n      _this.setSymbol(symbol);\n    } else {\n      _this._genSizeSymbol();\n    }\n    if (properties) {\n      _this.setProperties(properties);\n    }\n    if (!isNil(id)) {\n      _this.setId(id);\n    }\n    return _this;\n  }\n  var _proto = Geometry.prototype;\n  _proto.getFirstCoordinate = function getFirstCoordinate() {\n    if (this.type === 'GeometryCollection') {\n      var geometries = this.getGeometries();\n      if (!geometries.length) {\n        return null;\n      }\n      return geometries[0].getFirstCoordinate();\n    }\n    var coordinates = this.getCoordinates();\n    if (!Array.isArray(coordinates)) {\n      return coordinates;\n    }\n    do {\n      coordinates = coordinates[0];\n    } while (Array.isArray(coordinates) && coordinates.length > 0);\n    return coordinates;\n  };\n  _proto.getLastCoordinate = function getLastCoordinate() {\n    if (this.type === 'GeometryCollection') {\n      var geometries = this.getGeometries();\n      if (!geometries.length) {\n        return null;\n      }\n      return geometries[geometries.length - 1].getLastCoordinate();\n    }\n    var coordinates = this.getCoordinates();\n    if (!Array.isArray(coordinates)) {\n      return coordinates;\n    }\n    do {\n      coordinates = coordinates[coordinates.length - 1];\n    } while (Array.isArray(coordinates) && coordinates.length > 0);\n    return coordinates;\n  };\n  _proto.addTo = function addTo(layer, fitview) {\n    layer.addGeometry(this, fitview);\n    return this;\n  };\n  _proto.getLayer = function getLayer() {\n    if (!this._layer) {\n      return null;\n    }\n    return this._layer;\n  };\n  _proto.getMap = function getMap() {\n    if (!this._layer) {\n      return null;\n    }\n    return this._layer.getMap();\n  };\n  _proto.getId = function getId() {\n    return this._id;\n  };\n  _proto.setId = function setId(id) {\n    var oldId = this.getId();\n    this._id = id;\n    this._fireEvent('idchange', {\n      'old': oldId,\n      'new': id\n    });\n    return this;\n  };\n  _proto.getProperties = function getProperties() {\n    if (!this.properties) {\n      if (this._getParent()) {\n        return this._getParent().getProperties();\n      }\n      return null;\n    }\n    return this.properties;\n  };\n  _proto.setProperties = function setProperties(properties) {\n    var old = this.properties;\n    this.properties = isObject(properties) ? extend({}, properties) : properties;\n    this._repaint();\n    this._fireEvent('propertieschange', {\n      'old': old,\n      'new': properties\n    });\n    return this;\n  };\n  _proto.getType = function getType() {\n    return this.type;\n  };\n  _proto.getSymbol = function getSymbol() {\n    var s = this._symbol;\n    if (s) {\n      if (!Array.isArray(s)) {\n        return extend({}, s);\n      } else {\n        return extendSymbol(s);\n      }\n    }\n    return null;\n  };\n  _proto.setSymbol = function setSymbol(symbol) {\n    this._symbolUpdated = symbol;\n    this._symbol = this._prepareSymbol(symbol);\n    this.onSymbolChanged();\n    delete this._compiledSymbol;\n    delete this._symbolHash;\n    return this;\n  };\n  _proto.getSymbolHash = function getSymbolHash$$1() {\n    if (!this._symbolHash) {\n      this._symbolHash = getSymbolHash(this._symbolUpdated);\n    }\n    return this._symbolHash;\n  };\n  _proto.updateSymbol = function updateSymbol(props) {\n    if (!props) {\n      return this;\n    }\n    var s = this._getSymbol();\n    if (Array.isArray(s)) {\n      if (!Array.isArray(props)) {\n        throw new Error('Parameter of updateSymbol is not an array.');\n      }\n      for (var i = 0; i < props.length; i++) {\n        if (isTextSymbol(props[i])) {\n          delete this._textDesc;\n        }\n        if (s[i] && props[i]) {\n          s[i] = extendSymbol(s[i], props[i]);\n        }\n      }\n    } else if (Array.isArray(props)) {\n      throw new Error('Geometry\\'s symbol is not an array to update.');\n    } else {\n      if (isTextSymbol(s)) {\n        delete this._textDesc;\n      }\n      if (s) {\n        s = extendSymbol(s, props);\n      } else {\n        s = extendSymbol(this._getInternalSymbol(), props);\n      }\n    }\n    this._eventSymbolProperties = props;\n    delete this._compiledSymbol;\n    return this.setSymbol(s);\n  };\n  _proto.getTextContent = function getTextContent() {\n    var symbol = this._getInternalSymbol();\n    if (Array.isArray(symbol)) {\n      var contents = [];\n      var has = false;\n      for (var i = 0; i < symbol.length; i++) {\n        contents[i] = replaceVariable(symbol[i] && symbol[i]['textName'], this.getProperties());\n        if (!isNil(contents[i])) {\n          has = true;\n        }\n      }\n      return has ? contents : null;\n    }\n    return replaceVariable(symbol && symbol['textName'], this.getProperties());\n  };\n  _proto.getTextDesc = function getTextDesc() {\n    if (!this._textDesc) {\n      var textContent = this.getTextContent();\n      var symbol = this._sizeSymbol;\n      var isArray = Array.isArray(textContent);\n      if (Array.isArray(symbol)) {\n        this._textDesc = symbol.map(function (s, i) {\n          return describeText(isArray ? textContent[i] : '', s);\n        });\n      } else {\n        this._textDesc = describeText(textContent, symbol);\n      }\n    }\n    return this._textDesc;\n  };\n  _proto.getCenter = function getCenter() {\n    return this._computeCenter(this._getMeasurer());\n  };\n  _proto.getExtent = function getExtent() {\n    var prjExt = this._getPrjExtent();\n    var projection = this._getProjection();\n    if (prjExt && projection) {\n      var min = projection.unproject(new Coordinate(prjExt['xmin'], prjExt['ymin'])),\n        max = projection.unproject(new Coordinate(prjExt['xmax'], prjExt['ymax']));\n      return new Extent(min, max, projection);\n    } else {\n      return this._computeExtent(this._getMeasurer());\n    }\n  };\n  _proto.getContainerExtent = function getContainerExtent(out) {\n    var extent2d = this.get2DExtent();\n    if (!extent2d || !extent2d.isValid()) {\n      return null;\n    }\n    var map = this.getMap();\n    var glRes = map.getGLRes();\n    var minAltitude = this.getMinAltitude();\n    var extent = extent2d.convertTo(function (c) {\n      return map._pointAtResToContainerPoint(c, glRes, minAltitude, TEMP_POINT0$3);\n    }, out);\n    var maxAltitude = this.getMaxAltitude();\n    if (maxAltitude !== minAltitude) {\n      var extent2 = extent2d.convertTo(function (c) {\n        return map._pointAtResToContainerPoint(c, glRes, maxAltitude, TEMP_POINT0$3);\n      }, TEMP_EXTENT$4);\n      extent._combine(extent2);\n    }\n    var layer = this.getLayer();\n    if (layer && this.type === 'LineString' && maxAltitude && layer.options['drawAltitude']) {\n      var groundExtent = extent2d.convertTo(function (c) {\n        return map._pointAtResToContainerPoint(c, glRes, 0, TEMP_POINT0$3);\n      }, TEMP_EXTENT$4);\n      extent._combine(groundExtent);\n    }\n    if (extent) {\n      extent._add(this._getFixedExtent());\n    }\n    var smoothness = this.options['smoothness'];\n    if (smoothness) {\n      extent._expand(extent.getWidth() * 0.15);\n    }\n    return extent;\n  };\n  _proto._getFixedExtent = function _getFixedExtent() {\n    if (!this._fixedExtent) {\n      this._fixedExtent = new PointExtent();\n    }\n    var symbol = this._sizeSymbol;\n    var t = (symbol && symbol['lineWidth'] || 1) / 2;\n    this._fixedExtent.set(-t, -t, t, t);\n    var dx = symbol && symbol['lineDx'] || 0;\n    this._fixedExtent._add([dx, 0]);\n    var dy = symbol && symbol['lineDy'] || 0;\n    this._fixedExtent._add([0, dy]);\n    return this._fixedExtent;\n  };\n  _proto.get2DExtent = function get2DExtent() {\n    var map = this.getMap();\n    if (!map) {\n      return null;\n    }\n    if (this._extent2d) {\n      return this._extent2d;\n    }\n    var extent = this._getPrjExtent();\n    if (!extent || !extent.isValid()) {\n      return null;\n    }\n    var min = extent.getMin();\n    var max = extent.getMax();\n    var glRes = map.getGLRes();\n    map._prjToPointAtRes(min, glRes, min);\n    map._prjToPointAtRes(max, glRes, max);\n    this._extent2d = new PointExtent(min, max);\n    this._extent2d.z = map.getZoom();\n    return this._extent2d;\n  };\n  _proto.getSize = function getSize() {\n    var extent = this.getContainerExtent();\n    return extent ? extent.getSize() : null;\n  };\n  _proto.containsPoint = function containsPoint(containerPoint, t) {\n    if (!this.getMap()) {\n      throw new Error('The geometry is required to be added on a map to perform \"containsPoint\".');\n    }\n    if (containerPoint instanceof Coordinate) {\n      containerPoint = this.getMap().coordToContainerPoint(containerPoint);\n    }\n    return this._containsPoint(containerPoint, t);\n  };\n  _proto._containsPoint = function _containsPoint(containerPoint, t) {\n    var painter = this._getPainter();\n    if (!painter) {\n      return false;\n    }\n    t = t || 0;\n    if (this._hitTestTolerance) {\n      t += this._hitTestTolerance();\n    }\n    return painter.hitTest(containerPoint, t);\n  };\n  _proto.show = function show() {\n    this.options['visible'] = true;\n    if (this.getMap()) {\n      var painter = this._getPainter();\n      if (painter) {\n        painter.show();\n      }\n      this._fireEvent('show');\n    }\n    return this;\n  };\n  _proto.hide = function hide() {\n    this.options['visible'] = false;\n    if (this.getMap()) {\n      this.onHide();\n      var painter = this._getPainter();\n      if (painter) {\n        painter.hide();\n      }\n      this._fireEvent('hide');\n    }\n    return this;\n  };\n  _proto.isVisible = function isVisible() {\n    if (!this.options['visible']) {\n      return false;\n    }\n    var symbol = this._getInternalSymbol();\n    if (!symbol) {\n      return true;\n    }\n    if (Array.isArray(symbol)) {\n      if (!symbol.length) {\n        return true;\n      }\n      for (var i = 0, l = symbol.length; i < l; i++) {\n        if (isNil(symbol[i]['opacity']) || symbol[i]['opacity'] > 0) {\n          return true;\n        }\n      }\n      return false;\n    } else {\n      return isNil(symbol['opacity']) || isObject(symbol['opacity']) || isNumber(symbol['opacity']) && symbol['opacity'] > 0;\n    }\n  };\n  _proto.getZIndex = function getZIndex() {\n    return this.options['zIndex'] || 0;\n  };\n  _proto.setZIndex = function setZIndex(zIndex) {\n    var old = this.options['zIndex'];\n    this.options['zIndex'] = zIndex;\n    this._fireEvent('zindexchange', {\n      'old': old,\n      'new': zIndex\n    });\n    return this;\n  };\n  _proto.setZIndexSilently = function setZIndexSilently(zIndex) {\n    this.options['zIndex'] = zIndex;\n    return this;\n  };\n  _proto.bringToFront = function bringToFront() {\n    var layer = this.getLayer();\n    if (!layer || !layer.getGeoMaxZIndex) {\n      return this;\n    }\n    var topZ = layer.getGeoMaxZIndex();\n    this.setZIndex(topZ + 1);\n    return this;\n  };\n  _proto.bringToBack = function bringToBack() {\n    var layer = this.getLayer();\n    if (!layer || !layer.getGeoMinZIndex) {\n      return this;\n    }\n    var bottomZ = layer.getGeoMinZIndex();\n    this.setZIndex(bottomZ - 1);\n    return this;\n  };\n  _proto.translate = function translate(x, y) {\n    if (isNil(x)) {\n      return this;\n    }\n    var offset = new Coordinate(x, y);\n    if (offset.x === 0 && offset.y === 0) {\n      return this;\n    }\n    var coordinates = this.getCoordinates();\n    this._silence = true;\n    if (coordinates) {\n      if (Array.isArray(coordinates)) {\n        var translated = forEachCoord(coordinates, function (coord) {\n          return coord.add(offset);\n        });\n        this.setCoordinates(translated);\n      } else {\n        this.setCoordinates(coordinates.add(offset));\n      }\n    }\n    this._silence = false;\n    this._fireEvent('positionchange');\n    return this;\n  };\n  _proto.flash = function flash$$1(interval, count, cb, context) {\n    return flash.call(this, interval, count, cb, context);\n  };\n  _proto.copy = function copy() {\n    var json = this.toJSON();\n    var ret = Geometry.fromJSON(json);\n    ret.options['visible'] = true;\n    return ret;\n  };\n  _proto.remove = function remove() {\n    var layer = this.getLayer();\n    if (!layer) {\n      return this;\n    }\n    this._fireEvent('removestart');\n    this._unbind();\n    this._fireEvent('removeend');\n    this._fireEvent('remove');\n    return this;\n  };\n  _proto.toGeoJSONGeometry = function toGeoJSONGeometry() {\n    var gJson = this._exportGeoJSONGeometry();\n    return gJson;\n  };\n  _proto.toGeoJSON = function toGeoJSON(opts) {\n    if (!opts) {\n      opts = {};\n    }\n    var feature = {\n      'type': 'Feature',\n      'geometry': null\n    };\n    if (isNil(opts['geometry']) || opts['geometry']) {\n      var geoJSON = this._exportGeoJSONGeometry();\n      feature['geometry'] = geoJSON;\n    }\n    var id = this.getId();\n    if (!isNil(id)) {\n      feature['id'] = id;\n    }\n    var properties;\n    if (isNil(opts['properties']) || opts['properties']) {\n      properties = this._exportProperties();\n    }\n    feature['properties'] = properties;\n    return feature;\n  };\n  _proto.toJSON = function toJSON(options) {\n    if (!options) {\n      options = {};\n    }\n    var json = this._toJSON(options);\n    var other = this._exportGraphicOptions(options);\n    extend(json, other);\n    return json;\n  };\n  _proto.getLength = function getLength() {\n    return this._computeGeodesicLength(this._getMeasurer());\n  };\n  _proto.getArea = function getArea() {\n    return this._computeGeodesicArea(this._getMeasurer());\n  };\n  _proto.rotate = function rotate(angle, pivot) {\n    if (this.type === 'GeometryCollection') {\n      var geometries = this.getGeometries();\n      geometries.forEach(function (g) {\n        return g.rotate(angle, pivot);\n      });\n      return this;\n    }\n    if (!pivot) {\n      pivot = this.getCenter();\n    } else {\n      pivot = new Coordinate(pivot);\n    }\n    var measurer = this._getMeasurer();\n    var coordinates = this.getCoordinates();\n    if (!Array.isArray(coordinates)) {\n      if (pivot.x !== coordinates.x || pivot.y !== coordinates.y) {\n        var c = measurer._rotate(coordinates, pivot, angle);\n        this.setCoordinates(c);\n      }\n      return this;\n    }\n    forEachCoord(coordinates, function (c) {\n      return measurer._rotate(c, pivot, angle);\n    });\n    this.setCoordinates(coordinates);\n    return this;\n  };\n  _proto._getConnectPoints = function _getConnectPoints() {\n    return [this.getCenter()];\n  };\n  _proto._initOptions = function _initOptions(options) {\n    var opts = extend({}, options);\n    var symbol = opts['symbol'];\n    var properties = opts['properties'];\n    var id = opts['id'];\n    delete opts['symbol'];\n    delete opts['id'];\n    delete opts['properties'];\n    this.setOptions(opts);\n    if (symbol) {\n      this.setSymbol(symbol);\n    }\n    if (properties) {\n      this.setProperties(properties);\n    }\n    if (!isNil(id)) {\n      this.setId(id);\n    }\n  };\n  _proto._bindLayer = function _bindLayer(layer) {\n    if (layer === this.getLayer()) {\n      return;\n    }\n    if (this.getLayer()) {\n      throw new Error('Geometry cannot be added to two or more layers at the same time.');\n    }\n    this._layer = layer;\n    this._clearCache();\n    this._bindInfoWindow();\n    this._bindMenu();\n  };\n  _proto._prepareSymbol = function _prepareSymbol(symbol) {\n    if (Array.isArray(symbol)) {\n      var cookedSymbols = [];\n      for (var i = 0; i < symbol.length; i++) {\n        cookedSymbols.push(convertResourceUrl(this._checkAndCopySymbol(symbol[i])));\n      }\n      return cookedSymbols;\n    } else if (symbol) {\n      symbol = this._checkAndCopySymbol(symbol);\n      return convertResourceUrl(symbol);\n    }\n    return null;\n  };\n  _proto._checkAndCopySymbol = function _checkAndCopySymbol(symbol) {\n    var s = {};\n    for (var i in symbol) {\n      if (NUMERICAL_PROPERTIES[i] && isString(symbol[i])) {\n        s[i] = +symbol[i];\n      } else {\n        s[i] = symbol[i];\n      }\n    }\n    return s;\n  };\n  _proto._getSymbol = function _getSymbol() {\n    return this._symbol;\n  };\n  _proto._setExternSymbol = function _setExternSymbol(symbol) {\n    this._eventSymbolProperties = symbol;\n    if (!this._symbol) {\n      delete this._textDesc;\n    }\n    this._externSymbol = this._prepareSymbol(symbol);\n    this.onSymbolChanged();\n    return this;\n  };\n  _proto._getInternalSymbol = function _getInternalSymbol() {\n    if (this._symbol) {\n      return this._symbol;\n    } else if (this._externSymbol) {\n      return this._externSymbol;\n    } else if (this.options['symbol']) {\n      return this.options['symbol'];\n    }\n    return null;\n  };\n  _proto._getPrjExtent = function _getPrjExtent() {\n    var p = this._getProjection();\n    this._verifyProjection();\n    if (!this._extent && p) {\n      this._extent = this._computePrjExtent(p);\n    }\n    return this._extent;\n  };\n  _proto._unbind = function _unbind() {\n    var layer = this.getLayer();\n    if (!layer) {\n      return;\n    }\n    if (this._animPlayer) {\n      this._animPlayer.finish();\n    }\n    this._unbindMenu();\n    this._unbindInfoWindow();\n    if (this.isEditing()) {\n      this.endEdit();\n    }\n    this._removePainter();\n    if (this.onRemove) {\n      this.onRemove();\n    }\n    if (layer.onRemoveGeometry) {\n      layer.onRemoveGeometry(this);\n    }\n    delete this._layer;\n    delete this._internalId;\n    delete this._extent;\n  };\n  _proto._getInternalId = function _getInternalId() {\n    return this._internalId;\n  };\n  _proto._setInternalId = function _setInternalId(id) {\n    this._internalId = id;\n  };\n  _proto._getMeasurer = function _getMeasurer() {\n    if (this._getProjection()) {\n      return this._getProjection();\n    }\n    return SpatialReference.getProjectionInstance(this.options['defaultProjection']);\n  };\n  _proto._getProjection = function _getProjection() {\n    var map = this.getMap();\n    if (map) {\n      return map.getProjection();\n    }\n    return null;\n  };\n  _proto._verifyProjection = function _verifyProjection() {\n    var projection = this._getProjection();\n    if (this._projCode && projection && this._projCode !== projection.code) {\n      this._clearProjection();\n    }\n    this._projCode = projection ? projection.code : this._projCode;\n  };\n  _proto._getExternalResources = function _getExternalResources() {\n    var symbol = this._getInternalSymbol();\n    return getExternalResources(symbol);\n  };\n  _proto._getPainter = function _getPainter() {\n    var layer = this.getLayer();\n    if (!this._painter && layer) {\n      if (GEOMETRY_COLLECTION_TYPES.indexOf(this.type) !== -1) {\n        if (layer.constructor.getCollectionPainterClass) {\n          var clazz = layer.constructor.getCollectionPainterClass();\n          if (clazz) {\n            this._painter = new clazz(this);\n          }\n        }\n      } else if (layer.constructor.getPainterClass) {\n        var _clazz = layer.constructor.getPainterClass();\n        if (_clazz) {\n          this._painter = new _clazz(this);\n        }\n      }\n    }\n    return this._painter;\n  };\n  _proto._getMaskPainter = function _getMaskPainter() {\n    if (this._maskPainter) {\n      return this._maskPainter;\n    }\n    this._maskPainter = this.getGeometries && this.getGeometries() ? new CollectionPainter(this, true) : new Painter(this);\n    return this._maskPainter;\n  };\n  _proto._removePainter = function _removePainter() {\n    if (this._painter) {\n      this._painter.remove();\n    }\n    delete this._painter;\n  };\n  _proto._paint = function _paint(extent) {\n    if (this._painter) {\n      if (this._dirtyCoords) {\n        delete this._dirtyCoords;\n        var projection = this._getProjection();\n        if (projection) {\n          this._pcenter = projection.project(this._coordinates);\n          this._clearCache();\n        }\n      }\n      this._painter.paint(extent);\n    }\n  };\n  _proto._clearCache = function _clearCache() {\n    delete this._extent;\n    delete this._extent2d;\n  };\n  _proto._clearProjection = function _clearProjection() {\n    delete this._extent;\n    delete this._extent2d;\n  };\n  _proto._repaint = function _repaint() {\n    if (this._painter) {\n      this._painter.repaint();\n    }\n  };\n  _proto.onHide = function onHide() {\n    this.closeMenu();\n    this.closeInfoWindow();\n  };\n  _proto.onShapeChanged = function onShapeChanged() {\n    this._clearCache();\n    this._repaint();\n    this._fireEvent('shapechange');\n  };\n  _proto.onPositionChanged = function onPositionChanged() {\n    this._clearCache();\n    this._repaint();\n    this._fireEvent('positionchange');\n  };\n  _proto.onSymbolChanged = function onSymbolChanged() {\n    if (this._painter) {\n      this._painter.refreshSymbol();\n    }\n    var e = {};\n    if (this._eventSymbolProperties) {\n      e.properties = JSON.parse(JSON.stringify(this._eventSymbolProperties));\n      delete this._eventSymbolProperties;\n    } else {\n      delete this._textDesc;\n    }\n    this._genSizeSymbol();\n    this._fireEvent('symbolchange', e);\n  };\n  _proto._genSizeSymbol = function _genSizeSymbol() {\n    var symbol = this._getInternalSymbol();\n    if (!symbol) {\n      delete this._sizeSymbol;\n      return;\n    }\n    if (Array.isArray(symbol)) {\n      this._sizeSymbol = [];\n      var dynamicSize = false;\n      for (var i = 0; i < symbol.length; i++) {\n        var s = this._sizeSymbol[i] = this._getSizeSymbol(symbol[i]);\n        if (!dynamicSize && s && s._dynamic) {\n          dynamicSize = true;\n        }\n      }\n      this._sizeSymbol._dynamic = dynamicSize;\n    } else {\n      this._sizeSymbol = this._getSizeSymbol(symbol);\n    }\n  };\n  _proto._getSizeSymbol = function _getSizeSymbol(symbol) {\n    var symbolSize = loadGeoSymbol({\n      lineWidth: symbol['lineWidth'],\n      lineDx: symbol['lineDx'],\n      lineDy: symbol['lineDy']\n    }, this);\n    if (isFunctionDefinition(symbol['lineWidth']) || isFunctionDefinition(symbol['lineDx']) || isFunctionDefinition(symbol['lineDy'])) {\n      symbolSize._dynamic = true;\n    }\n    return symbolSize;\n  };\n  _proto._getCompiledSymbol = function _getCompiledSymbol() {\n    if (this._compiledSymbol) {\n      return this._compiledSymbol;\n    }\n    this._compiledSymbol = loadGeoSymbol(this._getInternalSymbol(), this);\n    return this._compiledSymbol;\n  };\n  _proto.onConfig = function onConfig(conf) {\n    var properties;\n    if (conf['properties']) {\n      properties = conf['properties'];\n      delete conf['properties'];\n    }\n    var needRepaint = false;\n    for (var p in conf) {\n      if (conf.hasOwnProperty(p)) {\n        var prefix = p.slice(0, 5);\n        if (prefix === 'arrow' || prefix === 'smoot') {\n          needRepaint = true;\n          break;\n        }\n      }\n    }\n    if (properties) {\n      this.setProperties(properties);\n      this._repaint();\n    } else if (needRepaint) {\n      this._repaint();\n    }\n  };\n  _proto._setParent = function _setParent(geometry) {\n    if (geometry) {\n      this._parent = geometry;\n    }\n  };\n  _proto._getParent = function _getParent() {\n    return this._parent;\n  };\n  _proto._fireEvent = function _fireEvent(eventName, param) {\n    if (this._silence) {\n      return;\n    }\n    if (this.getLayer() && this.getLayer()._onGeometryEvent) {\n      if (!param) {\n        param = {};\n      }\n      param['type'] = eventName;\n      param['target'] = this;\n      this.getLayer()._onGeometryEvent(param);\n    }\n    this.fire(eventName, param);\n  };\n  _proto._toJSON = function _toJSON(options) {\n    return {\n      'feature': this.toGeoJSON(options)\n    };\n  };\n  _proto._exportGraphicOptions = function _exportGraphicOptions(options) {\n    var json = {};\n    if (isNil(options['options']) || options['options']) {\n      json['options'] = this.config();\n    }\n    if (isNil(options['symbol']) || options['symbol']) {\n      json['symbol'] = this.getSymbol();\n    }\n    if (isNil(options['infoWindow']) || options['infoWindow']) {\n      if (this._infoWinOptions) {\n        json['infoWindow'] = this._infoWinOptions;\n      }\n    }\n    return json;\n  };\n  _proto._exportGeoJSONGeometry = function _exportGeoJSONGeometry() {\n    var points = this.getCoordinates();\n    var coordinates = Coordinate.toNumberArrays(points);\n    return {\n      'type': this.getType(),\n      'coordinates': coordinates\n    };\n  };\n  _proto._exportProperties = function _exportProperties() {\n    var properties = null;\n    var geoProperties = this.getProperties();\n    if (!isNil(geoProperties)) {\n      if (isObject(geoProperties)) {\n        properties = extend({}, geoProperties);\n      } else {\n        properties = geoProperties;\n      }\n    }\n    return properties;\n  };\n  _proto._hitTestTolerance = function _hitTestTolerance() {\n    return 0;\n  };\n  _proto._getAltitude = function _getAltitude() {\n    var layer = this.getLayer();\n    if (!layer) {\n      return 0;\n    }\n    var layerOpts = layer.options;\n    var layerAltitude = layer.getAltitude ? layer.getAltitude() : 0;\n    var enableAltitude = layerOpts['enableAltitude'];\n    if (!enableAltitude) {\n      return layerAltitude;\n    }\n    var altitudeProperty = getAltitudeProperty(layer);\n    var properties = this.properties || TEMP_PROPERTIES;\n    var altitude = properties[altitudeProperty];\n    if (isNil(altitude)) {\n      var alts = getGeometryCoordinatesAlts(this, layerAltitude, enableAltitude);\n      if (!isNil(alts)) {\n        return alts;\n      }\n      return layerAltitude;\n    }\n    if (Array.isArray(altitude)) {\n      return altitude.map(function (alt) {\n        return alt + layerAltitude;\n      });\n    }\n    return altitude + layerAltitude;\n  };\n  _proto.getAltitude = function getAltitude() {\n    var layer = this.getLayer();\n    var altitudeProperty = getAltitudeProperty(layer);\n    var properties = this.properties || TEMP_PROPERTIES;\n    var altitude = properties[altitudeProperty];\n    if (!isNil(altitude)) {\n      return altitude;\n    }\n    var alts = getGeometryCoordinatesAlts(this, 0, false);\n    if (!isNil(alts)) {\n      return alts;\n    }\n    return 0;\n  };\n  _proto.setAltitude = function setAltitude(alt) {\n    if (!isNumber(alt)) {\n      return this;\n    }\n    var layer = this.getLayer();\n    var altitudeProperty = getAltitudeProperty(layer);\n    var properties = this.properties || TEMP_PROPERTIES;\n    var altitude = properties[altitudeProperty];\n    if (!isNil(altitude)) {\n      if (Array.isArray(altitude)) {\n        for (var i = 0, len = altitude.length; i < len; i++) {\n          altitude[i] = alt;\n        }\n      } else {\n        properties[altitudeProperty] = alt;\n      }\n    }\n    var coordinates = this.getCoordinates ? this.getCoordinates() : null;\n    if (!coordinates) {\n      return this;\n    }\n    setCoordinatesAlt(coordinates, alt);\n    if (layer) {\n      var render = layer.getRenderer();\n      if (render && render.gl) {\n        this.setCoordinates(coordinates);\n      } else if (render) {\n        this._repaint();\n      }\n    }\n    return this;\n  };\n  _proto._genMinMaxAlt = function _genMinMaxAlt() {\n    var _this2 = this;\n    var altitude = this._getAltitude();\n    if (Array.isArray(altitude)) {\n      this._minAlt = Number.MAX_VALUE;\n      this._maxAlt = Number.MIN_VALUE;\n      altitude.forEach(function (alt) {\n        var a = alt;\n        if (a < _this2._minAlt) {\n          _this2._minAlt = a;\n        }\n        if (a > _this2._maxAlt) {\n          _this2._maxAlt = a;\n        }\n      });\n    } else {\n      this._minAlt = this._maxAlt = altitude;\n    }\n  };\n  _proto.getMinAltitude = function getMinAltitude() {\n    if (this._minAlt === undefined) {\n      this._genMinMaxAlt();\n    }\n    if (!this._minAlt) {\n      return 0;\n    }\n    return this._minAlt;\n  };\n  _proto.getMaxAltitude = function getMaxAltitude() {\n    if (this._maxAlt === undefined) {\n      this._genMinMaxAlt();\n    }\n    if (!this._maxAlt) {\n      return 0;\n    }\n    return this._maxAlt;\n  };\n  return Geometry;\n}(JSONAble(Eventable(Handlerable(Class))));\nGeometry.mergeOptions(options);\nfunction getAltitudeProperty(layer) {\n  var altitudeProperty = 'altitude';\n  if (layer) {\n    var layerOpts = layer.options;\n    altitudeProperty = layerOpts['altitudeProperty'];\n  }\n  return altitudeProperty;\n}\nfunction getGeometryCoordinatesAlts(geometry, layerAlt, enableAltitude) {\n  var coordinates = geometry.getCoordinates ? geometry.getCoordinates() : null;\n  if (coordinates) {\n    var tempAlts = [];\n    coordinatesHasAlt(coordinates, tempAlts);\n    if (tempAlts.length) {\n      var alts = getCoordinatesAlts(coordinates, layerAlt, enableAltitude);\n      if (geometry.getShell) {\n        return alts[0][0];\n      }\n      return alts;\n    }\n  }\n  return null;\n}\nfunction setCoordinatesAlt(coordinates, alt) {\n  if (Array.isArray(coordinates)) {\n    for (var i = 0, len = coordinates.length; i < len; i++) {\n      setCoordinatesAlt(coordinates[i], alt);\n    }\n  } else {\n    coordinates.z = alt;\n  }\n}\nfunction coordinatesHasAlt(coordinates, tempAlts) {\n  if (tempAlts.length) {\n    return;\n  }\n  if (Array.isArray(coordinates)) {\n    for (var i = 0, len = coordinates.length; i < len; i++) {\n      coordinatesHasAlt(coordinates[i], tempAlts);\n    }\n  } else if (isNumber(coordinates.z)) {\n    tempAlts.push(coordinates.z);\n  }\n}\nfunction getCoordinatesAlts(coordinates, layerAlt, enableAltitude) {\n  if (Array.isArray(coordinates)) {\n    var alts = [];\n    for (var i = 0, len = coordinates.length; i < len; i++) {\n      alts.push(getCoordinatesAlts(coordinates[i], layerAlt, enableAltitude));\n    }\n    return alts;\n  }\n  if (isNumber(coordinates.z)) {\n    return enableAltitude ? layerAlt + coordinates.z : coordinates.z;\n  } else if (enableAltitude) {\n    return layerAlt;\n  } else {\n    return 0;\n  }\n}\n\nvar options$1 = {\n  'attribution': null,\n  'minZoom': null,\n  'maxZoom': null,\n  'visible': true,\n  'opacity': 1,\n  'globalCompositeOperation': null,\n  'renderer': 'canvas',\n  'debugOutline': '#0f0',\n  'cssFilter': null,\n  'forceRenderOnMoving': false,\n  'forceRenderOnZooming': false,\n  'forceRenderOnRotating': false,\n  'collision': false,\n  'collisionScope': 'layer',\n  'hitDetect': function () {\n    return !Browser$1.mobile;\n  }()\n};\nvar Layer = function (_JSONAble) {\n  _inheritsLoose(Layer, _JSONAble);\n  function Layer(id, options) {\n    var _this;\n    var canvas;\n    if (options) {\n      canvas = options.canvas;\n      delete options.canvas;\n    }\n    _this = _JSONAble.call(this, options) || this;\n    _this._canvas = canvas;\n    _this.setId(id);\n    if (options) {\n      _this.setZIndex(options.zIndex);\n      if (options.mask) {\n        _this.setMask(Geometry.fromJSON(options.mask));\n      }\n    }\n    _this.proxyOptions();\n    return _this;\n  }\n  var _proto = Layer.prototype;\n  _proto.load = function load() {\n    if (!this.getMap()) {\n      return this;\n    }\n    if (this.onLoad()) {\n      this._initRenderer();\n      var zIndex = this.getZIndex();\n      if (!isNil(zIndex)) {\n        this._renderer.setZIndex(zIndex);\n        if (!this.isCanvasRender()) {\n          this._renderer.render();\n        }\n      }\n      this.onLoadEnd();\n    }\n    return this;\n  };\n  _proto.getId = function getId() {\n    return this._id;\n  };\n  _proto.setId = function setId(id) {\n    var old = this._id;\n    if (!isNil(id)) {\n      id = id + '';\n    }\n    this._id = id;\n    this.fire('idchange', {\n      'old': old,\n      'new': id\n    });\n    return this;\n  };\n  _proto.addTo = function addTo(map) {\n    map.addLayer(this);\n    return this;\n  };\n  _proto.setZIndex = function setZIndex(zIndex) {\n    this._zIndex = zIndex;\n    if (isNil(zIndex)) {\n      delete this.options['zIndex'];\n    } else {\n      this.options.zIndex = zIndex;\n    }\n    if (this.map) {\n      this.map._sortLayersByZIndex();\n    }\n    if (this._renderer) {\n      this._renderer.setZIndex(zIndex);\n    }\n    this.fire('setzindex', {\n      zIndex: zIndex\n    });\n    return this;\n  };\n  _proto.getZIndex = function getZIndex() {\n    return this._zIndex || 0;\n  };\n  _proto.getMinZoom = function getMinZoom() {\n    var map = this.getMap();\n    var minZoom = this.options['minZoom'];\n    return map ? Math.max(map.getMinZoom(), minZoom || 0) : minZoom;\n  };\n  _proto.getMaxZoom = function getMaxZoom() {\n    var map = this.getMap();\n    var maxZoom = this.options['maxZoom'];\n    return map ? Math.min(map.getMaxZoom(), isNil(maxZoom) ? Infinity : maxZoom) : maxZoom;\n  };\n  _proto.getOpacity = function getOpacity() {\n    return this.options['opacity'];\n  };\n  _proto.setOpacity = function setOpacity(op) {\n    this.config('opacity', op);\n    this.fire('setopacity', {\n      opacity: op\n    });\n    return this;\n  };\n  _proto.isCanvasRender = function isCanvasRender() {\n    var renderer = this._getRenderer();\n    return renderer && renderer instanceof CanvasRenderer;\n  };\n  _proto.getMap = function getMap() {\n    if (this.map) {\n      return this.map;\n    }\n    return null;\n  };\n  _proto.getProjection = function getProjection() {\n    var map = this.getMap();\n    return map ? map.getProjection() : null;\n  };\n  _proto.bringToFront = function bringToFront() {\n    var layers = this._getLayerList();\n    if (!layers.length) {\n      return this;\n    }\n    var topLayer = layers[layers.length - 1];\n    if (layers.length === 1 || topLayer === this) {\n      return this;\n    }\n    var max = topLayer.getZIndex();\n    this.setZIndex(max + 1);\n    return this;\n  };\n  _proto.bringToBack = function bringToBack() {\n    var layers = this._getLayerList();\n    if (!layers.length) {\n      return this;\n    }\n    var bottomLayer = layers[0];\n    if (layers.length === 1 || bottomLayer === this) {\n      return this;\n    }\n    var min = bottomLayer.getZIndex();\n    this.setZIndex(min - 1);\n    return this;\n  };\n  _proto.show = function show() {\n    var _this2 = this;\n    if (!this.options['visible']) {\n      this.options['visible'] = true;\n      var renderer = this.getRenderer();\n      if (renderer) {\n        renderer.show();\n      }\n      var map = this.getMap();\n      if (renderer && map) {\n        map.once('renderend', function () {\n          _this2.fire('show');\n        });\n      } else {\n        this.fire('show');\n      }\n    }\n    return this;\n  };\n  _proto.hide = function hide() {\n    var _this3 = this;\n    if (this.options['visible']) {\n      this.options['visible'] = false;\n      var renderer = this.getRenderer();\n      if (renderer) {\n        renderer.hide();\n      }\n      var map = this.getMap();\n      if (renderer && map) {\n        map.once('renderend', function () {\n          _this3.fire('hide');\n        });\n      } else {\n        this.fire('hide');\n      }\n    }\n    return this;\n  };\n  _proto.isVisible = function isVisible() {\n    if (isNumber(this.options['opacity']) && this.options['opacity'] <= 0) {\n      return false;\n    }\n    var map = this.getMap();\n    if (map) {\n      var zoom = map.getZoom();\n      if (!isNil(this.options['maxZoom']) && this.options['maxZoom'] < zoom || !isNil(this.options['minZoom']) && this.options['minZoom'] > zoom) {\n        return false;\n      }\n    }\n    if (isNil(this.options['visible'])) {\n      this.options['visible'] = true;\n    }\n    return this.options['visible'];\n  };\n  _proto.remove = function remove() {\n    if (this.map) {\n      this.map.removeLayer(this);\n    }\n    return this;\n  };\n  _proto.getMask = function getMask() {\n    return this._mask;\n  };\n  _proto.setMask = function setMask(mask) {\n    if (!(mask.type === 'Point' && mask._isVectorMarker() || mask.type === 'Polygon' || mask.type === 'MultiPolygon')) {\n      throw new Error('Mask for a layer must be a marker with vector marker symbol or a Polygon(MultiPolygon).');\n    }\n    mask._bindLayer(this);\n    if (mask.type === 'Point') {\n      mask.updateSymbol({\n        'markerLineColor': 'rgba(0, 0, 0, 0)',\n        'markerFillOpacity': 0\n      });\n    } else {\n      mask.setSymbol({\n        'lineColor': 'rgba(0, 0, 0, 0)',\n        'polygonOpacity': 0\n      });\n    }\n    this._mask = mask;\n    this.options.mask = mask.toJSON();\n    if (!this.getMap() || this.getMap().isZooming()) {\n      return this;\n    }\n    var renderer = this._getRenderer();\n    if (renderer && renderer.setToRedraw) {\n      this._getRenderer().setToRedraw();\n    }\n    return this;\n  };\n  _proto.removeMask = function removeMask() {\n    delete this._mask;\n    delete this.options.mask;\n    if (!this.getMap() || this.getMap().isZooming()) {\n      return this;\n    }\n    var renderer = this._getRenderer();\n    if (renderer && renderer.setToRedraw) {\n      this._getRenderer().setToRedraw();\n    }\n    return this;\n  };\n  _proto.onLoad = function onLoad() {\n    return true;\n  };\n  _proto.onLoadEnd = function onLoadEnd() {};\n  _proto.isLoaded = function isLoaded() {\n    return !!this._loaded;\n  };\n  _proto.getCollisionIndex = function getCollisionIndex() {\n    if (this.options['collisionScope'] === 'layer') {\n      if (!this._collisionIndex) {\n        this._collisionIndex = new CollisionIndex();\n      }\n      return this._collisionIndex;\n    }\n    var map = this.getMap();\n    if (!map) {\n      return null;\n    }\n    return map.getCollisionIndex();\n  };\n  _proto.clearCollisionIndex = function clearCollisionIndex() {\n    if (this.options['collisionScope'] === 'layer' && this._collisionIndex) {\n      this._collisionIndex.clear();\n    }\n    return this;\n  };\n  _proto.getRenderer = function getRenderer() {\n    return this._getRenderer();\n  };\n  _proto.onConfig = function onConfig(conf) {\n    var needUpdate = conf && Object.keys && Object.keys(conf).length > 0;\n    if (needUpdate && isNil(conf['animation'])) {\n      if (this._optionsHook && isFunction(this._optionsHook)) {\n        this._optionsHook(conf);\n      }\n      if (this._silentConfig) {\n        return;\n      }\n      var renderer = this.getRenderer();\n      if (renderer && renderer.setToRedraw) {\n        renderer.setToRedraw();\n      }\n    }\n  };\n  _proto.onAdd = function onAdd() {};\n  _proto.onRendererCreate = function onRendererCreate() {};\n  _proto.onCanvasCreate = function onCanvasCreate() {};\n  _proto.onRemove = function onRemove() {};\n  _proto._bindMap = function _bindMap(map, zIndex) {\n    if (!map) {\n      return;\n    }\n    this.map = map;\n    if (!isNil(zIndex)) {\n      this.setZIndex(zIndex);\n    }\n    this._switchEvents('on', this);\n    this.onAdd();\n    this.fire('add');\n  };\n  _proto._initRenderer = function _initRenderer() {\n    var renderer = this.options['renderer'];\n    if (!this.constructor.getRendererClass) {\n      return;\n    }\n    var clazz = this.constructor.getRendererClass(renderer);\n    if (!clazz) {\n      throw new Error('Invalid renderer for Layer(' + this.getId() + '):' + renderer);\n    }\n    this._renderer = new clazz(this);\n    this._renderer.layer = this;\n    this._renderer.setZIndex(this.getZIndex());\n    this._switchEvents('on', this._renderer);\n    if (this._renderer.onAdd) {\n      this._renderer.onAdd();\n    }\n    this.onRendererCreate();\n    this.fire('renderercreate', {\n      'renderer': this._renderer\n    });\n  };\n  _proto._doRemove = function _doRemove() {\n    this._loaded = false;\n    this._switchEvents('off', this);\n    this.onRemove();\n    if (this._renderer) {\n      this._switchEvents('off', this._renderer);\n      this._renderer.remove();\n      delete this._renderer;\n    }\n    delete this.map;\n    delete this._collisionIndex;\n  };\n  _proto._switchEvents = function _switchEvents(to, emitter) {\n    if (emitter && emitter.getEvents && this.getMap()) {\n      this.getMap()[to](emitter.getEvents(), emitter);\n    }\n  };\n  _proto._getRenderer = function _getRenderer() {\n    return this._renderer;\n  };\n  _proto._getLayerList = function _getLayerList() {\n    if (!this.map) {\n      return [];\n    }\n    return this.map._layers;\n  };\n  _proto._getMask2DExtent = function _getMask2DExtent() {\n    if (!this._mask || !this.getMap()) {\n      return null;\n    }\n    var painter = this._mask._getMaskPainter();\n    if (!painter) {\n      return null;\n    }\n    return painter.get2DExtent();\n  };\n  return Layer;\n}(JSONAble(Eventable(Renderable(Class))));\nLayer.mergeOptions(options$1);\nvar fire = Layer.prototype.fire;\nLayer.prototype.fire = function (eventType, param) {\n  if (eventType === 'layerload') {\n    this._loaded = true;\n  }\n  if (this.map) {\n    if (!param) {\n      param = {};\n    }\n    param['type'] = eventType;\n    param['target'] = this;\n    this.map._onLayerEvent(param);\n  }\n  fire.apply(this, arguments);\n  if (['show', 'hide'].indexOf(eventType) > -1) {\n    this.fire('visiblechange', Object.assign({}, param, {\n      visible: this.options.visible\n    }));\n  }\n  return this;\n};\n\nvar TEMP_COORD = new Coordinate(0, 0);\nvar TEMP_POINT = new Point(0, 0);\nvar REDRAW_OPTIONS_PROPERTIES = ['centerCross', 'fog', 'fogColor', 'debugSky'];\nvar options$2 = {\n  'maxVisualPitch': 70,\n  'maxPitch': 80,\n  'centerCross': false,\n  'zoomInCenter': false,\n  'zoomOrigin': null,\n  'zoomAnimation': function () {\n    return !IS_NODE;\n  }(),\n  'zoomAnimationDuration': 330,\n  'panAnimation': function () {\n    return !IS_NODE;\n  }(),\n  'panAnimationDuration': 600,\n  'rotateAnimation': function () {\n    return !IS_NODE;\n  }(),\n  'zoomable': true,\n  'enableInfoWindow': true,\n  'hitDetect': function () {\n    return !Browser$1.mobile;\n  }(),\n  'hitDetectLimit': 5,\n  'fpsOnInteracting': 25,\n  'layerCanvasLimitOnInteracting': -1,\n  'maxZoom': null,\n  'minZoom': null,\n  'maxExtent': null,\n  'fixCenterOnResize': true,\n  'checkSize': true,\n  'checkSizeInterval': 1000,\n  'renderer': 'canvas',\n  'cascadePitches': [10, 60],\n  'renderable': true,\n  'clickTimeThreshold': 280,\n  'stopRenderOnOffscreen': true,\n  'preventWheelScroll': true,\n  'preventTouch': true,\n  'supportPluginEvent': true,\n  'switchDragButton': false\n};\nvar Map$1 = function (_Handlerable) {\n  _inheritsLoose(Map, _Handlerable);\n  function Map(container, options) {\n    var _this;\n    if (!options) {\n      throw new Error('Invalid options when creating map.');\n    }\n    if (!options['center']) {\n      throw new Error('Invalid center when creating map.');\n    }\n    var opts = extend({}, options);\n    var zoom = opts['zoom'];\n    delete opts['zoom'];\n    var center = new Coordinate(opts['center']);\n    delete opts['center'];\n    var baseLayer = opts['baseLayer'];\n    delete opts['baseLayer'];\n    var layers = opts['layers'];\n    delete opts['layers'];\n    _this = _Handlerable.call(this, opts) || this;\n    _this.VERSION = Map.VERSION;\n    Object.defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), 'id', {\n      value: UID(),\n      writable: false\n    });\n    _this._loaded = false;\n    _this._initContainer(container);\n    _this._panels = {};\n    _this._baseLayer = null;\n    _this._layers = [];\n    _this._zoomLevel = zoom;\n    _this._center = center;\n    _this.setSpatialReference(opts['spatialReference'] || opts['view']);\n    _this._mapViewPoint = new Point(0, 0);\n    _this._initRenderer();\n    _this._updateMapSize(_this._getContainerDomSize());\n    if (baseLayer) {\n      _this.setBaseLayer(baseLayer);\n    }\n    if (layers) {\n      _this.addLayer(layers);\n    }\n    _this.setMaxExtent(opts['maxExtent']);\n    _this._Load();\n    _this.proxyOptions();\n    return _this;\n  }\n  Map.addOnLoadHook = function addOnLoadHook(fn) {\n    var args = Array.prototype.slice.call(arguments, 1);\n    var onload = typeof fn === 'function' ? fn : function () {\n      this[fn].apply(this, args);\n    };\n    this.prototype._onLoadHooks = this.prototype._onLoadHooks || [];\n    this.prototype._onLoadHooks.push(onload);\n    return this;\n  };\n  var _proto = Map.prototype;\n  _proto.isLoaded = function isLoaded() {\n    return !!this._loaded;\n  };\n  _proto.getContainer = function getContainer() {\n    return this._containerDOM;\n  };\n  _proto.getSpatialReference = function getSpatialReference() {\n    return this._spatialReference;\n  };\n  _proto.setSpatialReference = function setSpatialReference(ref) {\n    var oldRef = this.options['spatialReference'];\n    if (this._loaded && SpatialReference.equals(oldRef, ref)) {\n      return this;\n    }\n    this._updateSpatialReference(ref, oldRef);\n    return this;\n  };\n  _proto._updateSpatialReference = function _updateSpatialReference(ref, oldRef) {\n    if (isString(ref)) {\n      ref = SpatialReference.getPreset(ref);\n    }\n    ref = extend({}, ref);\n    this._center = this.getCenter();\n    this.options['spatialReference'] = ref;\n    this._spatialReference = new SpatialReference(ref);\n    if (this.options['spatialReference'] && isFunction(this.options['spatialReference']['projection'])) {\n      var projection = this._spatialReference.getProjection();\n      this.options['spatialReference']['projection'] = projection['code'];\n    }\n    this._resetMapStatus();\n    this._fireEvent('spatialreferencechange', {\n      'old': oldRef,\n      'new': extend({}, this.options['spatialReference'])\n    });\n    return this;\n  };\n  _proto.onConfig = function onConfig(conf) {\n    var ref = conf['spatialReference'] || conf['view'];\n    if (!isNil(ref)) {\n      this._updateSpatialReference(ref, null);\n    }\n    var needUpdate = false;\n    for (var i = 0, len = REDRAW_OPTIONS_PROPERTIES.length; i < len; i++) {\n      var key = REDRAW_OPTIONS_PROPERTIES[i];\n      if (!isNil(conf[key])) {\n        needUpdate = true;\n        break;\n      }\n    }\n    if (!needUpdate) {\n      return this;\n    }\n    var renderer = this.getRenderer();\n    if (renderer) {\n      renderer.setToRedraw();\n    }\n    return this;\n  };\n  _proto.getProjection = function getProjection() {\n    if (!this._spatialReference) {\n      return null;\n    }\n    return this._spatialReference.getProjection();\n  };\n  _proto.getFullExtent = function getFullExtent() {\n    if (!this._spatialReference) {\n      return null;\n    }\n    return this._spatialReference.getFullExtent();\n  };\n  _proto.setCursor = function setCursor(cursor) {\n    delete this._cursor;\n    this._trySetCursor(cursor);\n    this._cursor = cursor;\n    return this;\n  };\n  _proto.resetCursor = function resetCursor() {\n    return this.setCursor(null);\n  };\n  _proto.getCenter = function getCenter() {\n    if (!this._loaded || !this._prjCenter) {\n      return this._center;\n    }\n    var projection = this.getProjection();\n    var center = projection.unproject(this._prjCenter);\n    center.x = Math.round(center.x * 1E8) / 1E8;\n    center.y = Math.round(center.y * 1E8) / 1E8;\n    if (this.centerAltitude) {\n      center.z = this.centerAltitude;\n    }\n    return center;\n  };\n  _proto.setCenter = function setCenter(center, padding) {\n    if (!center) {\n      return this;\n    }\n    center = new Coordinate(center);\n    if (padding) {\n      center = this._getCenterByPadding(center, this.getZoom(), padding);\n    }\n    var projection = this.getProjection();\n    var pcenter = projection.project(center);\n    if (!this._verifyExtent(pcenter)) {\n      return this;\n    }\n    if (!this._loaded) {\n      this._center = center;\n      return this;\n    }\n    this.onMoveStart();\n    this._setPrjCenter(pcenter);\n    this.onMoveEnd(this._parseEventFromCoord(this.getCenter()));\n    return this;\n  };\n  _proto.getSize = function getSize() {\n    if (isNil(this.width) || isNil(this.height)) {\n      return this._getContainerDomSize();\n    }\n    return new Size(this.width, this.height);\n  };\n  _proto.getContainerExtent = function getContainerExtent() {\n    var visualHeight = this.height;\n    var pitch = this.getPitch(),\n      maxVisualPitch = this.options['maxVisualPitch'];\n    if (maxVisualPitch && pitch > maxVisualPitch) {\n      visualHeight = this._getVisualHeight(maxVisualPitch);\n    }\n    return new PointExtent(0, this.height - visualHeight, this.width, this.height);\n  };\n  _proto._getVisualHeight = function _getVisualHeight(visualPitch) {\n    visualPitch = visualPitch || 1E-2;\n    var pitch = (90 - this.getPitch()) * Math.PI / 180;\n    var fov = this.getFov() * Math.PI / 180;\n    visualPitch *= Math.PI / 180;\n    var cameraToCenter = this.cameraCenterDistance / this.getGLScale();\n    var tanB = Math.tan(fov / 2);\n    var tanP = Math.tan(visualPitch);\n    var visualDistance = cameraToCenter * tanB / (1 / tanP - tanB) / Math.sin(visualPitch);\n    var x = cameraToCenter * (Math.sin(pitch) * visualDistance / (cameraToCenter + Math.cos(pitch) * visualDistance));\n    return this.height / 2 + x;\n  };\n  _proto.getExtent = function getExtent() {\n    return this._pointToExtent(this._get2DExtent());\n  };\n  _proto.getProjExtent = function getProjExtent() {\n    var extent2D = this._get2DExtent();\n    return new Extent(this._pointToPrj(extent2D.getMin()), this._pointToPrj(extent2D.getMax()));\n  };\n  _proto.getPrjExtent = function getPrjExtent() {\n    return this.getProjExtent();\n  };\n  _proto.getMaxExtent = function getMaxExtent() {\n    if (!this.options['maxExtent']) {\n      return null;\n    }\n    return new Extent(this.options['maxExtent'], this.getProjection());\n  };\n  _proto.setMaxExtent = function setMaxExtent(extent) {\n    if (extent) {\n      var maxExt = new Extent(extent, this.getProjection());\n      this.options['maxExtent'] = maxExt;\n      var projection = this.getProjection();\n      this._prjMaxExtent = maxExt.convertTo(function (c) {\n        return projection.project(c);\n      });\n      if (!this._verifyExtent(this._getPrjCenter())) {\n        if (this._loaded) {\n          this._panTo(this._prjMaxExtent.getCenter());\n        } else {\n          this._center = projection.unproject(this._prjMaxExtent.getCenter());\n        }\n      }\n    } else {\n      delete this.options['maxExtent'];\n      delete this._prjMaxExtent;\n    }\n    return this;\n  };\n  _proto.getZoom = function getZoom() {\n    return this._zoomLevel;\n  };\n  _proto.getZoomForScale = function getZoomForScale(scale, fromZoom, isFraction) {\n    var zoom = this.getZoom();\n    if (isNil(fromZoom)) {\n      fromZoom = zoom;\n    }\n    if (scale === 1 && fromZoom === zoom) {\n      return zoom;\n    }\n    var res = this._getResolution(fromZoom),\n      targetRes = res / scale;\n    var scaleZoom = this.getZoomFromRes(targetRes);\n    if (isFraction) {\n      return scaleZoom;\n    } else {\n      var delta = 1E-6;\n      return this.getSpatialReference().getZoomDirection() < 0 ? Math.ceil(scaleZoom - delta) : Math.floor(scaleZoom + delta);\n    }\n  };\n  _proto.getZoomFromRes = function getZoomFromRes(res) {\n    var resolutions = this._getResolutions(),\n      minRes = this._getResolution(this.getMinZoom()),\n      maxRes = this._getResolution(this.getMaxZoom());\n    if (minRes <= maxRes) {\n      if (res <= minRes) {\n        return this.getMinZoom();\n      } else if (res >= maxRes) {\n        return this.getMaxZoom();\n      }\n    } else if (res >= minRes) {\n      return this.getMinZoom();\n    } else if (res <= maxRes) {\n      return this.getMaxZoom();\n    }\n    var l = resolutions.length;\n    for (var i = 0; i < l - 1; i++) {\n      if (!resolutions[i]) {\n        continue;\n      }\n      var gap = resolutions[i + 1] - resolutions[i];\n      var test = res - resolutions[i];\n      if (sign(gap) === sign(test) && Math.abs(gap) >= Math.abs(test)) {\n        return i + test / gap;\n      }\n    }\n    return l - 1;\n  };\n  _proto.setZoom = function setZoom(zoom, options) {\n    if (options === void 0) {\n      options = {\n        'animation': true\n      };\n    }\n    if (isNaN(zoom) || isNil(zoom)) {\n      return this;\n    }\n    zoom = +zoom;\n    if (this._loaded && this.options['zoomAnimation'] && options['animation']) {\n      this._zoomAnimation(zoom);\n    } else {\n      this._zoom(zoom);\n    }\n    return this;\n  };\n  _proto.getMaxZoom = function getMaxZoom() {\n    if (!isNil(this.options['maxZoom'])) {\n      return this.options['maxZoom'];\n    }\n    return this.getMaxNativeZoom();\n  };\n  _proto.setMaxZoom = function setMaxZoom(maxZoom) {\n    var viewMaxZoom = this.getMaxNativeZoom();\n    if (maxZoom > viewMaxZoom) {\n      maxZoom = viewMaxZoom;\n    }\n    if (maxZoom !== null && maxZoom < this._zoomLevel) {\n      this.setZoom(maxZoom);\n      maxZoom = +maxZoom;\n    }\n    this.options['maxZoom'] = maxZoom;\n    return this;\n  };\n  _proto.getMinZoom = function getMinZoom() {\n    if (!isNil(this.options['minZoom'])) {\n      return this.options['minZoom'];\n    }\n    return this._spatialReference.getMinZoom();\n  };\n  _proto.setMinZoom = function setMinZoom(minZoom) {\n    if (minZoom !== null) {\n      minZoom = +minZoom;\n      var viewMinZoom = this._spatialReference.getMinZoom();\n      if (minZoom < viewMinZoom) {\n        minZoom = viewMinZoom;\n      }\n      if (minZoom > this._zoomLevel) {\n        this.setZoom(minZoom);\n      }\n    }\n    this.options['minZoom'] = minZoom;\n    return this;\n  };\n  _proto.getMaxNativeZoom = function getMaxNativeZoom() {\n    var ref = this.getSpatialReference();\n    if (!ref) {\n      return null;\n    }\n    return ref.getMaxZoom();\n  };\n  _proto.getGLRes = function getGLRes() {\n    if (this._glRes) {\n      return this._glRes;\n    }\n    var fullExtent = this.getSpatialReference().getFullExtent();\n    this._glRes = (fullExtent.right - fullExtent.left) / Math.pow(2, 19);\n    return this._glRes;\n  };\n  _proto.getGLScale = function getGLScale(zoom) {\n    if (isNil(zoom)) {\n      zoom = this.getZoom();\n    }\n    return this._getResolution(zoom) / this.getGLRes();\n  };\n  _proto.zoomIn = function zoomIn() {\n    return this.setZoom(this.getZoom() + 1);\n  };\n  _proto.zoomOut = function zoomOut() {\n    return this.setZoom(this.getZoom() - 1);\n  };\n  _proto.isZooming = function isZooming() {\n    return !!this._zooming;\n  };\n  _proto.isInteracting = function isInteracting() {\n    return this.isZooming() || this.isMoving() || this.isRotating();\n  };\n  _proto.setCenterAndZoom = function setCenterAndZoom(center, zoom) {\n    if (!isNil(zoom) && this._zoomLevel !== zoom) {\n      this.setCenter(center);\n      this.setZoom(zoom, {\n        animation: false\n      });\n    } else {\n      this.setCenter(center);\n    }\n    return this;\n  };\n  _proto._getPaddingSize = function _getPaddingSize(options) {\n    if (options === void 0) {\n      options = {};\n    }\n    if (options['paddingLeft'] || options['paddingTop'] || options['paddingRight'] || options['paddingBottom']) {\n      return {\n        width: (options['paddingLeft'] || 0) + (options['paddingRight'] || 0),\n        height: (options['paddingTop'] || 0) + (options['paddingBottom'] || 0)\n      };\n    }\n    return null;\n  };\n  _proto.getFitZoom = function getFitZoom(extent, isFraction, padding) {\n    var _this2 = this;\n    if (!extent || !(extent instanceof Extent)) {\n      return this._zoomLevel;\n    }\n    if (extent['xmin'] === extent['xmax'] && extent['ymin'] === extent['ymax']) {\n      return this.getMaxZoom();\n    }\n    var size = this.getSize();\n    var paddingSize = this._getPaddingSize(padding);\n    if (paddingSize) {\n      size = {\n        width: size.width - (paddingSize.width || 0),\n        height: size.height - (paddingSize.height || 0)\n      };\n    }\n    var containerExtent = extent.convertTo(function (p) {\n      return _this2.coordToPoint(p);\n    });\n    var w = containerExtent.getWidth(),\n      h = containerExtent.getHeight();\n    var scaleX = size['width'] / w,\n      scaleY = size['height'] / h;\n    var scale = this.getSpatialReference().getZoomDirection() < 0 ? Math.max(scaleX, scaleY) : Math.min(scaleX, scaleY);\n    var zoom = this.getZoomForScale(scale, null, isFraction);\n    return zoom;\n  };\n  _proto.getView = function getView() {\n    return {\n      'center': this.getCenter().toArray(),\n      'zoom': this.getZoom(),\n      'pitch': this.getPitch(),\n      'bearing': this.getBearing()\n    };\n  };\n  _proto.setView = function setView(view) {\n    if (!view) {\n      return this;\n    }\n    if (view['center']) {\n      this.setCenter(view['center']);\n    }\n    if (view['zoom'] !== null && !isNaN(+view['zoom'])) {\n      this.setZoom(+view['zoom'], {\n        'animation': false\n      });\n    }\n    if (view['pitch'] !== null && !isNaN(+view['pitch'])) {\n      this.setPitch(+view['pitch']);\n    }\n    if (view['pitch'] !== null && !isNaN(+view['bearing'])) {\n      this.setBearing(+view['bearing']);\n    }\n    return this;\n  };\n  _proto.getResolution = function getResolution(zoom) {\n    return this._getResolution(zoom);\n  };\n  _proto.getScale = function getScale(zoom) {\n    var z = isNil(zoom) ? this.getZoom() : zoom;\n    var max = this._getResolution(this.getMaxNativeZoom()),\n      res = this._getResolution(z);\n    return res / max;\n  };\n  _proto._getCenterByPadding = function _getCenterByPadding(center, zoom, padding) {\n    if (padding === void 0) {\n      padding = {};\n    }\n    var point = this.coordinateToPoint(center, zoom);\n    var _padding = padding,\n      _padding$paddingLeft = _padding.paddingLeft,\n      paddingLeft = _padding$paddingLeft === void 0 ? 0 : _padding$paddingLeft,\n      _padding$paddingRight = _padding.paddingRight,\n      paddingRight = _padding$paddingRight === void 0 ? 0 : _padding$paddingRight,\n      _padding$paddingTop = _padding.paddingTop,\n      paddingTop = _padding$paddingTop === void 0 ? 0 : _padding$paddingTop,\n      _padding$paddingBotto = _padding.paddingBottom,\n      paddingBottom = _padding$paddingBotto === void 0 ? 0 : _padding$paddingBotto;\n    var pX = 0;\n    var pY = 0;\n    if (paddingLeft || paddingRight) {\n      pX = (paddingRight - paddingLeft) / 2;\n    }\n    if (paddingTop || paddingBottom) {\n      pY = (paddingTop - paddingBottom) / 2;\n    }\n    var newPoint = new Point({\n      x: point.x + pX,\n      y: point.y + pY\n    });\n    return this.pointToCoordinate(newPoint, zoom);\n  };\n  _proto.fitExtent = function fitExtent(extent, zoomOffset, options, step) {\n    if (options === void 0) {\n      options = {};\n    }\n    if (!extent) {\n      return this;\n    }\n    extent = new Extent(extent, this.getProjection());\n    var zoom = this.getFitZoom(extent, options.isFraction || false, options) + (zoomOffset || 0);\n    var center = extent.getCenter();\n    if (this._getPaddingSize(options)) {\n      center = this._getCenterByPadding(center, zoom, options);\n    }\n    if (typeof options['animation'] === 'undefined' || options['animation']) return this._animateTo({\n      center: center,\n      zoom: zoom\n    }, {\n      'duration': options['duration'] || this.options['zoomAnimationDuration'],\n      'easing': options['easing'] || 'out'\n    }, step);else return this.setCenterAndZoom(center, zoom);\n  };\n  _proto.getBaseLayer = function getBaseLayer() {\n    return this._baseLayer;\n  };\n  _proto.setBaseLayer = function setBaseLayer(baseLayer) {\n    var isChange = false;\n    if (this._baseLayer) {\n      isChange = true;\n      this._fireEvent('baselayerchangestart');\n      this._baseLayer.remove();\n    }\n    if (!baseLayer) {\n      delete this._baseLayer;\n      this._fireEvent('baselayerchangeend');\n      this._fireEvent('setbaselayer');\n      return this;\n    }\n    this._baseLayer = baseLayer;\n    baseLayer._bindMap(this, -1);\n    function onbaseLayerload() {\n      this._fireEvent('baselayerload');\n      if (isChange) {\n        isChange = false;\n        this._fireEvent('baselayerchangeend');\n      }\n    }\n    this._baseLayer.on('layerload', onbaseLayerload, this);\n    if (this._loaded) {\n      this._baseLayer.load();\n    }\n    this._fireEvent('setbaselayer');\n    return this;\n  };\n  _proto.removeBaseLayer = function removeBaseLayer() {\n    if (this._baseLayer) {\n      this._baseLayer.remove();\n      delete this._baseLayer;\n      this._fireEvent('baselayerremove');\n    }\n    return this;\n  };\n  _proto.getLayers = function getLayers(filter) {\n    return this._getLayers(function (layer) {\n      if (layer === this._baseLayer || layer.getId().indexOf(INTERNAL_LAYER_PREFIX) >= 0) {\n        return false;\n      }\n      if (filter) {\n        return filter(layer);\n      }\n      return true;\n    });\n  };\n  _proto.getLayer = function getLayer(id) {\n    if (!id) {\n      return null;\n    }\n    var layer = this._layerCache ? this._layerCache[id] : null;\n    if (layer) {\n      return layer;\n    }\n    var baseLayer = this.getBaseLayer();\n    if (baseLayer && baseLayer.getId() === id) {\n      return baseLayer;\n    }\n    return null;\n  };\n  _proto.addLayer = function addLayer(layers) {\n    if (!layers) {\n      return this;\n    }\n    if (!Array.isArray(layers)) {\n      layers = Array.prototype.slice.call(arguments, 0);\n      return this.addLayer(layers);\n    }\n    if (!this._layerCache) {\n      this._layerCache = {};\n    }\n    var mapLayers = this._layers;\n    for (var i = 0, len = layers.length; i < len; i++) {\n      var layer = layers[i];\n      var id = layer.getId();\n      if (isNil(id)) {\n        throw new Error('Invalid id for the layer: ' + id);\n      }\n      if (layer.getMap() === this) {\n        continue;\n      }\n      if (this._layerCache[id]) {\n        throw new Error('Duplicate layer id in the map: ' + id);\n      }\n      this._layerCache[id] = layer;\n      layer._bindMap(this);\n      mapLayers.push(layer);\n      if (this._loaded) {\n        layer.load();\n      }\n    }\n    this._sortLayersByZIndex();\n    this._fireEvent('addlayer', {\n      'layers': layers\n    });\n    return this;\n  };\n  _proto.removeLayer = function removeLayer(layers) {\n    if (!layers) {\n      return this;\n    }\n    if (!Array.isArray(layers)) {\n      return this.removeLayer([layers]);\n    }\n    var removed = [];\n    for (var i = 0, len = layers.length; i < len; i++) {\n      var layer = layers[i];\n      if (!(layer instanceof Layer)) {\n        layer = this.getLayer(layer);\n      }\n      if (!layer) {\n        continue;\n      }\n      var map = layer.getMap();\n      if (!map || map !== this) {\n        continue;\n      }\n      removed.push(layer);\n      this._removeLayer(layer, this._layers);\n      if (this._loaded) {\n        layer._doRemove();\n      }\n      var id = layer.getId();\n      if (this._layerCache) {\n        delete this._layerCache[id];\n      }\n    }\n    if (removed.length > 0) {\n      var renderer = this.getRenderer();\n      if (renderer) {\n        renderer.setLayerCanvasUpdated();\n      }\n      removed.forEach(function (layer) {\n        layer.fire('remove');\n      });\n    }\n    this._fireEvent('removelayer', {\n      'layers': layers\n    });\n    return this;\n  };\n  _proto.sortLayers = function sortLayers(layers) {\n    if (!layers || !Array.isArray(layers)) {\n      return this;\n    }\n    var layersToOrder = [];\n    var minZ = Number.MAX_VALUE;\n    for (var i = 0, l = layers.length; i < l; i++) {\n      var layer = layers[i];\n      if (isString(layers[i])) {\n        layer = this.getLayer(layer);\n      }\n      if (!(layer instanceof Layer) || !layer.getMap() || layer.getMap() !== this) {\n        throw new Error('It must be a layer added to this map to order.');\n      }\n      if (layer.getZIndex() < minZ) {\n        minZ = layer.getZIndex();\n      }\n      layersToOrder.push(layer);\n    }\n    for (var _i = 0, _l = layersToOrder.length; _i < _l; _i++) {\n      layersToOrder[_i].setZIndex(minZ + _i);\n    }\n    return this;\n  };\n  _proto.toDataURL = function toDataURL(options) {\n    if (!options) {\n      options = {};\n    }\n    var mimeType = options['mimeType'];\n    if (!mimeType) {\n      mimeType = 'image/png';\n    }\n    var save = options['save'];\n    var renderer = this._getRenderer();\n    if (renderer && renderer.toDataURL) {\n      var file = options['fileName'];\n      if (!file) {\n        file = 'export';\n      }\n      var dataURL = renderer.toDataURL(mimeType, options.quality || 0.92);\n      if (save && dataURL) {\n        var imgURL;\n        if (typeof Blob !== 'undefined' && typeof atob !== 'undefined') {\n          var blob = b64toBlob(dataURL.replace(/^data:image\\/(png|jpeg|jpg|webp);base64,/, ''), mimeType);\n          imgURL = URL.createObjectURL(blob);\n        } else {\n          imgURL = dataURL;\n        }\n        var dlLink = document.createElement('a');\n        dlLink.download = file;\n        dlLink.href = imgURL;\n        document.body.appendChild(dlLink);\n        dlLink.click();\n        document.body.removeChild(dlLink);\n      }\n      return dataURL;\n    }\n    return null;\n  };\n  _proto.coordToPoint = function coordToPoint(coordinate, zoom, out) {\n    return this.coordinateToPoint(coordinate, zoom, out);\n  };\n  _proto.coordToPointAtRes = function coordToPointAtRes(coordinate, res, out) {\n    return this.coordinateToPointAtRes(coordinate, res, out);\n  };\n  _proto.pointToCoord = function pointToCoord(point, zoom, out) {\n    return this.pointToCoordinate(point, zoom, out);\n  };\n  _proto.pointAtResToCoord = function pointAtResToCoord(point, res, out) {\n    return this.pointAtResToCoordinate(point, res, out);\n  };\n  _proto.coordToViewPoint = function coordToViewPoint(coordinate, out, altitude) {\n    return this.coordinateToViewPoint(coordinate, out, altitude);\n  };\n  _proto.viewPointToCoord = function viewPointToCoord(viewPoint, out) {\n    return this.viewPointToCoordinate(viewPoint, out);\n  };\n  _proto.coordToContainerPoint = function coordToContainerPoint(coordinate, zoom, out) {\n    return this.coordinateToContainerPoint(coordinate, zoom, out);\n  };\n  _proto.containerPointToCoord = function containerPointToCoord(containerPoint, out) {\n    return this.containerPointToCoordinate(containerPoint, out);\n  };\n  _proto.containerPointToViewPoint = function containerPointToViewPoint(containerPoint, out) {\n    if (out) {\n      out.set(containerPoint.x, containerPoint.y);\n    } else {\n      out = containerPoint.copy();\n    }\n    return out._sub(this.getViewPoint());\n  };\n  _proto.viewPointToContainerPoint = function viewPointToContainerPoint(viewPoint, out) {\n    if (out) {\n      out.set(viewPoint.x, viewPoint.y);\n    } else {\n      out = viewPoint.copy();\n    }\n    return out._add(this.getViewPoint());\n  };\n  _proto.checkSize = function checkSize(force) {\n    var justStart = now() - this._initTime < 1500 && this.width === 0 || this.height === 0;\n    var watched = this._getContainerDomSize(),\n      oldHeight = this.height,\n      oldWidth = this.width;\n    if (!force && watched['width'] === oldWidth && watched['height'] === oldHeight) {\n      return this;\n    }\n    computeDomPosition(this._containerDOM);\n    var center = this.getCenter();\n    if (!this.options['fixCenterOnResize']) {\n      var vh = this._getVisualHeight(this.getPitch());\n      var nwCP = new Point(0, this.height - vh);\n      var nwCoord = this._containerPointToPrj(nwCP);\n      this._updateMapSize(watched);\n      var vhAfter = this._getVisualHeight(this.getPitch());\n      var nwCPAfter = new Point(0, this.height - vhAfter);\n      this._setPrjCoordAtContainerPoint(nwCoord, nwCPAfter);\n      this._mapViewCoord = this._getPrjCenter();\n    } else {\n      this._updateMapSize(watched);\n    }\n    var hided = watched['width'] === 0 || watched['height'] === 0 || oldWidth === 0 || oldHeight === 0;\n    if (justStart || hided) {\n      this._eventSilence = true;\n      this.setCenter(center);\n      delete this._eventSilence;\n    }\n    this._fireEvent('resize');\n    return this;\n  };\n  _proto.locate = function locate(coordinate, dx, dy) {\n    return this.getProjection()._locate(new Coordinate(coordinate), dx, dy);\n  };\n  _proto.getMainPanel = function getMainPanel() {\n    return this._getRenderer().getMainPanel();\n  };\n  _proto.getPanels = function getPanels() {\n    return this._panels;\n  };\n  _proto.remove = function remove() {\n    var _this3 = this;\n    if (this.isRemoved()) {\n      return this;\n    }\n    this._fireEvent('removestart');\n    this._removeDomEvents();\n    this._clearHandlers();\n    this.removeBaseLayer();\n    var layers = this.getLayers();\n    for (var i = 0; i < layers.length; i++) {\n      layers[i].remove();\n    }\n    if (this._getRenderer()) {\n      this._getRenderer().remove();\n    }\n    if (this._containerDOM.childNodes && this._containerDOM.childNodes.length > 0) {\n      Array.prototype.slice.call(this._containerDOM.childNodes, 0).filter(function (node) {\n        return node.className === 'maptalks-wrapper';\n      }).forEach(function (node) {\n        return _this3._containerDOM.removeChild(node);\n      });\n    }\n    delete this._panels;\n    delete this._containerDOM;\n    delete this.renderer;\n    this._fireEvent('removeend');\n    this._clearAllListeners();\n    if (Browser$1.removeDPRListening) {\n      Browser$1.removeDPRListening(this);\n    }\n    return this;\n  };\n  _proto.isRemoved = function isRemoved() {\n    return !this._containerDOM;\n  };\n  _proto.isMoving = function isMoving() {\n    return !!this._moving;\n  };\n  _proto.onMoveStart = function onMoveStart(param) {\n    if (this._mapAnimPlayer) {\n      this._stopAnim(this._mapAnimPlayer);\n    }\n    var prjCenter = this._getPrjCenter();\n    if (!this._originCenter || this._verifyExtent(prjCenter)) {\n      this._originCenter = prjCenter;\n    }\n    this._moving = true;\n    this._trySetCursor('move');\n    this._fireEvent('movestart', this._parseEvent(param ? param['domEvent'] : null, 'movestart'));\n  };\n  _proto.onMoving = function onMoving(param) {\n    this._fireEvent('moving', this._parseEvent(param ? param['domEvent'] : null, 'moving'));\n  };\n  _proto.onMoveEnd = function onMoveEnd(param) {\n    this._moving = false;\n    if (!this._suppressRecenter) {\n      this._recenterOnTerrain();\n    }\n    this._trySetCursor('default');\n    this._fireEvent('moveend', param && param['domEvent'] ? this._parseEvent(param['domEvent'], 'moveend') : param);\n    if (!this._verifyExtent(this._getPrjCenter()) && this._originCenter) {\n      var moveTo = this._originCenter;\n      this._panTo(moveTo);\n    }\n  };\n  _proto.onDragRotateStart = function onDragRotateStart(param) {\n    this._dragRotating = true;\n    this._fireEvent('dragrotatestart', this._parseEvent(param ? param['domEvent'] : null, 'dragrotatestart'));\n  };\n  _proto.onDragRotating = function onDragRotating(param) {\n    this._fireEvent('dragrotating', this._parseEvent(param ? param['domEvent'] : null, 'dragrotating'));\n  };\n  _proto.onDragRotateEnd = function onDragRotateEnd(param) {\n    this._dragRotating = false;\n    this._fireEvent('dragrotateend', this._parseEvent(param ? param['domEvent'] : null, 'dragrotateend'));\n  };\n  _proto.isDragRotating = function isDragRotating() {\n    return !!this._dragRotating;\n  };\n  _proto.isOffscreen = function isOffscreen(box, viewportPadding) {\n    if (viewportPadding === void 0) {\n      viewportPadding = 0;\n    }\n    var width = this.width,\n      height = this.height;\n    var screenRightBoundary = width + viewportPadding;\n    var screenBottomBoundary = height + viewportPadding;\n    var xmin = box.xmin,\n      ymin = box.ymin,\n      xmax = box.xmax,\n      ymax = box.ymax;\n    if (Array.isArray(box)) {\n      xmin = box[0];\n      ymin = box[1];\n      xmax = box[2];\n      ymax = box[3];\n    }\n    return xmax < viewportPadding || xmin >= screenRightBoundary || ymax < viewportPadding || ymin > screenBottomBoundary;\n  };\n  _proto.getRenderer = function getRenderer() {\n    return this._getRenderer();\n  };\n  _proto.getDevicePixelRatio = function getDevicePixelRatio() {\n    return this.options['devicePixelRatio'] || Browser$1.devicePixelRatio || 1;\n  };\n  _proto.setDevicePixelRatio = function setDevicePixelRatio(dpr) {\n    if (isNumber(dpr) && dpr > 0 && dpr !== this.options['devicePixelRatio']) {\n      this.options['devicePixelRatio'] = dpr;\n      this.checkSize(true);\n    }\n    return this;\n  };\n  _proto._initContainer = function _initContainer(container) {\n    if (isString(container)) {\n      this._containerDOM = document.getElementById(container);\n      if (!this._containerDOM) {\n        throw new Error('Invalid container when creating map: \\'' + container + '\\'');\n      }\n    } else {\n      this._containerDOM = container;\n      if (IS_NODE) {\n        this.CanvasClass = this._containerDOM.constructor;\n      }\n    }\n    if (this._containerDOM.childNodes && this._containerDOM.childNodes.length > 0) {\n      if (this._containerDOM.childNodes[0].className === 'maptalks-wrapper') {\n        throw new Error('Container is already loaded with another map instance, use map.remove() to clear it.');\n      }\n    }\n  };\n  _proto._trySetCursor = function _trySetCursor(cursor) {\n    if (!this._cursor && !this._priorityCursor) {\n      if (!cursor) {\n        cursor = 'default';\n      }\n      this._setCursorToPanel(cursor);\n    }\n    return this;\n  };\n  _proto._setPriorityCursor = function _setPriorityCursor(cursor) {\n    if (!cursor) {\n      var hasCursor = false;\n      if (this._priorityCursor) {\n        hasCursor = true;\n      }\n      delete this._priorityCursor;\n      if (hasCursor) {\n        this.setCursor(this._cursor);\n      }\n    } else {\n      this._priorityCursor = cursor;\n      this._setCursorToPanel(cursor);\n    }\n    return this;\n  };\n  _proto._setCursorToPanel = function _setCursorToPanel(cursor) {\n    var panel = this.getMainPanel();\n    if (panel && panel.style && panel.style.cursor !== cursor) {\n      panel.style.cursor = cursor;\n    }\n  };\n  _proto._removeLayer = function _removeLayer(layer, layerList) {\n    if (!layer || !layerList) {\n      return;\n    }\n    var index = layerList.indexOf(layer);\n    if (index > -1) {\n      layerList.splice(index, 1);\n    }\n  };\n  _proto._sortLayersByZIndex = function _sortLayersByZIndex() {\n    if (!this._layers) {\n      return;\n    }\n    for (var i = 0, l = this._layers.length; i < l; i++) {\n      this._layers[i]._order = i;\n      if (this._layers[i].sortLayersByZIndex) {\n        this._layers[i].sortLayersByZIndex();\n      }\n    }\n    this._layers.sort(function (a, b) {\n      var c = a.getZIndex() - b.getZIndex();\n      if (c === 0) {\n        return a._order - b._order;\n      }\n      return c;\n    });\n  };\n  _proto._fireEvent = function _fireEvent(eventName, param) {\n    if (this._eventSilence) {\n      return;\n    }\n    var underline = '_';\n    if (eventName[0] !== underline) {\n      this.fire(underline + eventName, param);\n    }\n    this.fire(eventName, param);\n  };\n  _proto._Load = function _Load() {\n    this._resetMapStatus();\n    if (this.options['pitch']) {\n      this.setPitch(this.options['pitch']);\n      delete this.options['pitch'];\n    }\n    if (this.options['bearing']) {\n      this.setBearing(this.options['bearing']);\n      delete this.options['bearing'];\n    }\n    delete this._glRes;\n    this._loadAllLayers();\n    this._getRenderer().onLoad();\n    this._loaded = true;\n    this._callOnLoadHooks();\n    this._initTime = now();\n  };\n  _proto._initRenderer = function _initRenderer() {\n    var renderer = this.options['renderer'];\n    var clazz = Map.getRendererClass(renderer);\n    this._renderer = new clazz(this);\n    this._renderer.load();\n  };\n  _proto._getRenderer = function _getRenderer() {\n    return this._renderer;\n  };\n  _proto._loadAllLayers = function _loadAllLayers() {\n    function loadLayer(layer) {\n      if (layer) {\n        layer.load();\n      }\n    }\n    if (this._baseLayer) {\n      this._baseLayer.load();\n    }\n    this._eachLayer(loadLayer, this.getLayers());\n  };\n  _proto._getLayers = function _getLayers(filter) {\n    var layers = this._baseLayer ? [this._baseLayer].concat(this._layers) : this._layers;\n    var result = [];\n    for (var i = 0; i < layers.length; i++) {\n      if (!filter || filter.call(this, layers[i])) {\n        result.push(layers[i]);\n      }\n    }\n    return result;\n  };\n  _proto._eachLayer = function _eachLayer(fn) {\n    if (arguments.length < 2) {\n      return;\n    }\n    var layerLists = Array.prototype.slice.call(arguments, 1);\n    if (layerLists && !Array.isArray(layerLists)) {\n      layerLists = [layerLists];\n    }\n    var layers = [];\n    for (var i = 0, len = layerLists.length; i < len; i++) {\n      layers = layers.concat(layerLists[i]);\n    }\n    for (var j = 0, jlen = layers.length; j < jlen; j++) {\n      fn.call(fn, layers[j]);\n    }\n  };\n  _proto._onLayerEvent = function _onLayerEvent(param) {\n    if (!param) {\n      return;\n    }\n    if (param['type'] === 'idchange') {\n      delete this._layerCache[param['old']];\n      this._layerCache[param['new']] = param['target'];\n    }\n  };\n  _proto._resetMapStatus = function _resetMapStatus() {\n    var maxZoom = this.getMaxZoom(),\n      minZoom = this.getMinZoom();\n    var viewMaxZoom = this._spatialReference.getMaxZoom(),\n      viewMinZoom = this._spatialReference.getMinZoom();\n    if (isNil(maxZoom) || maxZoom === -1 || maxZoom > viewMaxZoom) {\n      this.setMaxZoom(viewMaxZoom);\n    }\n    if (isNil(minZoom) || minZoom === -1 || minZoom < viewMinZoom) {\n      this.setMinZoom(viewMinZoom);\n    }\n    maxZoom = this.getMaxZoom();\n    minZoom = this.getMinZoom();\n    if (maxZoom < minZoom) {\n      this.setMaxZoom(minZoom);\n    }\n    if (isNil(this._zoomLevel) || this._zoomLevel > maxZoom) {\n      this._zoomLevel = maxZoom;\n    }\n    if (this._zoomLevel < minZoom) {\n      this._zoomLevel = minZoom;\n    }\n    delete this._prjCenter;\n    var projection = this.getProjection();\n    this._prjCenter = projection.project(this._center);\n    this._calcMatrices();\n    var renderer = this._getRenderer();\n    if (renderer) {\n      renderer.resetContainer();\n    }\n  };\n  _proto._getContainerDomSize = function _getContainerDomSize() {\n    if (!this._containerDOM) {\n      return null;\n    }\n    var containerDOM = this._containerDOM;\n    var width, height;\n    if (this._containerDomContentRect) {\n      width = this._containerDomContentRect.width;\n      height = this._containerDomContentRect.height;\n      return new Size(width, height);\n    }\n    if (!isNil(containerDOM.width) && !isNil(containerDOM.height)) {\n      width = containerDOM.width;\n      height = containerDOM.height;\n      var dpr = this.getDevicePixelRatio();\n      if (dpr !== 1 && containerDOM['layer']) {\n        width /= dpr;\n        height /= dpr;\n      }\n    } else if (!isNil(containerDOM.clientWidth) && !isNil(containerDOM.clientHeight)) {\n      width = parseInt(containerDOM.clientWidth, 0);\n      height = parseInt(containerDOM.clientHeight, 0);\n    } else {\n      throw new Error('can not get size of container');\n    }\n    return new Size(width, height);\n  };\n  _proto._updateMapSize = function _updateMapSize(mSize) {\n    this.width = mSize['width'];\n    this.height = mSize['height'];\n    this._getRenderer().updateMapSize(mSize);\n    this._calcMatrices();\n    return this;\n  };\n  _proto._getPrjCenter = function _getPrjCenter() {\n    return this._prjCenter;\n  };\n  _proto._setPrjCenter = function _setPrjCenter(pcenter) {\n    this._prjCenter = pcenter;\n    if (this.isInteracting() && !this.isMoving()) {\n      this._mapViewCoord = pcenter;\n    }\n    this._calcMatrices();\n  };\n  _proto._setPrjCoordAtContainerPoint = function _setPrjCoordAtContainerPoint(coordinate, point) {\n    if (!this.centerAltitude && point.x === this.width / 2 && point.y === this.height / 2) {\n      return this;\n    }\n    var t = this._containerPointToPoint(point)._sub(this._prjToPoint(this._getPrjCenter()));\n    var pcenter = this._pointToPrj(this._prjToPoint(coordinate).sub(t));\n    this._setPrjCenter(pcenter);\n    return this;\n  };\n  _proto._verifyExtent = function _verifyExtent(prjCenter) {\n    if (!prjCenter) {\n      return false;\n    }\n    var maxExt = this._prjMaxExtent;\n    if (!maxExt) {\n      return true;\n    }\n    return maxExt.contains(prjCenter);\n  };\n  _proto._offsetCenterByPixel = function _offsetCenterByPixel(pixel) {\n    var pos = TEMP_POINT.set(this.width / 2 - pixel.x, this.height / 2 - pixel.y);\n    var coord = this._containerPointToPrj(pos, TEMP_COORD);\n    var containerCenter = TEMP_POINT.set(this.width / 2, this.height / 2);\n    this._setPrjCoordAtContainerPoint(coord, containerCenter);\n  };\n  _proto.offsetPlatform = function offsetPlatform(offset) {\n    if (!offset) {\n      return this._mapViewPoint;\n    } else {\n      this._getRenderer().offsetPlatform(offset);\n      this._mapViewCoord = this._getPrjCenter();\n      this._mapViewPoint = this._mapViewPoint.add(offset);\n      return this;\n    }\n  };\n  _proto.getViewPoint = function getViewPoint() {\n    var offset = this._getViewPointFrameOffset();\n    var panelOffset = this.offsetPlatform();\n    if (offset) {\n      panelOffset = panelOffset.add(offset);\n    }\n    return panelOffset;\n  };\n  _proto._resetMapViewPoint = function _resetMapViewPoint() {\n    this._mapViewPoint = new Point(0, 0);\n    this._mapViewCoord = this._getPrjCenter();\n  };\n  _proto._getResolution = function _getResolution(zoom) {\n    if ((zoom === undefined || zoom === this._zoomLevel) && this._mapRes !== undefined) {\n      return this._mapRes;\n    }\n    if (isNil(zoom)) {\n      zoom = this._zoomLevel;\n    }\n    return this._spatialReference.getResolution(zoom);\n  };\n  _proto._getResolutions = function _getResolutions() {\n    return this._spatialReference.getResolutions();\n  };\n  _proto._prjToPoint = function _prjToPoint(pCoord, zoom, out) {\n    zoom = isNil(zoom) ? this.getZoom() : zoom;\n    var res = this._getResolution(zoom);\n    return this._prjToPointAtRes(pCoord, res, out);\n  };\n  _proto._prjToPointAtRes = function _prjToPointAtRes(pCoord, res, out) {\n    return this._spatialReference.getTransformation().transform(pCoord, res, out);\n  };\n  _proto._prjsToPointsAtRes = function _prjsToPointsAtRes(pCoords, res, resultPoints) {\n    if (resultPoints === void 0) {\n      resultPoints = [];\n    }\n    var transformation = this._spatialReference.getTransformation();\n    var pts = [];\n    for (var i = 0, len = pCoords.length; i < len; i++) {\n      var pt = transformation.transform(pCoords[i], res, resultPoints[i]);\n      pts.push(pt);\n    }\n    return pts;\n  };\n  _proto._pointToPrj = function _pointToPrj(point, zoom, out) {\n    zoom = isNil(zoom) ? this.getZoom() : zoom;\n    var res = this._getResolution(zoom);\n    return this._pointToPrjAtRes(point, res, out);\n  };\n  _proto._pointToPrjAtRes = function _pointToPrjAtRes(point, res, out) {\n    return this._spatialReference.getTransformation().untransform(point, res, out);\n  };\n  _proto._pointToPoint = function _pointToPoint(point, zoom, out) {\n    if (!isNil(zoom)) {\n      return this._pointAtResToPoint(point, this._getResolution(zoom), out);\n    }\n    if (out) {\n      out.x = point.x;\n      out.y = point.y;\n    } else {\n      out = point.copy();\n    }\n    return out;\n  };\n  _proto._pointAtResToPoint = function _pointAtResToPoint(point, res, out) {\n    if (out) {\n      out.x = point.x;\n      out.y = point.y;\n    } else {\n      out = point.copy();\n    }\n    return out._multi(res / this._getResolution());\n  };\n  _proto._pointToPointAtRes = function _pointToPointAtRes(point, res, out) {\n    if (out) {\n      out.x = point.x;\n      out.y = point.y;\n    } else {\n      out = point.copy();\n    }\n    return out._multi(this._getResolution() / res);\n  };\n  _proto._containerPointToPrj = function _containerPointToPrj(containerPoint, out) {\n    return this._pointToPrj(this._containerPointToPoint(containerPoint, undefined, out), undefined, out);\n  };\n  _proto._callOnLoadHooks = function _callOnLoadHooks() {\n    var proto = Map.prototype;\n    if (!proto._onLoadHooks) {\n      return;\n    }\n    for (var i = 0, l = proto._onLoadHooks.length; i < l; i++) {\n      proto._onLoadHooks[i].call(this);\n    }\n  };\n  _proto._fixPrjOnWorldWide = function _fixPrjOnWorldWide(prjCoord) {\n    var projection = this.getProjection();\n    if (projection && projection.fullExtent && prjCoord) {\n      var _ref = projection.fullExtent || {},\n        left = _ref.left,\n        bottom = _ref.bottom,\n        top = _ref.top,\n        right = _ref.right;\n      if (isNumber(left)) {\n        prjCoord.x = Math.max(left, prjCoord.x);\n      }\n      if (isNumber(right)) {\n        prjCoord.x = Math.min(right, prjCoord.x);\n      }\n      if (isNumber(bottom)) {\n        prjCoord.y = Math.max(bottom, prjCoord.y);\n      }\n      if (isNumber(top)) {\n        prjCoord.y = Math.min(top, prjCoord.y);\n      }\n    }\n    return this;\n  };\n  return Map;\n}(Handlerable(Eventable(Renderable(Class))));\nMap$1.include({\n  coordinateToPoint: function coordinateToPoint(coordinate, zoom, out) {\n    var res = this._getResolution(zoom);\n    return this.coordinateToPointAtRes(coordinate, res, out);\n  },\n  coordinateToPointAtRes: function () {\n    var COORD = new Coordinate(0, 0);\n    return function (coordinate, res, out) {\n      var prjCoord = this.getProjection().project(coordinate, COORD);\n      return this._prjToPointAtRes(prjCoord, res, out);\n    };\n  }(),\n  pointToCoordinate: function () {\n    var COORD = new Coordinate(0, 0);\n    return function (point, zoom, out) {\n      var prjCoord = this._pointToPrj(point, zoom, COORD);\n      return this.getProjection().unproject(prjCoord, out);\n    };\n  }(),\n  pointAtResToCoordinate: function () {\n    var COORD = new Coordinate(0, 0);\n    return function (point, res, out) {\n      var prjCoord = this._pointToPrjAtRes(point, res, COORD);\n      return this.getProjection().unproject(prjCoord, out);\n    };\n  }(),\n  coordinateToViewPoint: function () {\n    var COORD = new Coordinate(0, 0);\n    return function (coordinate, out, altitude) {\n      return this._prjToViewPoint(this.getProjection().project(coordinate, COORD), out, altitude);\n    };\n  }(),\n  viewPointToCoordinate: function () {\n    var COORD = new Coordinate(0, 0);\n    return function (viewPoint, out) {\n      return this.getProjection().unproject(this._viewPointToPrj(viewPoint, COORD), out);\n    };\n  }(),\n  coordinateToContainerPoint: function coordinateToContainerPoint(coordinate, zoom, out) {\n    var res = this._getResolution(zoom);\n    return this.coordinateToContainerPointAtRes(coordinate, res, out);\n  },\n  coordinateToContainerPointAtRes: function () {\n    var COORD = new Coordinate(0, 0);\n    return function (coordinate, res, out) {\n      var pCoordinate = this.getProjection().project(coordinate, COORD);\n      return this._prjToContainerPointAtRes(pCoordinate, res, out);\n    };\n  }(),\n  coordinatesToContainerPoints: function coordinatesToContainerPoints(coordinates, zoom) {\n    var res = this._getResolution(zoom);\n    return this.coordinatesToContainerPointsAtRes(coordinates, res);\n  },\n  coordinatesToContainerPointsAtRes: function () {\n    return function (coordinates, resolution) {\n      var pts = [];\n      var transformation = this._spatialReference.getTransformation();\n      var res = resolution / this._getResolution();\n      var projection = this.getProjection();\n      var prjOut = new Coordinate(0, 0);\n      var isTransforming = this.isTransforming();\n      var centerPoint = this._prjToPoint(this._getPrjCenter(), undefined, TEMP_COORD);\n      for (var i = 0, len = coordinates.length; i < len; i++) {\n        var pCoordinate = projection.project(coordinates[i], prjOut);\n        var point = transformation.transform(pCoordinate, resolution);\n        point = point._multi(res);\n        this._toContainerPoint(point, isTransforming, coordinates[i].z, centerPoint);\n        pts.push(point);\n      }\n      return pts;\n    };\n  }(),\n  containerPointToCoordinate: function () {\n    var COORD = new Coordinate(0, 0);\n    return function (containerPoint, out) {\n      var pCoordinate = this._containerPointToPrj(containerPoint, COORD);\n      return this.getProjection().unproject(pCoordinate, out);\n    };\n  }(),\n  containerToExtent: function () {\n    var POINT0 = new Point(0, 0);\n    var POINT1 = new Point(0, 0);\n    return function (containerExtent) {\n      var extent2D = new PointExtent(this._containerPointToPoint(containerExtent.getMin(POINT0), undefined, POINT0), this._containerPointToPoint(containerExtent.getMax(POINT1), undefined, POINT1));\n      return this._pointToExtent(extent2D);\n    };\n  }(),\n  distanceToPixel: function () {\n    var POINT0 = new Point(0, 0);\n    var POINT1 = new Point(0, 0);\n    return function (xDist, yDist, zoom) {\n      var projection = this.getProjection();\n      if (!projection) {\n        return null;\n      }\n      var scale = this.getScale() / this.getScale(zoom);\n      var center = this.getCenter(),\n        target = projection.locate(center, xDist, yDist);\n      var p0 = this.coordToContainerPoint(center, undefined, POINT0),\n        p1 = this.coordToContainerPoint(target, undefined, POINT1);\n      p1._sub(p0)._multi(scale)._abs();\n      return new Size(p1.x, p1.y);\n    };\n  }(),\n  distanceToPoint: function distanceToPoint(xDist, yDist, zoom, paramCenter) {\n    var res = this._getResolution(zoom);\n    return this.distanceToPointAtRes(xDist, yDist, res, paramCenter);\n  },\n  distanceToPointAtRes: function () {\n    var POINT = new Point(0, 0);\n    var COORD = new Coordinate(0, 0);\n    return function (xDist, yDist, res, paramCenter, out) {\n      var projection = this.getProjection();\n      if (!projection) {\n        return null;\n      }\n      var center = paramCenter || this.getCenter(),\n        target = projection.locate(center, xDist, yDist, COORD);\n      var p0 = this.coordToPointAtRes(center, res, POINT),\n        p1 = this.coordToPointAtRes(target, res, out);\n      p1._sub(p0)._abs();\n      return p1;\n    };\n  }(),\n  altitudeToPoint: function () {\n    var DEFAULT_CENTER = new Coordinate(0, 40);\n    var POINT = new Point(0, 0);\n    return function (altitude, res, originCenter) {\n      if (altitude === void 0) {\n        altitude = 0;\n      }\n      var p = this.distanceToPointAtRes(altitude, altitude, res, originCenter || DEFAULT_CENTER, POINT);\n      if (altitude < 0 && p.x > 0) {\n        p.x = -p.x;\n      }\n      var heightFactor = this.options['heightFactor'];\n      if (heightFactor && heightFactor !== 1) {\n        p.x *= heightFactor;\n        p.y *= heightFactor;\n      }\n      return p.x;\n    };\n  }(),\n  pointAtResToAltitude: function () {\n    var DEFAULT_CENTER = new Coordinate(0, 40);\n    return function (point, res, originCenter) {\n      if (point === void 0) {\n        point = 0;\n      }\n      var altitude = this.pointAtResToDistance(point, 0, res, originCenter || DEFAULT_CENTER);\n      return altitude;\n    };\n  }(),\n  pixelToDistance: function () {\n    var COORD0 = new Coordinate(0, 0);\n    var COORD1 = new Coordinate(0, 0);\n    var TARGET0 = new Coordinate(0, 0);\n    var TARGET1 = new Coordinate(0, 0);\n    return function (width, height) {\n      var projection = this.getProjection();\n      if (!projection) {\n        return null;\n      }\n      var fullExt = this.getFullExtent();\n      var d = fullExt['top'] > fullExt['bottom'] ? -1 : 1;\n      var coord0 = COORD0.set(this.width / 2, this.height / 2);\n      var coord1 = COORD1.set(this.width / 2 + width, this.height / 2 + d * height);\n      var target0 = this.containerPointToCoord(coord0, TARGET0);\n      var target1 = this.containerPointToCoord(coord1, TARGET1);\n      return projection.measureLength(target0, target1);\n    };\n  }(),\n  pointToDistance: function pointToDistance(dx, dy, zoom) {\n    var res = this.getResolution(zoom);\n    return this.pointAtResToDistance(dx, dy, res);\n  },\n  pointAtResToDistance: function () {\n    var POINT = new Point(0, 0);\n    var PRJ_COORD = new Coordinate(0, 0);\n    var COORD0 = new Coordinate(0, 0);\n    var COORD1 = new Coordinate(0, 0);\n    return function (dx, dy, res, paramCenter) {\n      var projection = this.getProjection();\n      if (!projection) {\n        return null;\n      }\n      var prjCoord = paramCenter ? projection.project(paramCenter, PRJ_COORD) : this._getPrjCenter();\n      var c = this._prjToPointAtRes(prjCoord, res, POINT);\n      c._add(dx, dy);\n      var target = this.pointAtResToCoord(c, res, COORD0);\n      var src = paramCenter ? paramCenter : projection.unproject(prjCoord, COORD1);\n      return projection.measureLength(src, target);\n    };\n  }(),\n  locateByPoint: function () {\n    var POINT = new Point(0, 0);\n    return function (coordinate, px, py) {\n      var point = this.coordToContainerPoint(coordinate, undefined, POINT);\n      return this.containerPointToCoord(point._add(px, py));\n    };\n  }(),\n  _get2DExtent: function _get2DExtent(zoom, out) {\n    var cached;\n    if ((zoom === undefined || zoom === this._zoomLevel) && this._mapExtent2D) {\n      cached = this._mapExtent2D;\n    }\n    if (cached) {\n      if (out) {\n        out.set(cached['xmin'], cached['ymin'], cached['xmax'], cached['ymax']);\n        return out;\n      }\n      return cached.copy();\n    }\n    var res = this._getResolution(zoom);\n    return this._get2DExtentAtRes(res, out);\n  },\n  _get2DExtentAtRes: function () {\n    var POINT = new Point(0, 0);\n    return function (res, out) {\n      var _this4 = this;\n      if (res === this._mapGlRes && this._mapGlExtent2D) {\n        return this._mapGlExtent2D;\n      }\n      var cExtent = this.getContainerExtent();\n      return cExtent.convertTo(function (c) {\n        return _this4._containerPointToPointAtRes(c, res, POINT);\n      }, out);\n    };\n  }(),\n  _pointToExtent: function () {\n    var COORD0 = new Coordinate(0, 0);\n    var COORD1 = new Coordinate(0, 0);\n    return function (extent2D) {\n      var min2d = extent2D.getMin(),\n        max2d = extent2D.getMax();\n      var fullExtent = this.getFullExtent();\n      var _ref2 = !fullExtent || fullExtent.left <= fullExtent.right ? [min2d.x, max2d.x] : [max2d.x, min2d.x],\n        minx = _ref2[0],\n        maxx = _ref2[1];\n      var _ref3 = !fullExtent || fullExtent.top > fullExtent.bottom ? [max2d.y, min2d.y] : [min2d.y, max2d.y],\n        miny = _ref3[0],\n        maxy = _ref3[1];\n      var min = min2d.set(minx, maxy);\n      var max = max2d.set(maxx, miny);\n      return new Extent(this.pointToCoord(min, undefined, COORD0), this.pointToCoord(max, undefined, COORD1), this.getProjection());\n    };\n  }(),\n  _getViewPointFrameOffset: function () {\n    var POINT = new Point(0, 0);\n    return function () {\n      if (this.isZooming()) {\n        return null;\n      }\n      var pcenter = this._getPrjCenter();\n      if (this._mapViewCoord && !this._mapViewCoord.equals(pcenter)) {\n        return this._prjToContainerPoint(this._mapViewCoord)._sub(this._prjToContainerPoint(pcenter, undefined, POINT));\n      }\n      return null;\n    };\n  }(),\n  _viewPointToPrj: function () {\n    var POINT = new Point(0, 0);\n    return function (viewPoint, out) {\n      return this._containerPointToPrj(this.viewPointToContainerPoint(viewPoint, POINT), out);\n    };\n  }(),\n  _prjToContainerPoint: function _prjToContainerPoint(pCoordinate, zoom, out, altitude) {\n    var res = this._getResolution(zoom);\n    return this._prjToContainerPointAtRes(pCoordinate, res, out, altitude);\n  },\n  _prjToContainerPointAtRes: function () {\n    var POINT = new Point(0, 0);\n    return function (pCoordinate, res, out, altitude) {\n      return this._pointAtResToContainerPoint(this._prjToPointAtRes(pCoordinate, res, POINT), res, altitude || 0, out);\n    };\n  }(),\n  _prjToViewPoint: function () {\n    var POINT = new Point(0, 0);\n    return function (pCoordinate, out, altitude) {\n      var containerPoint = this._prjToContainerPoint(pCoordinate, undefined, POINT, altitude);\n      return this.containerPointToViewPoint(containerPoint, out);\n    };\n  }(),\n  _viewPointToPoint: function () {\n    var POINT = new Point(0, 0);\n    return function (viewPoint, zoom, out) {\n      return this._containerPointToPoint(this.viewPointToContainerPoint(viewPoint, POINT), zoom, out);\n    };\n  }(),\n  _pointToViewPoint: function () {\n    var COORD = new Coordinate(0, 0);\n    return function (point, zoom, out) {\n      return this._prjToViewPoint(this._pointToPrj(point, zoom, COORD), out);\n    };\n  }()\n});\nMap$1.mergeOptions(options$2);\n\nvar MapDoubleClickZoomHandler = function (_Handler) {\n  _inheritsLoose(MapDoubleClickZoomHandler, _Handler);\n  function MapDoubleClickZoomHandler() {\n    return _Handler.apply(this, arguments) || this;\n  }\n  var _proto = MapDoubleClickZoomHandler.prototype;\n  _proto.addHooks = function addHooks() {\n    if (!this.target) {\n      return;\n    }\n    this.target.on('_dblclick', this._onDoubleClick, this);\n  };\n  _proto.removeHooks = function removeHooks() {\n    if (!this.target) {\n      return;\n    }\n    this.target.off('_dblclick', this._onDoubleClick, this);\n  };\n  _proto._onDoubleClick = function _onDoubleClick(param) {\n    var map = this.target;\n    if (map.options['doubleClickZoom']) {\n      var oldZoom = map.getZoom(),\n        zoom = param['domEvent']['shiftKey'] ? Math.ceil(oldZoom) - 1 : Math.floor(oldZoom) + 1;\n      map._zoomAnimation(zoom, param['containerPoint']);\n    }\n  };\n  return MapDoubleClickZoomHandler;\n}(Handler$1);\nMap$1.mergeOptions({\n  'doubleClickZoom': true\n});\nMap$1.addOnLoadHook('addHandler', 'doubleClickZoom', MapDoubleClickZoomHandler);\n\nvar MapDragHandler = function (_Handler) {\n  _inheritsLoose(MapDragHandler, _Handler);\n  function MapDragHandler() {\n    return _Handler.apply(this, arguments) || this;\n  }\n  var _proto = MapDragHandler.prototype;\n  _proto.addHooks = function addHooks() {\n    var map = this.target;\n    if (!map) {\n      return;\n    }\n    var dom = map._panels.mapWrapper || map._containerDOM;\n    this._dragHandler = new DragHandler(dom, {\n      'cancelOn': this._cancelOn.bind(this),\n      'rightclick': true\n    });\n    this._dragHandler.on('mousedown', this._onMouseDown, this).on('dragstart', this._onDragStart, this).on('dragging', this._onDragging, this).on('dragend', this._onDragEnd, this).enable();\n  };\n  _proto.removeHooks = function removeHooks() {\n    this._dragHandler.off('mousedown', this._onMouseDown, this).off('dragstart', this._onDragStart, this).off('dragging', this._onDragging, this).off('dragend', this._onDragEnd, this);\n    this._dragHandler.remove();\n    delete this._dragHandler;\n  };\n  _proto._cancelOn = function _cancelOn(domEvent) {\n    if (this.target.isZooming() || this._ignore(domEvent)) {\n      return true;\n    }\n    return false;\n  };\n  _proto._ignore = function _ignore(param) {\n    if (!param) {\n      return false;\n    }\n    if (param.domEvent) {\n      param = param.domEvent;\n    }\n    return this.target._ignoreEvent(param);\n  };\n  _proto._onMouseDown = function _onMouseDown(param) {\n    delete this.startDragTime;\n    delete this._mode;\n    var switchDragButton = this.target.options['switchDragButton'];\n    var rotateModeButton = switchDragButton ? 0 : 2;\n    var isTouch = param.domEvent.type === 'touchstart';\n    var isRotatonMode = switchDragButton && isTouch || param.domEvent.button === rotateModeButton || param.domEvent.ctrlKey;\n    if (isRotatonMode) {\n      if (this.target.options['dragRotate'] || this.target.options['dragPitch']) {\n        this._mode = 'rotatePitch';\n      }\n    } else if (this.target.options['dragPan']) {\n      this._mode = 'move';\n    }\n    this.target._stopAnim(this.target._mapAnimPlayer);\n    preventDefault(param['domEvent']);\n  };\n  _proto._onDragStart = function _onDragStart(param) {\n    this.startDragTime = now();\n    if (this._mode === 'move') {\n      this._moveStart(param);\n    } else if (this._mode === 'rotatePitch') {\n      this._rotateStart(param);\n    }\n  };\n  _proto._onDragging = function _onDragging(param) {\n    var map = this.target;\n    if (map._isEventOutMap(param['domEvent'])) {\n      return;\n    }\n    if (this._mode === 'move') {\n      this._moving(param);\n    } else if (this._mode === 'rotatePitch') {\n      this._rotating(param);\n    }\n  };\n  _proto._onDragEnd = function _onDragEnd(param) {\n    if (this._mode === 'move') {\n      this._moveEnd(param);\n    } else if (this._mode === 'rotatePitch') {\n      this._rotateEnd(param);\n    }\n    delete this.startDragTime;\n    delete this.startBearing;\n  };\n  _proto._start = function _start(param) {\n    this.preX = param['mousePos'].x;\n    this.preY = param['mousePos'].y;\n    this.startX = this.preX;\n    this.startY = this.preY;\n    this._startPrjCenter = this.target._getPrjCenter().copy();\n  };\n  _proto._moveStart = function _moveStart(param) {\n    this._start(param);\n    var map = this.target;\n    map.onMoveStart(param);\n    var p = getEventContainerPoint(map._getActualEvent(param.domEvent), map.getContainer());\n    this.startPrjCoord = map._containerPointToPrj(p);\n  };\n  _proto._moving = function _moving(param) {\n    if (!this.startDragTime) {\n      return;\n    }\n    var map = this.target;\n    var p = getEventContainerPoint(map._getActualEvent(param.domEvent), map.getContainer());\n    map._setPrjCoordAtContainerPoint(this.startPrjCoord, p);\n    map.onMoving(param);\n  };\n  _proto._moveEnd = function _moveEnd(param) {\n    if (!this.startDragTime) {\n      return;\n    }\n    var isTouch = param.domEvent.type === 'touchend';\n    var map = this.target;\n    var t = now() - this.startDragTime;\n    var mx = param['mousePos'].x,\n      my = param['mousePos'].y;\n    var dx = mx - this.startX;\n    var dy = my - this.startY;\n    var currentCenter = map._getPrjCenter();\n    var dxy = currentCenter.sub(this._startPrjCenter);\n    this._clear();\n    if (map.options['panAnimation'] && !param.interupted && map._verifyExtent(map._getPrjCenter()) && t < 280 && Math.abs(dy) + Math.abs(dx) > 5) {\n      t = 5 * t;\n      var dscale = isTouch ? 5 : 2.8;\n      var targetPrjCoord = currentCenter.add(dxy._multi(dscale));\n      map._panTo(targetPrjCoord, {\n        'duration': isTouch ? t * 3 : t * 2,\n        'easing': 'outExpo'\n      });\n    } else {\n      map.onMoveEnd(param);\n    }\n  };\n  _proto._rotateStart = function _rotateStart(param) {\n    this._start(param);\n    delete this._rotateMode;\n    this.startBearing = this.target.getBearing();\n    this.target.onDragRotateStart(param);\n    this._db = 0;\n  };\n  _proto._rotating = function _rotating(param) {\n    var map = this.target;\n    var mx = param['mousePos'].x,\n      my = param['mousePos'].y;\n    var prePitch = map.getPitch(),\n      preBearing = map.getBearing();\n    var dx = Math.abs(mx - this.preX),\n      dy = Math.abs(my - this.preY);\n    if (!this._rotateMode) {\n      if (map.options['dragRotatePitch']) {\n        this._rotateMode = 'rotate_pitch';\n      } else if (dx > dy) {\n        this._rotateMode = 'rotate';\n      } else if (dx < dy) {\n        this._rotateMode = 'pitch';\n      } else {\n        this._rotateMode = 'rotate';\n      }\n    }\n    if (this._rotateMode === 'pitch' && prePitch === 0 && dy < 10) {\n      return;\n    }\n    if (this._rotateMode.indexOf('rotate') >= 0 && map.options['dragRotate']) {\n      var factor = 0.15;\n      var db = 0;\n      if (map.options['dragPitch'] || dx > dy) {\n        db = -factor * (this.preX - mx);\n      } else if (mx > map.width / 2) {\n        db = factor * (this.preY - my);\n      } else {\n        db = -factor * (this.preY - my);\n      }\n      var bearing = map.getBearing() + db;\n      this._db = this._db || 0;\n      this._db += db;\n      map._setBearing(bearing);\n    }\n    if (this._rotateMode.indexOf('pitch') >= 0 && map.options['dragPitch']) {\n      map._setPitch(map.getPitch() + (this.preY - my) * 0.15);\n    }\n    this.preX = mx;\n    this.preY = my;\n    if (map.getBearing() !== preBearing || map.getPitch() !== prePitch) {\n      map.onDragRotating(param);\n    }\n  };\n  _proto._rotateEnd = function _rotateEnd(param) {\n    var map = this.target;\n    var bearing = map.getBearing();\n    this._clear();\n    var t = now() - this.startDragTime;\n    map.onDragRotateEnd(param);\n    if (map.options['rotateAnimation'] && Math.abs(bearing - this.startBearing) > 20 && (this._rotateMode === 'rotate' || this._rotateMode === 'rotate_pitch') && !param.interupted && t < 400) {\n      var _bearing = map.getBearing();\n      map._animateTo({\n        'bearing': _bearing + this._db / 1.5\n      }, {\n        'easing': 'outQuint',\n        'duration': 1600\n      });\n    }\n  };\n  _proto._clear = function _clear() {\n    delete this.startPrjCoord;\n    delete this.preX;\n    delete this.preY;\n    delete this.startX;\n    delete this.startY;\n  };\n  return MapDragHandler;\n}(Handler$1);\nMap$1.mergeOptions({\n  'draggable': true,\n  'dragPan': true,\n  'dragRotatePitch': true,\n  'dragRotate': true,\n  'dragPitch': true\n});\nMap$1.addOnLoadHook('addHandler', 'draggable', MapDragHandler);\n\nvar EVENTS = 'mousedown ' + 'mouseup ' + 'mousemove ' + 'click ' + 'dblclick ' + 'contextmenu ' + 'touchstart ' + 'touchmove ' + 'touchend ' + 'mouseout';\nvar MOUSEEVENT_ASSOCIATION_TABLE = {\n  'mousemove': ['mousemove', 'mouseover', 'mouseout', 'mouseenter'],\n  'touchend': ['touchend', 'click']\n};\nvar isGeo = function isGeo(geometry) {\n  return geometry && geometry.getLayer && geometry.on && geometry.fire;\n};\nvar getGeoId = function getGeoId(geometry) {\n  if (geometry._getInternalId) {\n    return geometry._getInternalId();\n  } else if (geometry.getId) {\n    return geometry.getId();\n  }\n  return null;\n};\nvar fireGeoEvent = function fireGeoEvent(geometry, domEvent, type) {\n  if (geometry._onEvent) {\n    return geometry._onEvent(domEvent, type);\n  }\n  var layer = geometry.getLayer();\n  if (layer && layer.fireGeoEvent) {\n    return layer.fireGeoEvent(geometry, domEvent, type);\n  }\n  return null;\n};\nvar MapGeometryEventsHandler = function (_Handler) {\n  _inheritsLoose(MapGeometryEventsHandler, _Handler);\n  function MapGeometryEventsHandler() {\n    return _Handler.apply(this, arguments) || this;\n  }\n  var _proto = MapGeometryEventsHandler.prototype;\n  _proto.addHooks = function addHooks() {\n    var map = this.target;\n    var dom = map._panels.allLayers || map._containerDOM;\n    on(dom, EVENTS, this._identifyGeometryEvents, this);\n  };\n  _proto.removeHooks = function removeHooks() {\n    var map = this.target;\n    var dom = map._panels.allLayers || map._containerDOM;\n    off(dom, EVENTS, this._identifyGeometryEvents, this);\n  };\n  _proto._identifyGeometryEvents = function _identifyGeometryEvents(domEvent, type) {\n    var map = this.target;\n    if (map.isInteracting() || map._ignoreEvent(domEvent)) {\n      return;\n    }\n    var oneMoreEvent = null;\n    var eventType = type || domEvent.type;\n    var isMousedown = eventType === 'mousedown' || eventType === 'touchstart' && domEvent.touches && domEvent.touches.length === 1;\n    if (isMousedown) {\n      this._mouseDownTime = now();\n    } else if ((eventType === 'click' || eventType === 'touchend') && this._mouseDownTime) {\n      var downTime = this._mouseDownTime;\n      delete this._mouseDownTime;\n      var time = now();\n      if (time - downTime > 300) {\n        if (eventType === 'click') {\n          return;\n        }\n      } else if (eventType === 'touchend') {\n        oneMoreEvent = 'click';\n      }\n    }\n    var actual = domEvent.touches && domEvent.touches.length > 0 ? domEvent.touches[0] : domEvent.changedTouches && domEvent.changedTouches.length > 0 ? domEvent.changedTouches[0] : domEvent;\n    if (!actual) {\n      return;\n    }\n    var containerPoint = getEventContainerPoint(actual, map._containerDOM);\n    if (eventType === 'touchstart') {\n      if (map.options['preventTouch']) {\n        preventDefault(domEvent);\n      }\n    }\n    var geometryCursorStyle = null;\n    var tops = this.target.getRenderer().getTopElements();\n    var topOnlyEvent = isMousedown && domEvent.button !== 2;\n    for (var i = 0; i < tops.length; i++) {\n      if (tops[i].hitTest(containerPoint)) {\n        var cursor = tops[i].options['cursor'];\n        if (cursor) {\n          geometryCursorStyle = cursor;\n        }\n        if (topOnlyEvent || tops[i].events && tops[i].events.indexOf(eventType) >= 0) {\n          var e = {\n            target: map,\n            type: eventType,\n            domEvent: domEvent,\n            containerPoint: containerPoint\n          };\n          if (topOnlyEvent) {\n            map._setPriorityCursor(geometryCursorStyle);\n            tops[i].mousedown(e);\n            return;\n          } else {\n            tops[i].onEvent(e);\n          }\n        }\n      }\n    }\n    var layers = map._getLayers(function (layer) {\n      if (layer.identify && layer.options['geometryEvents']) {\n        return true;\n      }\n      return false;\n    });\n    map._setPriorityCursor(geometryCursorStyle);\n    if (!layers.length) {\n      return;\n    }\n    var eventTypes = MOUSEEVENT_ASSOCIATION_TABLE[eventType] || [eventType];\n    var identifyOptions = {\n      'includeInternals': true,\n      'filter': function filter(geometry) {\n        if (geometry instanceof Geometry) {\n          var eventToFire = geometry._getEventTypeToFire(domEvent);\n          if (eventType === 'mousemove') {\n            if (!geometryCursorStyle && geometry.options['cursor']) {\n              geometryCursorStyle = geometry.options['cursor'];\n            }\n            if (!geometry.listens('mousemove') && !geometry.listens('mouseover') && !geometry.listens('mouseenter')) {\n              return false;\n            }\n          } else if (!geometry.listens(eventToFire) && !geometry.listens(oneMoreEvent)) {\n            return false;\n          }\n          return true;\n        } else if (isGeo(geometry)) {\n          return true;\n        }\n        return false;\n      },\n      'count': 1,\n      'onlyVisible': map.options['onlyVisibleGeometryEvents'],\n      containerPoint: containerPoint,\n      layers: layers,\n      eventTypes: eventTypes,\n      domEvent: domEvent\n    };\n    var callback = fireGeometryEvent.bind(this);\n    if (isMoveEvent(eventType)) {\n      this._queryIdentifyTimeout = map.getRenderer().callInNextFrame(function () {\n        if (map.isInteracting()) {\n          return;\n        }\n        map.identifyAtPoint(identifyOptions, callback);\n      });\n    } else {\n      map.identifyAtPoint(identifyOptions, callback);\n    }\n    function fireGeometryEvent(geometries) {\n      var _this = this;\n      var propagation = true;\n      var getOldGeos = function getOldGeos() {\n        var geos = _this._prevOverGeos && _this._prevOverGeos.geos;\n        return geos || [];\n      };\n      var oldGeosMouseout = function oldGeosMouseout(oldTargets, geoMap) {\n        if (oldTargets === void 0) {\n          oldTargets = [];\n        }\n        if (geoMap === void 0) {\n          geoMap = {};\n        }\n        if (oldTargets && oldTargets.length > 0) {\n          for (var _i = oldTargets.length - 1; _i >= 0; _i--) {\n            var oldTarget = oldTargets[_i];\n            if (!isGeo(oldTarget)) {\n              continue;\n            }\n            var oldTargetId = getGeoId(oldTargets[_i]);\n            if (!geoMap[oldTargetId]) {\n              propagation = fireGeoEvent(oldTarget, domEvent, 'mouseout');\n            }\n          }\n        }\n      };\n      if (eventType === 'mouseout') {\n        var oldTargets = getOldGeos();\n        this._prevOverGeos = {\n          'geos': [],\n          'geomap': {}\n        };\n        oldGeosMouseout(oldTargets, {});\n      } else if (eventType === 'mousemove') {\n        var geoMap = {};\n        if (geometries.length > 0) {\n          for (var _i2 = geometries.length - 1; _i2 >= 0; _i2--) {\n            var geo = geometries[_i2];\n            if (!isGeo(geo)) {\n              continue;\n            }\n            var iid = getGeoId(geo);\n            geoMap[iid] = geo;\n            fireGeoEvent(geo, domEvent);\n            if (!this._prevOverGeos || !this._prevOverGeos.geomap[iid]) {\n              fireGeoEvent(geo, domEvent, 'mouseenter');\n            }\n            propagation = fireGeoEvent(geo, domEvent, 'mouseover');\n          }\n        }\n        map._setPriorityCursor(geometryCursorStyle);\n        var _oldTargets = getOldGeos();\n        this._prevOverGeos = {\n          'geos': geometries,\n          'geomap': geoMap\n        };\n        oldGeosMouseout(_oldTargets, geoMap);\n      } else {\n        if (!geometries || !geometries.length) {\n          return;\n        }\n        for (var _i3 = geometries.length - 1; _i3 >= 0; _i3--) {\n          if (!isGeo(geometries[_i3])) {\n            continue;\n          }\n          propagation = fireGeoEvent(geometries[_i3], domEvent);\n          if (oneMoreEvent) {\n            fireGeoEvent(geometries[_i3], domEvent, oneMoreEvent);\n          }\n          break;\n        }\n      }\n      if (propagation === false) {\n        stopPropagation(domEvent);\n      }\n    }\n  };\n  return MapGeometryEventsHandler;\n}(Handler$1);\nMap$1.mergeOptions({\n  'geometryEvents': true,\n  'onlyVisibleGeometryEvents': true\n});\nMap$1.addOnLoadHook('addHandler', 'geometryEvents', MapGeometryEventsHandler);\n\nvar wheelZoomDelta = 4.000244140625;\nvar defaultZoomRate = 1 / 100;\nvar wheelZoomRate = 1 / 450;\nvar maxScalePerFrame = 2;\nvar MapScrollWheelZoomHandler = function (_Handler) {\n  _inheritsLoose(MapScrollWheelZoomHandler, _Handler);\n  function MapScrollWheelZoomHandler(target) {\n    var _this;\n    _this = _Handler.call(this, target) || this;\n    _this._thisScrollZoom = _this._scrollZoom.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this._wheelZoomRate = wheelZoomRate;\n    _this._defaultZoomRate = defaultZoomRate;\n    _this._delta = 0;\n    return _this;\n  }\n  var _proto = MapScrollWheelZoomHandler.prototype;\n  _proto.addHooks = function addHooks() {\n    addDomEvent(this.target._containerDOM, 'wheel', this._onWheelScroll, this);\n  };\n  _proto.removeHooks = function removeHooks() {\n    removeDomEvent(this.target._containerDOM, 'wheel', this._onWheelScroll);\n  };\n  _proto._onWheelScroll = function _onWheelScroll(evt) {\n    var map = this.target;\n    if (map.options['preventWheelScroll']) {\n      preventDefault(evt);\n      stopPropagation(evt);\n    }\n    if (map._ignoreEvent(evt) || !map.options['zoomable']) {\n      return false;\n    }\n    var container = map._containerDOM;\n    var origin = map._checkZoomOrigin(getEventContainerPoint(evt, container));\n    if (map.options['seamlessZoom']) {\n      if (!this._zooming) {\n        this._trackPadSuspect = 0;\n        this._ensureTrackpad = false;\n      }\n      return this._seamless(evt, origin);\n    } else {\n      return this._interval(evt, origin);\n    }\n  };\n  _proto._seamless = function _seamless(evt, origin) {\n    var value = evt.deltaMode === window.WheelEvent.DOM_DELTA_LINE ? evt.deltaY * 60 : evt.deltaY;\n    if (value % wheelZoomDelta !== 0) {\n      if (!this._ensureTrackpad) {\n        if (Math.abs(value) < 60) {\n          this._trackPadSuspect++;\n        } else {\n          this._trackPadSuspect = 0;\n        }\n        if (this._trackPadSuspect >= 2) {\n          this._ensureTrackpad = true;\n        }\n      }\n      if (this._ensureTrackpad) {\n        value *= 14;\n      }\n    }\n    if (evt.shiftKey && value) value = value / 4;\n    this._lastWheelEvent = evt;\n    this._delta -= value;\n    if (!this._zooming && this._delta) {\n      var map = this.target;\n      this._zoomOrigin = origin;\n      map.onZoomStart(null, origin);\n    }\n    this._start();\n  };\n  _proto._start = function _start() {\n    if (!this._delta) return;\n    this._zooming = true;\n    var map = this.target;\n    if (!this._active) {\n      map.getRenderer().callInNextFrame(this._thisScrollZoom);\n      this._active = true;\n    }\n  };\n  _proto._scrollZoom = function _scrollZoom() {\n    var _this2 = this;\n    this._active = false;\n    if (!this._delta) {\n      return;\n    }\n    var zoomRate = Math.abs(this._delta) > wheelZoomDelta ? this._wheelZoomRate : this._defaultZoomRate;\n    var scale = maxScalePerFrame / (1 + Math.exp(-Math.abs(this._delta * zoomRate)));\n    if (this._delta < 0 && scale !== 0) {\n      scale = 1 / scale;\n    }\n    var map = this.target;\n    var zoom = map.getZoom();\n    var targetZoom = map.getZoomForScale(scale, zoom, true);\n    this._delta = 0;\n    map.onZooming(targetZoom, this._zoomOrigin);\n    if (this._timeout) {\n      clearTimeout(this._timeout);\n    }\n    this._timeout = setTimeout(function () {\n      _this2._zooming = false;\n      delete _this2._timeout;\n      map.onZoomEnd(map.getZoom(), _this2._zoomOrigin);\n    }, 210);\n  };\n  _proto._interval = function _interval(evt, origin) {\n    var _this3 = this;\n    var map = this.target;\n    if (this._zooming) {\n      this._requesting++;\n      return false;\n    }\n    this._requesting = 0;\n    var levelValue = (evt.deltaY ? evt.deltaY * -1 : evt.wheelDelta ? evt.wheelDelta : evt.detail) > 0 ? 1 : -1;\n    if (evt.detail) {\n      levelValue *= -1;\n    }\n    var zoom = map.getZoom();\n    var nextZoom = zoom + levelValue;\n    nextZoom = map._checkZoom(levelValue > 0 ? Math.ceil(nextZoom) : Math.floor(nextZoom));\n    if (nextZoom === zoom) {\n      return false;\n    }\n    this._zooming = true;\n    if (!this._delta) {\n      map.onZoomStart(null, origin);\n      this._origin = origin;\n      this._delta = levelValue;\n      this._startZoom = map.getZoom();\n    }\n    var duration = 90;\n    map._animateTo({\n      'zoom': nextZoom - this._delta * 1 / 2,\n      'around': this._origin\n    }, {\n      'continueOnViewChanged': true,\n      'easing': 'linear',\n      'duration': duration,\n      'wheelZoom': true\n    }, function (frame) {\n      if (frame.state.playState !== 'finished') {\n        if (frame.state.playState !== 'running') {\n          delete _this3._zooming;\n          delete _this3._requesting;\n        }\n        return;\n      }\n      if (_this3._requesting < 1 || Math.abs(nextZoom - _this3._startZoom) > 2 || nextZoom === map.getMaxZoom() || nextZoom === map.getMinZoom()) {\n        map._animateTo({\n          'zoom': nextZoom,\n          'around': _this3._origin\n        }, {\n          'continueOnViewChanged': true,\n          'duration': 100\n        }, function (frame) {\n          if (frame.state.playState !== 'running') {\n            delete _this3._zooming;\n            delete _this3._requesting;\n          }\n        });\n        delete _this3._startZoom;\n        delete _this3._origin;\n        delete _this3._delta;\n        _this3._requesting = 0;\n      } else if (!isNil(_this3._requesting)) {\n        delete _this3._zooming;\n        _this3._onWheelScroll(evt);\n      }\n    });\n    return false;\n  };\n  return MapScrollWheelZoomHandler;\n}(Handler$1);\nMap$1.mergeOptions({\n  'scrollWheelZoom': true,\n  'seamlessZoom': true\n});\nMap$1.addOnLoadHook('addHandler', 'scrollWheelZoom', MapScrollWheelZoomHandler);\n\nvar MapTouchZoomHandler = function (_Handler) {\n  _inheritsLoose(MapTouchZoomHandler, _Handler);\n  function MapTouchZoomHandler() {\n    return _Handler.apply(this, arguments) || this;\n  }\n  var _proto = MapTouchZoomHandler.prototype;\n  _proto.addHooks = function addHooks() {\n    addDomEvent(this.target.getContainer(), 'touchstart', this._onTouchStart, this);\n  };\n  _proto.removeHooks = function removeHooks() {\n    removeDomEvent(this.target.getContainer(), 'touchstart', this._onTouchStart);\n  };\n  _proto._onTouchStart = function _onTouchStart(event) {\n    var map = this.target;\n    if (!event.touches || event.touches.length < 2) {\n      return;\n    }\n    var container = map.getContainer();\n    var p1 = getEventContainerPoint(event.touches[0], container),\n      p2 = getEventContainerPoint(event.touches[1], container);\n    this.preY = p1.y;\n    this._startP1 = p1;\n    this._startP2 = p2;\n    this._startDist = p1.distanceTo(p2);\n    this._startVector = p1.sub(p2);\n    this._startZoom = map.getZoom();\n    this._startBearing = map.getBearing();\n    off(document, 'touchmove', this._onTouchMove, this);\n    off(document, 'touchend', this._onTouchEnd, this);\n    addDomEvent(document, 'touchmove', this._onTouchMove, this);\n    addDomEvent(document, 'touchend', this._onTouchEnd, this);\n    if (map.options['preventTouch']) {\n      preventDefault(event);\n    }\n    map._fireEvent('touchactstart');\n  };\n  _proto._onTouchMove = function _onTouchMove(event) {\n    var map = this.target;\n    if (!event.touches || event.touches.length < 2) {\n      return;\n    }\n    var container = map.getContainer(),\n      p1 = getEventContainerPoint(event.touches[0], container),\n      p2 = getEventContainerPoint(event.touches[1], container),\n      d1 = p1.sub(this._startP1),\n      d2 = p2.sub(this._startP2),\n      vector = p1.sub(p2),\n      scale = p1.distanceTo(p2) / this._startDist,\n      bearing = vector.angleWith(this._startVector) * 180 / Math.PI,\n      preY = this.preY || p1.y,\n      pitch = (preY - p1.y) * 0.4;\n    this.preY = p1.y;\n    var param = {\n      'domEvent': event,\n      'mousePos': [p1, p2]\n    };\n    if (!this.mode) {\n      if (map.options['touchRotate'] && Math.abs(bearing) > 8) {\n        this.mode = map.options['touchZoomRotate'] ? 'rotate_zoom' : 'rotate';\n      } else if (map.options['touchPitch'] && d1.y * d2.y > 0 && Math.abs(d1.y) > 10 && Math.abs(d2.y) > 10) {\n        this.mode = 'pitch';\n      } else if (map.options['zoomable'] && map.options['touchZoom'] && Math.abs(1 - scale) > 0.15) {\n        this.mode = map.options['touchZoomRotate'] && map.options['touchRotate'] ? 'rotate_zoom' : 'zoom';\n      }\n      this._startTouching(param);\n    }\n    if (this.mode === 'zoom' || this.mode === 'rotate_zoom') {\n      this._scale = scale;\n      var res = map._getResolution(this._startZoom) / scale;\n      var zoom = map.getZoomFromRes(res);\n      map.onZooming(zoom, this._Origin);\n    }\n    if (this.mode === 'rotate' || this.mode === 'rotate_zoom') {\n      map._setBearing(this._startBearing + bearing);\n      map.onDragRotating(param);\n    } else if (this.mode === 'pitch') {\n      map._setPitch(map.getPitch() + pitch);\n      map.onDragRotating(param);\n    }\n    map._fireEvent('touchactinging');\n  };\n  _proto._startTouching = function _startTouching(param) {\n    var map = this.target;\n    if (this.mode === 'zoom' || this.mode === 'rotate_zoom') {\n      var size = map.getSize();\n      this._Origin = new Point(size['width'] / 2, size['height'] / 2);\n      map.onZoomStart(null, this._Origin);\n    }\n    if (this.mode === 'rotate' || this.mode === 'pitch' || this.mode === 'rotate_zoom') {\n      map.onDragRotateStart(param);\n    }\n  };\n  _proto._onTouchEnd = function _onTouchEnd(event) {\n    delete this.preY;\n    var map = this.target;\n    off(document, 'touchmove', this._onTouchMove, this);\n    off(document, 'touchend', this._onTouchEnd, this);\n    if (this.mode === 'zoom' || this.mode === 'rotate_zoom') {\n      var scale = this._scale;\n      var res = map._getResolution(this._startZoom) / scale;\n      var zoom = map.getZoomFromRes(res);\n      map.onZoomEnd(zoom, this._Origin);\n    }\n    if (this.mode === 'pitch' || this.mode === 'rotate' || this.mode === 'rotate_zoom') {\n      map.onDragRotateEnd({\n        'domEvent': event\n      });\n    }\n    delete this.mode;\n    map._fireEvent('touchactend');\n  };\n  return MapTouchZoomHandler;\n}(Handler$1);\nMap$1.mergeOptions({\n  'touchGesture': true,\n  'touchZoom': true,\n  'touchPitch': true,\n  'touchRotate': true,\n  'touchZoomRotate': false\n});\nMap$1.addOnLoadHook('addHandler', 'touchGesture', MapTouchZoomHandler);\n\nvar KEY = '__anim_player';\nvar Easing = {\n  outExpo: function outExpo(x) {\n    return x === 1 ? 1 : 1 - Math.pow(2, -10 * x);\n  },\n  outQuint: function outQuint(x) {\n    return 1 - Math.pow(1 - x, 5);\n  },\n  in: function _in(t) {\n    return Math.pow(t, 2);\n  },\n  out: function out(t) {\n    return 1 - Easing.in(1 - t);\n  },\n  inAndOut: function inAndOut(t) {\n    return 3 * t * t - 2 * t * t * t;\n  },\n  linear: function linear(t) {\n    return t;\n  },\n  upAndDown: function upAndDown(t) {\n    if (t < 0.5) {\n      return Easing.inAndOut(2 * t);\n    } else {\n      return 1 - Easing.inAndOut(2 * (t - 0.5));\n    }\n  }\n};\nvar Frame = function () {\n  function Frame(state, styles) {\n    this.state = state;\n    this.styles = styles;\n  }\n  _createClass(Frame, [{\n    key: \"playState\",\n    get: function get() {\n      return this.state.playState;\n    }\n  }, {\n    key: \"symbol\",\n    get: function get() {\n      return this.styles.symbol;\n    }\n  }]);\n  return Frame;\n}();\nvar Player = function Player(animation, options, onFrame, target) {\n  this._animation = animation;\n  this.options = options;\n  this._onFrame = onFrame;\n  this.playState = 'idle';\n  this.ready = true;\n  this.finished = false;\n  this.target = target;\n};\nvar Animation = {\n  speed: {\n    'slow': 2000,\n    'normal': 1000,\n    'fast': 500\n  },\n  _resolveStyles: function _resolveStyles(styles) {\n    if (!styles) {\n      return null;\n    }\n    function resolveChild(child) {\n      if (!Array.isArray(child)) {\n        return Animation._resolveStyles(child);\n      }\n      var start = [],\n        d = [],\n        dest = [];\n      for (var i = 0; i < child.length; i++) {\n        var _styles = Animation._resolveStyles(child[i]);\n        if (_styles) {\n          start.push(_styles[0]);\n          d.push(_styles[1]);\n          dest.push(_styles[2]);\n        }\n      }\n      if (!start.length) {\n        return null;\n      } else {\n        return [start, d, dest];\n      }\n    }\n    function resolveVal(val) {\n      var values = val;\n      var clazz;\n      if (!Array.isArray(val)) {\n        if (isNumber(val)) {\n          values = [0, val];\n        } else if (val instanceof Point || val instanceof Coordinate) {\n          clazz = val.constructor;\n          values = [new clazz(0, 0), val];\n        } else {\n          values = [val, val];\n        }\n      }\n      var v1 = values[0],\n        v2 = values[1];\n      if (isNumber(v1) && isNumber(v2)) {\n        if (v1 === v2) {\n          return null;\n        }\n        return [v1, v2 - v1, v2];\n      } else if (Array.isArray(v1) && isNumber(v1[0]) || v1 instanceof Coordinate || v1 instanceof Point) {\n        if (Array.isArray(v1)) {\n          v1 = new Coordinate(v1);\n          v2 = new Coordinate(v2);\n        } else {\n          clazz = v1.constructor;\n          v1 = new clazz(v1);\n          v2 = new clazz(v2);\n        }\n        if (v1.equals(v2)) {\n          return null;\n        }\n        return [v1, v2.sub(v1), v2];\n      } else {\n        return [v1, v2, v2];\n      }\n    }\n    function isChild(val) {\n      if (!Array.isArray(val) && val.constructor === Object) {\n        return true;\n      } else if (Array.isArray(val) && val[0].constructor === Object) {\n        return true;\n      }\n      return false;\n    }\n    var d = {},\n      start = {},\n      dest = {};\n    for (var p in styles) {\n      if (styles.hasOwnProperty(p)) {\n        var values = styles[p];\n        if (!values) {\n          continue;\n        } else if (Array.isArray(values)) {\n          if (isNil(values[0]) || isNil(values[1])) {\n            continue;\n          }\n        }\n        var childStyles = void 0;\n        if (isChild(values)) {\n          childStyles = resolveChild(values);\n        } else {\n          childStyles = resolveVal(values);\n        }\n        if (childStyles) {\n          start[p] = childStyles[0];\n          d[p] = childStyles[1];\n          dest[p] = childStyles[2];\n        }\n      }\n    }\n    return [start, d, dest];\n  },\n  framing: function framing(styles, options) {\n    if (!options) {\n      options = {};\n    }\n    var easing = options['easing'] ? Easing[options['easing']] : Easing.linear;\n    if (!easing) {\n      easing = Easing.linear;\n    }\n    var dStyles, startStyles, destStyles;\n    styles = Animation._resolveStyles(styles);\n    if (styles) {\n      startStyles = styles[0];\n      dStyles = styles[1];\n      destStyles = styles[2];\n    }\n    var deltaStyles = function deltaStyles(delta, _startStyles, _dStyles) {\n      if (!_startStyles || !_dStyles) {\n        return null;\n      }\n      var result = {};\n      for (var p in _dStyles) {\n        if (_dStyles.hasOwnProperty(p)) {\n          if (_startStyles[p] === destStyles[p]) {\n            result[p] = _startStyles[p];\n            continue;\n          }\n          var s = _startStyles[p],\n            d = _dStyles[p];\n          if (isNumber(d)) {\n            result[p] = s + delta * d;\n          } else if (Array.isArray(d)) {\n            var children = [];\n            for (var i = 0; i < d.length; i++) {\n              children.push(deltaStyles(delta, s[i], d[i]));\n            }\n            result[p] = children;\n          } else {\n            var clazz = d.constructor;\n            if (clazz === Object) {\n              result[p] = deltaStyles(delta, s, d);\n            } else if (s instanceof Point || s instanceof Coordinate) {\n              result[p] = s.add(d.multi(delta));\n            } else {\n              result[p] = d;\n            }\n          }\n        }\n      }\n      return result;\n    };\n    return function (elapsed, duration) {\n      var state, d;\n      if (elapsed < 0) {\n        state = {\n          'playState': 'idle',\n          'delta': 0\n        };\n        d = startStyles;\n      } else if (elapsed < duration) {\n        var delta = easing(elapsed / duration);\n        state = {\n          'playState': 'running',\n          'delta': delta\n        };\n        d = deltaStyles(delta, startStyles, dStyles);\n      } else {\n        state = {\n          'playState': 'finished',\n          'delta': 1\n        };\n        d = destStyles;\n      }\n      state['startStyles'] = startStyles;\n      state['destStyles'] = destStyles;\n      state['progress'] = elapsed;\n      state['remainingMs'] = duration - elapsed;\n      return new Frame(state, d);\n    };\n  },\n  _requestAnimFrame: function _requestAnimFrame(fn) {\n    if (!this._frameQueue) {\n      this._frameQueue = [];\n    }\n    this._frameQueue.push(fn);\n    this._a();\n  },\n  _a: function _a() {\n    if (!this._animationFrameId) {\n      this._animationFrameId = requestAnimFrame(Animation._frameFn);\n    }\n  },\n  _run: function _run() {\n    if (this._frameQueue.length) {\n      var running = this._frameQueue;\n      this._frameQueue = [];\n      for (var i = 0, len = running.length; i < len; i++) {\n        running[i]();\n      }\n      if (this._frameQueue.length) {\n        this._animationFrameId = requestAnimFrame(Animation._frameFn);\n      } else {\n        delete this._animationFrameId;\n      }\n    }\n  },\n  animate: function animate(styles, options, step, target) {\n    if (!options) {\n      options = {};\n    }\n    var animation = Animation.framing(styles, options);\n    var player = new Player(animation, options, step, target);\n    return player;\n  }\n};\nAnimation._frameFn = Animation._run.bind(Animation);\nextend(Player.prototype, {\n  _prepare: function _prepare() {\n    var options = this.options;\n    var duration = options['speed'] || options['duration'];\n    if (isString(duration)) {\n      duration = Animation.speed[duration];\n      if (!duration) {\n        duration = +duration;\n      }\n    }\n    if (!duration) {\n      duration = Animation.speed['normal'];\n    }\n    this.duration = duration;\n    this._framer = options['framer'] || Animation._requestAnimFrame.bind(Animation);\n  },\n  play: function play() {\n    if (this.playState !== 'idle' && this.playState !== 'paused' || this.target && this.target[KEY]) {\n      return this;\n    }\n    if (this.target) {\n      this.target[KEY] = 1;\n    }\n    if (this.playState === 'idle') {\n      this.currentTime = 0;\n      this._prepare();\n    }\n    var t = now();\n    if (!this.startTime) {\n      var options = this.options;\n      this.startTime = options['startTime'] ? options['startTime'] : t;\n    }\n    this._playStartTime = Math.max(t, this.startTime);\n    if (this.playState === 'paused') {\n      this._playStartTime -= this.currentTime;\n    }\n    this.playState = 'running';\n    this._run();\n    return this;\n  },\n  pause: function pause() {\n    if (this.playState === 'paused') {\n      return this;\n    }\n    this.playState = 'paused';\n    this._run();\n    return this;\n  },\n  cancel: function cancel() {\n    if (this.playState === 'idle') {\n      return this;\n    }\n    this.playState = 'idle';\n    this.finished = false;\n    this._run();\n    return this;\n  },\n  finish: function finish() {\n    if (this.playState === 'finished') {\n      return this;\n    }\n    this.playState = 'finished';\n    this.finished = true;\n    this._run();\n    return this;\n  },\n  reverse: function reverse() {},\n  _run: function _run() {\n    var _this = this;\n    var onFrame = this._onFrame;\n    var t = now();\n    var elapsed = t - this._playStartTime;\n    if (this.options['repeat'] && elapsed >= this.duration) {\n      this._playStartTime = t;\n      elapsed = 0;\n    }\n    if (this.playState !== 'running') {\n      if (this.target) {\n        delete this.target[KEY];\n      }\n      if (onFrame) {\n        if (this.playState === 'finished') {\n          elapsed = this.duration;\n        } else if (this.playState === 'idle') {\n          elapsed = 0;\n        }\n        var _frame = this._animation(elapsed, this.duration);\n        _frame.state.playState = this.playState;\n        onFrame(_frame);\n      }\n      return;\n    }\n    var frame = this._animation(elapsed, this.duration);\n    this.playState = frame.state['playState'];\n    if (this.playState !== 'running' && this.target) {\n      delete this.target[KEY];\n    }\n    if (this.playState === 'idle') {\n      if (this.startTime > t) {\n        setTimeout(this._run.bind(this), this.startTime - t);\n      }\n    } else if (this.playState === 'running') {\n      this._framer(function () {\n        if (_this.playState !== 'running') {\n          return;\n        }\n        _this.currentTime = elapsed;\n        if (onFrame) {\n          onFrame(frame);\n        }\n        _this._run();\n      });\n    } else if (this.playState === 'finished') {\n      this.finished = true;\n      if (onFrame) {\n        onFrame(frame);\n      }\n    }\n  }\n});\nvar animate = Animation.animate;\n\nvar Animation$1 = /*#__PURE__*/Object.freeze({\n  Animation: Animation,\n  Easing: Easing,\n  Player: Player,\n  Frame: Frame,\n  animate: animate\n});\n\nvar options$3 = {\n  'smoothness': 0,\n  'enableClip': true,\n  'enableSimplify': true,\n  'simplifyTolerance': 2,\n  'symbol': {\n    'lineColor': '#000',\n    'lineWidth': 2,\n    'lineOpacity': 1,\n    'polygonFill': '#fff',\n    'polygonOpacity': 1,\n    'opacity': 1\n  }\n};\nvar Path = function (_Geometry) {\n  _inheritsLoose(Path, _Geometry);\n  function Path() {\n    return _Geometry.apply(this, arguments) || this;\n  }\n  var _proto = Path.prototype;\n  _proto.animateShow = function animateShow(options, cb) {\n    var _this = this;\n    if (options === void 0) {\n      options = {};\n    }\n    if (this._showPlayer) {\n      this._showPlayer.finish();\n    }\n    if (isFunction(options)) {\n      options = {};\n      cb = options;\n    }\n    var coordinates = this.getCoordinates();\n    if (coordinates.length === 0) {\n      return this;\n    }\n    this._animIdx = 0;\n    this._animLenSoFar = 0;\n    this.show();\n    var isPolygon = !!this.getShell;\n    var animCoords = isPolygon ? this.getShell().concat(this.getShell()[0]) : coordinates;\n    var projection = this._getProjection();\n    var prjAnimCoords = projection.projectCoords(animCoords, this.options['antiMeridian']);\n    this._prjAniShowCenter = this._getPrjExtent().getCenter();\n    this._aniShowCenter = projection.unproject(this._prjAniShowCenter);\n    var duration = options['duration'] || 1000,\n      easing = options['easing'] || 'out';\n    this.setCoordinates([]);\n    var length = 0;\n    if (prjAnimCoords.length) {\n      prjAnimCoords[0]._distance = 0;\n    }\n    for (var i = 1; i < prjAnimCoords.length; i++) {\n      var distance = prjAnimCoords[i].distanceTo(prjAnimCoords[i - 1]);\n      prjAnimCoords[i]._distance = distance;\n      length += distance;\n    }\n    this._tempCoord = new Coordinate(0, 0);\n    this._tempPrjCoord = new Point(0, 0);\n    var player = this._showPlayer = Animation.animate({\n      't': duration\n    }, {\n      'duration': duration,\n      'easing': easing\n    }, function (frame) {\n      if (!_this.getMap()) {\n        if (player.playState !== 'finished') {\n          player.finish();\n          if (cb) {\n            var _coordinates = _this.getCoordinates();\n            cb(frame, _coordinates[_coordinates.length - 1]);\n          }\n        }\n        return;\n      }\n      var currentCoord = _this._drawAnimShowFrame(frame.styles.t, duration, length, animCoords, prjAnimCoords);\n      if (frame.state.playState === 'finished') {\n        delete _this._showPlayer;\n        delete _this._aniShowCenter;\n        delete _this._prjAniShowCenter;\n        delete _this._animIdx;\n        delete _this._animLenSoFar;\n        delete _this._animTailRatio;\n        delete _this._tempCoord;\n        delete _this._tempPrjCoord;\n        _this.setCoordinates(coordinates);\n      }\n      if (cb) {\n        cb(frame, currentCoord);\n      }\n    }, this);\n    player.play();\n    return player;\n  };\n  _proto._drawAnimShowFrame = function _drawAnimShowFrame(t, duration, length, coordinates, prjCoords) {\n    if (t === 0) {\n      return coordinates[0];\n    }\n    var targetLength = t / duration * length;\n    var segLen = 0;\n    var i, l;\n    for (i = this._animIdx + 1, l = prjCoords.length; i < l; i++) {\n      segLen = prjCoords[i]._distance;\n      if (this._animLenSoFar + segLen > targetLength) {\n        break;\n      }\n      this._animLenSoFar += segLen;\n    }\n    this._animIdx = i - 1;\n    if (this._animIdx >= l - 1) {\n      this.setCoordinates(coordinates);\n      return coordinates[coordinates.length - 1];\n    }\n    var idx = this._animIdx;\n    var p1 = prjCoords[idx],\n      p2 = prjCoords[idx + 1],\n      span = targetLength - this._animLenSoFar,\n      r = span / segLen;\n    this._animTailRatio = r;\n    var x = p1.x + (p2.x - p1.x) * r,\n      y = p1.y + (p2.y - p1.y) * r;\n    this._tempPrjCoord.x = x;\n    this._tempPrjCoord.y = y;\n    var lastCoord = this._tempPrjCoord;\n    var c1 = coordinates[idx],\n      c2 = coordinates[idx + 1];\n    var cx = c1.x + (c2.x - c1.x) * r,\n      cy = c1.y + (c2.y - c1.y) * r;\n    this._tempCoord.x = cx;\n    this._tempCoord.y = cy;\n    var targetCoord = this._tempCoord;\n    var isPolygon = !!this.getShell;\n    if (!isPolygon && this.options['smoothness'] > 0) {\n      var animCoords = [],\n        prjAnimCoords = [];\n      for (var _i = 0; _i <= this._animIdx; _i++) {\n        animCoords.push(coordinates[_i]);\n        prjAnimCoords.push(prjCoords[_i]);\n      }\n      animCoords.push(targetCoord, targetCoord);\n      prjAnimCoords.push(lastCoord, lastCoord);\n      this.setCoordinates(animCoords);\n      this._setPrjCoordinates(prjAnimCoords);\n    } else {\n      var _animCoords = coordinates.slice(0, this._animIdx + 1);\n      _animCoords.push(targetCoord);\n      var _prjAnimCoords = prjCoords.slice(0, this._animIdx + 1);\n      _prjAnimCoords.push(lastCoord);\n      if (isPolygon) {\n        this.setCoordinates([this._aniShowCenter].concat(_animCoords));\n        this._setPrjCoordinates([this._prjAniShowCenter].concat(_prjAnimCoords));\n      } else {\n        this.setCoordinates(_animCoords);\n        this._setPrjCoordinates(_prjAnimCoords);\n      }\n    }\n    return targetCoord;\n  };\n  _proto._getCenterInExtent = function _getCenterInExtent(extent, coordinates, clipFn) {\n    var meExtent = this.getExtent();\n    if (!extent.intersects(meExtent)) {\n      return null;\n    }\n    var clipped = clipFn(coordinates, extent);\n    if (clipped.length === 0) {\n      return null;\n    }\n    var sumx = 0,\n      sumy = 0,\n      counter = 0;\n    clipped.forEach(function (part) {\n      if (Array.isArray(part)) {\n        part.forEach(function (c) {\n          if (c.point) {\n            c = c.point;\n          }\n          sumx += c.x;\n          sumy += c.y;\n          counter++;\n        });\n      } else {\n        if (part.point) {\n          part = part.point;\n        }\n        sumx += part.x;\n        sumy += part.y;\n        counter++;\n      }\n    });\n    var c = new Coordinate(sumx, sumy)._multi(1 / counter);\n    c.count = counter;\n    return c;\n  };\n  _proto._getPath2DPoints = function _getPath2DPoints(prjCoords, disableSimplify, res) {\n    if (!isArrayHasData(prjCoords)) {\n      return [];\n    }\n    var map = this.getMap(),\n      isSimplify = !disableSimplify && this._shouldSimplify(),\n      tolerance = this.options['simplifyTolerance'] * map._getResolution(),\n      isMulti = Array.isArray(prjCoords[0]);\n    delete this._simplified;\n    if (isSimplify && !isMulti) {\n      var count = prjCoords.length;\n      prjCoords = simplify(prjCoords, tolerance, false);\n      this._simplified = prjCoords.length < count;\n    }\n    if (!res) {\n      res = map._getResolution();\n    }\n    if (!Array.isArray(prjCoords)) {\n      return map._prjToPointAtRes(prjCoords, res);\n    } else {\n      var resultPoints = [];\n      var glPointKey = '_glPt';\n      if (!Array.isArray(prjCoords[0])) {\n        resultPoints = getPointsResultPts(prjCoords, glPointKey);\n        return map._prjsToPointsAtRes(prjCoords, res, resultPoints);\n      }\n      var pts = [];\n      for (var i = 0, len = prjCoords.length; i < len; i++) {\n        var prjCoord = prjCoords[i];\n        resultPoints = getPointsResultPts(prjCoord, glPointKey);\n        var pt = map._prjsToPointsAtRes(prjCoord, res, resultPoints);\n        pts.push(pt);\n      }\n      return pts;\n    }\n  };\n  _proto._shouldSimplify = function _shouldSimplify() {\n    var layer = this.getLayer();\n    var hasAltitude = layer.options['enableAltitude'];\n    return layer && layer.options['enableSimplify'] && !hasAltitude && this.options['enableSimplify'] && !this._showPlayer;\n  };\n  _proto._setPrjCoordinates = function _setPrjCoordinates(prjPoints) {\n    this._prjCoords = prjPoints;\n    this.onShapeChanged();\n  };\n  _proto._getPrjCoordinates = function _getPrjCoordinates() {\n    this._verifyProjection();\n    if (!this._prjCoords && this._getProjection()) {\n      this._prjCoords = this._projectCoords(this._coordinates);\n    }\n    return this._prjCoords;\n  };\n  _proto._updateCache = function _updateCache() {\n    this._clearCache();\n    var projection = this._getProjection();\n    if (!projection) {\n      return;\n    }\n    if (this._prjCoords) {\n      this._coordinates = this._unprojectCoords(this._getPrjCoordinates());\n    }\n  };\n  _proto._clearProjection = function _clearProjection() {\n    this._prjCoords = null;\n    _Geometry.prototype._clearProjection.call(this);\n  };\n  _proto._projectCoords = function _projectCoords(points) {\n    var projection = this._getProjection();\n    if (projection) {\n      return projection.projectCoords(points, this.options['antiMeridian']);\n    }\n    return [];\n  };\n  _proto._unprojectCoords = function _unprojectCoords(prjPoints) {\n    var projection = this._getProjection();\n    if (projection) {\n      return projection.unprojectCoords(prjPoints);\n    }\n    return [];\n  };\n  _proto._computeCenter = function _computeCenter() {\n    var ring = this._coordinates;\n    if (!isArrayHasData(ring)) {\n      return null;\n    }\n    var sumx = 0,\n      sumy = 0,\n      counter = 0;\n    var size = ring.length;\n    for (var i = 0; i < size; i++) {\n      if (ring[i]) {\n        if (isNumber(ring[i].x) && isNumber(ring[i].y)) {\n          sumx += ring[i].x;\n          sumy += ring[i].y;\n          counter++;\n        }\n      }\n    }\n    return new Coordinate(sumx / counter, sumy / counter);\n  };\n  _proto._computeExtent = function _computeExtent() {\n    var shell = this._coordinates;\n    if (!isArrayHasData(shell)) {\n      return null;\n    }\n    var rings = [shell];\n    if (this.hasHoles && this.hasHoles()) {\n      rings.push.apply(rings, this.getHoles());\n    }\n    return this._coords2Extent(rings, this._getProjection());\n  };\n  _proto._computePrjExtent = function _computePrjExtent() {\n    var coords = [this._getPrjCoordinates()];\n    if (this.hasHoles && this.hasHoles()) {\n      coords.push.apply(coords, this._getPrjHoles());\n    }\n    return this._coords2Extent(coords);\n  };\n  _proto._get2DLength = function _get2DLength() {\n    var vertexes = this._getPath2DPoints(this._getPrjCoordinates(), true);\n    var len = 0;\n    for (var i = 1, l = vertexes.length; i < l; i++) {\n      len += vertexes[i].distanceTo(vertexes[i - 1]);\n    }\n    return len;\n  };\n  _proto._hitTestTolerance = function _hitTestTolerance() {\n    var symbol = this._getInternalSymbol();\n    var w;\n    if (Array.isArray(symbol)) {\n      w = 0;\n      for (var i = 0; i < symbol.length; i++) {\n        if (isNumber(symbol[i]['lineWidth'])) {\n          if (symbol[i]['lineWidth'] > w) {\n            w = symbol[i]['lineWidth'];\n          }\n        }\n      }\n    } else {\n      w = symbol['lineWidth'];\n    }\n    return _Geometry.prototype._hitTestTolerance.call(this) + (isNumber(w) ? w / 2 : 1.5);\n  };\n  _proto._coords2Extent = function _coords2Extent(coords, proj) {\n    if (!coords || coords.length === 0 || Array.isArray(coords[0]) && coords[0].length === 0) {\n      return null;\n    }\n    var result = new Extent(proj);\n    for (var i = 0, l = coords.length; i < l; i++) {\n      for (var j = 0, ll = coords[i].length; j < ll; j++) {\n        result._combine(coords[i][j]);\n      }\n    }\n    return result;\n  };\n  return Path;\n}(Geometry);\nPath.mergeOptions(options$3);\n\nvar JSON_TYPE = 'Polygon';\nvar Polygon = function (_Path) {\n  _inheritsLoose(Polygon, _Path);\n  function Polygon(coordinates, opts) {\n    var _this;\n    _this = _Path.call(this, opts) || this;\n    _this.type = 'Polygon';\n    if (coordinates) {\n      _this.setCoordinates(coordinates);\n    }\n    return _this;\n  }\n  var _proto = Polygon.prototype;\n  _proto.getOutline = function getOutline() {\n    var painter = this._getPainter();\n    if (!painter) {\n      return null;\n    }\n    var extent = this.getExtent();\n    return new Polygon(extent.toArray(), {\n      symbol: {\n        'lineWidth': 1,\n        'lineColor': '6b707b'\n      }\n    });\n  };\n  _proto.setCoordinates = function setCoordinates(coordinates) {\n    if (!coordinates) {\n      this._coordinates = null;\n      this._holes = null;\n      this._projectRings();\n      return this;\n    }\n    var rings = Coordinate.toCoordinates(coordinates);\n    var len = rings.length;\n    if (!Array.isArray(rings[0])) {\n      this._coordinates = this._trimRing(rings);\n    } else {\n      this._coordinates = this._trimRing(rings[0]);\n      if (len > 1) {\n        var holes = [];\n        for (var i = 1; i < len; i++) {\n          if (!rings[i]) {\n            continue;\n          }\n          holes.push(this._trimRing(rings[i]));\n        }\n        this._holes = holes;\n      } else {\n        this._holes = null;\n      }\n    }\n    this._projectRings();\n    return this;\n  };\n  _proto.getCoordinates = function getCoordinates() {\n    if (!this._coordinates) {\n      return [];\n    }\n    var holes = this.getHoles();\n    var rings = [this._copyAndCloseRing(this._coordinates)];\n    for (var i = 0, l = holes.length; i < l; i++) {\n      rings.push(this._copyAndCloseRing(holes[i]));\n    }\n    return rings;\n  };\n  _proto.getCenterInExtent = function getCenterInExtent(extent) {\n    return this._getCenterInExtent(extent, this.getShell(), clipPolygon);\n  };\n  _proto.getShell = function getShell() {\n    return this._coordinates || [];\n  };\n  _proto.getHoles = function getHoles() {\n    return this._holes || [];\n  };\n  _proto.hasHoles = function hasHoles() {\n    return this.getHoles().length > 0;\n  };\n  _proto._projectRings = function _projectRings() {\n    if (!this.getMap()) {\n      this.onShapeChanged();\n      return;\n    }\n    this._prjCoords = this._projectCoords(this._coordinates);\n    this._prjHoles = this._projectCoords(this._holes);\n    this.onShapeChanged();\n  };\n  _proto._setPrjCoordinates = function _setPrjCoordinates(prjCoords) {\n    this._prjCoords = prjCoords;\n    this.onShapeChanged();\n  };\n  _proto._cleanRing = function _cleanRing(ring) {\n    for (var i = ring.length - 1; i >= 0; i--) {\n      if (!ring[i]) {\n        ring.splice(i, 1);\n      }\n    }\n  };\n  _proto._checkRing = function _checkRing(ring) {\n    this._cleanRing(ring);\n    if (!ring || !isArrayHasData(ring)) {\n      return false;\n    }\n    var lastPoint = ring[ring.length - 1];\n    var isClose = true;\n    if (ring[0].x !== lastPoint.x || ring[0].y !== lastPoint.y) {\n      isClose = false;\n    }\n    return isClose;\n  };\n  _proto._trimRing = function _trimRing(ring) {\n    var isClose = this._checkRing(ring);\n    if (isArrayHasData(ring) && isClose) {\n      ring.splice(ring.length - 1, 1);\n    }\n    return ring;\n  };\n  _proto._copyAndCloseRing = function _copyAndCloseRing(ring) {\n    ring = ring.slice(0);\n    var isClose = this._checkRing(ring);\n    if (isArrayHasData(ring) && !isClose) {\n      ring.push(ring[0].copy());\n      return ring;\n    } else {\n      return ring;\n    }\n  };\n  _proto._getPrjShell = function _getPrjShell() {\n    if (this.getJSONType() === JSON_TYPE) {\n      return this._getPrjCoordinates();\n    }\n    this._verifyProjection();\n    if (this._getProjection() && !this._prjShell) {\n      this._prjShell = this._projectCoords(this.getShell());\n    }\n    return this._prjShell;\n  };\n  _proto._getPrjHoles = function _getPrjHoles() {\n    var projection = this._getProjection();\n    this._verifyProjection();\n    if (projection && !this._prjHoles) {\n      this._prjHoles = this._projectCoords(this.getHoles());\n    }\n    return this._prjHoles;\n  };\n  _proto._computeGeodesicLength = function _computeGeodesicLength(measurer) {\n    var rings = this.getCoordinates();\n    if (!isArrayHasData(rings)) {\n      return 0;\n    }\n    var result = 0;\n    for (var i = 0, len = rings.length; i < len; i++) {\n      result += measurer.measureLength(rings[i]);\n    }\n    return result;\n  };\n  _proto._computeGeodesicArea = function _computeGeodesicArea(measurer) {\n    var rings = this.getCoordinates();\n    if (!isArrayHasData(rings)) {\n      return 0;\n    }\n    var result = measurer.measureArea(rings[0]);\n    for (var i = 1, len = rings.length; i < len; i++) {\n      result -= measurer.measureArea(rings[i]);\n    }\n    return result;\n  };\n  _proto._updateCache = function _updateCache() {\n    _Path.prototype._updateCache.call(this);\n    if (this._prjHoles) {\n      this._holes = this._unprojectCoords(this._getPrjHoles());\n    }\n  };\n  _proto._clearCache = function _clearCache() {\n    delete this._prjShell;\n    return _Path.prototype._clearCache.call(this);\n  };\n  _proto._clearProjection = function _clearProjection() {\n    if (this._prjHoles) {\n      this._prjHoles = null;\n    }\n    if (this._prjShell) {\n      this._prjShell = null;\n    }\n    _Path.prototype._clearProjection.call(this);\n  };\n  return Polygon;\n}(Path);\nPolygon.registerJSONType(JSON_TYPE);\n\nfunction CenterMixin (Base) {\n  return function (_Base) {\n    _inheritsLoose(_class, _Base);\n    function _class() {\n      return _Base.apply(this, arguments) || this;\n    }\n    var _proto = _class.prototype;\n    _proto.getCoordinates = function getCoordinates() {\n      return this._coordinates;\n    };\n    _proto.setCoordinates = function setCoordinates(coordinates) {\n      var center = coordinates instanceof Coordinate ? coordinates : new Coordinate(coordinates);\n      this._coordinates = center;\n      if (!this.getMap()) {\n        this._dirtyCoords = true;\n        this.onPositionChanged();\n        return this;\n      }\n      var projection = this._getProjection();\n      this._setPrjCoordinates(projection.project(this._coordinates));\n      return this;\n    };\n    _proto._getCenter2DPoint = function _getCenter2DPoint(res) {\n      var map = this.getMap();\n      if (!map) {\n        return null;\n      }\n      var pcenter = this._getPrjCoordinates();\n      if (!pcenter) {\n        return null;\n      }\n      if (!res) {\n        res = map._getResolution();\n      }\n      return map._prjToPointAtRes(pcenter, res);\n    };\n    _proto._getPrjCoordinates = function _getPrjCoordinates() {\n      var projection = this._getProjection();\n      this._verifyProjection();\n      if (!this._pcenter && projection) {\n        if (this._coordinates) {\n          this._pcenter = projection.project(this._coordinates);\n        }\n      }\n      return this._pcenter;\n    };\n    _proto._setPrjCoordinates = function _setPrjCoordinates(pcenter) {\n      this._pcenter = pcenter;\n      this.onPositionChanged();\n    };\n    _proto._updateCache = function _updateCache() {\n      this._clearCache();\n      var projection = this._getProjection();\n      if (this._pcenter && projection) {\n        this._coordinates = projection.unproject(this._pcenter);\n      }\n    };\n    _proto._clearProjection = function _clearProjection() {\n      this._pcenter = null;\n      _Base.prototype._clearProjection.call(this);\n    };\n    _proto._computeCenter = function _computeCenter() {\n      return this._coordinates ? this._coordinates.copy() : null;\n    };\n    return _class;\n  }(Base);\n}\n\nvar TEMP_EXTENT$5 = new PointExtent();\nvar options$4 = {\n  'symbol': {\n    'markerType': 'path',\n    'markerPath': [{\n      'path': 'M8 23l0 0 0 0 0 0 0 0 0 0c-4,-5 -8,-10 -8,-14 0,-5 4,-9 8,-9l0 0 0 0c4,0 8,4 8,9 0,4 -4,9 -8,14z M3,9 a5,5 0,1,0,0,-0.9Z',\n      'fill': '#DE3333'\n    }],\n    'markerPathWidth': 16,\n    'markerPathHeight': 23,\n    'markerWidth': 24,\n    'markerHeight': 34\n  },\n  'hitTestForEvent': false,\n  'collision': true\n};\nvar Marker = function (_CenterMixin) {\n  _inheritsLoose(Marker, _CenterMixin);\n  function Marker(coordinates, opts) {\n    var _this;\n    _this = _CenterMixin.call(this, opts) || this;\n    _this.type = 'Point';\n    if (coordinates) {\n      _this.setCoordinates(coordinates);\n    }\n    return _this;\n  }\n  var _proto = Marker.prototype;\n  _proto.getOutline = function getOutline() {\n    var coord = this.getCoordinates();\n    var extent = this.getContainerExtent();\n    var anchor = this.getMap().coordToContainerPoint(coord);\n    return new Marker(coord, {\n      'symbol': {\n        'markerType': 'square',\n        'markerWidth': extent.getWidth(),\n        'markerHeight': extent.getHeight(),\n        'markerLineWidth': 1,\n        'markerLineColor': '6b707b',\n        'markerFill': 'rgba(0, 0, 0, 0)',\n        'markerDx': extent.xmin - (anchor.x - extent.getWidth() / 2),\n        'markerDy': extent.ymin - (anchor.y - extent.getHeight() / 2)\n      }\n    });\n  };\n  _proto.setSymbol = function setSymbol() {\n    var _CenterMixin$prototyp;\n    delete this._fixedExtent;\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    return (_CenterMixin$prototyp = _CenterMixin.prototype.setSymbol).call.apply(_CenterMixin$prototyp, [this].concat(args));\n  };\n  _proto._getSizeSymbol = function _getSizeSymbol(symbol) {\n    var s = {};\n    var dynamic = false;\n    var dynamicSize = false;\n    for (var i = 0; i < DYNAMIC_SYMBOL_PROPS.length; i++) {\n      var v = symbol[DYNAMIC_SYMBOL_PROPS[i]];\n      if (isNil(v)) {\n        continue;\n      }\n      if (!dynamic && isFunctionDefinition(v)) {\n        dynamic = true;\n        dynamicSize = true;\n      }\n      s[DYNAMIC_SYMBOL_PROPS[i]] = v;\n    }\n    for (var _i = 0; _i < SIZE_SYMBOL_PROPS.length; _i++) {\n      var _v = symbol[SIZE_SYMBOL_PROPS[_i]];\n      if (isNil(_v)) {\n        continue;\n      }\n      if (!dynamic && isFunctionDefinition(_v)) {\n        dynamic = true;\n      }\n      s[SIZE_SYMBOL_PROPS[_i]] = _v;\n    }\n    var sizeSymbol;\n    if (dynamic) {\n      sizeSymbol = loadGeoSymbol(s, this);\n      if (dynamicSize) {\n        sizeSymbol._dynamic = true;\n      }\n    } else {\n      sizeSymbol = s;\n    }\n    return sizeSymbol;\n  };\n  _proto._setExternSymbol = function _setExternSymbol(symbol) {\n    if (!this._symbol) {\n      delete this._fixedExtent;\n    }\n    return _CenterMixin.prototype._setExternSymbol.call(this, symbol);\n  };\n  _proto._isDynamicSize = function _isDynamicSize() {\n    return this._sizeSymbol && this._sizeSymbol._dynamic;\n  };\n  _proto._getFixedExtent = function _getFixedExtent() {\n    if (this._fixedExtent && !this._isDynamicSize()) {\n      return this._fixedExtent;\n    }\n    this._fixedExtent = this._fixedExtent || new PointExtent();\n    this._fixedExtent.set(null, null, null, null);\n    var symbol = this._sizeSymbol;\n    if (!symbol) {\n      return this._fixedExtent;\n    }\n    var renderer = this.getLayer() && this.getLayer().getRenderer();\n    var resources = renderer && renderer.resources;\n    var textDesc = this.getTextDesc();\n    if (Array.isArray(symbol)) {\n      TEMP_EXTENT$5.set(Infinity, Infinity, -Infinity, -Infinity);\n      for (var i = 0; i < symbol.length; i++) {\n        if (!symbol[i]) {\n          continue;\n        }\n        this._fixedExtent._combine(getMarkerFixedExtent(TEMP_EXTENT$5, symbol[i], resources, textDesc && textDesc[i]));\n      }\n    } else {\n      this._fixedExtent = getMarkerFixedExtent(this._fixedExtent, symbol, resources, textDesc);\n    }\n    return this._fixedExtent;\n  };\n  _proto._isVectorMarker = function _isVectorMarker() {\n    var symbol = this._getInternalSymbol();\n    if (Array.isArray(symbol)) {\n      return false;\n    }\n    return isVectorSymbol(symbol);\n  };\n  _proto._canEdit = function _canEdit() {\n    var symbol = this._getInternalSymbol();\n    if (Array.isArray(symbol)) {\n      return false;\n    }\n    return isVectorSymbol(symbol) || isPathSymbol(symbol) || isImageSymbol(symbol);\n  };\n  _proto._containsPoint = function _containsPoint(point, t) {\n    var extent = this.getContainerExtent();\n    if (t) {\n      extent = extent.expand(t);\n    }\n    if (extent.contains(point)) {\n      if (this.options['hitTestForEvent']) {\n        return _CenterMixin.prototype._containsPoint.call(this, point, t);\n      } else {\n        return true;\n      }\n    } else {\n      return false;\n    }\n  };\n  _proto._computeExtent = function _computeExtent() {\n    return computeExtent.call(this, 'getCenter');\n  };\n  _proto._computePrjExtent = function _computePrjExtent() {\n    return computeExtent.call(this, '_getPrjCoordinates');\n  };\n  _proto._computeGeodesicLength = function _computeGeodesicLength() {\n    return 0;\n  };\n  _proto._computeGeodesicArea = function _computeGeodesicArea() {\n    return 0;\n  };\n  _proto._getSprite = function _getSprite(resources, canvasClass) {\n    if (this._getPainter()) {\n      return this._getPainter().getSprite(resources, canvasClass);\n    }\n    return new Painter(this).getSprite(resources, canvasClass);\n  };\n  return Marker;\n}(CenterMixin(Geometry));\nMarker.mergeOptions(options$4);\nMarker.registerJSONType('Marker');\nfunction computeExtent(fn) {\n  var coordinates = this[fn]();\n  if (!coordinates) {\n    return null;\n  }\n  return new Extent(coordinates, coordinates, this._getProjection());\n}\n\nvar options$5 = {\n  'arrowStyle': null,\n  'arrowPlacement': 'vertex-last'\n};\nvar LineString = function (_Path) {\n  _inheritsLoose(LineString, _Path);\n  function LineString(coordinates, options) {\n    var _this;\n    _this = _Path.call(this, options) || this;\n    _this.type = 'LineString';\n    if (coordinates) {\n      _this.setCoordinates(coordinates);\n    }\n    return _this;\n  }\n  var _proto = LineString.prototype;\n  _proto.getOutline = function getOutline() {\n    return Polygon.prototype.getOutline.call(this);\n  };\n  _proto.setCoordinates = function setCoordinates(coordinates) {\n    if (!coordinates) {\n      this._coordinates = null;\n      this._setPrjCoordinates(null);\n      return this;\n    }\n    this._coordinates = Coordinate.toCoordinates(coordinates);\n    if (this.getMap()) {\n      this._setPrjCoordinates(this._projectCoords(this._coordinates));\n    } else {\n      this.onShapeChanged();\n    }\n    return this;\n  };\n  _proto.getCoordinates = function getCoordinates() {\n    return this._coordinates || [];\n  };\n  _proto.getCenterInExtent = function getCenterInExtent(extent) {\n    return this._getCenterInExtent(extent, this.getCoordinates(), clipLine);\n  };\n  _proto._computeGeodesicLength = function _computeGeodesicLength(measurer) {\n    return measurer.measureLength(this.getCoordinates());\n  };\n  _proto._computeGeodesicArea = function _computeGeodesicArea() {\n    return 0;\n  };\n  return LineString;\n}(Path);\nLineString.mergeOptions(options$5);\nLineString.registerJSONType('LineString');\n\nvar TEMP_EXTENT$6 = new PointExtent();\nvar GeometryCollection = function (_Geometry) {\n  _inheritsLoose(GeometryCollection, _Geometry);\n  function GeometryCollection(geometries, opts) {\n    var _this;\n    _this = _Geometry.call(this, opts) || this;\n    _this.type = 'GeometryCollection';\n    _this.setGeometries(geometries);\n    return _this;\n  }\n  var _proto = GeometryCollection.prototype;\n  _proto.getContainerExtent = function getContainerExtent(out) {\n    var extent = out || new PointExtent();\n    this.forEach(function (geo) {\n      extent._combine(geo.getContainerExtent(TEMP_EXTENT$6));\n    });\n    return extent;\n  };\n  _proto.setGeometries = function setGeometries(_geometries) {\n    var geometries = this._checkGeometries(_geometries || []);\n    var symbol = this._getSymbol();\n    var options = this.config();\n    var properties = this.getProperties();\n    for (var i = geometries.length - 1; i >= 0; i--) {\n      geometries[i]._initOptions(options);\n      geometries[i]._setParent(this);\n      geometries[i]._setEventParent(this);\n      if (symbol) {\n        geometries[i].setSymbol(symbol);\n      }\n      if (properties) {\n        geometries[i].setProperties(properties);\n      }\n    }\n    this._geometries = geometries;\n    if (this.getLayer()) {\n      this._bindGeometriesToLayer();\n      this.onShapeChanged();\n    }\n    return this;\n  };\n  _proto.getGeometries = function getGeometries() {\n    return this._geometries || [];\n  };\n  _proto.forEach = function forEach(fn, context) {\n    var geometries = this.getGeometries();\n    for (var i = 0, l = geometries.length; i < l; i++) {\n      if (!geometries[i]) {\n        continue;\n      }\n      if (!context) {\n        fn(geometries[i], i);\n      } else {\n        fn.call(context, geometries[i], i);\n      }\n    }\n    return this;\n  };\n  _proto.filter = function filter(fn, context) {\n    if (!fn) {\n      return new GeometryCollection();\n    }\n    var selected = [];\n    var isFn = isFunction(fn);\n    var filter = isFn ? fn : createFilter(fn);\n    this.forEach(function (geometry) {\n      var g = isFn ? geometry : getFilterFeature(geometry);\n      if (context ? filter.call(context, g) : filter(g)) {\n        selected.push(geometry);\n      }\n    }, this);\n    return new GeometryCollection(selected);\n  };\n  _proto.translate = function translate(offset) {\n    if (!offset) {\n      return this;\n    }\n    if (this.isEmpty()) {\n      return this;\n    }\n    var args = arguments;\n    this.forEach(function (geometry) {\n      if (geometry && geometry.translate) {\n        geometry.translate.apply(geometry, args);\n      }\n    });\n    return this;\n  };\n  _proto.isEmpty = function isEmpty$$1() {\n    return !isArrayHasData(this.getGeometries());\n  };\n  _proto.remove = function remove() {\n    this.forEach(function (geometry) {\n      geometry._unbind();\n    });\n    return Geometry.prototype.remove.apply(this, arguments);\n  };\n  _proto.show = function show() {\n    this.options['visible'] = true;\n    this.forEach(function (geometry) {\n      geometry.show();\n    });\n    return this;\n  };\n  _proto.hide = function hide() {\n    this.options['visible'] = false;\n    this.forEach(function (geometry) {\n      geometry.hide();\n    });\n    return this;\n  };\n  _proto.onConfig = function onConfig(config) {\n    this.forEach(function (geometry) {\n      geometry.config(config);\n    });\n  };\n  _proto.getSymbol = function getSymbol() {\n    var s = _Geometry.prototype.getSymbol.call(this);\n    if (!s) {\n      var symbols = [];\n      var is = false;\n      this.forEach(function (g) {\n        var symbol = g.getSymbol();\n        if (symbol && !is) {\n          is = true;\n        }\n        symbols.push(g.getSymbol());\n      });\n      if (is) {\n        s = {\n          'children': symbols\n        };\n      }\n    }\n    return s;\n  };\n  _proto.setSymbol = function setSymbol(s) {\n    var _this2 = this;\n    if (s && s['children']) {\n      this._symbol = null;\n      this.forEach(function (g, i) {\n        g._eventSymbolProperties = _this2._eventSymbolProperties;\n        g.setSymbol(s['children'][i]);\n      });\n    } else {\n      var symbol = this._prepareSymbol(s);\n      this._symbol = symbol;\n      this.forEach(function (g) {\n        g._eventSymbolProperties = _this2._eventSymbolProperties;\n        g.setSymbol(symbol);\n      });\n    }\n    this.onSymbolChanged();\n    return this;\n  };\n  _proto._setExternSymbol = function _setExternSymbol(symbol) {\n    symbol = this._prepareSymbol(symbol);\n    this._externSymbol = symbol;\n    this.forEach(function (geometry) {\n      geometry._setExternSymbol(symbol);\n    });\n    this.onSymbolChanged();\n    return this;\n  };\n  _proto._bindLayer = function _bindLayer() {\n    _Geometry.prototype._bindLayer.apply(this, arguments);\n    this._bindGeometriesToLayer();\n  };\n  _proto._bindGeometriesToLayer = function _bindGeometriesToLayer() {\n    var layer = this.getLayer();\n    this.forEach(function (geometry) {\n      geometry._bindLayer(layer);\n    });\n  };\n  _proto._checkGeometries = function _checkGeometries(geometries) {\n    var invalidGeoError = 'The geometry added to collection is invalid.';\n    if (geometries && !Array.isArray(geometries)) {\n      if (geometries instanceof Geometry) {\n        return [geometries];\n      } else {\n        throw new Error(invalidGeoError);\n      }\n    } else {\n      for (var i = 0, l = geometries.length; i < l; i++) {\n        if (!this._checkGeo(geometries[i])) {\n          throw new Error(invalidGeoError + ' Index: ' + i);\n        }\n      }\n      return geometries;\n    }\n  };\n  _proto._checkGeo = function _checkGeo(geo) {\n    return geo instanceof Geometry;\n  };\n  _proto._updateCache = function _updateCache() {\n    this._clearCache();\n    if (this.isEmpty()) {\n      return;\n    }\n    this.forEach(function (geometry) {\n      if (geometry && geometry._updateCache) {\n        geometry._updateCache();\n      }\n    });\n  };\n  _proto._removePainter = function _removePainter() {\n    if (this._painter) {\n      this._painter.remove();\n    }\n    delete this._painter;\n    this.forEach(function (geometry) {\n      geometry._removePainter();\n    });\n  };\n  _proto._computeCenter = function _computeCenter(projection) {\n    if (!projection || this.isEmpty()) {\n      return null;\n    }\n    var sumX = 0,\n      sumY = 0,\n      counter = 0;\n    var geometries = this.getGeometries();\n    for (var i = 0, l = geometries.length; i < l; i++) {\n      if (!geometries[i]) {\n        continue;\n      }\n      var center = geometries[i]._computeCenter(projection);\n      if (center) {\n        sumX += center.x;\n        sumY += center.y;\n        counter++;\n      }\n    }\n    if (counter === 0) {\n      return null;\n    }\n    return new Coordinate(sumX / counter, sumY / counter);\n  };\n  _proto._containsPoint = function _containsPoint(point, t) {\n    if (this.isEmpty()) {\n      return false;\n    }\n    delete this._pickGeometryIndex;\n    var geometries = this.getGeometries();\n    for (var i = 0, l = geometries.length; i < l; i++) {\n      if (geometries[i]._containsPoint(point, t)) {\n        this._pickGeometryIndex = i;\n        return true;\n      }\n    }\n    return false;\n  };\n  _proto._computeExtent = function _computeExtent(projection) {\n    return computeExtent$1.call(this, projection, '_computeExtent');\n  };\n  _proto._computePrjExtent = function _computePrjExtent(projection) {\n    return computeExtent$1.call(this, projection, '_computePrjExtent');\n  };\n  _proto._computeGeodesicLength = function _computeGeodesicLength(projection) {\n    if (!projection || this.isEmpty()) {\n      return 0;\n    }\n    var geometries = this.getGeometries();\n    var result = 0;\n    for (var i = 0, l = geometries.length; i < l; i++) {\n      if (!geometries[i]) {\n        continue;\n      }\n      result += geometries[i]._computeGeodesicLength(projection);\n    }\n    return result;\n  };\n  _proto._computeGeodesicArea = function _computeGeodesicArea(projection) {\n    if (!projection || this.isEmpty()) {\n      return 0;\n    }\n    var geometries = this.getGeometries();\n    var result = 0;\n    for (var i = 0, l = geometries.length; i < l; i++) {\n      if (!geometries[i]) {\n        continue;\n      }\n      result += geometries[i]._computeGeodesicArea(projection);\n    }\n    return result;\n  };\n  _proto._exportGeoJSONGeometry = function _exportGeoJSONGeometry() {\n    var children = [];\n    if (!this.isEmpty()) {\n      var geometries = this.getGeometries();\n      for (var i = 0, l = geometries.length; i < l; i++) {\n        if (!geometries[i]) {\n          continue;\n        }\n        children.push(geometries[i]._exportGeoJSONGeometry());\n      }\n    }\n    return {\n      'type': 'GeometryCollection',\n      'geometries': children\n    };\n  };\n  _proto._toJSON = function _toJSON(options) {\n    var feature = {\n      'type': 'Feature',\n      'geometry': {\n        'type': 'GeometryCollection',\n        'geometries': this.getGeometries().filter(function (geo) {\n          return geo && geo._toJSON;\n        }).map(function (geo) {\n          var json = geo._toJSON();\n          if (json.subType) {\n            return json;\n          }\n          return geo._exportGeoJSONGeometry();\n        })\n      }\n    };\n    var id = this.getId();\n    if (!isNil(id)) {\n      feature['id'] = id;\n    }\n    var properties;\n    if (isNil(options['properties']) || options['properties']) {\n      properties = this._exportProperties();\n    }\n    feature['properties'] = properties;\n    options.feature = feature;\n    return options;\n  };\n  _proto._clearProjection = function _clearProjection() {\n    if (this.isEmpty()) {\n      return;\n    }\n    var geometries = this.getGeometries();\n    for (var i = 0, l = geometries.length; i < l; i++) {\n      if (!geometries[i]) {\n        continue;\n      }\n      geometries[i]._clearProjection();\n    }\n  };\n  _proto._getConnectPoints = function _getConnectPoints() {\n    var extent = this.getExtent();\n    var anchors = [new Coordinate(extent.xmin, extent.ymax), new Coordinate(extent.xmax, extent.ymin), new Coordinate(extent.xmin, extent.ymin), new Coordinate(extent.xmax, extent.ymax)];\n    return anchors;\n  };\n  _proto._getExternalResources = function _getExternalResources() {\n    if (this.isEmpty()) {\n      return [];\n    }\n    var geometries = this.getGeometries(),\n      resources = [];\n    var cache = {};\n    var symbol, res, key;\n    for (var i = 0, l = geometries.length; i < l; i++) {\n      if (!geometries[i]) {\n        continue;\n      }\n      symbol = geometries[i]._getInternalSymbol();\n      res = getExternalResources(symbol);\n      for (var ii = 0, ll = res.length; ii < ll; ii++) {\n        key = res[ii].join();\n        if (!cache[key]) {\n          resources.push(res[ii]);\n          cache[key] = 1;\n        }\n      }\n    }\n    return resources;\n  };\n  _proto.startEdit = function startEdit(opts) {\n    var _this3 = this;\n    if (this.isEmpty()) {\n      return this;\n    }\n    if (!opts) {\n      opts = {};\n    }\n    if (opts['symbol']) {\n      this._originalSymbol = this.getSymbol();\n      this.setSymbol(opts['symbol']);\n    }\n    this._draggbleBeforeEdit = this.options['draggable'];\n    this.config('draggable', false);\n    var geometries = this.getGeometries();\n    for (var i = 0, l = geometries.length; i < l; i++) {\n      geometries[i].startEdit(opts);\n    }\n    this._editing = true;\n    var layer = this.getLayer();\n    var needShadow = layer && layer.options['renderer'] === 'canvas';\n    if (needShadow) {\n      this.hide();\n    }\n    setTimeout(function () {\n      _this3.fire('editstart');\n    }, 1);\n    return this;\n  };\n  _proto.endEdit = function endEdit() {\n    if (this.isEmpty()) {\n      return this;\n    }\n    var geometries = this.getGeometries();\n    for (var i = 0, l = geometries.length; i < l; i++) {\n      geometries[i].endEdit();\n    }\n    if (this._originalSymbol) {\n      this.setSymbol(this._originalSymbol);\n      delete this._originalSymbol;\n    }\n    this._editing = false;\n    this.show();\n    this.config('draggable', this._draggbleBeforeEdit);\n    this.fire('editend');\n    return this;\n  };\n  _proto.isEditing = function isEditing() {\n    if (!this._editing) {\n      return false;\n    }\n    return true;\n  };\n  return GeometryCollection;\n}(Geometry);\nGeometryCollection.registerJSONType('GeometryCollection');\nfunction computeExtent$1(projection, fn) {\n  if (this.isEmpty()) {\n    return null;\n  }\n  var extent = new Extent();\n  var geometries = this.getGeometries();\n  for (var i = 0, l = geometries.length; i < l; i++) {\n    if (!geometries[i]) {\n      continue;\n    }\n    var e = geometries[i][fn](projection);\n    if (e) {\n      extent._combine(e);\n    }\n  }\n  return extent;\n}\n\nvar MultiGeometry = function (_GeometryCollection) {\n  _inheritsLoose(MultiGeometry, _GeometryCollection);\n  function MultiGeometry(geoType, type, data, options) {\n    var _this;\n    _this = _GeometryCollection.call(this, null, options) || this;\n    _this.GeometryType = geoType;\n    _this.type = type;\n    _this._initData(data);\n    return _this;\n  }\n  var _proto = MultiGeometry.prototype;\n  _proto.getCoordinates = function getCoordinates() {\n    var coordinates = [];\n    var geometries = this.getGeometries();\n    for (var i = 0, l = geometries.length; i < l; i++) {\n      var child = geometries[i];\n      coordinates.push(child.getShell && child.getJSONType() !== 'Polygon' ? [child.getShell()] : child.getCoordinates());\n    }\n    return coordinates;\n  };\n  _proto.setCoordinates = function setCoordinates(coordinates) {\n    coordinates = coordinates || [];\n    var geometries = [];\n    for (var i = 0, l = coordinates.length; i < l; i++) {\n      var g = new this.GeometryType(coordinates[i], this.config());\n      geometries.push(g);\n    }\n    this.setGeometries(geometries);\n    return this;\n  };\n  _proto._initData = function _initData(data) {\n    data = data || [];\n    if (data.length) {\n      if (data[0] instanceof this.GeometryType) {\n        this.setGeometries(data);\n      } else {\n        this.setCoordinates(data);\n      }\n    }\n  };\n  _proto._checkGeo = function _checkGeo(geo) {\n    return geo instanceof this.GeometryType;\n  };\n  _proto._exportGeoJSONGeometry = function _exportGeoJSONGeometry() {\n    var points = this.getCoordinates();\n    var coordinates = Coordinate.toNumberArrays(points);\n    return {\n      'type': this.getType(),\n      'coordinates': coordinates\n    };\n  };\n  _proto._toJSON = function _toJSON(options) {\n    return {\n      'feature': this.toGeoJSON(options)\n    };\n  };\n  return MultiGeometry;\n}(GeometryCollection);\n\nvar MultiPoint = function (_MultiGeometry) {\n  _inheritsLoose(MultiPoint, _MultiGeometry);\n  function MultiPoint(data, opts) {\n    return _MultiGeometry.call(this, Marker, 'MultiPoint', data, opts) || this;\n  }\n  var _proto = MultiPoint.prototype;\n  _proto.findClosest = function findClosest(coordinate) {\n    if (!coordinate) {\n      return null;\n    }\n    var coords = this.getCoordinates();\n    var hit = null;\n    var max = Infinity;\n    coords.forEach(function (c) {\n      var dist = distanceTo(c, coordinate);\n      if (dist < max) {\n        hit = c;\n        max = dist;\n      }\n    });\n    return hit;\n  };\n  return MultiPoint;\n}(MultiGeometry);\nMultiPoint.registerJSONType('MultiPoint');\nfunction distanceTo(p0, p1) {\n  var x = p1.x - p0.x,\n    y = p1.y - p0.y;\n  return Math.sqrt(x * x + y * y);\n}\n\nvar MultiPath = function (_MultiGeometry) {\n  _inheritsLoose(MultiPath, _MultiGeometry);\n  function MultiPath() {\n    return _MultiGeometry.apply(this, arguments) || this;\n  }\n  var _proto = MultiPath.prototype;\n  _proto.getCenterInExtent = function getCenterInExtent(extent) {\n    var children = this.getGeometries();\n    var sumx = 0,\n      sumy = 0,\n      counter = 0;\n    children.forEach(function (l) {\n      var c = l.getCenterInExtent(extent);\n      if (c) {\n        sumx += c.x * c.count;\n        sumy += c.y * c.count;\n        counter += c.count;\n      }\n    });\n    if (counter === 0) {\n      return null;\n    }\n    return new Coordinate(sumx, sumy)._multi(1 / counter);\n  };\n  return MultiPath;\n}(MultiGeometry);\n\nvar MultiLineString = function (_MultiPath) {\n  _inheritsLoose(MultiLineString, _MultiPath);\n  function MultiLineString(data, options) {\n    return _MultiPath.call(this, LineString, 'MultiLineString', data, options) || this;\n  }\n  return MultiLineString;\n}(MultiPath);\nMultiLineString.registerJSONType('MultiLineString');\n\nvar MultiPolygon = function (_MultiPath) {\n  _inheritsLoose(MultiPolygon, _MultiPath);\n  function MultiPolygon(data, opts) {\n    return _MultiPath.call(this, Polygon, 'MultiPolygon', data, opts) || this;\n  }\n  return MultiPolygon;\n}(MultiPath);\nMultiPolygon.registerJSONType('MultiPolygon');\n\nvar types$1 = {\n  'Marker': Marker,\n  'LineString': LineString,\n  'Polygon': Polygon,\n  'MultiPoint': MultiPoint,\n  'MultiLineString': MultiLineString,\n  'MultiPolygon': MultiPolygon\n};\nvar GeoJSON = {\n  toGeometry: function toGeometry(geoJSON, foreachFn) {\n    if (isString(geoJSON)) {\n      geoJSON = parseJSON(geoJSON);\n    }\n    if (Array.isArray(geoJSON)) {\n      var resultGeos = [];\n      for (var i = 0, len = geoJSON.length; i < len; i++) {\n        var geo = GeoJSON._convert(geoJSON[i], foreachFn);\n        if (Array.isArray(geo)) {\n          pushIn(resultGeos, geo);\n        } else {\n          resultGeos.push(geo);\n        }\n      }\n      return resultGeos;\n    } else {\n      var resultGeo = GeoJSON._convert(geoJSON, foreachFn);\n      return resultGeo;\n    }\n  },\n  _convert: function _convert(json, foreachFn) {\n    if (!json || isNil(json['type'])) {\n      return null;\n    }\n    var type = json['type'];\n    if (type === 'Feature') {\n      var g = json['geometry'];\n      var geometry = GeoJSON._convert(g);\n      if (!geometry) {\n        return null;\n      }\n      geometry.setId(json['id']);\n      geometry.setProperties(json['properties']);\n      if (foreachFn) {\n        foreachFn(geometry);\n      }\n      return geometry;\n    } else if (type === 'FeatureCollection') {\n      var features = json['features'];\n      if (!features) {\n        return null;\n      }\n      return GeoJSON.toGeometry(features, foreachFn);\n    } else if (['Point', 'LineString', 'Polygon', 'MultiPoint', 'MultiLineString', 'MultiPolygon'].indexOf(type) >= 0) {\n      var clazz = type === 'Point' ? 'Marker' : type;\n      var result = new types$1[clazz](json['coordinates']);\n      if (foreachFn) {\n        foreachFn(result);\n      }\n      return result;\n    } else if (type === 'GeometryCollection') {\n      var geometries = json['geometries'];\n      if (!isArrayHasData(geometries)) {\n        var _result2 = new GeometryCollection();\n        if (foreachFn) {\n          foreachFn(_result2);\n        }\n        return _result2;\n      }\n      var mGeos = [];\n      var size = geometries.length;\n      for (var i = 0; i < size; i++) {\n        if (geometries[i].subType) {\n          mGeos.push(Geometry.getJSONClass(geometries[i].subType).fromJSON(geometries[i]));\n        } else {\n          mGeos.push(GeoJSON._convert(geometries[i]));\n        }\n      }\n      var _result = new GeometryCollection(mGeos);\n      if (foreachFn) {\n        foreachFn(_result);\n      }\n      return _result;\n    }\n    return null;\n  }\n};\n\nvar options$6 = {\n  'numberOfShellPoints': 60\n};\nvar Circle = function (_CenterMixin) {\n  _inheritsLoose(Circle, _CenterMixin);\n  Circle.fromJSON = function fromJSON(json) {\n    var feature = json['feature'];\n    var circle = new Circle(json['coordinates'], json['radius'], json['options']);\n    circle.setProperties(feature['properties']);\n    return circle;\n  };\n  function Circle(coordinates, radius, opts) {\n    var _this;\n    _this = _CenterMixin.call(this, null, opts) || this;\n    if (coordinates) {\n      _this.setCoordinates(coordinates);\n    }\n    _this._radius = radius;\n    return _this;\n  }\n  var _proto = Circle.prototype;\n  _proto.getRadius = function getRadius() {\n    return this._radius;\n  };\n  _proto.setRadius = function setRadius(radius) {\n    this._radius = radius;\n    this.onShapeChanged();\n    return this;\n  };\n  _proto.getShell = function getShell() {\n    var measurer = this._getMeasurer(),\n      center = this.getCoordinates(),\n      numberOfPoints = this.options['numberOfShellPoints'],\n      radius = this.getRadius();\n    var shell = [];\n    var rad, dx, dy;\n    for (var i = 0, len = numberOfPoints - 1; i < len; i++) {\n      rad = 360 * i / len * Math.PI / 180;\n      dx = radius * Math.cos(rad);\n      dy = radius * Math.sin(rad);\n      var vertex = measurer.locate(center, dx, dy);\n      shell.push(vertex);\n    }\n    shell.push(shell[0]);\n    return shell;\n  };\n  _proto.getHoles = function getHoles() {\n    return [];\n  };\n  _proto.animateShow = function animateShow() {\n    return this.show();\n  };\n  _proto._containsPoint = function _containsPoint(point, tolerance) {\n    var map = this.getMap();\n    if (map.getPitch()) {\n      return _CenterMixin.prototype._containsPoint.call(this, point, tolerance);\n    }\n    var center = map._pointToContainerPoint(this._getCenter2DPoint()),\n      size = this.getSize(),\n      t = this._hitTestTolerance() + (tolerance || 0),\n      se = center.add(size.width / 2, size.height / 2);\n    return withInEllipse(point, center, se, t);\n  };\n  _proto._computePrjExtent = function _computePrjExtent(projection) {\n    var minmax = this._getMinMax(projection);\n    if (!minmax) {\n      return null;\n    }\n    var pcenter = this._getPrjCoordinates();\n    var pminmax = minmax.map(function (c) {\n      return projection.project(c);\n    });\n    var leftx = pminmax[0].x - pcenter.x;\n    var rightx = pminmax[1].x - pcenter.x;\n    var topy = pminmax[2].y - pcenter.y;\n    var bottomy = pminmax[3].y - pcenter.y;\n    return new Extent(pcenter.add(leftx, topy), pcenter.add(rightx, bottomy));\n  };\n  _proto._computeExtent = function _computeExtent(measurer) {\n    var minmax = this._getMinMax(measurer);\n    if (!minmax) {\n      return null;\n    }\n    return new Extent(minmax[0].x, minmax[2].y, minmax[1].x, minmax[3].y, this._getProjection());\n  };\n  _proto._getMinMax = function _getMinMax(measurer) {\n    if (!measurer || !this._coordinates || isNil(this._radius)) {\n      return null;\n    }\n    var radius = this._radius;\n    var p1 = measurer.locate(this._coordinates, -radius, 0),\n      p2 = measurer.locate(this._coordinates, radius, 0),\n      p3 = measurer.locate(this._coordinates, 0, radius),\n      p4 = measurer.locate(this._coordinates, 0, -radius);\n    return [p1, p2, p3, p4];\n  };\n  _proto._computeGeodesicLength = function _computeGeodesicLength() {\n    if (isNil(this._radius)) {\n      return 0;\n    }\n    return Math.PI * 2 * this._radius;\n  };\n  _proto._computeGeodesicArea = function _computeGeodesicArea() {\n    if (isNil(this._radius)) {\n      return 0;\n    }\n    return Math.PI * Math.pow(this._radius, 2);\n  };\n  _proto._exportGeoJSONGeometry = function _exportGeoJSONGeometry() {\n    var coordinates = Coordinate.toNumberArrays([this.getShell()]);\n    return {\n      'type': 'Polygon',\n      'coordinates': coordinates\n    };\n  };\n  _proto._toJSON = function _toJSON(options) {\n    var center = this.getCenter();\n    var opts = extend({}, options);\n    opts.geometry = false;\n    var feature = this.toGeoJSON(opts);\n    feature['geometry'] = {\n      'type': 'Polygon'\n    };\n    return {\n      'feature': feature,\n      'subType': 'Circle',\n      'coordinates': [center.x, center.y],\n      'radius': this.getRadius()\n    };\n  };\n  return Circle;\n}(CenterMixin(Polygon));\nCircle.mergeOptions(options$6);\nCircle.registerJSONType('Circle');\n\nvar options$7 = {\n  'numberOfShellPoints': 80\n};\nvar Ellipse = function (_CenterMixin) {\n  _inheritsLoose(Ellipse, _CenterMixin);\n  Ellipse.fromJSON = function fromJSON(json) {\n    var feature = json['feature'];\n    var ellipse = new Ellipse(json['coordinates'], json['width'], json['height'], json['options']);\n    ellipse.setProperties(feature['properties']);\n    return ellipse;\n  };\n  function Ellipse(coordinates, width, height, opts) {\n    var _this;\n    _this = _CenterMixin.call(this, null, opts) || this;\n    if (coordinates) {\n      _this.setCoordinates(coordinates);\n    }\n    _this.width = width;\n    _this.height = height;\n    return _this;\n  }\n  var _proto = Ellipse.prototype;\n  _proto.getWidth = function getWidth() {\n    return this.width;\n  };\n  _proto.setWidth = function setWidth(width) {\n    this.width = width;\n    this.onShapeChanged();\n    return this;\n  };\n  _proto.getHeight = function getHeight() {\n    return this.height;\n  };\n  _proto.setHeight = function setHeight(height) {\n    this.height = height;\n    this.onShapeChanged();\n    return this;\n  };\n  _proto.getShell = function getShell() {\n    var measurer = this._getMeasurer(),\n      center = this.getCoordinates(),\n      numberOfPoints = this.options['numberOfShellPoints'],\n      width = this.getWidth(),\n      height = this.getHeight();\n    var shell = [];\n    var s = Math.pow(width / 2, 2) * Math.pow(height / 2, 2),\n      sx = Math.pow(width / 2, 2),\n      sy = Math.pow(height / 2, 2);\n    var deg, rad, dx, dy;\n    for (var i = 0; i < numberOfPoints; i++) {\n      deg = 360 * i / numberOfPoints;\n      rad = deg * Math.PI / 180;\n      dx = Math.sqrt(s / (sx * Math.pow(Math.tan(rad), 2) + sy));\n      dy = Math.sqrt(s / (sy * Math.pow(1 / Math.tan(rad), 2) + sx));\n      if (deg > 90 && deg < 270) {\n        dx *= -1;\n      }\n      if (deg > 180 && deg < 360) {\n        dy *= -1;\n      }\n      var vertex = measurer.locate(center, dx, dy);\n      shell.push(vertex);\n    }\n    return shell;\n  };\n  _proto.getHoles = function getHoles() {\n    return [];\n  };\n  _proto.animateShow = function animateShow() {\n    return this.show();\n  };\n  _proto._containsPoint = function _containsPoint(point, tolerance) {\n    var map = this.getMap();\n    if (map.isTransforming()) {\n      return _CenterMixin.prototype._containsPoint.call(this, point, tolerance);\n    }\n    var projection = map.getProjection();\n    var t = this._hitTestTolerance() + (tolerance || 0),\n      pps = projection.projectCoords([this._coordinates, map.locate(this._coordinates, this.getWidth() / 2, this.getHeight() / 2)], this.options['antiMeridian']),\n      p0 = map._prjToContainerPoint(pps[0]),\n      p1 = map._prjToContainerPoint(pps[1]);\n    return withInEllipse(point, p0, p1, t);\n  };\n  _proto._computePrjExtent = function _computePrjExtent() {\n    return Circle.prototype._computePrjExtent.apply(this, arguments);\n  };\n  _proto._computeExtent = function _computeExtent() {\n    return Circle.prototype._computeExtent.apply(this, arguments);\n  };\n  _proto._getMinMax = function _getMinMax(measurer) {\n    if (!measurer || !this._coordinates || isNil(this.width) || isNil(this.height)) {\n      return null;\n    }\n    var width = this.getWidth(),\n      height = this.getHeight();\n    var p1 = measurer.locate(this._coordinates, -width / 2, 0),\n      p2 = measurer.locate(this._coordinates, width / 2, 0),\n      p3 = measurer.locate(this._coordinates, 0, -height / 2),\n      p4 = measurer.locate(this._coordinates, 0, height / 2);\n    return [p1, p2, p3, p4];\n  };\n  _proto._computeGeodesicLength = function _computeGeodesicLength() {\n    if (isNil(this.width) || isNil(this.height)) {\n      return 0;\n    }\n    var longer = this.width > this.height ? this.width : this.height;\n    return 2 * Math.PI * longer / 2 - 4 * Math.abs(this.width - this.height);\n  };\n  _proto._computeGeodesicArea = function _computeGeodesicArea() {\n    if (isNil(this.width) || isNil(this.height)) {\n      return 0;\n    }\n    return Math.PI * this.width * this.height / 4;\n  };\n  _proto._exportGeoJSONGeometry = function _exportGeoJSONGeometry() {\n    var coordinates = Coordinate.toNumberArrays([this.getShell()]);\n    return {\n      'type': 'Polygon',\n      'coordinates': coordinates\n    };\n  };\n  _proto._toJSON = function _toJSON(options) {\n    var opts = extend({}, options);\n    var center = this.getCenter();\n    opts.geometry = false;\n    var feature = this.toGeoJSON(opts);\n    feature['geometry'] = {\n      'type': 'Polygon'\n    };\n    return {\n      'feature': feature,\n      'subType': 'Ellipse',\n      'coordinates': [center.x, center.y],\n      'width': this.getWidth(),\n      'height': this.getHeight()\n    };\n  };\n  return Ellipse;\n}(CenterMixin(Polygon));\nEllipse.mergeOptions(options$7);\nEllipse.registerJSONType('Ellipse');\n\nvar Rectangle = function (_Polygon) {\n  _inheritsLoose(Rectangle, _Polygon);\n  Rectangle.fromJSON = function fromJSON(json) {\n    var feature = json['feature'];\n    var rect = new Rectangle(json['coordinates'], json['width'], json['height'], json['options']);\n    rect.setProperties(feature['properties']);\n    return rect;\n  };\n  function Rectangle(coordinates, width, height, opts) {\n    var _this;\n    _this = _Polygon.call(this, null, opts) || this;\n    if (coordinates) {\n      _this.setCoordinates(coordinates);\n    }\n    _this._width = width;\n    _this._height = height;\n    return _this;\n  }\n  var _proto = Rectangle.prototype;\n  _proto.getCoordinates = function getCoordinates() {\n    return this._coordinates;\n  };\n  _proto.setCoordinates = function setCoordinates(nw) {\n    this._coordinates = nw instanceof Coordinate ? nw : new Coordinate(nw);\n    if (!this._coordinates || !this.getMap()) {\n      this.onPositionChanged();\n      return this;\n    }\n    var projection = this._getProjection();\n    this._setPrjCoordinates(projection.project(this._coordinates));\n    return this;\n  };\n  _proto.getWidth = function getWidth() {\n    return this._width;\n  };\n  _proto.setWidth = function setWidth(width) {\n    this._width = width;\n    this.onShapeChanged();\n    return this;\n  };\n  _proto.getHeight = function getHeight() {\n    return this._height;\n  };\n  _proto.setHeight = function setHeight(height) {\n    this._height = height;\n    this.onShapeChanged();\n    return this;\n  };\n  _proto.getShell = function getShell() {\n    var measurer = this._getMeasurer();\n    var nw = this._coordinates;\n    var map = this.getMap();\n    var sx = 1,\n      sy = -1;\n    if (map) {\n      var fExt = map.getFullExtent();\n      if (fExt['left'] > fExt['right']) {\n        sx = -1;\n      }\n      if (fExt['bottom'] > fExt['top']) {\n        sy = 1;\n      }\n    }\n    var points = [];\n    points.push(nw);\n    points.push(measurer.locate(nw, sx * this._width, 0));\n    points.push(measurer.locate(nw, sx * this._width, sy * this._height));\n    points.push(measurer.locate(nw, 0, sy * this._height));\n    points.push(nw);\n    return points;\n  };\n  _proto.getHoles = function getHoles() {\n    return [];\n  };\n  _proto.animateShow = function animateShow() {\n    return this.show();\n  };\n  _proto._getPrjCoordinates = function _getPrjCoordinates() {\n    var projection = this._getProjection();\n    this._verifyProjection();\n    if (!this._pnw && projection) {\n      if (this._coordinates) {\n        this._pnw = projection.project(this._coordinates);\n      }\n    }\n    return this._pnw;\n  };\n  _proto._setPrjCoordinates = function _setPrjCoordinates(pnw) {\n    this._pnw = pnw;\n    this.onPositionChanged();\n  };\n  _proto._getPrjShell = function _getPrjShell() {\n    var shell = _Polygon.prototype._getPrjShell.call(this);\n    var projection = this._getProjection();\n    if (!projection.isSphere()) {\n      return shell;\n    }\n    var sphereExtent = projection.getSphereExtent(),\n      sx = sphereExtent.sx,\n      sy = sphereExtent.sy;\n    var circum = this._getProjection().getCircum();\n    var nw = shell[0];\n    for (var i = 1, l = shell.length; i < l; i++) {\n      var p = shell[i];\n      var dx = 0,\n        dy = 0;\n      if (sx * (nw.x - p.x) > 0) {\n        dx = circum.x * sx;\n      }\n      if (sy * (nw.y - p.y) < 0) {\n        dy = circum.y * sy;\n      }\n      shell[i]._add(dx, dy);\n    }\n    return shell;\n  };\n  _proto._updateCache = function _updateCache() {\n    this._clearCache();\n    var projection = this._getProjection();\n    if (this._pnw && projection) {\n      this._coordinates = projection.unproject(this._pnw);\n    }\n  };\n  _proto._clearProjection = function _clearProjection() {\n    this._pnw = null;\n    _Polygon.prototype._clearProjection.call(this);\n  };\n  _proto._computeCenter = function _computeCenter(measurer) {\n    return measurer.locate(this._coordinates, this._width / 2, -this._height / 2);\n  };\n  _proto._containsPoint = function _containsPoint(point, tolerance) {\n    var map = this.getMap();\n    if (map.isTransforming()) {\n      return _Polygon.prototype._containsPoint.call(this, point, tolerance);\n    }\n    var t = isNil(tolerance) ? this._hitTestTolerance() : tolerance,\n      r = map._getResolution() * t;\n    var extent = this._getPrjExtent().expand(r);\n    var p = map._containerPointToPrj(point);\n    return extent.contains(p);\n  };\n  _proto._computePrjExtent = function _computePrjExtent(projection) {\n    var se = this._getSouthEast(projection);\n    if (!se) {\n      return null;\n    }\n    var prjs = projection.projectCoords([new Coordinate(this._coordinates.x, se.y), new Coordinate(se.x, this._coordinates.y)], this.options['antiMeridian']);\n    return new Extent(prjs[0], prjs[1]);\n  };\n  _proto._computeExtent = function _computeExtent(measurer) {\n    var se = this._getSouthEast(measurer);\n    if (!se) {\n      return null;\n    }\n    return new Extent(this._coordinates, se, this._getProjection());\n  };\n  _proto._getSouthEast = function _getSouthEast(measurer) {\n    if (!measurer || !this._coordinates || isNil(this._width) || isNil(this._height)) {\n      return null;\n    }\n    var width = this.getWidth(),\n      height = this.getHeight();\n    var w = width,\n      h = -height;\n    if (measurer.fullExtent) {\n      var fullExtent = measurer.fullExtent,\n        sx = fullExtent.right > fullExtent.left ? 1 : -1,\n        sy = fullExtent.top > fullExtent.bottom ? 1 : -1;\n      w *= sx;\n      h *= sy;\n    }\n    var rightPoint = measurer.locate(this._coordinates, w, 0);\n    var bottomPoint = measurer.locate(this._coordinates, 0, h);\n    rightPoint.y = bottomPoint.y;\n    return rightPoint;\n  };\n  _proto._computeGeodesicLength = function _computeGeodesicLength() {\n    if (isNil(this._width) || isNil(this._height)) {\n      return 0;\n    }\n    return 2 * (this._width + this._height);\n  };\n  _proto._computeGeodesicArea = function _computeGeodesicArea() {\n    if (isNil(this._width) || isNil(this._height)) {\n      return 0;\n    }\n    return this._width * this._height;\n  };\n  _proto._exportGeoJSONGeometry = function _exportGeoJSONGeometry() {\n    var coordinates = Coordinate.toNumberArrays([this.getShell()]);\n    return {\n      'type': 'Polygon',\n      'coordinates': coordinates\n    };\n  };\n  _proto._toJSON = function _toJSON(options) {\n    var opts = extend({}, options);\n    var nw = this.getCoordinates();\n    opts.geometry = false;\n    var feature = this.toGeoJSON(opts);\n    feature['geometry'] = {\n      'type': 'Polygon'\n    };\n    return {\n      'feature': feature,\n      'subType': 'Rectangle',\n      'coordinates': [nw.x, nw.y],\n      'width': this.getWidth(),\n      'height': this.getHeight()\n    };\n  };\n  return Rectangle;\n}(Polygon);\nRectangle.registerJSONType('Rectangle');\n\nvar options$8 = {\n  'numberOfShellPoints': 60\n};\nvar Sector = function (_Circle) {\n  _inheritsLoose(Sector, _Circle);\n  Sector.fromJSON = function fromJSON(json) {\n    var feature = json['feature'];\n    var sector = new Sector(json['coordinates'], json['radius'], json['startAngle'], json['endAngle'], json['options']);\n    sector.setProperties(feature['properties']);\n    return sector;\n  };\n  function Sector(coordinates, radius, startAngle, endAngle, opts) {\n    var _this;\n    _this = _Circle.call(this, coordinates, radius, opts) || this;\n    _this.startAngle = startAngle;\n    _this.endAngle = endAngle;\n    return _this;\n  }\n  var _proto = Sector.prototype;\n  _proto.getStartAngle = function getStartAngle() {\n    return this.startAngle;\n  };\n  _proto.setStartAngle = function setStartAngle(startAngle) {\n    this.startAngle = startAngle;\n    this.onShapeChanged();\n    return this;\n  };\n  _proto.getEndAngle = function getEndAngle() {\n    return this.endAngle;\n  };\n  _proto.setEndAngle = function setEndAngle(endAngle) {\n    this.endAngle = endAngle;\n    this.onShapeChanged();\n    return this;\n  };\n  _proto.getShell = function getShell() {\n    var measurer = this._getMeasurer(),\n      center = this.getCoordinates(),\n      numberOfPoints = this.options['numberOfShellPoints'] - 2,\n      radius = this.getRadius(),\n      shell = [center.copy()],\n      startAngle = this.getStartAngle(),\n      angle = this.getEndAngle() - startAngle;\n    var rad, dx, dy;\n    for (var i = 0; i < numberOfPoints; i++) {\n      rad = (angle * i / (numberOfPoints - 1) + startAngle) * Math.PI / 180;\n      dx = radius * Math.cos(rad);\n      dy = radius * Math.sin(rad);\n      var vertex = measurer.locate(center, dx, dy);\n      shell.push(vertex);\n    }\n    shell.push(center.copy());\n    return shell;\n  };\n  _proto._containsPoint = function _containsPoint(point, tolerance) {\n    var map = this.getMap();\n    if (map.isTransforming()) {\n      return _Circle.prototype._containsPoint.call(this, point, tolerance);\n    }\n    var center = map._pointToContainerPoint(this._getCenter2DPoint()),\n      t = this._hitTestTolerance() + (tolerance || 0),\n      size = this.getSize(),\n      pc = center,\n      pp = point,\n      x = pp.x - pc.x,\n      y = pc.y - pp.y,\n      atan2 = Math.atan2(y, x),\n      angle = atan2 < 0 ? (atan2 + 2 * Math.PI) * 360 / (2 * Math.PI) : atan2 * 360 / (2 * Math.PI);\n    var sAngle = this.startAngle % 360,\n      eAngle = this.endAngle % 360;\n    var between = false;\n    if (sAngle > eAngle) {\n      between = !(angle > eAngle && angle < sAngle);\n    } else {\n      between = angle >= sAngle && angle <= eAngle;\n    }\n    return pp.distanceTo(pc) <= size.width / 2 + t && between;\n  };\n  _proto._computeGeodesicLength = function _computeGeodesicLength() {\n    if (isNil(this._radius)) {\n      return 0;\n    }\n    return Math.PI * 2 * this._radius * Math.abs(this.startAngle - this.endAngle) / 360 + 2 * this._radius;\n  };\n  _proto._computeGeodesicArea = function _computeGeodesicArea() {\n    if (isNil(this._radius)) {\n      return 0;\n    }\n    return Math.PI * Math.pow(this._radius, 2) * Math.abs(this.startAngle - this.endAngle) / 360;\n  };\n  _proto._toJSON = function _toJSON(options) {\n    var opts = extend({}, options);\n    var center = this.getCenter();\n    opts.geometry = false;\n    var feature = this.toGeoJSON(opts);\n    feature['geometry'] = {\n      'type': 'Polygon'\n    };\n    return {\n      'feature': feature,\n      'subType': 'Sector',\n      'coordinates': [center.x, center.y],\n      'radius': this.getRadius(),\n      'startAngle': this.getStartAngle(),\n      'endAngle': this.getEndAngle()\n    };\n  };\n  return Sector;\n}(Circle);\nSector.mergeOptions(options$8);\nSector.registerJSONType('Sector');\n\nvar options$9 = {\n  'enableSimplify': false,\n  'enableClip': false\n};\nvar Curve = function (_LineString) {\n  _inheritsLoose(Curve, _LineString);\n  function Curve() {\n    return _LineString.apply(this, arguments) || this;\n  }\n  var _proto = Curve.prototype;\n  _proto._arc = function _arc(ctx, points, lineOpacity) {\n    var degree = this.options['arcDegree'] * Math.PI / 180;\n    for (var i = 1, l = points.length; i < l; i++) {\n      var c = Canvas._arcBetween(ctx, points[i - 1], points[i], degree);\n      var ctrlPoint = [points[i - 1].x + points[i].x - c[0], points[i - 1].y + points[i].y - c[1]];\n      points[i - 1].nextCtrlPoint = ctrlPoint;\n      points[i].prevCtrlPoint = ctrlPoint;\n      Canvas._stroke(ctx, lineOpacity);\n    }\n  };\n  _proto._quadraticCurve = function _quadraticCurve(ctx, points) {\n    if (points.length <= 2) {\n      Canvas._path(ctx, points);\n      return;\n    }\n    var i, l;\n    for (i = 2, l = points.length; i < l; i += 2) {\n      ctx.quadraticCurveTo(points[i - 1].x, points[i - 1].y, points[i].x, points[i].y);\n    }\n    i -= 1;\n    if (i < l) {\n      for (; i < l; i++) {\n        ctx.lineTo(points[i].x, points[i].y);\n      }\n    }\n  };\n  _proto._bezierCurve = function _bezierCurve(ctx, points) {\n    if (points.length <= 3) {\n      Canvas._path(ctx, points);\n      return;\n    }\n    var i, l;\n    for (i = 1, l = points.length; i + 2 < l; i += 3) {\n      ctx.bezierCurveTo(points[i].x, points[i].y, points[i + 1].x, points[i + 1].y, points[i + 2].x, points[i + 2].y);\n    }\n    if (i < l) {\n      for (; i < l; i++) {\n        ctx.lineTo(points[i].x, points[i].y);\n      }\n    }\n  };\n  _proto._getCurveArrowPoints = function _getCurveArrowPoints(arrows, segments, lineWidth, arrowStyle, tolerance, step) {\n    var l = segments.length;\n    var i;\n    for (i = step; i < l; i += step) {\n      var arrow = this._getArrowShape(segments[i - 1], segments[i], lineWidth, arrowStyle, tolerance);\n      if (arrow) {\n        arrows.push(arrow);\n      }\n    }\n    i -= step;\n    if (i < l - 1) {\n      for (i += 1; i < l; i++) {\n        var _arrow = this._getArrowShape(segments[i - 1], segments[i], lineWidth, arrowStyle, tolerance);\n        if (_arrow) {\n          arrows.push(_arrow);\n        }\n      }\n    }\n  };\n  return Curve;\n}(LineString);\nCurve.mergeOptions(options$9);\n\nvar options$a = {\n  'arcDegree': 90\n};\nvar ArcCurve = function (_Curve) {\n  _inheritsLoose(ArcCurve, _Curve);\n  function ArcCurve() {\n    return _Curve.apply(this, arguments) || this;\n  }\n  var _proto = ArcCurve.prototype;\n  _proto._toJSON = function _toJSON(options) {\n    return {\n      'feature': this.toGeoJSON(options),\n      'subType': 'ArcCurve'\n    };\n  };\n  _proto._paintOn = function _paintOn(ctx, points, lineOpacity) {\n    ctx.beginPath();\n    this._arc(ctx, points, lineOpacity);\n    Canvas._stroke(ctx, lineOpacity);\n    this._paintArrow(ctx, points, lineOpacity);\n  };\n  ArcCurve.fromJSON = function fromJSON(json) {\n    var feature = json['feature'];\n    var arc = new ArcCurve(feature['geometry']['coordinates'], json['options']);\n    arc.setProperties(feature['properties']);\n    return arc;\n  };\n  return ArcCurve;\n}(Curve);\nArcCurve.registerJSONType('ArcCurve');\nArcCurve.mergeOptions(options$a);\n\nvar CubicBezierCurve = function (_Curve) {\n  _inheritsLoose(CubicBezierCurve, _Curve);\n  function CubicBezierCurve() {\n    return _Curve.apply(this, arguments) || this;\n  }\n  CubicBezierCurve.fromJSON = function fromJSON(json) {\n    var feature = json['feature'];\n    var curve = new CubicBezierCurve(feature['geometry']['coordinates'], json['options']);\n    curve.setProperties(feature['properties']);\n    return curve;\n  };\n  var _proto = CubicBezierCurve.prototype;\n  _proto._toJSON = function _toJSON(options) {\n    return {\n      'feature': this.toGeoJSON(options),\n      'subType': 'CubicBezierCurve'\n    };\n  };\n  _proto._paintOn = function _paintOn(ctx, points, lineOpacity) {\n    ctx.beginPath();\n    ctx.moveTo(points[0].x, points[0].y);\n    this._bezierCurve(ctx, points);\n    Canvas._stroke(ctx, lineOpacity);\n    this._paintArrow(ctx, points, lineOpacity);\n  };\n  _proto._getArrowPoints = function _getArrowPoints(arrows, segments, lineWidth, arrowStyle, tolerance) {\n    return this._getCurveArrowPoints(arrows, segments, lineWidth, arrowStyle, tolerance, 3);\n  };\n  return CubicBezierCurve;\n}(Curve);\nCubicBezierCurve.registerJSONType('CubicBezierCurve');\n\nvar QuadBezierCurve = function (_Curve) {\n  _inheritsLoose(QuadBezierCurve, _Curve);\n  function QuadBezierCurve() {\n    return _Curve.apply(this, arguments) || this;\n  }\n  QuadBezierCurve.fromJSON = function fromJSON(json) {\n    var feature = json['feature'];\n    var curve = new QuadBezierCurve(feature['geometry']['coordinates'], json['options']);\n    curve.setProperties(feature['properties']);\n    return curve;\n  };\n  var _proto = QuadBezierCurve.prototype;\n  _proto._toJSON = function _toJSON(options) {\n    return {\n      'feature': this.toGeoJSON(options),\n      'subType': 'QuadBezierCurve'\n    };\n  };\n  _proto._paintOn = function _paintOn(ctx, points, lineOpacity) {\n    ctx.beginPath();\n    ctx.moveTo(points[0].x, points[0].y);\n    this._quadraticCurve(ctx, points, lineOpacity);\n    Canvas._stroke(ctx, lineOpacity);\n    this._paintArrow(ctx, points, lineOpacity);\n  };\n  _proto._getArrowPoints = function _getArrowPoints(arrows, segments, lineWidth, arrowStyle, tolerance) {\n    return this._getCurveArrowPoints(arrows, segments, lineWidth, arrowStyle, tolerance, 2);\n  };\n  return QuadBezierCurve;\n}(Curve);\nQuadBezierCurve.registerJSONType('QuadBezierCurve');\n\nvar defaultSymbol$1 = {\n  'textFaceName': 'monospace',\n  'textSize': 12,\n  'textLineSpacing': 8,\n  'textWrapCharacter': '\\n',\n  'textHorizontalAlignment': 'middle',\n  'textVerticalAlignment': 'middle'\n};\nvar defaultBoxSymbol = {\n  'markerType': 'square',\n  'markerLineColor': '#000',\n  'markerLineWidth': 2,\n  'markerLineOpacity': 1,\n  'markerFill': '#fff',\n  'markerOpacity': 1\n};\nvar TextMarker = function (_Marker) {\n  _inheritsLoose(TextMarker, _Marker);\n  function TextMarker() {\n    return _Marker.apply(this, arguments) || this;\n  }\n  var _proto = TextMarker.prototype;\n  _proto.getContent = function getContent() {\n    return this._content;\n  };\n  _proto.setContent = function setContent(content) {\n    var old = this._content;\n    this._content = escapeSpecialChars(content);\n    this._refresh();\n    this._fireEvent('contentchange', {\n      'old': old,\n      'new': content\n    });\n    return this;\n  };\n  _proto.onAdd = function onAdd() {\n    this._refresh();\n  };\n  _proto.toJSON = function toJSON() {\n    var json = _Marker.prototype.toJSON.call(this);\n    delete json['symbol'];\n    return json;\n  };\n  _proto.setSymbol = function setSymbol(symbol) {\n    if (this._refreshing || !symbol) {\n      return _Marker.prototype.setSymbol.call(this, symbol);\n    }\n    var s = this._parseSymbol(symbol);\n    if (this.setTextStyle) {\n      var style = this.getTextStyle() || {};\n      style.symbol = s[0];\n      this.setTextStyle(style);\n    } else if (this.setTextSymbol) {\n      this.setTextSymbol(s[0]);\n    }\n    if (this.setBoxStyle) {\n      var _style = this.getBoxStyle() || {};\n      _style.symbol = s[1];\n      this.setBoxStyle(_style);\n    } else if (this.setBoxSymbol) {\n      this.setBoxSymbol(s[1]);\n    }\n    return this;\n  };\n  _proto._parseSymbol = function _parseSymbol(symbol) {\n    var t = {};\n    var b = {};\n    for (var p in symbol) {\n      if (hasOwn(symbol, p)) {\n        if (p.indexOf('text') === 0) {\n          t[p] = symbol[p];\n        } else {\n          b[p] = symbol[p];\n        }\n      }\n    }\n    return [t, b];\n  };\n  _proto._getTextSize = function _getTextSize(symbol) {\n    return splitTextToRow(this._content, symbol)['size'];\n  };\n  _proto._getInternalSymbol = function _getInternalSymbol() {\n    return this._symbol;\n  };\n  _proto._getDefaultTextSymbol = function _getDefaultTextSymbol() {\n    return extend({}, defaultSymbol$1);\n  };\n  _proto._getDefaultBoxSymbol = function _getDefaultBoxSymbol() {\n    return extend({}, defaultBoxSymbol);\n  };\n  _proto._getDefaultPadding = function _getDefaultPadding() {\n    return [12, 8];\n  };\n  return TextMarker;\n}(Marker);\n\nvar options$b = {\n  'textStyle': {\n    'wrap': true,\n    'padding': [12, 8],\n    'verticalAlignment': 'middle',\n    'horizontalAlignment': 'middle'\n  },\n  'boxSymbol': null\n};\nvar TextBox = function (_TextMarker) {\n  _inheritsLoose(TextBox, _TextMarker);\n  function TextBox(content, coordinates, width, height, options) {\n    var _this;\n    if (options === void 0) {\n      options = {};\n    }\n    _this = _TextMarker.call(this, coordinates, options) || this;\n    _this._content = escapeSpecialChars(content);\n    _this._width = isNil(width) ? 100 : width;\n    _this._height = isNil(height) ? 40 : height;\n    if (options.boxSymbol) {\n      _this.setBoxSymbol(options.boxSymbol);\n    }\n    if (options.textStyle) {\n      _this.setTextStyle(options.textStyle);\n    }\n    _this._refresh();\n    return _this;\n  }\n  var _proto = TextBox.prototype;\n  _proto.getWidth = function getWidth() {\n    return this._width;\n  };\n  _proto.setWidth = function setWidth(width) {\n    this._width = width;\n    this._refresh();\n    return this;\n  };\n  _proto.getHeight = function getHeight() {\n    return this._height;\n  };\n  _proto.setHeight = function setHeight(height) {\n    this._height = height;\n    this._refresh();\n    return this;\n  };\n  _proto.getBoxSymbol = function getBoxSymbol() {\n    return extend({}, this.options.boxSymbol);\n  };\n  _proto.setBoxSymbol = function setBoxSymbol(symbol) {\n    this.options.boxSymbol = symbol ? extend({}, symbol) : symbol;\n    if (this.getSymbol()) {\n      this._refresh();\n    }\n    return this;\n  };\n  _proto.getTextStyle = function getTextStyle() {\n    if (!this.options.textStyle) {\n      return null;\n    }\n    return extend({}, this.options.textStyle);\n  };\n  _proto.setTextStyle = function setTextStyle(style) {\n    this.options.textStyle = style ? extend({}, style) : style;\n    if (this.getSymbol()) {\n      this._refresh();\n    }\n    return this;\n  };\n  TextBox.fromJSON = function fromJSON(json) {\n    var feature = json['feature'];\n    var textBox = new TextBox(json['content'], feature['geometry']['coordinates'], json['width'], json['height'], json['options']);\n    textBox.setProperties(feature['properties']);\n    textBox.setId(feature['id']);\n    if (json['symbol']) {\n      textBox.setSymbol(json['symbol']);\n    }\n    return textBox;\n  };\n  _proto._toJSON = function _toJSON(options) {\n    return {\n      'feature': this.toGeoJSON(options),\n      'width': this.getWidth(),\n      'height': this.getHeight(),\n      'subType': 'TextBox',\n      'content': this._content\n    };\n  };\n  _proto._refresh = function _refresh() {\n    var textStyle = this.getTextStyle() || {},\n      padding = textStyle['padding'] || [12, 8];\n    var maxWidth, maxHeight;\n    if (isFunctionDefinition(this._width)) {\n      maxWidth = JSON.parse(JSON.stringify(this._width));\n      var stops = maxWidth.stops;\n      if (stops) {\n        for (var i = 0; i < stops.length; i++) {\n          stops[i][1] = stops[i][1] - 2 * padding[0];\n        }\n      }\n    } else {\n      maxWidth = this._width - 2 * padding[0];\n    }\n    if (isFunctionDefinition(this._height)) {\n      maxHeight = JSON.parse(JSON.stringify(this._height));\n      var _stops = maxHeight.stops;\n      if (_stops) {\n        for (var _i = 0; _i < _stops.length; _i++) {\n          _stops[_i][1] = _stops[_i][1] - 2 * padding[1];\n        }\n      }\n    } else {\n      maxHeight = this._height - 2 * padding[1];\n    }\n    var symbol = extend({}, textStyle.symbol || this._getDefaultTextSymbol(), this.options.boxSymbol || this._getDefaultBoxSymbol(), {\n      'textName': this._content,\n      'markerWidth': this._width,\n      'markerHeight': this._height,\n      'textHorizontalAlignment': 'middle',\n      'textVerticalAlignment': 'middle',\n      'textMaxWidth': maxWidth,\n      'textMaxHeight': maxHeight\n    });\n    if (textStyle['wrap'] && !symbol['textWrapWidth']) {\n      symbol['textWrapWidth'] = maxWidth;\n    }\n    var hAlign = textStyle['horizontalAlignment'];\n    symbol['textDx'] = symbol['markerDx'] || 0;\n    var offsetX;\n    if (isFunctionDefinition(this._width)) {\n      offsetX = JSON.parse(JSON.stringify(this._width));\n      var _stops2 = offsetX.stops;\n      if (_stops2) {\n        for (var _i2 = 0; _i2 < _stops2.length; _i2++) {\n          _stops2[_i2][1] = _stops2[_i2][1] / 2 - padding[0];\n          if (hAlign === 'left') {\n            _stops2[_i2][1] *= -1;\n          }\n        }\n      }\n    } else {\n      offsetX = symbol['markerWidth'] / 2 - padding[0];\n      if (hAlign === 'left') {\n        offsetX *= -1;\n      }\n    }\n    if (hAlign === 'left') {\n      symbol['textHorizontalAlignment'] = 'right';\n      symbol['textDx'] = offsetX;\n    } else if (hAlign === 'right') {\n      symbol['textHorizontalAlignment'] = 'left';\n      symbol['textDx'] = offsetX;\n    }\n    var vAlign = textStyle['verticalAlignment'];\n    symbol['textDy'] = symbol['markerDy'] || 0;\n    var offsetY;\n    if (isFunctionDefinition(this._height)) {\n      offsetY = JSON.parse(JSON.stringify(this._height));\n      var _stops3 = offsetY.stops;\n      if (_stops3) {\n        for (var _i3 = 0; _i3 < _stops3.length; _i3++) {\n          _stops3[_i3][1] = _stops3[_i3][1] / 2 - padding[1];\n          if (vAlign === 'top') {\n            _stops3[_i3][1] *= -1;\n          }\n        }\n      }\n    } else {\n      offsetY = symbol['markerHeight'] / 2 - padding[1];\n      if (vAlign === 'top') {\n        offsetY *= -1;\n      }\n    }\n    if (vAlign === 'top') {\n      symbol['textVerticalAlignment'] = 'bottom';\n      symbol['textDy'] = offsetY;\n    } else if (vAlign === 'bottom') {\n      symbol['textVerticalAlignment'] = 'top';\n      symbol['textDy'] = offsetY;\n    }\n    this._refreshing = true;\n    this.updateSymbol(symbol);\n    delete this._refreshing;\n  };\n  _proto.startEdit = function startEdit(opts) {\n    var symbol = this._getCompiledSymbol();\n    if (isFunctionDefinition(this._width)) {\n      var markerWidth = symbol['markerWidth'];\n      this._oldWidth = this._width;\n      this.setWidth(markerWidth);\n    }\n    if (isFunctionDefinition(this._height)) {\n      var markerHeight = symbol['markerHeight'];\n      this._oldHeight = this._height;\n      this.setHeight(markerHeight);\n    }\n    _TextMarker.prototype.startEdit.call(this, opts);\n  };\n  _proto.endEdit = function endEdit() {\n    var map = this.getMap();\n    var zoom = map && map.getZoom();\n    if (this._oldWidth) {\n      var markerWidth = this._width;\n      var widthFn = interpolated(this._oldWidth);\n      var oldExpectedWidth = widthFn(zoom);\n      var scale = markerWidth / oldExpectedWidth;\n      var stops = this._oldWidth.stops;\n      for (var i = 0; i < stops.length; i++) {\n        stops[i][1] *= scale;\n      }\n      this.setWidth(this._oldWidth);\n      delete this._oldWidth;\n    }\n    if (this._oldHeight) {\n      var markerHeight = this._height;\n      var heightFn = interpolated(this._oldHeight);\n      var oldExpectedHeight = heightFn(zoom);\n      var _scale = markerHeight / oldExpectedHeight;\n      var _stops4 = this._oldHeight.stops;\n      for (var _i4 = 0; _i4 < _stops4.length; _i4++) {\n        _stops4[_i4][1] *= _scale;\n      }\n      this.setHeight(this._oldHeight);\n      delete this._oldHeight;\n    }\n    _TextMarker.prototype.endEdit.call(this);\n  };\n  return TextBox;\n}(TextMarker);\nTextBox.mergeOptions(options$b);\nTextBox.registerJSONType('TextBox');\n\nvar options$c = {\n  'boxStyle': null,\n  textSymbol: null\n};\nvar Label = function (_TextMarker) {\n  _inheritsLoose(Label, _TextMarker);\n  function Label(content, coordinates, options) {\n    var _this;\n    if (options === void 0) {\n      options = {};\n    }\n    _this = _TextMarker.call(this, coordinates, options) || this;\n    if (options.textSymbol) {\n      _this.setTextSymbol(options.textSymbol);\n    }\n    if (options.boxStyle) {\n      _this.setBoxStyle(options.boxStyle);\n    }\n    _this._content = escapeSpecialChars(content);\n    _this._refresh();\n    return _this;\n  }\n  var _proto = Label.prototype;\n  _proto.getBoxStyle = function getBoxStyle() {\n    if (!this.options.boxStyle) {\n      return null;\n    }\n    return extend({}, this.options.boxStyle);\n  };\n  _proto.setBoxStyle = function setBoxStyle(style) {\n    this.options.boxStyle = style ? extend({}, style) : style;\n    this._refresh();\n    return this;\n  };\n  _proto.getTextSymbol = function getTextSymbol() {\n    return extend({}, this._getDefaultTextSymbol(), this.options.textSymbol);\n  };\n  _proto.setTextSymbol = function setTextSymbol(symbol) {\n    this.options.textSymbol = symbol ? extend({}, symbol) : symbol;\n    this._refresh();\n    return this;\n  };\n  Label.fromJSON = function fromJSON(json) {\n    var feature = json['feature'];\n    var label = new Label(json['content'], feature['geometry']['coordinates'], json['options']);\n    label.setProperties(feature['properties']);\n    label.setId(feature['id']);\n    if (json['symbol']) {\n      label.setSymbol(json['symbol']);\n    }\n    return label;\n  };\n  _proto._canEdit = function _canEdit() {\n    return false;\n  };\n  _proto._toJSON = function _toJSON(options) {\n    return {\n      'feature': this.toGeoJSON(options),\n      'subType': 'Label',\n      'content': this._content\n    };\n  };\n  _proto._refresh = function _refresh() {\n    var symbol = extend({}, this.getTextSymbol(), {\n      'textName': this._content\n    });\n    var boxStyle = this.getBoxStyle();\n    if (boxStyle) {\n      extend(symbol, boxStyle.symbol);\n      var sizes = this._getBoxSize(symbol),\n        textSize = sizes[1],\n        padding = boxStyle['padding'] || this._getDefaultPadding();\n      var boxSize = sizes[0];\n      symbol['markerWidth'] = boxSize['width'];\n      symbol['markerHeight'] = boxSize['height'];\n      var dx = symbol['textDx'] || 0,\n        dy = symbol['textDy'] || 0,\n        textAlignPoint = getAlignPoint(textSize, symbol['textHorizontalAlignment'], symbol['textVerticalAlignment'])._add(dx, dy);\n      var hAlign = boxStyle['horizontalAlignment'] || 'middle';\n      symbol['markerDx'] = textAlignPoint.x;\n      if (hAlign === 'left') {\n        symbol['markerDx'] += symbol['markerWidth'] / 2 - padding[0];\n      } else if (hAlign === 'right') {\n        symbol['markerDx'] -= symbol['markerWidth'] / 2 - textSize['width'] - padding[0];\n      } else {\n        symbol['markerDx'] += textSize['width'] / 2;\n      }\n      var vAlign = boxStyle['verticalAlignment'] || 'middle';\n      symbol['markerDy'] = textAlignPoint.y;\n      if (vAlign === 'top') {\n        symbol['markerDy'] += symbol['markerHeight'] / 2 - padding[1];\n      } else if (vAlign === 'bottom') {\n        symbol['markerDy'] -= symbol['markerHeight'] / 2 - textSize['height'] - padding[1];\n      } else {\n        symbol['markerDy'] += textSize['height'] / 2;\n      }\n    }\n    this._refreshing = true;\n    this.updateSymbol(symbol);\n    delete this._refreshing;\n  };\n  _proto._getBoxSize = function _getBoxSize(symbol) {\n    if (!symbol['markerType']) {\n      symbol['markerType'] = 'square';\n    }\n    var boxStyle = this.getBoxStyle();\n    var size = this._getTextSize(symbol);\n    var width, height;\n    var padding = boxStyle['padding'] || this._getDefaultPadding();\n    width = size['width'] + padding[0] * 2;\n    height = size['height'] + padding[1] * 2;\n    if (boxStyle['minWidth']) {\n      if (!width || width < boxStyle['minWidth']) {\n        width = boxStyle['minWidth'];\n      }\n    }\n    if (boxStyle['minHeight']) {\n      if (!height || height < boxStyle['minHeight']) {\n        height = boxStyle['minHeight'];\n      }\n    }\n    return [new Size(width, height), size];\n  };\n  return Label;\n}(TextMarker);\nLabel.mergeOptions(options$c);\nLabel.registerJSONType('Label');\n\nvar Connectable = function Connectable(Base) {\n  return function (_Base) {\n    _inheritsLoose(_class, _Base);\n    function _class() {\n      return _Base.apply(this, arguments) || this;\n    }\n    _class._hasConnectors = function _hasConnectors(geometry) {\n      return !isNil(geometry.__connectors) && geometry.__connectors.length > 0;\n    };\n    _class._getConnectors = function _getConnectors(geometry) {\n      return geometry.__connectors;\n    };\n    var _proto = _class.prototype;\n    _proto.getConnectSource = function getConnectSource() {\n      return this._connSource;\n    };\n    _proto.setConnectSource = function setConnectSource(src) {\n      var target = this._connTarget;\n      this.onRemove();\n      this._connSource = src;\n      this._connTarget = target;\n      this.onAdd();\n      return this;\n    };\n    _proto.getConnectTarget = function getConnectTarget() {\n      return this._connTarget;\n    };\n    _proto.setConnectTarget = function setConnectTarget(target) {\n      var src = this._connSource;\n      this.onRemove();\n      this._connSource = src;\n      this._connTarget = target;\n      this._updateCoordinates();\n      this._registerEvents();\n      return this;\n    };\n    _proto._updateCoordinates = function _updateCoordinates() {\n      var map = this.getMap();\n      if (!map && this._connSource) {\n        map = this._connSource.getMap();\n      }\n      if (!map && this._connTarget) {\n        map = this._connTarget.getMap();\n      }\n      if (!map) {\n        return;\n      }\n      if (!this._connSource || !this._connTarget) {\n        return;\n      }\n      var srcPoints = this._connSource._getConnectPoints();\n      var targetPoints = this._connTarget._getConnectPoints();\n      var minDist = 0;\n      var oldCoordinates = this.getCoordinates();\n      var c1, c2;\n      for (var i = 0, len = srcPoints.length; i < len; i++) {\n        var p1 = srcPoints[i];\n        for (var j = 0, length = targetPoints.length; j < length; j++) {\n          var p2 = targetPoints[j];\n          var dist = map.computeLength(p1, p2);\n          if (i === 0 && j === 0) {\n            c1 = p1;\n            c2 = p2;\n            minDist = dist;\n          } else if (dist < minDist) {\n            c1 = p1;\n            c2 = p2;\n          }\n        }\n      }\n      if (!isArrayHasData(oldCoordinates) || !oldCoordinates[0].equals(c1) || !oldCoordinates[1].equals(c2)) {\n        this.setCoordinates([c1, c2]);\n      }\n    };\n    _proto.onAdd = function onAdd() {\n      this._registerEvents();\n      this._updateCoordinates();\n    };\n    _proto.onRemove = function onRemove() {\n      if (this._connSource) {\n        if (this._connSource.__connectors) {\n          removeFromArray(this, this._connSource.__connectors);\n        }\n        this._connSource.off('dragging positionchange', this._updateCoordinates, this).off('remove', this.onRemove, this);\n        this._connSource.off('dragstart mousedown mouseover', this._showConnect, this);\n        this._connSource.off('dragend mouseup mouseout', this.hide, this);\n        this._connSource.off('show', this._showConnect, this).off('hide', this.hide, this);\n        delete this._connSource;\n      }\n      if (this._connTarget) {\n        removeFromArray(this, this._connTarget.__connectors);\n        this._connTarget.off('dragging positionchange', this._updateCoordinates, this).off('remove', this.onRemove, this);\n        this._connTarget.off('show', this._showConnect, this).off('hide', this.hide, this);\n        delete this._connTarget;\n      }\n      if (!(this._connSource instanceof Geometry) || !(this._connTarget instanceof Geometry)) {\n        var map = this.getMap();\n        if (map) {\n          map.off('movestart moving moveend zoomstart zooming zoomend rotate pitch fovchange spatialreferencechange', this._updateCoordinates, this);\n        }\n      }\n    };\n    _proto._showConnect = function _showConnect() {\n      if (!this._connSource || !this._connTarget) {\n        return;\n      }\n      if (this._connSource.isVisible() && this._connTarget.isVisible()) {\n        this._updateCoordinates();\n        this.show();\n      }\n    };\n    _proto._registerEvents = function _registerEvents() {\n      if (!this._connSource || !this._connTarget) {\n        return;\n      }\n      if (!this._connSource.__connectors) {\n        this._connSource.__connectors = [];\n      }\n      if (!this._connTarget.__connectors) {\n        this._connTarget.__connectors = [];\n      }\n      this._connSource.__connectors.push(this);\n      this._connTarget.__connectors.push(this);\n      this._connSource.on('dragging positionchange', this._updateCoordinates, this).on('remove', this.remove, this);\n      this._connTarget.on('dragging positionchange', this._updateCoordinates, this).on('remove', this.remove, this);\n      this._connSource.on('show', this._showConnect, this).on('hide', this.hide, this);\n      this._connTarget.on('show', this._showConnect, this).on('hide', this.hide, this);\n      var trigger = this.options['showOn'];\n      this.hide();\n      if (trigger === 'moving') {\n        this._connSource.on('dragstart', this._showConnect, this).on('dragend', this.hide, this);\n        this._connTarget.on('dragstart', this._showConnect, this).on('dragend', this.hide, this);\n      } else if (trigger === 'click') {\n        this._connSource.on('mousedown', this._showConnect, this).on('mouseup', this.hide, this);\n        this._connTarget.on('mousedown', this._showConnect, this).on('mouseup', this.hide, this);\n      } else if (trigger === 'mouseover') {\n        this._connSource.on('mouseover', this._showConnect, this).on('mouseout', this.hide, this);\n        this._connTarget.on('mouseover', this._showConnect, this).on('mouseout', this.hide, this);\n      } else {\n        this._showConnect();\n      }\n      if (!(this._connSource instanceof Geometry) || !(this._connTarget instanceof Geometry)) {\n        var map = this.getMap();\n        if (map) {\n          map.on('movestart moving moveend zoomstart zooming zoomend rotate pitch fovchange spatialreferencechange', this._updateCoordinates, this);\n        }\n      }\n    };\n    return _class;\n  }(Base);\n};\nvar options$d = {\n  showOn: 'always'\n};\nvar ConnectorLine = function (_Connectable) {\n  _inheritsLoose(ConnectorLine, _Connectable);\n  function ConnectorLine(src, target, options) {\n    var _this;\n    _this = _Connectable.call(this, null, options) || this;\n    if (arguments.length === 1) {\n      options = src;\n      src = null;\n      target = null;\n    }\n    _this._connSource = src;\n    _this._connTarget = target;\n    return _this;\n  }\n  return ConnectorLine;\n}(Connectable(LineString));\nConnectorLine.mergeOptions(options$d);\nConnectorLine.registerJSONType('ConnectorLine');\nvar ArcConnectorLine = function (_Connectable2) {\n  _inheritsLoose(ArcConnectorLine, _Connectable2);\n  function ArcConnectorLine(src, target, options) {\n    var _this2;\n    _this2 = _Connectable2.call(this, null, options) || this;\n    if (arguments.length === 1) {\n      options = src;\n      src = null;\n      target = null;\n    }\n    _this2._connSource = src;\n    _this2._connTarget = target;\n    return _this2;\n  }\n  return ArcConnectorLine;\n}(Connectable(ArcCurve));\nArcConnectorLine.mergeOptions(options$d);\nArcConnectorLine.registerJSONType('ArcConnectorLine');\n\nvar options$e = {\n  'drawImmediate': false,\n  'geometryEvents': true,\n  'geometryEventTolerance': 1\n};\nvar TMP_EVENTS_ARR = [];\nvar OverlayLayer = function (_Layer) {\n  _inheritsLoose(OverlayLayer, _Layer);\n  function OverlayLayer(id, geometries, options) {\n    var _this;\n    if (geometries && !(geometries instanceof Geometry) && !Array.isArray(geometries) && GEOJSON_TYPES.indexOf(geometries.type) < 0) {\n      options = geometries;\n      geometries = null;\n    }\n    _this = _Layer.call(this, id, options) || this;\n    _this._maxZIndex = 0;\n    _this._minZIndex = 0;\n    _this._initCache();\n    if (geometries) {\n      _this.addGeometry(geometries);\n    }\n    var style = _this.options['style'];\n    if (style) {\n      _this.setStyle(style);\n    }\n    return _this;\n  }\n  var _proto = OverlayLayer.prototype;\n  _proto.getGeometryById = function getGeometryById(id) {\n    if (isNil(id) || id === '') {\n      return null;\n    }\n    if (!this._geoMap[id]) {\n      return null;\n    }\n    return this._geoMap[id];\n  };\n  _proto.getGeometries = function getGeometries(filter, context) {\n    if (!filter) {\n      return this._geoList.slice(0);\n    }\n    var result = [];\n    var geometry, filtered;\n    for (var i = 0, l = this._geoList.length; i < l; i++) {\n      geometry = this._geoList[i];\n      if (context) {\n        filtered = filter.call(context, geometry);\n      } else {\n        filtered = filter(geometry);\n      }\n      if (filtered) {\n        result.push(geometry);\n      }\n    }\n    return result;\n  };\n  _proto.getFirstGeometry = function getFirstGeometry() {\n    if (!this._geoList.length) {\n      return null;\n    }\n    return this._geoList[0];\n  };\n  _proto.getLastGeometry = function getLastGeometry() {\n    var len = this._geoList.length;\n    if (len === 0) {\n      return null;\n    }\n    return this._geoList[len - 1];\n  };\n  _proto.getCount = function getCount() {\n    return this._geoList.length;\n  };\n  _proto.getExtent = function getExtent() {\n    if (this.getCount() === 0) {\n      return null;\n    }\n    var extent = new Extent(this.getProjection());\n    this.forEach(function (g) {\n      extent._combine(g.getExtent());\n    });\n    return extent;\n  };\n  _proto.forEach = function forEach(fn, context) {\n    var copyOnWrite = this._geoList.slice(0);\n    for (var i = 0, l = copyOnWrite.length; i < l; i++) {\n      if (!context) {\n        fn(copyOnWrite[i], i);\n      } else {\n        fn.call(context, copyOnWrite[i], i);\n      }\n    }\n    return this;\n  };\n  _proto.filter = function filter(fn, context) {\n    var selected = [];\n    var isFn = isFunction(fn);\n    var filter = isFn ? fn : createFilter(fn);\n    this.forEach(function (geometry) {\n      var g = isFn ? geometry : getFilterFeature(geometry);\n      if (context ? filter.call(context, g) : filter(g)) {\n        selected.push(geometry);\n      }\n    }, this);\n    return selected;\n  };\n  _proto.isEmpty = function isEmpty$$1() {\n    return !this._geoList.length;\n  };\n  _proto.addGeometry = function addGeometry(geometries, fitView) {\n    if (!geometries) {\n      return this;\n    }\n    if (geometries.type === 'FeatureCollection') {\n      return this.addGeometry(GeoJSON.toGeometry(geometries), fitView);\n    } else if (!Array.isArray(geometries)) {\n      var count = arguments.length;\n      var last = arguments[count - 1];\n      geometries = Array.prototype.slice.call(arguments, 0, count - 1);\n      fitView = last;\n      if (last && isObject(last) && ('type' in last || last instanceof Geometry)) {\n        geometries.push(last);\n        fitView = false;\n      }\n      return this.addGeometry(geometries, fitView);\n    } else if (geometries.length === 0) {\n      return this;\n    }\n    this._initCache();\n    var extent;\n    if (fitView) {\n      extent = new Extent();\n    }\n    this._toSort = this._maxZIndex > 0;\n    var geos = [];\n    for (var i = 0, l = geometries.length; i < l; i++) {\n      var geo = geometries[i];\n      if (!geo) {\n        throw new Error('Invalid geometry to add to layer(' + this.getId() + ') at index:' + i);\n      }\n      if (geo.getLayer && geo.getLayer() === this) {\n        continue;\n      }\n      if (!(geo instanceof Geometry)) {\n        geo = Geometry.fromJSON(geo);\n        if (Array.isArray(geo)) {\n          for (var ii = 0, ll = geo.length; ii < ll; ii++) {\n            this._add(geo[ii], extent, i);\n            geos.push(geo[ii]);\n          }\n        }\n      }\n      if (!Array.isArray(geo)) {\n        this._add(geo, extent, i);\n        geos.push(geo);\n      }\n    }\n    var map = this.getMap();\n    if (map) {\n      this._getRenderer().onGeometryAdd(geos);\n      if (extent && !isNil(extent.xmin)) {\n        var center = extent.getCenter();\n        var z = map.getFitZoom(extent);\n        if (isObject(fitView)) {\n          var step = isFunction(fitView.step) ? fitView.step : function () {\n            return undefined;\n          };\n          map.animateTo({\n            center: center,\n            zoom: z\n          }, extend({\n            duration: map.options.zoomAnimationDuration,\n            easing: 'out'\n          }, fitView), step);\n        } else if (fitView === true) {\n          map.setCenterAndZoom(center, z);\n        }\n      }\n    }\n    this.fire('addgeo', {\n      'geometries': geometries\n    });\n    return this;\n  };\n  _proto.getGeoMinZIndex = function getGeoMinZIndex() {\n    return this._minZIndex;\n  };\n  _proto.getGeoMaxZIndex = function getGeoMaxZIndex() {\n    return this._maxZIndex;\n  };\n  _proto._add = function _add(geo, extent, i) {\n    if (!this._toSort) {\n      this._toSort = geo.getZIndex() !== 0;\n    }\n    this._updateZIndex(geo.getZIndex());\n    var geoId = geo.getId();\n    if (!isNil(geoId)) {\n      if (!isNil(this._geoMap[geoId])) {\n        throw new Error('Duplicate geometry id in layer(' + this.getId() + '):' + geoId + ', at index:' + i);\n      }\n      this._geoMap[geoId] = geo;\n    }\n    var internalId = UID();\n    geo._setInternalId(internalId);\n    this._geoList.push(geo);\n    this.onAddGeometry(geo);\n    geo._bindLayer(this);\n    if (geo.onAdd) {\n      geo.onAdd();\n    }\n    if (extent) {\n      extent._combine(geo.getExtent());\n    }\n    geo._fireEvent('add', {\n      'layer': this\n    });\n    if (this._cookedStyles) {\n      this._styleGeometry(geo);\n    }\n  };\n  _proto.removeGeometry = function removeGeometry(geometries) {\n    if (!Array.isArray(geometries)) {\n      return this.removeGeometry([geometries]);\n    }\n    for (var i = geometries.length - 1; i >= 0; i--) {\n      if (!(geometries[i] instanceof Geometry)) {\n        geometries[i] = this.getGeometryById(geometries[i]);\n      }\n      if (!geometries[i] || this !== geometries[i].getLayer()) continue;\n      geometries[i].remove();\n    }\n    this.fire('removegeo', {\n      'geometries': geometries\n    });\n    return this;\n  };\n  _proto.clear = function clear() {\n    this._clearing = true;\n    this.forEach(function (geo) {\n      geo.remove();\n    });\n    this._geoMap = {};\n    var old = this._geoList;\n    this._geoList = [];\n    var renderer = this._getRenderer();\n    if (renderer) {\n      renderer.onGeometryRemove(old);\n      if (renderer.clearImageData) {\n        renderer.clearImageData();\n        delete renderer._lastGeosToDraw;\n      }\n    }\n    this._clearing = false;\n    this.fire('clear');\n    return this;\n  };\n  _proto.onRemoveGeometry = function onRemoveGeometry(geometry) {\n    if (!geometry || this._clearing) {\n      return;\n    }\n    if (this !== geometry.getLayer()) {\n      return;\n    }\n    var internalId = geometry._getInternalId();\n    if (isNil(internalId)) {\n      return;\n    }\n    var geoId = geometry.getId();\n    if (!isNil(geoId)) {\n      delete this._geoMap[geoId];\n    }\n    var idx = this._findInList(geometry);\n    if (idx >= 0) {\n      this._geoList.splice(idx, 1);\n    }\n    if (this._getRenderer()) {\n      this._getRenderer().onGeometryRemove([geometry]);\n    }\n  };\n  _proto.getStyle = function getStyle() {\n    if (!this.options['style']) {\n      return null;\n    }\n    return this.options['style'];\n  };\n  _proto.setStyle = function setStyle(style) {\n    this.options.style = style;\n    style = parseStyleRootPath(style);\n    this._cookedStyles = compileStyle(style);\n    this.forEach(function (geometry) {\n      this._styleGeometry(geometry);\n    }, this);\n    this.fire('setstyle', {\n      'style': style\n    });\n    return this;\n  };\n  _proto._styleGeometry = function _styleGeometry(geometry) {\n    if (!this._cookedStyles) {\n      return false;\n    }\n    var g = getFilterFeature(geometry);\n    for (var i = 0, len = this._cookedStyles.length; i < len; i++) {\n      if (this._cookedStyles[i]['filter'](g) === true) {\n        geometry._setExternSymbol(this._cookedStyles[i]['symbol']);\n        return true;\n      }\n    }\n    return false;\n  };\n  _proto.removeStyle = function removeStyle() {\n    if (!this.options.style) {\n      return this;\n    }\n    delete this.options.style;\n    delete this._cookedStyles;\n    this.forEach(function (geometry) {\n      geometry._setExternSymbol(null);\n    }, this);\n    this.fire('removestyle');\n    return this;\n  };\n  _proto.onAddGeometry = function onAddGeometry(geo) {\n    var style = this.getStyle();\n    if (style) {\n      this._styleGeometry(geo);\n    }\n  };\n  _proto.hide = function hide() {\n    for (var i = 0, l = this._geoList.length; i < l; i++) {\n      this._geoList[i].onHide();\n    }\n    return Layer.prototype.hide.call(this);\n  };\n  _proto._initCache = function _initCache() {\n    if (!this._geoList) {\n      this._geoList = [];\n      this._geoMap = {};\n    }\n  };\n  _proto._updateZIndex = function _updateZIndex() {\n    for (var _len = arguments.length, zIndex = new Array(_len), _key = 0; _key < _len; _key++) {\n      zIndex[_key] = arguments[_key];\n    }\n    this._maxZIndex = Math.max(this._maxZIndex, Math.max.apply(Math, zIndex));\n    this._minZIndex = Math.min(this._minZIndex, Math.min.apply(Math, zIndex));\n  };\n  _proto._sortGeometries = function _sortGeometries() {\n    var _this2 = this;\n    if (!this._toSort) {\n      return;\n    }\n    this._maxZIndex = 0;\n    this._minZIndex = 0;\n    this._geoList.sort(function (a, b) {\n      _this2._updateZIndex(a.getZIndex(), b.getZIndex());\n      return _this2._compare(a, b);\n    });\n    this._toSort = false;\n  };\n  _proto._compare = function _compare(a, b) {\n    if (a.getZIndex() === b.getZIndex()) {\n      return a._getInternalId() - b._getInternalId();\n    }\n    return a.getZIndex() - b.getZIndex();\n  };\n  _proto._findInList = function _findInList(geo) {\n    var len = this._geoList.length;\n    if (len === 0) {\n      return -1;\n    }\n    this._sortGeometries();\n    var low = 0,\n      high = len - 1,\n      middle;\n    while (low <= high) {\n      middle = Math.floor((low + high) / 2);\n      if (this._geoList[middle] === geo) {\n        return middle;\n      } else if (this._compare(this._geoList[middle], geo) > 0) {\n        high = middle - 1;\n      } else {\n        low = middle + 1;\n      }\n    }\n    return -1;\n  };\n  _proto._onGeometryEvent = function _onGeometryEvent(param) {\n    if (!param || !param['target']) {\n      return;\n    }\n    var type = param['type'];\n    if (type === 'idchange') {\n      this._onGeometryIdChange(param);\n    } else if (type === 'zindexchange') {\n      this._onGeometryZIndexChange(param);\n    } else if (type === 'positionchange') {\n      this._onGeometryPositionChange(param);\n    } else if (type === 'shapechange') {\n      this._onGeometryShapeChange(param);\n    } else if (type === 'symbolchange') {\n      this._onGeometrySymbolChange(param);\n    } else if (type === 'show') {\n      this._onGeometryShow(param);\n    } else if (type === 'hide') {\n      this._onGeometryHide(param);\n    } else if (type === 'propertieschange') {\n      this._onGeometryPropertiesChange(param);\n    }\n  };\n  _proto._onGeometryIdChange = function _onGeometryIdChange(param) {\n    if (param['new'] === param['old']) {\n      if (this._geoMap[param['old']] && this._geoMap[param['old']] === param['target']) {\n        return;\n      }\n    }\n    if (!isNil(param['new'])) {\n      if (this._geoMap[param['new']]) {\n        throw new Error('Duplicate geometry id in layer(' + this.getId() + '):' + param['new']);\n      }\n      this._geoMap[param['new']] = param['target'];\n    }\n    if (!isNil(param['old']) && param['new'] !== param['old']) {\n      delete this._geoMap[param['old']];\n    }\n  };\n  _proto._onGeometryZIndexChange = function _onGeometryZIndexChange(param) {\n    if (param['old'] !== param['new']) {\n      this._updateZIndex(param['new']);\n      this._toSort = true;\n      if (this._getRenderer()) {\n        this._getRenderer().onGeometryZIndexChange(param);\n      }\n    }\n  };\n  _proto._onGeometryPositionChange = function _onGeometryPositionChange(param) {\n    if (this._getRenderer()) {\n      this._getRenderer().onGeometryPositionChange(param);\n    }\n  };\n  _proto._onGeometryShapeChange = function _onGeometryShapeChange(param) {\n    if (this._getRenderer()) {\n      this._getRenderer().onGeometryShapeChange(param);\n    }\n  };\n  _proto._onGeometrySymbolChange = function _onGeometrySymbolChange(param) {\n    if (this._getRenderer()) {\n      this._getRenderer().onGeometrySymbolChange(param);\n    }\n  };\n  _proto._onGeometryShow = function _onGeometryShow(param) {\n    if (this._getRenderer()) {\n      this._getRenderer().onGeometryShow(param);\n    }\n  };\n  _proto._onGeometryHide = function _onGeometryHide(param) {\n    if (this._getRenderer()) {\n      this._getRenderer().onGeometryHide(param);\n    }\n  };\n  _proto._onGeometryPropertiesChange = function _onGeometryPropertiesChange(param) {\n    if (this._getRenderer()) {\n      this._getRenderer().onGeometryPropertiesChange(param);\n    }\n  };\n  _proto._hasGeoListeners = function _hasGeoListeners(eventTypes) {\n    if (!eventTypes) {\n      return false;\n    }\n    if (!Array.isArray(eventTypes)) {\n      TMP_EVENTS_ARR[0] = eventTypes;\n      eventTypes = TMP_EVENTS_ARR;\n    }\n    var geos = this.getGeometries() || [];\n    for (var i = 0, len = geos.length; i < len; i++) {\n      for (var j = 0, len1 = eventTypes.length; j < len1; j++) {\n        var eventType = eventTypes[j];\n        var listens = geos[i].listens(eventType);\n        if (listens > 0) {\n          return true;\n        }\n      }\n    }\n    return false;\n  };\n  return OverlayLayer;\n}(Layer);\nOverlayLayer.mergeOptions(options$e);\n\nvar TEMP_EXTENT$7 = new PointExtent();\nvar options$f = {\n  'debug': false,\n  'enableSimplify': true,\n  'defaultIconSize': [20, 20],\n  'cacheVectorOnCanvas': true,\n  'cacheSvgOnCanvas': Browser$1.gecko,\n  'enableAltitude': false,\n  'altitudeProperty': 'altitude',\n  'drawAltitude': false,\n  'sortByDistanceToCamera': false,\n  'roundPoint': false,\n  'altitude': 0,\n  'clipBBoxBufferSize': 3,\n  'collision': false,\n  'collisionBufferSize': 2,\n  'collisionDelay': 250,\n  'collisionScope': 'layer'\n};\nvar VectorLayer = function (_OverlayLayer) {\n  _inheritsLoose(VectorLayer, _OverlayLayer);\n  function VectorLayer(id, geometries, options) {\n    return _OverlayLayer.call(this, id, geometries, options) || this;\n  }\n  var _proto = VectorLayer.prototype;\n  _proto.onConfig = function onConfig(conf) {\n    _OverlayLayer.prototype.onConfig.call(this, conf);\n    if (conf['enableAltitude'] || conf['drawAltitude'] || conf['altitudeProperty']) {\n      var renderer = this.getRenderer();\n      if (renderer && renderer.setToRedraw) {\n        renderer.setToRedraw();\n      }\n    }\n  };\n  _proto.identify = function identify(coordinate, options) {\n    if (options === void 0) {\n      options = {};\n    }\n    var renderer = this.getRenderer();\n    if (!(coordinate instanceof Coordinate)) {\n      coordinate = new Coordinate(coordinate);\n    }\n    var cp = this.getMap().coordToContainerPoint(coordinate);\n    if (options['onlyVisible'] && renderer && renderer.identifyAtPoint) {\n      return renderer.identifyAtPoint(cp, options);\n    }\n    return this._hitGeos(this._geoList, cp, options);\n  };\n  _proto.identifyAtPoint = function identifyAtPoint(point, options) {\n    if (options === void 0) {\n      options = {};\n    }\n    var renderer = this.getRenderer();\n    if (!(point instanceof Point)) {\n      point = new Point(point);\n    }\n    if (options['onlyVisible'] && renderer && renderer.identifyAtPoint) {\n      return renderer.identifyAtPoint(point, options);\n    }\n    return this._hitGeos(this._geoList, point, options);\n  };\n  _proto._hitGeos = function _hitGeos(geometries, cp, options) {\n    if (options === void 0) {\n      options = {};\n    }\n    var filter = options['filter'],\n      hits = [];\n    var tolerance = options['tolerance'];\n    var map = this.getMap();\n    var renderer = this.getRenderer();\n    var imageData = renderer && renderer.getImageData && renderer.getImageData();\n    if (imageData) {\n      var hitTolerance = 0;\n      for (var i = geometries.length - 1; i >= 0; i--) {\n        var t = geometries[i]._hitTestTolerance() + (tolerance || 0);\n        if (t > hitTolerance) {\n          hitTolerance = t;\n        }\n      }\n      var r = map.getDevicePixelRatio();\n      imageData.r = r;\n      var hit = false;\n      var cpx = cp.x - hitTolerance;\n      var cpy = cp.y - hitTolerance;\n      for (var _i = -hitTolerance; _i <= hitTolerance; _i++) {\n        for (var j = -hitTolerance; j <= hitTolerance; j++) {\n          var x = Math.round((cpx + _i) * r),\n            y = Math.round((cpy + j) * r);\n          var idx = y * imageData.width * 4 + x * 4;\n          if (imageData.data[idx + 3] > 0) {\n            hit = true;\n            break;\n          }\n        }\n        if (hit) {\n          break;\n        }\n      }\n      if (!hit) {\n        return hits;\n      }\n    }\n    for (var _i2 = geometries.length - 1; _i2 >= 0; _i2--) {\n      var geo = geometries[_i2];\n      if (!geo || !geo.isVisible() || !geo._getPainter() || !geo.options['interactive']) {\n        continue;\n      }\n      var painter = geo._getPainter();\n      var bbox = painter.getRenderBBOX && painter.getRenderBBOX();\n      if (bbox) {\n        var _x = cp.x,\n          _y = cp.y;\n        if (_x < bbox[0] || _y < bbox[1] || _x > bbox[2] || _y > bbox[3]) {\n          continue;\n        }\n      }\n      if (!(geo instanceof LineString) || !geo._getArrowStyle() && !(geo instanceof Curve)) {\n        var extent = geo.getContainerExtent(TEMP_EXTENT$7);\n        if (tolerance) {\n          extent = extent._expand(tolerance);\n        }\n        if (!extent || !extent.contains(cp)) {\n          continue;\n        }\n      }\n      if (geo._containsPoint(cp, tolerance) && (!filter || filter(geo))) {\n        hits.push(geo);\n        if (options['count']) {\n          if (hits.length >= options['count']) {\n            break;\n          }\n        }\n      }\n    }\n    return hits;\n  };\n  _proto.getAltitude = function getAltitude() {\n    return this.options['altitude'] || 0;\n  };\n  _proto.toJSON = function toJSON(options) {\n    if (!options) {\n      options = {};\n    }\n    var profile = {\n      'type': this.getJSONType(),\n      'id': this.getId(),\n      'options': this.config()\n    };\n    if (isNil(options['geometries']) || options['geometries']) {\n      var clipExtent;\n      if (options['clipExtent']) {\n        var map = this.getMap();\n        var projection = map ? map.getProjection() : null;\n        clipExtent = new Extent(options['clipExtent'], projection);\n      }\n      var geoJSONs = [];\n      var geometries = this.getGeometries();\n      for (var i = 0, len = geometries.length; i < len; i++) {\n        var geo = geometries[i];\n        var geoExt = geo.getExtent();\n        if (!geoExt || clipExtent && !clipExtent.intersects(geoExt)) {\n          continue;\n        }\n        var json = geo.toJSON(options['geometries']);\n        geoJSONs.push(json);\n      }\n      profile['geometries'] = geoJSONs;\n    }\n    return profile;\n  };\n  VectorLayer.fromJSON = function fromJSON(json) {\n    if (!json || json['type'] !== 'VectorLayer') {\n      return null;\n    }\n    var layer = new VectorLayer(json['id'], json['options']);\n    var geoJSONs = json['geometries'];\n    var geometries = [];\n    for (var i = 0; i < geoJSONs.length; i++) {\n      var geo = Geometry.fromJSON(geoJSONs[i]);\n      if (geo) {\n        geometries.push(geo);\n      }\n    }\n    layer.addGeometry(geometries);\n    return layer;\n  };\n  VectorLayer.getPainterClass = function getPainterClass() {\n    return Painter;\n  };\n  VectorLayer.getCollectionPainterClass = function getCollectionPainterClass() {\n    return CollectionPainter;\n  };\n  return VectorLayer;\n}(OverlayLayer);\nVectorLayer.mergeOptions(options$f);\nVectorLayer.registerJSONType('VectorLayer');\n\nvar key = '_map_tool';\nvar MapTool = function (_Eventable) {\n  _inheritsLoose(MapTool, _Eventable);\n  function MapTool() {\n    return _Eventable.apply(this, arguments) || this;\n  }\n  var _proto = MapTool.prototype;\n  _proto.addTo = function addTo(map) {\n    if (!map) {\n      return this;\n    }\n    this._map = map;\n    if (map[key]) {\n      map[key].disable();\n    }\n    if (this.onAdd) {\n      this.onAdd();\n    }\n    this.enable();\n    map[key] = this;\n    this._fireEvent('add');\n    return this;\n  };\n  _proto.getMap = function getMap() {\n    return this._map;\n  };\n  _proto.enable = function enable() {\n    var map = this._map;\n    if (!map || this._enabled) {\n      return this;\n    }\n    this._enabled = true;\n    this._switchEvents('off');\n    this._registerEvents();\n    if (this.onEnable) {\n      this.onEnable();\n    }\n    this._fireEvent('enable');\n    return this;\n  };\n  _proto.disable = function disable() {\n    if (!this._enabled || !this._map) {\n      return this;\n    }\n    this._enabled = false;\n    this._switchEvents('off');\n    if (this.onDisable) {\n      this.onDisable();\n    }\n    this._fireEvent('disable');\n    return this;\n  };\n  _proto.isEnabled = function isEnabled() {\n    if (!this._enabled) {\n      return false;\n    }\n    return true;\n  };\n  _proto.remove = function remove() {\n    if (!this._map) {\n      return this;\n    }\n    this.disable();\n    if (this._map) {\n      delete this._map[key];\n      delete this._map;\n    }\n    this._fireEvent('remove');\n    return this;\n  };\n  _proto._registerEvents = function _registerEvents() {\n    this._switchEvents('on');\n  };\n  _proto._switchEvents = function _switchEvents(to) {\n    var events = this.getEvents();\n    if (events) {\n      this._map[to](events, this);\n    }\n  };\n  _proto._fireEvent = function _fireEvent(eventName, param) {\n    if (!param) {\n      param = {};\n    }\n    this.fire(eventName, param);\n  };\n  return MapTool;\n}(Eventable(Class));\n\nvar options$g = {\n  'symbol': {\n    'lineColor': '#000',\n    'lineWidth': 2,\n    'lineOpacity': 1,\n    'polygonFill': '#fff',\n    'polygonOpacity': 0.3\n  },\n  'doubleClickZoom': false,\n  'mode': null,\n  'once': false,\n  'autoPanAtEdge': false,\n  'ignoreMouseleave': true,\n  'blockGeometryEvents': false\n};\nvar registeredMode = {};\nvar DrawTool = function (_MapTool) {\n  _inheritsLoose(DrawTool, _MapTool);\n  DrawTool.registerMode = function registerMode(name, modeAction) {\n    registeredMode[name.toLowerCase()] = modeAction;\n  };\n  DrawTool.getRegisterMode = function getRegisterMode(name) {\n    return registeredMode[name.toLowerCase()];\n  };\n  function DrawTool(options) {\n    var _this;\n    _this = _MapTool.call(this, options) || this;\n    _this._checkMode();\n    _this._events = {\n      'click': _this._clickHandler,\n      'mousemove touchmove': _this._mouseMoveHandler,\n      'dblclick': _this._doubleClickHandler,\n      'mousedown touchstart': _this._mouseDownHandler,\n      'mouseup touchend': _this._mouseUpHandler,\n      'mousemove': _this._mouseMoveHandler,\n      'mousedown': _this._mouseDownHandler,\n      'mouseup': _this._mouseUpHandler\n    };\n    return _this;\n  }\n  var _proto = DrawTool.prototype;\n  _proto.getMode = function getMode() {\n    if (this.options['mode']) {\n      return this.options['mode'].toLowerCase();\n    }\n    return null;\n  };\n  _proto.setMode = function setMode(mode) {\n    if (this._geometry) {\n      this._geometry.remove();\n      delete this._geometry;\n    }\n    this._clearStage();\n    this._switchEvents('off');\n    this.options['mode'] = mode;\n    this._checkMode();\n    if (this.isEnabled()) {\n      this._switchEvents('on');\n      this._restoreMapCfg();\n      this._saveMapCfg();\n    }\n    return this;\n  };\n  _proto.getSymbol = function getSymbol() {\n    var symbol = this.options['symbol'];\n    if (symbol) {\n      return extendSymbol(symbol);\n    } else {\n      return extendSymbol(this.options['symbol']);\n    }\n  };\n  _proto.setSymbol = function setSymbol(symbol) {\n    if (!symbol) {\n      return this;\n    }\n    this.options['symbol'] = symbol;\n    if (this._geometry) {\n      this._geometry.setSymbol(symbol);\n    }\n    return this;\n  };\n  _proto.getCurrentGeometry = function getCurrentGeometry() {\n    return this._geometry;\n  };\n  _proto.onAdd = function onAdd() {\n    this._checkMode();\n  };\n  _proto.onEnable = function onEnable() {\n    this._saveMapCfg();\n    this._drawToolLayer = this._getDrawLayer();\n    this._clearStage();\n    this._loadResources();\n    var map = this.getMap();\n    if (this.options['autoPanAtEdge']) {\n      this._mapAutoPanAtEdge = map.options['autoPanAtEdge'];\n      if (!this._mapAutoPanAtEdge) {\n        map.config({\n          autoPanAtEdge: true\n        });\n      }\n    }\n    this._geometryEvents = map.options['geometryEvents'];\n    if (this.options['blockGeometryEvents']) {\n      map.config('geometryEvents', false);\n    }\n    return this;\n  };\n  _proto.onDisable = function onDisable() {\n    var map = this.getMap();\n    this._restoreMapCfg();\n    this.endDraw({\n      ignoreEndEvent: true\n    });\n    if (this._map) {\n      map.removeLayer(this._getDrawLayer());\n      if (this.options['autoPanAtEdge']) {\n        if (!this._mapAutoPanAtEdge) {\n          map.config({\n            autoPanAtEdge: false\n          });\n        }\n      }\n    }\n    if (this.options['blockGeometryEvents']) {\n      map.config('geometryEvents', this._geometryEvents);\n    }\n    return this;\n  };\n  _proto.undo = function undo() {\n    var registerMode = this._getRegisterMode();\n    var action = registerMode.action;\n    if (!this._shouldRecordHistory(action) || !this._historyPointer) {\n      return this;\n    }\n    var coords = this._clickCoords.slice(0, --this._historyPointer);\n    registerMode.update(this.getMap().getProjection(), coords, this._geometry);\n    return this;\n  };\n  _proto.redo = function redo() {\n    var registerMode = this._getRegisterMode();\n    var action = registerMode.action;\n    if (!this._shouldRecordHistory(action) || isNil(this._historyPointer) || this._historyPointer === this._clickCoords.length) {\n      return this;\n    }\n    var coords = this._clickCoords.slice(0, ++this._historyPointer);\n    registerMode.update(this.getMap().getProjection(), coords, this._geometry);\n    return this;\n  };\n  _proto._shouldRecordHistory = function _shouldRecordHistory(actions) {\n    return Array.isArray(actions) && actions[0] === 'click' && actions[1] === 'mousemove' && actions[2] === 'dblclick';\n  };\n  _proto._checkMode = function _checkMode() {\n    this._getRegisterMode();\n  };\n  _proto._saveMapCfg = function _saveMapCfg() {\n    var map = this.getMap();\n    this._mapDoubleClickZoom = map.options['doubleClickZoom'];\n    map.config({\n      'doubleClickZoom': this.options['doubleClickZoom']\n    });\n    var actions = this._getRegisterMode()['action'];\n    var dragging = false;\n    for (var i = 0; i < actions.length; i++) {\n      if (actions[i].indexOf('mousedown') >= 0 || actions[i].indexOf('touchstart') >= 0) {\n        dragging = true;\n        break;\n      }\n    }\n    if (dragging) {\n      var _map = this.getMap();\n      this._mapDraggable = _map.options['draggable'];\n      _map.config({\n        'draggable': false\n      });\n    }\n  };\n  _proto._restoreMapCfg = function _restoreMapCfg() {\n    var map = this.getMap();\n    map.config({\n      'doubleClickZoom': this._mapDoubleClickZoom\n    });\n    if (!isNil(this._mapDraggable)) {\n      map.config('draggable', this._mapDraggable);\n    }\n    delete this._mapDraggable;\n    delete this._mapDoubleClickZoom;\n  };\n  _proto._loadResources = function _loadResources() {\n    var symbol = this.getSymbol();\n    var resources = getExternalResources(symbol);\n    if (resources.length > 0) {\n      this._drawToolLayer._getRenderer().loadResources(resources);\n    }\n  };\n  _proto._getProjection = function _getProjection() {\n    return this._map.getProjection();\n  };\n  _proto._getRegisterMode = function _getRegisterMode() {\n    var mode = this.getMode();\n    var registerMode = DrawTool.getRegisterMode(mode);\n    if (!registerMode) {\n      throw new Error(mode + ' is not a valid mode of DrawTool.');\n    }\n    return registerMode;\n  };\n  _proto.getEvents = function getEvents() {\n    var action = this._getRegisterMode()['action'];\n    var _events = {};\n    if (Array.isArray(action)) {\n      for (var i = 0; i < action.length; i++) {\n        _events[action[i]] = this._events[action[i]];\n      }\n      return _events;\n    }\n    return null;\n  };\n  _proto._mouseDownHandler = function _mouseDownHandler(event) {\n    this._createGeometry(event);\n  };\n  _proto._mouseUpHandler = function _mouseUpHandler(event) {\n    this.endDraw(event);\n  };\n  _proto._clickHandler = function _clickHandler(event) {\n    var map = this.getMap();\n    var registerMode = this._getRegisterMode();\n    if (this._clickCoords && this._clickCoords.length) {\n      var len = this._clickCoords.length;\n      var prjCoord = map._pointToPrj(event['point2d']);\n      if (this._clickCoords[len - 1].equals(prjCoord)) {\n        return;\n      }\n    }\n    if (!this._geometry) {\n      this._createGeometry(event);\n    } else {\n      var _prjCoord = map._pointToPrj(event['point2d']);\n      if (!isNil(this._historyPointer)) {\n        this._clickCoords = this._clickCoords.slice(0, this._historyPointer);\n      }\n      var snapTo = this._geometry.snapTo;\n      if (snapTo && isFunction(snapTo)) {\n        var snapResult = this._getSnapResult(snapTo, event.containerPoint);\n        _prjCoord = snapResult.prjCoord;\n        this._clickCoords = this._clickCoords.concat(snapResult.effectedVertex);\n        if (this._clickCoords[this._clickCoords.length - 1].equals(_prjCoord)) {\n          return;\n        }\n      }\n      this._clickCoords.push(_prjCoord);\n      this._historyPointer = this._clickCoords.length;\n      event.drawTool = this;\n      registerMode['update'](map.getProjection(), this._clickCoords, this._geometry, event);\n      if (this.getMode() === 'point') {\n        this.endDraw(event);\n        return;\n      }\n      if (this._clickCoords.length <= 1) {\n        this._fireEvent('drawstart', event);\n      } else {\n        this._fireEvent('drawvertex', event);\n      }\n      if (registerMode['clickLimit'] && registerMode['clickLimit'] === this._historyPointer) {\n        this.endDraw(event);\n      }\n    }\n  };\n  _proto._createGeometry = function _createGeometry(event) {\n    var mode = this.getMode();\n    var registerMode = this._getRegisterMode();\n    var prjCoord = this.getMap()._pointToPrj(event['point2d']);\n    var symbol = this.getSymbol();\n    if (!this._geometry) {\n      this._clickCoords = [prjCoord];\n      event.drawTool = this;\n      this._geometry = registerMode['create'](this.getMap().getProjection(), this._clickCoords, event);\n      if (symbol && mode !== 'point') {\n        this._geometry.setSymbol(symbol);\n      } else if (this.options.hasOwnProperty('symbol')) {\n        this._geometry.setSymbol(this.options['symbol']);\n      }\n      this._addGeometryToStage(this._geometry);\n      this._fireEvent('drawstart', event);\n      var snapTo = this._geometry.snapTo;\n      if (snapTo && isFunction(snapTo)) {\n        var snapResult = this._getSnapResult(snapTo, event.containerPoint);\n        var map = this.getMap();\n        if (map && snapResult) {\n          var _prjCoord2 = snapResult.prjCoord;\n          this._clickCoords = [_prjCoord2];\n          registerMode['update'](map.getProjection(), this._clickCoords, this._geometry, event);\n        }\n      }\n    }\n    if (mode === 'point' && event.type !== 'mousemove') {\n      this.endDraw(event);\n    }\n  };\n  _proto._mouseMoveHandler = function _mouseMoveHandler(event) {\n    var map = this.getMap();\n    if (!map || map.isInteracting()) {\n      return;\n    }\n    if (this.getMode() === 'point' && !this._geometry) {\n      this._createGeometry(event);\n      return;\n    }\n    if (!this._geometry) {\n      return;\n    }\n    var containerPoint = this._getMouseContainerPoint(event);\n    if (!this._isValidContainerPoint(containerPoint)) {\n      return;\n    }\n    var prjCoord = map._pointToPrj(event['point2d']);\n    var snapAdditionVertex = [];\n    var snapTo = this._geometry.snapTo;\n    if (snapTo && isFunction(snapTo)) {\n      var snapResult = this._getSnapResult(snapTo, containerPoint);\n      prjCoord = snapResult.prjCoord;\n      snapAdditionVertex = snapResult.effectedVertex;\n    }\n    var projection = map.getProjection();\n    event.drawTool = this;\n    var registerMode = this._getRegisterMode();\n    if (this._shouldRecordHistory(registerMode.action)) {\n      var path = this._clickCoords.slice(0, this._historyPointer);\n      if (path && path.length > 0 && prjCoord.equals(path[path.length - 1])) {\n        return;\n      }\n      registerMode['update'](projection, path.concat(snapAdditionVertex, [prjCoord]), this._geometry, event);\n    } else {\n      registerMode['update'](projection, prjCoord, this._geometry, event);\n    }\n    this._fireEvent('mousemove', event);\n  };\n  _proto._doubleClickHandler = function _doubleClickHandler(event) {\n    if (!this._geometry) {\n      return;\n    }\n    var containerPoint = this._getMouseContainerPoint(event);\n    if (!this._isValidContainerPoint(containerPoint)) {\n      return;\n    }\n    var registerMode = this._getRegisterMode();\n    var clickCoords = this._clickCoords;\n    if (clickCoords.length < 2) {\n      return;\n    }\n    var mode = this.getMode();\n    if (mode && mode.indexOf('polygon') > -1 && clickCoords.length < 3) {\n      return;\n    }\n    var projection = this.getMap().getProjection();\n    var path = [clickCoords[0]];\n    for (var i = 1, len = clickCoords.length; i < len; i++) {\n      if (clickCoords[i].x !== clickCoords[i - 1].x || clickCoords[i].y !== clickCoords[i - 1].y) {\n        path.push(clickCoords[i]);\n      }\n    }\n    if (path.length < 2 || this._geometry && this._geometry instanceof Polygon && path.length < 3) {\n      return;\n    }\n    event.drawTool = this;\n    registerMode['update'](projection, path, this._geometry, event);\n    this.endDraw(event);\n  };\n  _proto._addGeometryToStage = function _addGeometryToStage(geometry) {\n    var drawLayer = this._getDrawLayer();\n    drawLayer.addGeometry(geometry);\n  };\n  _proto.endDraw = function endDraw(param) {\n    if (!this._geometry || this._ending) {\n      return this;\n    }\n    this._ending = true;\n    var geometry = this._geometry;\n    this._clearStage();\n    param = param || {};\n    this._geometry = geometry;\n    if (!param.ignoreEndEvent) {\n      this._fireEvent('drawend', param);\n    }\n    delete this._geometry;\n    if (this.options['once']) {\n      this.disable();\n    }\n    delete this._ending;\n    delete this._historyPointer;\n    if (this._vertexes) {\n      this._vertexes = [];\n    }\n    return this;\n  };\n  _proto._clearStage = function _clearStage() {\n    this._getDrawLayer().clear();\n    delete this._geometry;\n    delete this._clickCoords;\n  };\n  _proto._getMouseContainerPoint = function _getMouseContainerPoint(event) {\n    var action = this._getRegisterMode()['action'];\n    if (action[0].indexOf('mousedown') >= 0 || action[0].indexOf('touchstart') >= 0) {\n      stopPropagation(event['domEvent']);\n    }\n    return event['containerPoint'];\n  };\n  _proto._isValidContainerPoint = function _isValidContainerPoint(containerPoint) {\n    var mapSize = this._map.getSize();\n    var w = mapSize['width'],\n      h = mapSize['height'];\n    if (containerPoint.x < 0 || containerPoint.y < 0) {\n      return false;\n    } else if (containerPoint.x > w || containerPoint.y > h) {\n      return false;\n    }\n    return true;\n  };\n  _proto._getSnapResult = function _getSnapResult(snapTo, containerPoint) {\n    var map = this.getMap();\n    var lastContainerPoints = [];\n    if (this.options.edgeAutoComplete) {\n      var lastCoord = this._clickCoords[(this._historyPointer || 1) - 1];\n      lastContainerPoints.push(map._prjToContainerPoint(lastCoord));\n      var beforeLastCoord = this._clickCoords[(this._historyPointer || 1) - 2];\n      if (beforeLastCoord) {\n        lastContainerPoints.push(map._prjToContainerPoint(beforeLastCoord));\n      }\n    }\n    var snapResult = snapTo(containerPoint, lastContainerPoints);\n    containerPoint = (snapResult.effectedVertex ? snapResult.point : snapResult) || containerPoint;\n    var prjCoord = map._containerPointToPrj(containerPoint);\n    if (snapResult.effectedVertex) {\n      snapResult.effectedVertex = snapResult.effectedVertex.map(function (vertex) {\n        return map._containerPointToPrj(vertex);\n      });\n    }\n    return {\n      prjCoord: prjCoord,\n      effectedVertex: snapResult.effectedVertex || []\n    };\n  };\n  _proto._getDrawLayer = function _getDrawLayer() {\n    var drawLayerId = INTERNAL_LAYER_PREFIX + 'drawtool';\n    var drawToolLayer = this._map.getLayer(drawLayerId);\n    if (!drawToolLayer) {\n      drawToolLayer = new VectorLayer(drawLayerId, {\n        'enableSimplify': false,\n        'enableAltitude': this.options['enableAltitude']\n      });\n      this._map.addLayer(drawToolLayer);\n    }\n    return drawToolLayer;\n  };\n  _proto._fireEvent = function _fireEvent(eventName, param) {\n    if (!param) {\n      param = {};\n    }\n    param = extend({}, param);\n    if (this._geometry) {\n      param['geometry'] = this._getRegisterMode()['generate'](this._geometry, {\n        drawTool: this\n      });\n      param.tempGeometry = this._geometry;\n    }\n    MapTool.prototype._fireEvent.call(this, eventName, param);\n  };\n  return DrawTool;\n}(MapTool);\nDrawTool.mergeOptions(options$g);\n\nvar MapBoxZoomHander = function (_Handler) {\n  _inheritsLoose(MapBoxZoomHander, _Handler);\n  function MapBoxZoomHander(target) {\n    var _this;\n    _this = _Handler.call(this, target) || this;\n    _this.drawTool = new DrawTool({\n      'mode': 'boxZoom',\n      'ignoreMouseleave': false\n    });\n    return _this;\n  }\n  var _proto = MapBoxZoomHander.prototype;\n  _proto.addHooks = function addHooks() {\n    this.target.on('_mousedown', this._onMouseDown, this);\n  };\n  _proto.removeHooks = function removeHooks() {\n    this.target.off('_mousedown', this._onMouseDown, this);\n    if (this.drawTool.isEnabled()) {\n      this.drawTool.remove();\n    }\n  };\n  _proto._onMouseDown = function _onMouseDown(param) {\n    if (!this.target.options['boxZoom']) {\n      return;\n    }\n    if (param.domEvent.shiftKey) {\n      this.drawTool.setSymbol(this.target.options['boxZoomSymbol']).on('drawend', this._boxZoom, this).addTo(this.target);\n    }\n  };\n  _proto._boxZoom = function _boxZoom(param) {\n    var map = this.target;\n    this.drawTool.remove();\n    var geometry = param.geometry,\n      center = geometry.getCenter(),\n      symbol = geometry.getSymbol(),\n      w = symbol.markerWidth,\n      h = symbol.markerHeight;\n    var extent = new Extent(center, map.locateByPoint(center, w, h), map.getProjection());\n    var zoom = map.getFitZoom(extent);\n    map._animateTo({\n      center: extent.getCenter(),\n      zoom: zoom\n    });\n  };\n  return MapBoxZoomHander;\n}(Handler$1);\nMap$1.mergeOptions({\n  'boxZoom': true,\n  'boxZoomSymbol': {\n    'markerType': 'rectangle',\n    'markerLineWidth': 3,\n    'markerLineColor': '#1bbc9b',\n    'markerLineDasharray': [10, 5],\n    'markerFillOpacity': 0.1,\n    'markerFill': '#1bbc9b',\n    'markerWidth': 1,\n    'markerHeight': 1\n  }\n});\nMap$1.addOnLoadHook('addHandler', 'boxZoom', MapBoxZoomHander);\n\nvar PANOFFSET = 30;\nvar MapAutoPanAtEdgeHandler = function (_Handler) {\n  _inheritsLoose(MapAutoPanAtEdgeHandler, _Handler);\n  function MapAutoPanAtEdgeHandler() {\n    return _Handler.apply(this, arguments) || this;\n  }\n  var _proto = MapAutoPanAtEdgeHandler.prototype;\n  _proto.addHooks = function addHooks() {\n    if (!this.target) {\n      return;\n    }\n    this.target.on('_mousemove', this._onMouseMove, this);\n  };\n  _proto.removeHooks = function removeHooks() {\n    if (!this.target) {\n      return;\n    }\n    this.target.off('_mousemove', this._onMouseMove, this);\n  };\n  _proto._onMouseMove = function _onMouseMove(event) {\n    var map = this.target;\n    if (map.options['autoPanAtEdge']) {\n      var containerPoint = event.containerPoint;\n      var containerExtent = map.getContainerExtent();\n      if (containerExtent) {\n        var x = containerPoint.x,\n          y = containerPoint.y;\n        var xmax = containerExtent.xmax,\n          ymax = containerExtent.ymax;\n        var p;\n        if (x < PANOFFSET) {\n          p = [Math.abs(x - PANOFFSET), 0];\n        }\n        if (y < PANOFFSET) {\n          p = [0, Math.abs(y - PANOFFSET)];\n        }\n        if (x + PANOFFSET > xmax) {\n          p = [-Math.abs(x + PANOFFSET - xmax), 0];\n        }\n        if (y + PANOFFSET > ymax) {\n          p = [0, -Math.abs(y + PANOFFSET - ymax)];\n        }\n        if (p) {\n          map.panBy(p, {\n            duration: 1\n          });\n        }\n      }\n    }\n  };\n  return MapAutoPanAtEdgeHandler;\n}(Handler$1);\nMap$1.mergeOptions({\n  'autoPanAtEdge': false\n});\nMap$1.addOnLoadHook('addHandler', 'autoPanAtEdge', MapAutoPanAtEdgeHandler);\n\nMap$1.include({\n  animateTo: function animateTo(view, options, step) {\n    var _this = this;\n    if (options === void 0) {\n      options = {};\n    }\n    view = extend({}, this.getView(), view);\n    if (isFunction(options)) {\n      step = options;\n      options = {};\n    }\n    var projection = this.getProjection(),\n      currView = this.getView(),\n      props = {};\n    var empty = true;\n    for (var p in view) {\n      if (hasOwn(view, p) && !isNil(view[p]) && (p === 'prjCenter' || !isNil(currView[p]))) {\n        empty = false;\n        if (p === 'center') {\n          var from = new Coordinate(currView[p]),\n            to = new Coordinate(view[p]);\n          if (!from.equals(to)) {\n            props['center'] = [from, to];\n          }\n        } else if (p === 'prjCenter') {\n          var _from = new Coordinate(this._getPrjCenter());\n          var _to = new Coordinate(view[p]);\n          if (!_from.equals(_to)) {\n            props['prjCenter'] = [_from, _to];\n          }\n        } else if (currView[p] !== view[p] && p !== 'around') {\n          props[p] = [currView[p], view[p]];\n        }\n      }\n    }\n    if (empty) {\n      return null;\n    }\n    if (this._animPlayer) {\n      if (this._isInternalAnimation) {\n        if (this._animPlayer.playState === 'running') {\n          this._animPlayer.pause();\n          this._prevAnimPlayer = this._animPlayer;\n        }\n      } else {\n        delete this._prevAnimPlayer;\n        this._stopAnim(this._animPlayer);\n      }\n    }\n    var zoomOrigin = view['around'] || new Point(this.width / 2, this.height / 2);\n    var renderer = this._getRenderer(),\n      framer = function framer(fn) {\n        renderer.callInNextFrame(fn);\n      };\n    var player = this._animPlayer = Animation.animate(props, {\n      'easing': options['easing'] || 'out',\n      'duration': options['duration'] || this.options['zoomAnimationDuration'],\n      'framer': framer,\n      'repeat': options['repeat']\n    }, function (frame) {\n      if (_this.isRemoved()) {\n        player.finish();\n        return;\n      }\n      if (player.playState === 'running') {\n        if (frame.styles['center']) {\n          var center = frame.styles['center'];\n          _this._setPrjCenter(projection.project(center));\n          _this.onMoving(_this._parseEventFromCoord(_this.getCenter()));\n        } else if (frame.styles['prjCenter']) {\n          var _center = frame.styles['prjCenter'];\n          _this._setPrjCenter(_center);\n          _this.onMoving(_this._parseEventFromCoord(_this.getCenter()));\n        }\n        if (!isNil(frame.styles['zoom'])) {\n          _this.onZooming(frame.styles['zoom'], zoomOrigin);\n        }\n        if (!isNil(frame.styles['pitch'])) {\n          _this._setPitch(frame.styles['pitch']);\n        }\n        if (!isNil(frame.styles['bearing'])) {\n          _this._setBearing(frame.styles['bearing']);\n        }\n        _this._fireEvent('animating');\n      } else if (player.playState !== 'paused' || player === _this._mapAnimPlayer) {\n        if (!player._interupted) {\n          if (props['center']) {\n            _this._setPrjCenter(projection.project(props['center'][1]));\n          } else if (props['prjCenter']) {\n            _this._setPrjCenter(props['prjCenter'][1]);\n          }\n          if (!isNil(props['pitch'])) {\n            _this._setPitch(props['pitch'][1]);\n          }\n          if (!isNil(props['bearing'])) {\n            _this._setBearing(props['bearing'][1]);\n          }\n        }\n        _this._endAnim(player, props, zoomOrigin, options);\n      }\n      if (step) {\n        step(frame);\n      }\n    }, this);\n    this._startAnim(props, zoomOrigin);\n    return player;\n  },\n  _animateTo: function _animateTo(view, options, step) {\n    if (options === void 0) {\n      options = {};\n    }\n    if (this._mapAnimPlayer) {\n      this._stopAnim(this._mapAnimPlayer);\n    }\n    this._isInternalAnimation = true;\n    this._mapAnimPlayer = this.animateTo(view, options, step);\n    delete this._isInternalAnimation;\n    return this._mapAnimPlayer;\n  },\n  flyTo: function flyTo(view, options, step) {\n    var _this2 = this;\n    if (options === void 0) {\n      options = {};\n    }\n    view = extend({}, this.getView(), view);\n    if (this._animPlayer) {\n      if (this._isInternalAnimation) {\n        if (this._animPlayer.playState === 'running') {\n          this._animPlayer.pause();\n          this._prevAnimPlayer = this._animPlayer;\n        }\n      } else {\n        delete this._prevAnimPlayer;\n        this._stopAnim(this._animPlayer);\n      }\n    }\n    if (isFunction(options)) {\n      step = options;\n      options = {};\n    }\n    options = extend({\n      curve: 1.42\n    }, options);\n    var map = this;\n    function zoomScale(z0, z1) {\n      return map.getResolution(z1) / map.getResolution(z0);\n    }\n    var zoomOrigin = view['around'] || new Point(this.width / 2, this.height / 2);\n    var minZoom = this.getMinZoom();\n    var maxZoom = this.getMaxZoom();\n    var projection = this.getProjection();\n    var currView = this.getView();\n    var startZoom = currView.zoom;\n    var startBearing = currView.bearing;\n    var startPitch = currView.pitch;\n    var zoom = 'zoom' in view ? clamp(+view.zoom, minZoom, maxZoom) : startZoom;\n    var bearing = 'bearing' in view ? +view.bearing : startBearing;\n    var pitch = 'pitch' in view ? +view.pitch : startPitch;\n    var center = projection.project(view.center && new Coordinate(view.center) || this.getCenter());\n    var scale = zoomScale(zoom, startZoom);\n    var from = projection.project(this.getCenter());\n    var delta = center.sub(from);\n    var rho = options.curve;\n    var w0 = Math.max(this.width, this.height),\n      w1 = w0 / scale,\n      u1 = delta.mag();\n    if ('minZoom' in options) {\n      var animMinZoom = clamp(Math.min(options.minZoom, startZoom, zoom), minZoom, maxZoom);\n      var wMax = w0 / zoomScale(animMinZoom, startZoom);\n      rho = Math.sqrt(wMax / u1 * 2);\n    }\n    var rho2 = rho * rho;\n    function r(i) {\n      var b = (w1 * w1 - w0 * w0 + (i ? -1 : 1) * rho2 * rho2 * u1 * u1) / (2 * (i ? w1 : w0) * rho2 * u1);\n      return Math.log(Math.sqrt(b * b + 1) - b);\n    }\n    function sinh(n) {\n      return (Math.exp(n) - Math.exp(-n)) / 2;\n    }\n    function cosh(n) {\n      return (Math.exp(n) + Math.exp(-n)) / 2;\n    }\n    function tanh(n) {\n      return sinh(n) / cosh(n);\n    }\n    var r0 = r(0);\n    var w = function w(s) {\n      return cosh(r0) / cosh(r0 + rho * s);\n    };\n    var u = function u(s) {\n      return w0 * ((cosh(r0) * tanh(r0 + rho * s) - sinh(r0)) / rho2) / u1;\n    };\n    var S = (r(1) - r0) / rho;\n    if (Math.abs(u1) < 0.000001 || !isFinite(S)) {\n      if (Math.abs(w0 - w1) < 0.000001) return this.animateTo(view, options, step);\n      var k = w1 < w0 ? -1 : 1;\n      S = Math.abs(Math.log(w1 / w0)) / rho;\n      u = function u() {\n        return 0;\n      };\n      w = function w(s) {\n        return Math.exp(k * rho * s);\n      };\n    }\n    var renderer = this._getRenderer();\n    var framer = function framer(fn) {\n      renderer.callInNextFrame(fn);\n    };\n    var player = this._animPlayer = Animation.animate({\n      k: [0, 1]\n    }, {\n      'easing': options['easing'] || 'out',\n      'duration': options['duration'] || 8,\n      'framer': framer\n    }, function (frame) {\n      if (_this2.isRemoved()) {\n        player.finish();\n        return;\n      }\n      var k = frame.styles.k;\n      var s = k * S;\n      var scale = 1 / w(s);\n      var props = {};\n      if (view.center) {\n        var newCenter = k === 1 ? center : from.add(delta.multi(u(s)));\n        props.prjCenter = [center, newCenter];\n      }\n      if (startZoom !== zoom) {\n        var newZoom = k === 1 ? zoom : _this2.getZoomForScale(scale, startZoom, true);\n        props.zoom = [startZoom, newZoom];\n      }\n      if (startPitch !== pitch) {\n        var newPitch = interpolate$2(startPitch, pitch, k);\n        props.pitch = [pitch, newPitch];\n      }\n      if (startBearing !== bearing) {\n        var newBearing = interpolate$2(startBearing, bearing, k);\n        props.bearing = [bearing, newBearing];\n      }\n      if (player.playState === 'running') {\n        if (props['prjCenter']) {\n          var _center2 = props['prjCenter'];\n          _this2._setPrjCenter(_center2[1]);\n          _this2.onMoving(_this2._parseEventFromCoord(_this2.getCenter()));\n        }\n        if (props['zoom']) {\n          _this2.onZooming(props['zoom'][1], zoomOrigin);\n        }\n        if (props['pitch']) {\n          _this2._setPitch(props['pitch'][1]);\n        }\n        if (props['bearing']) {\n          _this2._setBearing(props['bearing'][1]);\n        }\n        _this2._fireEvent('animating');\n      } else if (player.playState !== 'paused' || player === _this2._mapAnimPlayer) {\n        if (!player._interupted) {\n          if (props['prjCenter']) {\n            _this2._setPrjCenter(props['prjCenter'][1]);\n          }\n          if (props['pitch']) {\n            _this2._setPitch(props['pitch'][1]);\n          }\n          if (props['bearing']) {\n            _this2._setBearing(props['bearing'][1]);\n          }\n        }\n        _this2._endAnim(player, props, zoomOrigin, options);\n      }\n      if (step) {\n        step(frame);\n      }\n    });\n    this._startAnim({\n      center: view.center,\n      zoom: view.zoom !== startZoom,\n      pitch: pitch !== startPitch,\n      bearing: bearing !== startBearing\n    }, zoomOrigin);\n    return this;\n  },\n  isAnimating: function isAnimating() {\n    return !!this._animPlayer;\n  },\n  isRotating: function isRotating() {\n    return this.isDragRotating() || !!this._animRotating;\n  },\n  _endAnim: function _endAnim(player, props, zoomOrigin, options) {\n    delete this._animRotating;\n    var evtType = player._interupted ? 'animateinterrupted' : 'animateend';\n    if (player === this._animPlayer) {\n      delete this._animPlayer;\n    }\n    if (player === this._mapAnimPlayer) {\n      delete this._mapAnimPlayer;\n    }\n    if (props['center']) {\n      var endCoord;\n      if (player._interupted) {\n        endCoord = this.getCenter();\n      } else {\n        endCoord = props['center'][1];\n      }\n      this.onMoveEnd(this._parseEventFromCoord(endCoord));\n    } else if (props['prjCenter']) {\n      var _endCoord;\n      if (player._interupted) {\n        _endCoord = this._getPrjCenter();\n      } else {\n        _endCoord = props['prjCenter'][1];\n      }\n      var event = this._parseEventFromCoord(this.getProjection().unproject(_endCoord));\n      event['point2d'] = this._prjToPoint(_endCoord);\n      this.onMoveEnd(event);\n    }\n    if (!isNil(props['zoom'])) {\n      if (player._interupted) {\n        this.onZoomEnd(this.getZoom());\n      } else if (!options['wheelZoom']) {\n        this.onZoomEnd(props['zoom'][1]);\n      } else {\n        this.onZooming(props['zoom'][1], zoomOrigin);\n      }\n    }\n    if (evtType) {\n      this._fireEvent(evtType);\n    }\n    if (!isNil(props['pitch']) && !this.getPitch()) {\n      this.getRenderer().setToRedraw();\n    }\n    if (!options['wheelZoom']) {\n      this._resumePrev(player);\n    }\n  },\n  _startAnim: function _startAnim(props, zoomOrigin) {\n    if (!this._animPlayer) {\n      return;\n    }\n    if (props['center'] || props['prjCenter']) {\n      this.onMoveStart();\n    }\n    if (props['zoom'] && !this.isZooming()) {\n      this.onZoomStart(props['zoom'][1], zoomOrigin);\n    }\n    if (props['pitch'] || props['bearing']) {\n      this._animRotating = true;\n    }\n    this._fireEvent('animatestart');\n    this._animPlayer.play();\n  },\n  _stopAnim: function _stopAnim(player) {\n    if (!player) {\n      return;\n    }\n    delete this._animRotating;\n    if (player.playState !== 'finished') {\n      player._interupted = true;\n      player.cancel();\n    }\n    if (player === this._animPlayer) {\n      delete this._animPlayer;\n    }\n    if (player === this._mapAnimPlayer) {\n      delete this._mapAnimPlayer;\n    }\n  },\n  _resumePrev: function _resumePrev(player) {\n    if (!this._prevAnimPlayer) {\n      return;\n    }\n    var prevPlayer = this._prevAnimPlayer;\n    if (prevPlayer.playState !== 'paused') {\n      delete this._prevAnimPlayer;\n    }\n    if (player !== prevPlayer) {\n      this._animPlayer = prevPlayer;\n      prevPlayer.play();\n    }\n  }\n});\nfunction interpolate$2(a, b, t) {\n  return a * (1 - t) + b * t;\n}\n\nvar events = 'mousedown ' + 'mouseup ' + 'mouseover ' + 'mouseout ' + 'mouseenter ' + 'mouseleave ' + 'mousemove ' + 'click ' + 'dblclick ' + 'contextmenu ' + 'keypress ' + 'touchstart ' + 'touchmove ' + 'touchend ';\nMap$1.include({\n  _registerDomEvents: function _registerDomEvents() {\n    var dom = this._panels.mapWrapper || this._containerDOM;\n    addDomEvent(dom, events, this._handleDOMEvent, this);\n  },\n  _removeDomEvents: function _removeDomEvents() {\n    var dom = this._panels.mapWrapper || this._containerDOM;\n    removeDomEvent(dom, events, this._handleDOMEvent, this);\n  },\n  _handleDOMEvent: function _handleDOMEvent(e) {\n    var clickTimeThreshold = this.options['clickTimeThreshold'];\n    var type = e.type;\n    var isMouseDown = type === 'mousedown' || type === 'touchstart' && (!e.touches || e.touches.length === 1);\n    if (isMouseDown) {\n      this._domMouseDownTime = now();\n      this._domMouseDownView = this.getView();\n    }\n    var isRotating = type === 'contextmenu' && isRotatingMap(this);\n    if (type === 'contextmenu') {\n      preventDefault(e);\n      var downTime = this._domMouseDownTime;\n      var time = now();\n      if (time - downTime <= clickTimeThreshold && !isRotating) {\n        this._fireDOMEvent(this, e, 'dom:' + e.type);\n      }\n    } else {\n      this._fireDOMEvent(this, e, 'dom:' + e.type);\n    }\n    if (this._ignoreEvent(e)) {\n      return;\n    }\n    var mimicClick = false;\n    if (isMouseDown) {\n      this._mouseDownTime = now();\n    } else if (type === 'click' || type === 'touchend' || type === 'contextmenu') {\n      if (!this._mouseDownTime) {\n        return;\n      } else {\n        var _downTime = this._mouseDownTime;\n        delete this._mouseDownTime;\n        var _time = now();\n        if (_time - _downTime > clickTimeThreshold) {\n          if (type === 'click' || type === 'contextmenu') {\n            return;\n          }\n        } else if (type === 'contextmenu') {\n          if (isRotating) {\n            return;\n          }\n        } else if (type === 'touchend') {\n          mimicClick = true;\n        }\n      }\n    }\n    var mimicEvent;\n    if (mimicClick) {\n      if (this._clickTime && now() - this._clickTime <= clickTimeThreshold) {\n        delete this._clickTime;\n        mimicEvent = 'dblclick';\n        this._fireDOMEvent(this, e, 'dom:dblclick');\n      } else {\n        this._clickTime = now();\n        mimicEvent = 'click';\n        this._fireDOMEvent(this, e, 'dom:click');\n      }\n    }\n    if (this._ignoreEvent(e)) {\n      return;\n    }\n    this._fireDOMEvent(this, e, type);\n    if (mimicEvent) {\n      this._fireDOMEvent(this, e, mimicEvent);\n    }\n  },\n  _ignoreEvent: function _ignoreEvent(domEvent) {\n    if (!domEvent || !this._panels.control) {\n      return false;\n    }\n    if (this._isEventOutMap(domEvent)) {\n      return true;\n    }\n    var target = domEvent.srcElement || domEvent.target;\n    var preTarget;\n    if (target) {\n      while (target && target !== this._containerDOM) {\n        if (target.className && target.className.indexOf && (target.className.indexOf('maptalks-control') >= 0 || target.className.indexOf('maptalks-ui') >= 0 && preTarget && !preTarget['eventsPropagation'])) {\n          return true;\n        }\n        preTarget = target;\n        target = target.parentNode;\n      }\n    }\n    return false;\n  },\n  _isEventOutMap: function _isEventOutMap(domEvent) {\n    if (this.getPitch() > this.options['maxVisualPitch']) {\n      var actualEvent = this._getActualEvent(domEvent);\n      var eventPos = getEventContainerPoint(actualEvent, this._containerDOM);\n      if (!this.getContainerExtent().contains(eventPos)) {\n        return true;\n      }\n    }\n    return false;\n  },\n  _parseEvent: function _parseEvent(e, type) {\n    if (!e) {\n      return null;\n    }\n    var eventParam = {\n      'domEvent': e\n    };\n    if (type !== 'keypress') {\n      var actual = this._getActualEvent(e);\n      if (actual && actual.clientX !== undefined) {\n        var containerPoint = getEventContainerPoint(actual, this._containerDOM);\n        eventParam = extend(eventParam, {\n          'containerPoint': containerPoint,\n          'viewPoint': this.containerPointToViewPoint(containerPoint)\n        });\n        var maxVisualPitch = this.options['maxVisualPitch'];\n        if (this.getPitch() <= maxVisualPitch || containerPoint.y >= this.height - this._getVisualHeight(maxVisualPitch)) {\n          eventParam = extend(eventParam, {\n            'coordinate': this.containerPointToCoord(containerPoint),\n            'point2d': this._containerPointToPoint(containerPoint)\n          });\n        }\n      }\n    }\n    return eventParam;\n  },\n  _parseEventFromCoord: function _parseEventFromCoord(coord) {\n    var containerPoint = this.coordToContainerPoint(coord),\n      viewPoint = this.containerPointToViewPoint(containerPoint);\n    var e = {\n      'coordinate': coord,\n      'containerPoint': containerPoint,\n      'viewPoint': viewPoint,\n      'point2d': this.coordToPoint(coord)\n    };\n    return e;\n  },\n  _getActualEvent: function _getActualEvent(e) {\n    return e.touches && e.touches.length > 0 ? e.touches[0] : e.changedTouches && e.changedTouches.length > 0 ? e.changedTouches[0] : e;\n  },\n  _fireDOMEvent: function _fireDOMEvent(target, e, type) {\n    var _this = this;\n    if (this.isRemoved()) {\n      return;\n    }\n    var eventParam = this._parseEvent(e, type);\n    if (isMoveEvent(type)) {\n      this.getRenderer().callInNextFrame(function () {\n        if (eventParam.domEvent && eventParam.domEvent._cancelBubble) {\n          _this._fireEvent('_' + type, eventParam);\n          return;\n        }\n        _this._fireEvent(type, eventParam);\n      });\n    } else {\n      this._fireEvent(type, eventParam);\n    }\n  },\n  _getEventParams: function _getEventParams(e) {\n    var map = this;\n    var eventParam = {\n      'domEvent': e\n    };\n    var actual = e.touches && e.touches.length > 0 ? e.touches[0] : e.changedTouches && e.changedTouches.length > 0 ? e.changedTouches[0] : e;\n    if (actual) {\n      var containerPoint = getEventContainerPoint(actual, map._containerDOM);\n      eventParam['coordinate'] = map.containerPointToCoordinate(containerPoint);\n      eventParam['containerPoint'] = containerPoint;\n      eventParam['viewPoint'] = map.containerPointToViewPoint(containerPoint);\n      eventParam['pont2d'] = map._containerPointToPoint(containerPoint);\n    }\n    return eventParam;\n  }\n});\nMap$1.addOnLoadHook('_registerDomEvents');\nfunction isRotatingMap(map) {\n  if (!map._domMouseDownView) {\n    return true;\n  }\n  var view = map.getView(),\n    mouseDownView = map._domMouseDownView;\n  return view.bearing !== mouseDownView.bearing || view.pitch !== mouseDownView.pitch;\n}\n\nMap$1.include({\n  isFullScreen: function isFullScreen() {\n    return !!(document.webkitIsFullScreen || document.mozFullScreen || document.msFullscreenElement || document.fullscreenElement);\n  },\n  requestFullScreen: function requestFullScreen(dom) {\n    this._fireEvent('fullscreenstart');\n    this._requestFullScreen(dom || this._containerDOM);\n    this._fireEvent('fullscreenend');\n    return this;\n  },\n  cancelFullScreen: function cancelFullScreen() {\n    this._cancelFullScreen();\n    this._fireEvent('cancelfullscreen');\n    return this;\n  },\n  _requestFullScreen: function _requestFullScreen(dom) {\n    if (dom.requestFullscreen) {\n      dom.requestFullscreen();\n    } else if (dom.mozRequestFullScreen) {\n      dom.mozRequestFullScreen();\n    } else if (dom.webkitRequestFullScreen) {\n      dom.webkitRequestFullScreen();\n    } else if (dom.msRequestFullScreen) {\n      dom.msRequestFullScreen();\n    } else {\n      var features = 'fullscreen=1,status=no,resizable=yes,top=0,left=0,scrollbars=no,' + 'titlebar=no,menubar=no,location=no,toolbar=no,z-look=yes,' + 'width=' + (screen.availWidth - 8) + ',height=' + (screen.availHeight - 45);\n      var newWin = window.open(location.href, '_blank', features);\n      if (newWin !== null) {\n        window.opener = null;\n        window.close();\n      }\n    }\n  },\n  _cancelFullScreen: function _cancelFullScreen() {\n    if (document.exitFullscreen) {\n      document.exitFullscreen();\n    } else if (document.mozCancelFullScreen) {\n      document.mozCancelFullScreen();\n    } else if (document.webkitCancelFullScreen) {\n      document.webkitCancelFullScreen();\n    } else {\n      var features = 'fullscreen=no,status=yes,resizable=yes,scrollbars=no,' + 'titlebar=no,menubar=yes,location=yes,toolbar=yes,z-look=yes';\n      var newWin = window.open(location.href, '_blank', features);\n      if (newWin !== null) {\n        window.opener = null;\n        window.close();\n      }\n    }\n  }\n});\n\nMap$1.include({\n  panTo: function panTo(coordinate, options, step) {\n    if (options === void 0) {\n      options = {};\n    }\n    if (!coordinate) {\n      return this;\n    }\n    if (isFunction(options)) {\n      step = options;\n      options = {};\n    }\n    coordinate = new Coordinate(coordinate);\n    if (typeof options['animation'] === 'undefined' || options['animation']) {\n      var prjCoord = this.getProjection().project(coordinate);\n      return this._panAnimation(prjCoord, options['duration'], step);\n    } else {\n      this.setCenter(coordinate);\n    }\n    return this;\n  },\n  _panTo: function _panTo(prjCoord, options) {\n    if (options === void 0) {\n      options = {};\n    }\n    if (typeof options['animation'] === 'undefined' || options['animation']) {\n      return this._panAnimation(prjCoord, options['duration']);\n    } else {\n      this.onMoveStart();\n      this._setPrjCenter(prjCoord);\n      this.onMoveEnd(this._parseEventFromCoord(this.getCenter()));\n      return this;\n    }\n  },\n  panBy: function panBy(offset, options, step) {\n    if (options === void 0) {\n      options = {};\n    }\n    if (!offset) {\n      return this;\n    }\n    if (isFunction(options)) {\n      step = options;\n      options = {};\n    }\n    offset = new Point(offset);\n    var containerExtent = this.getContainerExtent();\n    var ymin = containerExtent.ymin;\n    if (ymin > 0 && offset.y > 30) {\n      var y = offset.y;\n      offset.y = 30;\n      offset.x = offset.x * 30 / y;\n      console.warn('offset is limited to panBy when pitch is above maxPitch');\n    }\n    if (typeof options['animation'] === 'undefined' || options['animation']) {\n      offset = offset.multi(-1);\n      var target = this._containerPointToPrj(new Point(this.width / 2 + offset.x, this.height / 2 + offset.y));\n      this._panAnimation(target, options['duration'], step);\n    } else {\n      this.onMoveStart();\n      this._offsetCenterByPixel(offset);\n      var endCoord = this.containerPointToCoord(new Point(this.width / 2, this.height / 2));\n      this.onMoveEnd(this._parseEventFromCoord(endCoord));\n    }\n    return this;\n  },\n  _panAnimation: function _panAnimation(target, t, cb) {\n    return this._animateTo({\n      'prjCenter': target\n    }, {\n      'duration': t || this.options['panAnimationDuration']\n    }, cb);\n  }\n});\n\nGeometry.fromJSON = function (json) {\n  if (Array.isArray(json)) {\n    var result = [];\n    for (var i = 0, len = json.length; i < len; i++) {\n      var c = Geometry.fromJSON(json[i]);\n      if (Array.isArray(json)) {\n        result = result.concat(c);\n      } else {\n        result.push(c);\n      }\n    }\n    return result;\n  }\n  if (json && !json['feature']) {\n    return GeoJSON.toGeometry(json);\n  }\n  var geometry;\n  if (json['subType']) {\n    geometry = Geometry.getJSONClass(json['subType']).fromJSON(json);\n    if (!isNil(json['feature']['id'])) {\n      geometry.setId(json['feature']['id']);\n    }\n  } else {\n    geometry = GeoJSON.toGeometry(json['feature']);\n    if (json['options']) {\n      geometry.config(json['options']);\n    }\n  }\n  if (json['symbol']) {\n    geometry.setSymbol(json['symbol']);\n  }\n  if (json['infoWindow']) {\n    geometry.setInfoWindow(json['infoWindow']);\n  }\n  return geometry;\n};\nLayer.fromJSON = function (layerJSON) {\n  if (!layerJSON) {\n    return null;\n  }\n  var layerType = layerJSON['type'];\n  var clazz = Layer.getJSONClass(layerType);\n  if (!clazz || !clazz.fromJSON) {\n    throw new Error('unsupported layer type:' + layerType);\n  }\n  return clazz.fromJSON(layerJSON);\n};\nMap$1.include({\n  'JSON_VERSION': '1.0',\n  toJSON: function toJSON(options) {\n    if (!options) {\n      options = {};\n    }\n    var json = {\n      'jsonVersion': this['JSON_VERSION'],\n      'version': this.VERSION,\n      'extent': this.getExtent().toJSON()\n    };\n    json['options'] = this.config();\n    json['options']['center'] = this.getCenter();\n    json['options']['zoom'] = this.getZoom();\n    json['options']['bearing'] = this.getBearing();\n    json['options']['pitch'] = this.getPitch();\n    var baseLayer = this.getBaseLayer();\n    if ((isNil(options['baseLayer']) || options['baseLayer']) && baseLayer) {\n      json['baseLayer'] = baseLayer.toJSON(options['baseLayer']);\n    }\n    var extraLayerOptions = {};\n    if (options['clipExtent']) {\n      if (options['clipExtent'] === true) {\n        extraLayerOptions['clipExtent'] = this.getExtent();\n      } else {\n        extraLayerOptions['clipExtent'] = options['clipExtent'];\n      }\n    }\n    var layersJSON = [];\n    if (isNil(options['layers']) || options['layers'] && !Array.isArray(options['layers'])) {\n      var layers = this.getLayers();\n      for (var i = 0, len = layers.length; i < len; i++) {\n        if (!layers[i].toJSON) {\n          continue;\n        }\n        var opts = extend({}, isObject(options['layers']) ? options['layers'] : {}, extraLayerOptions);\n        layersJSON.push(layers[i].toJSON(opts));\n      }\n      json['layers'] = layersJSON;\n    } else if (isArrayHasData(options['layers'])) {\n      var _layers = options['layers'];\n      for (var _i = 0; _i < _layers.length; _i++) {\n        var exportOption = _layers[_i];\n        var layer = this.getLayer(exportOption['id']);\n        if (!layer.toJSON) {\n          continue;\n        }\n        var _opts = extend({}, exportOption['options'], extraLayerOptions);\n        layersJSON.push(layer.toJSON(_opts));\n      }\n      json['layers'] = layersJSON;\n    } else {\n      json['layers'] = [];\n    }\n    return json;\n  }\n});\nMap$1.fromJSON = function (container, profile, options) {\n  if (!container || !profile) {\n    return null;\n  }\n  if (!options) {\n    options = {};\n  }\n  var map = new Map$1(container, profile['options']);\n  if (isNil(options['baseLayer']) || options['baseLayer']) {\n    var baseLayer = Layer.fromJSON(profile['baseLayer']);\n    if (baseLayer) {\n      map.setBaseLayer(baseLayer);\n    }\n  }\n  if (isNil(options['layers']) || options['layers']) {\n    var layers = [];\n    var layerJSONs = profile['layers'];\n    for (var i = 0; i < layerJSONs.length; i++) {\n      var layer = Layer.fromJSON(layerJSONs[i]);\n      layers.push(layer);\n    }\n    map.addLayer(layers);\n  }\n  return map;\n};\n\nMap$1.include({\n  computeLength: function computeLength(coord1, coord2) {\n    if (!this.getProjection()) {\n      return null;\n    }\n    var p1 = new Coordinate(coord1),\n      p2 = new Coordinate(coord2);\n    if (p1.equals(p2)) {\n      return 0;\n    }\n    return this.getProjection().measureLength(p1, p2);\n  },\n  computeGeometryLength: function computeGeometryLength(geometry) {\n    return geometry._computeGeodesicLength(this.getProjection());\n  },\n  computeGeometryArea: function computeGeometryArea(geometry) {\n    return geometry._computeGeodesicArea(this.getProjection());\n  },\n  identify: function identify(opts, callback) {\n    opts = opts || {};\n    var coordinate = new Coordinate(opts['coordinate']);\n    return this._identify(opts, callback, function (layer) {\n      return layer.identify(coordinate, opts);\n    });\n  },\n  identifyAtPoint: function identifyAtPoint(opts, callback) {\n    var isMapGeometryEvent = opts.includeInternals;\n    var tolerance = opts.tolerance;\n    opts = opts || {};\n    var containerPoint = new Point(opts['containerPoint']);\n    var coordinate = this.containerPointToCoord(containerPoint);\n    return this._identify(opts, callback, function (layer) {\n      var result;\n      if (isMapGeometryEvent && !isNil(layer.options.geometryEventTolerance)) {\n        opts.tolerance = opts.tolerance || 0;\n        opts.tolerance += layer.options.geometryEventTolerance;\n      }\n      if (layer.identifyAtPoint) {\n        result = layer.identifyAtPoint(containerPoint, opts);\n      } else if (coordinate && layer.identify) {\n        result = layer.identify(coordinate, opts);\n      } else {\n        result = [];\n      }\n      if (isMapGeometryEvent) {\n        if (isNil(tolerance)) {\n          delete opts.tolerance;\n        } else {\n          opts.tolerance = tolerance;\n        }\n      }\n      if (!result || !result.length) {\n        layer.fire('identifyempty', opts);\n      }\n      return result;\n    });\n  },\n  _identify: function _identify(opts, callback, fn) {\n    var reqLayers = opts['layers'];\n    if (!isArrayHasData(reqLayers)) {\n      return this;\n    }\n    var eventTypes = opts.eventTypes;\n    var layers = [];\n    for (var i = 0, len = reqLayers.length; i < len; i++) {\n      if (isString(reqLayers[i])) {\n        layers.push(this.getLayer(reqLayers[i]));\n      } else {\n        layers.push(reqLayers[i]);\n      }\n    }\n    if (eventTypes) {\n      layers = layers.filter(function (layer) {\n        if (!layer._hasGeoListeners) {\n          return true;\n        }\n        return layer._hasGeoListeners(eventTypes);\n      });\n    }\n    var hits = [];\n    for (var _i = layers.length - 1; _i >= 0; _i--) {\n      if (opts['count'] && hits.length >= opts['count']) {\n        break;\n      }\n      var layer = layers[_i];\n      if (!layer || !layer.getMap() || !opts['includeInvisible'] && !layer.isVisible() || !opts['includeInternals'] && layer.getId().indexOf(INTERNAL_LAYER_PREFIX) >= 0) {\n        continue;\n      }\n      var layerHits = fn(layer);\n      if (layerHits) {\n        if (Array.isArray(layerHits)) {\n          pushIn(hits, layerHits);\n        } else {\n          hits.push(layerHits);\n        }\n      }\n    }\n    callback.call(this, hits);\n    return this;\n  }\n});\n\nMap$1.include({\n  _zoom: function _zoom(nextZoom, origin) {\n    if (!this.options['zoomable'] || this.isZooming()) {\n      return;\n    }\n    origin = this._checkZoomOrigin(origin);\n    nextZoom = this._checkZoom(nextZoom);\n    this.onZoomStart(nextZoom, origin);\n    this._frameZoom = this.getZoom();\n    this.onZoomEnd(nextZoom, origin);\n  },\n  _zoomAnimation: function _zoomAnimation(nextZoom, origin, startScale) {\n    if (!this.options['zoomable'] || this.isZooming()) {\n      return;\n    }\n    nextZoom = this._checkZoom(nextZoom);\n    if (this.getZoom() === nextZoom) {\n      return;\n    }\n    origin = this._checkZoomOrigin(origin);\n    this._startZoomAnim(nextZoom, origin, startScale);\n  },\n  _checkZoomOrigin: function _checkZoomOrigin(origin) {\n    if (!origin || this.options['zoomInCenter']) {\n      origin = new Point(this.width / 2, this.height / 2);\n    }\n    if (this.options['zoomOrigin']) {\n      origin = new Point(this.options['zoomOrigin']);\n    }\n    return origin;\n  },\n  _startZoomAnim: function _startZoomAnim(nextZoom, origin, startScale) {\n    if (isNil(startScale)) {\n      startScale = 1;\n    }\n    var endScale = this._getResolution(this._startZoomVal) / this._getResolution(nextZoom);\n    var duration = this.options['zoomAnimationDuration'] * Math.abs(endScale - startScale) / Math.abs(endScale - 1);\n    this._frameZoom = this._startZoomVal;\n    this._animateTo({\n      'zoom': nextZoom,\n      'around': origin\n    }, {\n      'continueOnViewChanged': true,\n      'duration': duration\n    });\n  },\n  onZoomStart: function onZoomStart(nextZoom, origin) {\n    if (!this.options['zoomable'] || this.isZooming()) {\n      return;\n    }\n    if (this._mapAnimPlayer) {\n      this._stopAnim(this._mapAnimPlayer);\n    }\n    delete this.cameraZenithDistance;\n    this._zooming = true;\n    this._startZoomVal = this.getZoom();\n    this._startZoomCoord = this._containerPointToPrj(origin);\n    this._fireEvent('zoomstart', {\n      'from': this._startZoomVal,\n      'to': nextZoom\n    });\n  },\n  onZooming: function onZooming(nextZoom, origin, startScale) {\n    if (!this.options['zoomable']) {\n      return;\n    }\n    var frameZoom = this._frameZoom;\n    if (frameZoom === nextZoom) {\n      return;\n    }\n    if (isNil(startScale)) {\n      startScale = 1;\n    }\n    this._zoomTo(nextZoom, origin);\n    var res = this.getResolution(nextZoom),\n      fromRes = this.getResolution(this._startZoomVal),\n      scale = fromRes / res / startScale,\n      startPoint = this._prjToContainerPoint(this._startZoomCoord, this._startZoomVal);\n    var offset = this.getViewPoint();\n    if (!this.isRotating() && !startPoint.equals(origin) && scale !== 1) {\n      var pitch = this.getPitch();\n      var originOffset = startPoint._sub(origin)._multi(1 / (1 - scale));\n      if (pitch) {\n        originOffset.y /= Math.cos(pitch * Math.PI / 180);\n      }\n      origin = origin.add(originOffset);\n    }\n    var matrix = {\n      'view': [scale, 0, 0, scale, (origin.x - offset.x) * (1 - scale), (origin.y - offset.y) * (1 - scale)]\n    };\n    var dpr = this.getDevicePixelRatio();\n    if (dpr !== 1) {\n      origin = origin.multi(dpr);\n    }\n    matrix['container'] = [scale, 0, 0, scale, origin.x * (1 - scale), origin.y * (1 - scale)];\n    this._fireEvent('zooming', {\n      'from': this._startZoomVal,\n      'to': nextZoom,\n      'origin': origin,\n      'matrix': matrix\n    });\n    this._frameZoom = nextZoom;\n  },\n  onZoomEnd: function onZoomEnd(nextZoom, origin) {\n    if (!this.options['zoomable']) {\n      return;\n    }\n    var startZoomVal = this._startZoomVal;\n    this._zoomTo(nextZoom, origin);\n    this._zooming = false;\n    this._getRenderer().onZoomEnd();\n    if (!this._suppressRecenter) {\n      this._recenterOnTerrain();\n    }\n    this._fireEvent('zoomend', {\n      'from': startZoomVal,\n      'to': nextZoom\n    });\n    if (!this._verifyExtent(this._getPrjCenter())) {\n      this._panTo(this._prjMaxExtent.getCenter());\n    }\n  },\n  _zoomTo: function _zoomTo(nextZoom, origin) {\n    this._zoomLevel = nextZoom;\n    this._calcMatrices();\n    if (origin) {\n      this._setPrjCoordAtContainerPoint(this._startZoomCoord, origin);\n    }\n  },\n  _checkZoom: function _checkZoom(nextZoom) {\n    var maxZoom = this.getMaxZoom(),\n      minZoom = this.getMinZoom();\n    if (nextZoom < minZoom) {\n      nextZoom = minZoom;\n    }\n    if (nextZoom > maxZoom) {\n      nextZoom = maxZoom;\n    }\n    return nextZoom;\n  }\n});\n\nfunction perspective(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n    nf = 1 / (near - far);\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = (far + near) * nf;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 2 * far * near * nf;\n  out[15] = 0;\n  return out;\n}\nfunction translate(out, a, v) {\n  var x = v[0],\n    y = v[1],\n    z = v[2],\n    a00,\n    a01,\n    a02,\n    a03,\n    a10,\n    a11,\n    a12,\n    a13,\n    a20,\n    a21,\n    a22,\n    a23;\n  if (a === out) {\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n  } else {\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n    out[3] = a03;\n    out[4] = a10;\n    out[5] = a11;\n    out[6] = a12;\n    out[7] = a13;\n    out[8] = a20;\n    out[9] = a21;\n    out[10] = a22;\n    out[11] = a23;\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\n  }\n  return out;\n}\nfunction scale(out, a, v) {\n  var x = v[0],\n    y = v[1],\n    z = v[2];\n  out[0] = a[0] * x;\n  out[1] = a[1] * x;\n  out[2] = a[2] * x;\n  out[3] = a[3] * x;\n  out[4] = a[4] * y;\n  out[5] = a[5] * y;\n  out[6] = a[6] * y;\n  out[7] = a[7] * y;\n  out[8] = a[8] * z;\n  out[9] = a[9] * z;\n  out[10] = a[10] * z;\n  out[11] = a[11] * z;\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\nfunction rotateX(out, a, rad) {\n  var s = Math.sin(rad),\n    c = Math.cos(rad),\n    a10 = a[4],\n    a11 = a[5],\n    a12 = a[6],\n    a13 = a[7],\n    a20 = a[8],\n    a21 = a[9],\n    a22 = a[10],\n    a23 = a[11];\n  if (a !== out) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n  out[4] = a10 * c + a20 * s;\n  out[5] = a11 * c + a21 * s;\n  out[6] = a12 * c + a22 * s;\n  out[7] = a13 * c + a23 * s;\n  out[8] = a20 * c - a10 * s;\n  out[9] = a21 * c - a11 * s;\n  out[10] = a22 * c - a12 * s;\n  out[11] = a23 * c - a13 * s;\n  return out;\n}\nfunction rotateZ(out, a, rad) {\n  var s = Math.sin(rad),\n    c = Math.cos(rad),\n    a00 = a[0],\n    a01 = a[1],\n    a02 = a[2],\n    a03 = a[3],\n    a10 = a[4],\n    a11 = a[5],\n    a12 = a[6],\n    a13 = a[7];\n  if (a !== out) {\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n  out[0] = a00 * c + a10 * s;\n  out[1] = a01 * c + a11 * s;\n  out[2] = a02 * c + a12 * s;\n  out[3] = a03 * c + a13 * s;\n  out[4] = a10 * c - a00 * s;\n  out[5] = a11 * c - a01 * s;\n  out[6] = a12 * c - a02 * s;\n  out[7] = a13 * c - a03 * s;\n  return out;\n}\nfunction multiply(out, a, b) {\n  var a00 = a[0],\n    a01 = a[1],\n    a02 = a[2],\n    a03 = a[3],\n    a10 = a[4],\n    a11 = a[5],\n    a12 = a[6],\n    a13 = a[7],\n    a20 = a[8],\n    a21 = a[9],\n    a22 = a[10],\n    a23 = a[11],\n    a30 = a[12],\n    a31 = a[13],\n    a32 = a[14],\n    a33 = a[15];\n  var b0 = b[0],\n    b1 = b[1],\n    b2 = b[2],\n    b3 = b[3];\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[4];\n  b1 = b[5];\n  b2 = b[6];\n  b3 = b[7];\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[8];\n  b1 = b[9];\n  b2 = b[10];\n  b3 = b[11];\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[12];\n  b1 = b[13];\n  b2 = b[14];\n  b3 = b[15];\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  return out;\n}\nfunction invert(out, a) {\n  var a00 = a[0],\n    a01 = a[1],\n    a02 = a[2],\n    a03 = a[3],\n    a10 = a[4],\n    a11 = a[5],\n    a12 = a[6],\n    a13 = a[7],\n    a20 = a[8],\n    a21 = a[9],\n    a22 = a[10],\n    a23 = a[11],\n    a30 = a[12],\n    a31 = a[13],\n    a32 = a[14],\n    a33 = a[15],\n    b00 = a00 * a11 - a01 * a10,\n    b01 = a00 * a12 - a02 * a10,\n    b02 = a00 * a13 - a03 * a10,\n    b03 = a01 * a12 - a02 * a11,\n    b04 = a01 * a13 - a03 * a11,\n    b05 = a02 * a13 - a03 * a12,\n    b06 = a20 * a31 - a21 * a30,\n    b07 = a20 * a32 - a22 * a30,\n    b08 = a20 * a33 - a23 * a30,\n    b09 = a21 * a32 - a22 * a31,\n    b10 = a21 * a33 - a23 * a31,\n    b11 = a22 * a33 - a23 * a32,\n    det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n  if (!det) {\n    return null;\n  }\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n  return out;\n}\nfunction identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\nfunction copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n\nfunction set$2(out, x, y, z) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\nfunction add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\nfunction subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  return out;\n}\nfunction length(a) {\n  var x = a[0],\n    y = a[1],\n    z = a[2];\n  return Math.sqrt(x * x + y * y + z * z);\n}\nfunction normalize(out, a) {\n  var x = a[0],\n    y = a[1],\n    z = a[2];\n  var len = x * x + y * y + z * z;\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    out[0] = a[0] * len;\n    out[1] = a[1] * len;\n    out[2] = a[2] * len;\n  }\n  return out;\n}\nfunction dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\nfunction scale$1(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  return out;\n}\nfunction cross(out, a, b) {\n  var ax = a[0],\n    ay = a[1],\n    az = a[2],\n    bx = b[0],\n    by = b[1],\n    bz = b[2];\n  out[0] = ay * bz - az * by;\n  out[1] = az * bx - ax * bz;\n  out[2] = ax * by - ay * bx;\n  return out;\n}\nfunction distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return Math.hypot ? Math.hypot(x, y, z) : hypot(x, y, z);\n}\nfunction transformMat4(out, a, m) {\n  var x = a[0],\n    y = a[1],\n    z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z + m[15];\n  w = w || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n  return out;\n}\nfunction hypot() {\n  var y = 0;\n  var i = arguments.length;\n  while (i--) {\n    y += arguments[i] * arguments[i];\n  }\n  return Math.sqrt(y);\n}\n\nfunction applyMatrix(out, v, e) {\n  var x = v[0],\n    y = v[1],\n    z = v[2];\n  var w = 1 / (e[3] * x + e[7] * y + e[11] * z + e[15]);\n  out[0] = (e[0] * x + e[4] * y + e[8] * z + e[12]) * w;\n  out[1] = (e[1] * x + e[5] * y + e[9] * z + e[13]) * w;\n  out[2] = (e[2] * x + e[6] * y + e[10] * z + e[14]) * w;\n  return out;\n}\nfunction matrixToQuaternion(out, te) {\n  var m11 = te[0],\n    m12 = te[4],\n    m13 = te[8],\n    m21 = te[1],\n    m22 = te[5],\n    m23 = te[9],\n    m31 = te[2],\n    m32 = te[6],\n    m33 = te[10],\n    trace = m11 + m22 + m33;\n  var s;\n  if (trace > 0) {\n    s = 0.5 / Math.sqrt(trace + 1.0);\n    out.w = 0.25 / s;\n    out.x = (m32 - m23) * s;\n    out.y = (m13 - m31) * s;\n    out.z = (m21 - m12) * s;\n  } else if (m11 > m22 && m11 > m33) {\n    s = 2.0 * Math.sqrt(1.0 + m11 - m22 - m33);\n    out.w = (m32 - m23) / s;\n    out.x = 0.25 * s;\n    out.y = (m12 + m21) / s;\n    out.z = (m13 + m31) / s;\n  } else if (m22 > m33) {\n    s = 2.0 * Math.sqrt(1.0 + m22 - m11 - m33);\n    out.w = (m13 - m31) / s;\n    out.x = (m12 + m21) / s;\n    out.y = 0.25 * s;\n    out.z = (m23 + m32) / s;\n  } else {\n    s = 2.0 * Math.sqrt(1.0 + m33 - m11 - m22);\n    out.w = (m21 - m12) / s;\n    out.x = (m13 + m31) / s;\n    out.y = (m23 + m32) / s;\n    out.z = 0.25 * s;\n  }\n  return this;\n}\nfunction quaternionToMatrix(out, q) {\n  var te = out;\n  var x = q.x,\n    y = q.y,\n    z = q.z,\n    w = q.w;\n  var x2 = x + x,\n    y2 = y + y,\n    z2 = z + z;\n  var xx = x * x2,\n    xy = x * y2,\n    xz = x * z2;\n  var yy = y * y2,\n    yz = y * z2,\n    zz = z * z2;\n  var wx = w * x2,\n    wy = w * y2,\n    wz = w * z2;\n  te[0] = 1 - (yy + zz);\n  te[4] = xy - wz;\n  te[8] = xz + wy;\n  te[1] = xy + wz;\n  te[5] = 1 - (xx + zz);\n  te[9] = yz - wx;\n  te[2] = xz - wy;\n  te[6] = yz + wx;\n  te[10] = 1 - (xx + yy);\n  te[3] = 0;\n  te[7] = 0;\n  te[11] = 0;\n  te[12] = 0;\n  te[13] = 0;\n  te[14] = 0;\n  te[15] = 1;\n  return te;\n}\nfunction setPosition(out, v) {\n  var te = out;\n  te[12] = v[0];\n  te[13] = v[1];\n  te[14] = v[2];\n  return out;\n}\nfunction lookAt(te, eye, target, up) {\n  var x = [0, 0, 0];\n  var y = [0, 0, 0];\n  var z = [0, 0, 0];\n  subtract(z, eye, target);\n  if (length(z) === 0) {\n    z[2] = 1;\n  }\n  normalize(z, z);\n  cross(x, up, z);\n  if (length(z) === 0) {\n    if (Math.abs(up[2]) === 1) {\n      z[0] += 0.0001;\n    } else {\n      z[2] += 0.0001;\n    }\n    normalize(z, z);\n    cross(x, up, z);\n  }\n  normalize(x, x);\n  cross(y, z, x);\n  te[0] = x[0];\n  te[4] = y[0];\n  te[8] = z[0];\n  te[1] = x[1];\n  te[5] = y[1];\n  te[9] = z[1];\n  te[2] = x[2];\n  te[6] = y[2];\n  te[10] = z[2];\n  return te;\n}\n\nvar RADIAN$1 = Math.PI / 180;\nvar DEFAULT_FOV = 0.6435011087932844;\nvar TEMP_COORD$1 = new Coordinate(0, 0);\nvar TEMP_POINT$1 = new Point(0, 0);\nvar altitudesHasData = function altitudesHasData(altitudes) {\n  if (isNumber(altitudes)) {\n    return altitudes !== 0;\n  } else if (Array.isArray(altitudes) && altitudes.length > 0) {\n    for (var i = 0, len = altitudes.length; i < len; i++) {\n      if (isNumber(altitudes[i]) && altitudes[i] !== 0) {\n        return true;\n      }\n    }\n  }\n  return false;\n};\nMap$1.include({\n  getFov: function getFov() {\n    if (!this._fov) {\n      this._fov = DEFAULT_FOV;\n    }\n    return this._fov / RADIAN$1;\n  },\n  setFov: function setFov(fov) {\n    if (this.isZooming()) {\n      return this;\n    }\n    fov = Math.max(0.01, Math.min(60, fov));\n    if (this._fov === fov) return this;\n    var from = this.getFov();\n    this._fov = fov * RADIAN$1;\n    this._calcMatrices();\n    this._renderLayers();\n    this._fireEvent('fovchange', {\n      'from': from,\n      'to': this.getFov()\n    });\n    return this;\n  },\n  getBearing: function getBearing() {\n    if (!this._angle) {\n      return 0;\n    }\n    return -this._angle / RADIAN$1;\n  },\n  setBearing: function setBearing(bearing) {\n    if (this._mapAnimPlayer) {\n      this._stopAnim(this._mapAnimPlayer);\n    }\n    return this._setBearing(bearing);\n  },\n  _setBearing: function _setBearing(bearing) {\n    if (Browser$1.ie9) {\n      throw new Error('map can\\'t rotate in IE9.');\n    }\n    var b = -wrap(bearing, -180, 180) * RADIAN$1;\n    if (this._angle === b) return this;\n    var from = this.getBearing();\n    this._fireEvent('rotatestart', {\n      'from': from,\n      'to': b\n    });\n    this._angle = b;\n    this._calcMatrices();\n    this._renderLayers();\n    this._fireEvent('rotate', {\n      'from': from,\n      'to': b\n    });\n    this._fireEvent('rotateend', {\n      'from': from,\n      'to': b\n    });\n    return this;\n  },\n  getPitch: function getPitch() {\n    if (!this._pitch) {\n      return 0;\n    }\n    return this._pitch / Math.PI * 180;\n  },\n  setPitch: function setPitch(pitch) {\n    if (this._mapAnimPlayer) {\n      this._stopAnim(this._mapAnimPlayer);\n    }\n    return this._setPitch(pitch);\n  },\n  _setPitch: function _setPitch(pitch) {\n    if (Browser$1.ie9) {\n      throw new Error('map can\\'t tilt in IE9.');\n    }\n    var p = clamp(pitch, 0, this.options['maxPitch']) * RADIAN$1;\n    if (this._pitch === p) return this;\n    var from = this.getPitch();\n    this._fireEvent('pitchstart', {\n      'from': from,\n      'to': p\n    });\n    this._pitch = p;\n    this._calcMatrices();\n    this._renderLayers();\n    this._fireEvent('pitch', {\n      'from': from,\n      'to': p\n    });\n    this._fireEvent('pitchend', {\n      'from': from,\n      'to': p\n    });\n    return this;\n  },\n  setCameraMovements: function setCameraMovements(frameOptions, extraOptions) {\n    var _this = this;\n    if (!Array.isArray(frameOptions) || !frameOptions.length) {\n      return this;\n    }\n    this.setView({\n      center: frameOptions[0].center,\n      zoom: frameOptions[0].zoom,\n      pitch: frameOptions[0].pitch,\n      bearing: frameOptions[0].bearing\n    });\n    if (frameOptions.length === 1) return this;\n    var index = 1;\n    var _onFrame = function onFrame(frame) {\n      if (frame.state.playState === 'finished') {\n        index++;\n        if (index === frameOptions.length - 1) _onFrame = null;\n        var frameOption = frameOptions[index];\n        frameOption.duration = frameOption.timestamp - frameOptions[index - 1].timestamp;\n        if (extraOptions && extraOptions.autoRotate) {\n          frameOption.bearing = calculateBearing(frameOptions[index - 1].center, frameOption.center);\n        }\n        _this._setCameraMovement(frameOption, _onFrame);\n      }\n    };\n    if (frameOptions.length === 2) _onFrame = null;\n    var currentBearing = this.getBearing();\n    this._setCameraMovement(_extends({\n      bearing: currentBearing\n    }, frameOptions[index], {\n      duration: frameOptions[index].timestamp - frameOptions[index - 1].timestamp\n    }), _onFrame);\n    var play = function play() {\n      _this._animPlayer.play();\n    };\n    var pause = function pause() {\n      _this._animPlayer.pause();\n    };\n    var cancel = function cancel() {\n      _this._animPlayer.cancel();\n    };\n    var finish = function finish() {\n      _this._animPlayer.finish();\n    };\n    var reverse = function reverse() {\n      _this._animPlayer.reverse();\n    };\n    return {\n      play: play,\n      pause: pause,\n      cancel: cancel,\n      finish: finish,\n      reverse: reverse\n    };\n  },\n  _setCameraMovement: function _setCameraMovement(frameOption, frame) {\n    this.animateTo({\n      zoom: frameOption.zoom,\n      center: frameOption.center,\n      pitch: frameOption.pitch,\n      bearing: frameOption.bearing\n    }, {\n      duration: frameOption.duration,\n      easing: 'out'\n    }, frame);\n  },\n  setCameraPosition: function setCameraPosition(params) {\n    var position = params.position,\n      pitch = params.pitch,\n      bearing = params.bearing;\n    var cameraAltitude = position[2] * this._meterToGLPoint;\n    var centerAltitude = this.centerAltitude || 0;\n    var centerPointZ = centerAltitude * this._meterToGLPoint;\n    var cz = cameraAltitude - centerPointZ;\n    var pitchRadian = pitch * RADIAN$1;\n    var cameraToGroundDistance = cz / Math.cos(pitchRadian);\n    var dist = Math.sin(pitchRadian) * cameraToGroundDistance;\n    var cameraToCenterDistance = cameraToGroundDistance + centerPointZ;\n    var zoom = this._getZoomFromCameraToCenterDistance(cameraToCenterDistance);\n    var wrapBearing = wrap(bearing, -180, 180);\n    var bearingRadian = wrapBearing * RADIAN$1;\n    var glRes = this.getGLRes();\n    var tempCoord = new Coordinate(position[0], position[1]);\n    var tempPoint = this.coordToPointAtRes(tempCoord, glRes);\n    var point = new Point(0, 0);\n    point.x = tempPoint.x + dist * Math.sin(bearingRadian);\n    point.y = tempPoint.y + dist * Math.cos(bearingRadian);\n    var prjCenter = this._pointToPrjAtRes(point, this.getGLRes());\n    this._setPrjCenter(prjCenter);\n    this.setView({\n      bearing: bearing,\n      pitch: pitch,\n      zoom: zoom\n    });\n    return this;\n  },\n  _getZoomFromCameraToCenterDistance: function _getZoomFromCameraToCenterDistance(distance$$1) {\n    var ratio = this._getFovRatio();\n    var scale$$1 = distance$$1 * ratio * 2 / (this.height || 1) * this.getGLRes();\n    var resolutions = this._getResolutions();\n    var z = 0;\n    for (z; z < resolutions.length - 1; z++) {\n      if (resolutions[z] === scale$$1) {\n        return z;\n      } else if (resolutions[z + 1] === scale$$1) {\n        return z + 1;\n      } else if (scale$$1 < resolutions[z] && scale$$1 > resolutions[z + 1]) {\n        z = (scale$$1 - resolutions[z]) / (resolutions[z + 1] - resolutions[z]) + z;\n        return z - 1;\n      } else {\n        continue;\n      }\n    }\n    return z;\n  },\n  isTransforming: function isTransforming() {\n    return !!(this._pitch || this._angle);\n  },\n  getFrustumAltitude: function getFrustumAltitude() {\n    return this._frustumAltitude;\n  },\n  _calcFrustumAltitude: function _calcFrustumAltitude() {\n    var pitch = 90 - this.getPitch();\n    var fov = this.getFov() / 2;\n    var cameraAlt = this.cameraPosition ? this.cameraPosition[2] : 0;\n    if (fov <= pitch) {\n      return cameraAlt;\n    }\n    fov = Math.PI * fov / 180;\n    var d1 = new Point(this.cameraPosition).distanceTo(new Point(this.cameraLookAt)),\n      d2 = cameraAlt * Math.tan(fov * 2);\n    var d = Math.tan(fov) * (d1 + d2);\n    return cameraAlt + d;\n  },\n  _pointToContainerPoint: function _pointToContainerPoint(point, zoom, altitude, out) {\n    if (altitude === void 0) {\n      altitude = 0;\n    }\n    var res = this._getResolution(zoom);\n    return this._pointAtResToContainerPoint(point, res, altitude, out);\n  },\n  _pointAtResToContainerPoint: function _pointAtResToContainerPoint(point, res, altitude, out) {\n    if (altitude === void 0) {\n      altitude = 0;\n    }\n    if (!out) {\n      out = new Point(0, 0);\n    }\n    point = this._pointAtResToPoint(point, res, out);\n    var isTransforming = this.isTransforming();\n    var centerPoint;\n    if (!isTransforming && !altitude) {\n      centerPoint = this._prjToPoint(this._getPrjCenter(), undefined, TEMP_COORD$1);\n    }\n    this._toContainerPoint(out, isTransforming, altitude, centerPoint);\n    return out;\n  },\n  _pointsAtResToContainerPoints: function _pointsAtResToContainerPoints(points, targetRes, altitudes, resultPoints) {\n    if (altitudes === void 0) {\n      altitudes = [];\n    }\n    if (resultPoints === void 0) {\n      resultPoints = [];\n    }\n    var pitch = this.getPitch(),\n      bearing = this.getBearing();\n    var scale$$1 = targetRes / this._getResolution();\n    if (pitch === 0 && bearing === 0 && !altitudesHasData(altitudes)) {\n      var _this$_get2DExtent = this._get2DExtent(),\n        xmin = _this$_get2DExtent.xmin,\n        ymin = _this$_get2DExtent.ymin,\n        xmax = _this$_get2DExtent.xmax,\n        ymax = _this$_get2DExtent.ymax;\n      if (xmax > xmin && ymax > ymin) {\n        var _this$getSize = this.getSize(),\n          width = _this$getSize.width,\n          height = _this$getSize.height;\n        var dxPerPixel = (xmax - xmin) / width,\n          dyPerPixel = (ymax - ymin) / height;\n        for (var i = 0, len = points.length; i < len; i++) {\n          if (!points[i]) {\n            resultPoints[i] = null;\n            continue;\n          }\n          var pt = resultPoints[i];\n          pt.x = points[i].x;\n          pt.y = points[i].y;\n          pt._multi(scale$$1);\n          pt.x = (pt.x - xmin) * dxPerPixel;\n          pt.y = height - (pt.y - ymin) * dyPerPixel;\n        }\n        return resultPoints;\n      }\n    }\n    var altitudeIsArray = Array.isArray(altitudes);\n    var isTransforming = this.isTransforming();\n    var centerPoint = this._prjToPoint(this._getPrjCenter(), undefined, TEMP_COORD$1);\n    for (var _i = 0, _len = points.length; _i < _len; _i++) {\n      if (!points[_i]) {\n        resultPoints[_i] = null;\n        continue;\n      }\n      var _pt = resultPoints[_i];\n      _pt.x = points[_i].x;\n      _pt.y = points[_i].y;\n      _pt._multi(scale$$1);\n      var altitude = altitudeIsArray ? altitudes[_i] || 0 : altitudes;\n      this._toContainerPoint(_pt, isTransforming, altitude, centerPoint);\n    }\n    return resultPoints;\n  },\n  _toContainerPoint: function () {\n    var a = [0, 0, 0];\n    return function (out, isTransforming, altitude, centerPoint) {\n      var w2 = this.width / 2,\n        h2 = this.height / 2;\n      if (isTransforming || altitude) {\n        if (!this._altitudeScale) {\n          this._altitudeScale = this.altitudeToPoint(100, this.getGLRes()) / 100;\n        }\n        var _scale = this._glScale;\n        set$2(a, out.x * _scale, out.y * _scale, altitude * this._altitudeScale);\n        var t = this._projIfBehindCamera(a, this.cameraPosition, this.cameraForward);\n        applyMatrix(t, t, this.projViewMatrix);\n        out.x = t[0] * w2 + w2;\n        out.y = -(t[1] * h2) + h2;\n      } else {\n        out._sub(centerPoint.x, centerPoint.y);\n        out.set(out.x, -out.y);\n        out._add(w2, h2);\n      }\n    };\n  }(),\n  _projIfBehindCamera: function () {\n    var vectorFromCam = new Array(3);\n    var proj = new Array(3);\n    var sub = new Array(3);\n    return function (position, cameraPos, camForward) {\n      subtract(vectorFromCam, position, cameraPos);\n      var camNormDot = dot(camForward, vectorFromCam);\n      if (camNormDot <= 0) {\n        scale$1(proj, camForward, camNormDot * 1.01);\n        add(position, cameraPos, subtract(sub, vectorFromCam, proj));\n      }\n      return position;\n    };\n  }(),\n  _containerPointToPoint: function _containerPointToPoint(p, zoom, out) {\n    var res = this._getResolution(zoom);\n    return this._containerPointToPointAtRes(p, res, out);\n  },\n  _containerPointToPointAtRes: function () {\n    var cp = [0, 0, 0],\n      coord0 = [0, 0, 0, 1],\n      coord1 = [0, 0, 0, 1];\n    return function (p, res, out) {\n      if (this.isTransforming()) {\n        var w2 = this.width / 2 || 1,\n          h2 = this.height / 2 || 1;\n        set$2(cp, (p.x - w2) / w2, (h2 - p.y) / h2, 0);\n        set$2(coord0, cp[0], cp[1], 0);\n        set$2(coord1, cp[0], cp[1], 1);\n        coord0[3] = coord1[3] = 1;\n        applyMatrix(coord0, coord0, this.projViewMatrixInverse);\n        applyMatrix(coord1, coord1, this.projViewMatrixInverse);\n        var x0 = coord0[0];\n        var x1 = coord1[0];\n        var y0 = coord0[1];\n        var y1 = coord1[1];\n        var z0 = coord0[2];\n        var z1 = coord1[2];\n        var t = z0 === z1 ? 0 : (0 - z0) / (z1 - z0);\n        var _x = interpolate(x0, x1, t);\n        var _y = interpolate(y0, y1, t);\n        if (out) {\n          out.x = _x;\n          out.y = _y;\n        } else {\n          out = new Point(_x, _y);\n        }\n        out._multi(1 / this._glScale);\n        return this._getResolution() === res ? out : this._pointToPointAtRes(out, res, out);\n      }\n      var centerPoint = this._prjToPointAtRes(this._getPrjCenter(), res, out),\n        scale$$1 = this._getResolution() / res;\n      var x = scale$$1 * (p.x - this.width / 2),\n        y = scale$$1 * (p.y - this.height / 2);\n      return centerPoint._add(x, -y);\n    };\n  }(),\n  _calcMatrices: function () {\n    var m1 = createMat4();\n    return function () {\n      delete this._mapRes;\n      delete this._mapGlRes;\n      delete this._mapExtent2D;\n      delete this._mapGlExtent2D;\n      var size = this.getSize();\n      var w = size.width || 1,\n        h = size.height || 1;\n      this._glScale = this.getGLScale();\n      var worldMatrix = this._getCameraWorldMatrix();\n      var fov = this.getFov() * Math.PI / 180;\n      var farZ = this._getCameraFar(fov, this.getPitch());\n      this.cameraFar = farZ;\n      this.cameraNear = this.cameraCenterDistance / 20;\n      var projMatrix = this.projMatrix || createMat4();\n      perspective(projMatrix, fov, w / h, this.cameraNear, farZ);\n      this.projMatrix = projMatrix;\n      this.viewMatrix = invert(this.viewMatrix || createMat4(), worldMatrix);\n      this.projViewMatrix = multiply(this.projViewMatrix || createMat4(), projMatrix, this.viewMatrix);\n      this._calcCascadeMatrixes();\n      this.projViewMatrixInverse = multiply(this.projViewMatrixInverse || createMat4(), worldMatrix, invert(m1, projMatrix));\n      this.domCssMatrix = this._calcDomMatrix();\n      this._frustumAltitude = this._calcFrustumAltitude();\n      this._mapRes = this._getResolution();\n      this._mapGlRes = this.getGLRes();\n      this._mapExtent2D = this._get2DExtent();\n      this._mapGlExtent2D = this._get2DExtentAtRes(this._mapGlRes);\n    };\n  }(),\n  _getCameraFar: function _getCameraFar(fov, pitch) {\n    var cameraCenterDistance = this.cameraCenterDistance = distance(this.cameraPosition, this.cameraLookAt);\n    var farZ = cameraCenterDistance;\n    var y = (this.options['cameraInfiniteFar'] ? 10 : 4) * cameraCenterDistance;\n    if (pitch > 0) {\n      pitch = pitch * Math.PI / 180;\n      if (2 / Math.PI - pitch > fov / 2) {\n        var tanFov = Math.tan(fov / 2);\n        var tanP = Math.tan(pitch);\n        y = Math.max(cameraCenterDistance * tanFov / (1 / tanP - tanFov), y);\n      }\n    }\n    farZ += y;\n    return farZ + 1.0;\n  },\n  _calcCascadeMatrixes: function () {\n    var projMatrix = createMat4();\n    function cal(curPitch, pitch, out) {\n      var w = this.width;\n      var h = this.height;\n      var fov = this.getFov() * Math.PI / 180;\n      var farZ = this._getCameraFar(fov, pitch);\n      var cameraCenterDistance = this.cameraCenterDistance;\n      farZ = cameraCenterDistance + (farZ - cameraCenterDistance) / Math.cos((90 - pitch) * Math.PI / 180) * Math.cos((90 - curPitch) * Math.PI / 180);\n      perspective(projMatrix, fov, w / h, 0.1, farZ);\n      var viewMatrix = this.viewMatrix;\n      return multiply(out, projMatrix, viewMatrix);\n    }\n    return function () {\n      var pitch = this.getPitch();\n      var cascadePitch0 = this.options['cascadePitches'][0];\n      var cascadePitch1 = this.options['cascadePitches'][1];\n      var projViewMatrix0 = this.cascadeFrustumMatrix0 = this.cascadeFrustumMatrix0 || createMat4();\n      var projViewMatrix1 = this.cascadeFrustumMatrix1 = this.cascadeFrustumMatrix1 || createMat4();\n      if (pitch > cascadePitch0) {\n        cal.call(this, pitch, cascadePitch0, projViewMatrix0);\n      } else {\n        copy(this.cascadeFrustumMatrix0, this.projViewMatrix);\n      }\n      if (pitch > cascadePitch1) {\n        cal.call(this, pitch, cascadePitch1, projViewMatrix1);\n      } else {\n        copy(this.cascadeFrustumMatrix1, this.cascadeFrustumMatrix0);\n      }\n    };\n  }(),\n  _calcDomMatrix: function () {\n    var m = createMat4(),\n      m1 = createMat4(),\n      minusY = [1, -1, 1],\n      arr = [0, 0, 0];\n    return function () {\n      var width = this.width || 1;\n      var height = this.height || 1;\n      var cameraToCenterDistance = 0.5 / Math.tan(this._fov / 2) * height;\n      scale(m, this.projMatrix, minusY);\n      translate(m, m, set$2(arr, 0, 0, -cameraToCenterDistance));\n      if (this._pitch) {\n        rotateX(m, m, this._pitch);\n      }\n      if (this._angle) {\n        rotateZ(m, m, this._angle);\n      }\n      identity(m1);\n      scale(m1, m1, set$2(arr, width / 2, -height / 2, 1));\n      return multiply(this.domCssMatrix || createMat4(), m1, m);\n    };\n  }(),\n  _getFovZ: function _getFovZ(zoom) {\n    var scale$$1 = this.getGLScale(zoom);\n    var ratio = this._getFovRatio();\n    return scale$$1 * (this.height || 1) / 2 / ratio;\n  },\n  _getCameraWorldMatrix: function () {\n    var q = {};\n    return function () {\n      var glRes = this.getGLRes();\n      if (!this._meterToGLPoint) {\n        this._meterToGLPoint = this.distanceToPointAtRes(100, 0, glRes).x / 100;\n      }\n      var center2D = this._prjToPointAtRes(this._prjCenter, glRes, TEMP_POINT$1);\n      var centerAltitude = this.centerAltitude || 0;\n      var centerPointZ = centerAltitude * this._meterToGLPoint;\n      this.cameraLookAt = set$2(this.cameraLookAt || [0, 0, 0], center2D.x, center2D.y, centerPointZ);\n      var pitch = this.getPitch() * RADIAN$1;\n      var bearing = this.getBearing() * RADIAN$1;\n      var cameraToCenterDistance = this._getFovZ();\n      var cameraZenithDistance = this.cameraZenithDistance === undefined ? cameraToCenterDistance : this.cameraZenithDistance;\n      var cameraToGroundDistance = cameraZenithDistance - centerPointZ;\n      var cz = cameraToGroundDistance * Math.cos(pitch);\n      var dist = Math.sin(pitch) * cameraToGroundDistance;\n      var cx = center2D.x - dist * Math.sin(bearing);\n      var cy = center2D.y - dist * Math.cos(bearing);\n      this.cameraPosition = set$2(this.cameraPosition || [0, 0, 0], cx, cy, cz + centerPointZ);\n      this.cameraToCenterDistance = cameraToCenterDistance;\n      var d = dist || 1;\n      var up = this.cameraUp = set$2(this.cameraUp || [0, 0, 0], Math.sin(bearing) * d, Math.cos(bearing) * d, 0);\n      var m = this.cameraWorldMatrix = this.cameraWorldMatrix || createMat4();\n      lookAt(m, this.cameraPosition, this.cameraLookAt, up);\n      var cameraForward = this.cameraForward || [0, 0, 0];\n      subtract(cameraForward, this.cameraLookAt, this.cameraPosition);\n      this.cameraForward = normalize(cameraForward, cameraForward);\n      matrixToQuaternion(q, m);\n      quaternionToMatrix(m, q);\n      setPosition(m, this.cameraPosition);\n      return m;\n    };\n  }(),\n  updateCenterAltitude: function updateCenterAltitude() {\n    this.getRenderer().setToRedraw();\n    if (!this.centerAltitude && this._hasAltitudeLayer()) {\n      this.centerAltitude = 0;\n    }\n    this._recenterOnTerrain();\n  },\n  _recenterOnTerrain: function _recenterOnTerrain() {\n    if (this.centerAltitude === undefined) {\n      return;\n    }\n    var queriedAltitude = this._queryTerrainByProjCoord(this._prjCenter);\n    if (isNil(queriedAltitude) && this._hasAltitudeLayer()) {\n      queriedAltitude = this.centerAltitude;\n    }\n    var centerAltitude = queriedAltitude || 0;\n    var pitch = this.getPitch() * RADIAN$1;\n    var bearing = this.getBearing() * RADIAN$1;\n    var altDist = (centerAltitude - this.centerAltitude) * this._meterToGLPoint;\n    var cameraToCenterDistance = this._getFovZ();\n    var cameraZenithDistance = this.cameraZenithDistance === undefined ? cameraToCenterDistance : this.cameraZenithDistance;\n    var cameraToGroundDistance = cameraZenithDistance - this.centerAltitude * this._meterToGLPoint;\n    var newCameraToGroundDistance = cameraToGroundDistance - altDist / Math.cos(pitch);\n    var cameraPosition = this.cameraPosition;\n    var dist = Math.sin(pitch) * newCameraToGroundDistance;\n    var center2D = TEMP_POINT$1;\n    center2D.x = cameraPosition[0] + dist * Math.sin(bearing);\n    center2D.y = cameraPosition[1] + dist * Math.cos(bearing);\n    var centerPointZ = centerAltitude * this._meterToGLPoint;\n    this.cameraZenithDistance = (cameraPosition[2] - centerPointZ) / Math.cos(pitch) + centerPointZ;\n    this.centerAltitude = centerAltitude;\n    var newCenter = this.pointAtResToCoordinate(center2D, this.getGLRes(), TEMP_COORD$1);\n    this._eventSilence = true;\n    this._suppressRecenter = true;\n    this.setCenter(newCenter);\n    delete this._suppressRecenter;\n    delete this._eventSilence;\n    if (isNil(queriedAltitude)) {\n      delete this.centerAltitude;\n    }\n  },\n  _queryTerrainByProjCoord: function _queryTerrainByProjCoord(coord) {\n    var layers = this._getLayers();\n    for (var i = 0; i < layers.length; i++) {\n      if (layers[i].queryTerrainByProjCoord) {\n        return layers[i].queryTerrainByProjCoord(coord)[0];\n      }\n    }\n    return 0;\n  },\n  _hasAltitudeLayer: function _hasAltitudeLayer() {\n    var layers = this._getLayers();\n    for (var i = 0; i < layers.length; i++) {\n      if (layers[i].getTerrainLayer && layers[i].getTerrainLayer()) {\n        return true;\n      }\n    }\n    return false;\n  },\n  _getFovRatio: function _getFovRatio() {\n    var fov = this.getFov();\n    return Math.tan(fov / 2 * RADIAN$1);\n  },\n  _renderLayers: function _renderLayers() {\n    if (this.isInteracting()) {\n      return;\n    }\n    var layers = this._getLayers();\n    layers.forEach(function (layer) {\n      if (!layer) {\n        return;\n      }\n      var renderer = layer._getRenderer();\n      if (renderer && renderer.setToRedraw) {\n        renderer.setToRedraw();\n      }\n    });\n  }\n});\nfunction createMat4() {\n  return identity(new Array(16));\n}\nfunction calculateBearing(start, end) {\n  var lon1 = toRadian(start[0]);\n  var lon2 = toRadian(end[0]);\n  var lat1 = toRadian(start[1]);\n  var lat2 = toRadian(end[1]);\n  var a = Math.sin(lon2 - lon1) * Math.cos(lat2);\n  var b = Math.cos(lat1) * Math.sin(lat2) - Math.sin(lat1) * Math.cos(lat2) * Math.cos(lon2 - lon1);\n  return toDegree(Math.atan2(a, b));\n}\n\nMap$1.include({\n  _onViewChange: function _onViewChange(view) {\n    if (!this._viewHistory) {\n      this._viewHistory = [];\n      this._viewHistoryPointer = 0;\n    }\n    var old = this._getCurrentView();\n    for (var i = this._viewHistory.length - 1; i >= 0; i--) {\n      if (equalMapView(view, this._viewHistory[i])) {\n        this._viewHistoryPointer = i;\n        this._fireViewChange(old, view);\n        return;\n      }\n    }\n    if (this._viewHistoryPointer < this._viewHistory.length - 1) {\n      this._viewHistory.splice(this._viewHistoryPointer + 1);\n    }\n    this._viewHistory.push(view);\n    var count = this.options['viewHistoryCount'];\n    if (count > 0 && this._viewHistory.length > count) {\n      this._viewHistory.splice(0, this._viewHistory.length - count);\n    }\n    this._viewHistoryPointer = this._viewHistory.length - 1;\n    this._fireViewChange(old, view);\n  },\n  zoomToPreviousView: function zoomToPreviousView(options) {\n    if (options === void 0) {\n      options = {};\n    }\n    if (!this.hasPreviousView()) {\n      return null;\n    }\n    var view = this._viewHistory[--this._viewHistoryPointer];\n    this._zoomToView(view, options);\n    return view;\n  },\n  hasPreviousView: function hasPreviousView() {\n    if (!this._viewHistory || this._viewHistoryPointer === 0) {\n      return false;\n    }\n    return true;\n  },\n  zoomToNextView: function zoomToNextView(options) {\n    if (options === void 0) {\n      options = {};\n    }\n    if (!this.hasNextView()) {\n      return null;\n    }\n    var view = this._viewHistory[++this._viewHistoryPointer];\n    this._zoomToView(view, options);\n    return view;\n  },\n  hasNextView: function hasNextView() {\n    if (!this._viewHistory || this._viewHistoryPointer === this._viewHistory.length - 1) {\n      return false;\n    }\n    return true;\n  },\n  _zoomToView: function _zoomToView(view, options) {\n    var _this = this;\n    var old = this.getView();\n    if (options['animation']) {\n      this._animateTo(view, {\n        'duration': options['duration']\n      }, function (frame) {\n        if (frame.state.playState === 'finished') {\n          _this._fireViewChange(old, view);\n        }\n      });\n    } else {\n      this.setView(view);\n      this._fireViewChange(old, view);\n    }\n  },\n  getViewHistory: function getViewHistory() {\n    return this._viewHistory;\n  },\n  _fireViewChange: function _fireViewChange(old, view) {\n    this._fireEvent('viewchange', {\n      'old': old,\n      'new': view\n    });\n    this._insertUICollidesQueue();\n  },\n  _getCurrentView: function _getCurrentView() {\n    if (!this._viewHistory) {\n      return null;\n    }\n    return this._viewHistory[this._viewHistoryPointer];\n  }\n});\nMap$1.mergeOptions({\n  'viewHistory': true,\n  'viewHistoryCount': 10\n});\n\nvar UICollisionIndex = new CollisionIndex();\nMap$1.include({\n  getCollisionIndex: function getCollisionIndex() {\n    if (!this._collisionIndex) {\n      this.createCollisionIndex();\n    }\n    return this._collisionIndex || this.createCollisionIndex();\n  },\n  createCollisionIndex: function createCollisionIndex() {\n    this.clearCollisionIndex();\n    this._collisionIndex = new CollisionIndex();\n    return this._collisionIndex;\n  },\n  clearCollisionIndex: function clearCollisionIndex() {\n    this.collisionFrameTime = 0;\n    if (this._collisionIndex) {\n      this._collisionIndex.clear();\n    }\n    return this;\n  },\n  _insertUICollidesQueue: function _insertUICollidesQueue() {\n    if (!this._uiCollidesQueue) {\n      this._uiCollidesQueue = [];\n    }\n    this._uiCollidesQueue.push(1);\n    return this;\n  },\n  uiCollides: function uiCollides() {\n    if (!this.uiList || this.uiList.length === 0 || !this._uiCollidesQueue || this._uiCollidesQueue.length === 0) {\n      return this;\n    }\n    var collisionIndex = UICollisionIndex;\n    collisionIndex.clear();\n    var uiList = this.uiList;\n    for (var i = 0, len = uiList.length; i < len; i++) {\n      var ui = uiList[i];\n      var _ui$options = ui.options,\n        collisionBufferSize = _ui$options.collisionBufferSize,\n        collision = _ui$options.collision;\n      if (!collision) {\n        continue;\n      }\n      var dom = ui.getDOM();\n      if (!ui.isVisible() || !dom) {\n        continue;\n      }\n      if (!dom.getBoundingClientRect) {\n        continue;\n      }\n      if (!ui.bbox) {\n        ui.bbox = [0, 0, 0, 0];\n      }\n      var bcRect = dom.getBoundingClientRect();\n      var x = bcRect.x,\n        y = bcRect.y;\n      var width = bcRect.width,\n        height = bcRect.height;\n      if (width === 0 || height === 0) {\n        var size = ui.getSize();\n        if (size) {\n          width = size.width;\n          height = size.height;\n        }\n      }\n      var minX = x - collisionBufferSize,\n        maxX = x + width + collisionBufferSize;\n      var minY = y - collisionBufferSize,\n        maxY = y + height + collisionBufferSize;\n      ui.bbox[0] = minX;\n      ui.bbox[1] = minY;\n      ui.bbox[2] = maxX;\n      ui.bbox[3] = maxY;\n      if (collisionIndex.collides(ui.bbox)) {\n        ui._collidesEffect(false);\n        continue;\n      }\n      collisionIndex.insertBox(ui.bbox);\n      ui._collidesEffect(true);\n    }\n    this._uiCollidesQueue = [];\n    return this;\n  },\n  _addUI: function _addUI(ui) {\n    if (!this.uiList) {\n      this.uiList = [];\n    }\n    var index = this.uiList.indexOf(ui);\n    if (index > -1) {\n      return this;\n    }\n    this.uiList.push(ui);\n    this.uiList = this.uiList.sort(function (a, b) {\n      return b.options['collisionWeight'] - a.options['collisionWeight'];\n    });\n    return this;\n  },\n  _removeUI: function _removeUI(ui) {\n    if (!this.uiList) {\n      return -1;\n    }\n    var index = this.uiList.indexOf(ui);\n    if (index < 0) {\n      return index;\n    }\n    this.uiList.splice(index, 1);\n    return index;\n  }\n});\n\nvar options$h = {\n  'decimalPlaces': 2,\n  'mode': 'LineString',\n  'language': 'zh-CN',\n  'metric': true,\n  'imperial': false,\n  'symbol': {\n    'lineColor': '#000',\n    'lineWidth': 3,\n    'lineOpacity': 1\n  },\n  'vertexSymbol': {\n    'markerType': 'ellipse',\n    'markerFill': '#fff',\n    'markerLineColor': '#000',\n    'markerLineWidth': 3,\n    'markerWidth': 11,\n    'markerHeight': 11\n  },\n  'labelOptions': {\n    'textSymbol': {\n      'textFaceName': 'monospace',\n      'textLineSpacing': 1,\n      'textHorizontalAlignment': 'right',\n      'textDx': 15\n    },\n    'boxStyle': {\n      'padding': [6, 2],\n      'symbol': {\n        'markerType': 'square',\n        'markerFill': '#fff',\n        'markerFillOpacity': 0.9,\n        'markerLineColor': '#b4b3b3'\n      }\n    }\n  },\n  'clearButtonSymbol': [{\n    'markerType': 'square',\n    'markerFill': '#fff',\n    'markerLineColor': '#b4b3b3',\n    'markerLineWidth': 2,\n    'markerWidth': 15,\n    'markerHeight': 15,\n    'markerDx': 20\n  }, {\n    'markerType': 'x',\n    'markerWidth': 10,\n    'markerHeight': 10,\n    'markerDx': 20\n  }]\n};\nvar DistanceTool = function (_DrawTool) {\n  _inheritsLoose(DistanceTool, _DrawTool);\n  function DistanceTool(options) {\n    var _this;\n    _this = _DrawTool.call(this, options) || this;\n    _this.on('enable', _this._afterEnable, _assertThisInitialized(_assertThisInitialized(_this))).on('disable', _this._afterDisable, _assertThisInitialized(_assertThisInitialized(_this)));\n    _this._measureLayers = [];\n    return _this;\n  }\n  var _proto = DistanceTool.prototype;\n  _proto.clear = function clear() {\n    if (isArrayHasData(this._measureLayers)) {\n      for (var i = 0; i < this._measureLayers.length; i++) {\n        this._measureLayers[i].remove();\n      }\n    }\n    delete this._lastMeasure;\n    delete this._lastVertex;\n    this._measureLayers = [];\n    return this;\n  };\n  _proto.getMeasureLayers = function getMeasureLayers() {\n    return this._measureLayers;\n  };\n  _proto.getLastMeasure = function getLastMeasure() {\n    if (!this._lastMeasure) {\n      return 0;\n    }\n    return this._lastMeasure;\n  };\n  _proto.undo = function undo() {\n    _DrawTool.prototype.undo.call(this);\n    var pointer = this._historyPointer;\n    if (pointer !== this._vertexes.length) {\n      for (var i = pointer; i < this._vertexes.length; i++) {\n        if (this._vertexes[i].label) {\n          this._vertexes[i].label.remove();\n        }\n        this._vertexes[i].marker.remove();\n      }\n    }\n    return this;\n  };\n  _proto.redo = function redo() {\n    _DrawTool.prototype.redo.call(this);\n    var i = this._historyPointer - 1;\n    if (this._vertexes[i]) {\n      if (!this._vertexes[i].marker.getLayer()) {\n        if (this._vertexes[i].label) {\n          this._vertexes[i].label.addTo(this._measureMarkerLayer);\n        }\n        this._vertexes[i].marker.addTo(this._measureMarkerLayer);\n      }\n    }\n    return this;\n  };\n  _proto._measure = function _measure(toMeasure) {\n    var map = this.getMap();\n    var length;\n    if (toMeasure instanceof Geometry) {\n      length = map.computeGeometryLength(toMeasure);\n    } else if (Array.isArray(toMeasure)) {\n      length = map.getProjection().measureLength(toMeasure);\n    }\n    this._lastMeasure = length;\n    var units;\n    if (this.options['language'] === 'zh-CN') {\n      units = [' 米', ' 公里', ' 英尺', ' 英里'];\n    } else {\n      units = [' m', ' km', ' feet', ' mile'];\n    }\n    var content = '';\n    var decimals = this.options['decimalPlaces'];\n    if (this.options['metric']) {\n      content += length < 1000 ? length.toFixed(decimals) + units[0] : (length / 1000).toFixed(decimals) + units[1];\n    }\n    if (this.options['imperial']) {\n      length *= 3.2808399;\n      if (content.length > 0) {\n        content += '\\n';\n      }\n      content += length < 5280 ? length.toFixed(decimals) + units[2] : (length / 5280).toFixed(decimals) + units[3];\n    }\n    return content;\n  };\n  _proto._registerMeasureEvents = function _registerMeasureEvents() {\n    this.on('drawstart', this._msOnDrawStart, this).on('drawvertex', this._msOnDrawVertex, this).on('mousemove', this._msOnMouseMove, this).on('drawend', this._msOnDrawEnd, this);\n  };\n  _proto._afterEnable = function _afterEnable() {\n    this._registerMeasureEvents();\n  };\n  _proto._afterDisable = function _afterDisable() {\n    this.off('drawstart', this._msOnDrawStart, this).off('drawvertex', this._msOnDrawVertex, this).off('mousemove', this._msOnMouseMove, this).off('drawend', this._msOnDrawEnd, this);\n  };\n  _proto._msOnDrawStart = function _msOnDrawStart(param) {\n    var map = this.getMap();\n    var prjCoord = map._pointToPrj(param['point2d']);\n    var uid = UID();\n    var layerId = 'distancetool_' + uid;\n    var markerLayerId = 'distancetool_markers_' + uid;\n    if (!map.getLayer(layerId)) {\n      this._measureLineLayer = new VectorLayer(layerId).addTo(map);\n      this._measureMarkerLayer = new VectorLayer(markerLayerId).addTo(map);\n    } else {\n      this._measureLineLayer = map.getLayer(layerId);\n      this._measureMarkerLayer = map.getLayer(markerLayerId);\n    }\n    this._measureLayers.push(this._measureLineLayer);\n    this._measureLayers.push(this._measureMarkerLayer);\n    var marker = new Marker(param['coordinate'], {\n      'symbol': this.options['vertexSymbol']\n    });\n    marker._setPrjCoordinates(prjCoord);\n    var content = this.options['language'] === 'zh-CN' ? '起点' : 'start';\n    var startLabel = new Label(content, param['coordinate'], this.options['labelOptions']);\n    startLabel._setPrjCoordinates(prjCoord);\n    this._lastVertex = startLabel;\n    this._addVertexMarker(marker, startLabel);\n  };\n  _proto._msOnMouseMove = function _msOnMouseMove(param) {\n    var ms = this._measure(this._msGetCoordsToMeasure(param));\n    if (!this._tailMarker) {\n      var symbol = extendSymbol(this.options['vertexSymbol']);\n      symbol['markerWidth'] /= 2;\n      symbol['markerHeight'] /= 2;\n      this._tailMarker = new Marker(param['coordinate'], {\n        'symbol': symbol\n      }).addTo(this._measureMarkerLayer);\n      this._tailLabel = new Label(ms, param['coordinate'], this.options['labelOptions']).addTo(this._measureMarkerLayer);\n    }\n    var prjCoords = this._geometry._getPrjCoordinates();\n    var lastCoord = prjCoords[prjCoords.length - 1];\n    this._tailMarker.setCoordinates(param['coordinate']);\n    this._tailMarker._setPrjCoordinates(lastCoord);\n    this._tailLabel.setContent(ms);\n    this._tailLabel.setCoordinates(param['coordinate']);\n    this._tailLabel._setPrjCoordinates(lastCoord);\n  };\n  _proto._msGetCoordsToMeasure = function _msGetCoordsToMeasure(param) {\n    return param['geometry'].getCoordinates().concat([param['coordinate']]);\n  };\n  _proto._msOnDrawVertex = function _msOnDrawVertex(param) {\n    var prjCoords = this._geometry._getPrjCoordinates();\n    var lastCoord = prjCoords[prjCoords.length - 1];\n    var geometry = param['geometry'];\n    var marker = new Marker(param['coordinate'], {\n      'symbol': this.options['vertexSymbol']\n    });\n    var length = this._measure(geometry);\n    var vertexLabel = new Label(length, param['coordinate'], this.options['labelOptions']);\n    this._addVertexMarker(marker, vertexLabel);\n    vertexLabel._setPrjCoordinates(lastCoord);\n    marker._setPrjCoordinates(lastCoord);\n    this._lastVertex = vertexLabel;\n  };\n  _proto._addVertexMarker = function _addVertexMarker(marker, vertexLabel) {\n    if (!this._vertexes) {\n      this._vertexes = [];\n    }\n    if (this._historyPointer !== undefined && this._vertexes.length > this._historyPointer - 1) {\n      this._vertexes.length = this._historyPointer - 1;\n    }\n    this._vertexes.push({\n      label: vertexLabel,\n      marker: marker\n    });\n    this._measureMarkerLayer.addGeometry(marker);\n    if (vertexLabel) {\n      this._measureMarkerLayer.addGeometry(vertexLabel);\n    }\n  };\n  _proto._msOnDrawEnd = function _msOnDrawEnd(param) {\n    this._clearTailMarker();\n    if (param['geometry']._getPrjCoordinates().length < 2) {\n      this._lastMeasure = 0;\n      this._clearMeasureLayers();\n      return;\n    }\n    var size = this._lastVertex.getSize();\n    if (!size) {\n      size = new Size(10, 10);\n    }\n    this._addClearMarker(this._lastVertex.getCoordinates(), this._lastVertex._getPrjCoordinates(), size['width']);\n    var geo = param['geometry'].copy();\n    geo._setPrjCoordinates(param['geometry']._getPrjCoordinates());\n    geo.addTo(this._measureLineLayer);\n    this._lastMeasure = geo.getLength();\n  };\n  _proto._addClearMarker = function _addClearMarker(coordinates, prjCoord, dx) {\n    var symbol = this.options['clearButtonSymbol'];\n    var dxSymbol = {\n      'markerDx': (symbol['markerDx'] || 0) + dx,\n      'textDx': (symbol['textDx'] || 0) + dx\n    };\n    if (Array.isArray(symbol)) {\n      dxSymbol = symbol.map(function (s) {\n        if (s) {\n          return {\n            'markerDx': (s['markerDx'] || 0) + dx,\n            'textDx': (s['textDx'] || 0) + dx\n          };\n        }\n        return null;\n      });\n    }\n    symbol = extendSymbol(symbol, dxSymbol);\n    var endMarker = new Marker(coordinates, {\n      'symbol': symbol\n    });\n    var measureLineLayer = this._measureLineLayer,\n      measureMarkerLayer = this._measureMarkerLayer;\n    endMarker.on('click', function () {\n      measureLineLayer.remove();\n      measureMarkerLayer.remove();\n      return false;\n    }, this);\n    endMarker.addTo(this._measureMarkerLayer);\n    endMarker._setPrjCoordinates(prjCoord);\n  };\n  _proto._clearTailMarker = function _clearTailMarker() {\n    if (this._tailMarker) {\n      this._tailMarker.remove();\n      delete this._tailMarker;\n    }\n    if (this._tailLabel) {\n      this._tailLabel.remove();\n      delete this._tailLabel;\n    }\n  };\n  _proto._clearMeasureLayers = function _clearMeasureLayers() {\n    this._measureLineLayer.remove();\n    this._measureMarkerLayer.remove();\n  };\n  return DistanceTool;\n}(DrawTool);\nDistanceTool.mergeOptions(options$h);\n\nvar options$i = {\n  'mode': 'Polygon',\n  'symbol': {\n    'lineColor': '#000000',\n    'lineWidth': 2,\n    'lineOpacity': 1,\n    'lineDasharray': '',\n    'polygonFill': '#ffffff',\n    'polygonOpacity': 0.5\n  }\n};\nvar AreaTool = function (_DistanceTool) {\n  _inheritsLoose(AreaTool, _DistanceTool);\n  function AreaTool(options) {\n    var _this;\n    _this = _DistanceTool.call(this, options) || this;\n    _this._measureLayers = [];\n    return _this;\n  }\n  var _proto = AreaTool.prototype;\n  _proto._measure = function _measure(toMeasure) {\n    var map = this.getMap();\n    var area;\n    if (toMeasure instanceof Geometry) {\n      area = map.computeGeometryArea(toMeasure);\n    } else if (Array.isArray(toMeasure)) {\n      area = map.getProjection().measureArea(toMeasure);\n    }\n    this._lastMeasure = area;\n    var units;\n    if (this.options['language'] === 'zh-CN') {\n      units = [' 平方米', ' 平方公里', ' 平方英尺', ' 平方英里'];\n    } else {\n      units = [' sq.m', ' sq.km', ' sq.ft', ' sq.mi'];\n    }\n    var content = '';\n    var decimals = this.options['decimalPlaces'];\n    if (this.options['metric']) {\n      content += area < 1E6 ? area.toFixed(decimals) + units[0] : (area / 1E6).toFixed(decimals) + units[1];\n    }\n    if (this.options['imperial']) {\n      area *= 3.2808399;\n      if (content.length > 0) {\n        content += '\\n';\n      }\n      var sqmi = 5280 * 5280;\n      content += area < sqmi ? area.toFixed(decimals) + units[2] : (area / sqmi).toFixed(decimals) + units[3];\n    }\n    return content;\n  };\n  _proto._msGetCoordsToMeasure = function _msGetCoordsToMeasure(param) {\n    return param['geometry'].getShell().concat([param['coordinate']]);\n  };\n  _proto._msOnDrawVertex = function _msOnDrawVertex(param) {\n    var prjCoord = this.getMap()._pointToPrj(param['point2d']);\n    var vertexMarker = new Marker(param['coordinate'], {\n      'symbol': this.options['vertexSymbol']\n    });\n    vertexMarker._setPrjCoordinates(prjCoord);\n    this._measure(param['geometry']);\n    this._lastVertex = vertexMarker;\n    this._addVertexMarker(vertexMarker);\n  };\n  _proto._msOnDrawEnd = function _msOnDrawEnd(param) {\n    this._clearTailMarker();\n    var prjCoord;\n    if (param['point2d']) {\n      prjCoord = this.getMap()._pointToPrj(param['point2d']);\n    } else {\n      var prjCoords = param['geometry']._getPrjCoordinates();\n      prjCoords = prjCoords.slice(0, prjCoords.length - 1);\n      param['geometry']._setPrjCoordinates(prjCoords);\n      prjCoord = prjCoords[prjCoords.length - 1];\n    }\n    if (param['geometry']._getPrjCoordinates().length < 3) {\n      this._lastMeasure = 0;\n      this._clearMeasureLayers();\n      return;\n    }\n    var ms = this._measure(param['geometry']);\n    var projection = this.getMap().getProjection();\n    var coord = projection.unproject(prjCoord);\n    var endLabel = new Label(ms, coord, this.options['labelOptions']).addTo(this._measureMarkerLayer);\n    endLabel._setPrjCoordinates(prjCoord);\n    var size = endLabel.getSize();\n    if (!size) {\n      size = new Size(10, 10);\n    }\n    this._addClearMarker(coord, prjCoord, size['width']);\n    var geo = param['geometry'].copy();\n    geo._setPrjCoordinates(param['geometry']._getPrjCoordinates());\n    geo.addTo(this._measureLineLayer);\n    this._lastMeasure = geo.getArea();\n  };\n  return AreaTool;\n}(DistanceTool);\nAreaTool.mergeOptions(options$i);\n\nvar circleHooks = {\n  'create': function create(projection, prjCoord) {\n    var center = projection.unproject(prjCoord[0]);\n    var circle = new Circle(center, 0);\n    circle._setPrjCoordinates(prjCoord[0]);\n    return circle;\n  },\n  'update': function update(projection, prjPath, geometry) {\n    var map = geometry.getMap();\n    var prjCoord = Array.isArray(prjPath) ? prjPath[prjPath.length - 1] : prjPath;\n    var nextCoord = projection.unproject(prjCoord);\n    var radius = map.computeLength(geometry.getCenter(), nextCoord);\n    geometry.setRadius(radius);\n  },\n  'generate': function generate(geometry) {\n    return geometry;\n  }\n};\nDrawTool.registerMode('circle', extend({\n  'clickLimit': 2,\n  'action': ['click', 'mousemove', 'click']\n}, circleHooks));\nDrawTool.registerMode('freeHandCircle', extend({\n  'action': ['mousedown touchstart', 'mousemove touchmove', 'mouseup touchend']\n}, circleHooks));\nvar ellipseHooks = {\n  'create': function create(projection, prjCoord) {\n    var center = projection.unproject(prjCoord[0]);\n    var ellipse = new Ellipse(center, 0, 0);\n    ellipse._setPrjCoordinates(prjCoord[0]);\n    return ellipse;\n  },\n  'update': function update(projection, prjPath, geometry) {\n    var map = geometry.getMap();\n    var center = geometry.getCenter();\n    var prjCoord = Array.isArray(prjPath) ? prjPath[prjPath.length - 1] : prjPath;\n    var nextCoord = projection.unproject(prjCoord);\n    var rx = map.computeLength(center, new Coordinate({\n      x: nextCoord.x,\n      y: center.y\n    }));\n    var ry = map.computeLength(center, new Coordinate({\n      x: center.x,\n      y: nextCoord.y\n    }));\n    geometry.setWidth(rx * 2);\n    geometry.setHeight(ry * 2);\n  },\n  'generate': function generate(geometry) {\n    return geometry;\n  }\n};\nDrawTool.registerMode('ellipse', extend({\n  'clickLimit': 2,\n  'action': ['click', 'mousemove', 'click']\n}, ellipseHooks));\nDrawTool.registerMode('freeHandEllipse', extend({\n  'action': ['mousedown touchstart', 'mousemove touchmove', 'mouseup touchend']\n}, ellipseHooks));\nvar rectangleHooks = {\n  'create': function create(projection, prjCoords) {\n    var rect = new Polygon([]);\n    rect._firstClick = prjCoords[0];\n    return rect;\n  },\n  'update': function update(projection, prjCoords, geometry, param) {\n    var map = geometry.getMap();\n    var containerPoint = param['containerPoint'];\n    var firstClick = map._prjToContainerPoint(geometry._firstClick);\n    var ring = [[firstClick.x, firstClick.y], [containerPoint.x, firstClick.y], [containerPoint.x, containerPoint.y], [firstClick.x, containerPoint.y]];\n    geometry.setCoordinates(ring.map(function (c) {\n      return map.containerPointToCoord(new Point(c));\n    }));\n    geometry._setPrjCoordinates(ring.map(function (c) {\n      return map._containerPointToPrj(new Point(c));\n    }));\n  },\n  'generate': function generate(geometry) {\n    return geometry;\n  }\n};\nDrawTool.registerMode('rectangle', extend({\n  'clickLimit': 2,\n  'action': ['click', 'mousemove', 'click']\n}, rectangleHooks));\nDrawTool.registerMode('freeHandRectangle', extend({\n  'action': ['mousedown touchstart', 'mousemove touchmove', 'mouseup touchend']\n}, rectangleHooks));\nDrawTool.registerMode('point', {\n  'clickLimit': 1,\n  'action': ['click', 'mousemove'],\n  'create': function create(projection, prjCoord) {\n    var center = projection.unproject(prjCoord[0]);\n    var marker = new Marker(center);\n    marker._setPrjCoordinates(prjCoord[0]);\n    return marker;\n  },\n  'generate': function generate(geometry) {\n    return geometry;\n  },\n  'update': function update(projection, prjCoord, geometry) {\n    if (Array.isArray(prjCoord)) {\n      prjCoord = prjCoord[prjCoord.length - 1];\n    }\n    if (!prjCoord) {\n      return geometry;\n    }\n    var coordinate = projection.unproject(prjCoord);\n    geometry.setCoordinates(coordinate);\n    return geometry;\n  }\n});\nvar polygonHooks = {\n  'create': function create(projection, prjPath) {\n    var path = prjPath.map(function (c) {\n      return projection.unproject(c);\n    });\n    var line = new LineString(path);\n    line._setPrjCoordinates(prjPath);\n    return line;\n  },\n  'update': function update(projection, path, geometry) {\n    var symbol = geometry.getSymbol();\n    var prjCoords;\n    if (Array.isArray(path)) {\n      prjCoords = path;\n    } else {\n      prjCoords = geometry._getPrjCoordinates();\n      prjCoords.push(path);\n    }\n    var coordinates = prjCoords.map(function (c) {\n      return projection.unproject(c);\n    });\n    geometry.setCoordinates(coordinates);\n    geometry._setPrjCoordinates(prjCoords);\n    var layer = geometry.getLayer();\n    if (layer) {\n      var polygon = layer.getGeometryById('polygon');\n      if (!polygon && prjCoords.length >= 3) {\n        polygon = new Polygon([coordinates], {\n          'id': 'polygon'\n        });\n        if (symbol) {\n          var pSymbol = extendSymbol(symbol, {\n            'lineOpacity': 0\n          });\n          polygon.setSymbol(pSymbol);\n        }\n        polygon.addTo(layer);\n      }\n      if (polygon) {\n        polygon._setPrjCoordinates(prjCoords);\n      }\n    }\n  },\n  'generate': function generate(geometry) {\n    var polygon = new Polygon(geometry.getCoordinates(), {\n      'symbol': geometry.getSymbol()\n    });\n    polygon._setPrjCoordinates(geometry._getPrjCoordinates());\n    polygon._projCode = geometry._projCode;\n    return polygon;\n  }\n};\nDrawTool.registerMode('polygon', extend({\n  'action': ['click', 'mousemove', 'dblclick']\n}, polygonHooks));\nDrawTool.registerMode('freeHandPolygon', extend({\n  'action': ['mousedown touchstart', 'mousemove touchmove', 'mouseup touchend']\n}, polygonHooks));\nvar lineStringHooks = {\n  'create': function create(projection, prjPath) {\n    var path = prjPath.map(function (c) {\n      return projection.unproject(c);\n    });\n    var line = new LineString(path);\n    line._setPrjCoordinates(prjPath);\n    return line;\n  },\n  'update': function update(projection, prjPath, geometry) {\n    var prjCoords;\n    if (Array.isArray(prjPath)) {\n      prjCoords = prjPath;\n    } else {\n      prjCoords = geometry._getPrjCoordinates();\n      prjCoords.push(prjPath);\n    }\n    var path = prjCoords.map(function (c) {\n      return projection.unproject(c);\n    });\n    geometry.setCoordinates(path);\n    geometry._setPrjCoordinates(prjCoords);\n  },\n  'generate': function generate(geometry) {\n    return geometry;\n  }\n};\nDrawTool.registerMode('linestring', extend({\n  'action': ['click', 'mousemove', 'dblclick']\n}, lineStringHooks));\nDrawTool.registerMode('freeHandLinestring', extend({\n  'action': ['mousedown touchstart', 'mousemove touchmove', 'mouseup touchend']\n}, lineStringHooks));\nDrawTool.registerMode('arccurve', {\n  'action': ['click', 'mousemove', 'dblclick'],\n  'create': function create(projection, prjPath) {\n    var path = prjPath.map(function (c) {\n      return projection.unproject(c);\n    });\n    var arc = new ArcCurve(path);\n    arc._setPrjCoordinates(prjPath);\n    return arc;\n  },\n  'update': lineStringHooks.update,\n  'generate': function generate(geometry) {\n    return geometry;\n  }\n});\nDrawTool.registerMode('quadbeziercurve', {\n  'action': ['click', 'mousemove', 'dblclick'],\n  'create': function create(projection, prjPath) {\n    var path = prjPath.map(function (c) {\n      return projection.unproject(c);\n    });\n    var curve = new QuadBezierCurve(path);\n    curve._setPrjCoordinates(prjPath);\n    return curve;\n  },\n  'update': lineStringHooks.update,\n  'generate': function generate(geometry) {\n    return geometry;\n  }\n});\nDrawTool.registerMode('cubicbeziercurve', {\n  'action': ['click', 'mousemove', 'dblclick'],\n  'create': function create(projection, prjPath) {\n    var path = prjPath.map(function (c) {\n      return projection.unproject(c);\n    });\n    var curve = new CubicBezierCurve(path);\n    curve._setPrjCoordinates(prjPath);\n    return curve;\n  },\n  'update': lineStringHooks.update,\n  'generate': function generate(geometry) {\n    return geometry;\n  }\n});\nDrawTool.registerMode('boxZoom', {\n  'action': ['mousedown', 'mousemove', 'mouseup'],\n  'create': function create(projection, prjCoord) {\n    prjCoord = prjCoord[0];\n    var center = projection.unproject(prjCoord);\n    var marker = new Marker(center);\n    marker._firstClick = prjCoord;\n    return marker;\n  },\n  'update': function update(projection, prjCoord, geometry, param) {\n    var map = geometry.getMap();\n    var p1 = map._prjToContainerPoint(geometry._firstClick),\n      p2 = param['containerPoint'];\n    prjCoord = map._containerPointToPrj(new Coordinate(Math.min(p1.x, p2.x), Math.min(p1.y, p2.y)));\n    var center = projection.unproject(prjCoord);\n    geometry.setCoordinates(center)._setPrjCoordinates(prjCoord);\n    geometry.updateSymbol({\n      markerWidth: Math.abs(p1.x - p2.x),\n      markerHeight: Math.abs(p1.y - p2.y)\n    });\n  },\n  'generate': function generate(geometry) {\n    return geometry;\n  }\n});\n\nfunction parse(arcConf) {\n  var tileInfo = arcConf['tileInfo'],\n    tileSize = [tileInfo['cols'], tileInfo['rows']],\n    resolutions = [],\n    lods = tileInfo['lods'];\n  for (var i = 0, len = lods.length; i < len; i++) {\n    resolutions.push(lods[i]['resolution']);\n  }\n  var fullExtent = arcConf['fullExtent'],\n    origin = tileInfo['origin'],\n    tileSystem = [1, -1, origin['x'], origin['y']];\n  delete fullExtent['spatialReference'];\n  return {\n    'spatialReference': {\n      'resolutions': resolutions,\n      'fullExtent': fullExtent\n    },\n    'tileSystem': tileSystem,\n    'tileSize': tileSize\n  };\n}\nSpatialReference.loadArcgis = function (url, cb, options) {\n  if (options === void 0) {\n    options = {\n      'jsonp': true\n    };\n  }\n  if (isString(url) && url.substring(0, 1) !== '{') {\n    Ajax.getJSON(url, function (err, json) {\n      if (err) {\n        cb(err);\n        return;\n      }\n      var spatialRef = parse(json);\n      cb(null, spatialRef);\n    }, options);\n  } else {\n    if (isString(url)) {\n      url = parseJSON(url);\n    }\n    var spatialRef = parse(url);\n    cb(null, spatialRef);\n  }\n  return this;\n};\n\nfunction getProjectionCode(code) {\n  var newcode = '';\n  var codeArray = code.split('');\n  for (var len = codeArray.length, i = len - 1; i >= 0; i--) {\n    if (!isNaN(codeArray[i])) {\n      newcode = codeArray[i] + newcode;\n    } else {\n      break;\n    }\n  }\n  return newcode;\n}\nfunction getProjection(projection) {\n  var prj = projection.indexOf('EPSG') > -1 ? projection : 'EPSG:' + projection;\n  prj = strReplace(prj, [['4490', '4326'], ['102100', '3857'], ['900913', '3857']]);\n  return prj;\n}\nfunction strReplace(str, repArray) {\n  if (repArray === void 0) {\n    repArray = [];\n  }\n  repArray.forEach(function (rep) {\n    var template = rep[0],\n      value = rep[1];\n    str = str.replace(template, value);\n  });\n  return str;\n}\nfunction getTransformValue(options) {\n  var projection = options.projection,\n    isArcgis = options.isArcgis,\n    isGeoServer = options.isGeoServer,\n    isSuperMap = options.isSuperMap;\n  var transformValue = 0.0002645833333333333;\n  if (isArcgis || isGeoServer || isSuperMap) {\n    transformValue = 0.00028;\n  }\n  if (projection && projection.indexOf('4326') > -1) {\n    transformValue = 2.3767925226029154e-9;\n    if (isArcgis || isSuperMap) {\n      transformValue = 2.518101729011901e-9;\n    }\n    if (isGeoServer) {\n      transformValue = 2.51528279553466e-9;\n    }\n  }\n  return transformValue;\n}\nvar ns = 'wmts';\nfunction getElementsByTagName(element, localName) {\n  var result = element.getElementsByTagName(localName);\n  if (result && result.length) {\n    return result;\n  }\n  var name = ns + ':' + localName;\n  return element.getElementsByTagName(name);\n}\nfunction getTileMatrixSet(TileMatrixSets, TileMatrixSetLink) {\n  for (var i = 0; i < TileMatrixSets.length; i++) {\n    var TileMatrixSet = TileMatrixSets[i];\n    TileMatrixSet = TileMatrixSet.getElementsByTagName('ows:Identifier')[0];\n    if (TileMatrixSet) {\n      if (TileMatrixSet.textContent === TileMatrixSetLink) {\n        return TileMatrixSets[i];\n      }\n    }\n  }\n  return null;\n}\nfunction parseWMTSXML(str, requestUrl, options) {\n  if (options.isArcgis == null) {\n    options.isArcgis = str.indexOf('arcgis') > -1;\n  }\n  if (options.isSuperMap == null) {\n    options.isSuperMap = str.indexOf('supermap') > -1;\n  }\n  var parser = new DOMParser();\n  var xmlDoc = parser.parseFromString(str, 'text/xml');\n  var content = xmlDoc.querySelectorAll('Contents')[0];\n  if (!content) {\n    return [];\n  }\n  var layers = getElementsByTagName(content, 'Layer');\n  if (!layers.length) {\n    return [];\n  }\n  var TileMatrixSets = [];\n  for (var i = 0, len = content.childNodes.length; i < len; i++) {\n    if (content.childNodes[i].localName === 'TileMatrixSet') {\n      TileMatrixSets.push(content.childNodes[i]);\n    }\n  }\n  if (!TileMatrixSets.length) {\n    return [];\n  }\n  var result = [];\n  for (var _i = 0, _len = layers.length; _i < _len; _i++) {\n    var layer = layers[_i];\n    var style = layer.querySelectorAll('Style')[0];\n    if (style) {\n      style = style.getElementsByTagName('ows:Identifier')[0];\n      if (style) {\n        style = style.textContent;\n      }\n    }\n    var layerName = layer.getElementsByTagName('ows:Identifier')[0];\n    if (layerName) {\n      layerName = layerName.textContent;\n    }\n    var tileMatrixSetLinks = getElementsByTagName(layer, 'TileMatrixSetLink');\n    if (tileMatrixSetLinks.length === 0) {\n      continue;\n    }\n    for (var j = 0, len1 = tileMatrixSetLinks.length; j < len1; j++) {\n      var tileMatrixSetLink = tileMatrixSetLinks[j];\n      tileMatrixSetLink = getElementsByTagName(tileMatrixSetLink, 'TileMatrixSet')[0];\n      if (tileMatrixSetLink) {\n        tileMatrixSetLink = tileMatrixSetLink.textContent;\n      }\n      var tileMatrixSet = getTileMatrixSet(TileMatrixSets, tileMatrixSetLink);\n      if (!tileMatrixSet) {\n        continue;\n      }\n      var resourceURL = layer.querySelectorAll('ResourceURL')[0];\n      var url = '';\n      if (resourceURL) {\n        url = resourceURL.attributes.template.value;\n      }\n      var _parseTileMatrixSet = parseTileMatrixSet(tileMatrixSet, options),\n        resolutions = _parseTileMatrixSet.resolutions,\n        tileSize = _parseTileMatrixSet.tileSize,\n        tileSystem = _parseTileMatrixSet.tileSystem,\n        projection = _parseTileMatrixSet.projection,\n        TileMatrixSet = _parseTileMatrixSet.TileMatrixSet,\n        isGeoServer = _parseTileMatrixSet.isGeoServer,\n        levelStr = _parseTileMatrixSet.levelStr;\n      if (!url.length) {\n        url = requestUrl.substr(0, requestUrl.lastIndexOf('?'));\n        url += '?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER={LAYER}&STYLE={Style}&TILEMATRIXSET={TileMatrixSet}&FORMAT={tiles}&TILEMATRIX={TileMatrix}&TILEROW={TileRow}&TILECOL={TileCol}';\n      }\n      var urlTemplate = strReplace(url, [['{LAYER}', layerName], ['{Layer}', layerName], ['{layer}', layerName], ['{STYLE}', style], ['{Style}', style], ['{style}', style], ['{TileMatrixSet}', TileMatrixSet], ['{TileMatrix}', isGeoServer ? levelStr + \":{z}\" : '{z}'], ['{TileRow}', '{y}'], ['{TileCol}', '{x}'], ['{tiles}', isGeoServer ? 'image/png' : 'tiles']]);\n      result.push({\n        tileSize: tileSize,\n        tileSystem: tileSystem,\n        spatialReference: {\n          resolutions: resolutions,\n          projection: projection\n        },\n        urlTemplate: urlTemplate,\n        info: {\n          layerName: layerName,\n          TileMatrixSet: TileMatrixSet,\n          style: style,\n          tileSize: tileSize,\n          tileSystem: tileSystem,\n          resolutions: resolutions,\n          projection: projection,\n          urlTemplate: urlTemplate\n        }\n      });\n    }\n  }\n  return result;\n}\nfunction parseTileMatrixSet(TileMatrixSet, options) {\n  if (options === void 0) {\n    options = {};\n  }\n  var TileMatrixs = getElementsByTagName(TileMatrixSet, 'TileMatrix');\n  var resolutions = [],\n    tileSystem = [],\n    tileSize = [];\n  var projection,\n    tset,\n    isGeoServer = false,\n    levelStr;\n  if (!projection) {\n    var supportedCRS = TileMatrixSet.getElementsByTagName('ows:SupportedCRS')[0];\n    if (supportedCRS) {\n      projection = supportedCRS.textContent;\n      projection = projection.split('EPSG')[1];\n      projection = getProjectionCode(projection);\n      projection = getProjection(projection);\n    }\n  }\n  if (!tset) {\n    tset = TileMatrixSet.getElementsByTagName('ows:Identifier')[0];\n    if (tset) {\n      tset = tset.textContent;\n    }\n  }\n  options.projection = projection;\n  var minLevel = Infinity;\n  for (var index = 0; index < TileMatrixs.length; index++) {\n    var TileMatrix = TileMatrixs[index];\n    var level = TileMatrix.getElementsByTagName('ows:Identifier')[0].textContent;\n    if (isNaN(parseInt(level))) {\n      levelStr = level.substr(0, level.lastIndexOf(':'));\n      level = level.split(':');\n      level = level[level.length - 1];\n      level = parseInt(level);\n      isGeoServer = true;\n      options.isGeoServer = true;\n    } else {\n      level = parseInt(level);\n    }\n    minLevel = Math.min(minLevel, level);\n    var ScaleDenominator = getElementsByTagName(TileMatrix, 'ScaleDenominator')[0].textContent;\n    var TopLeftCorner = getElementsByTagName(TileMatrix, 'TopLeftCorner')[0].textContent;\n    var TileWidth = getElementsByTagName(TileMatrix, 'TileWidth')[0].textContent;\n    var TileHeight = getElementsByTagName(TileMatrix, 'TileHeight')[0].textContent;\n    if (tileSize.length === 0) {\n      tileSize.push(parseInt(TileWidth), parseInt(TileHeight));\n    }\n    if (tileSystem.length === 0) {\n      var _TopLeftCorner$split$ = TopLeftCorner.split(' ').filter(function (s) {\n          return s !== '';\n        }).map(function (v) {\n          return parseFloat(v);\n        }),\n        x = _TopLeftCorner$split$[0],\n        y = _TopLeftCorner$split$[1];\n      if (x > 0) {\n        tileSystem.push(1, -1, y, x);\n      } else {\n        tileSystem.push(1, -1, x, y);\n      }\n    }\n    var transformValue = getTransformValue(options);\n    var res = parseFloat(ScaleDenominator) * transformValue;\n    resolutions.push(res);\n  }\n  if (minLevel > 0) {\n    var _res = resolutions[0];\n    for (var i = minLevel - 1; i >= 0; i--) {\n      _res = _res * 2;\n      resolutions.splice(0, 0, _res);\n    }\n  }\n  return {\n    resolutions: resolutions,\n    tileSize: tileSize,\n    tileSystem: tileSystem,\n    projection: projection,\n    TileMatrixSet: tset,\n    isGeoServer: isGeoServer,\n    levelStr: levelStr\n  };\n}\nSpatialReference.loadWMTS = function (url, cb, options) {\n  if (options === void 0) {\n    options = {\n      'jsonp': true\n    };\n  }\n  if (isString(url)) {\n    Ajax.get(url, function (err, xml) {\n      if (err) {\n        cb(err);\n        return;\n      }\n      var layers = parseWMTSXML(xml, url, options);\n      cb(null, layers);\n    }, options);\n  }\n  return this;\n};\n\nvar options$j = {\n  'eventsPropagation': false,\n  'eventsToStop': null,\n  'dx': 0,\n  'dy': 0,\n  'autoPan': false,\n  'autoPanDuration': 600,\n  'single': true,\n  'animation': 'scale',\n  'animationOnHide': false,\n  'animationDuration': 500,\n  'pitchWithMap': false,\n  'rotateWithMap': false,\n  'visible': true,\n  'roundPoint': false,\n  'collision': false,\n  'collisionBufferSize': 2,\n  'collisionWeight': 0,\n  'collisionFadeIn': false,\n  'zIndex': 0\n};\nvar UIComponent = function (_Eventable) {\n  _inheritsLoose(UIComponent, _Eventable);\n  function UIComponent(options) {\n    var _this;\n    _this = _Eventable.call(this, options) || this;\n    _this.proxyOptions();\n    return _this;\n  }\n  var _proto = UIComponent.prototype;\n  _proto.addTo = function addTo(owner) {\n    this._owner = owner;\n    this._switchEvents('on');\n    if (this.onAdd) {\n      this.onAdd();\n    }\n    this.fire('add');\n    return this;\n  };\n  _proto.getMap = function getMap() {\n    if (!this._owner) {\n      return null;\n    }\n    if (this._owner.getBaseLayer) {\n      return this._owner;\n    }\n    return this._owner.getMap();\n  };\n  _proto._collides = function _collides() {\n    var map = this.getMap();\n    if (!map) {\n      return this;\n    }\n    map._addUI(this);\n    map._insertUICollidesQueue();\n    return this;\n  };\n  _proto._collidesEffect = function _collidesEffect(show) {\n    var dom = this.getDOM();\n    if (!dom) {\n      return this;\n    }\n    var visibility = show ? 'visible' : 'hidden';\n    dom.style.visibility = visibility;\n    if (!dom.classList || !dom.classList.add) {\n      return this;\n    }\n    if (!this.options['collisionFadeIn']) {\n      return this;\n    }\n    var classList = dom.classList;\n    var className = 'mtk-ui-fadein';\n    var hasClass$$1 = classList.contains(className);\n    if (show && !hasClass$$1) {\n      dom.classList.add(className);\n    } else if (!show && hasClass$$1) {\n      dom.classList.remove(className);\n    }\n    return this;\n  };\n  _proto.show = function show(coordinate) {\n    var _this2 = this;\n    var map = this.getMap();\n    if (!map) {\n      return this;\n    }\n    this.options['visible'] = true;\n    coordinate = coordinate || this._coordinate || this._owner.getCenter();\n    if (!(coordinate instanceof Coordinate)) {\n      coordinate = new Coordinate(coordinate);\n    }\n    var visible = this.isVisible();\n    if (!this._showBySymbolChange) {\n      this.fire('showstart');\n    }\n    var container = this._getUIContainer();\n    this._coordinate = coordinate;\n    this._removePrevDOM();\n    if (!this._mapEventsOn) {\n      this._switchMapEvents('on');\n    }\n    var dom = this.__uiDOM = this.buildOn(map);\n    dom['eventsPropagation'] = this.options['eventsPropagation'];\n    this._observerDomSize(dom);\n    var zIndex = this.options.zIndex;\n    if (!dom) {\n      if (!this._showBySymbolChange) {\n        this.fire('showend');\n      }\n      this._collides();\n      this.setZIndex(zIndex);\n      return this;\n    }\n    this._measureSize(dom);\n    if (this._singleton()) {\n      dom._uiComponent = this;\n      map[this._uiDomKey()] = dom;\n    }\n    this._setPosition();\n    dom.style[TRANSITION] = null;\n    container.appendChild(dom);\n    var anim = this._getAnimation();\n    if (visible) {\n      anim.ok = false;\n    }\n    if (anim.ok) {\n      if (anim.fade) {\n        dom.style.opacity = 0;\n      }\n      if (anim.scale) {\n        if (this.getTransformOrigin) {\n          var origin = this.getTransformOrigin();\n          dom.style[TRANSFORMORIGIN] = origin;\n        }\n        dom.style[TRANSFORM] = this._toCSSTranslate(this._pos) + ' scale(0)';\n      }\n    }\n    if (!this.isSupportZoomFilter()) {\n      dom.style.display = '';\n    }\n    if (this.options['eventsToStop']) {\n      on(dom, this.options['eventsToStop'], stopPropagation);\n    }\n    var transition = anim.transition;\n    if (anim.ok && transition) {\n      dom.offsetHeight;\n      if (transition) {\n        dom.style[TRANSITION] = transition;\n      }\n      if (anim.fade) {\n        dom.style.opacity = 1;\n      }\n      if (anim.scale) {\n        dom.style[TRANSFORM] = this._toCSSTranslate(this._pos) + ' scale(1)';\n      }\n    }\n    if (!this._showBySymbolChange) {\n      this.fire('showend');\n    }\n    this._collides();\n    clearTimeout(this._autoPanId);\n    if (this.options['autoPan']) {\n      this._autoPanId = setTimeout(function () {\n        _this2._autoPan();\n      }, 32);\n    }\n    this.setZIndex(zIndex);\n    return this;\n  };\n  _proto.hide = function hide() {\n    var _this3 = this;\n    if (!this.getDOM()) {\n      return this;\n    }\n    if (this._onDomMouseout) {\n      this._onDomMouseout();\n    }\n    this.options['visible'] = false;\n    var anim = this._getAnimation(),\n      dom = this.getDOM();\n    if (!this.options['animationOnHide']) {\n      anim.ok = false;\n    }\n    if (!anim.ok) {\n      dom.style.display = 'none';\n      this.fire('hide');\n    } else {\n      dom.offsetHeight;\n      dom.style[TRANSITION] = anim.transition;\n      setTimeout(function () {\n        dom.style.display = 'none';\n        _this3.fire('hide');\n      }, this.options['animationDuration']);\n    }\n    if (anim.fade) {\n      dom.style.opacity = 0;\n    }\n    if (anim.scale) {\n      dom.style[TRANSFORM] = this._toCSSTranslate(this._pos) + ' scale(0)';\n    }\n    this._switchMapEvents('off');\n    this._collides();\n    return this;\n  };\n  _proto.isVisible = function isVisible() {\n    if (!this.options['visible']) {\n      return false;\n    }\n    var dom = this.getDOM();\n    return this.getMap() && dom && dom.parentNode && dom.style.display !== 'none';\n  };\n  _proto.remove = function remove() {\n    delete this._mapEventsOn;\n    if (!this._owner) {\n      return this;\n    }\n    var map = this.getMap();\n    if (map) {\n      map._removeUI(this);\n    }\n    this.hide();\n    this._switchEvents('off');\n    if (this.onRemove) {\n      this.onRemove();\n    }\n    if (!this._singleton() && this.__uiDOM) {\n      this._removePrevDOM();\n    }\n    delete this._owner;\n    this.fire('remove');\n    this._collides();\n    return this;\n  };\n  _proto.getSize = function getSize() {\n    if (this._domContentRect && this._size) {\n      this._size.width = this._domContentRect.width;\n      this._size.height = this._domContentRect.height;\n    }\n    if (this._size) {\n      return this._size.copy();\n    } else {\n      return null;\n    }\n  };\n  _proto.getOwner = function getOwner() {\n    return this._owner;\n  };\n  _proto.getDOM = function getDOM() {\n    return this.__uiDOM;\n  };\n  _proto.setZIndex = function setZIndex(zIndex) {\n    if (!isNumber(zIndex)) {\n      return this;\n    }\n    var dom = this.getDOM();\n    if (!dom) {\n      return this;\n    }\n    dom.style.zIndex = zIndex;\n    if (zIndex !== this.options.zIndex) {\n      this.options.zIndex = zIndex;\n    }\n    return this;\n  };\n  _proto._roundPoint = function _roundPoint(point) {\n    if (this.options.roundPoint) {\n      point = point._round();\n    }\n    return point;\n  };\n  _proto.getPosition = function getPosition() {\n    if (!this.getMap()) {\n      return null;\n    }\n    var p = this._roundPoint(this._getViewPoint());\n    if (this.getOffset) {\n      var o = this._roundPoint(this.getOffset());\n      if (o) {\n        p._add(o);\n      }\n    }\n    return p;\n  };\n  _proto._getAnimation = function _getAnimation() {\n    var anim = {\n      'fade': false,\n      'scale': false\n    };\n    var animations = this.options['animation'] ? this.options['animation'].split(',') : [];\n    for (var i = 0; i < animations.length; i++) {\n      var trimed = trim(animations[i]);\n      if (trimed === 'fade') {\n        anim.fade = true;\n      } else if (trimed === 'scale') {\n        anim.scale = true;\n      }\n    }\n    var transition = null;\n    if (anim.fade) {\n      transition = 'opacity ' + this.options['animationDuration'] + 'ms';\n    }\n    if (anim.scale) {\n      transition = transition ? transition + ',' : '';\n      transition += TRANSFORM + ' ' + this.options['animationDuration'] + 'ms';\n    }\n    anim.transition = transition;\n    anim.ok = transition !== null;\n    return anim;\n  };\n  _proto._getViewPoint = function _getViewPoint() {\n    var altitude = 0;\n    var coordinates = this._coordinate || {};\n    if (isNumber(coordinates.z)) {\n      altitude = coordinates.z;\n    } else if (this._owner && this._owner.getAltitude) {\n      altitude = this._owner.getAltitude() || 0;\n    }\n    var alt = this._meterToPoint(this._coordinate, altitude);\n    return this.getMap().coordToViewPoint(this._coordinate, undefined, alt)._add(this.options['dx'], this.options['dy']);\n  };\n  _proto._meterToPoint = function _meterToPoint(center, altitude) {\n    return altitude;\n  };\n  _proto._autoPan = function _autoPan() {\n    var map = this.getMap(),\n      dom = this.getDOM();\n    if (!dom || !map || map.isMoving()) {\n      return;\n    }\n    var point = this._getViewPoint()._round();\n    var mapWidth = map.width;\n    var mapHeight = map.height;\n    if (dom && dom.getBoundingClientRect) {\n      var _margin = 50;\n      var rect = dom.getBoundingClientRect();\n      var offsetX = 0,\n        offsetY = 0;\n      var _left = rect.left,\n        right = rect.right,\n        _top = rect.top,\n        bottom = rect.bottom,\n        width = rect.width,\n        height = rect.height;\n      if (width > 0 && height > 0) {\n        if (_left < _margin) {\n          offsetX = _margin - _left;\n        }\n        if (offsetX === 0 && right + _margin > mapWidth) {\n          offsetX = -(right + _margin - mapWidth);\n        }\n        if (_top < _margin) {\n          offsetY = _margin - _top;\n        }\n        if (offsetY === 0 && bottom + _margin > mapHeight) {\n          offsetY = -(bottom + _margin - mapHeight);\n        }\n        if (offsetX !== 0 || offsetY !== 0) {\n          var pitch = map.getPitch();\n          if (pitch > 40 && offsetY !== 0 && this._coordinate) {\n            map.animateTo({\n              center: this._coordinate\n            }, {\n              duration: map.options['panAnimationDuration']\n            });\n          } else {\n            map.panBy([Math.ceil(offsetX), Math.ceil(offsetY)]);\n          }\n        }\n        return;\n      }\n    }\n    var containerPoint0 = map.viewPointToContainerPoint(point);\n    var offset = this.getOffset();\n    var containerPoint = containerPoint0.add(offset);\n    var prjCoord = map._viewPointToPrj(point);\n    var domWidth = parseInt(dom.clientWidth);\n    var domHeight = parseInt(dom.clientHeight);\n    var margin = 50;\n    var left = 0,\n      top = 0;\n    if (containerPoint.x < 0) {\n      left = -containerPoint.x + margin;\n    } else if (containerPoint.x + domWidth > mapWidth) {\n      left = -(containerPoint.x + domWidth - mapWidth) - margin;\n    }\n    if (containerPoint.y - domHeight < 0) {\n      top = Math.abs(containerPoint.y - domHeight) + margin;\n    } else if (containerPoint.y + domHeight > mapHeight) {\n      top = mapHeight - (containerPoint.y + domHeight) - margin;\n    }\n    if (domWidth >= mapWidth) {\n      left = mapWidth / 2 - containerPoint0.x;\n    }\n    if (top !== 0 || left !== 0) {\n      var newContainerPoint = containerPoint0.add(left, top);\n      var t = map._containerPointToPoint(newContainerPoint)._sub(map._prjToPoint(map._getPrjCenter()));\n      var target = map._pointToPrj(map._prjToPoint(prjCoord).sub(t));\n      map._panAnimation(target);\n    }\n  };\n  _proto._measureSize = function _measureSize(dom) {\n    var container = this._getUIContainer();\n    dom.style.position = 'absolute';\n    var anchor = dom.style.bottom ? 'bottom' : 'top';\n    dom.style.display = '';\n    container.appendChild(dom);\n    if (dom.getBoundingClientRect) {\n      var rect = dom.getBoundingClientRect();\n      this._size = new Size(rect.width, rect.height);\n    } else {\n      this._size = new Size(dom.clientWidth, dom.clientHeight);\n    }\n    dom.style.display = 'none';\n    dom.style.left = '0px';\n    dom.style[anchor] = '0px';\n    return this._size;\n  };\n  _proto._removePrevDOM = function _removePrevDOM() {\n    if (this.onDomRemove) {\n      this.onDomRemove();\n    }\n    var eventsToStop = this.options['eventsToStop'];\n    if (this._singleton()) {\n      var map = this.getMap(),\n        key = this._uiDomKey();\n      if (map[key]) {\n        if (eventsToStop) {\n          off(map[key], eventsToStop, stopPropagation);\n        }\n        var uiComponent = map[key]._uiComponent;\n        if (uiComponent && uiComponent !== this && uiComponent.isVisible()) {\n          uiComponent.fire('hide');\n        }\n        removeDomNode(map[key]);\n        if (uiComponent && !this.hideDom) {\n          uiComponent._switchMapEvents('off');\n        }\n        delete map[key];\n      }\n      delete this.__uiDOM;\n    } else if (this.__uiDOM) {\n      if (eventsToStop) {\n        off(this.__uiDOM, eventsToStop, stopPropagation);\n      }\n      removeDomNode(this.__uiDOM);\n      delete this.__uiDOM;\n    }\n    if (this._resizeObserver) {\n      this._resizeObserver.disconnect();\n      delete this._resizeObserver;\n      delete this._domContentRect;\n    }\n  };\n  _proto._uiDomKey = function _uiDomKey() {\n    return '__ui_' + this._getClassName();\n  };\n  _proto._singleton = function _singleton() {\n    return this.options['single'];\n  };\n  _proto._getUIContainer = function _getUIContainer() {\n    return this.getMap()._panels['ui'];\n  };\n  _proto._getClassName = function _getClassName() {\n    return 'UIComponent';\n  };\n  _proto._switchMapEvents = function _switchMapEvents(to) {\n    var map = this.getMap();\n    if (!map) {\n      return;\n    }\n    this._mapEventsOn = to === 'on';\n    var events = this._getDefaultEvents();\n    if (this.getEvents) {\n      extend(events, this.getEvents());\n    }\n    if (events) {\n      for (var p in events) {\n        if (events.hasOwnProperty(p)) {\n          map[to](p, events[p], this);\n        }\n      }\n    }\n  };\n  _proto._switchEvents = function _switchEvents(to) {\n    var ownerEvents = this._getOwnerEvents();\n    if (this._owner) {\n      for (var p in ownerEvents) {\n        if (ownerEvents.hasOwnProperty(p)) {\n          this._owner[to](p, ownerEvents[p], this);\n        }\n      }\n    }\n  };\n  _proto._getDefaultEvents = function _getDefaultEvents() {\n    return {\n      'zooming rotate pitch': this.onEvent,\n      'zoomend': this.onZoomEnd,\n      'moving': this.onMoving,\n      'moveend': this.onMoving,\n      'resize': this.onResize\n    };\n  };\n  _proto._getOwnerEvents = function _getOwnerEvents() {\n    var events = {};\n    if (this._owner && this._owner instanceof Geometry) {\n      events.positionchange = this.onGeometryPositionChange;\n      events.symbolchange = this._updatePosition;\n    }\n    if (this.getOwnerEvents) {\n      extend(events, this.getOwnerEvents());\n    }\n    return events;\n  };\n  _proto.onGeometryPositionChange = function onGeometryPositionChange(param) {\n    if (this._owner && this.isVisible()) {\n      this._showBySymbolChange = true;\n      this.show(param['target'].getCenter());\n      delete this._showBySymbolChange;\n    }\n  };\n  _proto.onMoving = function onMoving() {\n    if (this.isVisible() && this.getMap().isTransforming()) {\n      this._updatePosition();\n    }\n  };\n  _proto.onEvent = function onEvent() {\n    if (this.isVisible()) {\n      this._updatePosition();\n    }\n  };\n  _proto.onZoomEnd = function onZoomEnd() {\n    if (this.isVisible()) {\n      this._setPosition();\n    }\n  };\n  _proto.onResize = function onResize() {\n    if (this.isVisible()) {\n      this._setPosition();\n    }\n  };\n  _proto.onDomSizeChange = function onDomSizeChange() {\n    if (this.isVisible()) {\n      this._setPosition();\n      this._collides();\n    }\n  };\n  _proto._updatePosition = function _updatePosition() {\n    if (!this.getMap()) {\n      return this;\n    }\n    var renderer = this.getMap()._getRenderer();\n    renderer.callInNextFrame(this._setPosition.bind(this));\n    return this;\n  };\n  _proto._setPosition = function _setPosition() {\n    var dom = this.getDOM();\n    if (!dom) return;\n    dom.style[TRANSITION] = null;\n    var p = this.getPosition();\n    this._pos = p;\n    dom.style[TRANSFORM] = this._toCSSTranslate(p) + ' scale(1)';\n  };\n  _proto._toCSSTranslate = function _toCSSTranslate(p) {\n    if (!p) {\n      return '';\n    }\n    if (Browser$1.any3d) {\n      var map = this.getMap(),\n        bearing = map ? map.getBearing() : 0,\n        pitch = map ? map.getPitch() : 0;\n      var r = '';\n      if (this.options['pitchWithMap'] && pitch) {\n        r += \" rotateX(\" + Math.round(pitch) + \"deg)\";\n      }\n      if (this.options['rotateWithMap'] && bearing) {\n        r += \" rotateZ(\" + Math.round(-bearing) + \"deg)\";\n      }\n      return 'translate3d(' + p.x + 'px,' + p.y + 'px, 0px)' + r;\n    } else {\n      return 'translate(' + p.x + 'px,' + p.y + 'px)';\n    }\n  };\n  _proto._observerDomSize = function _observerDomSize(dom) {\n    var _this4 = this;\n    if (!dom || !Browser$1.resizeObserver || this._resizeObserver) {\n      return this;\n    }\n    this._resizeObserver = new ResizeObserver(function (entries) {\n      if (entries.length) {\n        var borderBoxSize = entries[0].borderBoxSize;\n        if (borderBoxSize && borderBoxSize.length) {\n          _this4._domContentRect = {\n            width: borderBoxSize[0].inlineSize,\n            height: borderBoxSize[0].blockSize\n          };\n        } else {\n          _this4._domContentRect = entries[0].contentRect;\n        }\n      } else {\n        delete _this4._domContentRect;\n      }\n      if (_this4.onDomSizeChange) {\n        _this4.onDomSizeChange();\n      }\n    });\n    this._resizeObserver.observe(dom);\n    return this;\n  };\n  _proto.isSupportZoomFilter = function isSupportZoomFilter() {\n    return false;\n  };\n  _proto.onConfig = function onConfig() {\n    this._updatePosition();\n    return this;\n  };\n  UIComponent.isSupport = function isSupport(owner) {\n    if (owner && isFunction(owner.on) && isFunction(owner.off) && isFunction(owner.getCenter)) {\n      return true;\n    }\n    return false;\n  };\n  return UIComponent;\n}(Eventable(Class));\nUIComponent.mergeOptions(options$j);\n\nvar options$k = {\n  'containerClass': null,\n  'eventsPropagation': true,\n  'draggable': false,\n  'single': false,\n  'content': null,\n  'altitude': 0,\n  'minZoom': 0,\n  'maxZoom': null,\n  'horizontalAlignment': 'middle',\n  'verticalAlignment': 'middle'\n};\nvar domEvents = 'mousedown ' + 'mouseup ' + 'mouseenter ' + 'mouseover ' + 'mouseout ' + 'mousemove ' + 'click ' + 'dblclick ' + 'contextmenu ' + 'keypress ' + 'touchstart ' + 'touchmove ' + 'touchend';\nvar UIMarker = function (_Handlerable) {\n  _inheritsLoose(UIMarker, _Handlerable);\n  function UIMarker(coordinate, options) {\n    var _this;\n    _this = _Handlerable.call(this, options) || this;\n    _this._markerCoord = new Coordinate(coordinate);\n    return _this;\n  }\n  var _proto = UIMarker.prototype;\n  _proto._getClassName = function _getClassName() {\n    return 'UIMarker';\n  };\n  _proto.setCoordinates = function setCoordinates(coordinates) {\n    this._markerCoord = coordinates;\n    this.fire('positionchange');\n    if (this.isVisible()) {\n      this._coordinate = this._markerCoord;\n      this._setPosition();\n      this._collides();\n    }\n    return this;\n  };\n  _proto.getCoordinates = function getCoordinates() {\n    return this._markerCoord;\n  };\n  _proto.getCenter = function getCenter() {\n    return this.getCoordinates();\n  };\n  _proto.getAltitude = function getAltitude() {\n    var coordinates = this.getCoordinates() || {};\n    if (isNumber(coordinates.z)) {\n      return coordinates.z;\n    }\n    return this.options.altitude || 0;\n  };\n  _proto.setAltitude = function setAltitude(alt) {\n    if (isNumber(alt) && this._markerCoord) {\n      this._markerCoord.z = alt;\n      if (this._updatePosition) {\n        this._updatePosition();\n        this._collides();\n      }\n    }\n    return this;\n  };\n  _proto.setContent = function setContent(content) {\n    var old = this.options['content'];\n    this.options['content'] = content;\n    this.fire('contentchange', {\n      'old': old,\n      'new': content\n    });\n    if (this.isVisible()) {\n      this.show();\n    }\n    return this;\n  };\n  _proto.getContent = function getContent() {\n    return this.options['content'];\n  };\n  _proto.onAdd = function onAdd() {\n    this.show();\n  };\n  _proto.show = function show() {\n    return _Handlerable.prototype.show.call(this, this._markerCoord);\n  };\n  _proto.flash = function flash$$1(interval, count, cb, context) {\n    return flash.call(this, interval, count, cb, context);\n  };\n  _proto.buildOn = function buildOn() {\n    var dom;\n    var content = this.options['content'];\n    var isStr = isString(content);\n    if (isStr || isFunction(content)) {\n      dom = createEl('div');\n      if (isStr) {\n        dom.innerHTML = this.options['content'];\n      } else {\n        content.bind(this)(dom);\n      }\n    } else {\n      dom = this.options['content'];\n    }\n    if (this.options['containerClass']) {\n      dom.className = this.options['containerClass'];\n    }\n    this._registerDOMEvents(dom);\n    return dom;\n  };\n  _proto.getOffset = function getOffset() {\n    var size = this.getSize();\n    var offsetX = -size.width / 2,\n      offsetY = -size.height / 2;\n    var _this$options = this.options,\n      horizontalAlignment = _this$options.horizontalAlignment,\n      verticalAlignment = _this$options.verticalAlignment;\n    if (horizontalAlignment === 'left') {\n      offsetX = -size.width;\n    } else if (horizontalAlignment === 'right') {\n      offsetX = 0;\n    }\n    if (verticalAlignment === 'top') {\n      offsetY = -size.height;\n    } else if (verticalAlignment === 'bottom') {\n      offsetY = 0;\n    }\n    return new Point(offsetX, offsetY);\n  };\n  _proto.getTransformOrigin = function getTransformOrigin() {\n    return 'center center';\n  };\n  _proto.onDomRemove = function onDomRemove() {\n    var dom = this.getDOM();\n    this._removeDOMEvents(dom);\n  };\n  _proto.isDragging = function isDragging() {\n    if (this['draggable']) {\n      return this['draggable'].isDragging();\n    }\n    return false;\n  };\n  _proto._registerDOMEvents = function _registerDOMEvents(dom) {\n    on(dom, domEvents, this._onDomEvents, this);\n  };\n  _proto._onDomEvents = function _onDomEvents(e) {\n    var event = this.getMap()._parseEvent(e, e.type);\n    var type = e.type;\n    if (type === 'mousedown') {\n      this._mousedownEvent = e;\n    }\n    if (type === 'mouseup') {\n      this._mouseupEvent = e;\n    }\n    if (type === 'click' && this._mouseClickPositionIsChange()) {\n      return;\n    }\n    if (type === 'touchstart') {\n      this._touchstartTime = now();\n    }\n    this.fire(e.type, event);\n    if (type === 'touchend' && Browser$1.touch) {\n      var clickTimeThreshold = this.getMap().options.clickTimeThreshold || 280;\n      if (now() - this._touchstartTime < clickTimeThreshold) {\n        this._onDomEvents(extend({}, e, {\n          type: 'click'\n        }));\n      }\n    }\n  };\n  _proto._removeDOMEvents = function _removeDOMEvents(dom) {\n    off(dom, domEvents, this._onDomEvents, this);\n  };\n  _proto._mouseClickPositionIsChange = function _mouseClickPositionIsChange() {\n    var _ref = this._mousedownEvent || {},\n      x1 = _ref.x,\n      y1 = _ref.y;\n    var _ref2 = this._mouseupEvent || {},\n      x2 = _ref2.x,\n      y2 = _ref2.y;\n    return x1 !== x2 || y1 !== y2;\n  };\n  _proto._getConnectPoints = function _getConnectPoints() {\n    var map = this.getMap();\n    var containerPoint = map.coordToContainerPoint(this.getCoordinates());\n    var size = this.getSize(),\n      width = size.width,\n      height = size.height;\n    var anchors = [map.containerPointToCoordinate(containerPoint.add(-width / 2, 0)), map.containerPointToCoordinate(containerPoint.add(width / 2, 0)), map.containerPointToCoordinate(containerPoint.add(0, height / 2)), map.containerPointToCoordinate(containerPoint.add(0, -height / 2))];\n    return anchors;\n  };\n  _proto._getViewPoint = function _getViewPoint() {\n    var alt = 0;\n    if (this._owner) {\n      var altitude = this.getAltitude();\n      if (altitude > 0) {\n        alt = this._meterToPoint(this._coordinate, altitude);\n      }\n    }\n    return this.getMap().coordToViewPoint(this._coordinate, undefined, alt)._add(this.options['dx'], this.options['dy']);\n  };\n  _proto._getDefaultEvents = function _getDefaultEvents() {\n    return extend({}, _Handlerable.prototype._getDefaultEvents.call(this), {\n      'zooming zoomend': this.onZoomFilter\n    });\n  };\n  _proto._setPosition = function _setPosition() {\n    this.onZoomFilter();\n    _Handlerable.prototype._setPosition.call(this);\n  };\n  _proto.onZoomFilter = function onZoomFilter() {\n    var dom = this.getDOM();\n    if (!dom) return;\n    if (!this.isVisible() && dom.style.display !== 'none') {\n      dom.style.display = 'none';\n    } else if (this.isVisible() && dom.style.display === 'none') {\n      dom.style.display = '';\n    }\n  };\n  _proto.isVisible = function isVisible() {\n    var map = this.getMap();\n    if (!map) {\n      return false;\n    }\n    if (!this.options['visible']) {\n      return false;\n    }\n    var zoom = map.getZoom();\n    var _this$options2 = this.options,\n      minZoom = _this$options2.minZoom,\n      maxZoom = _this$options2.maxZoom;\n    if (!isNil(minZoom) && zoom < minZoom || !isNil(maxZoom) && zoom > maxZoom) {\n      return false;\n    }\n    var dom = this.getDOM();\n    return dom && true;\n  };\n  _proto.isSupportZoomFilter = function isSupportZoomFilter() {\n    return true;\n  };\n  return UIMarker;\n}(Handlerable(UIComponent));\nUIMarker.mergeOptions(options$k);\nvar EVENTS$1 = Browser$1.touch ? 'touchstart mousedown' : 'mousedown';\nvar UIMarkerDragHandler = function (_Handler) {\n  _inheritsLoose(UIMarkerDragHandler, _Handler);\n  function UIMarkerDragHandler(target) {\n    return _Handler.call(this, target) || this;\n  }\n  var _proto2 = UIMarkerDragHandler.prototype;\n  _proto2.addHooks = function addHooks() {\n    this.target.on(EVENTS$1, this._startDrag, this);\n  };\n  _proto2.removeHooks = function removeHooks() {\n    this.target.off(EVENTS$1, this._startDrag, this);\n  };\n  _proto2._startDrag = function _startDrag(param) {\n    var domEvent = param['domEvent'];\n    if (domEvent.touches && domEvent.touches.length > 1 || domEvent.button === 2) {\n      return;\n    }\n    if (this.isDragging()) {\n      return;\n    }\n    this.target.on('click', this._endDrag, this);\n    this._lastCoord = param['coordinate'];\n    this._lastPoint = param['containerPoint'];\n    this._prepareDragHandler();\n    this._dragHandler.onMouseDown(param['domEvent']);\n    this.target.fire('dragstart', param);\n  };\n  _proto2._prepareDragHandler = function _prepareDragHandler() {\n    this._dragHandler = new DragHandler(this.target.getDOM(), {\n      'cancelOn': this._cancelOn.bind(this),\n      'ignoreMouseleave': true\n    });\n    this._dragHandler.on('mousedown', this._onMouseDown, this);\n    this._dragHandler.on('dragging', this._dragging, this);\n    this._dragHandler.on('mouseup', this._endDrag, this);\n    this._dragHandler.enable();\n  };\n  _proto2._cancelOn = function _cancelOn(domEvent) {\n    var target = domEvent.srcElement || domEvent.target,\n      tagName = target.tagName.toLowerCase();\n    if (tagName === 'button' || tagName === 'input' || tagName === 'select' || tagName === 'option' || tagName === 'textarea') {\n      return true;\n    }\n    return false;\n  };\n  _proto2._onMouseDown = function _onMouseDown(param) {\n    stopPropagation(param['domEvent']);\n  };\n  _proto2._dragging = function _dragging(param) {\n    var target = this.target,\n      map = target.getMap(),\n      eventParam = map._parseEvent(param['domEvent']),\n      domEvent = eventParam['domEvent'];\n    if (domEvent.touches && domEvent.touches.length > 1) {\n      return;\n    }\n    if (!this._isDragging) {\n      this._isDragging = true;\n      return;\n    }\n    var coord = eventParam['coordinate'],\n      point = eventParam['containerPoint'];\n    if (!this._lastCoord) {\n      this._lastCoord = coord;\n    }\n    if (!this._lastPoint) {\n      this._lastPoint = point;\n    }\n    var coordOffset = coord.sub(this._lastCoord),\n      pointOffset = point.sub(this._lastPoint);\n    this._lastCoord = coord;\n    this._lastPoint = point;\n    this.target.setCoordinates(this.target.getCoordinates().add(coordOffset));\n    eventParam['coordOffset'] = coordOffset;\n    eventParam['pointOffset'] = pointOffset;\n    target.fire('dragging', eventParam);\n  };\n  _proto2._endDrag = function _endDrag(param) {\n    var target = this.target,\n      map = target.getMap();\n    if (this._dragHandler) {\n      target.off('click', this._endDrag, this);\n      this._dragHandler.disable();\n      delete this._dragHandler;\n    }\n    delete this._lastCoord;\n    delete this._lastPoint;\n    this._isDragging = false;\n    if (!map) {\n      return;\n    }\n    var eventParam = map._parseEvent(param['domEvent']);\n    if (target && target._mouseClickPositionIsChange && target._mouseClickPositionIsChange()) {\n      target.fire('dragend', eventParam);\n    }\n  };\n  _proto2.isDragging = function isDragging() {\n    if (!this._isDragging) {\n      return false;\n    }\n    return true;\n  };\n  return UIMarkerDragHandler;\n}(Handler$1);\nUIMarker.addInitHook('addHandler', 'draggable', UIMarkerDragHandler);\n\nvar PROPERTY_PATTERN = /\\{ *([\\w_]+) *\\}/g;\nvar options$l = {\n  'containerClass': 'maptalks-msgBox',\n  'autoPan': true,\n  'autoCloseOn': null,\n  'autoOpenOn': 'click',\n  'width': 'auto',\n  'minHeight': 120,\n  'custom': false,\n  'title': null,\n  'content': null,\n  'enableTemplate': false\n};\nvar EMPTY_SIZE = new Size(0, 0);\nvar InfoWindow = function (_UIComponent) {\n  _inheritsLoose(InfoWindow, _UIComponent);\n  function InfoWindow() {\n    return _UIComponent.apply(this, arguments) || this;\n  }\n  var _proto = InfoWindow.prototype;\n  _proto._getClassName = function _getClassName() {\n    return 'InfoWindow';\n  };\n  _proto.addTo = function addTo(owner) {\n    if (owner instanceof Geometry) {\n      if (owner.getInfoWindow() && owner.getInfoWindow() !== this) {\n        owner.removeInfoWindow();\n      }\n      owner._infoWindow = this;\n    }\n    return _UIComponent.prototype.addTo.call(this, owner);\n  };\n  _proto.setContent = function setContent(content) {\n    var old = this.options['content'];\n    this.options['content'] = content;\n    this.fire('contentchange', {\n      'old': old,\n      'new': content\n    });\n    if (this.isVisible()) {\n      this.show(this._coordinate);\n    }\n    return this;\n  };\n  _proto.getContent = function getContent() {\n    return this.options['content'];\n  };\n  _proto.setTitle = function setTitle(title) {\n    var old = title;\n    this.options['title'] = title;\n    this.fire('contentchange', {\n      'old': old,\n      'new': title\n    });\n    if (this.isVisible()) {\n      this.show(this._coordinate);\n    }\n    return this;\n  };\n  _proto.getTitle = function getTitle() {\n    return this.options['title'];\n  };\n  _proto.buildOn = function buildOn() {\n    var isFunc = isFunction(this.options['content']);\n    var isStr = isString(this.options['content']);\n    if (this.options['custom']) {\n      if (isStr || isFunc) {\n        var _dom = createEl('div');\n        if (isStr) {\n          _dom.innerHTML = this.options['content'];\n          this._replaceTemplate(_dom);\n        } else {\n          this.options['content'].bind(this)(_dom);\n        }\n        return _dom;\n      } else {\n        this._replaceTemplate(this.options['content']);\n        return this.options['content'];\n      }\n    }\n    this._bindDomEvents(this.getDOM(), 'off');\n    var dom = createEl('div');\n    if (this.options['containerClass']) {\n      dom.className = this.options['containerClass'];\n    }\n    var width = this._getWindowWidth();\n    dom.style.width = isNumber(width) ? width + 'px' : 'auto';\n    dom.style.bottom = '0px';\n    var content = '<em class=\"maptalks-ico\"></em>';\n    if (this.options['title']) {\n      content += '<h2>' + this.options['title'] + '</h2>';\n    }\n    content += '<a href=\"javascript:void(0);\" class=\"maptalks-close\">×</a><div class=\"maptalks-msgContent\"></div>';\n    dom.innerHTML = content;\n    this._replaceTemplate(dom);\n    var msgContent = dom.querySelector('.maptalks-msgContent');\n    if (isStr || isFunc) {\n      if (isStr) {\n        msgContent.innerHTML = this.options['content'];\n      } else {\n        this.options['content'].bind(this)(msgContent);\n      }\n    } else {\n      msgContent.appendChild(this.options['content']);\n    }\n    this._onCloseBtnClick = this.hide.bind(this);\n    var closeBtn = dom.querySelector('.maptalks-close');\n    addDomEvent(closeBtn, 'click touchend', this._onCloseBtnClick);\n    if (!isFunc) {\n      this._replaceTemplate(msgContent);\n    }\n    this._bindDomEvents(dom, 'on');\n    return dom;\n  };\n  _proto._replaceTemplate = function _replaceTemplate(dom) {\n    if (this.options['enableTemplate'] && this._owner && this._owner.getProperties && dom && dom.innerHTML) {\n      var properties = this._owner.getProperties() || {};\n      if (isObject(properties)) {\n        var html = dom.innerHTML;\n        dom.innerHTML = html.replace(PROPERTY_PATTERN, function (str, key) {\n          return properties[key];\n        });\n      }\n    }\n    return this;\n  };\n  _proto.getTransformOrigin = function getTransformOrigin() {\n    var size = this.getSize();\n    return size.width / 2 + 'px bottom';\n  };\n  _proto.getOffset = function getOffset() {\n    var size = this.getSize();\n    var o = new Point(-size['width'] / 2, 0);\n    if (!this.options['custom']) {\n      o._sub(4, 12);\n    } else {\n      o._sub(0, size['height']);\n    }\n    var owner = this.getOwner();\n    if (owner instanceof Marker || owner instanceof MultiPoint) {\n      var painter, markerSize;\n      if (owner instanceof Marker) {\n        painter = owner._getPainter();\n        markerSize = owner.getSize();\n      } else {\n        var children = owner.getGeometries();\n        if (!children || !children.length) {\n          return o;\n        }\n        painter = children[0]._getPainter();\n        markerSize = children[0].getSize();\n      }\n      if (!markerSize) {\n        markerSize = EMPTY_SIZE;\n      }\n      if (painter) {\n        var fixExtent = painter.getFixedExtent();\n        o._add(fixExtent.xmax - markerSize.width / 2, fixExtent.ymin);\n      } else {\n        o._add(0, -markerSize.height);\n      }\n    }\n    return o;\n  };\n  _proto.show = function show(coordinate) {\n    if (!this.getMap()) {\n      return this;\n    }\n    if (!this.getMap().options['enableInfoWindow']) {\n      return this;\n    }\n    return _UIComponent.prototype.show.call(this, coordinate);\n  };\n  _proto.getEvents = function getEvents() {\n    if (!this.options['autoCloseOn']) {\n      return null;\n    }\n    var events = {};\n    events[this.options['autoCloseOn']] = this.hide;\n    return events;\n  };\n  _proto.getOwnerEvents = function getOwnerEvents() {\n    var owner = this.getOwner();\n    if (!this.options['autoOpenOn'] || !owner) {\n      return null;\n    }\n    var events = {};\n    events[this.options['autoOpenOn']] = this._onAutoOpen;\n    return events;\n  };\n  _proto.onRemove = function onRemove() {\n    this._onDomMouseout();\n    this.onDomRemove();\n  };\n  _proto.onDomRemove = function onDomRemove() {\n    if (this._onCloseBtnClick) {\n      var dom = this.getDOM();\n      var closeBtn = dom.childNodes[2];\n      removeDomEvent(closeBtn, 'click touchend', this._onCloseBtnClick);\n      delete this._onCloseBtnClick;\n    }\n  };\n  _proto._onAutoOpen = function _onAutoOpen(e) {\n    var _this = this;\n    var owner = this.getOwner();\n    setTimeout(function () {\n      if (owner instanceof Marker || owner instanceof UIComponent) {\n        _this.show(owner.getCoordinates());\n      } else if (owner instanceof MultiPoint) {\n        _this.show(owner.findClosest(e.coordinate));\n      } else if (owner instanceof LineString || owner instanceof MultiLineString) {\n        if (_this.getMap().getScale() >= 8) {\n          e.coordinate = _this._rectifyMouseCoordinte(owner, e.coordinate);\n        }\n        _this.show(e.coordinate);\n      } else {\n        _this.show(e.coordinate);\n      }\n    }, 1);\n  };\n  _proto._rectifyMouseCoordinte = function _rectifyMouseCoordinte(owner, mouseCoordinate) {\n    var _this2 = this;\n    if (owner instanceof LineString) {\n      return this._rectifyLineStringMouseCoordinate(owner, mouseCoordinate).coordinate;\n    } else if (owner instanceof MultiLineString) {\n      return owner.getGeometries().map(function (lineString) {\n        return _this2._rectifyLineStringMouseCoordinate(lineString, mouseCoordinate);\n      }).sort(function (a, b) {\n        return a.dis - b.dis;\n      })[0].coordinate;\n    }\n    return mouseCoordinate;\n  };\n  _proto._rectifyLineStringMouseCoordinate = function _rectifyLineStringMouseCoordinate(lineString, mouseCoordinate) {\n    var _this3 = this;\n    var pts = lineString.getCoordinates().map(function (coordinate) {\n      return _this3.getMap().coordToContainerPoint(coordinate);\n    });\n    var mousePt = this.getMap().coordToContainerPoint(mouseCoordinate);\n    var minDis = Infinity,\n      coordinateIndex = -1;\n    for (var i = 0, len = pts.length; i < len; i++) {\n      var pt = pts[i];\n      var dis = mousePt.distanceTo(pt);\n      if (dis < minDis) {\n        minDis = dis;\n        coordinateIndex = i;\n      }\n    }\n    var filterPts = [];\n    if (coordinateIndex === 0) {\n      filterPts.push(pts[0], pts[1]);\n    } else if (coordinateIndex === pts.length - 1) {\n      filterPts.push(pts[coordinateIndex - 1], pts[coordinateIndex]);\n    } else {\n      filterPts.push(pts[coordinateIndex - 1], pts[coordinateIndex], pts[coordinateIndex + 1]);\n    }\n    var xys = [];\n    var _this$getMap$getSize = this.getMap().getSize(),\n      width = _this$getMap$getSize.width,\n      height = _this$getMap$getSize.height;\n    for (var _i = 0, _len = filterPts.length - 1; _i < _len; _i++) {\n      var pt1 = filterPts[_i],\n        pt2 = filterPts[_i + 1];\n      if (pt1.x === pt2.x) {\n        var miny = Math.max(0, Math.min(pt1.y, pt2.y));\n        var maxy = Math.min(height, Math.max(pt1.y, pt2.y));\n        for (var y = miny; y <= maxy; y++) {\n          xys.push(new Point(pt1.x, y));\n        }\n      } else {\n        var k = (pt2.y - pt1.y) / (pt2.x - pt1.x);\n        var minx = Math.max(0, Math.min(pt1.x, pt2.x));\n        var maxx = Math.min(width, Math.max(pt1.x, pt2.x));\n        for (var x = minx; x <= maxx; x++) {\n          var _y = k * (x - pt1.x) + pt1.y;\n          xys.push(new Point(x, _y));\n        }\n      }\n    }\n    var minPtDis = Infinity,\n      ptIndex = -1;\n    for (var _i2 = 0, _len2 = xys.length; _i2 < _len2; _i2++) {\n      var _pt = xys[_i2];\n      var _dis = mousePt.distanceTo(_pt);\n      if (_dis < minPtDis) {\n        minPtDis = _dis;\n        ptIndex = _i2;\n      }\n    }\n    return {\n      dis: minPtDis,\n      coordinate: ptIndex < 0 ? mouseCoordinate : this.getMap().containerPointToCoord(xys[ptIndex])\n    };\n  };\n  _proto._getWindowWidth = function _getWindowWidth() {\n    var defaultWidth = options$l.width;\n    var width = this.options['width'];\n    if (!width) {\n      width = defaultWidth;\n    }\n    return width;\n  };\n  _proto._bindDomEvents = function _bindDomEvents(dom, to) {\n    if (!dom) {\n      return;\n    }\n    var events = this._getDomEvents();\n    var bindEvent = to === 'on' ? on : off;\n    for (var eventName in events) {\n      bindEvent(dom, eventName, events[eventName], this);\n    }\n  };\n  _proto._getDomEvents = function _getDomEvents() {\n    return {\n      'mouseover': this._onDomMouseover,\n      'mouseout': this._onDomMouseout\n    };\n  };\n  _proto._onDomMouseover = function _onDomMouseover(domEvent) {\n    var map = this.getMap();\n    if (!map) {\n      return;\n    }\n    map.options['preventWheelScroll'] = false;\n  };\n  _proto._onDomMouseout = function _onDomMouseout(domEvent) {\n    var map = this.getMap();\n    if (!map) {\n      return;\n    }\n    map.options['preventWheelScroll'] = true;\n  };\n  return InfoWindow;\n}(UIComponent);\nInfoWindow.mergeOptions(options$l);\n\nvar HIDEDOMEVENTS = 'remove hide shapechange positionchange dragend animatestart';\nvar options$m = {\n  'width': 0,\n  'height': 0,\n  'animation': 'fade',\n  'containerClass': 'maptalks-tooltip',\n  'showTimeout': 400\n};\nvar ToolTip = function (_UIComponent) {\n  _inheritsLoose(ToolTip, _UIComponent);\n  var _proto = ToolTip.prototype;\n  _proto._getClassName = function _getClassName() {\n    return 'ToolTip';\n  };\n  function ToolTip(content, options) {\n    var _this;\n    if (options === void 0) {\n      options = {};\n    }\n    _this = _UIComponent.call(this, options) || this;\n    _this._content = content;\n    return _this;\n  }\n  _proto.addTo = function addTo(owner) {\n    if (ToolTip.isSupport(owner)) {\n      owner.on('mousemove', this.onMouseMove, this);\n      owner.on('mouseout', this.onMouseOut, this);\n      owner.on(HIDEDOMEVENTS, this.hideDom, this);\n      return _UIComponent.prototype.addTo.call(this, owner);\n    } else {\n      throw new Error('Invalid geometry or UIMarker the tooltip is added to.');\n    }\n  };\n  _proto.setStyle = function setStyle$$1(cssName) {\n    this.options.containerClass = cssName;\n    return this;\n  };\n  _proto.getStyle = function getStyle() {\n    return this.options.containerClass;\n  };\n  _proto.getContent = function getContent() {\n    return this._content;\n  };\n  _proto.buildOn = function buildOn() {\n    var dom = createEl('div');\n    var options = this.options || {};\n    if (options.height) {\n      dom.style.height = options.height + 'px';\n    }\n    if (options.width) {\n      dom.style.width = options.width + 'px';\n    }\n    var cssName = options.containerClass || options.cssName;\n    if (!cssName && options.height) {\n      dom.style.lineHeight = options.height + 'px';\n    }\n    if (isFunction(this._content)) {\n      this._content.bind(this)(dom);\n    } else {\n      dom.innerHTML = \"<div class=\\\"\" + cssName + \"\\\">\" + this._content + \"</div>\";\n    }\n    return dom;\n  };\n  _proto.onMouseOut = function onMouseOut() {\n    clearTimeout(this._timeout);\n    if (this.isVisible()) {\n      this._removePrevDOM();\n    }\n    this._switchMapEvents('off');\n  };\n  _proto.onMouseMove = function onMouseMove(e) {\n    var _this2 = this;\n    clearTimeout(this._timeout);\n    var map = this.getMap();\n    if (!map) {\n      return;\n    }\n    var coord = map.locateByPoint(e.coordinate, -5, 25);\n    if (this.options['showTimeout'] === 0) {\n      this.show(coord);\n    } else {\n      this._timeout = setTimeout(function () {\n        if (map) {\n          _this2.show(coord);\n        }\n      }, this.options['showTimeout']);\n    }\n  };\n  _proto.onRemove = function onRemove() {\n    clearTimeout(this._timeout);\n    if (this._owner) {\n      this._owner.off('mouseover', this.onMouseOver, this);\n      this._owner.off('mouseout', this.onMouseOut, this);\n      this._owner.off(HIDEDOMEVENTS, this.hideDom, this);\n    }\n  };\n  _proto.hideDom = function hideDom() {\n    return this.hide();\n  };\n  _proto.onEvent = function onEvent() {\n    _UIComponent.prototype.onEvent.call(this);\n    this.hideDom();\n    return this;\n  };\n  _proto._getViewPoint = function _getViewPoint() {\n    return this.getMap().coordToViewPoint(this._coordinate, undefined, 0)._add(this.options['dx'], this.options['dy']);\n  };\n  return ToolTip;\n}(UIComponent);\nToolTip.mergeOptions(options$m);\n\nvar defaultOptions = {\n  'containerClass': 'maptalks-menu',\n  'animation': null,\n  'animationDelay': 10,\n  'animationOnHide': false,\n  'autoPan': false,\n  'width': 160,\n  'maxHeight': 0,\n  'custom': false,\n  'items': []\n};\nvar Menu = function (_UIComponent) {\n  _inheritsLoose(Menu, _UIComponent);\n  function Menu(options) {\n    return _UIComponent.call(this, options) || this;\n  }\n  var _proto = Menu.prototype;\n  _proto._getClassName = function _getClassName() {\n    return 'Menu';\n  };\n  _proto.addTo = function addTo(owner) {\n    if (owner._menu && owner._menu !== this) {\n      owner.removeMenu();\n    }\n    owner._menu = this;\n    this._owner = owner;\n    return UIComponent.prototype.addTo.apply(this, arguments);\n  };\n  _proto.setItems = function setItems(items) {\n    this.options['items'] = items;\n    return this;\n  };\n  _proto.getItems = function getItems() {\n    return this.options['items'] || [];\n  };\n  _proto.buildOn = function buildOn() {\n    if (this.options['custom']) {\n      if (isString(this.options['items'])) {\n        var container = createEl('div');\n        container.innerHTML = this.options['items'];\n        return container;\n      } else {\n        return this.options['items'];\n      }\n    } else {\n      var dom = createEl('div');\n      if (this.options['containerClass']) {\n        addClass(dom, this.options['containerClass']);\n      }\n      dom.style.width = this._getMenuWidth() + 'px';\n      var menuItems = this._createMenuItemDom();\n      dom.appendChild(menuItems);\n      on(dom, 'contextmenu', preventDefault);\n      return dom;\n    }\n  };\n  _proto.getOffset = function getOffset() {\n    if (!this.getMap()) {\n      return null;\n    }\n    var mapSize = this.getMap().getSize(),\n      p = this.getMap().viewPointToContainerPoint(this._getViewPoint()),\n      size = this.getSize();\n    var dx = 0,\n      dy = 0;\n    if (p.x + size['width'] > mapSize['width']) {\n      dx = -size['width'];\n    }\n    if (p.y + size['height'] > mapSize['height']) {\n      dy = -size['height'];\n    }\n    return new Point(dx, dy);\n  };\n  _proto.getTransformOrigin = function getTransformOrigin() {\n    var p = this.getOffset()._multi(-1);\n    return p.x + 'px ' + p.y + 'px';\n  };\n  _proto.getEvents = function getEvents() {\n    return {\n      '_zoomstart _zoomend _movestart _dblclick _click': this._removePrevDOM\n    };\n  };\n  _proto._createMenuItemDom = function _createMenuItemDom() {\n    var me = this;\n    var map = this.getMap();\n    var ul = createEl('ul');\n    addClass(ul, 'maptalks-menu-items');\n    var items = this.getItems();\n    function onMenuClick(index) {\n      return function (e) {\n        var param = map._parseEvent(e, 'click');\n        param['target'] = me;\n        param['owner'] = me._owner;\n        param['index'] = index;\n        var result = this._callback(param);\n        if (result === false) {\n          return;\n        }\n        me.hide();\n        if (me._owner) {\n          me._owner.fire('closemenu');\n        }\n      };\n    }\n    var item, itemDOM;\n    for (var i = 0, len = items.length; i < len; i++) {\n      item = items[i];\n      if (item === '-' || item === '_') {\n        itemDOM = createEl('li');\n        addClass(itemDOM, 'maptalks-menu-splitter');\n      } else {\n        itemDOM = createEl('li');\n        var itemTitle = item['item'];\n        if (isFunction(itemTitle)) {\n          itemTitle = itemTitle({\n            'owner': this._owner,\n            'index': i\n          });\n        }\n        itemDOM.innerHTML = itemTitle;\n        itemDOM._callback = item['click'];\n        on(itemDOM, 'click', onMenuClick(i));\n      }\n      ul.appendChild(itemDOM);\n    }\n    var maxHeight = this.options['maxHeight'] || 0;\n    if (maxHeight > 0) {\n      setStyle(ul, 'max-height: ' + maxHeight + 'px; overflow-y: auto;');\n    }\n    return ul;\n  };\n  _proto._getMenuWidth = function _getMenuWidth() {\n    var defaultWidth = 160;\n    var width = this.options['width'] || defaultWidth;\n    return width;\n  };\n  return Menu;\n}(UIComponent);\nMenu.mergeOptions(defaultOptions);\n\nvar Menuable = {\n  setMenu: function setMenu(options) {\n    this._menuOptions = options;\n    if (this._menu) {\n      this._menu.setOptions(options);\n    } else {\n      this.on('contextmenu', this._defaultOpenMenu, this);\n    }\n    return this;\n  },\n  getMenu: function getMenu() {\n    return this._menu;\n  },\n  openMenu: function openMenu(coordinate) {\n    var map = this instanceof Map$1 ? this : this.getMap();\n    if (!coordinate) {\n      coordinate = this.getCenter();\n    }\n    if (!this._menu) {\n      if (this._menuOptions && map) {\n        this._bindMenu();\n        this._menu.show(coordinate);\n      }\n    } else {\n      this._menu.show(coordinate);\n    }\n    this.fire('openmenu', {\n      coordinate: coordinate\n    });\n    return this;\n  },\n  setMenuItems: function setMenuItems(items) {\n    if (!this._menuOptions) {\n      this._menuOptions = {};\n    }\n    if (Array.isArray(items)) {\n      this._menuOptions['custom'] = false;\n    }\n    this._menuOptions['items'] = items;\n    this.setMenu(this._menuOptions);\n    return this;\n  },\n  getMenuItems: function getMenuItems() {\n    if (this._menu) {\n      return this._menu.getItems();\n    } else if (this._menuOptions) {\n      return this._menuOptions['items'] || [];\n    }\n    return [];\n  },\n  closeMenu: function closeMenu() {\n    if (this._menu) {\n      this._menu.hide();\n    }\n    this.fire('closemenu', {});\n    return this;\n  },\n  removeMenu: function removeMenu() {\n    this.off('contextmenu', this._defaultOpenMenu, this);\n    this._unbindMenu();\n    delete this._menuOptions;\n    this.fire('removemenu', {});\n    return this;\n  },\n  _bindMenu: function _bindMenu() {\n    if (!this._menuOptions) {\n      return this;\n    }\n    this._menu = new Menu(this._menuOptions);\n    this._menu.addTo(this);\n    return this;\n  },\n  _unbindMenu: function _unbindMenu() {\n    if (this._menu) {\n      this.closeMenu();\n      this._menu.remove();\n      delete this._menu;\n    }\n    return this;\n  },\n  _defaultOpenMenu: function _defaultOpenMenu(param) {\n    this.openMenu(param['coordinate']);\n    return false;\n  }\n};\nMap$1.include(Menuable);\nGeometry.include(Menuable);\n\n\n\nvar index$4 = /*#__PURE__*/Object.freeze({\n  UIComponent: UIComponent,\n  UIMarker: UIMarker,\n  InfoWindow: InfoWindow,\n  ToolTip: ToolTip,\n  Menuable: Menuable,\n  Menu: Menu\n});\n\nvar Control = function (_Eventable) {\n  _inheritsLoose(Control, _Eventable);\n  function Control(options) {\n    if (options && options['position'] && !isString(options['position'])) {\n      options['position'] = extend({}, options['position']);\n    }\n    return _Eventable.call(this, options) || this;\n  }\n  var _proto = Control.prototype;\n  _proto.addTo = function addTo(map) {\n    this.remove();\n    if (!map.options['control']) {\n      return this;\n    }\n    this._map = map;\n    var controlContainer = map._panels.control;\n    this.__ctrlContainer = createEl('div');\n    setStyle(this.__ctrlContainer, 'position:absolute;overflow:visible;');\n    this.update();\n    controlContainer.appendChild(this.__ctrlContainer);\n    if (this.onAdd) {\n      this.onAdd();\n    }\n    this.fire('add', {\n      'dom': controlContainer\n    });\n    return this;\n  };\n  _proto.update = function update() {\n    this.__ctrlContainer.innerHTML = '';\n    this._controlDom = this.buildOn(this.getMap());\n    if (this._controlDom) {\n      this._updatePosition();\n      this.__ctrlContainer.appendChild(this._controlDom);\n    }\n    return this;\n  };\n  _proto.getMap = function getMap() {\n    return this._map;\n  };\n  _proto.getPosition = function getPosition() {\n    return extend({}, this._parse(this.options['position']));\n  };\n  _proto.setPosition = function setPosition(position) {\n    if (isString(position)) {\n      this.options['position'] = position;\n    } else {\n      this.options['position'] = extend({}, position);\n    }\n    this._updatePosition();\n    return this;\n  };\n  _proto.getContainerPoint = function getContainerPoint() {\n    var position = this.getPosition();\n    var size = this.getMap().getSize();\n    var x, y;\n    if (!isNil(position['left'])) {\n      x = parseInt(position['left']);\n    } else if (!isNil(position['right'])) {\n      x = size['width'] - parseInt(position['right']);\n    }\n    if (!isNil(position['top'])) {\n      y = parseInt(position['top']);\n    } else if (!isNil(position['bottom'])) {\n      y = size['height'] - parseInt(position['bottom']);\n    }\n    return new Point(x, y);\n  };\n  _proto.getContainer = function getContainer() {\n    return this.__ctrlContainer;\n  };\n  _proto.getDOM = function getDOM() {\n    return this._controlDom;\n  };\n  _proto.show = function show() {\n    this.__ctrlContainer.style.display = '';\n    return this;\n  };\n  _proto.hide = function hide() {\n    this.__ctrlContainer.style.display = 'none';\n    return this;\n  };\n  _proto.isVisible = function isVisible() {\n    return this.__ctrlContainer && this.__ctrlContainer.style.display === '';\n  };\n  _proto.remove = function remove() {\n    if (!this._map) {\n      return this;\n    }\n    removeDomNode(this.__ctrlContainer);\n    if (this.onRemove) {\n      this.onRemove();\n    }\n    delete this._map;\n    delete this.__ctrlContainer;\n    delete this._controlDom;\n    this.fire('remove');\n    return this;\n  };\n  _proto._parse = function _parse(position) {\n    var p = position;\n    if (isString(position)) {\n      p = Control['positions'][p];\n    }\n    return p;\n  };\n  _proto._updatePosition = function _updatePosition() {\n    var position = this.getPosition();\n    if (!position) {\n      position = {\n        'top': 20,\n        'left': 20\n      };\n    }\n    for (var p in position) {\n      if (position.hasOwnProperty(p)) {\n        position[p] = parseInt(position[p]);\n        this.__ctrlContainer.style[p] = position[p] + 'px';\n      }\n    }\n    this.fire('positionchange', {\n      'position': extend({}, position)\n    });\n  };\n  return Control;\n}(Eventable(Class));\nControl.positions = {\n  'top-left': {\n    'top': 20,\n    'left': 20\n  },\n  'top-right': {\n    'top': 20,\n    'right': 20\n  },\n  'bottom-left': {\n    'bottom': 20,\n    'left': 20\n  },\n  'bottom-right': {\n    'bottom': 20,\n    'right': 20\n  }\n};\nMap$1.mergeOptions({\n  'control': true\n});\nMap$1.include({\n  addControl: function addControl(control) {\n    if (this._containerDOM.getContext) {\n      return this;\n    }\n    control.addTo(this);\n    return this;\n  },\n  removeControl: function removeControl(control) {\n    if (!control || control.getMap() !== this) {\n      return this;\n    }\n    control.remove();\n    return this;\n  }\n});\n\nvar options$n = {\n  'position': {\n    'bottom': 0,\n    'left': 0\n  },\n  'content': '<a href=\"http://maptalks.org\" target=\"_blank\">maptalks</a>'\n};\nvar layerEvents = 'addlayer removelayer setbaselayer baselayerremove';\nvar Attribution = function (_Control) {\n  _inheritsLoose(Attribution, _Control);\n  function Attribution() {\n    return _Control.apply(this, arguments) || this;\n  }\n  var _proto = Attribution.prototype;\n  _proto.buildOn = function buildOn() {\n    this._attributionContainer = createEl('div');\n    this._attributionContainer.className = 'maptalks-attribution';\n    this._update();\n    return this._attributionContainer;\n  };\n  _proto.onAdd = function onAdd() {\n    this.getMap().on(layerEvents, this._update, this);\n  };\n  _proto.onRemove = function onRemove() {\n    this.getMap().off(layerEvents, this._update, this);\n  };\n  _proto._update = function _update() {\n    var map = this.getMap();\n    if (!map) {\n      return;\n    }\n    var attributions = map._getLayers(function (layer) {\n      return layer.options['attribution'];\n    }).reverse().map(function (layer) {\n      return layer.options['attribution'];\n    });\n    var content = this.options['content'] + (attributions.length > 0 ? ' - ' + attributions.join(', ') : '');\n    this._attributionContainer.innerHTML = '<span style=\"padding:0px 4px\">' + content + '</span>';\n  };\n  return Attribution;\n}(Control);\nAttribution.mergeOptions(options$n);\nMap$1.mergeOptions({\n  'attribution': true\n});\nMap$1.addOnLoadHook(function () {\n  var a = this.options['attribution'] || this.options['attributionControl'];\n  if (a) {\n    this.attributionControl = new Attribution(a);\n    this.addControl(this.attributionControl);\n  }\n});\n\nvar options$o = {\n  position: {\n    'top': 120,\n    'left': 20\n  }\n};\nvar Compass = function (_Control) {\n  _inheritsLoose(Compass, _Control);\n  function Compass() {\n    return _Control.apply(this, arguments) || this;\n  }\n  var _proto = Compass.prototype;\n  _proto.buildOn = function buildOn(map) {\n    var compass = this._getCompass();\n    this._compass = compass;\n    this._registerDomEvents();\n    map.on('resize moving moveend zooming zoomend rotate rotateend dragrotating dragrotateend viewchange', this._rotateCompass, this);\n    return compass;\n  };\n  _proto.onAdd = function onAdd() {\n    this._rotateCompass();\n  };\n  _proto._getCompass = function _getCompass() {\n    var compass = createEl('div', 'maptalks-compass');\n    return compass;\n  };\n  _proto._registerDomEvents = function _registerDomEvents() {\n    on(this._compass, 'click', this._resetView, this);\n  };\n  _proto._rotateCompass = function _rotateCompass() {\n    var bearing = this.getMap().getBearing().toFixed(1);\n    if (bearing <= 180) bearing *= -1;\n    if (bearing !== this._bearing) {\n      this._bearing = bearing;\n      setStyle(this._compass, \"transform: rotate(\" + this._bearing + \"deg);\");\n    }\n  };\n  _proto.onRemove = function onRemove() {\n    this.getMap().off('resize moving moveend zooming zoomend rotate rotateend dragrotating dragrotateend viewchange', this._rotateCompass, this);\n    delete this._compass;\n    delete this._bearing;\n  };\n  _proto._resetView = function _resetView() {\n    var view = {\n      bearing: 0\n    };\n    this.getMap().animateTo(view);\n  };\n  return Compass;\n}(Control);\nCompass.mergeOptions(options$o);\nMap$1.mergeOptions({\n  'compassControl': false\n});\nMap$1.addOnLoadHook(function () {\n  if (this.options['compassControl']) {\n    this.compassControl = new Compass(this.options['compassControl']);\n    this.addControl(this.compassControl);\n  }\n});\n\nvar options$p = {\n  'position': 'top-right',\n  'baseTitle': 'Base Layers',\n  'overlayTitle': 'Layers',\n  'excludeLayers': [],\n  'containerClass': 'maptalks-layer-switcher'\n};\nvar LayerSwitcher = function (_Control) {\n  _inheritsLoose(LayerSwitcher, _Control);\n  function LayerSwitcher() {\n    return _Control.apply(this, arguments) || this;\n  }\n  var _proto = LayerSwitcher.prototype;\n  _proto.buildOn = function buildOn() {\n    var container = this.container = createEl('div', this.options['containerClass']),\n      panel = this.panel = createEl('div', 'panel'),\n      button = this.button = createEl('button');\n    container.appendChild(button);\n    container.appendChild(panel);\n    return container;\n  };\n  _proto.onAdd = function onAdd() {\n    on(this.button, 'mouseover', this._show, this);\n    on(this.panel, 'mouseleave', this._hide, this);\n    on(this.getMap(), 'click', this._hide, this);\n  };\n  _proto.onRemove = function onRemove() {\n    if (this.panel) {\n      off(this.button, 'mouseover', this._show, this);\n      off(this.panel, 'mouseleave', this._hide, this);\n      off(this.getMap(), 'click', this._hide, this);\n      removeDomNode(this.panel);\n      removeDomNode(this.button);\n      delete this.panel;\n      delete this.button;\n      delete this.container;\n    }\n  };\n  _proto._show = function _show() {\n    if (!hasClass(this.container, 'shown')) {\n      addClass(this.container, 'shown');\n      this._createPanel();\n    }\n  };\n  _proto._hide = function _hide(e) {\n    if (!this.panel.contains(e.toElement || e.relatedTarget)) {\n      setClass(this.container, this.options['containerClass']);\n    }\n  };\n  _proto._createPanel = function _createPanel() {\n    this.panel.innerHTML = '';\n    var ul = createEl('ul');\n    this.panel.appendChild(ul);\n    this._renderLayers(this.getMap(), ul);\n  };\n  _proto._renderLayers = function _renderLayers(map, elm) {\n    var _this = this;\n    var base = map.getBaseLayer(),\n      layers = map.getLayers(),\n      len = layers.length;\n    if (base) {\n      var baseLayers = base.layers || [base],\n        li = createEl('li', 'group'),\n        ul = createEl('ul'),\n        label = createEl('label');\n      label.innerHTML = this.options['baseTitle'];\n      li.appendChild(label);\n      for (var i = 0, _len = baseLayers.length; i < _len; i++) {\n        var layer = baseLayers[i];\n        if (this._isExcluded(layer)) {\n          ul.appendChild(this._renderLayer(baseLayers[i], true));\n          li.appendChild(ul);\n          elm.appendChild(li);\n        }\n      }\n    }\n    if (len) {\n      var _li = createEl('li', 'group'),\n        _ul = createEl('ul'),\n        _label = createEl('label'),\n        input = createEl('input');\n      input.type = 'checkbox';\n      input.checked = true;\n      _label.innerHTML = this.options['overlayTitle'];\n      _li.appendChild(input);\n      _li.appendChild(_label);\n      var groupInputOnChange = function groupInputOnChange(e) {\n        var checked = e.target.checked;\n        var parentNode = e.target.parentNode;\n        if (!parentNode) {\n          return;\n        }\n        var ul = parentNode.getElementsByTagName('ul')[0];\n        if (!ul) {\n          return;\n        }\n        var parentLayerShow = function parentLayerShow(node) {\n          var layer = node._layer;\n          if (layer) {\n            layer[checked ? 'show' : 'hide']();\n          }\n        };\n        var layerShow = function layerShow(li) {\n          var layer = li._layer,\n            checkbox = li.childNodes[0];\n          if (checkbox) {\n            checkbox.checked = checked;\n          }\n          if (layer) {\n            layer[checked ? 'show' : 'hide']();\n          }\n        };\n        parentLayerShow(parentNode);\n        ul.childNodes.forEach(function (li) {\n          layerShow(li);\n          var childUl = li.getElementsByTagName('ul')[0];\n          if (!childUl) {\n            return;\n          }\n          parentLayerShow(li);\n          childUl.childNodes.forEach(function (li) {\n            layerShow(li);\n          });\n        });\n      };\n      for (var _i = 0; _i < len; _i++) {\n        var _layer = layers[_i];\n        if (this._isExcluded(_layer)) {\n          if (_layer.getLayers) {\n            (function () {\n              var groupLi = createEl('li', 'group'),\n                groupUl = createEl('ul'),\n                groupLabel = createEl('label'),\n                groupInput = createEl('input');\n              groupLabel.innerHTML = _layer.getId();\n              groupInput.type = 'checkbox';\n              groupInput.checked = _layer.isVisible();\n              groupInput.onchange = groupInputOnChange;\n              groupLi.appendChild(groupInput);\n              groupLi.appendChild(groupLabel);\n              groupLi.appendChild(groupUl);\n              groupLi._layer = _layer;\n              _ul.appendChild(groupLi);\n              var groupLayers = _layer.getLayers() || [];\n              groupLayers.forEach(function (layer) {\n                groupUl.appendChild(_this._renderLayer(layer, false, groupInput.checked));\n              });\n            })();\n          } else {\n            _ul.appendChild(this._renderLayer(_layer));\n          }\n          if (_layer && !_layer.isVisible()) {\n            input.checked = false;\n          }\n        }\n      }\n      _li.appendChild(_ul);\n      elm.appendChild(_li);\n      input.onchange = groupInputOnChange;\n    }\n  };\n  _proto._isExcluded = function _isExcluded(layer) {\n    var id = layer.getId(),\n      excludeLayers = this.options['excludeLayers'];\n    return !(excludeLayers.length && excludeLayers.indexOf(id) >= 0);\n  };\n  _proto._renderLayer = function _renderLayer(layer, isBase, parentChecked) {\n    var _this2 = this;\n    if (parentChecked === void 0) {\n      parentChecked = true;\n    }\n    var li = createEl('li', 'layer'),\n      label = createEl('label'),\n      input = createEl('input'),\n      map = this.getMap();\n    var visible = layer.options['visible'];\n    layer.options['visible'] = true;\n    var enabled = layer.isVisible();\n    layer.options['visible'] = visible;\n    li.className = 'layer';\n    if (isBase) {\n      input.type = 'radio';\n      input.name = 'base';\n    } else {\n      input.type = 'checkbox';\n    }\n    input.checked = visible && enabled;\n    if (!parentChecked) {\n      input.checked = false;\n    }\n    if (!enabled) {\n      input.setAttribute('disabled', 'disabled');\n    }\n    input.onchange = function (e) {\n      if (e.target.type === 'radio') {\n        var baseLayer = map.getBaseLayer(),\n          baseLayers = baseLayer.layers;\n        if (baseLayers) {\n          for (var i = 0, len = baseLayers.length; i < len; i++) {\n            var _baseLayer = baseLayers[i];\n            _baseLayer[_baseLayer === layer ? 'show' : 'hide']();\n          }\n        } else if (!baseLayer.isVisible()) {\n          baseLayer.show();\n        }\n        map._fireEvent('setbaselayer');\n      } else {\n        layer[e.target.checked ? 'show' : 'hide']();\n      }\n      _this2.fire('layerchange', {\n        target: layer\n      });\n    };\n    li.appendChild(input);\n    label.innerHTML = layer.getId();\n    li.appendChild(label);\n    li._layer = layer;\n    return li;\n  };\n  return LayerSwitcher;\n}(Control);\nLayerSwitcher.mergeOptions(options$p);\nMap$1.mergeOptions({\n  'layerSwitcherControl': false\n});\nMap$1.addOnLoadHook(function () {\n  if (this.options['layerSwitcherControl']) {\n    this.layerSwitcherControl = new LayerSwitcher(this.options['layerSwitcherControl']);\n    this.addControl(this.layerSwitcherControl);\n  }\n});\n\nvar options$q = {\n  'level': 4,\n  'position': {\n    'right': 1,\n    'bottom': 1\n  },\n  'size': [300, 200],\n  'maximize': true,\n  'symbol': {\n    'lineWidth': 3,\n    'lineColor': '#1bbc9b',\n    'polygonFill': '#1bbc9b',\n    'polygonOpacity': 0.4\n  },\n  'containerClass': 'maptalks-overview',\n  'buttonClass': 'maptalks-overview-button'\n};\nvar Overview = function (_Control) {\n  _inheritsLoose(Overview, _Control);\n  function Overview() {\n    return _Control.apply(this, arguments) || this;\n  }\n  var _proto = Overview.prototype;\n  _proto.buildOn = function buildOn() {\n    var size = this.options['size'];\n    if (!this.options['maximize']) {\n      size = [0, 0];\n    }\n    var container = createEl('div');\n    var mapContainer = this.mapContainer = createEl('div');\n    mapContainer.style.width = size[0] + 'px';\n    mapContainer.style.height = size[1] + 'px';\n    mapContainer.className = this.options['containerClass'];\n    var button = this.button = createEl('div');\n    button.className = this.options['buttonClass'];\n    container.appendChild(mapContainer);\n    container.appendChild(button);\n    return container;\n  };\n  _proto.onAdd = function onAdd() {\n    if (this.options['maximize']) {\n      this._createOverview();\n    }\n    this.getMap().on('resize moving zooming rotate dragrotating viewchange', this._update, this).on('setbaselayer', this._updateBaseLayer, this).on('spatialreferencechange', this._updateSpatialReference, this);\n    on(this.button, 'click', this._onButtonClick, this);\n    this._updateButtonText();\n  };\n  _proto.onRemove = function onRemove() {\n    this.getMap().off('resize moving zooming rotate dragrotating viewchange', this._update, this).off('setbaselayer', this._updateBaseLayer, this).off('spatialreferencechange', this._updateSpatialReference, this);\n    if (this._overview) {\n      this._overview.remove();\n      delete this._overview;\n      delete this._perspective;\n    }\n    off(this.button, 'click', this._onButtonClick, this);\n  };\n  _proto.maxmize = function maxmize() {\n    var size = this.options['size'];\n    var dom = this.mapContainer;\n    dom.style.width = size[0] + 'px';\n    dom.style.height = size[1] + 'px';\n    this._createOverview();\n    return this;\n  };\n  _proto.minimize = function minimize() {\n    if (this._overview) {\n      this._overview.remove();\n    }\n    delete this._overview;\n    delete this._perspective;\n    var dom = this.mapContainer;\n    dom.style.width = 0 + 'px';\n    dom.style.height = 0 + 'px';\n    return this;\n  };\n  _proto.getOverviewMap = function getOverviewMap() {\n    return this._overview;\n  };\n  _proto._onButtonClick = function _onButtonClick() {\n    if (!this._overview) {\n      this.maxmize();\n    } else {\n      this.minimize();\n    }\n    this._updateButtonText();\n  };\n  _proto._updateButtonText = function _updateButtonText() {\n    if (this._overview) {\n      this.button.innerHTML = '-';\n    } else {\n      this.button.innerHTML = '+';\n    }\n  };\n  _proto._createOverview = function _createOverview() {\n    var map = this.getMap(),\n      dom = this.mapContainer;\n    var options = map.config();\n    extend(options, {\n      'center': map.getCenter(),\n      'zoom': this._getOverviewZoom(),\n      'zoomAnimationDuration': 150,\n      'pitch': 0,\n      'bearing': 0,\n      'scrollWheelZoom': false,\n      'checkSize': false,\n      'doubleClickZoom': false,\n      'touchZoom': false,\n      'control': false,\n      'draggable': false,\n      'maxExtent': null\n    });\n    this._overview = new Map$1(dom, options);\n    this._updateBaseLayer();\n    this._perspective = new Polygon(this._getPerspectiveCoords(), {\n      'draggable': true,\n      'cursor': 'move',\n      'symbol': this.options['symbol']\n    }).on('dragend', this._onDragEnd, this);\n    new VectorLayer('perspective_layer', this._perspective).addTo(this._overview);\n    this.fire('load');\n  };\n  _proto._getOverviewZoom = function _getOverviewZoom() {\n    var map = this.getMap(),\n      zoom = map.getZoom(),\n      minZoom = map.getMinZoom(),\n      level = this.options['level'];\n    if (level > 0) {\n      for (var i = level; i > 0; i--) {\n        if (zoom - i >= minZoom) {\n          return zoom - i;\n        }\n      }\n    } else {\n      for (var _i = level; _i < 0; _i++) {\n        if (zoom - _i >= minZoom) {\n          return zoom - _i;\n        }\n      }\n    }\n    return zoom;\n  };\n  _proto._onDragEnd = function _onDragEnd() {\n    var center = this._perspective.getCenter();\n    this._overview.setCenter(center);\n    this.getMap().panTo(center);\n  };\n  _proto._getPerspectiveCoords = function _getPerspectiveCoords() {\n    var map = this.getMap();\n    var projection = map.getProjection();\n    return map.getContainerExtent().toArray().map(function (c) {\n      if (projection) {\n        var prjCoord = map._containerPointToPrj(c);\n        map._fixPrjOnWorldWide(prjCoord);\n        return projection.unproject(prjCoord);\n      }\n      return map.containerPointToCoordinate(c);\n    });\n  };\n  _proto._update = function _update() {\n    if (!this._overview) {\n      return;\n    }\n    computeDomPosition(this._overview._containerDOM);\n    var coords = this._getPerspectiveCoords();\n    this._perspective.setCoordinates(coords);\n    this._overview.setCenterAndZoom(this.getMap().getCenter(), this._getOverviewZoom());\n  };\n  _proto._updateSpatialReference = function _updateSpatialReference() {\n    if (!this._overview) {\n      return;\n    }\n    var map = this.getMap();\n    var spatialRef = map.options['spatialReference'];\n    this._overview.setSpatialReference(spatialRef);\n  };\n  _proto._updateBaseLayer = function _updateBaseLayer() {\n    if (!this._overview) {\n      return;\n    }\n    var map = this.getMap(),\n      baseLayer = map.getBaseLayer();\n    if (!baseLayer) {\n      this._overview.setBaseLayer(null);\n      return;\n    }\n    var layers = baseLayer.layers;\n    var showIndex = 0;\n    if (layers) {\n      for (var i = 0, l = layers.length; i < l; i++) {\n        var _layer = layers[i];\n        if (_layer.isVisible()) {\n          showIndex = i;\n          break;\n        }\n      }\n    }\n    var json = baseLayer.toJSON();\n    var options = null;\n    if (layers) {\n      options = json.layers[showIndex].options;\n      options.visible = true;\n    } else {\n      options = json.options;\n    }\n    this._overview.setMinZoom(options.minZoom || null).setMaxZoom(options.maxZoom || null);\n    delete options.minZoom;\n    delete options.maxZoom;\n    delete json.options.canvas;\n    json.options.visible = true;\n    json.options.renderer = 'canvas';\n    var layer = Layer.fromJSON(json);\n    for (var p in baseLayer) {\n      if (isFunction(baseLayer[p]) && baseLayer.hasOwnProperty(p) && baseLayer[p] !== baseLayer.constructor.prototype[p]) {\n        layer[p] = baseLayer[p];\n      }\n    }\n    this._overview.setBaseLayer(layer);\n  };\n  return Overview;\n}(Control);\nOverview.mergeOptions(options$q);\nMap$1.mergeOptions({\n  'overviewControl': false\n});\nMap$1.addOnLoadHook(function () {\n  if (this.options['overviewControl']) {\n    this.overviewControl = new Overview(this.options['overviewControl']);\n    this.addControl(this.overviewControl);\n  }\n});\n\nvar options$r = {\n  'position': 'top-right',\n  'draggable': true,\n  'custom': false,\n  'content': '',\n  'closeButton': true\n};\nvar Panel = function (_Control) {\n  _inheritsLoose(Panel, _Control);\n  function Panel() {\n    return _Control.apply(this, arguments) || this;\n  }\n  var _proto = Panel.prototype;\n  _proto.buildOn = function buildOn() {\n    var dom;\n    if (this.options['custom']) {\n      if (isString(this.options['content'])) {\n        dom = createEl('div');\n        dom.innerHTML = this.options['content'];\n      } else {\n        dom = this.options['content'];\n      }\n    } else {\n      dom = createEl('div', 'maptalks-panel');\n      if (this.options['closeButton']) {\n        var closeButton = createEl('a', 'maptalks-close');\n        closeButton.innerText = '×';\n        closeButton.href = 'javascript:;';\n        closeButton.onclick = function () {\n          dom.style.display = 'none';\n        };\n        dom.appendChild(closeButton);\n      }\n      var panelContent = createEl('div', 'maptalks-panel-content');\n      panelContent.innerHTML = this.options['content'];\n      dom.appendChild(panelContent);\n    }\n    this.draggable = new DragHandler(dom, {\n      'cancelOn': this._cancelOn.bind(this),\n      'ignoreMouseleave': true\n    });\n    this.draggable.on('dragstart', this._onDragStart, this).on('dragging', this._onDragging, this).on('dragend', this._onDragEnd, this);\n    if (this.options['draggable']) {\n      this.draggable.enable();\n    }\n    return dom;\n  };\n  _proto.update = function update() {\n    if (this.draggable) {\n      this.draggable.disable();\n      delete this.draggable;\n    }\n    return Control.prototype.update.call(this);\n  };\n  _proto.setContent = function setContent(content) {\n    var old = this.options['content'];\n    this.options['content'] = content;\n    this.fire('contentchange', {\n      'old': old,\n      'new': content\n    });\n    if (this.isVisible()) {\n      this.update();\n    }\n    return this;\n  };\n  _proto.getContent = function getContent() {\n    return this.options['content'];\n  };\n  _proto._cancelOn = function _cancelOn(domEvent) {\n    var target = domEvent.srcElement || domEvent.target,\n      tagName = target.tagName.toLowerCase();\n    if (tagName === 'button' || tagName === 'input' || tagName === 'select' || tagName === 'option' || tagName === 'textarea') {\n      return true;\n    }\n    return false;\n  };\n  _proto._onDragStart = function _onDragStart(param) {\n    this._startPos = param['mousePos'];\n    this._startPosition = extend({}, this.getPosition());\n    this.fire('dragstart', param);\n  };\n  _proto._onDragging = function _onDragging(param) {\n    var pos = param['mousePos'];\n    var offset = pos.sub(this._startPos);\n    var startPosition = this._startPosition;\n    var position = this.getPosition();\n    if (!isNil(position['top'])) {\n      position['top'] = parseInt(startPosition['top']) + offset.y;\n    }\n    if (!isNil(position['bottom'])) {\n      position['bottom'] = parseInt(startPosition['bottom']) - offset.y;\n    }\n    if (!isNil(position['left'])) {\n      position['left'] = parseInt(startPosition['left']) + offset.x;\n    }\n    if (!isNil(position['right'])) {\n      position['right'] = parseInt(startPosition['right']) - offset.x;\n    }\n    this.setPosition(position);\n    this.fire('dragging', param);\n  };\n  _proto._onDragEnd = function _onDragEnd(param) {\n    delete this._startPos;\n    delete this._startPosition;\n    this.fire('dragend', param);\n  };\n  _proto._getConnectPoints = function _getConnectPoints() {\n    var map = this.getMap();\n    var containerPoint = this.getContainerPoint();\n    var dom = this.getDOM(),\n      width = parseInt(dom.clientWidth),\n      height = parseInt(dom.clientHeight);\n    var anchors = [map.containerPointToCoordinate(containerPoint.add(width / 2, 0)), map.containerPointToCoordinate(containerPoint.add(width, height / 2)), map.containerPointToCoordinate(containerPoint.add(width / 2, height)), map.containerPointToCoordinate(containerPoint.add(0, height / 2))];\n    return anchors;\n  };\n  return Panel;\n}(Control);\nPanel.mergeOptions(options$r);\n\nvar options$s = {\n  position: {\n    'top': 156,\n    'left': 20\n  },\n  view: null\n};\nvar Reset = function (_Control) {\n  _inheritsLoose(Reset, _Control);\n  function Reset() {\n    return _Control.apply(this, arguments) || this;\n  }\n  var _proto = Reset.prototype;\n  _proto.buildOn = function buildOn() {\n    var reset = this._getReset();\n    this._reset = reset;\n    this._registerDomEvents();\n    return reset;\n  };\n  _proto.onAdd = function onAdd() {\n    this._view = !this.options.view ? this.getMap().getView() : this.options.view;\n  };\n  _proto.setView = function setView(view) {\n    this._view = view;\n  };\n  _proto._getReset = function _getReset() {\n    var reset = createEl('div', 'maptalks-reset');\n    return reset;\n  };\n  _proto._registerDomEvents = function _registerDomEvents() {\n    on(this._reset, 'click', this._resetView, this);\n  };\n  _proto.onRemove = function onRemove() {\n    delete this._reset;\n    delete this._view;\n  };\n  _proto._resetView = function _resetView() {\n    this.getMap().setView(this._view);\n  };\n  return Reset;\n}(Control);\nReset.mergeOptions(options$s);\nMap$1.mergeOptions({\n  'resetControl': false\n});\nMap$1.addOnLoadHook(function () {\n  if (this.options['resetControl']) {\n    this.resetControl = new Reset(this.options['resetControl']);\n    this.addControl(this.resetControl);\n  }\n});\n\nvar options$t = {\n  'position': 'bottom-left',\n  'maxWidth': 100,\n  'metric': true,\n  'imperial': false,\n  'containerClass': null\n};\nvar EVENTS_TO_LISTEN = 'zoomend moving moveend';\nvar Scale = function (_Control) {\n  _inheritsLoose(Scale, _Control);\n  function Scale() {\n    return _Control.apply(this, arguments) || this;\n  }\n  var _proto = Scale.prototype;\n  _proto.buildOn = function buildOn(map) {\n    this._map = map;\n    this._scaleContainer = createEl('div', this.options['containerClass']);\n    this._addScales();\n    map.on(EVENTS_TO_LISTEN, this._update, this);\n    if (this._map._loaded) {\n      this._update();\n    }\n    return this._scaleContainer;\n  };\n  _proto.onRemove = function onRemove() {\n    this.getMap().off(EVENTS_TO_LISTEN, this._update, this);\n  };\n  _proto._addScales = function _addScales() {\n    var css = 'border: 2px solid #000000;border-top: none;line-height: 1.1;padding: 0px;' + 'color: #000000;font-size: 11px;text-align:center;white-space: nowrap;overflow: hidden' + ';-moz-box-sizing: content-box;box-sizing: content-box;background: #fff; background: rgba(255, 255, 255, 0);';\n    if (this.options['metric']) {\n      this._mScale = createElOn('div', this.options['containerClass'] ? null : css, this._scaleContainer);\n    }\n    if (this.options['imperial']) {\n      this._iScale = createElOn('div', this.options['containerClass'] ? null : css, this._scaleContainer);\n    }\n  };\n  _proto._update = function _update() {\n    var map = this._map;\n    var maxMeters = map.pixelToDistance(this.options['maxWidth'], 0);\n    this._updateScales(maxMeters);\n  };\n  _proto._updateScales = function _updateScales(maxMeters) {\n    if (this.options['metric'] && maxMeters) {\n      this._updateMetric(maxMeters);\n    }\n    if (this.options['imperial'] && maxMeters) {\n      this._updateImperial(maxMeters);\n    }\n  };\n  _proto._updateMetric = function _updateMetric(maxMeters) {\n    var meters = this._getRoundNum(maxMeters),\n      label = meters < 1000 ? meters + ' m' : meters / 1000 + ' km';\n    this._updateScale(this._mScale, label, meters / maxMeters);\n  };\n  _proto._updateImperial = function _updateImperial(maxMeters) {\n    var maxFeet = maxMeters * 3.2808399;\n    var maxMiles, miles, feet;\n    if (maxFeet > 5280) {\n      maxMiles = maxFeet / 5280;\n      miles = this._getRoundNum(maxMiles);\n      this._updateScale(this._iScale, miles + ' mile', miles / maxMiles);\n    } else {\n      feet = this._getRoundNum(maxFeet);\n      this._updateScale(this._iScale, feet + ' feet', feet / maxFeet);\n    }\n  };\n  _proto._updateScale = function _updateScale(scale, text, ratio) {\n    scale['style']['width'] = Math.round(this.options['maxWidth'] * ratio) + 'px';\n    scale['innerHTML'] = text;\n  };\n  _proto._getRoundNum = function _getRoundNum(num) {\n    var pow10 = Math.pow(10, (Math.floor(num) + '').length - 1);\n    var d = num / pow10;\n    d = d >= 10 ? 10 : d >= 5 ? 5 : d >= 3 ? 3 : d >= 2 ? 2 : 1;\n    return pow10 * d;\n  };\n  return Scale;\n}(Control);\nScale.mergeOptions(options$t);\nMap$1.mergeOptions({\n  'scaleControl': false\n});\nMap$1.addOnLoadHook(function () {\n  if (this.options['scaleControl']) {\n    this.scaleControl = new Scale(this.options['scaleControl']);\n    this.addControl(this.scaleControl);\n  }\n});\n\nvar options$u = {\n  'height': 28,\n  'vertical': false,\n  'position': 'top-right',\n  'reverseMenu': false,\n  'items': {}\n};\nvar Toolbar = function (_Control) {\n  _inheritsLoose(Toolbar, _Control);\n  function Toolbar() {\n    return _Control.apply(this, arguments) || this;\n  }\n  var _proto = Toolbar.prototype;\n  _proto.buildOn = function buildOn(map) {\n    this._map = map;\n    var dom = createEl('div');\n    var ul = createEl('ul', 'maptalks-toolbar-hx');\n    dom.appendChild(ul);\n    if (this.options['vertical']) {\n      addClass(dom, 'maptalks-toolbar-vertical');\n    } else {\n      addClass(dom, 'maptalks-toolbar-horizonal');\n    }\n    var me = this;\n    function onButtonClick(fn, index, childIndex, targetDom) {\n      var item = me._getItems()[index];\n      return function (e) {\n        stopPropagation(e);\n        return fn({\n          'target': item,\n          'index': index,\n          'childIndex': childIndex,\n          'dom': targetDom\n        });\n      };\n    }\n    var items = this.options['items'];\n    if (isArrayHasData(items)) {\n      for (var i = 0, len = items.length; i < len; i++) {\n        var item = items[i];\n        var li = createEl('li');\n        if (this.options['height'] !== 28) {\n          li.style.lineHeight = this.options['height'] + 'px';\n        }\n        li.style.height = this.options['height'] + 'px';\n        li.style.cursor = 'pointer';\n        if (isHTML(item['item'])) {\n          li.style.textAlign = 'center';\n          var itemSize = measureDom('div', item['item']);\n          li.innerHTML = '<div style=\"margin-top:' + (this.options['height'] - itemSize['height']) / 2 + 'px;\">' + item['item'] + '</div>';\n        } else {\n          li.innerHTML = item['item'];\n        }\n        if (item['click']) {\n          on(li, 'click', onButtonClick(item['click'], i, null, li));\n        }\n        if (isArrayHasData(item['children'])) {\n          var dropMenu = this._createDropMenu(i);\n          li.appendChild(dropMenu);\n          li._menu = dropMenu;\n          on(li, 'mouseover', function () {\n            this._menu.style.display = '';\n          });\n          on(li, 'mouseout', function () {\n            this._menu.style.display = 'none';\n          });\n        }\n        ul.appendChild(li);\n      }\n    }\n    return dom;\n  };\n  _proto._createDropMenu = function _createDropMenu(index) {\n    var me = this;\n    function onButtonClick(fn, index, childIndex) {\n      var item = me._getItems()[index]['children'][childIndex];\n      return function (e) {\n        stopPropagation(e);\n        return fn({\n          'target': item,\n          'index': index,\n          'childIndex': childIndex\n        });\n      };\n    }\n    var menuDom = createEl('div', 'maptalks-dropMenu'),\n      items = this._getItems(),\n      len = items.length,\n      menuUL = createEl('ul'),\n      children = items[index]['children'];\n    if (index === len - 1 && children) {\n      menuDom.style.cssText = 'right: 0px;';\n      menuUL.style.cssText = 'right: 0px;position: absolute;';\n      if (this.options['reverseMenu']) {\n        menuUL.style.bottom = 0;\n      }\n    }\n    menuDom.appendChild(createEl('em', 'maptalks-ico'));\n    var liWidth = 0;\n    for (var i = 0, l = children.length; i < l; i++) {\n      var size = stringLength(children[i]['item'], '12px');\n      if (size.width > liWidth) {\n        liWidth = size.width;\n      }\n    }\n    for (var _i = 0, _l = children.length; _i < _l; _i++) {\n      var child = children[_i];\n      var li = createEl('li');\n      li.innerHTML = '<a href=\"javascript:;\">' + child['item'] + '</a>';\n      li.style.cursor = 'pointer';\n      li.style.width = liWidth + 24 + 'px';\n      on(li.childNodes[0], 'click', onButtonClick(child['click'], index, _i));\n      menuUL.appendChild(li);\n    }\n    if (this.options['vertical']) {\n      var width = liWidth < 95 ? 95 : liWidth;\n      if (this.options['reverseMenu']) {\n        menuDom.style.right = -(width + 10 * 2 + 2) + 'px';\n      } else {\n        menuDom.style.left = -(width + 10 * 2 + 2) + 'px';\n      }\n    } else if (this.options['reverseMenu']) {\n      menuDom.style.bottom = '28px';\n    } else {\n      menuDom.style.top = '29px';\n    }\n    menuDom.appendChild(menuUL);\n    menuDom.style.display = 'none';\n    return menuDom;\n  };\n  _proto._getItems = function _getItems() {\n    return this.options['items'] || [];\n  };\n  return Toolbar;\n}(Control);\nToolbar.mergeOptions(options$u);\n\nvar options$v = {\n  'position': 'top-left',\n  'zoomLevel': true,\n  'seamless': false\n};\nvar Zoom = function (_Control) {\n  _inheritsLoose(Zoom, _Control);\n  function Zoom() {\n    return _Control.apply(this, arguments) || this;\n  }\n  var _proto = Zoom.prototype;\n  _proto.buildOn = function buildOn(map) {\n    var options = this.options;\n    var dom = createEl('div', 'maptalks-zoom');\n    if (options['zoomLevel']) {\n      var levelWrapper = createEl('span', 'maptalks-zoom-zoomlevel');\n      var levelDOM = createEl('span', 'maptalks-zoom-zoomlevel-text');\n      levelWrapper.appendChild(levelDOM);\n      dom.appendChild(levelWrapper);\n      this._levelDOM = levelDOM;\n    }\n    var zoomDOM = createEl('div', 'maptalks-zoom-slider');\n    var zoomInButton = createEl('a', 'maptalks-zoom-zoomin');\n    zoomInButton.href = 'javascript:;';\n    zoomDOM.appendChild(zoomInButton);\n    this._zoomInButton = zoomInButton;\n    var zoomOutButton = createEl('a', 'maptalks-zoom-zoomout');\n    zoomOutButton.href = 'javascript:;';\n    zoomDOM.appendChild(zoomOutButton);\n    this._zoomOutButton = zoomOutButton;\n    dom.appendChild(zoomDOM);\n    map.on('_zoomend _zooming _zoomstart _spatialreferencechange', this._update, this);\n    this._update();\n    this._registerDomEvents();\n    return dom;\n  };\n  _proto.onRemove = function onRemove() {\n    this.getMap().off('_zoomend _zooming _zoomstart _spatialreferencechange', this._update, this);\n  };\n  _proto._update = function _update() {\n    this._updateText();\n  };\n  _proto._updateText = function _updateText() {\n    if (this._levelDOM) {\n      var map = this.getMap();\n      var zoom = map.getZoom();\n      if (!isInteger(zoom)) {\n        zoom = Math.floor(zoom * 10) / 10;\n      }\n      this._levelDOM.innerHTML = zoom;\n    }\n  };\n  _proto._registerDomEvents = function _registerDomEvents() {\n    if (this._zoomInButton) {\n      on(this._zoomInButton, 'click', this._onZoomInClick, this);\n    }\n    if (this._zoomOutButton) {\n      on(this._zoomOutButton, 'click', this._onZoomOutClick, this);\n    }\n  };\n  _proto._onZoomInClick = function _onZoomInClick(e) {\n    preventDefault(e);\n    this.getMap().zoomIn();\n  };\n  _proto._onZoomOutClick = function _onZoomOutClick(e) {\n    preventDefault(e);\n    this.getMap().zoomOut();\n  };\n  return Zoom;\n}(Control);\nZoom.mergeOptions(options$v);\nMap$1.mergeOptions({\n  'zoomControl': false\n});\nMap$1.addOnLoadHook(function () {\n  if (this.options['zoomControl']) {\n    this.zoomControl = new Zoom(this.options['zoomControl']);\n    this.addControl(this.zoomControl);\n  }\n});\n\n\n\nvar index$5 = /*#__PURE__*/Object.freeze({\n  Control: Control,\n  Attribution: Attribution,\n  Compass: Compass,\n  LayerSwitcher: LayerSwitcher,\n  Overview: Overview,\n  Panel: Panel,\n  Reset: Reset,\n  Scale: Scale,\n  Toolbar: Toolbar,\n  Zoom: Zoom\n});\n\nvar TileSystem = function () {\n  function TileSystem(sx, sy, ox, oy) {\n    if (Array.isArray(sx)) {\n      this.scale = {\n        x: sx[0],\n        y: sx[1]\n      };\n      this.origin = {\n        x: sx[2],\n        y: sx[3]\n      };\n    } else {\n      this.scale = {\n        x: sx,\n        y: sy\n      };\n      this.origin = {\n        x: ox,\n        y: oy\n      };\n    }\n  }\n  TileSystem.getDefault = function getDefault(projection) {\n    var code = projection['code'].toLowerCase();\n    if (code === 'baidu') {\n      return 'baidu';\n    } else if (code === 'EPSG:4326'.toLowerCase() || code === 'EPSG:4490'.toLowerCase()) {\n      return 'tms-global-geodetic';\n    } else if (code === 'identity') {\n      return [1, -1, 0, 0];\n    } else {\n      return 'web-mercator';\n    }\n  };\n  return TileSystem;\n}();\nvar semiCircum = 6378137 * Math.PI;\nextend(TileSystem, {\n  'web-mercator': new TileSystem([1, -1, -semiCircum, semiCircum]),\n  'tms-global-mercator': new TileSystem([1, 1, -semiCircum, -semiCircum]),\n  'tms-global-geodetic': new TileSystem([1, 1, -180, -90]),\n  'baidu': new TileSystem([1, 1, 0, 0])\n});\n\nvar TileConfig = function () {\n  function TileConfig(map, tileSystem, fullExtent, tileSize) {\n    this.map = map;\n    this.tileSize = tileSize;\n    this.fullExtent = fullExtent;\n    this.prepareTileInfo(tileSystem, fullExtent);\n    this._xScale = fullExtent['right'] >= fullExtent['left'] ? 1 : -1;\n    this._yScale = fullExtent['top'] >= fullExtent['bottom'] ? 1 : -1;\n    var glRes = map.getGLRes();\n    this._pointOrigin = map._prjToPointAtRes(new Point(this.tileSystem['origin']), glRes);\n    this._glRes = glRes;\n  }\n  var _proto = TileConfig.prototype;\n  _proto.prepareTileInfo = function prepareTileInfo(tileSystem, fullExtent) {\n    if (isString(tileSystem)) {\n      tileSystem = TileSystem[tileSystem.toLowerCase()];\n    } else if (Array.isArray(tileSystem)) {\n      tileSystem = new TileSystem(tileSystem);\n    }\n    if (!tileSystem) {\n      throw new Error('Invalid TileSystem');\n    }\n    this.tileSystem = tileSystem;\n    var a = fullExtent['right'] > fullExtent['left'] ? 1 : -1,\n      b = fullExtent['top'] > fullExtent['bottom'] ? -1 : 1,\n      c = tileSystem['origin']['x'],\n      d = tileSystem['origin']['y'];\n    this.transformation = new Transformation([a, b, c, d]);\n  };\n  _proto._getTileNum = function _getTileNum(point, res) {\n    var tileSystem = this.tileSystem,\n      tileSize = this['tileSize'],\n      delta = 1E-7;\n    var tileX = Math.floor(delta * tileSystem['scale']['x'] + point.x / (tileSize['width'] * res));\n    var tileY = Math.ceil(delta * tileSystem['scale']['y'] + point.y / (tileSize['height'] * res));\n    return {\n      'x': tileSystem['scale']['x'] * tileX,\n      'y': tileSystem['scale']['y'] * tileY\n    };\n  };\n  _proto.getTileIndex = function getTileIndex(pCoord, res, repeatWorld) {\n    var tileSystem = this.tileSystem;\n    var point = this.transformation.transform(pCoord, 1);\n    var tileIndex = this._getTileNum(point, res);\n    if (tileSystem['scale']['x'] < 0) {\n      tileIndex['x'] -= 1;\n    }\n    if (tileSystem['scale']['y'] > 0) {\n      tileIndex['y'] -= 1;\n    }\n    return this.getNeighorTileIndex(tileIndex['x'], tileIndex['y'], 0, 0, res, repeatWorld);\n  };\n  _proto.getNeighorTileIndex = function getNeighorTileIndex(tileX, tileY, offsetX, offsetY, res, repeatWorld) {\n    var tileSystem = this.tileSystem;\n    var x = tileX + tileSystem['scale']['x'] * offsetX;\n    var y = tileY - tileSystem['scale']['y'] * offsetY;\n    var out = false;\n    var idx = x;\n    var idy = y;\n    var ext = this._getTileFullIndex(res);\n    if (repeatWorld) {\n      if (repeatWorld === true || repeatWorld === 'x') {\n        if (ext['xmax'] === ext['xmin']) {\n          x = ext['xmin'];\n        } else if (x < ext['xmin']) {\n          x = ext['xmax'] - (ext['xmin'] - x) % (ext['xmax'] - ext['xmin']);\n          if (x === ext['xmax']) {\n            x = ext['xmin'];\n          }\n        } else if (x >= ext['xmax']) {\n          x = ext['xmin'] + (x - ext['xmin']) % (ext['xmax'] - ext['xmin']);\n        }\n      }\n      if (repeatWorld === true || repeatWorld === 'y') {\n        if (ext['ymax'] === ext['ymin']) {\n          y = ext['ymin'];\n        } else if (y >= ext['ymax']) {\n          y = ext['ymin'] + (y - ext['ymin']) % (ext['ymax'] - ext['ymin']);\n        } else if (y < ext['ymin']) {\n          y = ext['ymax'] - (ext['ymin'] - y) % (ext['ymax'] - ext['ymin']);\n          if (y === ext['ymax']) {\n            y = ext['ymin'];\n          }\n        }\n      }\n    }\n    if (x < ext['xmin'] || x > ext['xmax'] || y > ext['ymax'] || y < ext['ymin']) {\n      out = true;\n    }\n    return {\n      'x': x,\n      'y': y,\n      'idx': idx,\n      'idy': idy,\n      out: out\n    };\n  };\n  _proto._getTileFullIndex = function _getTileFullIndex(res) {\n    if (!this._tileFullIndex) {\n      this._tileFullIndex = {};\n    }\n    if (this._tileFullIndex[res]) {\n      return this._tileFullIndex[res];\n    }\n    var ext = this.fullExtent;\n    var transformation = this.transformation;\n    var nwIndex = this._getTileNum(transformation.transform(new Coordinate(ext['left'], ext['top']), 1), res);\n    var seIndex = this._getTileNum(transformation.transform(new Coordinate(ext['right'], ext['bottom']), 1), res);\n    var tileSystem = this.tileSystem;\n    if (tileSystem['scale']['x'] < 0) {\n      nwIndex.x -= 1;\n      seIndex.x -= 1;\n    }\n    if (tileSystem['scale']['y'] > 0) {\n      nwIndex.y -= 1;\n      seIndex.y -= 1;\n    }\n    this._tileFullIndex[res] = new Extent(nwIndex, seIndex);\n    return this._tileFullIndex[res];\n  };\n  _proto.getTilePrjNW = function getTilePrjNW(tileX, tileY, res, out) {\n    var tileSystem = this.tileSystem;\n    var tileSize = this['tileSize'];\n    var y = tileSystem['origin']['y'] + this._yScale * tileSystem['scale']['y'] * (tileY + (tileSystem['scale']['y'] === 1 ? 1 : 0)) * res * tileSize['height'];\n    var x = tileSystem['origin']['x'] + this._xScale * tileSystem['scale']['x'] * (tileX + (tileSystem['scale']['x'] === 1 ? 0 : 1)) * res * tileSize['width'];\n    if (out) {\n      out.set(x, y);\n      return out;\n    }\n    return new Coordinate(x, y);\n  };\n  _proto.getTilePointNW = function getTilePointNW(tileX, tileY, res, out) {\n    var scale = this._glRes / res;\n    var tileSystem = this.tileSystem;\n    var tileSize = this['tileSize'];\n    var y = this._pointOrigin.y * scale + this._yScale * tileSystem['scale']['y'] * (tileY + (tileSystem['scale']['y'] === 1 ? 1 : 0)) * tileSize['height'];\n    var x = this._pointOrigin.x * scale + this._xScale * tileSystem['scale']['x'] * (tileX + (tileSystem['scale']['x'] === 1 ? 0 : 1)) * tileSize['width'];\n    if (out) {\n      out.set(x, y);\n      return out;\n    }\n    return new Point(x, y);\n  };\n  _proto.getTilePrjSE = function getTilePrjSE(tileX, tileY, res, out) {\n    var tileSystem = this.tileSystem;\n    var tileSize = this['tileSize'];\n    var y = tileSystem['origin']['y'] + this._yScale * tileSystem['scale']['y'] * (tileY + (tileSystem['scale']['y'] === 1 ? 0 : 1)) * res * tileSize['height'];\n    var x = tileSystem['origin']['x'] + this._xScale * tileSystem['scale']['x'] * (tileX + (tileSystem['scale']['x'] === 1 ? 1 : 0)) * res * tileSize['width'];\n    if (out) {\n      out.set(x, y);\n      return out;\n    }\n    return new Coordinate(x, y);\n  };\n  _proto.getTilePointSE = function getTilePointSE(tileX, tileY, res, out) {\n    var scale = this._glRes / res;\n    var tileSystem = this.tileSystem;\n    var tileSize = this['tileSize'];\n    var y = this._pointOrigin.y * scale + this._yScale * tileSystem['scale']['y'] * (tileY + (tileSystem['scale']['y'] === 1 ? 0 : 1)) * tileSize['height'];\n    var x = this._pointOrigin.x * scale + this._xScale * tileSystem['scale']['x'] * (tileX + (tileSystem['scale']['x'] === 1 ? 1 : 0)) * tileSize['width'];\n    if (out) {\n      out.set(x, y);\n      return out;\n    }\n    return new Point(x, y);\n  };\n  _proto.getTilePrjExtent = function getTilePrjExtent(tileX, tileY, res) {\n    var nw = this.getTilePrjNW(tileX, tileY, res),\n      se = this.getTilePrjSE(tileX, tileY, res);\n    return new Extent(nw, se);\n  };\n  return TileConfig;\n}();\n\nvar DEFAULT_MAXERROR = 1;\nvar TEMP_POINT$2 = new Point(0, 0);\nvar MAX_ROOT_NODES = 32;\nvar isSetAvailable = typeof Set !== 'undefined';\nvar TileHashset = function () {\n  function TileHashset() {\n    this._table = isSetAvailable ? new Set() : {};\n  }\n  var _proto = TileHashset.prototype;\n  _proto.add = function add$$1(key) {\n    if (isSetAvailable) {\n      this._table.add(key);\n    } else {\n      this._table[key] = true;\n    }\n  };\n  _proto.has = function has(key) {\n    if (isSetAvailable) {\n      return this._table.has(key);\n    } else {\n      return this._table[key];\n    }\n  };\n  _proto.reset = function reset() {\n    if (isSetAvailable) {\n      this._table.clear();\n    } else {\n      this._table = {};\n    }\n  };\n  return TileHashset;\n}();\nvar options$w = {\n  'urlTemplate': null,\n  'subdomains': null,\n  'errorUrl': null,\n  'repeatWorld': true,\n  'background': true,\n  'loadingLimitOnInteracting': 3,\n  'loadingLimit': 0,\n  'tileRetryCount': 0,\n  'placeholder': false,\n  'crossOrigin': null,\n  'tileSize': [256, 256],\n  'offset': [0, 0],\n  'tileSystem': null,\n  'fadeAnimation': !IS_NODE,\n  'fadeDuration': 1000 / 60 * 10,\n  'debug': false,\n  'spatialReference': null,\n  'maxCacheSize': 256,\n  'renderer': function () {\n    return Browser$1.webgl ? 'gl' : 'canvas';\n  }(),\n  'clipByPitch': true,\n  'maxAvailableZoom': null,\n  'cascadeTiles': true,\n  'zoomOffset': 0,\n  'pyramidMode': 1,\n  'decodeImageInWorker': false,\n  'tileLimitPerFrame': 0,\n  'tileStackStartDepth': 7,\n  'tileStackDepth': 3,\n  'awareOfTerrain': true\n};\nvar URL_PATTERN$1 = /\\{ *([\\w_]+) *\\}/g;\nvar TEMP_POINT0$4 = new Point(0, 0);\nvar TEMP_POINT1$1 = new Point(0, 0);\nvar TEMP_POINT2$1 = new Point(0, 0);\nvar TEMP_POINT3$1 = new Point(0, 0);\nvar TEMP_POINT4 = new Point(0, 0);\nvar TEMP_POINT6 = new Point(0, 0);\nvar TILE_BOX = [[0, 0, 0], [0, 0, 0]];\nvar TILE_MIN = [0, 0, 0];\nvar TILE_MAX = [0, 0, 0];\nvar ARR3 = [];\nvar TileLayer = function (_Layer) {\n  _inheritsLoose(TileLayer, _Layer);\n  function TileLayer() {\n    return _Layer.apply(this, arguments) || this;\n  }\n  TileLayer.fromJSON = function fromJSON(layerJSON) {\n    if (!layerJSON || layerJSON['type'] !== 'TileLayer') {\n      return null;\n    }\n    return new TileLayer(layerJSON['id'], layerJSON['options']);\n  };\n  var _proto2 = TileLayer.prototype;\n  _proto2.forceReload = function forceReload() {\n    this.fire('forcereloadstart');\n    this.clear();\n    this.load();\n    this.fire('forcereloadend');\n    return this;\n  };\n  _proto2.getTileSize = function getTileSize() {\n    if (this._tileSize) {\n      return this._tileSize;\n    }\n    var size = this.options['tileSize'];\n    if (isNumber(size)) {\n      size = [size, size];\n    }\n    this._tileSize = new Size(size);\n    return this._tileSize;\n  };\n  _proto2.getTiles = function getTiles(z, parentLayer) {\n    this._coordCache = {};\n    if (this._isPyramidMode()) {\n      return this._getPyramidTiles(z, parentLayer);\n    } else {\n      return this._getCascadeTiles(z, parentLayer);\n    }\n  };\n  _proto2._isPyramidMode = function _isPyramidMode() {\n    var sr = this.getSpatialReference();\n    return !this._disablePyramid && !this._hasOwnSR && this.options['pyramidMode'] && sr && sr.isPyramid();\n  };\n  _proto2._getTileFullExtent = function _getTileFullExtent() {\n    if (this._tileFullExtent) {\n      return this._tileFullExtent;\n    }\n    var sr = this.getSpatialReference();\n    var fullExtent = sr.getFullExtent();\n    var res = sr.getResolution(0);\n    var map = this.getMap();\n    this._tileFullExtent = fullExtent.convertTo(function (c) {\n      return map._prjToPointAtRes(c, res, TEMP_POINT$2);\n    });\n    return this._tileFullExtent;\n  };\n  _proto2._getRootNodes = function _getRootNodes(offset0) {\n    var map = this.getMap();\n    if (this._rootNodes) {\n      var _this$_rootNodes = this._rootNodes,\n        _tiles = _this$_rootNodes.tiles,\n        mapWidth = _this$_rootNodes.mapWidth,\n        mapHeight = _this$_rootNodes.mapHeight;\n      if (map.width !== mapWidth || map.height !== mapHeight) {\n        var _error = this._getRootError();\n        for (var i = 0; i < _tiles.length; i++) {\n          _tiles[i].error = _error;\n        }\n        this._rootNodes.mapWidth = map.width;\n        this._rootNodes.mapHeight = map.height;\n      }\n      for (var _i = 0; _i < _tiles.length; _i++) {\n        _tiles[_i].offset[0] = offset0[0];\n        _tiles[_i].offset[1] = offset0[1];\n      }\n      return this._rootNodes;\n    }\n    var sr = this.getSpatialReference();\n    var res = sr.getResolution(0);\n    var tileConfig = this._getTileConfig();\n    var fullExtent = sr.getFullExtent();\n    var _tileConfig$tileSyste = tileConfig.tileSystem,\n      origin = _tileConfig$tileSyste.origin,\n      scale = _tileConfig$tileSyste.scale;\n    var extent000 = tileConfig.getTilePrjExtent(0, 0, res);\n    var w = extent000.getWidth();\n    var h = extent000.getHeight();\n    var delta = 1E-5;\n    var left = Math.abs((origin.x - fullExtent.left) / w);\n    left = Math.ceil(left - delta);\n    var right = Math.abs((fullExtent.right - origin.x) / w);\n    right = Math.ceil(right - delta);\n    var top = Math.ceil(Math.abs(fullExtent.top - origin.y) / h);\n    top = Math.ceil(top - delta);\n    var bottom = Math.ceil(Math.abs(fullExtent.bottom - origin.y) / h);\n    bottom = Math.ceil(bottom - delta);\n    if ((right + left) * (bottom + top) > MAX_ROOT_NODES) {\n      return {\n        status: 0,\n        error: 'Too many root nodes'\n      };\n    }\n    var error = this._getRootError();\n    var tiles = [];\n    var z = 0;\n    var zoomOffset = this.options['zoomOffset'];\n    for (var _i2 = -left; _i2 < right; _i2++) {\n      for (var j = -top; j < bottom; j++) {\n        var y = scale.y < 0 ? j : -(j + 1);\n        tiles.push({\n          x: _i2,\n          y: y,\n          z: z,\n          idx: _i2,\n          idy: y,\n          res: res,\n          extent2d: tileConfig.getTilePrjExtent(_i2, y, res).convertTo(function (c) {\n            return map._prjToPointAtRes(c, res, TEMP_POINT$2);\n          }),\n          id: this._getTileId(_i2, y, z),\n          url: this.getTileUrl(_i2, y, z + zoomOffset),\n          offset: [0, 0],\n          error: error,\n          children: []\n        });\n      }\n    }\n    this._rootNodes = {\n      status: 1,\n      tiles: tiles,\n      mapWidth: map.width,\n      mapHeight: map.height\n    };\n    return this._getRootNodes(offset0);\n  };\n  _proto2._getRootError = function _getRootError() {\n    var map = this.getMap();\n    var fov = toRadian(map.getFov());\n    var aspectRatio = map.width / map.height;\n    var cameraZ = map.cameraPosition[2];\n    var heightZ = cameraZ * Math.tan(0.5 * fov);\n    var widthZ = heightZ * aspectRatio;\n    var diagonalZ = Math.sqrt(cameraZ * cameraZ + heightZ * heightZ + widthZ * widthZ);\n    var fov0 = map._getFovZ(0);\n    var error = fov0 * (diagonalZ / cameraZ);\n    var sr = this.getSpatialReference();\n    var res = sr.getResolution(0);\n    return error * res / map.getResolution(0);\n  };\n  _proto2._getPyramidTiles = function _getPyramidTiles(z, layer) {\n    var map = this.getMap();\n    if (isNaN(+z)) {\n      z = this._getTileZoom(map.getZoom());\n    }\n    var sr = this.getSpatialReference();\n    var maxZoom = Math.min(z, this.getMaxZoom(), this.options['maxAvailableZoom'] || Infinity);\n    var projectionView = map.projViewMatrix;\n    var fullExtent = this._getTileFullExtent();\n    var offset0 = this._getTileOffset(0);\n    var queue;\n    if (this.options['repeatWorld']) {\n      var mapContainerExtent = map.getContainerExtent();\n      var mapExtent2D = this._convertToExtent2d(mapContainerExtent);\n      var scale = sr.getResolution(0) / map.getResolution();\n      if (!mapExtent2D.within(fullExtent.copy()._scale(scale))) {\n        var pitch = map.getPitch();\n        var cascadePitch1 = map.options['cascadePitches'][1];\n        var visualHeight1 = Math.floor(map._getVisualHeight(cascadePitch1));\n        var visualContainerExtent = pitch <= cascadePitch1 ? mapContainerExtent : new PointExtent(0, map.height - visualHeight1, map.width, map.height);\n        this._visitedTiles = new TileHashset();\n        var tileGrid = this._getTiles(0, visualContainerExtent, 2, layer && layer.getRenderer(), true);\n        var error = this._getRootError();\n        tileGrid.tiles.forEach(function (t) {\n          t.error = error;\n        });\n        queue = tileGrid.tiles;\n      } else {\n        var rootNodes = this._getRootNodes(offset0);\n        if (rootNodes.status !== 1) {\n          console.warn(rootNodes.error);\n          this._disablePyramid = true;\n          return this.getTiles(z, layer);\n        }\n        queue = rootNodes.tiles.concat();\n      }\n    } else {\n      var _rootNodes = this._getRootNodes(offset0);\n      if (_rootNodes.status !== 1) {\n        console.warn(_rootNodes.error);\n        this._disablePyramid = true;\n        return this.getTiles(z, layer);\n      }\n      queue = _rootNodes.tiles.concat();\n    }\n    var glRes = map.getGLRes();\n    var offsets = {\n      0: offset0\n    };\n    var extent = new PointExtent();\n    var tiles = [];\n    var parents = [];\n    while (queue.length > 0) {\n      var node = queue.pop();\n      if (node.z === maxZoom) {\n        extent._combine(node.extent2d);\n        tiles.push(node);\n        continue;\n      }\n      if (!offsets[node.z + 1]) {\n        offsets[node.z + 1] = this._getTileOffset(node.z + 1);\n      }\n      this._splitNode(node, projectionView, queue, tiles, extent, maxZoom, offsets[node.z + 1], layer && layer.getRenderer(), glRes);\n      if (this.isParentTile(z, maxZoom, node)) {\n        parents.push(node);\n      }\n    }\n    parents.sort(sortingTiles);\n    return {\n      tileGrids: [{\n        extent: extent,\n        count: tiles.length,\n        tiles: tiles,\n        parents: parents,\n        offset: [0, 0],\n        zoom: z\n      }],\n      count: tiles.length\n    };\n  };\n  _proto2.isParentTile = function isParentTile(z, maxZoom, tile) {\n    var stackMinZoom = Math.max(this.getMinZoom(), z - this.options['tileStackStartDepth']);\n    var stackMaxZoom = Math.min(maxZoom, stackMinZoom + this.options['tileStackDepth']);\n    return tile.z >= stackMinZoom && tile.z < stackMaxZoom;\n  };\n  _proto2._splitNode = function _splitNode(node, projectionView, queue, tiles, gridExtent, maxZoom, offset, parentRenderer, glRes) {\n    var zoomOffset = this.options['zoomOffset'];\n    var tileSystem = this._getTileConfig().tileSystem;\n    var scaleY = tileSystem.scale.y;\n    var z = node.z + 1;\n    var sr = this.getSpatialReference();\n    var x = node.x,\n      y = node.y,\n      extent2d = node.extent2d,\n      idx = node.idx,\n      idy = node.idy;\n    var childScale = 2;\n    var width = extent2d.getWidth() / 2 * childScale;\n    var height = extent2d.getHeight() / 2 * childScale;\n    var minx = extent2d.xmin * childScale;\n    var maxy = extent2d.ymax * childScale;\n    var miny = extent2d.ymin * childScale;\n    var renderer = parentRenderer || this.getRenderer();\n    var hasCurrentIn = false;\n    var children = [];\n    var res = sr.getResolution(z);\n    var glScale = res / glRes;\n    for (var i = 0; i < 4; i++) {\n      var dx = i % 2;\n      var dy = i >> 1;\n      var childX = (x << 1) + dx;\n      var childY = (y << 1) + dy;\n      var childIdx = (idx << 1) + dx;\n      var childIdy = (idy << 1) + dy;\n      if (!node.children) {\n        node.children = [];\n      }\n      var tileId = node.children[i];\n      if (!tileId) {\n        tileId = this._getTileId(childIdx, childIdy, z);\n        node.children[i] = tileId;\n      }\n      var cached = renderer.isTileCachedOrLoading(tileId);\n      var extent = void 0;\n      var childNode = cached && cached.info;\n      if (!childNode) {\n        if (!this.tileInfoCache) {\n          this.tileInfoCache = new LRUCache(this.options['maxCacheSize'] * 4);\n        }\n        childNode = this.tileInfoCache.get(tileId);\n        if (!childNode) {\n          if (scaleY < 0) {\n            var nwx = minx + dx * width;\n            var nwy = maxy - dy * height;\n            extent = new PointExtent(nwx, nwy - height, nwx + width, nwy);\n          } else {\n            var swx = minx + dx * width;\n            var swy = miny + dy * height;\n            extent = new PointExtent(swx, swy, swx + width, swy + height);\n          }\n          childNode = {\n            x: childX,\n            y: childY,\n            idx: childIdx,\n            idy: childIdy,\n            z: z,\n            extent2d: extent,\n            error: node.error / 2,\n            res: res,\n            id: tileId,\n            children: [],\n            url: this.getTileUrl(childX, childY, z + zoomOffset),\n            offset: offset\n          };\n          this.tileInfoCache.add(tileId, childNode);\n        }\n        if (parentRenderer) {\n          childNode['layer'] = this.getId();\n        }\n      }\n      childNode.error = node.error / 2;\n      childNode.offset[0] = offset[0];\n      childNode.offset[1] = offset[1];\n      var visible = this._isTileVisible(childNode, projectionView, glScale, maxZoom, offset);\n      if (visible === 1) {\n        hasCurrentIn = true;\n      } else if (visible === -1) {\n        continue;\n      } else if (visible === 0 && z !== maxZoom) {\n        tiles.push(node);\n        gridExtent._combine(node.extent2d);\n        return;\n      }\n      children.push(childNode);\n    }\n    if (z === maxZoom) {\n      if (hasCurrentIn) {\n        queue.push.apply(queue, children);\n      } else {\n        tiles.push(node);\n        gridExtent._combine(node.extent2d);\n      }\n    } else {\n      queue.push.apply(queue, children);\n    }\n  };\n  _proto2._isTileVisible = function _isTileVisible(node, projectionView, glScale, maxZoom, offset) {\n    if (node.z === 0) {\n      return 1;\n    }\n    if (!this._isTileInFrustum(node, projectionView, glScale, offset)) {\n      return -1;\n    }\n    var maxError = this.options['maxError'];\n    if (isNil(maxError)) {\n      maxError = DEFAULT_MAXERROR;\n    }\n    var error = this._getScreenSpaceError(node, glScale, maxZoom, offset);\n    return error >= maxError ? 1 : 0;\n  };\n  _proto2._isTileInFrustum = function _isTileInFrustum(node, projectionView, glScale, offset) {\n    if (!this._zScale) {\n      var map = this.getMap();\n      var glRes = map.getGLRes();\n      this._zScale = map.altitudeToPoint(100, glRes) / 100;\n    }\n    var renderer = this.getRenderer();\n    var _node$extent2d = node.extent2d,\n      xmin = _node$extent2d.xmin,\n      ymin = _node$extent2d.ymin,\n      xmax = _node$extent2d.xmax,\n      ymax = _node$extent2d.ymax;\n    TILE_BOX[0][0] = (xmin - offset[0]) * glScale;\n    TILE_BOX[0][1] = (ymin - offset[1]) * glScale;\n    var minAltitude = node.minAltitude || renderer && renderer.avgMinAltitude || 0;\n    TILE_BOX[0][2] = minAltitude * this._zScale;\n    TILE_BOX[1][0] = (xmax - offset[0]) * glScale;\n    TILE_BOX[1][1] = (ymax - offset[1]) * glScale;\n    var maxAltitude = node.maxAltitude || renderer && renderer.avgMaxAltitude || 0;\n    TILE_BOX[1][2] = maxAltitude * this._zScale;\n    return intersectsBox(projectionView, TILE_BOX);\n  };\n  _proto2._getScreenSpaceError = function _getScreenSpaceError(node, glScale, maxZoom, offset) {\n    var geometricError = node.error;\n    var map = this.getMap();\n    var _node$extent2d2 = node.extent2d,\n      xmin = _node$extent2d2.xmin,\n      ymin = _node$extent2d2.ymin,\n      xmax = _node$extent2d2.xmax,\n      ymax = _node$extent2d2.ymax;\n    TILE_MIN[0] = (xmin - offset[0]) * glScale;\n    TILE_MIN[1] = (ymin - offset[1]) * glScale;\n    TILE_MAX[0] = (xmax - offset[0]) * glScale;\n    TILE_MAX[1] = (ymax - offset[1]) * glScale;\n    var distanceToCamera = distanceToRect(TILE_MIN, TILE_MAX, map.cameraPosition);\n    var distance$$1 = Math.max(Math.abs(distanceToCamera), 1E-7);\n    var gap = Math.abs(node.z - maxZoom);\n    var r;\n    if (map.height < 1000) {\n      r = 1;\n    } else {\n      r = gap <= 1 ? 1 : gap <= 2 ? 0.7 : 0.605;\n    }\n    var error = geometricError * r / distance$$1;\n    return error;\n  };\n  _proto2._getCascadeTiles = function _getCascadeTiles(z, parentLayer) {\n    var map = this.getMap();\n    var pitch = map.getPitch();\n    var parentRenderer = parentLayer && parentLayer.getRenderer();\n    var mapExtent = map.getContainerExtent();\n    var tileGrids = [];\n    var count = 0;\n    var minZoom = this.getMinZoom();\n    var cascadePitch0 = map.options['cascadePitches'][0];\n    var cascadePitch1 = map.options['cascadePitches'][1];\n    var visualHeight1 = Math.floor(map._getVisualHeight(cascadePitch1));\n    var tileZoom = isNil(z) ? this._getTileZoom(map.getZoom()) : z;\n    this._visitedTiles = new TileHashset();\n    if (!isNil(z) || !this.options['cascadeTiles'] || pitch <= cascadePitch0 || !isNil(minZoom) && tileZoom <= minZoom) {\n      var containerExtent = pitch <= cascadePitch1 ? mapExtent : new PointExtent(0, map.height - visualHeight1, map.width, map.height);\n      var _currentTiles = this._getTiles(tileZoom, containerExtent, 2, parentRenderer);\n      if (_currentTiles) {\n        count += _currentTiles.tiles.length;\n        tileGrids.push(_currentTiles);\n      }\n      return {\n        tileGrids: tileGrids,\n        count: count\n      };\n    }\n    var visualHeight0 = Math.floor(map._getVisualHeight(cascadePitch0));\n    var extent0 = new PointExtent(0, map.height - visualHeight0, map.width, map.height);\n    var currentTiles = this._getTiles(tileZoom, extent0, 0, parentRenderer);\n    count += currentTiles ? currentTiles.tiles.length : 0;\n    tileGrids.push(currentTiles);\n    var cascadeHeight = extent0.ymin;\n    var d = map.getSpatialReference().getZoomDirection();\n    var cascadeLevels = d;\n    var cascadeTiles1;\n    if (pitch > cascadePitch1) {\n      if (tileZoom - cascadeLevels <= minZoom) {\n        cascadeLevels = 0;\n      }\n      var extent1 = new PointExtent(0, map.height - visualHeight1, map.width, cascadeHeight);\n      cascadeTiles1 = this._getTiles(tileZoom - cascadeLevels, extent1, 1, parentRenderer);\n      count += cascadeTiles1 ? cascadeTiles1.tiles.length : 0;\n      cascadeHeight = extent1.ymin;\n      cascadeLevels += 4 * d;\n      tileGrids.push(cascadeTiles1);\n    }\n    var cascadeTiles2;\n    if (tileZoom - cascadeLevels >= minZoom) {\n      var extent2 = new PointExtent(0, mapExtent.ymin, map.width, cascadeHeight);\n      cascadeTiles2 = this._getTiles(tileZoom - cascadeLevels, extent2, 2, parentRenderer);\n      count += cascadeTiles2 ? cascadeTiles2.tiles.length : 0;\n      tileGrids.push(cascadeTiles2);\n    }\n    if (cascadeTiles1 && cascadeTiles2) {\n      tileGrids[1] = cascadeTiles2;\n      tileGrids[2] = cascadeTiles1;\n    }\n    return {\n      tileGrids: tileGrids,\n      count: count\n    };\n  };\n  _proto2.getTileUrl = function getTileUrl(x, y, z) {\n    var urlTemplate = this.options['urlTemplate'];\n    var domain = '';\n    if (this.options['subdomains']) {\n      var subdomains = this.options['subdomains'];\n      if (isArrayHasData(subdomains)) {\n        var length$$1 = subdomains.length;\n        var s = (x + y) % length$$1;\n        if (s < 0) {\n          s = 0;\n        }\n        domain = subdomains[s];\n      }\n    }\n    if (isFunction(urlTemplate)) {\n      return urlTemplate(x, y, z, domain);\n    }\n    var data = {\n      'x': x,\n      'y': y,\n      'z': z,\n      's': domain\n    };\n    if (this.options.token) {\n      data.token = this.options.token;\n    }\n    if (this.options.customTags) {\n      extend(data, this.options.customTags);\n    }\n    return urlTemplate.replace(URL_PATTERN$1, function (str, key) {\n      var value = data[key];\n      if (value === undefined) {\n        throw new Error('No value provided for variable ' + str);\n      } else if (typeof value === 'function') {\n        value = value(data);\n      }\n      return value;\n    });\n  };\n  _proto2.clear = function clear() {\n    if (this._renderer) {\n      this._renderer.clear();\n    }\n    if (this.tileInfoCache) {\n      this.tileInfoCache.reset();\n    }\n    this.fire('clear');\n    return this;\n  };\n  _proto2.toJSON = function toJSON() {\n    var profile = {\n      'type': this.getJSONType(),\n      'id': this.getId(),\n      'options': this.config()\n    };\n    return profile;\n  };\n  _proto2.getSpatialReference = function getSpatialReference() {\n    var map = this.getMap();\n    if (map && (!this.options['spatialReference'] || SpatialReference.equals(this.options['spatialReference'], map.options['spatialReference']))) {\n      return map.getSpatialReference();\n    }\n    if (this._sr) {\n      return this._sr;\n    }\n    var config = this.options['spatialReference'];\n    if (isString(config)) {\n      config = SpatialReference.getPreset(config);\n      if (!config) {\n        throw new Error(\"Unsupported spatial reference: \" + this.options['spatialReference'] + \", possible values: \" + SpatialReference.getAllPresets().join());\n      }\n    }\n    this._sr = new SpatialReference(config);\n    this._srMinZoom = this._sr.getMinZoom();\n    this._srMaxZoom = this._sr.getMaxZoom();\n    this._hasOwnSR = this._sr.toJSON().projection !== map.getSpatialReference().toJSON().projection;\n    return this._sr;\n  };\n  _proto2.getMinZoom = function getMinZoom() {\n    var sr = this.getSpatialReference();\n    if (sr !== this.getMap().getSpatialReference()) {\n      return Math.max(_Layer.prototype.getMinZoom.call(this), this._srMinZoom);\n    }\n    return _Layer.prototype.getMinZoom.call(this);\n  };\n  _proto2.getMaxZoom = function getMaxZoom() {\n    var sr = this.getSpatialReference();\n    if (sr !== this.getMap().getSpatialReference()) {\n      return Math.min(_Layer.prototype.getMaxZoom.call(this), this._srMaxZoom);\n    }\n    return _Layer.prototype.getMaxZoom.call(this);\n  };\n  _proto2._getTileZoom = function _getTileZoom(zoom) {\n    if (!this._hasOwnSR) {\n      var res0 = this.getMap().getResolution(zoom);\n      var res1 = this.getSpatialReference().getResolution(zoom);\n      var dz = Math.log(res1 / res0) * Math.LOG2E;\n      zoom += dz;\n    }\n    var maxZoom = this.options['maxAvailableZoom'];\n    if (!isNil(maxZoom) && zoom > maxZoom) {\n      zoom = maxZoom;\n    }\n    if (!isInteger(zoom)) {\n      zoom = Math.round(zoom);\n    }\n    zoom = Math.max(0, zoom);\n    return zoom;\n  };\n  _proto2._getTiles = function _getTiles(tileZoom, containerExtent, cascadeLevel, parentRenderer, ignoreMinZoom) {\n    var map = this.getMap();\n    var z = tileZoom;\n    var frustumMatrix = map.projViewMatrix;\n    var canSplitTile = map.getResolution(tileZoom) / map.getResolution(tileZoom - 1) === 0.5;\n    if (cascadeLevel < 2) {\n      if (cascadeLevel === 0 && canSplitTile) {\n        z -= 1;\n      }\n      frustumMatrix = cascadeLevel === 0 ? map.cascadeFrustumMatrix0 : cascadeLevel === 1 ? map.cascadeFrustumMatrix1 : map.projViewMatrix;\n    }\n    var zoom = z + this.options['zoomOffset'];\n    var offset = this._getTileOffset(z),\n      hasOffset = offset[0] || offset[1];\n    var emptyGrid = {\n      'zoom': z,\n      'extent': null,\n      'offset': offset,\n      'tiles': []\n    };\n    if (zoom < 0) {\n      return emptyGrid;\n    }\n    if (!map || !this.isVisible() || !map.width || !map.height) {\n      return emptyGrid;\n    }\n    if (!ignoreMinZoom) {\n      var minZoom = this.getMinZoom(),\n        maxZoom = this.getMaxZoom();\n      if (!isNil(minZoom) && z < minZoom || !isNil(maxZoom) && z > maxZoom) {\n        return emptyGrid;\n      }\n    }\n    var tileConfig = this._getTileConfig();\n    if (!tileConfig) {\n      return emptyGrid;\n    }\n    var tileOffsets = {\n      zoom: offset\n    };\n    var sr = this.getSpatialReference();\n    var res = sr.getResolution(z);\n    var glScale;\n    if (this._hasOwnSR) {\n      glScale = map.getGLScale(z);\n    } else {\n      glScale = res / map.getGLRes();\n    }\n    var repeatWorld = !this._hasOwnSR && this.options['repeatWorld'];\n    var extent2d = this._convertToExtent2d(containerExtent);\n    var maskExtent = this._getMask2DExtent();\n    if (maskExtent) {\n      var intersection = maskExtent.intersection(extent2d);\n      if (!intersection) {\n        return emptyGrid;\n      }\n      containerExtent = intersection.convertTo(function (c) {\n        return map._pointToContainerPoint(c, undefined, 0, TEMP_POINT$2);\n      });\n    }\n    var prjCenter = map._containerPointToPrj(containerExtent.getCenter(), TEMP_POINT0$4);\n    var centerPoint = map._prjToPoint(prjCenter, z, TEMP_POINT1$1);\n    var c;\n    if (hasOffset) {\n      c = this._project(map._pointToPrj(centerPoint._add(offset), z, TEMP_POINT1$1), TEMP_POINT1$1);\n    } else {\n      c = this._project(prjCenter, TEMP_POINT1$1);\n    }\n    var extentScale = map.getGLScale() / map.getGLScale(z);\n    TEMP_POINT2$1.x = extent2d.xmin * extentScale;\n    TEMP_POINT2$1.y = extent2d.ymax * extentScale;\n    TEMP_POINT3$1.x = extent2d.xmax * extentScale;\n    TEMP_POINT3$1.y = extent2d.ymin * extentScale;\n    var pmin = this._project(map._pointToPrj(TEMP_POINT2$1._add(offset), z, TEMP_POINT2$1), TEMP_POINT2$1);\n    var pmax = this._project(map._pointToPrj(TEMP_POINT3$1._add(offset), z, TEMP_POINT3$1), TEMP_POINT3$1);\n    var centerTile = tileConfig.getTileIndex(c, res, repeatWorld);\n    var ltTile = tileConfig.getTileIndex(pmin, res, repeatWorld);\n    var rbTile = tileConfig.getTileIndex(pmax, res, repeatWorld);\n    var top = Math.ceil(Math.abs(centerTile.idy - ltTile.idy)),\n      left = Math.ceil(Math.abs(centerTile.idx - ltTile.idx)),\n      bottom = Math.ceil(Math.abs(centerTile.idy - rbTile.idy)),\n      right = Math.ceil(Math.abs(centerTile.idx - rbTile.idx));\n    var allCount = (top + bottom + 1) * (left + right + 1);\n    var tileSize = this.getTileSize();\n    var renderer = this.getRenderer() || parentRenderer,\n      scale = this._getTileConfig().tileSystem.scale;\n    var tiles = [],\n      extent = new PointExtent();\n    var tilePoint = new Point(0, 0);\n    for (var i = -top; i <= bottom; i++) {\n      var j = -left;\n      var leftVisitEnd = -Infinity;\n      var rightVisitEnd = false;\n      while (j >= leftVisitEnd && j <= right) {\n        var idx = tileConfig.getNeighorTileIndex(centerTile.idx, centerTile.idy, j, i, res, repeatWorld);\n        if (leftVisitEnd === -Infinity) {\n          j++;\n        } else {\n          j--;\n        }\n        var tileId = this._getTileId(idx.idx, idx.idy, z);\n        if (idx.out || this._visitedTiles && this._visitedTiles.has(tileId)) {\n          continue;\n        }\n        var tileInfo = renderer && renderer.isTileCachedOrLoading(tileId);\n        if (tileInfo) {\n          tileInfo = tileInfo.info;\n        }\n        var p = void 0;\n        if (tileInfo) {\n          var _tileInfo = tileInfo,\n            _extent2d = _tileInfo.extent2d;\n          tilePoint.set(_extent2d.xmin, _extent2d.ymax);\n          p = tilePoint;\n        } else if (!this._hasOwnSR) {\n          p = tileConfig.getTilePointNW(idx.x, idx.y, res);\n        } else {\n          var pnw = tileConfig.getTilePrjNW(idx.x, idx.y, res);\n          p = map._prjToPoint(this._unproject(pnw, TEMP_POINT3$1), z);\n        }\n        var width = void 0,\n          height = void 0;\n        if (!this._hasOwnSR) {\n          width = tileSize.width;\n          height = tileSize.height;\n        } else {\n          var pp = void 0;\n          if (!this._hasOwnSR) {\n            pp = tileConfig.getTilePointSE(idx.x, idx.y, res);\n          } else {\n            var pse = tileConfig.getTilePrjSE(idx.x, idx.y, res);\n            pp = map._prjToPoint(this._unproject(pse, TEMP_POINT3$1), z, TEMP_POINT3$1);\n          }\n          width = Math.ceil(Math.abs(pp.x - p.x));\n          height = Math.ceil(Math.abs(pp.y - p.y));\n        }\n        var dx = scale.x * (idx.idx - idx.x) * width,\n          dy = scale.y * (idx.idy - idx.y) * height;\n        if (!tileInfo && (dx || dy)) {\n          p._add(dx, dy);\n        }\n        var tileExtent = tileInfo && tileInfo.extent2d || new PointExtent(p.x, p.y - height, p.x + width, p.y);\n        if (allCount <= 4 || rightVisitEnd || this._isTileInExtent(frustumMatrix, tileExtent, offset, glScale)) {\n          var tileRes = this._hasOwnSR ? map._getResolution(z) : res;\n          if (this._visitedTiles && cascadeLevel === 0) {\n            this._visitedTiles.add(tileId);\n          }\n          if (canSplitTile && cascadeLevel === 0) {\n            this._splitTiles(frustumMatrix, tiles, renderer, idx, z + 1, tileRes, tileExtent, dx, dy, tileOffsets, parentRenderer);\n            extent._combine(tileExtent);\n          } else {\n            if (!tileInfo) {\n              tileInfo = {\n                'z': z,\n                'x': idx.x,\n                'y': idx.y,\n                'idx': idx.idx,\n                'idy': idx.idy,\n                'extent2d': tileExtent,\n                'offset': offset,\n                'id': tileId,\n                'res': tileRes,\n                'url': this.getTileUrl(idx.x, idx.y, zoom)\n              };\n              if (parentRenderer) {\n                tileInfo['layer'] = this.getId();\n              }\n            } else {\n              tileInfo.offset[0] = offset[0];\n              tileInfo.offset[1] = offset[1];\n            }\n            tiles.push(tileInfo);\n            extent._combine(tileExtent);\n          }\n          if (leftVisitEnd === -Infinity) {\n            leftVisitEnd = j;\n            j = right;\n          } else if (!rightVisitEnd) {\n            rightVisitEnd = true;\n          }\n        }\n      }\n    }\n    if (tiles.length) {\n      var center = map._containerPointToPoint(containerExtent.getCenter(), z, TEMP_POINT$2)._add(offset);\n      var point0 = new Point(0, 0);\n      var point1 = new Point(0, 0);\n      tiles.sort(function (a, b) {\n        point0.set((a.extent2d.xmin + a.extent2d.xmax) / 2, (a.extent2d.ymin + a.extent2d.ymax) / 2);\n        point1.set((b.extent2d.xmin + b.extent2d.xmax) / 2, (b.extent2d.ymin + b.extent2d.ymax) / 2);\n        return point0.distanceTo(center) - point1.distanceTo(center);\n      });\n    }\n    return {\n      'offset': offset,\n      'zoom': tileZoom,\n      'extent': extent,\n      'tiles': tiles\n    };\n  };\n  _proto2._convertToExtent2d = function _convertToExtent2d(containerExtent) {\n    var _this = this;\n    var map = this.getMap();\n    return containerExtent.convertTo(function (c) {\n      var result;\n      if (c.y > 0 && c.y < map.height) {\n        var key = (c.x === 0 ? 0 : 1) + c.y;\n        if (!_this._coordCache[key]) {\n          _this._coordCache[key] = map._containerPointToPoint(c);\n        }\n        result = _this._coordCache[key];\n      }\n      result = map._containerPointToPoint(c, undefined, TEMP_POINT$2);\n      return result;\n    });\n  };\n  _proto2._splitTiles = function _splitTiles(frustumMatrix, tiles, renderer, tileIdx, z, res, tileExtent, dx, dy, tileOffsets, parentRenderer) {\n    var yOrder = this._getTileConfig().tileSystem.scale.y;\n    var glScale = this.getMap().getGLScale(z);\n    var corner = TEMP_POINT4.set(tileExtent.xmin * 2, yOrder < 0 ? tileExtent.ymax * 2 : tileExtent.ymin * 2);\n    var w = tileExtent.getWidth();\n    var h = tileExtent.getHeight();\n    var idx = tileIdx.idx * 2;\n    var idy = tileIdx.idy * 2;\n    var x = tileIdx.x * 2;\n    var y = tileIdx.y * 2;\n    var tile = this._checkAndAddTile(frustumMatrix, renderer, idx, idy, x, y, z, res, 0, 0, w, h, corner, glScale, tileOffsets, parentRenderer);\n    if (tile) tiles.push(tile);\n    tile = this._checkAndAddTile(frustumMatrix, renderer, idx, idy, x, y, z, res, 0, 1, w, h, corner, glScale, tileOffsets, parentRenderer);\n    if (tile) tiles.push(tile);\n    tile = this._checkAndAddTile(frustumMatrix, renderer, idx, idy, x, y, z, res, 1, 0, w, h, corner, glScale, tileOffsets, parentRenderer);\n    if (tile) tiles.push(tile);\n    tile = this._checkAndAddTile(frustumMatrix, renderer, idx, idy, x, y, z, res, 1, 1, w, h, corner, glScale, tileOffsets, parentRenderer);\n    if (tile) tiles.push(tile);\n  };\n  _proto2._checkAndAddTile = function _checkAndAddTile(frustumMatrix, renderer, idx, idy, x, y, z, res, i, j, w, h, corner, glScale, tileOffsets, parentRenderer) {\n    var tileId = this._getTileId(idx + i, idy + j, z);\n    if (this._visitedTiles && this._visitedTiles.has(tileId)) {\n      return null;\n    }\n    var offset = tileOffsets[z];\n    if (!offset) {\n      offset = tileOffsets[z] = this._getTileOffset(z);\n    }\n    var yOrder = this._getTileConfig().tileSystem.scale.y;\n    var childExtent = new PointExtent(corner.x + i * w, corner.y + yOrder * j * h, corner.x + (i + 1) * w, corner.y + yOrder * (j + 1) * h);\n    if (!this._isSplittedTileInExtent(frustumMatrix, childExtent, offset, glScale)) {\n      return null;\n    }\n    var childRes = res / 2;\n    var tileInfo = renderer && renderer.isTileCachedOrLoading(tileId);\n    if (!tileInfo) {\n      tileInfo = {\n        'z': z,\n        'x': x + i,\n        'y': y + j,\n        'extent2d': childExtent,\n        'id': tileId,\n        'offset': offset,\n        'res': childRes,\n        'url': this.getTileUrl(x + i, y + j, z + this.options['zoomOffset'])\n      };\n      if (parentRenderer) {\n        tileInfo['layer'] = this.getId();\n      }\n    } else {\n      tileInfo = tileInfo.info;\n    }\n    return tileInfo;\n  };\n  _proto2._getTileOffset = function _getTileOffset(z) {\n    var offset = this.options['offset'];\n    if (isFunction(offset)) {\n      offset = offset.call(this, z);\n    }\n    if (isNumber(offset)) {\n      offset = [offset, offset];\n    }\n    return offset || [0, 0];\n  };\n  _proto2._getTileId = function _getTileId(x, y, zoom, id) {\n    return (id || this.getId()) + \"_\" + x + \"_\" + y + \"_\" + zoom;\n  };\n  _proto2._project = function _project(pcoord, out) {\n    if (this._hasOwnSR) {\n      var map = this.getMap();\n      var mapProjection = map.getProjection();\n      var projection = this.getSpatialReference().getProjection();\n      return projection.project(mapProjection.unproject(pcoord, out), out);\n    } else {\n      return pcoord;\n    }\n  };\n  _proto2._unproject = function _unproject(pcoord, out) {\n    if (this._hasOwnSR) {\n      var map = this.getMap();\n      var sr = this.getSpatialReference();\n      var mapProjection = map.getProjection();\n      var projection = sr.getProjection();\n      return mapProjection.project(projection.unproject(pcoord, out), out);\n    } else {\n      return pcoord;\n    }\n  };\n  _proto2._initTileConfig = function _initTileConfig() {\n    var map = this.getMap(),\n      tileSize = this.getTileSize();\n    var sr = this.getSpatialReference();\n    var projection = sr.getProjection(),\n      fullExtent = sr.getFullExtent();\n    this._defaultTileConfig = new TileConfig(map, TileSystem.getDefault(projection), fullExtent, tileSize);\n    if (this.options.hasOwnProperty('tileSystem')) {\n      this._tileConfig = new TileConfig(map, this.options['tileSystem'], fullExtent, tileSize);\n    }\n    delete this._rootNodes;\n    delete this._tileFullExtent;\n    delete this._disablePyramid;\n  };\n  _proto2._getTileConfig = function _getTileConfig() {\n    if (!this._defaultTileConfig) {\n      this._initTileConfig();\n    }\n    return this._tileConfig || this._defaultTileConfig;\n  };\n  _proto2._bindMap = function _bindMap(map) {\n    var baseLayer = map.getBaseLayer();\n    if (baseLayer === this) {\n      if (!baseLayer.options.hasOwnProperty('forceRenderOnMoving')) {\n        this.config({\n          'forceRenderOnMoving': true\n        });\n      }\n    }\n    this._onSpatialReferenceChange();\n    return _Layer.prototype._bindMap.apply(this, arguments);\n  };\n  _proto2._isTileInExtent = function _isTileInExtent(frustumMatrix, tileExtent, offset, glScale) {\n    var map = this.getMap();\n    var matrix;\n    if (frustumMatrix !== map.projViewMatrix) {\n      var tileCenter = tileExtent.getCenter(TEMP_POINT6)._sub(offset[0], offset[1])._multi(glScale);\n      set$2(ARR3, tileCenter.x, tileCenter.y, 0);\n      var ndc = transformMat4(ARR3, ARR3, map.projViewMatrix);\n      matrix = ndc[1] < 0 ? map.projViewMatrix : frustumMatrix;\n    } else {\n      matrix = map.projViewMatrix;\n    }\n    TILE_BOX[0][0] = (tileExtent.xmin - offset[0]) * glScale;\n    TILE_BOX[0][1] = (tileExtent.ymin - offset[1]) * glScale;\n    TILE_BOX[1][0] = (tileExtent.xmax - offset[0]) * glScale;\n    TILE_BOX[1][1] = (tileExtent.ymax - offset[1]) * glScale;\n    return intersectsBox(matrix, TILE_BOX);\n  };\n  _proto2._isSplittedTileInExtent = function _isSplittedTileInExtent(frustumMatrix, tileExtent, offset, glScale) {\n    var map = this.getMap();\n    TILE_BOX[0][0] = (tileExtent.xmin - offset[0]) * glScale;\n    TILE_BOX[0][1] = (tileExtent.ymin - offset[1]) * glScale;\n    TILE_BOX[1][0] = (tileExtent.xmax - offset[0]) * glScale;\n    TILE_BOX[1][1] = (tileExtent.ymax - offset[1]) * glScale;\n    return intersectsBox(map.projViewMatrix, TILE_BOX);\n  };\n  _proto2.getEvents = function getEvents() {\n    return {\n      'spatialreferencechange': this._onSpatialReferenceChange\n    };\n  };\n  _proto2._onSpatialReferenceChange = function _onSpatialReferenceChange() {\n    delete this._tileConfig;\n    delete this._defaultTileConfig;\n    delete this._sr;\n    delete this._srMinZoom;\n    delete this._hasOwnSR;\n    delete this._rootNodes;\n    if (this.tileInfoCache) {\n      this.tileInfoCache.reset();\n    }\n    var renderer = this.getRenderer();\n    if (renderer) {\n      renderer.clear();\n    }\n  };\n  _proto2.getPolygonOffsetCount = function getPolygonOffsetCount() {\n    return 2;\n  };\n  _proto2.getPolygonOffset = function getPolygonOffset() {\n    return this._polygonOffset || 0;\n  };\n  _proto2.setPolygonOffset = function setPolygonOffset(offset) {\n    this._polygonOffset = offset;\n    return this;\n  };\n  return TileLayer;\n}(Layer);\nTileLayer.registerJSONType('TileLayer');\nTileLayer.mergeOptions(options$w);\nfunction distanceToRect(min, max, xyz) {\n  var dx = Math.max(min[0] - xyz[0], 0, xyz[0] - max[0]);\n  var dy = Math.max(min[1] - xyz[1], 0, xyz[1] - max[1]);\n  var dz = Math.max(min[2] - xyz[2], 0, xyz[2] - max[2]);\n  return Math.sqrt(dx * dx + dy * dy + dz * dz);\n}\nfunction sortingTiles(t0, t1) {\n  return t0.z - t1.z;\n}\n\nvar options$x = {\n  'maxCacheSize': 1024\n};\nvar DEFAULT_TILESIZE = new Size(256, 256);\nvar EVENTS$2 = 'show hide remove setzindex forcereloadstart';\nfunction checkLayers(tileLayers) {\n  if (!Array.isArray(tileLayers)) {\n    tileLayers = [tileLayers];\n  }\n  return tileLayers;\n}\nvar GroupTileLayer = function (_TileLayer) {\n  _inheritsLoose(GroupTileLayer, _TileLayer);\n  GroupTileLayer.fromJSON = function fromJSON(layerJSON) {\n    if (!layerJSON || layerJSON['type'] !== 'GroupTileLayer') {\n      return null;\n    }\n    var layers = layerJSON['layers'].map(function (json) {\n      return Layer.fromJSON(json);\n    });\n    return new GroupTileLayer(layerJSON['id'], layers, layerJSON['options']);\n  };\n  function GroupTileLayer(id, layers, options) {\n    var _this;\n    _this = _TileLayer.call(this, id, options) || this;\n    _this.layers = layers || [];\n    _this._checkChildren();\n    _this.layerMap = {};\n    _this._groupChildren = [];\n    return _this;\n  }\n  var _proto = GroupTileLayer.prototype;\n  _proto.getLayers = function getLayers() {\n    return this.layers;\n  };\n  _proto.addLayer = function addLayer(tileLayers) {\n    var _this2 = this;\n    if (tileLayers === void 0) {\n      tileLayers = [];\n    }\n    tileLayers = checkLayers(tileLayers);\n    var len = this.layers.length;\n    tileLayers.forEach(function (tileLayer) {\n      if (!(tileLayer instanceof TileLayer)) {\n        return;\n      }\n      if (_this2.layers.indexOf(tileLayer) === -1 && !_this2.layerMap[tileLayer.getId()]) {\n        _this2.layers.push(tileLayer);\n      }\n    });\n    if (len !== this.layers.length) {\n      this._sortLayers();\n      this._refresh();\n      this._renderLayers();\n    }\n    return this;\n  };\n  _proto.removeLayer = function removeLayer(tileLayers) {\n    var _this3 = this;\n    if (tileLayers === void 0) {\n      tileLayers = [];\n    }\n    tileLayers = checkLayers(tileLayers);\n    var len = this.layers.length;\n    tileLayers.forEach(function (tileLayer) {\n      if (!(tileLayer instanceof TileLayer)) {\n        tileLayer = _this3.layerMap[tileLayer];\n      }\n      if (!(tileLayer instanceof TileLayer)) {\n        return;\n      }\n      var index = _this3.layers.indexOf(tileLayer);\n      if (index >= 0) {\n        _this3.layers.splice(index, 1);\n        tileLayer._doRemove();\n        tileLayer.off(EVENTS$2, _this3._onLayerShowHide, _this3);\n      }\n    });\n    if (len !== this.layers.length) {\n      this._refresh();\n      this._renderLayers();\n    }\n    return this;\n  };\n  _proto.clearLayers = function clearLayers() {\n    var _this4 = this;\n    this.layers.forEach(function (layer) {\n      layer._doRemove();\n      layer.off(EVENTS$2, _this4._onLayerShowHide, _this4);\n    });\n    this.layers = [];\n    this._refresh();\n    this._renderLayers();\n    return this;\n  };\n  _proto.toJSON = function toJSON() {\n    var profile = {\n      'type': this.getJSONType(),\n      'id': this.getId(),\n      'layers': this.layers.map(function (layer) {\n        return layer.toJSON();\n      }),\n      'options': this.config()\n    };\n    return profile;\n  };\n  _proto.getTileSize = function getTileSize(id) {\n    var layer = this.getLayer(id);\n    if (!layer) {\n      return DEFAULT_TILESIZE;\n    }\n    return layer.getTileSize();\n  };\n  _proto.getTiles = function getTiles(z, parentLayer) {\n    var layers = this.layers;\n    var tiles = [];\n    var count = 0;\n    for (var i = 0, l = layers.length; i < l; i++) {\n      var layer = layers[i];\n      if (!layer || !layer.options['visible'] || !layer.isVisible() || !layer.getMap()) {\n        continue;\n      }\n      var childGrid = layer.getTiles(z, parentLayer || this);\n      if (!childGrid || childGrid.count === 0) {\n        continue;\n      }\n      count += childGrid.count;\n      pushIn(tiles, childGrid.tileGrids);\n    }\n    return {\n      count: count,\n      tileGrids: tiles\n    };\n  };\n  _proto.onAdd = function onAdd() {\n    this._sortLayers();\n    this._refresh();\n    _TileLayer.prototype.onAdd.call(this);\n  };\n  _proto.onRemove = function onRemove() {\n    var _this5 = this;\n    this.layers.forEach(function (layer) {\n      layer._doRemove();\n      layer.off(EVENTS$2, _this5._onLayerShowHide, _this5);\n    });\n    this.layerMap = {};\n    this._groupChildren = [];\n    _TileLayer.prototype.onRemove.call(this);\n  };\n  _proto.getLayer = function getLayer(id) {\n    return this.getChildLayer(id);\n  };\n  _proto.getChildLayer = function getChildLayer(id) {\n    var layer = this.layerMap[id];\n    if (layer) {\n      return layer;\n    }\n    for (var i = 0; i < this._groupChildren.length; i++) {\n      var child = this._groupChildren[i].getChildLayer(id);\n      if (child) {\n        return child;\n      }\n    }\n    return null;\n  };\n  _proto._removeChildTileCache = function _removeChildTileCache(layer) {\n    if (!layer) {\n      return this;\n    }\n    var renderer = this.getRenderer();\n    if (!renderer) {\n      return this;\n    }\n    var cache;\n    var id = layer.getId();\n    var validateCache = function validateCache() {\n      return cache && cache.info && cache.info.layer === id;\n    };\n    if (renderer.tileCache) {\n      var keys = renderer.tileCache.keys();\n      keys.forEach(function (key) {\n        cache = renderer.tileCache.get(key);\n        if (validateCache()) {\n          renderer.tileCache.remove(key);\n        }\n      });\n    }\n    var tilesInView = renderer.tilesInView || {};\n    for (var key in tilesInView) {\n      cache = tilesInView[key];\n      if (validateCache()) {\n        delete tilesInView[key];\n      }\n    }\n    var tilesLoading = renderer.tilesLoading || {};\n    for (var _key in tilesLoading) {\n      cache = tilesLoading[_key];\n      if (validateCache()) {\n        renderer.abortTileLoading(cache.image, cache.info);\n      }\n    }\n    return this;\n  };\n  _proto._onLayerShowHide = function _onLayerShowHide(e) {\n    var _ref = e || {},\n      type = _ref.type,\n      target = _ref.target;\n    if (type === 'remove' && target) {\n      this.layers.splice(this.layers.indexOf(target), 1);\n      target._doRemove();\n      target.off(EVENTS$2, this._onLayerShowHide, this);\n      this._refresh();\n    } else if (type === 'setzindex') {\n      this._sortLayers();\n    } else if (type === 'forcereloadstart') {\n      this._removeChildTileCache(target);\n    }\n    this._renderLayers();\n    return this;\n  };\n  _proto._renderLayers = function _renderLayers() {\n    var renderer = this.getRenderer();\n    if (renderer) {\n      renderer.setToRedraw();\n    }\n    return this;\n  };\n  _proto._refresh = function _refresh() {\n    var _this6 = this;\n    var map = this.getMap();\n    this._groupChildren = [];\n    this.layerMap = {};\n    this.layers.forEach(function (layer) {\n      _this6.layerMap[layer.getId()] = layer;\n      if (layer.getChildLayer) {\n        _this6._groupChildren.push(layer);\n      }\n      if (!layer.getMap()) {\n        layer._bindMap(map);\n      }\n      layer.off(EVENTS$2, _this6._onLayerShowHide, _this6);\n      layer.on(EVENTS$2, _this6._onLayerShowHide, _this6);\n    });\n    return this;\n  };\n  _proto.isVisible = function isVisible() {\n    if (!_TileLayer.prototype.isVisible.call(this)) {\n      return false;\n    }\n    var children = this.layers;\n    for (var i = 0, l = children.length; i < l; i++) {\n      if (children[i].isVisible()) {\n        return true;\n      }\n    }\n    return false;\n  };\n  _proto._checkChildren = function _checkChildren() {\n    var _this7 = this;\n    var ids = {};\n    this.layers.forEach(function (layer) {\n      var layerId = layer.getId();\n      if (ids[layerId]) {\n        throw new Error(\"Duplicate child layer id (\" + layerId + \") in the GroupTileLayer (\" + _this7.getId() + \")\");\n      } else {\n        ids[layerId] = 1;\n      }\n    });\n  };\n  _proto._sortLayers = function _sortLayers() {\n    this.layers.sort(function (a, b) {\n      return a.options.zIndex - b.options.zIndex;\n    });\n  };\n  return GroupTileLayer;\n}(TileLayer);\nGroupTileLayer.registerJSONType('GroupTileLayer');\nGroupTileLayer.mergeOptions(options$x);\n\nvar options$y = {\n  crs: null,\n  uppercase: false,\n  detectRetina: false\n};\nvar defaultWmsParams = {\n  service: 'WMS',\n  request: 'GetMap',\n  layers: '',\n  styles: '',\n  format: 'image/jpeg',\n  transparent: false,\n  version: '1.1.1'\n};\nvar wmsExcludeParams;\nvar WMSTileLayer = function (_TileLayer) {\n  _inheritsLoose(WMSTileLayer, _TileLayer);\n  function WMSTileLayer(id, options) {\n    var _this;\n    _this = _TileLayer.call(this, id) || this;\n    if (!wmsExcludeParams) {\n      wmsExcludeParams = extend({}, _this.options);\n    }\n    _this.wmsParams = extend({}, defaultWmsParams);\n    _this.setOptions(options);\n    _this.setZIndex(options.zIndex);\n    if (!Browser$1.proxy) {\n      _this._optionsHook(options);\n    }\n    return _this;\n  }\n  var _proto = WMSTileLayer.prototype;\n  _proto._optionsHook = function _optionsHook(options) {\n    if (options === void 0) {\n      options = {};\n    }\n    for (var p in options) {\n      if (p === 'tileSize') {\n        this._tileSize = null;\n      }\n      if (!(p in wmsExcludeParams)) {\n        this.wmsParams[p] = options[p];\n      }\n    }\n    var tileSize = this.getTileSize();\n    this.wmsParams.width = tileSize.width;\n    this.wmsParams.height = tileSize.height;\n    this._wmsVersion = parseFloat(this.wmsParams.version);\n    return this;\n  };\n  _proto.onAdd = function onAdd() {\n    var dpr = this.getMap().getDevicePixelRatio();\n    var r = options$y.detectRetina ? dpr : 1;\n    this.wmsParams.width *= r;\n    this.wmsParams.height *= r;\n    var crs = this.options.crs || this.getMap().getProjection().code;\n    var projectionKey = this._wmsVersion >= 1.3 ? 'crs' : 'srs';\n    this.wmsParams[projectionKey] = crs;\n    _TileLayer.prototype.onAdd.call(this);\n  };\n  _proto.getTileUrl = function getTileUrl(x, y, z) {\n    var res = this.getSpatialReference().getResolution(z),\n      tileConfig = this._getTileConfig(),\n      tileExtent = tileConfig.getTilePrjExtent(x, y, res);\n    var max = tileExtent.getMax(),\n      min = tileExtent.getMin();\n    var bbox = (this._wmsVersion >= 1.3 && (this.wmsParams.crs === 'EPSG:4326' || this.wmsParams.crs === 'EPSG:4490') ? [min.y, min.x, max.y, max.x] : [min.x, min.y, max.x, max.y]).join(',');\n    var url = _TileLayer.prototype.getTileUrl.call(this, x, y, z);\n    return url + getParamString(this.wmsParams, url, this.options.uppercase) + (this.options.uppercase ? '&BBOX=' : '&bbox=') + bbox;\n  };\n  _proto.toJSON = function toJSON() {\n    return {\n      'type': 'WMSTileLayer',\n      'id': this.getId(),\n      'options': this.config()\n    };\n  };\n  WMSTileLayer.fromJSON = function fromJSON(layerJSON) {\n    if (!layerJSON || layerJSON['type'] !== 'WMSTileLayer') {\n      return null;\n    }\n    return new WMSTileLayer(layerJSON['id'], layerJSON['options']);\n  };\n  return WMSTileLayer;\n}(TileLayer);\nWMSTileLayer.registerJSONType('WMSTileLayer');\nWMSTileLayer.mergeOptions(options$y);\nfunction getParamString(obj, existingUrl, uppercase) {\n  var params = [];\n  for (var i in obj) {\n    params.push(encodeURIComponent(uppercase ? i.toUpperCase() : i) + '=' + encodeURIComponent(obj[i]));\n  }\n  return (!existingUrl || existingUrl.indexOf('?') === -1 ? '?' : '&') + params.join('&');\n}\n\nvar CanvasTileLayer = function (_TileLayer) {\n  _inheritsLoose(CanvasTileLayer, _TileLayer);\n  function CanvasTileLayer(id, options) {\n    var _this;\n    _this = _TileLayer.call(this, id, options) || this;\n    if (!_this.options.hasOwnProperty('forceRenderOnMoving')) {\n      _this.options['forceRenderOnMoving'] = false;\n    }\n    return _this;\n  }\n  var _proto = CanvasTileLayer.prototype;\n  _proto.drawTile = function drawTile() {};\n  _proto.toJSON = function toJSON() {\n    return {\n      'type': 'CanvasTileLayer',\n      'id': this.getId(),\n      'options': this.config()\n    };\n  };\n  CanvasTileLayer.fromJSON = function fromJSON(layerJSON) {\n    if (!layerJSON || layerJSON['type'] !== 'CanvasTileLayer') {\n      return null;\n    }\n    return new CanvasTileLayer(layerJSON['id'], layerJSON['options']);\n  };\n  return CanvasTileLayer;\n}(TileLayer);\nCanvasTileLayer.registerJSONType('CanvasTileLayer');\n\nfunction createGLContext(canvas, options) {\n  var attributes = {\n    'alpha': true,\n    'stencil': true,\n    'preserveDrawingBuffer': true,\n    'antialias': false\n  };\n  var names = ['webgl', 'experimental-webgl'];\n  var context = null;\n  for (var i = 0; i < names.length; ++i) {\n    try {\n      context = canvas.getContext(names[i], options || attributes);\n    } catch (e) {}\n    if (context) {\n      break;\n    }\n  }\n  return context;\n}\nfunction compileShader(gl, type, source) {\n  var shader = gl.createShader(type);\n  gl.shaderSource(shader, source);\n  gl.compileShader(shader);\n  var compiled = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\n  if (!compiled) {\n    var error = gl.getShaderInfoLog(shader);\n    gl.deleteShader(shader);\n    throw new Error('Failed to compile shader: ' + error);\n  }\n  return shader;\n}\nfunction createProgram(gl, vert, frag) {\n  var vertexShader = compileShader(gl, gl.VERTEX_SHADER, vert);\n  var fragmentShader = compileShader(gl, gl.FRAGMENT_SHADER, frag);\n  if (!vertexShader || !fragmentShader) {\n    return null;\n  }\n  var program = gl.createProgram();\n  if (!program) {\n    return null;\n  }\n  gl.attachShader(program, vertexShader);\n  gl.attachShader(program, fragmentShader);\n  gl.linkProgram(program);\n  return {\n    program: program,\n    vertexShader: vertexShader,\n    fragmentShader: fragmentShader\n  };\n}\nfunction enableVertexAttrib(gl, program, attributes) {\n  if (Array.isArray(attributes[0])) {\n    var FSIZE = Float32Array.BYTES_PER_ELEMENT;\n    var STRIDE = 0;\n    for (var i = 0; i < attributes.length; i++) {\n      STRIDE += attributes[i][1] || 0;\n    }\n    var offset = 0;\n    for (var _i = 0; _i < attributes.length; _i++) {\n      var attr = gl.getAttribLocation(program, attributes[_i][0]);\n      if (attr < 0) {\n        throw new Error('Failed to get the storage location of ' + attributes[_i][0]);\n      }\n      gl.vertexAttribPointer(attr, attributes[_i][1], gl[attributes[_i][2] || 'FLOAT'], false, FSIZE * STRIDE, FSIZE * offset);\n      offset += attributes[_i][1] || 0;\n      gl.enableVertexAttribArray(attr);\n    }\n  } else {\n    var _attr = gl.getAttribLocation(program, attributes[0]);\n    gl.vertexAttribPointer(_attr, attributes[1], gl[attributes[2] || 'FLOAT'], false, 0, 0);\n    gl.enableVertexAttribArray(_attr);\n  }\n}\nvar DEPTH_FUNC_CONSTANTS = {\n  'never': 0x0200,\n  '<': 0x0201,\n  '=': 0x0202,\n  '<=': 0x0203,\n  '>': 0x0204,\n  '!=': 0x0205,\n  '>=': 0x0206,\n  'always': 0x0207\n};\nfunction getDepthFunc(v) {\n  return DEPTH_FUNC_CONSTANTS[v];\n}\n\nvar DEFAULT_BASE_COLOR = [1, 1, 1, 1];\nvar shaders = {\n  'vertexShader': \"\\n        attribute vec2 a_position;\\n\\n        attribute vec2 a_texCoord;\\n\\n        uniform mat4 u_matrix;\\n\\n        varying vec2 v_texCoord;\\n\\n        void main() {\\n            gl_Position = u_matrix * vec4(a_position, 0., 1.);\\n\\n            v_texCoord = a_texCoord;\\n        }\\n    \",\n  'fragmentShader': \"\\n        precision mediump float;\\n\\n        uniform sampler2D u_image;\\n\\n        uniform float u_opacity;\\n        uniform float u_debug_line;\\n        uniform vec4 u_base_color;\\n        uniform float u_alpha_test;\\n        varying vec2 v_texCoord;\\n\\n        void main() {\\n            if (u_debug_line == 1.) {\\n                gl_FragColor = vec4(0., 1., 0., 1.);\\n            } else {\\n                gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;\\n            }\\n            gl_FragColor *= u_base_color;\\n            if (gl_FragColor.a < u_alpha_test) {\\n                discard;\\n            }\\n        }\\n    \"\n};\nvar v2 = [0, 0],\n  v3 = [0, 0, 0],\n  arr16 = new Array(16);\nvar DEBUG_POINT = new Point(20, 20);\nvar ImageGLRenderable = function ImageGLRenderable(Base) {\n  var renderable = function (_Base) {\n    _inheritsLoose(renderable, _Base);\n    function renderable() {\n      return _Base.apply(this, arguments) || this;\n    }\n    var _proto = renderable.prototype;\n    _proto.drawGLImage = function drawGLImage(image, x, y, w, h, scale$$1, opacity, debug, baseColor) {\n      if (this.gl.program !== this.program) {\n        this.useProgram(this.program);\n      }\n      var gl = this.gl;\n      this.loadTexture(image);\n      var inGroup = this.canvas.gl && this.canvas.gl.wrap;\n      if (inGroup) {\n        var layerOpacity = this.layer && this.layer.options['opacity'];\n        if (isNil(layerOpacity)) {\n          layerOpacity = 1;\n        }\n        opacity *= layerOpacity;\n      }\n      v3[0] = x || 0;\n      v3[1] = y || 0;\n      v3[2] = 0;\n      var layer = this.layer;\n      if (layer) {\n        var altitude = layer.options.altitude;\n        var altIsNumber = isNumber(altitude);\n        if (!altIsNumber) {\n          this._layerAlt = 0;\n        }\n        if (this._layerAltitude !== altitude && altIsNumber) {\n          var map = layer.getMap();\n          if (map) {\n            var z = map.altitudeToPoint(altitude, map.getGLRes());\n            this._layerAltitude = altitude;\n            this._layerAlt = z;\n          }\n        }\n      }\n      v3[2] = this._layerAlt || 0;\n      var uMatrix = identity(arr16);\n      translate(uMatrix, uMatrix, v3);\n      scale(uMatrix, uMatrix, [scale$$1, scale$$1, 1]);\n      multiply(uMatrix, this.getMap().projViewMatrix, uMatrix);\n      gl.uniformMatrix4fv(this.program['u_matrix'], false, uMatrix);\n      gl.uniform1f(this.program['u_opacity'], opacity);\n      gl.uniform1f(this.program['u_debug_line'], 0);\n      gl.uniform4fv(this.program['u_base_color'], baseColor || DEFAULT_BASE_COLOR);\n      gl.uniform1f(this.program['u_alpha_test'], this.layer.options['alphaTest'] || 0);\n      var glBuffer = image.glBuffer;\n      if (glBuffer && (glBuffer.width !== w || glBuffer.height !== h)) {\n        this.saveImageBuffer(glBuffer);\n        delete image.glBuffer;\n      }\n      if (!image.glBuffer) {\n        image.glBuffer = this.bufferTileData(0, 0, w, h);\n      } else {\n        gl.bindBuffer(gl.ARRAY_BUFFER, glBuffer);\n      }\n      v2[0] = 'a_position';\n      v2[1] = 2;\n      v2[2] = image.glBuffer.type;\n      this.enableVertexAttrib(v2);\n      gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n      if (debug) {\n        this.drawDebug(uMatrix, 0, 0, w, h, debug);\n      }\n    };\n    _proto.drawDebug = function drawDebug(uMatrix, x, y, w, h, debugInfo) {\n      var gl = this.gl;\n      gl.disable(gl.DEPTH_TEST);\n      gl.bindBuffer(gl.ARRAY_BUFFER, this._debugBuffer);\n      this.enableVertexAttrib(['a_position', 2, 'FLOAT']);\n      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([x, y, x + w, y, x + w, y - h, x, y - h, x, y]), gl.DYNAMIC_DRAW);\n      gl.uniformMatrix4fv(this.program['u_matrix'], false, uMatrix);\n      gl.uniform1f(this.program['u_opacity'], 1);\n      gl.uniform1f(this.program['u_debug_line'], 1);\n      gl.uniform4fv(this.program['u_base_color'], DEFAULT_BASE_COLOR);\n      gl.uniform1f(this.program['u_alpha_test'], this.layer.options['alphaTest'] || 0);\n      gl.drawArrays(gl.LINE_STRIP, 0, 5);\n      var canvas = this._debugInfoCanvas;\n      if (!canvas) {\n        var dpr = this.getMap().getDevicePixelRatio() > 1 ? 2 : 1;\n        canvas = this._debugInfoCanvas = document.createElement('canvas');\n        canvas.width = 256 * dpr;\n        canvas.height = 32 * dpr;\n        var _ctx = canvas.getContext('2d');\n        _ctx.font = '20px monospace';\n        _ctx.scale(dpr, dpr);\n      }\n      var ctx = canvas.getContext('2d');\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n      var color = this.layer.options['debugOutline'];\n      Canvas.fillText(ctx, debugInfo, DEBUG_POINT, color);\n      this.loadTexture(canvas);\n      gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, canvas);\n      w = 256;\n      var x1 = x;\n      var x2 = x + w;\n      var y1 = y - h + 32;\n      var y2 = y - h;\n      gl.bufferData(gl.ARRAY_BUFFER, this.set8(x1, y1, x1, y2, x2, y1, x2, y2), gl.DYNAMIC_DRAW);\n      gl.uniform1f(this.program['u_debug_line'], 0);\n      gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n      gl.enable(gl.DEPTH_TEST);\n    };\n    _proto.bufferTileData = function bufferTileData(x, y, w, h, buffer) {\n      var x1 = x;\n      var x2 = x + w;\n      var y1 = y;\n      var y2 = y - h;\n      var data;\n      if (isInteger(x1) && isInteger(x2) && isInteger(y1) && isInteger(y2)) {\n        data = this.set8Int(x1, y1, x1, y2, x2, y1, x2, y2);\n      } else {\n        data = this.set8(x1, y1, x1, y2, x2, y1, x2, y2);\n      }\n      var glBuffer = this.loadImageBuffer(data, buffer);\n      glBuffer.width = w;\n      glBuffer.height = h;\n      glBuffer.type = data instanceof Int16Array ? 'SHORT' : 'FLOAT';\n      return glBuffer;\n    };\n    _proto.drawTinImage = function drawTinImage(image, vertices, texCoords, indices, opacity) {\n      var gl = this.gl;\n      this.loadTexture(image);\n      gl.uniformMatrix4fv(this.program['u_matrix'], false, this.getMap().projViewMatrix);\n      gl.uniform1f(this.program['u_opacity'], opacity);\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.posBuffer);\n      this.enableVertexAttrib(['a_position', 3]);\n      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.DYNAMIC_DRAW);\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.texBuffer);\n      this.enableVertexAttrib(['a_texCoord', 2]);\n      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(texCoords), gl.DYNAMIC_DRAW);\n      gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(indices), gl.DYNAMIC_DRAW);\n      gl.drawElements(gl.TRIANGLES, indices.length, gl.UNSIGNED_SHORT, 0);\n    };\n    _proto.createCanvas2 = function createCanvas2() {\n      this.canvas2 = Canvas.createCanvas(this.canvas.width, this.canvas.height);\n    };\n    _proto.createGLContext = function createGLContext$$1() {\n      if (this.canvas.gl && this.canvas.gl.wrap) {\n        this.gl = this.canvas.gl.wrap();\n      } else {\n        this.gl = createGLContext(this.canvas2 || this.canvas, this.layer.options['glOptions']);\n      }\n      var gl = this.gl;\n      gl.clearColor(0.0, 0.0, 0.0, 0.0);\n      gl.enable(gl.DEPTH_TEST);\n      gl.enable(gl.STENCIL_TEST);\n      gl.enable(gl.BLEND);\n      gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n      this.program = this.createProgram(shaders['vertexShader'], this.layer.options['fragmentShader'] || shaders['fragmentShader']);\n      this._debugBuffer = this.createBuffer();\n      this.useProgram(this.program);\n      this.texBuffer = this.createBuffer();\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.texBuffer);\n      this.enableVertexAttrib(['a_texCoord', 2, 'UNSIGNED_BYTE']);\n      gl.bufferData(gl.ARRAY_BUFFER, new Uint8Array([0.0, 0.0, 0.0, 1.0, 1.0, 0.0, 1.0, 1.0]), gl.STATIC_DRAW);\n      this.enableSampler('u_image');\n      gl.activeTexture(gl['TEXTURE0']);\n      gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, true);\n    };\n    _proto.resizeGLCanvas = function resizeGLCanvas() {\n      if (this.gl) {\n        this.gl.viewport(0, 0, this.canvas.width, this.canvas.height);\n      }\n      if (!this.canvas2) {\n        return;\n      }\n      if (this.canvas2.width !== this.canvas.width || this.canvas2.height !== this.canvas.height) {\n        this.canvas2.width = this.canvas.width;\n        this.canvas2.height = this.canvas.height;\n      }\n    };\n    _proto.clearGLCanvas = function clearGLCanvas() {\n      if (this.gl) {\n        this.gl.clearStencil(0xFF);\n        this.gl.clear(this.gl.COLOR_BUFFER_BIT | this.gl.STENCIL_BUFFER_BIT);\n      }\n      if (!this.gl.wrap) {\n        this.gl.clear(this.gl.DEPTH_BUFFER_BIT);\n      }\n    };\n    _proto.disposeImage = function disposeImage(image) {\n      if (!image) {\n        return;\n      }\n      if (image.texture) {\n        this.saveTexture(image.texture);\n      }\n      if (image.glBuffer) {\n        this.saveImageBuffer(image.glBuffer);\n      }\n      delete image.texture;\n      delete image.glBuffer;\n    };\n    _proto._createTexture = function _createTexture(image) {\n      var gl = this.gl;\n      var texture = this.getTexture() || gl.createTexture();\n      gl.bindTexture(gl.TEXTURE_2D, texture);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n      if (!isPowerOfTwo(image.width) || !isPowerOfTwo(image.height)) {\n        image = resize(image);\n      }\n      gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, image);\n      gl.generateMipmap(gl.TEXTURE_2D);\n      return texture;\n    };\n    _proto.getTexture = function getTexture() {\n      if (!this._textures) {\n        this._textures = [];\n      }\n      var textures = this._textures;\n      return textures && textures.length > 0 ? textures.pop() : null;\n    };\n    _proto.saveTexture = function saveTexture(texture) {\n      this._textures.push(texture);\n    };\n    _proto.loadTexture = function loadTexture(image) {\n      var map = this.getMap();\n      var gl = this.gl;\n      var texture = image.texture;\n      if (!texture) {\n        texture = this._createTexture(image);\n        image.texture = texture;\n      }\n      gl.bindTexture(gl.TEXTURE_2D, texture);\n      if (map.getRenderer().isViewChanged()) {\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_LINEAR);\n      } else {\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n      }\n      return texture;\n    };\n    _proto.getImageBuffer = function getImageBuffer() {\n      if (!this._imageBuffers) {\n        this._imageBuffers = [];\n      }\n      var imageBuffers = this._imageBuffers;\n      return imageBuffers && imageBuffers.length > 0 ? imageBuffers.pop() : null;\n    };\n    _proto.saveImageBuffer = function saveImageBuffer(buffer) {\n      if (!this._imageBuffers) {\n        this._imageBuffers = [];\n      }\n      this._imageBuffers.push(buffer);\n    };\n    _proto.loadImageBuffer = function loadImageBuffer(data, glBuffer) {\n      var gl = this.gl;\n      var buffer = glBuffer || this.createImageBuffer();\n      gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n      gl.bufferData(gl.ARRAY_BUFFER, data, gl.STATIC_DRAW);\n      return buffer;\n    };\n    _proto.createImageBuffer = function createImageBuffer() {\n      return this.getImageBuffer() || this.createBuffer();\n    };\n    _proto.removeGLCanvas = function removeGLCanvas() {\n      var gl = this.gl;\n      if (!gl) {\n        return;\n      }\n      if (this._debugBuffer) {\n        gl.deleteBuffer(this._debugBuffer);\n        delete this._debugBuffer;\n      }\n      if (this._buffers) {\n        this._buffers.forEach(function (b) {\n          gl.deleteBuffer(b);\n        });\n        delete this._buffers;\n      }\n      if (this._textures) {\n        this._textures.forEach(function (t) {\n          return gl.deleteTexture(t);\n        });\n        delete this._textures;\n      }\n      if (this._debugInfoCanvas) {\n        var texture = this._debugInfoCanvas.texture;\n        if (texture) {\n          gl.deleteTexture(texture);\n        }\n        delete this._debugInfoCanvas.texture;\n        delete this._debugInfoCanvas;\n      }\n      var program = gl.program;\n      gl.deleteShader(program.fragmentShader);\n      gl.deleteShader(program.vertexShader);\n      gl.deleteProgram(program);\n      delete this.gl;\n      delete this.canvas2;\n    };\n    _proto.createBuffer = function createBuffer() {\n      var gl = this.gl;\n      var buffer = gl.createBuffer();\n      if (!buffer) {\n        throw new Error('Failed to create the buffer object');\n      }\n      if (!this._buffers) {\n        this._buffers = [];\n      }\n      this._buffers.push(buffer);\n      return buffer;\n    };\n    _proto.enableVertexAttrib = function enableVertexAttrib$$1(attributes) {\n      enableVertexAttrib(this.gl, this.gl.program, attributes);\n    };\n    _proto.createProgram = function createProgram$$1(vert, frag) {\n      var gl = this.gl;\n      var _createProgram2 = createProgram(gl, vert, frag),\n        program = _createProgram2.program,\n        vertexShader = _createProgram2.vertexShader,\n        fragmentShader = _createProgram2.fragmentShader;\n      var numUniforms = gl.getProgramParameter(program, 0x8B86);\n      var activeUniforms = [];\n      for (var i = 0; i < numUniforms; ++i) {\n        var info = gl.getActiveUniform(program, i);\n        activeUniforms.push(info.name);\n      }\n      program.vertexShader = vertexShader;\n      program.fragmentShader = fragmentShader;\n      this._initUniforms(program, activeUniforms);\n      return program;\n    };\n    _proto.useProgram = function useProgram(program) {\n      var gl = this.gl;\n      gl.useProgram(program);\n      gl.program = program;\n      return this;\n    };\n    _proto.enableSampler = function enableSampler(sampler, texIdx) {\n      var gl = this.gl;\n      var uSampler = this._getUniform(gl.program, sampler);\n      if (!texIdx) {\n        texIdx = 0;\n      }\n      gl.uniform1i(uSampler, texIdx);\n      return uSampler;\n    };\n    _proto._initUniforms = function _initUniforms(program, uniforms) {\n      for (var i = 0; i < uniforms.length; i++) {\n        var name = uniforms[i];\n        var uniform = uniforms[i];\n        var b = name.indexOf('[');\n        if (b >= 0) {\n          name = name.substring(0, b);\n          if (!IS_NODE) {\n            uniform = uniform.substring(0, b);\n          }\n        }\n        program[name] = this._getUniform(program, uniform);\n      }\n    };\n    _proto._getUniform = function _getUniform(program, uniformName) {\n      var gl = this.gl;\n      var uniform = gl.getUniformLocation(program, uniformName);\n      if (!uniform) {\n        throw new Error('Failed to get the storage location of ' + uniformName);\n      }\n      return uniform;\n    };\n    return renderable;\n  }(Base);\n  extend(renderable.prototype, {\n    set8: function () {\n      var out = Browser$1.ie9 ? null : new Float32Array(8);\n      return function (a0, a1, a2, a3, a4, a5, a6, a7) {\n        out[0] = a0;\n        out[1] = a1;\n        out[2] = a2;\n        out[3] = a3;\n        out[4] = a4;\n        out[5] = a5;\n        out[6] = a6;\n        out[7] = a7;\n        return out;\n      };\n    }(),\n    set8Int: function () {\n      var out = Browser$1.ie9 ? null : new Int16Array(8);\n      return function (a0, a1, a2, a3, a4, a5, a6, a7) {\n        out[0] = a0;\n        out[1] = a1;\n        out[2] = a2;\n        out[3] = a3;\n        out[4] = a4;\n        out[5] = a5;\n        out[6] = a6;\n        out[7] = a7;\n        return out;\n      };\n    }()\n  });\n  return renderable;\n};\nfunction resize(image) {\n  if (isPowerOfTwo(image.width) && isPowerOfTwo(image.height)) {\n    return image;\n  }\n  var width = image.width;\n  var height = image.height;\n  if (!isPowerOfTwo(width)) {\n    width = floorPowerOfTwo(width);\n  }\n  if (!isPowerOfTwo(height)) {\n    height = floorPowerOfTwo(height);\n  }\n  var canvas = document.createElement('canvas');\n  canvas.width = width;\n  canvas.height = height;\n  canvas.getContext('2d').drawImage(image, 0, 0, width, height);\n  return canvas;\n}\nfunction isPowerOfTwo(value) {\n  return (value & value - 1) === 0 && value !== 0;\n}\nfunction floorPowerOfTwo(value) {\n  return Math.pow(2, Math.floor(Math.log(value) / Math.LN2));\n}\n\nvar options$z = {\n  renderer: Browser$1.webgl ? 'gl' : 'canvas',\n  crossOrigin: null,\n  alphaTest: 0,\n  depthMask: true,\n  depthFunc: '<='\n};\nvar TEMP_POINT$3 = new Point(0, 0);\nvar ImageLayer = function (_Layer) {\n  _inheritsLoose(ImageLayer, _Layer);\n  function ImageLayer(id, images, options) {\n    var _this;\n    if (images && !Array.isArray(images) && !images.url) {\n      options = images;\n      images = null;\n    }\n    _this = _Layer.call(this, id, options) || this;\n    _this._images = images;\n    return _this;\n  }\n  var _proto = ImageLayer.prototype;\n  _proto.onAdd = function onAdd() {\n    this._prepareImages(this._images);\n  };\n  _proto.setImages = function setImages(images) {\n    this._images = images;\n    this._prepareImages(images);\n    return this;\n  };\n  _proto.getImages = function getImages() {\n    return this._images;\n  };\n  _proto._prepareImages = function _prepareImages(images) {\n    images = images || [];\n    if (!Array.isArray(images)) {\n      images = [images];\n    }\n    var map = this.getMap();\n    var glRes = map.getGLRes();\n    this._imageData = images.map(function (img) {\n      var extent = new Extent(img.extent);\n      return extend({}, img, {\n        extent: extent,\n        extent2d: extent.convertTo(function (c) {\n          return map.coordToPointAtRes(c, glRes);\n        })\n      });\n    });\n    this._images = images;\n    var renderer = this.getRenderer();\n    if (renderer) {\n      renderer.refreshImages();\n    }\n  };\n  return ImageLayer;\n}(Layer);\nImageLayer.mergeOptions(options$z);\nvar EMPTY_ARRAY$1 = [];\nvar ImageLayerCanvasRenderer = function (_CanvasRenderer) {\n  _inheritsLoose(ImageLayerCanvasRenderer, _CanvasRenderer);\n  function ImageLayerCanvasRenderer() {\n    return _CanvasRenderer.apply(this, arguments) || this;\n  }\n  var _proto2 = ImageLayerCanvasRenderer.prototype;\n  _proto2.isDrawable = function isDrawable() {\n    if (this.getMap().getPitch()) {\n      if (console) {\n        console.warn('ImageLayer with canvas renderer can\\'t be pitched, use gl renderer (\\'renderer\\' : \\'gl\\') instead.');\n      }\n      return false;\n    }\n    return true;\n  };\n  _proto2.checkResources = function checkResources() {\n    var _this2 = this;\n    if (this._imageLoaded) {\n      return EMPTY_ARRAY$1;\n    }\n    var layer = this.layer;\n    var urls = layer._imageData.map(function (img) {\n      return [img.url, null, null];\n    });\n    if (this.resources) {\n      var unloaded = [];\n      var resources = new ResourceCache();\n      urls.forEach(function (url) {\n        if (_this2.resources.isResourceLoaded(url)) {\n          var img = _this2.resources.getImage(url);\n          resources.addResource(url, img);\n        } else {\n          unloaded.push(url);\n        }\n      });\n      this.resources.forEach(function (url, res) {\n        if (!resources.isResourceLoaded(url)) {\n          _this2.retireImage(res.image);\n        }\n      });\n      this.resources = resources;\n      urls = unloaded;\n    }\n    this._imageLoaded = true;\n    return urls;\n  };\n  _proto2.retireImage = function retireImage(image) {\n    if (image.close) {\n      image.close();\n    }\n  };\n  _proto2.refreshImages = function refreshImages() {\n    this._imageLoaded = false;\n    this.setToRedraw();\n  };\n  _proto2.draw = function draw(timestamp, context) {\n    if (!this.isDrawable()) {\n      return;\n    }\n    this.prepareCanvas();\n    this._painted = false;\n    this._drawImages(timestamp, context);\n    this.completeRender();\n  };\n  _proto2._drawImages = function _drawImages() {\n    var imgData = this.layer._imageData;\n    var map = this.getMap();\n    var mapExtent = map._get2DExtentAtRes(map.getGLRes());\n    if (imgData && imgData.length) {\n      for (var i = 0; i < imgData.length; i++) {\n        var extent = imgData[i].extent2d;\n        var image = this.resources && this.resources.getImage(imgData[i].url);\n        if (image && mapExtent.intersects(extent)) {\n          this._painted = true;\n          this._drawImage(image, extent, imgData[i].opacity || 1);\n        }\n      }\n    }\n  };\n  _proto2._drawImage = function _drawImage(image, extent, opacity) {\n    var globalAlpha = 0;\n    var ctx = this.context;\n    if (opacity < 1) {\n      globalAlpha = ctx.globalAlpha;\n      ctx.globalAlpha = opacity;\n    }\n    var map = this.getMap();\n    var nw = TEMP_POINT$3.set(extent.xmin, extent.ymax);\n    var point = map._pointAtResToContainerPoint(nw, map.getGLRes());\n    var x = point.x,\n      y = point.y;\n    var bearing = map.getBearing();\n    if (bearing) {\n      ctx.save();\n      ctx.translate(x, y);\n      if (bearing) {\n        ctx.rotate(-bearing * Math.PI / 180);\n      }\n      x = y = 0;\n    }\n    var scale = map.getGLScale();\n    ctx.drawImage(image, x, y, extent.getWidth() / scale, extent.getHeight() / scale);\n    if (bearing) {\n      ctx.restore();\n    }\n    if (globalAlpha) {\n      ctx.globalAlpha = globalAlpha;\n    }\n  };\n  _proto2.drawOnInteracting = function drawOnInteracting() {\n    this.draw();\n  };\n  return ImageLayerCanvasRenderer;\n}(CanvasRenderer);\nvar ImageLayerGLRenderer = function (_ImageGLRenderable) {\n  _inheritsLoose(ImageLayerGLRenderer, _ImageGLRenderable);\n  function ImageLayerGLRenderer() {\n    return _ImageGLRenderable.apply(this, arguments) || this;\n  }\n  var _proto3 = ImageLayerGLRenderer.prototype;\n  _proto3.drawOnInteracting = function drawOnInteracting(event, timestamp, context) {\n    this.draw(timestamp, context);\n  };\n  _proto3._prepareGLContext = function _prepareGLContext() {\n    var gl = this.gl;\n    if (gl) {\n      gl.disable(gl.STENCIL_TEST);\n      gl.disable(gl.POLYGON_OFFSET_FILL);\n      gl.enable(gl.DEPTH_TEST);\n      gl.enable(gl.BLEND);\n      gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n      gl.depthFunc(getDepthFunc(this.layer.options['depthFunc']));\n      var depthMask = isNil(this.layer.options['depthMask']) || !!this.layer.options['depthMask'];\n      gl.depthMask(depthMask);\n    }\n  };\n  _proto3._drawImages = function _drawImages(timestamp, parentContext) {\n    var gl = this.gl;\n    if (parentContext && parentContext.renderTarget) {\n      var fbo = parentContext.renderTarget.fbo;\n      if (fbo) {\n        var framebuffer = parentContext.renderTarget.getFramebuffer(fbo);\n        gl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer);\n      }\n    }\n    this._prepareGLContext();\n    _ImageGLRenderable.prototype._drawImages.call(this);\n    if (parentContext && parentContext.renderTarget) {\n      var _fbo = parentContext.renderTarget.fbo;\n      if (_fbo) {\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n      }\n    }\n  };\n  _proto3.isDrawable = function isDrawable() {\n    return true;\n  };\n  _proto3._drawImage = function _drawImage(image, extent, opacity) {\n    this.drawGLImage(image, extent.xmin, extent.ymax, extent.getWidth(), extent.getHeight(), 1, opacity);\n  };\n  _proto3.createContext = function createContext() {\n    this.createGLContext();\n  };\n  _proto3.resizeCanvas = function resizeCanvas(canvasSize) {\n    if (!this.canvas) {\n      return;\n    }\n    _ImageGLRenderable.prototype.resizeCanvas.call(this, canvasSize);\n    this.resizeGLCanvas();\n  };\n  _proto3.clearCanvas = function clearCanvas() {\n    if (!this.canvas) {\n      return;\n    }\n    _ImageGLRenderable.prototype.clearCanvas.call(this);\n    this.clearGLCanvas();\n  };\n  _proto3.retireImage = function retireImage(image) {\n    if (image.close) {\n      image.close();\n    }\n    this.disposeImage(image);\n  };\n  _proto3.onRemove = function onRemove() {\n    this.removeGLCanvas();\n    _ImageGLRenderable.prototype.onRemove.call(this);\n  };\n  return ImageLayerGLRenderer;\n}(ImageGLRenderable(ImageLayerCanvasRenderer));\nImageLayer.registerRenderer('canvas', ImageLayerCanvasRenderer);\nImageLayer.registerRenderer('gl', ImageLayerGLRenderer);\n\nvar CanvasLayerRenderer = function (_CanvasRenderer) {\n  _inheritsLoose(CanvasLayerRenderer, _CanvasRenderer);\n  function CanvasLayerRenderer() {\n    return _CanvasRenderer.apply(this, arguments) || this;\n  }\n  var _proto = CanvasLayerRenderer.prototype;\n  _proto.getPrepareParams = function getPrepareParams() {\n    return [];\n  };\n  _proto.getDrawParams = function getDrawParams() {\n    return [];\n  };\n  _proto.onCanvasCreate = function onCanvasCreate() {\n    if (this.canvas && this.layer.options['doubleBuffer']) {\n      this.buffer = Canvas.createCanvas(this.canvas.width, this.canvas.height, this.getMap().CanvasClass);\n    }\n  };\n  _proto.needToRedraw = function needToRedraw() {\n    if (this.layer.options['animation']) {\n      return true;\n    }\n    var map = this.getMap();\n    if (map.isInteracting() && !this.layer.drawOnInteracting) {\n      return false;\n    }\n    return _CanvasRenderer.prototype.needToRedraw.call(this);\n  };\n  _proto.draw = function draw() {\n    this.prepareCanvas();\n    this.prepareDrawContext();\n    this._drawLayer.apply(this, arguments);\n  };\n  _proto.drawOnInteracting = function drawOnInteracting() {\n    this._drawLayerOnInteracting.apply(this, arguments);\n  };\n  _proto.getCanvasImage = function getCanvasImage() {\n    var canvasImg = _CanvasRenderer.prototype.getCanvasImage.call(this);\n    if (canvasImg && canvasImg.image && this.layer.options['doubleBuffer']) {\n      var canvas = canvasImg.image;\n      if (this.buffer.width !== canvas.width || this.buffer.height !== canvas.height) {\n        this.buffer.width = canvas.width;\n        this.buffer.height = canvas.height;\n      }\n      var bufferContext = this.buffer.getContext('2d');\n      var prevent = this.layer.doubleBuffer(bufferContext, this.context);\n      if (prevent === undefined || prevent) {\n        Canvas.image(bufferContext, canvas, 0, 0);\n        canvasImg.image = this.buffer;\n      }\n    }\n    return canvasImg;\n  };\n  _proto.remove = function remove() {\n    delete this._drawContext;\n    return _CanvasRenderer.prototype.remove.call(this);\n  };\n  _proto.onZoomStart = function onZoomStart(param) {\n    this.layer.onZoomStart(param);\n    _CanvasRenderer.prototype.onZoomStart.call(this, param);\n  };\n  _proto.onZooming = function onZooming(param) {\n    this.layer.onZooming(param);\n    _CanvasRenderer.prototype.onZooming.call(this, param);\n  };\n  _proto.onZoomEnd = function onZoomEnd(param) {\n    this.layer.onZoomEnd(param);\n    _CanvasRenderer.prototype.onZoomEnd.call(this, param);\n  };\n  _proto.onMoveStart = function onMoveStart(param) {\n    this.layer.onMoveStart(param);\n    _CanvasRenderer.prototype.onMoveStart.call(this, param);\n  };\n  _proto.onMoving = function onMoving(param) {\n    this.layer.onMoving(param);\n    _CanvasRenderer.prototype.onMoving.call(this, param);\n  };\n  _proto.onMoveEnd = function onMoveEnd(param) {\n    this.layer.onMoveEnd(param);\n    _CanvasRenderer.prototype.onMoveEnd.call(this, param);\n  };\n  _proto.onResize = function onResize(param) {\n    this.layer.onResize(param);\n    _CanvasRenderer.prototype.onResize.call(this, param);\n  };\n  _proto.prepareDrawContext = function prepareDrawContext() {\n    if (!this._predrawed) {\n      var params = ensureParams(this.getPrepareParams());\n      this._drawContext = this.layer.prepareToDraw.apply(this.layer, [this.context].concat(params));\n      if (!this._drawContext) {\n        this._drawContext = [];\n      }\n      if (!Array.isArray(this._drawContext)) {\n        this._drawContext = [this._drawContext];\n      }\n      this._predrawed = true;\n    }\n  };\n  _proto._prepareDrawParams = function _prepareDrawParams() {\n    if (!this.getMap()) {\n      return null;\n    }\n    var view = this.getViewExtent();\n    if (view['maskExtent'] && !view['extent'].intersects(view['maskExtent'])) {\n      this.completeRender();\n      return null;\n    }\n    var args = [this.context, view];\n    var params = ensureParams(this.getDrawParams());\n    args.push.apply(args, params);\n    args.push.apply(args, this._drawContext);\n    return args;\n  };\n  _proto._drawLayer = function _drawLayer() {\n    var params = this._prepareDrawParams();\n    if (!params) {\n      return;\n    }\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    this.layer.draw.apply(this.layer, params.concat(args));\n    this.completeRender();\n  };\n  _proto._drawLayerOnInteracting = function _drawLayerOnInteracting() {\n    if (!this.layer.drawOnInteracting) {\n      return;\n    }\n    var params = this._prepareDrawParams();\n    if (!params) {\n      return;\n    }\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n    this.layer.drawOnInteracting.apply(this.layer, params.concat(args));\n    this.completeRender();\n  };\n  return CanvasLayerRenderer;\n}(CanvasRenderer);\nfunction ensureParams(params) {\n  if (!params) {\n    params = [];\n  }\n  if (!Array.isArray(params)) {\n    params = [params];\n  }\n  return params;\n}\n\nvar options$A = {\n  'doubleBuffer': false,\n  'animation': false\n};\nvar CanvasLayer = function (_Layer) {\n  _inheritsLoose(CanvasLayer, _Layer);\n  function CanvasLayer() {\n    return _Layer.apply(this, arguments) || this;\n  }\n  var _proto = CanvasLayer.prototype;\n  _proto.isCanvasRender = function isCanvasRender() {\n    return true;\n  };\n  _proto.prepareToDraw = function prepareToDraw() {};\n  _proto.draw = function draw() {};\n  _proto.redraw = function redraw() {\n    if (this._getRenderer()) {\n      this._getRenderer().setToRedraw();\n    }\n    return this;\n  };\n  _proto.play = function play() {\n    this.config('animation', true);\n    return this;\n  };\n  _proto.pause = function pause() {\n    this.config('animation', false);\n    return this;\n  };\n  _proto.isPlaying = function isPlaying() {\n    return this.options['animation'];\n  };\n  _proto.clearCanvas = function clearCanvas() {\n    if (this._getRenderer()) {\n      this._getRenderer().clearCanvas();\n    }\n    return this;\n  };\n  _proto.requestMapToRender = function requestMapToRender() {\n    if (this._getRenderer()) {\n      this._getRenderer().requestMapToRender();\n    }\n    return this;\n  };\n  _proto.completeRender = function completeRender() {\n    if (this._getRenderer()) {\n      this._getRenderer().completeRender();\n    }\n    return this;\n  };\n  _proto.onCanvasCreate = function onCanvasCreate() {\n    return this;\n  };\n  _proto.onZoomStart = function onZoomStart() {};\n  _proto.onZooming = function onZooming() {};\n  _proto.onZoomEnd = function onZoomEnd() {};\n  _proto.onMoveStart = function onMoveStart() {};\n  _proto.onMoving = function onMoving() {};\n  _proto.onMoveEnd = function onMoveEnd() {};\n  _proto.onResize = function onResize() {};\n  _proto.doubleBuffer = function doubleBuffer(bufferContext) {\n    bufferContext.clearRect(0, 0, bufferContext.canvas.width, bufferContext.canvas.height);\n    return this;\n  };\n  return CanvasLayer;\n}(Layer);\nCanvasLayer.mergeOptions(options$A);\nCanvasLayer.registerRenderer('canvas', CanvasLayerRenderer);\n\nvar TEMP_POINT$4 = new Point(0, 0);\nvar options$B = {\n  'animation': true\n};\nvar ParticleLayer = function (_CanvasLayer) {\n  _inheritsLoose(ParticleLayer, _CanvasLayer);\n  function ParticleLayer() {\n    return _CanvasLayer.apply(this, arguments) || this;\n  }\n  var _proto = ParticleLayer.prototype;\n  _proto.getParticles = function getParticles() {};\n  _proto.draw = function draw(context, view) {\n    var points = this.getParticles(now());\n    if (!points || points.length === 0) {\n      var renderer = this._getRenderer();\n      if (renderer) {\n        this._getRenderer()._shouldClear = true;\n      }\n      return;\n    }\n    var map = this.getMap();\n    var extent = view.extent;\n    if (view.maskExtent) {\n      extent = view.extent.intersection(view.maskExtent);\n    }\n    extent = extent.convertTo(function (c) {\n      return map._pointToContainerPoint(c, undefined, 0, TEMP_POINT$4);\n    });\n    var e = 2 * Math.PI;\n    for (var i = 0, l = points.length; i < l; i++) {\n      var pos = points[i].point;\n      if (extent.contains(pos)) {\n        var color = points[i].color || this.options['lineColor'] || '#fff',\n          r = points[i].r;\n        if (context.fillStyle !== color) {\n          context.fillStyle = color;\n        }\n        if (r <= 2) {\n          context.fillRect(pos.x - r / 2, pos.y - r / 2, r, r);\n        } else {\n          context.beginPath();\n          context.arc(pos.x, pos.y, r / 2, 0, e);\n          context.fill();\n        }\n      }\n    }\n    this._fillCanvas(context);\n  };\n  _proto._fillCanvas = function _fillCanvas(context) {\n    var g = context.globalCompositeOperation;\n    context.globalCompositeOperation = 'destination-out';\n    var trail = this.options['trail'] || 30;\n    context.fillStyle = 'rgba(0, 0, 0, ' + 1 / trail + ')';\n    context.fillRect(0, 0, context.canvas.width, context.canvas.height);\n    context.globalCompositeOperation = g;\n  };\n  return ParticleLayer;\n}(CanvasLayer);\nParticleLayer.mergeOptions(options$B);\nParticleLayer.registerRenderer('canvas', function (_CanvasLayerRenderer) {\n  _inheritsLoose(_class, _CanvasLayerRenderer);\n  function _class() {\n    return _CanvasLayerRenderer.apply(this, arguments) || this;\n  }\n  var _proto2 = _class.prototype;\n  _proto2.draw = function draw() {\n    if (!this.canvas || !this.layer.options['animation'] || this._shouldClear) {\n      this.prepareCanvas();\n      this._shouldClear = false;\n    }\n    this.prepareDrawContext();\n    this._drawLayer();\n  };\n  _proto2.drawOnInteracting = function drawOnInteracting() {\n    this.draw();\n    this._shouldClear = false;\n  };\n  _proto2.onSkipDrawOnInteracting = function onSkipDrawOnInteracting() {\n    this._shouldClear = true;\n  };\n  return _class;\n}(CanvasLayerRenderer));\n\nvar resources = new ResourceCache();\nvar prevX, prevY;\nvar EditHandle = function (_Eventable) {\n  _inheritsLoose(EditHandle, _Eventable);\n  function EditHandle(target, map, options) {\n    var _this;\n    _this = _Eventable.call(this, options) || this;\n    _this.target = target;\n    target.once('remove', _this.delete, _assertThisInitialized(_assertThisInitialized(_this)));\n    var symbol = _this.options['symbol'];\n    var lineWidth = symbol['markerLineWidth'] || 1;\n    _this.w = symbol['markerWidth'] + lineWidth;\n    _this.h = symbol['markerHeight'] + lineWidth;\n    _this.opacity = isNil(symbol['opacity']) ? 1 : symbol['opacity'];\n    _this.map = map;\n    _this.events = options.events;\n    _this._fetchImage();\n    _this.addTo(map);\n    return _this;\n  }\n  var _proto = EditHandle.prototype;\n  _proto.getCursor = function getCursor() {\n    return this.options['cursor'] || 'default';\n  };\n  _proto._fetchImage = function _fetchImage() {\n    var map = this.map;\n    var symbol = this.options.symbol;\n    var markerFile = symbol.markerFile;\n    this.url = markerFile || getSymbolHash(symbol);\n    var img = resources.getImage(this.url);\n    if (!img) {\n      var w = this.w;\n      var h = this.h;\n      if (markerFile) {\n        img = new Image();\n        img.onload = function () {\n          var renderer = map.getRenderer();\n          if (renderer) {\n            renderer.setToRedraw();\n          }\n        };\n        img.src = this.url;\n      } else {\n        var canvas = document.createElement('canvas');\n        canvas.width = w;\n        canvas.height = h;\n        var ctx = canvas.getContext('2d');\n        img = drawVectorMarker(ctx, {\n          x: w / 2,\n          y: h / 2\n        }, symbol, resources);\n      }\n      resources.addResource([this.url, w, h], img);\n    }\n    resources.login(this.url);\n    this._img = img;\n  };\n  _proto.setContainerPoint = function setContainerPoint(cp) {\n    this._point = cp;\n    this._point._sub(this.w / 2, this.h / 2);\n  };\n  _proto.getContainerPoint = function getContainerPoint() {\n    return this._point.add(this.w / 2, this.h / 2);\n  };\n  _proto.offset = function offset(p) {\n    this._point._add(p);\n  };\n  _proto.render = function render(ctx) {\n    if (!this._img) {\n      return false;\n    }\n    var symbol = this.options['symbol'];\n    var dx = symbol['markerDx'] || 0;\n    var dy = symbol['markerDy'] || 0;\n    var map = this.map;\n    var _this$_point = this._point,\n      x = _this$_point.x,\n      y = _this$_point.y;\n    var w = this.w;\n    var h = this.h;\n    if (x + w > 0 && x < map.width && y + h > 0 && y < map.height) {\n      var dpr = map.getDevicePixelRatio();\n      ctx.globalAlpha = this.opacity;\n      ctx.drawImage(this._img, Math.round((x + dx) * dpr), Math.round((y + dy) * dpr), Math.round(w * dpr), Math.round(h * dpr));\n      return true;\n    }\n    return false;\n  };\n  _proto.delete = function _delete() {\n    if (this.map) {\n      var renderer = this.map.getRenderer();\n      if (renderer) {\n        renderer.removeTopElement(this);\n      }\n    }\n    resources.logout(this.url);\n    if (this._dragger) {\n      this._dragger.disable();\n      delete this._dragger;\n    }\n    delete this.map;\n  };\n  _proto.hitTest = function hitTest(p) {\n    var symbol = this.options['symbol'];\n    var dx = symbol['markerDx'] || 0;\n    var dy = symbol['markerDy'] || 0;\n    var w = this.w;\n    var h = this.h;\n    var x = this._point.x + dx;\n    var y = this._point.y + dy;\n    return p.x >= x && p.x <= x + w && p.y >= y && p.y <= y + h;\n  };\n  _proto.addTo = function addTo(map) {\n    this.map = map;\n    var renderer = map.getRenderer();\n    renderer.addTopElement(this);\n  };\n  _proto.onEvent = function onEvent(e) {\n    this.fire(e.type, e);\n  };\n  _proto.mousedown = function mousedown(e) {\n    var map = e.target;\n    var cursor = this.options['cursor'];\n    if (cursor) {\n      map.setCursor(cursor);\n    }\n    this.onDragstart(e);\n  };\n  _proto.onDragstart = function onDragstart(e) {\n    var containerPoint = e.containerPoint,\n      map = e.target;\n    var dom = map._panels.mapWrapper || map._containerDOM;\n    var dragHandler = this._dragger = new DragHandler(dom);\n    dragHandler.on('dragging', this.onDragging, this).on('mouseup', this.onDragend, this).enable();\n    dragHandler.type = 'handle';\n    dragHandler.onMouseDown(e['domEvent']);\n    prevX = containerPoint.x;\n    prevY = containerPoint.y;\n    this.fire('dragstart', {\n      containerPoint: containerPoint\n    });\n  };\n  _proto.onDragging = function onDragging(e) {\n    if (!this._dragger) {\n      return;\n    }\n    var activeMap = this.map;\n    var containerPoint = getEventContainerPoint(e.domEvent, activeMap._containerDOM);\n    var offset = {\n      x: containerPoint.x - prevX,\n      y: containerPoint.y - prevY\n    };\n    var prevCoord = activeMap.containerPointToCoord(new Point(prevX, prevY));\n    var currentCoord = activeMap.containerPointToCoord(containerPoint);\n    prevX = containerPoint.x;\n    prevY = containerPoint.y;\n    this.offset(offset);\n    this.fire('dragging', {\n      containerPoint: containerPoint,\n      coordOffset: currentCoord._sub(prevCoord)\n    });\n  };\n  _proto.onDragend = function onDragend(e) {\n    if (!this._dragger) {\n      return;\n    }\n    var map = this.map;\n    map.resetCursor();\n    var containerPoint = getEventContainerPoint(e.domEvent, map._containerDOM);\n    var offset = {\n      x: containerPoint.x - prevX,\n      y: containerPoint.y - prevY\n    };\n    this.offset(offset);\n    this._dragger.disable();\n    delete this._dragger;\n    this.fire('dragend', {\n      containerPoint: containerPoint\n    });\n  };\n  return EditHandle;\n}(Eventable(Class));\n\nvar EditOutline = function () {\n  function EditOutline(target, map) {\n    this.target = target;\n    target.once('remove', this.delete, this);\n    this.map = map;\n    this.addTo(map);\n  }\n  var _proto = EditOutline.prototype;\n  _proto.setPoints = function setPoints(points) {\n    this.points = points;\n    var allX = points.map(function (p) {\n      return p.x;\n    });\n    var allY = points.map(function (p) {\n      return p.y;\n    });\n    this.xmin = Math.min.apply(Math, allX);\n    this.xmax = Math.max.apply(Math, allX);\n    this.ymin = Math.min.apply(Math, allY);\n    this.ymax = Math.max.apply(Math, allY);\n  };\n  _proto.hitTest = function hitTest() {\n    return false;\n  };\n  _proto.render = function render(ctx) {\n    var map = this.map;\n    if (this.xmax <= 0 || this.xmin >= map.width || this.ymax <= 0 || this.ymin >= map.height) {\n      return;\n    }\n    var dpr = map.getDevicePixelRatio();\n    var padding = 0.5;\n    function c(v) {\n      return Math.round(v) * dpr + padding;\n    }\n    ctx.lineWidth = 1;\n    ctx.strokeStyle = '#000';\n    ctx.globalAlpha = 1;\n    ctx.beginPath();\n    var points = this.points;\n    ctx.moveTo(c(points[0].x), c(points[0].y));\n    for (var i = 1; i < this.points.length; i++) {\n      ctx.lineTo(c(points[i].x), c(points[i].y));\n    }\n    ctx.closePath();\n    ctx.stroke();\n  };\n  _proto.addTo = function addTo(map) {\n    this.map = map;\n    var renderer = map.getRenderer();\n    renderer.addTopElement(this);\n  };\n  _proto.delete = function _delete() {\n    if (this.map) {\n      var renderer = this.map.getRenderer();\n      if (renderer) {\n        renderer.removeTopElement(this);\n      }\n    }\n  };\n  return EditOutline;\n}();\n\nvar EDIT_STAGE_LAYER_PREFIX = INTERNAL_LAYER_PREFIX + '_edit_stage_';\nfunction createHandleSymbol(markerType, opacity) {\n  return {\n    'markerType': markerType,\n    'markerFill': '#fff',\n    'markerLineColor': '#000',\n    'markerLineWidth': 2,\n    'markerWidth': 10,\n    'markerHeight': 10,\n    'opacity': opacity\n  };\n}\nvar options$C = {\n  'fixAspectRatio': false,\n  'symbol': null,\n  'removeVertexOn': 'contextmenu',\n  'centerHandleSymbol': createHandleSymbol('ellipse', 1),\n  'vertexHandleSymbol': createHandleSymbol('square', 1),\n  'newVertexHandleSymbol': createHandleSymbol('square', 0.4)\n};\nvar GeometryEditor = function (_Eventable) {\n  _inheritsLoose(GeometryEditor, _Eventable);\n  function GeometryEditor(geometry, opts) {\n    var _this;\n    _this = _Eventable.call(this, opts) || this;\n    _this._geometry = geometry;\n    if (!_this._geometry) {\n      return _assertThisInitialized(_this);\n    }\n    return _this;\n  }\n  var _proto = GeometryEditor.prototype;\n  _proto.getMap = function getMap() {\n    return this._geometry.getMap();\n  };\n  _proto.prepare = function prepare() {\n    var map = this.getMap();\n    if (!map) {\n      return;\n    }\n    map.on('drawtopstart', this._refresh, this);\n    if (this.options['symbol']) {\n      this._originalSymbol = this._geometry.getSymbol();\n      this._geometry.setSymbol(this.options['symbol']);\n    }\n    this._prepareEditStageLayer();\n  };\n  _proto._prepareEditStageLayer = function _prepareEditStageLayer() {\n    var layer = this._geometry.getLayer();\n    if (layer.options['renderer'] !== 'canvas') {\n      return;\n    }\n    var map = this.getMap();\n    var uid = UID();\n    var shadowId = EDIT_STAGE_LAYER_PREFIX + uid + '_shadow';\n    this._shadowLayer = map.getLayer(shadowId);\n    if (!this._shadowLayer) {\n      var LayerType = layer.constructor;\n      this._shadowLayer = new LayerType(shadowId);\n      map.addLayer(this._shadowLayer);\n    }\n  };\n  _proto.start = function start() {\n    if (!this._geometry || !this._geometry.getMap() || this._geometry.editing) {\n      return;\n    }\n    this.editing = true;\n    this.prepare();\n    var geometry = this._geometry;\n    var shadow;\n    var layer = this._geometry.getLayer();\n    var needShadow = layer.options['renderer'] === 'canvas';\n    this._geometryDraggble = geometry.options['draggable'];\n    if (needShadow) {\n      geometry.config('draggable', false);\n      shadow = geometry.copy();\n      shadow.setSymbol(geometry._getInternalSymbol());\n      shadow.copyEventListeners(geometry);\n      if (geometry._getParent()) {\n        shadow.copyEventListeners(geometry._getParent());\n      }\n      shadow._setEventTarget(geometry);\n      shadow.setId(null).config({\n        'draggable': false\n      });\n      this._shadow = shadow;\n      geometry.hide();\n    } else if (geometry instanceof Marker) {\n      geometry.config('draggable', true);\n    }\n    this._switchGeometryEvents('on');\n    if (geometry instanceof Marker || geometry instanceof Circle || geometry instanceof Rectangle || geometry instanceof Ellipse) {\n      this._createOrRefreshOutline();\n    }\n    if (this._shadowLayer) {\n      this._shadowLayer.bringToFront().addGeometry(shadow);\n    }\n    if (!(geometry instanceof Marker)) {\n      this._createCenterHandle();\n    } else if (shadow) {\n      shadow.config('draggable', true);\n      shadow.on('dragend', this._onMarkerDragEnd, this);\n    }\n    if (geometry instanceof Marker && this.options['resize'] !== false) {\n      this.createMarkerEditor();\n    } else if (geometry instanceof Circle) {\n      this.createCircleEditor();\n    } else if (geometry instanceof Rectangle) {\n      this.createEllipseOrRectEditor();\n    } else if (geometry instanceof Ellipse) {\n      this.createEllipseOrRectEditor();\n    } else if (geometry instanceof Sector) ; else if (geometry instanceof Polygon || geometry instanceof LineString) {\n      this.createPolygonEditor();\n    }\n  };\n  _proto.stop = function stop() {\n    delete this._history;\n    delete this._historyPointer;\n    delete this._editOutline;\n    this._switchGeometryEvents('off');\n    var map = this.getMap();\n    if (!map) {\n      this.fire('remove');\n      return;\n    }\n    this._geometry.config('draggable', this._geometryDraggble);\n    if (this._shadow) {\n      delete this._shadow;\n      delete this._geometryDraggble;\n      this._geometry.show();\n    }\n    if (this._shadowLayer) {\n      this._shadowLayer.remove();\n      delete this._shadowLayer;\n    }\n    this._refreshHooks = [];\n    if (this.options['symbol']) {\n      this._geometry.setSymbol(this._originalSymbol);\n      delete this._originalSymbol;\n    }\n    this.editing = false;\n    this.fire('remove');\n  };\n  _proto.isEditing = function isEditing() {\n    if (isNil(this.editing)) {\n      return false;\n    }\n    return this.editing;\n  };\n  _proto._getGeometryEvents = function _getGeometryEvents() {\n    return {\n      'symbolchange': this._onGeoSymbolChange,\n      'dragstart': this._onDragStart,\n      'dragend': this._onDragEnd,\n      'positionchange shapechange': this._exeAndReset\n    };\n  };\n  _proto._switchGeometryEvents = function _switchGeometryEvents(oper) {\n    if (this._geometry) {\n      var events = this._getGeometryEvents();\n      for (var p in events) {\n        this._geometry[oper](p, events[p], this);\n      }\n    }\n  };\n  _proto._onGeoSymbolChange = function _onGeoSymbolChange(param) {\n    if (this._shadow) {\n      this._shadow.setSymbol(param.target._getInternalSymbol());\n    }\n  };\n  _proto._onMarkerDragEnd = function _onMarkerDragEnd() {\n    this._update('setCoordinates', this._shadow.getCoordinates().toArray());\n  };\n  _proto._createOrRefreshOutline = function _createOrRefreshOutline() {\n    var geometry = this._geometry;\n    var outline = this._editOutline;\n    if (!outline) {\n      this._editOutline = new EditOutline(this, this.getMap());\n      this._addRefreshHook(this._createOrRefreshOutline);\n    }\n    var points = this._editOutline.points;\n    if (geometry instanceof Marker) {\n      this._editOutline.setPoints(geometry.getContainerExtent().toArray(points));\n    } else {\n      var map = this.getMap();\n      var extent = geometry._getPrjExtent();\n      points = extent.toArray(points);\n      points.forEach(function (c) {\n        return map._prjToContainerPoint(c, null, c);\n      });\n      this._editOutline.setPoints(points);\n    }\n    return outline;\n  };\n  _proto._createCenterHandle = function _createCenterHandle() {\n    var _this2 = this;\n    var map = this.getMap();\n    var symbol = this.options['centerHandleSymbol'];\n    var shadow;\n    var cointainerPoint = map.coordToContainerPoint(this._geometry.getCenter());\n    var handle = this.createHandle(cointainerPoint, {\n      'symbol': symbol,\n      'cursor': 'move',\n      onDown: function onDown() {\n        if (_this2._shadow) {\n          shadow = _this2._shadow.copy();\n          var _symbol = lowerSymbolOpacity(shadow._getInternalSymbol(), 0.5);\n          shadow.setSymbol(_symbol).addTo(_this2._geometry.getLayer());\n        }\n      },\n      onMove: function onMove(param) {\n        var offset = param['coordOffset'];\n        if (shadow) {\n          shadow.translate(offset);\n        } else {\n          _this2._geometry.translate(offset);\n        }\n      },\n      onUp: function onUp() {\n        if (shadow) {\n          var shadowFirst = shadow.getFirstCoordinate();\n          var first = _this2._geometry.getFirstCoordinate();\n          var offset = shadowFirst.sub(first);\n          _this2._update('translate', offset);\n          shadow.remove();\n        }\n      }\n    });\n    this._addRefreshHook(function () {\n      var center = _this2._geometry.getCenter();\n      handle.setContainerPoint(map.coordToContainerPoint(center));\n    });\n  };\n  _proto._createHandleInstance = function _createHandleInstance(containerPoint, opts) {\n    var map = this.getMap();\n    var symbol = loadFunctionTypes(opts['symbol'], function () {\n      return [map.getZoom(), {\n        '{bearing}': map.getBearing(),\n        '{pitch}': map.getPitch(),\n        '{zoom}': map.getZoom()\n      }];\n    });\n    var removeVertexOn = this.options['removeVertexOn'];\n    var handle = new EditHandle(this, map, {\n      symbol: symbol,\n      cursor: opts['cursor'],\n      events: removeVertexOn\n    });\n    handle.setContainerPoint(containerPoint);\n    return handle;\n  };\n  _proto.createHandle = function createHandle(containerPoint, opts) {\n    if (!opts) {\n      opts = {};\n    }\n    var handle = this._createHandleInstance(containerPoint, opts);\n    var me = this;\n    function onHandleDragstart(param) {\n      this._updating = true;\n      if (opts.onDown) {\n        this._geometry.fire('handledragstart');\n        opts.onDown.call(me, param['containerPoint'], param);\n      }\n      return false;\n    }\n    function onHandleDragging(param) {\n      me._hideContext();\n      if (opts.onMove) {\n        this._geometry.fire('handledragging');\n        opts.onMove.call(me, param);\n      }\n      return false;\n    }\n    function onHandleDragEnd(ev) {\n      if (opts.onUp) {\n        this._geometry.fire('handledragend');\n        opts.onUp.call(me, ev);\n      }\n      this._updating = false;\n      return false;\n    }\n    handle.on('dragstart', onHandleDragstart, this);\n    handle.on('dragging', onHandleDragging, this);\n    handle.on('dragend', onHandleDragEnd, this);\n    if (opts.onRefresh) {\n      handle.refresh = opts.onRefresh;\n    }\n    return handle;\n  };\n  _proto._createResizeHandles = function _createResizeHandles(blackList, onHandleMove, onHandleUp) {\n    var _this3 = this;\n    var cursors = ['nw-resize', 'n-resize', 'ne-resize', 'w-resize', 'e-resize', 'sw-resize', 's-resize', 'se-resize'];\n    var axis = [null, 'y', null, 'x', 'x', null, 'y', null];\n    var geometry = this._geometry;\n    var isMarker = geometry instanceof Marker;\n    function getResizeAnchors() {\n      if (isMarker) {\n        var _ext = geometry.getContainerExtent();\n        return [new Point(_ext['xmin'], _ext['ymin']), new Point((_ext['xmax'] + _ext['xmin']) / 2, _ext['ymin']), new Point(_ext['xmax'], _ext['ymin']), new Point(_ext['xmin'], (_ext['ymin'] + _ext['ymax']) / 2), new Point(_ext['xmax'], (_ext['ymin'] + _ext['ymax']) / 2), new Point(_ext['xmin'], _ext['ymax']), new Point((_ext['xmax'] + _ext['xmin']) / 2, _ext['ymax']), new Point(_ext['xmax'], _ext['ymax'])];\n      }\n      var ext = geometry._getPrjExtent();\n      return [new Point(ext['xmin'], ext['ymax']), new Point((ext['xmax'] + ext['xmin']) / 2, ext['ymax']), new Point(ext['xmax'], ext['ymax']), new Point(ext['xmin'], (ext['ymax'] + ext['ymin']) / 2), new Point(ext['xmax'], (ext['ymax'] + ext['ymin']) / 2), new Point(ext['xmin'], ext['ymin']), new Point((ext['xmax'] + ext['xmin']) / 2, ext['ymin']), new Point(ext['xmax'], ext['ymin'])];\n    }\n    if (!blackList) {\n      blackList = [];\n    }\n    var me = this;\n    var resizeHandles = [],\n      anchorIndexes = {},\n      map = this.getMap(),\n      handleSymbol = this.options['vertexHandleSymbol'];\n    var fnLocateHandles = function fnLocateHandles() {\n      var anchors = getResizeAnchors();\n      var _loop = function _loop(i) {\n        if (Array.isArray(blackList)) {\n          var isBlack = blackList.some(function (ele) {\n            return ele === i;\n          });\n          if (isBlack) {\n            return \"continue\";\n          }\n        }\n        var anchor = anchors[i],\n          point = isMarker ? anchor : map._prjToContainerPoint(anchor);\n        if (resizeHandles.length < anchors.length - blackList.length) {\n          var handle = _this3.createHandle(point, {\n            'symbol': handleSymbol,\n            'cursor': cursors[i],\n            'axis': axis[i],\n            onMove: function (_index) {\n              return function (e) {\n                me._updating = true;\n                onHandleMove(e.containerPoint, _index);\n                geometry.fire('resizing');\n              };\n            }(i),\n            onUp: function onUp() {\n              me._updating = false;\n              onHandleUp();\n            }\n          });\n          anchorIndexes[i] = resizeHandles.length;\n          resizeHandles.push(handle);\n        } else {\n          resizeHandles[anchorIndexes[i]].setContainerPoint(point);\n        }\n      };\n      for (var i = 0; i < anchors.length; i++) {\n        var _ret = _loop(i);\n        if (_ret === \"continue\") continue;\n      }\n    };\n    fnLocateHandles();\n    this._addRefreshHook(fnLocateHandles);\n    return resizeHandles;\n  };\n  _proto.createMarkerEditor = function createMarkerEditor() {\n    var _this4 = this;\n    var geometryToEdit = this._shadow || this._geometry,\n      map = this.getMap();\n    if (!geometryToEdit._canEdit()) {\n      if (console) {\n        console.warn('A marker can\\'t be resized with symbol:', geometryToEdit.getSymbol());\n      }\n      return;\n    }\n    if (!this._history) {\n      this._recordHistory(getUpdates());\n    }\n    var symbol = geometryToEdit._getInternalSymbol();\n    var dxdy = new Point(0, 0);\n    if (isNumber(symbol['markerDx'])) {\n      dxdy.x = symbol['markerDx'];\n    }\n    if (isNumber(symbol['markerDy'])) {\n      dxdy.y = symbol['markerDy'];\n    }\n    var blackList = null;\n    var verticalAnchor = 'middle';\n    var horizontalAnchor = 'middle';\n    if (VectorMarkerSymbolizer.test(symbol)) {\n      var type = symbol['markerType'];\n      if (type === 'pin' || type === 'pie' || type === 'bar') {\n        blackList = [5, 6, 7];\n        verticalAnchor = 'bottom';\n      } else if (type === 'rectangle') {\n        blackList = [0, 1, 2, 3, 5];\n        verticalAnchor = 'top';\n        horizontalAnchor = 'left';\n      }\n    } else if (ImageMarkerSymbolizer.test(symbol) || VectorPathMarkerSymbolizer.test(symbol)) {\n      verticalAnchor = 'bottom';\n      blackList = [5, 6, 7];\n    }\n    var resizeAbilities = [2, 1, 2, 0, 0, 2, 1, 2];\n    var aspectRatio;\n    if (this.options['fixAspectRatio']) {\n      var size = geometryToEdit.getSize();\n      aspectRatio = size.width / size.height;\n    }\n    var resizeHandles = this._createResizeHandles(blackList, function (containerPoint, i) {\n      if (blackList && blackList.indexOf(i) >= 0) {\n        var newCoordinates = map.containerPointToCoordinate(containerPoint.sub(dxdy));\n        var coordinates = geometryToEdit.getCoordinates();\n        newCoordinates.x = coordinates.x;\n        geometryToEdit.setCoordinates(newCoordinates);\n        _this4._updateCoordFromShadow(true);\n        var mirrorHandle = resizeHandles[resizeHandles.length - 1 - i];\n        var mirror = mirrorHandle.getContainerPoint();\n        containerPoint = mirror;\n      }\n      var viewCenter = map.coordToContainerPoint(geometryToEdit.getCoordinates()).add(dxdy),\n        symbol = geometryToEdit._getInternalSymbol();\n      var wh = containerPoint.sub(viewCenter);\n      if (verticalAnchor === 'bottom' && containerPoint.y > viewCenter.y) {\n        wh.y = 0;\n      }\n      var vr = verticalAnchor === 'middle' ? 2 : 1;\n      var hr = horizontalAnchor === 'left' ? 1 : 2;\n      var width = Math.abs(wh.x) * hr,\n        height = Math.abs(wh.y) * vr;\n      if (aspectRatio) {\n        width = Math.max(width, height * aspectRatio);\n        height = width / aspectRatio;\n      }\n      var ability = resizeAbilities[i];\n      if (!(geometryToEdit instanceof TextBox)) {\n        if (aspectRatio || ability === 0 || ability === 2) {\n          symbol['markerWidth'] = Math.min(width, _this4._geometry.options['maxMarkerWidth'] || Infinity);\n        }\n        if (aspectRatio || ability === 1 || ability === 2) {\n          symbol['markerHeight'] = Math.min(height, _this4._geometry.options['maxMarkerHeight'] || Infinity);\n        }\n        geometryToEdit.setSymbol(symbol);\n        if (geometryToEdit !== _this4._geometry) {\n          _this4._geometry.setSymbol(symbol);\n        }\n      } else {\n        if (aspectRatio || ability === 0 || ability === 2) {\n          geometryToEdit.setWidth(width);\n          if (geometryToEdit !== _this4._geometry) {\n            _this4._geometry.setWidth(width);\n          }\n        }\n        if (aspectRatio || ability === 1 || ability === 2) {\n          geometryToEdit.setHeight(height);\n          if (geometryToEdit !== _this4._geometry) {\n            _this4._geometry.setHeight(height);\n          }\n        }\n      }\n    }, function () {\n      _this4._update(getUpdates());\n    });\n    function getUpdates() {\n      var updates = [['setCoordinates', geometryToEdit.getCoordinates().toArray()]];\n      if (geometryToEdit instanceof TextBox) {\n        updates.push(['setWidth', geometryToEdit.getWidth()]);\n        updates.push(['setHeight', geometryToEdit.getHeight()]);\n      } else {\n        updates.push(['setSymbol', geometryToEdit.getSymbol()]);\n      }\n      return updates;\n    }\n  };\n  _proto.createCircleEditor = function createCircleEditor() {\n    var _this5 = this;\n    var geo = this._shadow || this._geometry;\n    var map = this.getMap();\n    if (!this._history) {\n      this._recordHistory([['setCoordinates', geo.getCoordinates().toArray()], ['setRadius', geo.getRadius()]]);\n    }\n    this._createResizeHandles(null, function (handleContainerPoint) {\n      var center = geo.getCenter();\n      var mouseCoordinate = map.containerPointToCoord(handleContainerPoint);\n      var wline = new LineString([[center.x, center.y], [mouseCoordinate.x, center.y]]);\n      var hline = new LineString([[center.x, center.y], [center.x, mouseCoordinate.y]]);\n      var r = Math.max(map.computeGeometryLength(wline), map.computeGeometryLength(hline));\n      geo.setRadius(r);\n      if (geo !== _this5._geometry) {\n        _this5._geometry.setRadius(r);\n      }\n    }, function () {\n      _this5._update('setRadius', geo.getRadius());\n    });\n  };\n  _proto.createEllipseOrRectEditor = function createEllipseOrRectEditor() {\n    var _this6 = this;\n    var resizeAbilities = [2, 1, 2, 0, 0, 2, 1, 2];\n    var geometryToEdit = this._shadow || this._geometry;\n    if (!this._history) {\n      this._recordHistory(getUpdates());\n    }\n    var map = this.getMap();\n    var isRect = this._geometry instanceof Rectangle;\n    var aspectRatio;\n    if (this.options['fixAspectRatio']) {\n      aspectRatio = geometryToEdit.getWidth() / geometryToEdit.getHeight();\n    }\n    var resizeHandles = this._createResizeHandles(null, function (mouseContainerPoint, i) {\n      var r = isRect ? 1 : 2;\n      var pointSub, w, h;\n      var handle = resizeHandles[i];\n      var targetPoint = handle.getContainerPoint();\n      var ability = resizeAbilities[i];\n      if (isRect) {\n        var mirror = resizeHandles[7 - i];\n        var mirrorContainerPoint = mirror.getContainerPoint();\n        pointSub = targetPoint.sub(mirrorContainerPoint);\n        var absSub = pointSub.abs();\n        w = map.pixelToDistance(absSub.x, 0);\n        h = map.pixelToDistance(0, absSub.y);\n        var size = geometryToEdit.getSize();\n        var geoCoord = geometryToEdit.getCoordinates();\n        var width = geometryToEdit.getWidth();\n        var height = geometryToEdit.getHeight();\n        var mouseCoordinate = map.containerPointToCoord(mouseContainerPoint);\n        var mirrorCoordinate = map.containerPointToCoord(mirrorContainerPoint);\n        var wline = new LineString([[mirrorCoordinate.x, mirrorCoordinate.y], [mouseCoordinate.x, mirrorCoordinate.y]]);\n        var hline = new LineString([[mirrorCoordinate.x, mirrorCoordinate.y], [mirrorCoordinate.x, mouseCoordinate.y]]);\n        w = map.computeGeometryLength(wline);\n        h = map.computeGeometryLength(hline);\n        if (ability === 0) {\n          if (aspectRatio) {\n            absSub.y = absSub.x / aspectRatio;\n            size.height = Math.abs(absSub.y);\n            h = w / aspectRatio;\n          }\n          targetPoint.y = mirrorContainerPoint.y - size.height / 2;\n          mouseCoordinate.y = geoCoord.y;\n          if (i === 4) {\n            mouseCoordinate.x = Math.min(mouseCoordinate.x, geoCoord.x);\n          } else {\n            var mirrorCoord = map.locate(geoCoord, width, 0);\n            mouseCoordinate.x = map.locate(new Coordinate(mirrorCoord.x, mouseCoordinate.y), -w, 0).x;\n          }\n        } else if (ability === 1) {\n          if (aspectRatio) {\n            absSub.x = absSub.y * aspectRatio;\n            size.width = Math.abs(absSub.x);\n            w = h * aspectRatio;\n          }\n          targetPoint.x = mirrorContainerPoint.x - size.width / 2;\n          mouseCoordinate.x = geoCoord.x;\n          mouseCoordinate.y = Math.max(mouseCoordinate.y, mirrorCoordinate.y);\n        } else {\n          if (aspectRatio) {\n            if (w > h * aspectRatio) {\n              h = w / aspectRatio;\n              targetPoint.y = mirrorContainerPoint.y + absSub.x * sign(pointSub.y) / aspectRatio;\n            } else {\n              w = h * aspectRatio;\n              targetPoint.x = mirrorContainerPoint.x + absSub.y * sign(pointSub.x) * aspectRatio;\n            }\n          }\n          if (i === 0 || i === 5) {\n            var _mirrorCoord = i === 0 ? map.locate(geoCoord, width, 0) : map.locate(geoCoord, width, -height);\n            mouseCoordinate.x = map.locate(new Coordinate(_mirrorCoord.x, mouseCoordinate.y), -w, 0).x;\n          } else {\n            mouseCoordinate.x = Math.min(mouseCoordinate.x, mirrorCoordinate.x);\n          }\n          mouseCoordinate.y = Math.max(mouseCoordinate.y, mirrorCoordinate.y);\n        }\n        geometryToEdit.setCoordinates(mouseCoordinate);\n        _this6._updateCoordFromShadow(true);\n      } else {\n        var center = geometryToEdit.getCenter();\n        var _mouseCoordinate = map.containerPointToCoord(targetPoint);\n        var _wline = new LineString([[center.x, center.y], [_mouseCoordinate.x, center.y]]);\n        var _hline = new LineString([[center.x, center.y], [center.x, _mouseCoordinate.y]]);\n        w = map.computeGeometryLength(_wline);\n        h = map.computeGeometryLength(_hline);\n        if (aspectRatio) {\n          w = Math.max(w, h * aspectRatio);\n          h = w / aspectRatio;\n        }\n      }\n      if (aspectRatio || ability === 0 || ability === 2) {\n        geometryToEdit.setWidth(w * r);\n        if (geometryToEdit !== _this6._geometry) {\n          _this6._geometry.setWidth(w * r);\n        }\n      }\n      if (aspectRatio || ability === 1 || ability === 2) {\n        geometryToEdit.setHeight(h * r);\n        if (geometryToEdit !== _this6._geometry) {\n          _this6._geometry.setHeight(h * r);\n        }\n      }\n    }, function () {\n      _this6._update(getUpdates());\n    });\n    function getUpdates() {\n      return [['setCoordinates', geometryToEdit.getCoordinates().toArray()], ['setWidth', geometryToEdit.getWidth()], ['setHeight', geometryToEdit.getHeight()]];\n    }\n  };\n  _proto.createPolygonEditor = function createPolygonEditor() {\n    var map = this.getMap(),\n      geoToEdit = this._shadow || this._geometry,\n      me = this;\n    if (!this._history) {\n      this._recordHistory('setCoordinates', Coordinate.toNumberArrays(geoToEdit.getCoordinates()));\n    }\n    var verticeLimit = geoToEdit instanceof Polygon ? 3 : 2;\n    var propertyOfVertexIndex = 'maptalks--editor-vertex-index';\n    var vertexHandles = {\n        0: []\n      },\n      newVertexHandles = {\n        0: []\n      };\n    function getVertexCoordinates(ringIndex) {\n      if (ringIndex === void 0) {\n        ringIndex = 0;\n      }\n      if (geoToEdit instanceof Polygon) {\n        var coordinates = geoToEdit.getCoordinates()[ringIndex] || [];\n        return coordinates.slice(0, coordinates.length - 1);\n      } else {\n        return geoToEdit.getCoordinates();\n      }\n    }\n    function getVertexPrjCoordinates(ringIndex) {\n      if (ringIndex === void 0) {\n        ringIndex = 0;\n      }\n      if (ringIndex === 0) {\n        return geoToEdit._getPrjCoordinates();\n      }\n      return geoToEdit._getPrjHoles()[ringIndex - 1];\n    }\n    function onVertexAddOrRemove() {\n      for (var ringIndex in vertexHandles) {\n        for (var i = vertexHandles[ringIndex].length - 1; i >= 0; i--) {\n          vertexHandles[ringIndex][i][propertyOfVertexIndex] = i;\n        }\n        for (var _i = newVertexHandles[ringIndex].length - 1; _i >= 0; _i--) {\n          newVertexHandles[ringIndex][_i][propertyOfVertexIndex] = _i;\n        }\n      }\n      me._updateCoordFromShadow();\n    }\n    function removeVertex(param) {\n      me._updating = true;\n      var handle = param['target'],\n        index = handle[propertyOfVertexIndex];\n      var ringIndex = isNumber(handle._ringIndex) ? handle._ringIndex : 0;\n      var prjCoordinates = getVertexPrjCoordinates(ringIndex);\n      if (prjCoordinates.length <= verticeLimit) {\n        return;\n      }\n      var isEnd = geoToEdit instanceof LineString && (index === 0 || index === prjCoordinates.length - 1);\n      prjCoordinates.splice(index, 1);\n      if (ringIndex > 0) {\n        geoToEdit._prjHoles[ringIndex - 1] = prjCoordinates;\n      } else {\n        geoToEdit._setPrjCoordinates(prjCoordinates);\n      }\n      geoToEdit._updateCache();\n      vertexHandles[ringIndex].splice(index, 1)[0].delete();\n      if (index < newVertexHandles[ringIndex].length) {\n        newVertexHandles[ringIndex].splice(index, 1)[0].delete();\n      }\n      var nextIndex;\n      if (index === 0) {\n        nextIndex = newVertexHandles[ringIndex].length - 1;\n      } else {\n        nextIndex = index - 1;\n      }\n      newVertexHandles[ringIndex].splice(nextIndex, 1)[0].delete();\n      if (!isEnd) {\n        newVertexHandles[ringIndex].splice(nextIndex, 0, createNewVertexHandle.call(me, nextIndex, ringIndex));\n      }\n      if (ringIndex > 0) {\n        var coordiantes = geoToEdit.getCoordinates();\n        var ring = coordiantes[ringIndex];\n        if (ring && Array.isArray(ring) && ring.length > 1) {\n          ring.splice(index, 1);\n          if (geoToEdit !== this._geometry) {\n            geoToEdit.setCoordinates(coordiantes);\n          }\n        }\n      }\n      onVertexAddOrRemove();\n      me._updating = false;\n    }\n    function moveVertexHandle(handleConatainerPoint, index, ringIndex) {\n      if (ringIndex === void 0) {\n        ringIndex = 0;\n      }\n      var snapTo = me._geometry.snapTo;\n      if (snapTo && isFunction(snapTo)) {\n        handleConatainerPoint = me._geometry.snapTo(handleConatainerPoint) || handleConatainerPoint;\n      }\n      var vertice = getVertexPrjCoordinates(ringIndex);\n      var nVertex = map._containerPointToPrj(handleConatainerPoint.sub(getDxDy()));\n      var pVertex = vertice[index];\n      pVertex.x = nVertex.x;\n      pVertex.y = nVertex.y;\n      geoToEdit._updateCache();\n      geoToEdit.onShapeChanged();\n      me._updateCoordFromShadow(true);\n      var nextIndex;\n      if (index === 0) {\n        nextIndex = newVertexHandles[ringIndex].length - 1;\n      } else {\n        nextIndex = index - 1;\n      }\n      if (newVertexHandles[ringIndex][index]) {\n        newVertexHandles[ringIndex][index].refresh();\n      }\n      if (newVertexHandles[ringIndex][nextIndex]) {\n        newVertexHandles[ringIndex][nextIndex].refresh();\n      }\n    }\n    var hanldeDxdy = new Point(0, 0);\n    function getDxDy() {\n      var compiledSymbol = geoToEdit._getCompiledSymbol();\n      hanldeDxdy.x = compiledSymbol.lineDx || 0;\n      hanldeDxdy.y = compiledSymbol.lineDy || 0;\n      return hanldeDxdy;\n    }\n    function createVertexHandle(index, ringIndex, ringCoordinates) {\n      if (ringIndex === void 0) {\n        ringIndex = 0;\n      }\n      var vertex = (ringCoordinates || getVertexCoordinates(ringIndex))[index];\n      var handle = me.createHandle(map.coordToContainerPoint(vertex)._add(getDxDy()), {\n        'symbol': me.options['vertexHandleSymbol'],\n        'cursor': 'pointer',\n        'axis': null,\n        onMove: function onMove() {\n          moveVertexHandle(handle.getContainerPoint(), handle[propertyOfVertexIndex], ringIndex);\n        },\n        onRefresh: function onRefresh(rIndex, ringCoordinates) {\n          vertex = (ringCoordinates || getVertexCoordinates(ringIndex))[handle[propertyOfVertexIndex]];\n          var containerPoint = map.coordToContainerPoint(vertex);\n          handle.setContainerPoint(containerPoint._add(getDxDy()));\n        },\n        onUp: function onUp() {\n          me._updateCoordFromShadow();\n        },\n        onDown: function onDown(param, e) {\n          if (e && e.domEvent && e.domEvent.button === 2) {\n            return;\n          }\n        }\n      });\n      handle[propertyOfVertexIndex] = index;\n      handle._ringIndex = ringIndex;\n      handle.on(me.options['removeVertexOn'], removeVertex);\n      return handle;\n    }\n    var pauseRefresh = false;\n    function createNewVertexHandle(index, ringIndex, ringCoordinates) {\n      if (ringIndex === void 0) {\n        ringIndex = 0;\n      }\n      var vertexCoordinates = ringCoordinates || getVertexCoordinates(ringIndex);\n      var nextVertex;\n      if (index + 1 >= vertexCoordinates.length) {\n        nextVertex = vertexCoordinates[0];\n      } else {\n        nextVertex = vertexCoordinates[index + 1];\n      }\n      var vertex = vertexCoordinates[index].add(nextVertex).multi(1 / 2);\n      var handle = me.createHandle(vertex, {\n        'symbol': me.options['newVertexHandleSymbol'],\n        'cursor': 'pointer',\n        'axis': null,\n        onDown: function onDown(param, e) {\n          if (e && e.domEvent && e.domEvent.button === 2) {\n            return;\n          }\n          var prjCoordinates = getVertexPrjCoordinates(ringIndex);\n          var vertexIndex = handle[propertyOfVertexIndex];\n          var cp = handle.getContainerPoint();\n          var pVertex = map._containerPointToPrj(cp);\n          prjCoordinates.splice(vertexIndex + 1, 0, pVertex);\n          if (ringIndex > 0) {\n            geoToEdit._prjHoles[ringIndex - 1] = prjCoordinates;\n          } else {\n            geoToEdit._setPrjCoordinates(prjCoordinates);\n          }\n          geoToEdit._updateCache();\n          handle.opacity = 1;\n          newVertexHandles[ringIndex].splice(vertexIndex, 0, createNewVertexHandle.call(me, vertexIndex, ringIndex), createNewVertexHandle.call(me, vertexIndex + 1, ringIndex));\n          pauseRefresh = true;\n        },\n        onMove: function onMove() {\n          moveVertexHandle(handle.getContainerPoint(), handle[propertyOfVertexIndex] + 1, ringIndex);\n        },\n        onUp: function onUp(e) {\n          if (e && e.domEvent && e.domEvent.button === 2) {\n            pauseRefresh = false;\n            return;\n          }\n          var vertexIndex = handle[propertyOfVertexIndex];\n          removeFromArray(handle, newVertexHandles[ringIndex]);\n          handle.delete();\n          vertexHandles[ringIndex].splice(vertexIndex + 1, 0, createVertexHandle.call(me, vertexIndex + 1, ringIndex));\n          onVertexAddOrRemove();\n          me._updateCoordFromShadow();\n          pauseRefresh = false;\n        },\n        onRefresh: function onRefresh(rIndex, ringCoordinates) {\n          vertexCoordinates = ringCoordinates || getVertexCoordinates(rIndex);\n          var vertexIndex = handle[propertyOfVertexIndex];\n          var nextIndex;\n          if (vertexIndex === vertexCoordinates.length - 1) {\n            nextIndex = 0;\n          } else {\n            nextIndex = vertexIndex + 1;\n          }\n          var refreshVertex = vertexCoordinates[vertexIndex].add(vertexCoordinates[nextIndex]).multi(1 / 2);\n          var containerPoint = map.coordToContainerPoint(refreshVertex);\n          handle.setContainerPoint(containerPoint._add(getDxDy()));\n        }\n      });\n      handle[propertyOfVertexIndex] = index;\n      return handle;\n    }\n    if (geoToEdit instanceof Polygon) {\n      var rings = geoToEdit.getHoles().length + 1;\n      for (var ringIndex = 0; ringIndex < rings; ringIndex++) {\n        vertexHandles[ringIndex] = [];\n        newVertexHandles[ringIndex] = [];\n        var vertexCoordinates = getVertexCoordinates(ringIndex);\n        for (var i = 0, len = vertexCoordinates.length; i < len; i++) {\n          vertexHandles[ringIndex].push(createVertexHandle.call(this, i, ringIndex, vertexCoordinates));\n          if (i < len - 1) {\n            newVertexHandles[ringIndex].push(createNewVertexHandle.call(this, i, ringIndex, vertexCoordinates));\n          }\n        }\n        newVertexHandles[ringIndex].push(createNewVertexHandle.call(this, vertexCoordinates.length - 1, ringIndex, vertexCoordinates));\n      }\n    } else {\n      var _ringIndex = 0;\n      var _vertexCoordinates = getVertexCoordinates(_ringIndex);\n      for (var _i2 = 0, _len = _vertexCoordinates.length; _i2 < _len; _i2++) {\n        vertexHandles[_ringIndex].push(createVertexHandle.call(this, _i2, _ringIndex, _vertexCoordinates));\n        if (_i2 < _len - 1) {\n          newVertexHandles[_ringIndex].push(createNewVertexHandle.call(this, _i2, _ringIndex, _vertexCoordinates));\n        }\n      }\n      if (newVertexHandles[_ringIndex].length && geoToEdit.getCoordinates().length === 2) {\n        newVertexHandles[_ringIndex][0].options.symbol['markerDx'] = 12;\n      }\n    }\n    this._addRefreshHook(function () {\n      if (pauseRefresh) {\n        return;\n      }\n      for (var _ringIndex2 in newVertexHandles) {\n        var ringCoordinates = getVertexCoordinates(_ringIndex2);\n        for (var _i3 = newVertexHandles[_ringIndex2].length - 1; _i3 >= 0; _i3--) {\n          newVertexHandles[_ringIndex2][_i3].refresh(_ringIndex2, ringCoordinates);\n        }\n      }\n      if (newVertexHandles[0].length && geoToEdit instanceof LineString) {\n        if (geoToEdit.getCoordinates().length === 2) {\n          newVertexHandles[0][0].options.symbol['markerDx'] = 12;\n        } else if (geoToEdit.getCoordinates().length > 2) {\n          newVertexHandles[0][0].options.symbol['markerDx'] = 0;\n        }\n      }\n      for (var _ringIndex3 in vertexHandles) {\n        var _ringCoordinates = getVertexCoordinates(_ringIndex3);\n        for (var _i4 = vertexHandles[_ringIndex3].length - 1; _i4 >= 0; _i4--) {\n          vertexHandles[_ringIndex3][_i4].refresh(_ringIndex3, _ringCoordinates);\n        }\n      }\n    });\n  };\n  _proto._refresh = function _refresh() {\n    if (this._refreshHooks) {\n      for (var i = this._refreshHooks.length - 1; i >= 0; i--) {\n        this._refreshHooks[i].call(this);\n      }\n    }\n  };\n  _proto._hideContext = function _hideContext() {\n    if (this._geometry) {\n      this._geometry.closeMenu();\n      this._geometry.closeInfoWindow();\n    }\n  };\n  _proto._addRefreshHook = function _addRefreshHook(fn) {\n    if (!fn) {\n      return;\n    }\n    if (!this._refreshHooks) {\n      this._refreshHooks = [];\n    }\n    this._refreshHooks.push(fn);\n  };\n  _proto._update = function _update(method) {\n    for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key = 1; _key < _len2; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n    this._exeHistory([method, args]);\n    this._recordHistory.apply(this, [method].concat(args));\n  };\n  _proto._updateCoordFromShadow = function _updateCoordFromShadow(ignoreRecord) {\n    var geoToEdit = this._shadow || this._geometry;\n    var coords = geoToEdit.getCoordinates();\n    var geo = this._geometry;\n    var updating = this._updating;\n    this._updating = true;\n    geo.setCoordinates(coords);\n    if (!ignoreRecord) {\n      this._recordHistory('setCoordinates', Coordinate.toNumberArrays(geo.getCoordinates()));\n    }\n    this._updating = updating;\n  };\n  _proto._recordHistory = function _recordHistory(method) {\n    if (!this._history) {\n      this._history = [];\n      this._historyPointer = 0;\n    }\n    for (var _len3 = arguments.length, args = new Array(_len3 > 1 ? _len3 - 1 : 0), _key2 = 1; _key2 < _len3; _key2++) {\n      args[_key2 - 1] = arguments[_key2];\n    }\n    if (this._history.length) {\n      var lastOperation = this._history[this._history.length - 1];\n      if (lastOperation[0] === method && JSON.stringify(lastOperation[1]) === JSON.stringify(args)) {\n        return;\n      }\n    }\n    if (this._historyPointer < this._history.length - 1) {\n      this._history.splice(this._historyPointer + 1);\n    }\n    this._history.push([method, args]);\n    this._historyPointer = this._history.length - 1;\n    this._geometry.fire('editrecord');\n  };\n  _proto.cancel = function cancel() {\n    if (!this._history || this._historyPointer === 0) {\n      return this;\n    }\n    this._historyPointer = 0;\n    var record = this._history[0];\n    this._exeAndReset(record);\n    return this;\n  };\n  _proto.undo = function undo() {\n    if (!this._history || this._historyPointer === 0) {\n      return this;\n    }\n    var record = this._history[--this._historyPointer];\n    this._exeAndReset(record);\n    return this;\n  };\n  _proto.redo = function redo() {\n    if (!this._history || this._historyPointer === this._history.length - 1) {\n      return this;\n    }\n    var record = this._history[++this._historyPointer];\n    this._exeAndReset(record);\n    return this;\n  };\n  _proto._exeAndReset = function _exeAndReset(record) {\n    if (this._updating) {\n      return;\n    }\n    this._exeHistory(record);\n    var history = this._history,\n      pointer = this._historyPointer;\n    this.stop();\n    this._history = history;\n    this._historyPointer = pointer;\n    this.start();\n  };\n  _proto._onDragStart = function _onDragStart() {\n    this._updating = true;\n  };\n  _proto._onDragEnd = function _onDragEnd() {\n    this._updating = false;\n  };\n  _proto._exeHistory = function _exeHistory(record) {\n    if (!Array.isArray(record)) {\n      return;\n    }\n    var updating = this._updating;\n    this._updating = true;\n    var geoToEdit = this._shadow || this._geometry;\n    var geo = this._geometry;\n    if (Array.isArray(record[0])) {\n      record[0].forEach(function (o) {\n        var m = o[0],\n          args = o.slice(1);\n        geoToEdit[m].apply(geoToEdit, args);\n        if (geoToEdit !== geo) {\n          geo[m].apply(geo, args);\n        }\n      });\n    } else {\n      geoToEdit[record[0]].apply(geoToEdit, record[1]);\n      if (geoToEdit !== geo) {\n        geo[record[0]].apply(geo, record[1]);\n      }\n    }\n    this._updating = updating;\n  };\n  return GeometryEditor;\n}(Eventable(Class));\nGeometryEditor.mergeOptions(options$C);\n\nvar TextEditable = {\n  startEditText: function startEditText() {\n    if (!this.getMap()) {\n      return this;\n    }\n    this.hide();\n    this.endEditText();\n    this._prepareEditor();\n    this._fireEvent('edittextstart');\n    return this;\n  },\n  endEditText: function endEditText() {\n    if (this._textEditor) {\n      var html = this._textEditor.innerHTML;\n      html = html.replace(/<p>/ig, '').replace(/<\\/p>/ig, '<br/>');\n      this._textEditor.innerHTML = html;\n      var content = this._textEditor.innerText.replace(/[\\r\\n]+$/gi, '');\n      this.setContent(content);\n      off(this._textEditor, 'mousedown dblclick', stopPropagation);\n      this.getMap().off('mousedown', this.endEditText, this);\n      this._editUIMarker.remove();\n      delete this._editUIMarker;\n      this._textEditor.onkeyup = null;\n      delete this._textEditor;\n      this.show();\n      this._fireEvent('edittextend');\n    }\n    return this;\n  },\n  isEditingText: function isEditingText() {\n    if (this._textEditor) {\n      return true;\n    }\n    return false;\n  },\n  getTextEditor: function getTextEditor() {\n    return this._editUIMarker;\n  },\n  _prepareEditor: function _prepareEditor() {\n    var map = this.getMap();\n    var editContainer = this._createEditor();\n    this._textEditor = editContainer;\n    map.on('mousedown', this.endEditText, this);\n    var offset = this._getEditorOffset();\n    this._editUIMarker = new UIMarker(this.getCoordinates(), {\n      'animation': null,\n      'content': editContainer,\n      'dx': offset.dx,\n      'dy': offset.dy\n    }).addTo(map);\n    this._setCursorToLast(this._textEditor);\n  },\n  _getEditorOffset: function _getEditorOffset() {\n    var symbol = this._getInternalSymbol() || {};\n    var dx = 0,\n      dy = 0;\n    var textAlign = symbol['textHorizontalAlignment'];\n    if (textAlign === 'middle' || isNil(textAlign)) {\n      dx = (symbol['textDx'] || 0) - 2;\n      dy = (symbol['textDy'] || 0) - 2;\n    } else {\n      dx = (symbol['markerDx'] || 0) - 2;\n      dy = (symbol['markerDy'] || 0) - 2;\n    }\n    return {\n      'dx': dx,\n      'dy': dy\n    };\n  },\n  _createEditor: function _createEditor() {\n    var content = this.getContent();\n    var labelSize = this.getSize(),\n      symbol = this._getInternalSymbol() || {},\n      width = labelSize.width,\n      textColor = symbol['textFill'] || '#000000',\n      textSize = symbol['textSize'] || 12,\n      height = labelSize.height,\n      lineColor = symbol['markerLineColor'] || '#000',\n      fill = symbol['markerFill'] || '#3398CC',\n      spacing = symbol['textLineSpacing'] || 0;\n    var editor = createEl('div');\n    editor.contentEditable = true;\n    editor.style.cssText = \"background:\" + fill + \"; border:1px solid \" + lineColor + \";\\n            color:\" + textColor + \";font-size:\" + textSize + \"px;width:\" + (width - 2) + \"px;height:\" + (height - 2) + \"px;margin: auto;\\n            line-height:\" + (textSize + spacing) + \"px;outline: 0; padding:0; margin:0;word-wrap: break-word;\\n            overflow: hidden;-webkit-user-modify: read-write-plaintext-only;\";\n    editor.innerText = content;\n    on(editor, 'mousedown dblclick', stopPropagation);\n    editor.onkeyup = function (event) {\n      var h = editor.style.height || 0;\n      if (event.keyCode === 13) {\n        editor.style.height = parseInt(h) + textSize / 2 + 'px';\n      }\n    };\n    return editor;\n  },\n  _setCursorToLast: function _setCursorToLast(obj) {\n    var range;\n    if (window.getSelection) {\n      obj.focus();\n      range = window.getSelection();\n      range.selectAllChildren(obj);\n      range.collapseToEnd();\n    } else if (document.selection) {\n      range = document.selection.createRange();\n      range.moveToElementText(obj);\n      range.collapse(false);\n      range.select();\n    }\n  }\n};\nTextMarker.include(TextEditable);\n\nGeometry.include({\n  animate: function animate$$1(styles, options, step) {\n    var _this = this;\n    if (this._animPlayer) {\n      this._animPlayer.finish();\n    }\n    if (isFunction(options)) {\n      step = options;\n    }\n    if (!options) {\n      options = {};\n    }\n    var map = this.getMap(),\n      projection = this._getProjection(),\n      stylesToAnimate = this._prepareAnimationStyles(styles);\n    var preTranslate;\n    var isFocusing = options['focus'];\n    delete this._animationStarted;\n    if (map) {\n      var renderer = map._getRenderer();\n      var framer = function framer(fn) {\n        renderer.callInNextFrame(fn);\n      };\n      options['framer'] = framer;\n    }\n    var player = Animation.animate(stylesToAnimate, options, function (frame) {\n      if (map && map.isRemoved()) {\n        player.finish();\n        return;\n      }\n      if (map && !_this._animationStarted && isFocusing) {\n        map.onMoveStart();\n      }\n      var styles = frame.styles;\n      for (var p in styles) {\n        if (p !== 'symbol' && p !== 'translate' && styles.hasOwnProperty(p)) {\n          var fnName = 'set' + p[0].toUpperCase() + p.slice(1);\n          _this[fnName](styles[p]);\n        }\n      }\n      var translate = styles['translate'];\n      if (translate) {\n        var toTranslate = translate;\n        if (preTranslate) {\n          toTranslate = translate.sub(preTranslate);\n        }\n        preTranslate = translate;\n        _this.translate(toTranslate);\n      }\n      var dSymbol = styles['symbol'];\n      if (dSymbol) {\n        var symbol = _this.getSymbol() || {};\n        _this.setSymbol(extendSymbol(symbol, dSymbol));\n      }\n      if (map && isFocusing) {\n        var pcenter = projection.project(_this.getCenter());\n        map._setPrjCenter(pcenter);\n        var e = map._parseEventFromCoord(projection.unproject(pcenter));\n        if (player.playState !== 'running') {\n          map.onMoveEnd(e);\n        } else {\n          map.onMoving(e);\n        }\n      }\n      _this._fireAnimateEvent(player.playState);\n      if (step) {\n        step(frame);\n      }\n    }, this);\n    this._animPlayer = player;\n    return this._animPlayer.play();\n  },\n  _prepareAnimationStyles: function _prepareAnimationStyles(styles) {\n    var symbol = this._getInternalSymbol();\n    var stylesToAnimate = {};\n    for (var p in styles) {\n      if (styles.hasOwnProperty(p)) {\n        var v = styles[p];\n        if (p !== 'translate' && p !== 'symbol') {\n          var fnName = 'get' + p[0].toUpperCase() + p.substring(1);\n          var current = this[fnName]();\n          stylesToAnimate[p] = [current, v];\n        } else if (p === 'symbol') {\n          var symbolToAnimate = void 0;\n          if (Array.isArray(styles['symbol'])) {\n            if (!Array.isArray(symbol)) {\n              throw new Error('geometry\\'symbol isn\\'t a composite symbol, while the symbol in styles is.');\n            }\n            symbolToAnimate = [];\n            var symbolInStyles = styles['symbol'];\n            for (var i = 0; i < symbolInStyles.length; i++) {\n              if (!symbolInStyles[i]) {\n                symbolToAnimate.push(null);\n                continue;\n              }\n              var a = {};\n              for (var sp in symbolInStyles[i]) {\n                if (symbolInStyles[i].hasOwnProperty(sp)) {\n                  a[sp] = [symbol[i][sp], symbolInStyles[i][sp]];\n                }\n              }\n              symbolToAnimate.push(a);\n            }\n          } else {\n            if (Array.isArray(symbol)) {\n              throw new Error('geometry\\'symbol is a composite symbol, while the symbol in styles isn\\'t.');\n            }\n            symbolToAnimate = {};\n            for (var _sp in v) {\n              if (v.hasOwnProperty(_sp)) {\n                symbolToAnimate[_sp] = [symbol[_sp], v[_sp]];\n              }\n            }\n          }\n          stylesToAnimate['symbol'] = symbolToAnimate;\n        } else if (p === 'translate') {\n          stylesToAnimate['translate'] = new Coordinate(v);\n        }\n      }\n    }\n    return stylesToAnimate;\n  },\n  _fireAnimateEvent: function _fireAnimateEvent(playState) {\n    if (playState === 'finished') {\n      delete this._animationStarted;\n      this._fireEvent('animateend');\n    } else if (playState === 'running') {\n      if (this._animationStarted) {\n        this._fireEvent('animating');\n      } else {\n        this._fireEvent('animatestart');\n        this._animationStarted = true;\n      }\n    }\n  }\n});\n\nvar DRAG_STAGE_LAYER_ID = INTERNAL_LAYER_PREFIX + '_drag_stage';\nvar EVENTS$3 = Browser$1.touch ? 'touchstart mousedown' : 'mousedown';\nvar GeometryDragHandler = function (_Handler) {\n  _inheritsLoose(GeometryDragHandler, _Handler);\n  function GeometryDragHandler(target) {\n    return _Handler.call(this, target) || this;\n  }\n  var _proto = GeometryDragHandler.prototype;\n  _proto.addHooks = function addHooks() {\n    this.target.on(EVENTS$3, this._startDrag, this);\n  };\n  _proto.removeHooks = function removeHooks() {\n    this._endDrag();\n    this.target.off(EVENTS$3, this._startDrag, this);\n    delete this.container;\n  };\n  _proto._prepareDragHandler = function _prepareDragHandler() {\n    this._dragHandler = new DragHandler(this.container);\n    this._dragHandler.on('dragging', this._dragging, this).on('mouseup', this._endDrag, this).enable();\n  };\n  _proto._prepareShadow = function _prepareShadow() {\n    var _this = this;\n    var target = this.target;\n    var needShadow = target.getLayer().options['renderer'] === 'canvas';\n    if (!needShadow) {\n      return;\n    }\n    this._prepareDragStageLayer();\n    if (this._shadow) {\n      this._shadow.remove();\n    }\n    var shadow = this._shadow = target.copy();\n    if (shadow.getGeometries) {\n      var shadows = shadow.getGeometries();\n      var geos = target.getGeometries();\n      shadows.forEach(function (g, i) {\n        _this._updateShadowSymbol(g, geos[i]);\n      });\n    } else {\n      this._updateShadowSymbol(shadow, target);\n    }\n    shadow.setId(null);\n    this._prepareShadowConnectors();\n  };\n  _proto._updateShadowSymbol = function _updateShadowSymbol(shadow, target) {\n    shadow.setSymbol(target._getInternalSymbol());\n    if (target.options['dragShadow']) {\n      var symbol = lowerSymbolOpacity(shadow._getInternalSymbol(), 0.5);\n      shadow.setSymbol(symbol);\n    }\n  };\n  _proto._prepareShadowConnectors = function _prepareShadowConnectors() {\n    var target = this.target;\n    var shadow = this._shadow;\n    var resources = this._dragStageLayer._getRenderer().resources;\n    var shadowConnectors = [];\n    if (ConnectorLine._hasConnectors(target)) {\n      var connectors = ConnectorLine._getConnectors(target);\n      for (var i = 0, l = connectors.length; i < l; i++) {\n        var targetConn = connectors[i];\n        var connOptions = targetConn.config(),\n          connSymbol = targetConn._getInternalSymbol();\n        connOptions['symbol'] = lowerSymbolOpacity(connSymbol, 0.5);\n        var conn = void 0;\n        if (targetConn.getConnectSource() === target) {\n          conn = new targetConn.constructor(shadow, targetConn.getConnectTarget(), connOptions);\n        } else {\n          conn = new targetConn.constructor(targetConn.getConnectSource(), shadow, connOptions);\n        }\n        shadowConnectors.push(conn);\n        if (targetConn.getLayer() && targetConn.getLayer()._getRenderer()) {\n          resources.merge(targetConn.getLayer()._getRenderer().resources);\n        }\n      }\n    }\n    this._shadowConnectors = shadowConnectors;\n    shadowConnectors.push(shadow);\n    this._dragStageLayer.bringToFront().addGeometry(shadowConnectors);\n  };\n  _proto._onTargetUpdated = function _onTargetUpdated() {\n    if (this._shadow) {\n      this._shadow.setSymbol(this.target._getSymbol());\n    }\n  };\n  _proto._prepareDragStageLayer = function _prepareDragStageLayer() {\n    var map = this.target.getMap(),\n      layer = this.target.getLayer();\n    this._dragStageLayer = map.getLayer(DRAG_STAGE_LAYER_ID);\n    if (!this._dragStageLayer) {\n      this._dragStageLayer = new VectorLayer(DRAG_STAGE_LAYER_ID, {\n        enableAltitude: layer.options['enableAltitude'],\n        altitudeProperty: layer.options['altitudeProperty']\n      });\n      map.addLayer(this._dragStageLayer);\n    }\n    var resources = new ResourceCache();\n    resources.merge(layer._getRenderer().resources);\n    this._dragStageLayer._getRenderer().resources = resources;\n  };\n  _proto._startDrag = function _startDrag(param) {\n    var map = this.target.getMap();\n    if (!map) {\n      return;\n    }\n    var parent = this.target._getParent();\n    if (parent) {\n      return;\n    }\n    if (this.isDragging()) {\n      return;\n    }\n    var domEvent = param['domEvent'];\n    if (domEvent.touches && domEvent.touches.length > 1 || domEvent.button === 2) {\n      return;\n    }\n    this.container = map._panels.mapWrapper || map._containerDOM;\n    this.target.on('click', this._endDrag, this);\n    this._lastCoord = this._correctCoord(param['coordinate']);\n    this._lastPoint = param['containerPoint'];\n    this._prepareDragHandler();\n    this._dragHandler.onMouseDown(param['domEvent']);\n    on(this.container, 'mouseleave', this._endDrag, this);\n    this._startParam = param;\n    this._moved = false;\n    return;\n  };\n  _proto._dragging = function _dragging(param) {\n    var target = this.target;\n    var map = target.getMap(),\n      e = map._parseEvent(param['domEvent']);\n    var domEvent = e['domEvent'];\n    if (domEvent.touches && domEvent.touches.length > 1) {\n      return;\n    }\n    var visualHeight = map._getVisualHeight(map.options['maxVisualPitch']);\n    if (e.containerPoint.y < map.height - visualHeight) {\n      return;\n    }\n    if (!this._moved) {\n      this._moved = true;\n      target.on('symbolchange', this._onTargetUpdated, this);\n      this._isDragging = true;\n      this._prepareShadow();\n      if (this._shadow) {\n        if (!target.options['dragShadow']) {\n          target.hide();\n        }\n        this._shadow._fireEvent('dragstart', e);\n      }\n      this.target._fireEvent('dragstart', this._startParam || e);\n      delete this._startParam;\n      return;\n    }\n    var geo = this._shadow || target;\n    var axis = geo.options['dragOnAxis'],\n      dragOnScreenAxis = geo.options['dragOnScreenAxis'],\n      point = e['containerPoint'];\n    var coord = e['coordinate'];\n    this._lastPoint = this._lastPoint || point;\n    this._lastCoord = this._lastCoord || coord;\n    if (dragOnScreenAxis) {\n      if (axis === 'x') {\n        point.y = this._lastPoint.y;\n      } else if (axis === 'y') {\n        point.x = this._lastPoint.x;\n      }\n      coord = map.containerPointToCoord(point);\n    } else {\n      coord = this._correctCoord(coord);\n    }\n    var pointOffset = point.sub(this._lastPoint);\n    var coordOffset = coord.sub(this._lastCoord);\n    if (!dragOnScreenAxis) {\n      if (axis === 'x') {\n        pointOffset.y = coordOffset.y = 0;\n      } else if (axis === 'y') {\n        pointOffset.x = coordOffset.x = 0;\n      }\n    }\n    this._lastPoint = point;\n    this._lastCoord = coord;\n    geo.translate(coordOffset);\n    if (geo !== target && !target.options['dragShadow']) {\n      target.translate(coordOffset);\n    }\n    e['coordOffset'] = coordOffset;\n    e['pointOffset'] = pointOffset;\n    geo._fireEvent('dragging', e);\n    if (geo !== target) {\n      target._fireEvent('dragging', e);\n    }\n  };\n  _proto._endDrag = function _endDrag(param) {\n    if (this._dragHandler) {\n      this._dragHandler.disable();\n      delete this._dragHandler;\n    }\n    if (this.container) {\n      off(this.container, 'mouseleave', this._endDrag, this);\n    }\n    if (!this.target) {\n      return;\n    }\n    var target = this.target;\n    target.off('click', this._endDrag, this);\n    target.off('symbolchange', this._onTargetUpdated, this);\n    delete this._lastCoord;\n    delete this._lastPoint;\n    this._isDragging = false;\n    var map = target.getMap();\n    if (this.enabled() && map) {\n      var e = map._parseEvent(param ? param['domEvent'] : null);\n      this._updateTargetAndRemoveShadow(e);\n      if (this._moved) {\n        target._fireEvent('dragend', e);\n      }\n    }\n  };\n  _proto.isDragging = function isDragging() {\n    if (!this._isDragging) {\n      return false;\n    }\n    return true;\n  };\n  _proto._updateTargetAndRemoveShadow = function _updateTargetAndRemoveShadow(eventParam) {\n    if (!this._shadow) {\n      return;\n    }\n    var target = this.target,\n      map = target.getMap();\n    if (!target.options['dragShadow']) {\n      target.show();\n    }\n    var shadow = this._shadow;\n    if (shadow) {\n      if (target.options['dragShadow']) {\n        var shadowFirst = shadow.getFirstCoordinate();\n        var first = target.getFirstCoordinate();\n        var offset = shadowFirst.sub(first);\n        target.translate(offset);\n      }\n      shadow._fireEvent('dragend', eventParam);\n      shadow.remove();\n      delete this._shadow;\n    }\n    if (this._shadowConnectors) {\n      map.getLayer(DRAG_STAGE_LAYER_ID).removeGeometry(this._shadowConnectors);\n      delete this._shadowConnectors;\n    }\n    if (this._dragStageLayer) {\n      this._dragStageLayer._getRenderer().resources = new ResourceCache();\n      this._dragStageLayer.remove();\n    }\n  };\n  _proto._correctCoord = function _correctCoord(coord) {\n    var map = this.target.getMap();\n    if (!map.getPitch()) {\n      return coord;\n    }\n    var target = this.target;\n    if (!target.getMinAltitude()) {\n      return coord;\n    }\n    var alt = (target.getMinAltitude() + target.getMaxAltitude()) / 2;\n    return map.locateByPoint(coord, 0, -alt);\n  };\n  return GeometryDragHandler;\n}(Handler$1);\nGeometry.mergeOptions({\n  'draggable': false,\n  'dragShadow': true,\n  'dragOnAxis': null,\n  'dragOnScreenAxis': false\n});\nGeometry.addInitHook('addHandler', 'draggable', GeometryDragHandler);\nGeometry.include({\n  isDragging: function isDragging() {\n    if (this._getParent()) {\n      return this._getParent().isDragging();\n    }\n    if (this['draggable']) {\n      return this['draggable'].isDragging();\n    }\n    return false;\n  }\n});\n\nGeometry.include({\n  startEdit: function startEdit(opts) {\n    var map = this.getMap();\n    if (!map || !this.options['editable']) {\n      return this;\n    }\n    if (this._editor) {\n      this.endEdit();\n    }\n    this._editor = new GeometryEditor(this, opts);\n    this._editor.start();\n    if (!this._getParent()) {\n      this.fire('editstart');\n    }\n    map.getRenderer().setToRedraw();\n    return this;\n  },\n  endEdit: function endEdit() {\n    if (this._editor) {\n      this._editor.stop();\n      delete this._editor;\n      if (!this._getParent()) {\n        this.fire('editend');\n      }\n      var map = this.getMap();\n      if (map) {\n        map.getRenderer().setToRedraw();\n      }\n    }\n    return this;\n  },\n  redoEdit: function redoEdit() {\n    if (!this.isEditing()) {\n      return this;\n    }\n    this._editor.redo();\n    if (!this._getParent()) {\n      this.fire('redoedit');\n    }\n    return this;\n  },\n  undoEdit: function undoEdit() {\n    if (!this.isEditing()) {\n      return this;\n    }\n    this._editor.undo();\n    if (!this._getParent()) {\n      this.fire('undoedit');\n    }\n    return this;\n  },\n  cancelEdit: function cancelEdit() {\n    if (!this.isEditing()) {\n      return this;\n    }\n    this._editor.cancel();\n    if (!this._getParent()) {\n      this.fire('canceledit');\n    }\n    return this;\n  },\n  isEditing: function isEditing() {\n    if (this._editor) {\n      return this._editor.isEditing();\n    }\n    return false;\n  }\n});\n\nGeometry.include({\n  _onEvent: function _onEvent(event, type) {\n    var map = this.getMap();\n    if (!map) {\n      return;\n    }\n    var eventType = type || this._getEventTypeToFire(event);\n    if (eventType === 'contextmenu' && this.listens('contextmenu')) {\n      stopPropagation(event);\n      preventDefault(event);\n    }\n    var params = map._getEventParams(event);\n    if (isNumber(this._pickGeometryIndex)) {\n      params.pickGeometryIndex = this._pickGeometryIndex;\n    }\n    this._fireEvent(eventType, params);\n  },\n  _getEventTypeToFire: function _getEventTypeToFire(domEvent) {\n    return domEvent.type;\n  }\n});\n\nGeometry.include({\n  setInfoWindow: function setInfoWindow(options) {\n    this.removeInfoWindow();\n    if (options instanceof InfoWindow) {\n      this._infoWindow = options;\n      this._infoWinOptions = extend({}, this._infoWindow.options);\n      this._infoWindow.addTo(this);\n      return this;\n    }\n    this._infoWinOptions = extend({}, options);\n    if (this._infoWindow) {\n      this._infoWindow.setOptions(options);\n    } else if (this.getMap()) {\n      this._bindInfoWindow();\n    }\n    return this;\n  },\n  getInfoWindow: function getInfoWindow() {\n    if (!this._infoWindow) {\n      return null;\n    }\n    return this._infoWindow;\n  },\n  openInfoWindow: function openInfoWindow(coordinate) {\n    if (!this.getMap()) {\n      return this;\n    }\n    if (!coordinate) {\n      coordinate = this.getCenter();\n    }\n    if (!this._infoWindow) {\n      if (this._infoWinOptions && this.getMap()) {\n        this._bindInfoWindow();\n        this._infoWindow.show(coordinate);\n      }\n    } else {\n      this._infoWindow.show(coordinate);\n    }\n    return this;\n  },\n  closeInfoWindow: function closeInfoWindow() {\n    if (this._infoWindow) {\n      this._infoWindow.hide();\n    }\n    return this;\n  },\n  removeInfoWindow: function removeInfoWindow() {\n    this._unbindInfoWindow();\n    delete this._infoWinOptions;\n    delete this._infoWindow;\n    return this;\n  },\n  _bindInfoWindow: function _bindInfoWindow() {\n    var options = this._infoWinOptions;\n    if (!options) {\n      return this;\n    }\n    this._infoWindow = new InfoWindow(options);\n    this._infoWindow.addTo(this);\n    return this;\n  },\n  _unbindInfoWindow: function _unbindInfoWindow() {\n    if (this._infoWindow) {\n      this.closeInfoWindow();\n      this._infoWindow.remove();\n      delete this._infoWindow;\n    }\n    return this;\n  }\n});\n\nvar TILE_POINT = new Point(0, 0);\nvar TEMP_POINT$5 = new Point(0, 0);\nvar TEMP_POINT1$2 = new Point(0, 0);\nvar TEMP_POINT2$2 = new Point(0, 0);\nvar EMPTY_ARRAY$2 = [];\nvar TileWorkerConnection = function (_Actor) {\n  _inheritsLoose(TileWorkerConnection, _Actor);\n  function TileWorkerConnection() {\n    return _Actor.call(this, imageFetchWorkerKey) || this;\n  }\n  var _proto = TileWorkerConnection.prototype;\n  _proto.checkUrl = function checkUrl(url) {\n    if (!url || !isString(url)) {\n      return url;\n    }\n    return getAbsoluteURL(url);\n  };\n  _proto.fetchImage = function fetchImage(url, workerId, cb, fetchOptions) {\n    url = this.checkUrl(url);\n    var data = {\n      url: url,\n      fetchOptions: fetchOptions\n    };\n    this.send(data, EMPTY_ARRAY$2, cb, workerId);\n  };\n  return TileWorkerConnection;\n}(Actor);\nvar BLANK_IMAGE = new Image();\nvar TileLayerCanvasRenderer = function (_CanvasRenderer) {\n  _inheritsLoose(TileLayerCanvasRenderer, _CanvasRenderer);\n  function TileLayerCanvasRenderer(layer) {\n    var _this;\n    _this = _CanvasRenderer.call(this, layer) || this;\n    _this.tilesInView = {};\n    _this.tilesLoading = {};\n    _this._parentTiles = [];\n    _this._childTiles = [];\n    _this._tileQueue = [];\n    _this.tileCache = new LRUCache(layer.options['maxCacheSize'], function (tile) {\n      _this.deleteTile(tile);\n    });\n    if (Browser$1.decodeImageInWorker && _this.layer.options['decodeImageInWorker'] && (layer.options['renderer'] === 'gl' || !Browser$1.safari && !Browser$1.iosWeixin)) {\n      _this._tileImageWorkerConn = new TileWorkerConnection();\n    }\n    _this._compareTiles = compareTiles.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n  var _proto2 = TileLayerCanvasRenderer.prototype;\n  _proto2.getCurrentTileZoom = function getCurrentTileZoom() {\n    return this._tileZoom;\n  };\n  _proto2.draw = function draw(timestamp, context) {\n    var map = this.getMap();\n    if (!this.isDrawable()) {\n      return;\n    }\n    var mask2DExtent = this.prepareCanvas();\n    if (mask2DExtent) {\n      if (!mask2DExtent.intersects(this.canvasExtent2D)) {\n        this.completeRender();\n        return;\n      }\n    }\n    if (this._renderTimestamp !== timestamp) {\n      this._consumeTileQueue();\n      this._computeAvgTileAltitude();\n      this._renderTimestamp = timestamp;\n    }\n    var currentTiles;\n    var hasFreshTiles = false;\n    var frameTiles = this._frameTiles;\n    if (frameTiles && timestamp === frameTiles.timestamp) {\n      if (frameTiles.empty) {\n        return;\n      }\n      currentTiles = frameTiles;\n    } else {\n      currentTiles = this._getTilesInCurrentFrame();\n      if (!currentTiles) {\n        this._frameTiles = {\n          empty: true,\n          timestamp: timestamp\n        };\n        this.completeRender();\n        return;\n      }\n      hasFreshTiles = true;\n      this._frameTiles = currentTiles;\n      this._frameTiles.timestamp = timestamp;\n      if (currentTiles.loadingCount) {\n        this.loadTileQueue(currentTiles.tileQueue);\n      }\n    }\n    var _currentTiles = currentTiles,\n      tiles = _currentTiles.tiles,\n      childTiles = _currentTiles.childTiles,\n      parentTiles = _currentTiles.parentTiles,\n      placeholders = _currentTiles.placeholders,\n      loading = _currentTiles.loading,\n      loadingCount = _currentTiles.loadingCount;\n    this._drawTiles(tiles, parentTiles, childTiles, placeholders, context);\n    if (!loadingCount) {\n      if (!loading) {\n        if (!map.isAnimating() && (this._parentTiles.length || this._childTiles.length)) {\n          this._parentTiles = [];\n          this._childTiles = [];\n          this.setToRedraw();\n        }\n        this.completeRender();\n      }\n    }\n    if (hasFreshTiles) {\n      this._retireTiles();\n    }\n  };\n  _proto2.getTileGridsInCurrentFrame = function getTileGridsInCurrentFrame() {\n    return this._frameTileGrids;\n  };\n  _proto2._getTilesInCurrentFrame = function _getTilesInCurrentFrame() {\n    var map = this.getMap();\n    var layer = this.layer;\n    var tileGrids = layer.getTiles();\n    this._frameTileGrids = tileGrids;\n    tileGrids = tileGrids.tileGrids;\n    if (!tileGrids || !tileGrids.length) {\n      return null;\n    }\n    var count = tileGrids.reduce(function (acc, curr) {\n      return acc + (curr && curr.tiles && curr.tiles.length || 0);\n    }, 0);\n    if (count >= this.tileCache.max / 2) {\n      this.tileCache.setMaxSize(count * 2 + 1);\n    }\n    var loadingCount = 0;\n    var loading = false;\n    var checkedTiles = {};\n    var tiles = [],\n      parentTiles = [],\n      parentKeys = {},\n      childTiles = [],\n      childKeys = {},\n      placeholders = [],\n      placeholderKeys = {};\n    var tileQueue = {};\n    var preLoadingCount = this._markTiles(),\n      loadingLimit = this._getLoadLimit();\n    var l = tileGrids.length;\n    this._tileZoom = tileGrids[0]['zoom'];\n    for (var i = 0; i < l; i++) {\n      var tileGrid = tileGrids[i];\n      var gridTiles = tileGrid['tiles'];\n      var parents = tileGrid['parents'] || EMPTY_ARRAY$2;\n      var parentCount = parents.length;\n      var allTiles = parents.concat(gridTiles);\n      var placeholder = void 0;\n      if (allTiles.length) {\n        placeholder = this._generatePlaceHolder(allTiles[0].res);\n      }\n      for (var j = 0, _l = allTiles.length; j < _l; j++) {\n        var tile = allTiles[j];\n        var tileId = tile['id'];\n        var isParentTile = j < parentCount;\n        var tileLoading = false;\n        if (this._isLoadingTile(tileId)) {\n          tileLoading = loading = true;\n          this.tilesLoading[tileId].current = true;\n        } else {\n          var cached = this._getCachedTile(tileId, isParentTile);\n          if (cached) {\n            if (!isParentTile) {\n              if (cached.image && this.isTileFadingIn(cached.image)) {\n                tileLoading = loading = true;\n                this.setToRedraw();\n              }\n              tiles.push(cached);\n              if (!this.isTileComplete(cached)) {\n                tileLoading = true;\n              }\n            }\n          } else {\n            tileLoading = loading = true;\n            var hitLimit = loadingLimit && loadingCount + preLoadingCount[0] > loadingLimit;\n            if (!hitLimit && (!map.isInteracting() || map.isMoving() || map.isRotating())) {\n              loadingCount++;\n              var key = tileId;\n              tileQueue[key] = tile;\n            }\n          }\n        }\n        if (isParentTile) continue;\n        if (!tileLoading) continue;\n        if (checkedTiles[tileId]) continue;\n        checkedTiles[tileId] = 1;\n        if (placeholder && !placeholderKeys[tileId]) {\n          tile.cache = false;\n          placeholders.push({\n            image: placeholder,\n            info: tile\n          });\n          placeholderKeys[tileId] = 1;\n        }\n        var children = this._findChildTiles(tile);\n        if (children.length) {\n          children.forEach(function (c) {\n            if (!childKeys[c.info.id]) {\n              childTiles.push(c);\n              childKeys[c.info.id] = 1;\n            }\n          });\n        }\n        if (!children.length || children.length !== 4) {\n          var parentTile = this._findParentTile(tile);\n          if (parentTile) {\n            var parentId = parentTile.info.id;\n            if (parentKeys[parentId] === undefined) {\n              parentKeys[parentId] = parentTiles.length;\n              parentTiles.push(parentTile);\n            }\n          }\n        }\n      }\n    }\n    this.tileCache.shrink();\n    return {\n      childTiles: childTiles,\n      parentTiles: parentTiles,\n      tiles: tiles,\n      placeholders: placeholders,\n      loading: loading,\n      loadingCount: loadingCount,\n      tileQueue: tileQueue\n    };\n  };\n  _proto2.removeTileCache = function removeTileCache(tileId) {\n    delete this.tilesInView[tileId];\n    this.tileCache.remove(tileId);\n  };\n  _proto2.isTileCachedOrLoading = function isTileCachedOrLoading(tileId) {\n    return this.tileCache.get(tileId) || this.tilesInView[tileId] || this.tilesLoading[tileId];\n  };\n  _proto2.isTileCached = function isTileCached(tileId) {\n    return !!(this.tileCache.get(tileId) || this.tilesInView[tileId]);\n  };\n  _proto2.isTileFadingIn = function isTileFadingIn(tileImage) {\n    return this._getTileFadingOpacity(tileImage) < 1;\n  };\n  _proto2._drawTiles = function _drawTiles(tiles, parentTiles, childTiles, placeholders, parentContext) {\n    var _this2 = this;\n    if (parentTiles.length) {\n      parentTiles.sort(this._compareTiles);\n      this._parentTiles = parentTiles;\n    }\n    if (childTiles.length) {\n      this._childTiles = childTiles;\n      this._childTiles.sort(this._compareTiles);\n    }\n    var drawBackground = true;\n    var backgroundTimestamp = this.canvas._parentTileTimestamp;\n    if (this.layer.constructor === TileLayer || this.layer.constructor === WMSTileLayer) {\n      if (this._renderTimestamp === backgroundTimestamp) {\n        drawBackground = false;\n      } else {\n        this.canvas._parentTileTimestamp = this._renderTimestamp;\n      }\n    }\n    var context = {\n      tiles: tiles,\n      parentTiles: this._parentTiles,\n      childTiles: this._childTiles,\n      parentContext: parentContext\n    };\n    this.onDrawTileStart(context, parentContext);\n    if (drawBackground && this.layer.options['opacity'] === 1) {\n      this.layer._silentConfig = true;\n      var fadingAnimation = this.layer.options['fadeAnimation'];\n      this.layer.options['fadeAnimation'] = false;\n      this.drawingChildTiles = true;\n      this._childTiles.forEach(function (t) {\n        return _this2._drawTile(t.info, t.image, parentContext);\n      });\n      delete this.drawingChildTiles;\n      this.drawingParentTiles = true;\n      this._parentTiles.forEach(function (t) {\n        return _this2._drawTile(t.info, t.image, parentContext);\n      });\n      delete this.drawingParentTiles;\n      this.layer.options['fadeAnimation'] = fadingAnimation;\n      this.layer._silentConfig = false;\n    }\n    this.drawingCurrentTiles = true;\n    tiles.sort(this._compareTiles);\n    for (var i = 0, l = tiles.length; i < l; i++) {\n      this._drawTileAndCache(tiles[i], parentContext);\n    }\n    delete this.drawingCurrentTiles;\n    if (drawBackground && this.layer.options['opacity'] < 1) {\n      this.layer._silentConfig = true;\n      var _fadingAnimation = this.layer.options['fadeAnimation'];\n      this.layer.options['fadeAnimation'] = false;\n      this.drawingChildTiles = true;\n      this._childTiles.forEach(function (t) {\n        return _this2._drawTile(t.info, t.image, parentContext);\n      });\n      delete this.drawingChildTiles;\n      this.drawingParentTiles = true;\n      this._parentTiles.forEach(function (t) {\n        return _this2._drawTile(t.info, t.image, parentContext);\n      });\n      delete this.drawingParentTiles;\n      this.layer.options['fadeAnimation'] = _fadingAnimation;\n      this.layer._silentConfig = false;\n    }\n    placeholders.forEach(function (t) {\n      return _this2._drawTile(t.info, t.image, parentContext);\n    });\n    this.onDrawTileEnd(context, parentContext);\n  };\n  _proto2.onDrawTileStart = function onDrawTileStart() {};\n  _proto2.onDrawTileEnd = function onDrawTileEnd() {};\n  _proto2._drawTile = function _drawTile(info, image, parentContext) {\n    if (image) {\n      this.drawTile(info, image, parentContext);\n    }\n  };\n  _proto2._drawTileAndCache = function _drawTileAndCache(tile, parentContext) {\n    this.tilesInView[tile.info.id] = tile;\n    this._drawTile(tile.info, tile.image, parentContext);\n  };\n  _proto2.drawOnInteracting = function drawOnInteracting(event, timestamp, context) {\n    this.draw(timestamp, context);\n  };\n  _proto2.needToRedraw = function needToRedraw() {\n    var map = this.getMap();\n    if (this._tileQueue.length) {\n      return true;\n    }\n    if (map.getPitch()) {\n      return _CanvasRenderer.prototype.needToRedraw.call(this);\n    }\n    if (map.isRotating() || map.isZooming()) {\n      return true;\n    }\n    if (map.isMoving()) {\n      return !!this.layer.options['forceRenderOnMoving'];\n    }\n    return _CanvasRenderer.prototype.needToRedraw.call(this);\n  };\n  _proto2.hitDetect = function hitDetect() {\n    return false;\n  };\n  _proto2._getLoadLimit = function _getLoadLimit() {\n    if (this.getMap().isInteracting()) {\n      return this.layer.options['loadingLimitOnInteracting'];\n    }\n    return this.layer.options['loadingLimit'] || 0;\n  };\n  _proto2.isDrawable = function isDrawable() {\n    if (this.getMap().getPitch()) {\n      if (console) {\n        console.warn('TileLayer with canvas renderer can\\'t be pitched, use gl renderer (\\'renderer\\' : \\'gl\\') instead.');\n      }\n      this.clear();\n      return false;\n    }\n    return true;\n  };\n  _proto2.clear = function clear() {\n    this._retireTiles(true);\n    this.tileCache.reset();\n    this.tilesInView = {};\n    this.tilesLoading = {};\n    this._parentTiles = [];\n    this._childTiles = [];\n    _CanvasRenderer.prototype.clear.call(this);\n  };\n  _proto2._isLoadingTile = function _isLoadingTile(tileId) {\n    return !!this.tilesLoading[tileId];\n  };\n  _proto2.clipCanvas = function clipCanvas(context) {\n    return _CanvasRenderer.prototype.clipCanvas.call(this, context);\n  };\n  _proto2._clipByPitch = function _clipByPitch(ctx) {\n    var map = this.getMap();\n    if (map.getPitch() <= map.options['maxVisualPitch']) {\n      return false;\n    }\n    if (!this.layer.options['clipByPitch']) {\n      return false;\n    }\n    var clipExtent = map.getContainerExtent();\n    var r = map.getDevicePixelRatio();\n    ctx.save();\n    ctx.strokeStyle = 'rgba(0, 0, 0, 0)';\n    ctx.beginPath();\n    ctx.rect(0, Math.ceil(clipExtent.ymin) * r, Math.ceil(clipExtent.getWidth()) * r, Math.ceil(clipExtent.getHeight()) * r);\n    ctx.stroke();\n    ctx.clip();\n    return true;\n  };\n  _proto2.loadTileQueue = function loadTileQueue(tileQueue) {\n    for (var p in tileQueue) {\n      if (tileQueue.hasOwnProperty(p)) {\n        var tile = tileQueue[p];\n        var tileImage = this.loadTile(tile);\n        if (tileImage.loadTime === undefined) {\n          this.tilesLoading[tile['id']] = {\n            image: tileImage,\n            current: true,\n            info: tile\n          };\n        }\n      }\n    }\n  };\n  _proto2.loadTile = function loadTile(tile) {\n    var _this3 = this;\n    var tileImage = {};\n    if (this.loadTileBitmap) {\n      var onLoad = function onLoad(bitmap) {\n        _this3.onTileLoad(bitmap, tile);\n      };\n      this.loadTileBitmap(tile['url'], tile, onLoad);\n    } else if (this._tileImageWorkerConn && this.loadTileImage === this.constructor.prototype.loadTileImage) {\n      this._fetchImage(tileImage, tile);\n    } else {\n      var tileSize = this.layer.getTileSize(tile.layer);\n      tileImage = new Image();\n      tileImage.width = tileSize['width'];\n      tileImage.height = tileSize['height'];\n      tileImage.onload = this.onTileLoad.bind(this, tileImage, tile);\n      tileImage.onerror = this.onTileError.bind(this, tileImage, tile);\n      this.loadTileImage(tileImage, tile['url']);\n    }\n    return tileImage;\n  };\n  _proto2._fetchImage = function _fetchImage(image, tile) {\n    var _this4 = this;\n    if (image instanceof Image) {\n      image.src = tile.url;\n    } else {\n      var x = tile.x,\n        y = tile.y;\n      var workerId = Math.abs(x + y) % this._tileImageWorkerConn.workers.length;\n      this._tileImageWorkerConn.fetchImage(tile.url, workerId, function (err, data) {\n        if (err) {\n          _this4.onTileError(image, tile, err);\n        } else {\n          getImageBitMap(data, function (bitmap) {\n            _this4.onTileLoad(bitmap, tile);\n          });\n        }\n      }, this.layer.options['fetchOptions'] || {\n        referrer: document.location.href,\n        headers: {\n          accept: 'image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8'\n        }\n      });\n    }\n  };\n  _proto2.loadTileImage = function loadTileImage(tileImage, url) {\n    var crossOrigin = this.layer.options['crossOrigin'];\n    if (!isNil(crossOrigin)) {\n      tileImage.crossOrigin = crossOrigin;\n    }\n    return loadImage(tileImage, [url]);\n  };\n  _proto2.abortTileLoading = function abortTileLoading(tileImage, tileInfo) {\n    if (tileInfo && tileInfo.id !== undefined) {\n      this.removeTileLoading(tileInfo);\n    }\n    if (!tileImage) return;\n    tileImage.onload = falseFn;\n    tileImage.onerror = falseFn;\n    tileImage.src = emptyImageUrl;\n  };\n  _proto2.onTileLoad = function onTileLoad(tileImage, tileInfo) {\n    this.removeTileLoading(tileInfo);\n    this._tileQueue.push({\n      tileInfo: tileInfo,\n      tileData: tileImage\n    });\n    this.setToRedraw();\n  };\n  _proto2.removeTileLoading = function removeTileLoading(tileInfo) {\n    delete this.tilesLoading[tileInfo.id];\n    this.setToRedraw();\n  };\n  _proto2._consumeTileQueue = function _consumeTileQueue() {\n    var count = 0;\n    var limit = this.layer.options['tileLimitPerFrame'];\n    var queue = this._tileQueue;\n    while (queue.length && (limit <= 0 || count < limit)) {\n      var _queue$shift = queue.shift(),\n        tileData = _queue$shift.tileData,\n        tileInfo = _queue$shift.tileInfo;\n      if (!this.checkTileInQueue(tileData, tileInfo)) {\n        continue;\n      }\n      this.consumeTile(tileData, tileInfo);\n      count++;\n    }\n  };\n  _proto2._computeAvgTileAltitude = function _computeAvgTileAltitude() {\n    var sumMin = 0;\n    var sumMax = 0;\n    var count = 0;\n    for (var p in this.tilesInView) {\n      var info = this.tilesInView[p] && this.tilesInView[p].info;\n      if (info) {\n        sumMin += info.minAltitude || 0;\n        sumMax += info.maxAltitude || 0;\n        count++;\n      }\n    }\n    this.avgMinAltitude = sumMin / count;\n    this.avgMaxAltitude = sumMax / count;\n  };\n  _proto2.checkTileInQueue = function checkTileInQueue() {\n    return true;\n  };\n  _proto2.consumeTile = function consumeTile(tileImage, tileInfo) {\n    if (!this.layer) {\n      return;\n    }\n    if (!this.tilesInView) {\n      return;\n    }\n    var e = {\n      tile: tileInfo,\n      tileImage: tileImage\n    };\n    this.layer.fire('tileload', e);\n    tileImage = e.tileImage;\n    this.resetTileLoadTime(tileImage);\n    this.removeTileLoading(tileInfo);\n    this._addTileToCache(tileInfo, tileImage);\n    this.setToRedraw();\n  };\n  _proto2.resetTileLoadTime = function resetTileLoadTime(tileImage) {\n    tileImage.loadTime = now();\n  };\n  _proto2.onTileError = function onTileError(tileImage, tileInfo) {\n    if (!this.layer) {\n      return;\n    }\n    tileImage.onerrorTick = tileImage.onerrorTick || 0;\n    var tileRetryCount = this.layer.options['tileRetryCount'];\n    if (tileRetryCount > tileImage.onerrorTick) {\n      tileImage.onerrorTick++;\n      this._fetchImage(tileImage, tileInfo);\n      this.removeTileLoading(tileInfo);\n      return;\n    }\n    var errorUrl = this.layer.options['errorUrl'];\n    if (errorUrl) {\n      if (tileImage instanceof Image && tileImage.src !== errorUrl) {\n        tileImage.src = errorUrl;\n        this.removeTileLoading(tileInfo);\n        return;\n      } else {\n        tileImage = new Image();\n        tileImage.src = errorUrl;\n      }\n    }\n    tileImage = tileImage instanceof Image ? tileImage : BLANK_IMAGE;\n    this.abortTileLoading(tileImage, tileInfo);\n    tileImage.loadTime = 0;\n    this.removeTileLoading(tileInfo);\n    this._addTileToCache(tileInfo, tileImage);\n    this.setToRedraw();\n    this.layer.fire('tileerror', {\n      tile: tileInfo\n    });\n  };\n  _proto2.drawTile = function drawTile(tileInfo, tileImage) {\n    if (!tileImage || !this.getMap()) {\n      return;\n    }\n    var extent2d = tileInfo.extent2d,\n      offset = tileInfo.offset;\n    var point = TILE_POINT.set(extent2d.xmin - offset[0], extent2d.ymax - offset[1]),\n      tileZoom = tileInfo.z,\n      tileId = tileInfo.id;\n    var map = this.getMap(),\n      zoom = map.getZoom(),\n      ctx = this.context,\n      cp = map._pointAtResToContainerPoint(point, tileInfo.res, 0, TEMP_POINT$5),\n      bearing = map.getBearing(),\n      transformed = bearing || zoom !== tileZoom;\n    var opacity = this.getTileOpacity(tileImage, tileInfo);\n    var alpha = ctx.globalAlpha;\n    if (opacity < 1) {\n      ctx.globalAlpha = opacity;\n    }\n    if (!transformed) {\n      cp._round();\n    }\n    var x = cp.x,\n      y = cp.y;\n    var w = tileInfo.extent2d.xmax - tileInfo.extent2d.xmin;\n    var h = tileInfo.extent2d.ymax - tileInfo.extent2d.ymin;\n    if (transformed) {\n      ctx.save();\n      ctx.translate(x, y);\n      if (bearing) {\n        ctx.rotate(-bearing * Math.PI / 180);\n      }\n      w += 0.5;\n      h += 0.5;\n      var res = map._getResolution();\n      if (res !== tileInfo.res) {\n        var scale = tileInfo.res / res;\n        ctx.scale(scale, scale);\n      }\n      x = y = 0;\n    }\n    Canvas.image(ctx, tileImage, x, y, w, h);\n    if (this.layer.options['debug']) {\n      var color = this.layer.options['debugOutline'];\n      ctx.save();\n      ctx.strokeStyle = color;\n      ctx.fillStyle = color;\n      ctx.strokeWidth = 10;\n      ctx.font = '20px monospace';\n      var _point = new Point(x, y);\n      Canvas.rectangle(ctx, _point, {\n        width: w,\n        height: h\n      }, 1, 0);\n      Canvas.fillText(ctx, this.getDebugInfo(tileId), _point._add(32, h - 14), color);\n      Canvas.drawCross(ctx, x + w / 2, y + h / 2, 2, color);\n      ctx.restore();\n    }\n    if (transformed) {\n      ctx.restore();\n    }\n    if (ctx.globalAlpha !== alpha) {\n      ctx.globalAlpha = alpha;\n    }\n    this.setCanvasUpdated();\n  };\n  _proto2.getDebugInfo = function getDebugInfo(tileId) {\n    var xyz = tileId.split('_');\n    var length = xyz.length;\n    return xyz[length - 3] + '/' + xyz[length - 2] + '/' + xyz[length - 1];\n  };\n  _proto2._findChildTiles = function _findChildTiles(info) {\n    var layer = this._getLayerOfTile(info.layer);\n    if (!layer || !layer.options['background'] || info.z > this.layer.getMaxZoom()) {\n      return EMPTY_ARRAY$2;\n    }\n    var map = this.getMap();\n    var children = [];\n    if (layer._isPyramidMode()) {\n      var _zoomDiff = 2;\n      var cx = info.x * 2;\n      var cy = info.y * 2;\n      var cz = info.z + 1;\n      var queue = [];\n      for (var j = 0; j < 2; j++) {\n        for (var jj = 0; jj < 2; jj++) {\n          queue.push(cx + j, cy + jj, cz);\n        }\n      }\n      while (queue.length) {\n        var z = queue.pop();\n        var y = queue.pop();\n        var x = queue.pop();\n        var id = layer._getTileId(x, y, z, info.layer);\n        var canVisit = z + 1 <= info.z + _zoomDiff;\n        var tile = this.tileCache.getAndRemove(id);\n        if (tile) {\n          if (this.isValidCachedTile(tile)) {\n            children.push(tile);\n            this.tileCache.add(id, tile);\n          } else if (canVisit) {\n            for (var _j = 0; _j < 2; _j++) {\n              for (var _jj = 0; _jj < 2; _jj++) {\n                queue.push(x * 2 + _j, y * 2 + _jj, z + 1);\n              }\n            }\n          }\n        } else if (canVisit) {\n          for (var _j2 = 0; _j2 < 2; _j2++) {\n            for (var _jj2 = 0; _jj2 < 2; _jj2++) {\n              queue.push(x * 2 + _j2, y * 2 + _jj2, z + 1);\n            }\n          }\n        }\n      }\n      return children;\n    }\n    var zoomDiff = 1;\n    var res = info.res;\n    var min = info.extent2d.getMin(),\n      max = info.extent2d.getMax(),\n      pmin = layer._project(map._pointToPrjAtRes(min, res, TEMP_POINT1$2), TEMP_POINT1$2),\n      pmax = layer._project(map._pointToPrjAtRes(max, res, TEMP_POINT2$2), TEMP_POINT2$2);\n    for (var i = 1; i < zoomDiff; i++) {\n      this._findChildTilesAt(children, pmin, pmax, layer, info.z + i);\n    }\n    return children;\n  };\n  _proto2._findChildTilesAt = function _findChildTilesAt(children, pmin, pmax, layer, childZoom) {\n    var layerId = layer.getId(),\n      res = layer.getSpatialReference().getResolution(childZoom);\n    if (!res) {\n      return;\n    }\n    var dmin = layer._getTileConfig().getTileIndex(pmin, res),\n      dmax = layer._getTileConfig().getTileIndex(pmax, res);\n    var sx = Math.min(dmin.idx, dmax.idx),\n      ex = Math.max(dmin.idx, dmax.idx);\n    var sy = Math.min(dmin.idy, dmax.idy),\n      ey = Math.max(dmin.idy, dmax.idy);\n    var id, tile;\n    for (var i = sx; i < ex; i++) {\n      for (var ii = sy; ii < ey; ii++) {\n        id = layer._getTileId(i, ii, childZoom, layerId);\n        tile = this.tileCache.getAndRemove(id);\n        if (tile) {\n          if (this.isValidCachedTile(tile)) {\n            children.push(tile);\n            this.tileCache.add(id, tile);\n          }\n        }\n      }\n    }\n  };\n  _proto2._findParentTile = function _findParentTile(info) {\n    var map = this.getMap(),\n      layer = this._getLayerOfTile(info.layer);\n    if (!layer || !layer.options['background']) {\n      return null;\n    }\n    var minZoom = layer.getMinZoom();\n    var zoomDiff = info.z - minZoom;\n    if (layer._isPyramidMode()) {\n      for (var z = info.z - 1; z >= minZoom; z--) {\n        var diff = info.z - z;\n        var scale = Math.pow(2, diff);\n        var x = Math.floor(info.x / scale);\n        var y = Math.floor(info.y / scale);\n        var id = layer._getTileId(x, y, z, info.layer);\n        var tile = this.tileCache.getAndRemove(id);\n        if (tile) {\n          if (this.isValidCachedTile(tile)) {\n            this.tileCache.add(id, tile);\n            return tile;\n          }\n        }\n      }\n      return null;\n    }\n    var sr = layer.getSpatialReference();\n    var d = sr.getZoomDirection();\n    var res = info.res;\n    var center = info.extent2d.getCenter(),\n      prj = layer._project(map._pointToPrjAtRes(center, res));\n    for (var _diff = 1; _diff <= zoomDiff; _diff++) {\n      var _z = info.z - d * _diff;\n      var _res = sr.getResolution(_z);\n      if (!_res) continue;\n      var tileIndex = layer._getTileConfig().getTileIndex(prj, _res);\n      var _id = layer._getTileId(tileIndex.x, tileIndex.y, _z, info.layer);\n      var _tile = this.tileCache.getAndRemove(_id);\n      if (_tile) {\n        this.tileCache.add(_id, _tile);\n        return _tile;\n      }\n    }\n    return null;\n  };\n  _proto2.isValidCachedTile = function isValidCachedTile(tile) {\n    return !!tile.image;\n  };\n  _proto2.isTileComplete = function isTileComplete() {\n    return true;\n  };\n  _proto2._getLayerOfTile = function _getLayerOfTile(layerId) {\n    return this.layer.getChildLayer ? this.layer.getChildLayer(layerId) : this.layer;\n  };\n  _proto2._getCachedTile = function _getCachedTile(tileId, isParent) {\n    var tilesInView = this.tilesInView;\n    var cached = this.tileCache.getAndRemove(tileId);\n    if (cached) {\n      if (!isParent) {\n        tilesInView[tileId] = cached;\n      }\n      var tilesLoading = this.tilesLoading;\n      if (tilesLoading && tilesLoading[tileId]) {\n        tilesLoading[tileId].current = false;\n        var _tilesLoading$tileId = tilesLoading[tileId],\n          image = _tilesLoading$tileId.image,\n          info = _tilesLoading$tileId.info;\n        this.abortTileLoading(image, info);\n        delete tilesLoading[tileId];\n      }\n    } else {\n      cached = tilesInView[tileId];\n    }\n    if (cached) {\n      cached.current = true;\n      this.tileCache.add(tileId, cached);\n    }\n    return cached;\n  };\n  _proto2._addTileToCache = function _addTileToCache(tileInfo, tileImage) {\n    this.tilesInView[tileInfo.id] = {\n      image: tileImage,\n      current: true,\n      info: tileInfo\n    };\n  };\n  _proto2.getTileOpacity = function getTileOpacity(tileImage, tileInfo) {\n    var opacity = this._getTileFadingOpacity(tileImage);\n    if (this.layer.getChildLayer) {\n      var childLayer = this.layer.getLayer(tileInfo.layer);\n      if (childLayer) {\n        opacity *= childLayer.options['opacity'];\n      }\n    }\n    return opacity;\n  };\n  _proto2._getTileFadingOpacity = function _getTileFadingOpacity(tileImage) {\n    if (!this.layer.options['fadeAnimation'] || !tileImage.loadTime) {\n      return 1;\n    }\n    return Math.min(1, (now() - tileImage.loadTime) / this.layer.options['fadeDuration']);\n  };\n  _proto2.onRemove = function onRemove() {\n    this.clear();\n    delete this.tileCache;\n    delete this._tilePlaceHolder;\n    _CanvasRenderer.prototype.onRemove.call(this);\n  };\n  _proto2._markTiles = function _markTiles() {\n    var a = 0,\n      b = 0;\n    if (this.tilesLoading) {\n      for (var p in this.tilesLoading) {\n        this.tilesLoading[p].current = false;\n        a++;\n      }\n    }\n    if (this.tilesInView) {\n      for (var _p in this.tilesInView) {\n        this.tilesInView[_p].current = false;\n        b++;\n      }\n    }\n    return [a, b];\n  };\n  _proto2._retireTiles = function _retireTiles(force) {\n    for (var i in this.tilesLoading) {\n      var tile = this.tilesLoading[i];\n      if (force || !tile.current) {\n        if (tile.image) {\n          this.abortTileLoading(tile.image, tile.info);\n        }\n        this.deleteTile(tile);\n        this.removeTileLoading(tile.info);\n      }\n    }\n    for (var _i in this.tilesInView) {\n      var _tile2 = this.tilesInView[_i];\n      if (!_tile2.current) {\n        delete this.tilesInView[_i];\n        if (!this.tileCache.has(_i)) {\n          this.deleteTile(_tile2);\n        }\n      }\n    }\n  };\n  _proto2.deleteTile = function deleteTile(tile) {\n    if (!tile || !tile.image) {\n      return;\n    }\n    if (tile.image.close) {\n      tile.image.close();\n    }\n    tile.image.onload = null;\n    tile.image.onerror = null;\n  };\n  _proto2._generatePlaceHolder = function _generatePlaceHolder(res) {\n    var map = this.getMap();\n    var placeholder = this.layer.options['placeholder'];\n    if (!placeholder || map.getPitch()) {\n      return null;\n    }\n    var tileSize = this.layer.getTileSize(),\n      scale = res / map._getResolution(),\n      canvas = this._tilePlaceHolder = this._tilePlaceHolder || Canvas.createCanvas(1, 1, map.CanvasClass);\n    canvas.width = tileSize.width * scale;\n    canvas.height = tileSize.height * scale;\n    if (isFunction(placeholder)) {\n      placeholder(canvas);\n    } else {\n      defaultPlaceholder(canvas);\n    }\n    return canvas;\n  };\n  return TileLayerCanvasRenderer;\n}(CanvasRenderer);\nTileLayer.registerRenderer('canvas', TileLayerCanvasRenderer);\nfunction falseFn() {\n  return false;\n}\nfunction defaultPlaceholder(canvas) {\n  var ctx = canvas.getContext('2d'),\n    cw = canvas.width,\n    ch = canvas.height,\n    w = cw / 16,\n    h = ch / 16;\n  ctx.beginPath();\n  for (var i = 0; i < 16; i++) {\n    ctx.moveTo(0, i * h);\n    ctx.lineTo(cw, i * h);\n    ctx.moveTo(i * w, 0);\n    ctx.lineTo(i * w, ch);\n  }\n  ctx.strokeStyle = 'rgba(180, 180, 180, 0.1)';\n  ctx.lineWidth = 1;\n  ctx.stroke();\n  ctx.beginPath();\n  var path = [[0, 0], [cw, 0], [0, ch], [cw, ch], [0, 0], [0, ch], [cw, 0], [cw, ch], [0, ch / 2], [cw, ch / 2], [cw / 2, 0], [cw / 2, ch]];\n  for (var _i2 = 1; _i2 < path.length; _i2 += 2) {\n    ctx.moveTo(path[_i2 - 1][0], path[_i2 - 1][1]);\n    ctx.lineTo(path[_i2][0], path[_i2][1]);\n  }\n  ctx.lineWidth = 1 * 4;\n  ctx.stroke();\n}\nfunction compareTiles(a, b) {\n  return Math.abs(this._tileZoom - a.info.z) - Math.abs(this._tileZoom - b.info.z);\n}\n\nvar TILE_POINT$1 = new Point(0, 0);\nvar MESH_TO_TEST = {\n  properties: {}\n};\nvar TileLayerGLRenderer = function (_ImageGLRenderable) {\n  _inheritsLoose(TileLayerGLRenderer, _ImageGLRenderable);\n  function TileLayerGLRenderer() {\n    return _ImageGLRenderable.apply(this, arguments) || this;\n  }\n  var _proto = TileLayerGLRenderer.prototype;\n  _proto.isDrawable = function isDrawable() {\n    return true;\n  };\n  _proto.needToRedraw = function needToRedraw() {\n    var map = this.getMap();\n    if (this._gl() && !map.getPitch() && map.isZooming() && !map.isMoving() && !map.isRotating()) {\n      return true;\n    }\n    return _ImageGLRenderable.prototype.needToRedraw.call(this);\n  };\n  _proto.onDrawTileStart = function onDrawTileStart(context, parentContext) {\n    var gl = this.gl;\n    gl.enable(gl.DEPTH_TEST);\n    gl.depthFunc(gl.LEQUAL);\n    gl.enable(gl.POLYGON_OFFSET_FILL);\n    gl.enable(gl.STENCIL_TEST);\n    gl.stencilOp(gl.KEEP, gl.KEEP, gl.REPLACE);\n    var depthMask = isNil(this.layer.options['depthMask']) || !!this.layer.options['depthMask'];\n    gl.depthMask(depthMask);\n    if (parentContext && parentContext.renderTarget) {\n      var fbo = parentContext.renderTarget.fbo;\n      if (fbo) {\n        var framebuffer = parentContext.renderTarget.getFramebuffer(fbo);\n        gl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer);\n      }\n    }\n  };\n  _proto.onDrawTileEnd = function onDrawTileEnd(context, parentContext) {\n    var gl = this.gl;\n    if (parentContext && parentContext.renderTarget) {\n      var fbo = parentContext.renderTarget.fbo;\n      if (fbo) {\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n      }\n    }\n  };\n  _proto.drawTile = function drawTile(tileInfo, tileImage, parentContext) {\n    if (parentContext && parentContext.sceneFilter) {\n      if (!parentContext.sceneFilter(MESH_TO_TEST)) {\n        return;\n      }\n    }\n    var map = this.getMap();\n    if (!tileInfo || !map || !tileImage) {\n      return;\n    }\n    var scale = tileInfo._glScale = tileInfo._glScale || tileInfo.res / map.getGLRes();\n    var w = tileInfo.extent2d.xmax - tileInfo.extent2d.xmin;\n    var h = tileInfo.extent2d.ymax - tileInfo.extent2d.ymin;\n    if (tileInfo.cache !== false) {\n      this._bindGLBuffer(tileImage, w, h);\n    }\n    if (!this._gl()) {\n      _ImageGLRenderable.prototype.drawTile.call(this, tileInfo, tileImage);\n      return;\n    }\n    var extent2d = tileInfo.extent2d,\n      offset = tileInfo.offset;\n    var point = TILE_POINT$1.set(extent2d.xmin - offset[0], tileInfo.extent2d.ymax - offset[1]);\n    var x = point.x * scale,\n      y = point.y * scale;\n    var opacity = this.getTileOpacity(tileImage, tileInfo);\n    var debugInfo = null;\n    if (this.layer.options['debug']) {\n      debugInfo = this.getDebugInfo(tileInfo.id);\n    }\n    var gl = this.gl;\n    gl.stencilFunc(gl.LEQUAL, Math.abs(this.getCurrentTileZoom() - tileInfo.z), 0xFF);\n    var layerPolygonOffset = this.layer.getPolygonOffset();\n    var polygonOffset = this.drawingCurrentTiles ? layerPolygonOffset : layerPolygonOffset + 1;\n    gl.polygonOffset(polygonOffset, polygonOffset);\n    this.drawGLImage(tileImage, x, y, w, h, scale, opacity, debugInfo);\n    if (this._getTileFadingOpacity(tileImage) < 1) {\n      this.setToRedraw();\n    } else {\n      this.setCanvasUpdated();\n    }\n  };\n  _proto._bindGLBuffer = function _bindGLBuffer(image, w, h) {\n    if (!image.glBuffer) {\n      image.glBuffer = this.bufferTileData(0, 0, w, h);\n    }\n  };\n  _proto.loadTileImage = function loadTileImage(tileImage, url) {\n    var crossOrigin = this.layer.options['crossOrigin'];\n    tileImage.crossOrigin = crossOrigin !== null ? crossOrigin : '';\n    tileImage.src = url;\n    return;\n  };\n  _proto.onCanvasCreate = function onCanvasCreate() {\n    if (!this.canvas.gl || !this.canvas.gl.wrap) {\n      this.createCanvas2();\n    }\n  };\n  _proto.createContext = function createContext() {\n    _ImageGLRenderable.prototype.createContext.call(this);\n    this.createGLContext();\n  };\n  _proto.resizeCanvas = function resizeCanvas(canvasSize) {\n    if (!this.canvas) {\n      return;\n    }\n    _ImageGLRenderable.prototype.resizeCanvas.call(this, canvasSize);\n    this.resizeGLCanvas();\n  };\n  _proto.clearCanvas = function clearCanvas() {\n    if (!this.canvas) {\n      return;\n    }\n    _ImageGLRenderable.prototype.clearCanvas.call(this);\n    this.clearGLCanvas();\n  };\n  _proto.getCanvasImage = function getCanvasImage() {\n    if (!this._gl() || !this.canvas2) {\n      return _ImageGLRenderable.prototype.getCanvasImage.call(this);\n    }\n    var img = _ImageGLRenderable.prototype.getCanvasImage.call(this);\n    if (img) {\n      img.image = this.canvas2;\n    }\n    return img;\n  };\n  _proto._gl = function _gl() {\n    if (this.canvas.gl && this.canvas.gl.wrap) {\n      return true;\n    }\n    var map = this.getMap();\n    return map && (map.getPitch() || map.getBearing()) || this.layer && !!this.layer.options['fragmentShader'];\n  };\n  _proto.deleteTile = function deleteTile(tile) {\n    _ImageGLRenderable.prototype.deleteTile.call(this, tile);\n    if (tile && tile.image) {\n      this.disposeImage(tile.image);\n    }\n    delete tile.image;\n  };\n  _proto.onRemove = function onRemove() {\n    _ImageGLRenderable.prototype.onRemove.call(this);\n    this.removeGLCanvas();\n  };\n  return TileLayerGLRenderer;\n}(ImageGLRenderable(TileLayerCanvasRenderer));\nTileLayer.registerRenderer('gl', TileLayerGLRenderer);\n\nfunction _loadTile(tile) {\n  var tileSize = this.layer.getTileSize(),\n    canvasClass = this.canvas.constructor,\n    map = this.getMap();\n  var r = map.getDevicePixelRatio();\n  var tileCanvas = Canvas.createCanvas(tileSize['width'] * r, tileSize['height'] * r, canvasClass);\n  tileCanvas['layer'] = this.layer;\n  var me = this;\n  var point = new Point(tile['extent2d'].xmin, tile['extent2d'].ymax);\n  var extent = new Extent(map.pointToCoordinate(point), map.pointToCoordinate(point.add(tileSize.width, tileSize.height)), map.getProjection());\n  this.layer.drawTile(tileCanvas, {\n    'url': tile['url'],\n    'point': point,\n    'center': map.pointToCoordinate(point.add(tileSize['width'] / 2, tileSize['height'] / 2)),\n    'extent': extent,\n    'z': tile['z'],\n    'x': tile['x'],\n    'y': tile['y']\n  }, function (error) {\n    if (error) {\n      me.onTileError(tileCanvas, tile);\n      return;\n    }\n    me.onTileLoad(tileCanvas, tile);\n  });\n  return tileCanvas;\n}\nvar CanvasRenderer$1 = function (_TileLayerCanvasRende) {\n  _inheritsLoose(CanvasRenderer, _TileLayerCanvasRende);\n  function CanvasRenderer() {\n    return _TileLayerCanvasRende.apply(this, arguments) || this;\n  }\n  var _proto = CanvasRenderer.prototype;\n  _proto.loadTile = function loadTile() {\n    return _loadTile.apply(this, arguments);\n  };\n  return CanvasRenderer;\n}(TileLayerCanvasRenderer);\nvar GLRenderer = function (_TileLayerGLRenderer) {\n  _inheritsLoose(GLRenderer, _TileLayerGLRenderer);\n  function GLRenderer() {\n    return _TileLayerGLRenderer.apply(this, arguments) || this;\n  }\n  var _proto2 = GLRenderer.prototype;\n  _proto2.loadTile = function loadTile() {\n    return _loadTile.apply(this, arguments);\n  };\n  return GLRenderer;\n}(TileLayerGLRenderer);\nCanvasTileLayer.registerRenderer('canvas', CanvasRenderer$1);\nCanvasTileLayer.registerRenderer('gl', GLRenderer);\n\nvar quadVertices = typeof Int8Array !== 'undefined' ? new Int8Array([-1, 1, 0, -1, -1, 0, 1, 1, 0, 1, -1, 0]) : [];\nvar vert = \"\\n    attribute vec3 a_position;\\n    uniform mat4 transform;\\n\\n    void main()\\n    {\\n        gl_Position = transform * vec4(a_position, 1.0);\\n    }\\n\";\nvar frag = \"\\n    precision mediump float;\\n    uniform vec3 color;\\n    void main()\\n    {\\n        gl_FragColor = vec4(color, 1.0);\\n    }\\n\";\nvar QuadStencil = function () {\n  function QuadStencil(gl, vertices, debug) {\n    this.gl = gl;\n    this.quadVertices = vertices || quadVertices;\n    this.attributes = ['a_position', 3, getType(vertices)];\n    this.debug = debug;\n  }\n  var _proto = QuadStencil.prototype;\n  _proto.start = function start() {\n    var gl = this.gl;\n    gl.enable(gl.STENCIL_TEST);\n    gl.stencilMask(0xFF);\n    gl.stencilOp(gl.KEEP, gl.REPLACE, gl.REPLACE);\n    gl.depthMask(false);\n    this._save();\n    if (!this.buffer) {\n      this._createBuffer();\n      this._createProgram();\n    }\n    gl.useProgram(this.program);\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);\n    enableVertexAttrib(gl, this.program, this.attributes);\n    if (!this.transformLoc) {\n      this.transformLoc = gl.getUniformLocation(this.program, 'transform');\n    }\n    if (!this.colorLoc) {\n      this.colorLoc = gl.getUniformLocation(this.program, 'color');\n    }\n    if (this.debug) {\n      return;\n    }\n    gl.colorMask(false, false, false, false);\n  };\n  _proto.end = function end() {\n    var gl = this.gl;\n    gl.depthMask(true);\n    this._restore();\n    if (this.debug) {\n      return;\n    }\n    gl.colorMask(true, true, true, true);\n  };\n  _proto.draw = function draw(transform) {\n    var gl = this.gl;\n    gl.uniformMatrix4fv(this.transformLoc, false, transform);\n    gl.uniform3fv(this.colorLoc, [Math.random(), Math.random(), Math.random()]);\n    gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n  };\n  _proto.remove = function remove() {\n    var gl = this.gl;\n    if (this.buffer) {\n      gl.deleteBuffer(this.buffer);\n    }\n    if (this.program) {\n      gl.deleteShader(this.program.fragmentShader);\n      gl.deleteShader(this.program.vertexShader);\n      gl.deleteProgram(this.program);\n    }\n    delete this.transformLoc;\n    delete this.gl;\n    return this;\n  };\n  _proto.stencilMask = function stencilMask(mask) {\n    this.gl.stencilMask(mask);\n    return this;\n  };\n  _proto.stencilFunc = function stencilFunc(func, ref, mask) {\n    this.ref = ref;\n    this.gl.stencilFunc(func, ref, mask);\n    return this;\n  };\n  _proto.stencilOp = function stencilOp(fail, zfail, zpass) {\n    this.gl.stencilOp(fail, zfail, zpass);\n    return this;\n  };\n  _proto.resetFunc = function resetFunc() {\n    this.ref = 1;\n    this.gl.stencilFunc(this.gl.ALWAYS, 1, 0xFF);\n    return this;\n  };\n  _proto._save = function _save() {\n    var gl = this.gl;\n    this._savedProgram = gl.program;\n  };\n  _proto._restore = function _restore() {\n    var gl = this.gl;\n    gl.program = this._savedProgram;\n    if (gl.program) {\n      gl.useProgram(gl.program);\n    }\n  };\n  _proto._createBuffer = function _createBuffer() {\n    var gl = this.gl;\n    this.buffer = gl.createBuffer();\n    if (!this.buffer) {\n      throw new Error('Failed to create the buffer object');\n    }\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);\n    gl.bufferData(gl.ARRAY_BUFFER, this.quadVertices, gl.STATIC_DRAW);\n  };\n  _proto._createProgram = function _createProgram() {\n    var _createProgram2 = createProgram(this.gl, vert, frag),\n      program = _createProgram2.program,\n      vertexShader = _createProgram2.vertexShader,\n      fragmentShader = _createProgram2.fragmentShader;\n    program.vertexShader = vertexShader;\n    program.fragmentShader = fragmentShader;\n    this.program = program;\n  };\n  return QuadStencil;\n}();\nfunction getType(arr) {\n  if (arr instanceof Float32Array) {\n    return 'FLOAT';\n  } else if (arr instanceof Int16Array) {\n    return 'SHORT';\n  } else if (arr instanceof Uint16Array) {\n    return 'UNSIGNED_SHORT';\n  } else if (arr instanceof Int8Array) {\n    return 'BYTE';\n  } else if (arr instanceof Uint8Array || arr instanceof Uint8ClampedArray) {\n    return 'UNSIGNED_BYTE';\n  }\n  return 'FLOAT';\n}\n\nvar OverlayLayerRenderer = function (_CanvasRenderer) {\n  _inheritsLoose(OverlayLayerRenderer, _CanvasRenderer);\n  function OverlayLayerRenderer() {\n    return _CanvasRenderer.apply(this, arguments) || this;\n  }\n  var _proto = OverlayLayerRenderer.prototype;\n  _proto.checkResources = function checkResources() {\n    var geometries = this._geosToCheck || [];\n    if (!this._resourceChecked && this.layer._geoList) {\n      pushIn(geometries, this.layer._geoList);\n    }\n    if (!isArrayHasData(geometries)) {\n      return [];\n    }\n    var resources = [];\n    var cache = {};\n    for (var i = geometries.length - 1; i >= 0; i--) {\n      var geo = geometries[i];\n      var res = geo._getExternalResources();\n      if (!res.length) {\n        continue;\n      }\n      if (!this.resources) {\n        resources.push.apply(resources, res);\n      } else {\n        for (var _i = 0; _i < res.length; _i++) {\n          var url = res[_i][0];\n          if (!this.resources.isResourceLoaded(res[_i]) && !cache[url]) {\n            resources.push(res[_i]);\n            cache[url] = 1;\n          }\n        }\n      }\n    }\n    this._resourceChecked = true;\n    delete this._geosToCheck;\n    return resources;\n  };\n  _proto.render = function render() {\n    this.layer._sortGeometries();\n    return _CanvasRenderer.prototype.render.apply(this, arguments);\n  };\n  _proto._addGeoToCheckRes = function _addGeoToCheckRes(res) {\n    if (!res) {\n      return;\n    }\n    if (!Array.isArray(res)) {\n      res = [res];\n    }\n    if (!this._geosToCheck) {\n      this._geosToCheck = [];\n    }\n    pushIn(this._geosToCheck, res);\n  };\n  _proto.onGeometryAdd = function onGeometryAdd(geometries) {\n    this._addGeoToCheckRes(geometries);\n    redraw(this);\n  };\n  _proto.onGeometryRemove = function onGeometryRemove() {\n    redraw(this);\n  };\n  _proto.onGeometrySymbolChange = function onGeometrySymbolChange(e) {\n    this._addGeoToCheckRes(e.target);\n    redraw(this);\n  };\n  _proto.onGeometryShapeChange = function onGeometryShapeChange() {\n    redraw(this);\n  };\n  _proto.onGeometryPositionChange = function onGeometryPositionChange() {\n    redraw(this);\n  };\n  _proto.onGeometryZIndexChange = function onGeometryZIndexChange() {\n    redraw(this);\n  };\n  _proto.onGeometryShow = function onGeometryShow() {\n    redraw(this);\n  };\n  _proto.onGeometryHide = function onGeometryHide() {\n    redraw(this);\n  };\n  _proto.onGeometryPropertiesChange = function onGeometryPropertiesChange() {\n    redraw(this);\n  };\n  return OverlayLayerRenderer;\n}(CanvasRenderer);\nfunction redraw(renderer) {\n  if (renderer.layer.options['drawImmediate']) {\n    renderer.render();\n  }\n  renderer.setToRedraw();\n}\n\nvar TEMP_EXTENT$8 = new PointExtent();\nvar TEMP_VEC3 = [];\nvar TEMP_FIXEDEXTENT = new PointExtent();\nvar PLACEMENT_CENTER = 'center';\nvar tempCollisionIndex = new CollisionIndex();\nvar VectorLayerRenderer = function (_OverlayLayerCanvasRe) {\n  _inheritsLoose(VectorLayerRenderer, _OverlayLayerCanvasRe);\n  function VectorLayerRenderer() {\n    return _OverlayLayerCanvasRe.apply(this, arguments) || this;\n  }\n  var _proto = VectorLayerRenderer.prototype;\n  _proto._geoIsCollision = function _geoIsCollision(geo, collisionIndex) {\n    if (!geo) {\n      return false;\n    }\n    var collision = geo.options.collision;\n    if (!collision) {\n      return false;\n    }\n    var type = geo.getType();\n    if (type === 'Point' && geo.getContainerExtent) {\n      if (!geo.bbox) {\n        geo.bbox = [0, 0, 0, 0];\n      }\n      var bufferSize = this.layer.options['collisionBufferSize'];\n      var extent = geo.getContainerExtent();\n      if (!extent) {\n        return false;\n      }\n      geo.bbox[0] = extent.xmin - bufferSize;\n      geo.bbox[1] = extent.ymin - bufferSize;\n      geo.bbox[2] = extent.xmax + bufferSize;\n      geo.bbox[3] = extent.ymax + bufferSize;\n      if (collisionIndex.collides(geo.bbox)) {\n        return true;\n      }\n      collisionIndex.insertBox(geo.bbox);\n    }\n    return false;\n  };\n  _proto.getImageData = function getImageData() {\n    if (!this.layer.options['geometryEvents'] || !this._lastRenderTime || now() - this._lastRenderTime < 32) {\n      return null;\n    }\n    if (!this.context || !this.context.canvas) {\n      return null;\n    }\n    if (!this._imageData) {\n      var _this$context$canvas = this.context.canvas,\n        width = _this$context$canvas.width,\n        height = _this$context$canvas.height;\n      try {\n        this._imageData = this.context.getImageData(0, 0, width, height);\n      } catch (error) {\n        console.warn('hit detect failed with tainted canvas, some geometries have external resources in another domain:\\n', error);\n      }\n    }\n    return this._imageData;\n  };\n  _proto.clearImageData = function clearImageData() {\n    this._imageData = null;\n    delete this._imageData;\n    this._lastRenderTime = now();\n  };\n  _proto.checkResources = function checkResources() {\n    var _this = this;\n    var resources = _OverlayLayerCanvasRe.prototype.checkResources.apply(this, arguments);\n    var style = this.layer.getStyle();\n    if (style) {\n      if (!Array.isArray(style)) {\n        style = [style];\n      }\n      style.forEach(function (s) {\n        var res = getExternalResources(s['symbol'], true);\n        for (var i = 0, l = res.length; i < l; i++) {\n          if (!_this.resources.isResourceLoaded(res[i])) {\n            resources.push(res[i]);\n          }\n        }\n      });\n    }\n    return resources;\n  };\n  _proto.needToRedraw = function needToRedraw() {\n    var map = this.getMap();\n    if (map.isInteracting() && this.layer.options['enableAltitude']) {\n      return true;\n    }\n    if (map.isZooming() && !map.isRotating() && !map.getPitch() && !this._hasPoint && this.layer.constructor === VectorLayer) {\n      return false;\n    }\n    return _OverlayLayerCanvasRe.prototype.needToRedraw.call(this);\n  };\n  _proto.draw = function draw() {\n    if (!this.getMap()) {\n      return;\n    }\n    if (!this.layer.isVisible() || this.layer.isEmpty()) {\n      this.clearCanvas();\n      this.completeRender();\n      return;\n    }\n    this.prepareCanvas();\n    this.drawGeos();\n    this.completeRender();\n  };\n  _proto.isBlank = function isBlank() {\n    if (!this.context) {\n      return false;\n    }\n    return !this.context.canvas._drawn;\n  };\n  _proto.drawOnInteracting = function drawOnInteracting() {\n    if (!this._geosToDraw) {\n      return;\n    }\n    this._updateMapStateCache();\n    this._updateDisplayExtent();\n    var map = this.getMap();\n    var count = this.layer.getCount();\n    var res = this.mapStateCache.resolution;\n    if (map.isZooming() && map.options['seamlessZoom'] && this._drawnRes !== undefined && res > this._drawnRes * 1.5 && this._geosToDraw.length < count || map.isMoving() || map.isInteracting()) {\n      this.prepareToDraw();\n      this._batchConversionMarkers(this.mapStateCache.glRes);\n      if (!this._onlyHasPoint) {\n        this.forEachGeo(this.checkGeo, this);\n      }\n      this._drawnRes = res;\n    }\n    this._sortByDistanceToCamera(map.cameraPosition);\n    var _this$layer$options = this.layer.options,\n      collision = _this$layer$options.collision,\n      collisionDelay = _this$layer$options.collisionDelay;\n    if (collision) {\n      var time = now();\n      if (!this._lastCollisionTime) {\n        this._lastCollisionTime = time;\n      }\n      if (time - this._lastCollisionTime <= collisionDelay) {\n        this._geosToDraw = this._lastGeosToDraw || this._geosToDraw;\n      } else {\n        this._collidesGeos();\n        this._lastCollisionTime = time;\n      }\n    }\n    for (var i = 0, l = this._geosToDraw.length; i < l; i++) {\n      var geo = this._geosToDraw[i];\n      if (!geo._isCheck) {\n        if (!geo.isVisible()) {\n          delete geo._cPoint;\n          delete geo._inCurrentView;\n          continue;\n        }\n      }\n      geo._paint(this._displayExtent);\n      this._geosToDraw[i]._cPoint = undefined;\n      this._geosToDraw[i]._inCurrentView = undefined;\n    }\n    this.clearImageData();\n    this._lastGeosToDraw = this._geosToDraw;\n  };\n  _proto.show = function show() {\n    this.layer.forEach(function (geo) {\n      geo._repaint();\n    });\n    _OverlayLayerCanvasRe.prototype.show.apply(this, arguments);\n  };\n  _proto.forEachGeo = function forEachGeo(fn, context) {\n    this.layer.forEach(fn, context);\n  };\n  _proto.drawGeos = function drawGeos() {\n    this._updateMapStateCache();\n    this._drawnRes = this.mapStateCache.resolution;\n    this._updateDisplayExtent();\n    this.prepareToDraw();\n    this._batchConversionMarkers(this.mapStateCache.glRes);\n    if (!this._onlyHasPoint) {\n      this.forEachGeo(this.checkGeo, this);\n    }\n    this._sortByDistanceToCamera(this.getMap().cameraPosition);\n    this._collidesGeos();\n    for (var i = 0, len = this._geosToDraw.length; i < len; i++) {\n      this._geosToDraw[i]._paint();\n      this._geosToDraw[i]._cPoint = undefined;\n      this._geosToDraw[i]._inCurrentView = undefined;\n    }\n    this.clearImageData();\n    this._lastGeosToDraw = this._geosToDraw;\n    this._setDrawGeosDrawTime();\n  };\n  _proto.prepareToDraw = function prepareToDraw() {\n    this.layer._drawTime = now();\n    this._hasPoint = false;\n    this._geosToDraw = [];\n    return this;\n  };\n  _proto._setDrawGeosDrawTime = function _setDrawGeosDrawTime() {\n    var drawTime = this.layer._drawTime;\n    for (var i = 0, len = this._geosToDraw.length; i < len; i++) {\n      var geo = this._geosToDraw[i];\n      var painter = geo._painter;\n      if (painter && painter._setDrawTime) {\n        painter._setDrawTime(drawTime);\n      }\n    }\n    return this;\n  };\n  _proto.checkGeo = function checkGeo(geo) {\n    if (geo.type === 'Point' && this._onlyHasPoint !== undefined) {\n      if (geo._inCurrentView) {\n        this._hasPoint = true;\n        geo._isCheck = true;\n        this._geosToDraw.push(geo);\n      }\n      return;\n    }\n    geo._isCheck = false;\n    if (!geo || !geo.isVisible() || !geo.getMap() || !geo.getLayer() || !geo.getLayer().isCanvasRender()) {\n      return;\n    }\n    var painter = geo._getPainter();\n    var inCurrentView = true;\n    if (geo._inCurrentView) {\n      inCurrentView = true;\n    } else if (geo._inCurrentView === false) {\n      inCurrentView = false;\n    } else {\n      var extent2D = painter.get2DExtent(this.resources, TEMP_EXTENT$8);\n      if (!extent2D || !extent2D.intersects(this._displayExtent)) {\n        inCurrentView = false;\n      }\n    }\n    if (!inCurrentView) {\n      return;\n    }\n    if (painter.hasPoint()) {\n      this._hasPoint = true;\n    }\n    geo._isCheck = true;\n    this._geosToDraw.push(geo);\n  };\n  _proto._collidesGeos = function _collidesGeos() {\n    var collision = this.layer.options['collision'];\n    if (!collision) {\n      return this;\n    }\n    var collisionScope = this.layer.options['collisionScope'];\n    var map = this.layer.getMap();\n    var collisionIndex = collisionScope === 'map' ? map.getCollisionIndex() : tempCollisionIndex;\n    if (collisionIndex === tempCollisionIndex) {\n      collisionIndex.clear();\n    }\n    var geos = this._geosToDraw;\n    this._geosToDraw = [];\n    for (var i = 0, len = geos.length; i < len; i++) {\n      if (this._geoIsCollision(geos[i], collisionIndex)) {\n        continue;\n      }\n      this._geosToDraw.push(geos[i]);\n    }\n    return this;\n  };\n  _proto.onZoomEnd = function onZoomEnd() {\n    delete this.canvasExtent2D;\n    _OverlayLayerCanvasRe.prototype.onZoomEnd.apply(this, arguments);\n  };\n  _proto.onRemove = function onRemove() {\n    this.forEachGeo(function (g) {\n      g.onHide();\n    });\n    delete this._geosToDraw;\n  };\n  _proto.onGeometryPropertiesChange = function onGeometryPropertiesChange(param) {\n    if (param) {\n      this.layer._styleGeometry(param['target']);\n    }\n    _OverlayLayerCanvasRe.prototype.onGeometryPropertiesChange.call(this, param);\n  };\n  _proto._updateDisplayExtent = function _updateDisplayExtent() {\n    var extent2D = this.canvasExtent2D;\n    if (this._maskExtent) {\n      if (!this._maskExtent.intersects(extent2D)) {\n        this.completeRender();\n        return;\n      }\n      extent2D = extent2D.intersection(this._maskExtent);\n    }\n    this._displayExtent = extent2D;\n  };\n  _proto.identifyAtPoint = function identifyAtPoint(point, options) {\n    if (options === void 0) {\n      options = {};\n    }\n    var geometries = this._geosToDraw;\n    if (!geometries) {\n      return [];\n    }\n    return this.layer._hitGeos(geometries, point, options);\n  };\n  _proto._updateMapStateCache = function _updateMapStateCache() {\n    var map = this.getMap();\n    var offset = map._pointToContainerPoint(this.southWest)._add(0, -map.height);\n    var resolution = map.getResolution();\n    var pitch = map.getPitch();\n    var bearing = map.getBearing();\n    var glScale = map.getGLScale();\n    var glRes = map.getGLRes();\n    var containerExtent = map.getContainerExtent();\n    var _2DExtent = map._get2DExtent();\n    var glExtent = map._get2DExtentAtRes(glRes);\n    this.mapStateCache = {\n      resolution: resolution,\n      pitch: pitch,\n      bearing: bearing,\n      glScale: glScale,\n      glRes: glRes,\n      _2DExtent: _2DExtent,\n      glExtent: glExtent,\n      containerExtent: containerExtent,\n      offset: offset\n    };\n    return this;\n  };\n  _proto._batchConversionMarkers = function _batchConversionMarkers(glRes) {\n    this._onlyHasPoint = undefined;\n    if (!this._constructorIsThis()) {\n      return [];\n    }\n    var cPoints = [];\n    var markers = [];\n    var altitudes = [];\n    var altitudeCache = {};\n    var layer = this.layer;\n    var layerOpts = layer.options;\n    var layerAltitude = layer.getAltitude ? layer.getAltitude() : 0;\n    var isCanvasRender = layer.isCanvasRender();\n    this._onlyHasPoint = true;\n    var idx = 0;\n    for (var i = 0, len = this.layer._geoList.length; i < len; i++) {\n      var geo = this.layer._geoList[i];\n      var type = geo.getType();\n      if (type === 'Point') {\n        var painter = geo._painter;\n        if (!painter) {\n          painter = geo._getPainter();\n        }\n        var point = painter.getRenderPoints(PLACEMENT_CENTER)[0][0];\n        var altitude = layerOpts['enableAltitude'] ? geo._getAltitude() : layerAltitude;\n        if (altitudeCache[altitude] === undefined) {\n          altitudeCache[altitude] = painter.getAltitude();\n        }\n        cPoints[idx] = point;\n        altitudes[idx] = altitudeCache[altitude];\n        markers[idx] = geo;\n        idx++;\n      } else {\n        this._onlyHasPoint = false;\n      }\n    }\n    if (idx === 0) {\n      return [];\n    }\n    var map = this.getMap();\n    var pts = getPointsResultPts(cPoints, '_pt');\n    pts = map._pointsAtResToContainerPoints(cPoints, glRes, altitudes, pts);\n    var containerExtent = map.getContainerExtent();\n    var xmax = containerExtent.xmax,\n      ymax = containerExtent.ymax,\n      xmin = containerExtent.xmin,\n      ymin = containerExtent.ymin;\n    var extentCache = {};\n    for (var _i = 0, _len = markers.length; _i < _len; _i++) {\n      var _geo = markers[_i];\n      _geo._cPoint = pts[_i];\n      if (!_geo._cPoint) {\n        _geo._inCurrentView = false;\n        continue;\n      }\n      var _pts$_i = pts[_i],\n        x = _pts$_i.x,\n        y = _pts$_i.y;\n      _geo._inCurrentView = x >= xmin && y >= ymin && x <= xmax && y <= ymax;\n      if (!_geo._inCurrentView) {\n        var symbolkey = _geo.getSymbolHash();\n        var fixedExtent = void 0;\n        if (symbolkey) {\n          fixedExtent = extentCache[symbolkey] = extentCache[symbolkey] || _geo._painter.getFixedExtent();\n        } else {\n          fixedExtent = _geo._painter.getFixedExtent();\n        }\n        TEMP_FIXEDEXTENT.set(fixedExtent.xmin, fixedExtent.ymin, fixedExtent.xmax, fixedExtent.ymax);\n        TEMP_FIXEDEXTENT._add(pts[_i]);\n        _geo._inCurrentView = TEMP_FIXEDEXTENT.intersects(containerExtent);\n      }\n      if (_geo._inCurrentView) {\n        if (!_geo.isVisible() || !isCanvasRender) {\n          _geo._inCurrentView = false;\n        }\n        if (this._onlyHasPoint && _geo._inCurrentView) {\n          this._hasPoint = true;\n          _geo._isCheck = true;\n          this._geosToDraw.push(_geo);\n        }\n      }\n    }\n    return pts;\n  };\n  _proto._sortByDistanceToCamera = function _sortByDistanceToCamera(cameraPosition) {\n    if (!this.layer.options['sortByDistanceToCamera']) {\n      return;\n    }\n    if (!this._geosToDraw.length) {\n      return;\n    }\n    var map = this.getMap();\n    var p = map.distanceToPoint(1000, 0, map.getGLScale()).x;\n    var meterScale = p / 1000;\n    var placement = 'center';\n    this._geosToDraw.sort(function (a, b) {\n      var type0 = a.getType();\n      var type1 = b.getType();\n      if (type0 !== 'Point' || type1 !== 'Point') {\n        return 0;\n      }\n      var painter0 = a._painter;\n      var painter1 = b._painter;\n      if (!painter0 || !painter1) {\n        return 0;\n      }\n      var point0 = painter0.getRenderPoints(placement)[0][0];\n      var point1 = painter1.getRenderPoints(placement)[0][0];\n      var alt0 = painter0.getAltitude() * meterScale;\n      var alt1 = painter1.getAltitude() * meterScale;\n      set$2(TEMP_VEC3, point0.x, point0.y, alt0);\n      var dist0 = distance(TEMP_VEC3, cameraPosition);\n      set$2(TEMP_VEC3, point1.x, point1.y, alt1);\n      var dist1 = distance(TEMP_VEC3, cameraPosition);\n      return dist1 - dist0;\n    });\n  };\n  _proto._constructorIsThis = function _constructorIsThis() {\n    return this.constructor === VectorLayerRenderer;\n  };\n  return VectorLayerRenderer;\n}(OverlayLayerRenderer);\nVectorLayer.registerRenderer('canvas', VectorLayerRenderer);\n\nvar MapRenderer = function (_Class) {\n  _inheritsLoose(MapRenderer, _Class);\n  function MapRenderer(map) {\n    var _this;\n    _this = _Class.call(this) || this;\n    _this.map = map;\n    _this._handlerQueue = [];\n    _this._thisDocVisibilitychange = _this._onDocVisibilitychange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this._thisDocDragStart = _this._onDocDragStart.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this._thisDocDragEnd = _this._onDocDragEnd.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n  var _proto = MapRenderer.prototype;\n  _proto.callInNextFrame = function callInNextFrame(fn) {\n    this._handlerQueue.push(fn);\n  };\n  _proto.executeFrameCallbacks = function executeFrameCallbacks() {\n    var running = this._handlerQueue;\n    this._handlerQueue = [];\n    for (var i = 0, l = running.length; i < l; i++) {\n      running[i]();\n    }\n  };\n  _proto.offsetPlatform = function offsetPlatform(offset, force) {\n    if (!this.map._panels.front) {\n      return this;\n    }\n    if (!force && offset.x === 0 && offset.y === 0) {\n      return this;\n    }\n    var panels = this.map._panels;\n    var hasFront = this._frontCount = panels.back.layerDOM.childElementCount;\n    var hasBack = this._backCount = panels.front.layerDOM.childElementCount;\n    var hasUI = this._uiCount = panels.front.uiDOM.childElementCount;\n    if (hasFront || hasBack || hasUI) {\n      var pos = this.map.offsetPlatform();\n      if (offset) {\n        pos = pos.add(offset)._round();\n      } else {\n        pos = pos.round();\n      }\n      if (hasBack) {\n        offsetDom(panels.back, pos);\n      }\n      if (hasFront || hasUI) {\n        offsetDom(panels.front, pos);\n      }\n    }\n    return this;\n  };\n  _proto.domChanged = function domChanged() {\n    var panels = this.map._panels;\n    if (!panels.front) {\n      return false;\n    }\n    var frontCount = panels.back.layerDOM.childElementCount;\n    if (this._frontCount === undefined || this._frontCount !== frontCount) {\n      return true;\n    }\n    var backCount = panels.front.layerDOM.childElementCount;\n    if (this._backCount === undefined || this._backCount !== backCount) {\n      return true;\n    }\n    var uiCount = panels.front.uiDOM.childElementCount;\n    if (this._uiCount === undefined || this._uiCount !== uiCount) {\n      return true;\n    }\n    return false;\n  };\n  _proto.resetContainer = function resetContainer() {\n    if (!this.map) {\n      return;\n    }\n    this.map._resetMapViewPoint();\n    if (this.map._panels.front) {\n      var pos = new Point(0, 0);\n      offsetDom(this.map._panels.back, pos);\n      offsetDom(this.map._panels.front, pos);\n    }\n  };\n  _proto.onZoomEnd = function onZoomEnd() {\n    this.resetContainer();\n  };\n  _proto.onLoad = function onLoad() {\n    this._frameLoop();\n  };\n  _proto._onDocVisibilitychange = function _onDocVisibilitychange() {\n    if (document.visibilityState !== 'visible') {\n      return;\n    }\n    this.setToRedraw();\n  };\n  _proto._getWrapPanel = function _getWrapPanel() {\n    if (!this.map) {\n      return null;\n    }\n    var panels = this.map.getPanels();\n    return panels && panels.mapWrapper;\n  };\n  _proto._onDocDragStart = function _onDocDragStart() {\n    var wrapPanel = this._getWrapPanel();\n    if (wrapPanel) {\n      wrapPanel.style.overflow = 'visible';\n    }\n    return;\n  };\n  _proto._onDocDragEnd = function _onDocDragEnd() {\n    var wrapPanel = this._getWrapPanel();\n    if (wrapPanel) {\n      wrapPanel.style.overflow = 'hidden';\n    }\n    return;\n  };\n  _proto._containerIsOffscreen = function _containerIsOffscreen() {\n    var container = this.map.getContainer();\n    if (!container || !container.style || container.style.display === 'none') {\n      return true;\n    }\n    var minSize = Math.min(container.clientWidth, container.clientHeight);\n    return minSize <= 0;\n  };\n  return MapRenderer;\n}(Class);\n\nvar MapCanvasRenderer = function (_MapRenderer) {\n  _inheritsLoose(MapCanvasRenderer, _MapRenderer);\n  function MapCanvasRenderer(map) {\n    var _this;\n    _this = _MapRenderer.call(this, map) || this;\n    _this._containerIsCanvas = !!map._containerDOM.getContext;\n    _this._registerEvents();\n    _this._loopTime = 0;\n    _this._resizeEventList = [];\n    _this._resizeTime = -Infinity;\n    return _this;\n  }\n  var _proto = MapCanvasRenderer.prototype;\n  _proto.load = function load() {\n    this.initContainer();\n  };\n  _proto.renderFrame = function renderFrame(framestamp) {\n    var map = this.map;\n    if (!map || !map.options['renderable']) {\n      return false;\n    }\n    this._handleResizeEventList(framestamp);\n    if (map.options['stopRenderOnOffscreen'] && this._containerIsOffscreen()) {\n      return true;\n    }\n    this._updateDomPosition(framestamp);\n    delete this._isViewChanged;\n    map._fireEvent('framestart');\n    this.updateMapDOM();\n    map.clearCollisionIndex();\n    var layers = this._getAllLayerToRender();\n    this.drawLayers(layers, framestamp);\n    var updated = this.drawLayerCanvas(layers);\n    if (updated) {\n      this.drawTops();\n      this._drawCenterCross();\n      if (map.options['debugSky']) {\n        this._debugSky();\n      }\n    }\n    this._needClear = false;\n    map._fireEvent('frameend');\n    this._recordView();\n    this._mapview = this._getMapView();\n    delete this._spatialRefChanged;\n    this._fireLayerLoadEvents();\n    this.executeFrameCallbacks();\n    this._canvasUpdated = false;\n    map.uiCollides();\n    return true;\n  };\n  _proto.updateMapDOM = function updateMapDOM() {\n    var map = this.map;\n    if (map.isZooming()) {\n      return;\n    }\n    var offset = map._getViewPointFrameOffset();\n    if (offset) {\n      map.offsetPlatform(offset);\n    } else if (this.domChanged()) {\n      this.offsetPlatform(null, true);\n    }\n  };\n  _proto.drawLayers = function drawLayers(layers, framestamp) {\n    var map = this.map,\n      isInteracting = map.isInteracting(),\n      canvasIds = [],\n      updatedIds = [],\n      fps = map.options['fpsOnInteracting'] || 0,\n      timeLimit = fps === 0 ? 0 : 1000 / fps,\n      layerLimit = this.map.options['layerCanvasLimitOnInteracting'],\n      l = layers.length;\n    var baseLayer = map.getBaseLayer();\n    var t = 0;\n    for (var i = 0; i < l; i++) {\n      var layer = layers[i];\n      if (!layer.isVisible()) {\n        continue;\n      }\n      var isCanvas = layer.isCanvasRender();\n      if (isCanvas) {\n        canvasIds.push(layer.getId());\n      }\n      var renderer = layer._getRenderer();\n      if (!renderer) {\n        continue;\n      }\n      var needsRedraw = this._checkLayerRedraw(layer);\n      if (isCanvas && renderer.isCanvasUpdated()) {\n        if (!needsRedraw) {\n          updatedIds.push(layer.getId());\n        }\n        this.setLayerCanvasUpdated();\n      }\n      var transformMatrix = renderer.__zoomTransformMatrix;\n      delete renderer.__zoomTransformMatrix;\n      if (!needsRedraw) {\n        if (isCanvas && isInteracting) {\n          if (map.isZooming() && !map.getPitch()) {\n            renderer.prepareRender();\n            renderer.__zoomTransformMatrix = this._zoomMatrix;\n          } else if (map.getPitch() || map.isRotating()) {\n            renderer.clearCanvas();\n          }\n        }\n        continue;\n      }\n      if (isInteracting && isCanvas) {\n        if (layerLimit > 0 && l - 1 - i > layerLimit && layer !== baseLayer) {\n          layer._getRenderer().clearCanvas();\n          continue;\n        }\n        t += this._drawCanvasLayerOnInteracting(layer, t, timeLimit, framestamp);\n      } else if (isInteracting && renderer.drawOnInteracting) {\n        if (renderer.prepareRender) {\n          renderer.prepareRender();\n        }\n        if (renderer.checkAndDraw) {\n          renderer.checkAndDraw(renderer.drawOnInteracting, this._eventParam, framestamp);\n        } else {\n          renderer.drawOnInteracting(this._eventParam, framestamp);\n        }\n      } else {\n        renderer.render(framestamp);\n        if (isCanvas && transformMatrix && renderer.isLoadingResource()) {\n          renderer.__zoomTransformMatrix = transformMatrix;\n        }\n      }\n      if (isCanvas) {\n        updatedIds.push(layer.getId());\n        this.setLayerCanvasUpdated();\n      }\n    }\n    var preCanvasIds = this._canvasIds || [];\n    var preUpdatedIds = this._updatedIds || [];\n    this._canvasIds = canvasIds;\n    this._updatedIds = updatedIds;\n    if (!this.isLayerCanvasUpdated()) {\n      var sep = '---';\n      if (preCanvasIds.join(sep) !== canvasIds.join(sep) || preUpdatedIds.join(sep) !== updatedIds.join(sep)) {\n        this.setLayerCanvasUpdated();\n      }\n    }\n  };\n  _proto._checkLayerRedraw = function _checkLayerRedraw(layer) {\n    if (this.isSpatialReferenceChanged()) {\n      return true;\n    }\n    var map = this.map;\n    var renderer = layer._getRenderer();\n    if (layer.isCanvasRender()) {\n      return renderer.testIfNeedRedraw();\n    } else {\n      if (renderer.needToRedraw && renderer.needToRedraw()) {\n        return true;\n      }\n      return map.isInteracting() || this.isViewChanged();\n    }\n  };\n  _proto._drawCanvasLayerOnInteracting = function _drawCanvasLayerOnInteracting(layer, t, timeLimit, framestamp) {\n    var map = this.map,\n      renderer = layer._getRenderer(),\n      drawTime = renderer.getDrawTime(),\n      inTime = timeLimit === 0 || timeLimit > 0 && t + drawTime <= timeLimit;\n    if (renderer.mustRenderOnInteracting && renderer.mustRenderOnInteracting()) {\n      renderer.render(framestamp);\n    } else if (renderer.drawOnInteracting && (layer === map.getBaseLayer() || inTime || map.isZooming() && layer.options['forceRenderOnZooming'] || map.isMoving() && layer.options['forceRenderOnMoving'] || map.isRotating() && layer.options['forceRenderOnRotating'])) {\n      renderer.prepareRender();\n      renderer.prepareCanvas();\n      if (renderer.checkAndDraw) {\n        renderer.checkAndDraw(renderer.drawOnInteracting, this._eventParam, framestamp);\n      } else {\n        renderer.drawOnInteracting(this._eventParam, framestamp);\n      }\n      return drawTime;\n    } else if (map.isZooming() && !map.getPitch() && !map.isRotating()) {\n      renderer.prepareRender();\n      renderer.__zoomTransformMatrix = this._zoomMatrix;\n    } else if (map.getPitch() || map.isRotating()) {\n      renderer.clearCanvas();\n    }\n    if (renderer.drawOnInteracting && !inTime) {\n      renderer.onSkipDrawOnInteracting(this._eventParam, framestamp);\n    }\n    return 0;\n  };\n  _proto._fireLayerLoadEvents = function _fireLayerLoadEvents() {\n    if (this._updatedIds && this._updatedIds.length > 0) {\n      var map = this.map;\n      this._updatedIds.reverse().forEach(function (id) {\n        var layer = map.getLayer(id);\n        if (!layer) {\n          return;\n        }\n        var renderer = layer._getRenderer();\n        if (!renderer || !renderer.isRenderComplete()) {\n          return;\n        }\n        layer.fire('layerload');\n      });\n    }\n  };\n  _proto.isLayerCanvasUpdated = function isLayerCanvasUpdated() {\n    return this._canvasUpdated;\n  };\n  _proto.setLayerCanvasUpdated = function setLayerCanvasUpdated() {\n    this._canvasUpdated = true;\n  };\n  _proto.drawLayerCanvas = function drawLayerCanvas(layers) {\n    var map = this.map;\n    if (!map) {\n      return false;\n    }\n    if (!this.isLayerCanvasUpdated() && !this.isViewChanged() && this._needClear === false) {\n      return false;\n    }\n    if (!this.canvas) {\n      this.createCanvas();\n    }\n    map._fireEvent('renderstart', {\n      'context': this.context\n    });\n    if (!this._updateCanvasSize()) {\n      this.clearCanvas();\n    }\n    var interacting = map.isInteracting(),\n      limit = map.options['layerCanvasLimitOnInteracting'];\n    var len = layers.length;\n    var baseLayerImage;\n    var images = [];\n    for (var i = 0; i < len; i++) {\n      if (!layers[i].isVisible() || !layers[i].isCanvasRender()) {\n        continue;\n      }\n      var renderer = layers[i]._getRenderer();\n      if (!renderer) {\n        continue;\n      }\n      var layerImage = this._getLayerImage(layers[i]);\n      if (layerImage && layerImage['image']) {\n        if (layers[i] === map.getBaseLayer()) {\n          baseLayerImage = [layers[i], layerImage];\n        } else {\n          images.push([layers[i], layerImage]);\n        }\n      }\n    }\n    var targetWidth = this.canvas.width;\n    var targetHeight = this.canvas.height;\n    if (baseLayerImage) {\n      this._drawLayerCanvasImage(baseLayerImage[0], baseLayerImage[1], targetWidth, targetHeight);\n      this._drawFog();\n    }\n    len = images.length;\n    var start = interacting && limit >= 0 && len > limit ? len - limit : 0;\n    for (var _i = start; _i < len; _i++) {\n      this._drawLayerCanvasImage(images[_i][0], images[_i][1], targetWidth, targetHeight);\n    }\n    map._fireEvent('renderend', {\n      'context': this.context\n    });\n    return true;\n  };\n  _proto.setToRedraw = function setToRedraw() {\n    var layers = this._getAllLayerToRender();\n    this._needClear = true;\n    for (var i = 0, l = layers.length; i < l; i++) {\n      var renderer = layers[i].getRenderer();\n      if (renderer && renderer.canvas && renderer.setToRedraw) {\n        renderer.setToRedraw();\n      }\n    }\n  };\n  _proto.updateMapSize = function updateMapSize(size) {\n    if (!size || this._containerIsCanvas) {\n      return;\n    }\n    var width = size['width'] + 'px',\n      height = size['height'] + 'px';\n    var panels = this.map._panels;\n    panels.mapWrapper.style.width = width;\n    panels.mapWrapper.style.height = height;\n    this._updateCanvasSize();\n  };\n  _proto.getMainPanel = function getMainPanel() {\n    if (!this.map) {\n      return null;\n    }\n    if (this._containerIsCanvas) {\n      return this.map._containerDOM;\n    }\n    if (this.map._panels) {\n      return this.map._panels.mapWrapper;\n    }\n    return null;\n  };\n  _proto.toDataURL = function toDataURL(mimeType, quality) {\n    if (!this.canvas) {\n      return null;\n    }\n    return this.canvas.toDataURL(mimeType, quality);\n  };\n  _proto.remove = function remove() {\n    if (Browser$1.webgl && typeof document !== 'undefined') {\n      removeDomEvent(document, 'visibilitychange', this._thisDocVisibilitychange, this);\n      removeDomEvent(document, 'dragstart', this._thisDocDragStart, this);\n      removeDomEvent(document, 'dragend', this._thisDocDragEnd, this);\n    }\n    if (this._resizeInterval) {\n      clearInterval(this._resizeInterval);\n    }\n    if (this._resizeObserver) {\n      this._resizeObserver.disconnect();\n    }\n    delete this.context;\n    delete this.canvas;\n    delete this.map;\n    delete this._spatialRefChanged;\n    this._cancelFrameLoop();\n  };\n  _proto.hitDetect = function hitDetect(point) {\n    var map = this.map;\n    if (!map || !map.options['hitDetect'] || map.isInteracting()) {\n      return;\n    }\n    var layers = map._getLayers();\n    var cursor = 'default';\n    var limit = map.options['hitDetectLimit'] || 0;\n    var counter = 0;\n    if (point && point._round) {\n      point._round();\n    }\n    for (var i = layers.length - 1; i >= 0; i--) {\n      var layer = layers[i];\n      if (!layer.options['hitDetect'] || layer.isEmpty && layer.isEmpty()) {\n        continue;\n      }\n      var renderer = layer._getRenderer();\n      if (!renderer || !renderer.hitDetect) {\n        continue;\n      }\n      if (renderer.isBlank && renderer.isBlank()) {\n        continue;\n      }\n      if (layer.options['cursor'] !== 'default' && renderer.hitDetect(point)) {\n        cursor = layer.options['cursor'] || 'pointer';\n        break;\n      }\n      counter++;\n      if (limit > 0 && counter > limit) {\n        break;\n      }\n    }\n    map._trySetCursor(cursor);\n  };\n  _proto._getLayerImage = function _getLayerImage(layer) {\n    var renderer = layer._getRenderer();\n    if (renderer.getCanvasImage) {\n      return renderer.getCanvasImage();\n    }\n    return null;\n  };\n  _proto.initContainer = function initContainer() {\n    var panels = this.map._panels;\n    function createContainer(name, className, cssText, enableSelect) {\n      var c = createEl('div', className);\n      if (cssText) {\n        c.style.cssText = cssText;\n      }\n      panels[name] = c;\n      if (!enableSelect) {\n        preventSelection(c);\n      }\n      return c;\n    }\n    var containerDOM = this.map._containerDOM;\n    if (this._containerIsCanvas) {\n      return;\n    }\n    containerDOM.innerHTML = '';\n    var POSITION0 = 'position:absolute;top:0px;left:0px;';\n    var mapWrapper = createContainer('mapWrapper', 'maptalks-wrapper', 'position:absolute;overflow:hidden;', true),\n      mapAllLayers = createContainer('allLayers', 'maptalks-all-layers', POSITION0 + 'padding:0px;margin:0px;z-index:0;overflow:visible;', true),\n      backStatic = createContainer('backStatic', 'maptalks-back-static', POSITION0 + 'z-index:0;', true),\n      back = createContainer('back', 'maptalks-back', POSITION0 + 'z-index:1;'),\n      backLayer = createContainer('backLayer', 'maptalks-back-layer', POSITION0),\n      canvasContainer = createContainer('canvasContainer', 'maptalks-canvas-layer', POSITION0 + 'border:none;z-index:2;'),\n      frontStatic = createContainer('frontStatic', 'maptalks-front-static', POSITION0 + 'z-index:3;', true),\n      front = createContainer('front', 'maptalks-front', POSITION0 + 'z-index:4;', true),\n      frontLayer = createContainer('frontLayer', 'maptalks-front-layer', POSITION0 + 'z-index:0;'),\n      ui = createContainer('ui', 'maptalks-ui', POSITION0 + 'border:none;z-index:1;', true),\n      control = createContainer('control', 'maptalks-control', 'z-index:1', true);\n    containerDOM.appendChild(mapWrapper);\n    mapAllLayers.appendChild(backStatic);\n    back.appendChild(backLayer);\n    back.layerDOM = backLayer;\n    mapAllLayers.appendChild(back);\n    mapAllLayers.appendChild(canvasContainer);\n    front.appendChild(frontLayer);\n    front.layerDOM = frontLayer;\n    front.uiDOM = ui;\n    mapAllLayers.appendChild(frontStatic);\n    mapAllLayers.appendChild(front);\n    front.appendChild(ui);\n    mapWrapper.appendChild(mapAllLayers);\n    mapWrapper.appendChild(control);\n    this.createCanvas();\n    this.resetContainer();\n    var mapSize = this.map._getContainerDomSize();\n    this.updateMapSize(mapSize);\n  };\n  _proto.isViewChanged = function isViewChanged() {\n    if (this._isViewChanged !== undefined) {\n      return this._isViewChanged;\n    }\n    var previous = this._mapview;\n    var view = this._getMapView();\n    this._isViewChanged = !previous || !equalMapView(previous, view);\n    return this._isViewChanged;\n  };\n  _proto._recordView = function _recordView() {\n    var map = this.map;\n    if (!map._onViewChange || map.isInteracting() || map.isAnimating()) {\n      return;\n    }\n    if (!equalMapView(map.getView(), map._getCurrentView())) {\n      map._onViewChange(map.getView());\n    }\n  };\n  _proto.isSpatialReferenceChanged = function isSpatialReferenceChanged() {\n    return this._spatialRefChanged;\n  };\n  _proto._getMapView = function _getMapView() {\n    var map = this.map;\n    var center = map._getPrjCenter();\n    return {\n      x: center.x,\n      y: center.y,\n      zoom: map.getZoom(),\n      pitch: map.getPitch(),\n      bearing: map.getBearing(),\n      width: map.width,\n      height: map.height\n    };\n  };\n  _proto._frameLoop = function _frameLoop(framestamp) {\n    var _this2 = this;\n    if (!this.map) {\n      this._cancelFrameLoop();\n      return;\n    }\n    framestamp = framestamp || 0;\n    this._frameTimestamp = framestamp;\n    this._resizeCount = 0;\n    this.renderFrame(framestamp);\n    this._animationFrame = requestAnimFrame(function (framestamp) {\n      _this2._frameLoop(framestamp);\n    });\n  };\n  _proto._cancelFrameLoop = function _cancelFrameLoop() {\n    if (this._animationFrame) {\n      cancelAnimFrame(this._animationFrame);\n    }\n  };\n  _proto._drawLayerCanvasImage = function _drawLayerCanvasImage(layer, layerImage, targetWidth, targetHeight) {\n    var ctx = this.context;\n    var point = layerImage['point'].round();\n    var dpr = this.map.getDevicePixelRatio();\n    if (dpr !== 1) {\n      point._multi(dpr);\n    }\n    var canvasImage = layerImage['image'];\n    var width = canvasImage.width,\n      height = canvasImage.height;\n    if (point.x + width <= 0 || point.y + height <= 0) {\n      return;\n    }\n    var op = layer.options['opacity'];\n    if (!isNumber(op)) {\n      op = 1;\n    }\n    if (op <= 0) {\n      return;\n    }\n    var imgOp = layerImage['opacity'];\n    if (!isNumber(imgOp)) {\n      imgOp = 1;\n    }\n    if (imgOp <= 0) {\n      return;\n    }\n    var alpha = ctx.globalAlpha;\n    if (op < 1) {\n      ctx.globalAlpha *= op;\n    }\n    if (imgOp < 1) {\n      ctx.globalAlpha *= imgOp;\n    }\n    if (layer.options['cssFilter']) {\n      ctx.filter = layer.options['cssFilter'];\n    }\n    var renderer = layer.getRenderer();\n    var matrix = renderer.__zoomTransformMatrix;\n    var clipped = renderer.clipCanvas(this.context);\n    if (matrix) {\n      ctx.save();\n      ctx.setTransform.apply(ctx, matrix);\n    }\n    ctx.drawImage(canvasImage, 0, 0, width, height, point.x, point.y, targetWidth, targetHeight);\n    if (matrix) {\n      ctx.restore();\n    }\n    if (clipped) {\n      ctx.restore();\n    }\n    if (ctx.filter !== 'none') {\n      ctx.filter = 'none';\n    }\n    ctx.globalAlpha = alpha;\n  };\n  _proto._drawCenterCross = function _drawCenterCross() {\n    var cross = this.map.options['centerCross'];\n    if (cross) {\n      var ctx = this.context;\n      var p = new Point(this.canvas.width / 2, this.canvas.height / 2);\n      if (isFunction(cross)) {\n        cross(ctx, p);\n      } else {\n        Canvas.drawCross(this.context, p.x, p.y, 2, '#f00');\n      }\n    }\n  };\n  _proto._drawContainerExtent = function _drawContainerExtent() {\n    var cascadePitches = this.map.options.cascadePitches;\n    var h30 = this.map.height - this.map._getVisualHeight(cascadePitches[0]);\n    var h60 = this.map.height - this.map._getVisualHeight(cascadePitches[1]);\n    var extent = this.map.getContainerExtent();\n    var ctx = this.context;\n    ctx.beginPath();\n    ctx.moveTo(0, extent.ymin);\n    ctx.lineTo(extent.xmax, extent.ymin);\n    ctx.stroke();\n    ctx.beginPath();\n    ctx.moveTo(0, h30);\n    ctx.lineTo(extent.xmax, h30);\n    ctx.stroke();\n    ctx.beginPath();\n    ctx.moveTo(0, h60);\n    ctx.lineTo(extent.xmax, h60);\n    ctx.stroke();\n  };\n  _proto._drawFog = function _drawFog() {\n    var map = this.map;\n    if (map.getPitch() <= map.options['maxVisualPitch'] || !map.options['fog']) {\n      return;\n    }\n    var fogThickness = 30;\n    var r = map.getDevicePixelRatio();\n    var ctx = this.context,\n      clipExtent = map.getContainerExtent();\n    var top = (map.height - map._getVisualHeight(75)) * r;\n    if (top < 0) top = 0;\n    var bottom = clipExtent.ymin * r,\n      h = Math.ceil(bottom - top),\n      color = map.options['fogColor'].join();\n    var gradient = ctx.createLinearGradient(0, top, 0, bottom + fogThickness);\n    var landscape = 1 - fogThickness / (h + fogThickness);\n    gradient.addColorStop(0, \"rgba(\" + color + \", 0)\");\n    gradient.addColorStop(0.3, \"rgba(\" + color + \", 0.3)\");\n    gradient.addColorStop(landscape, \"rgba(\" + color + \", 1)\");\n    gradient.addColorStop(1, \"rgba(\" + color + \", 0)\");\n    ctx.beginPath();\n    ctx.fillStyle = gradient;\n    ctx.fillRect(0, top, Math.ceil(clipExtent.getWidth()) * r, Math.ceil(h + fogThickness));\n  };\n  _proto._debugSky = function _debugSky() {\n    var map = this.map;\n    if (!map) {\n      return this;\n    }\n    var height = map.getContainerExtent().ymin;\n    if (height <= 0) {\n      return this;\n    }\n    var ctx = this.context;\n    ctx.strokeStyle = 'red';\n    ctx.strokeRect(0, 0, map.width, height);\n    return this;\n  };\n  _proto._getAllLayerToRender = function _getAllLayerToRender() {\n    return this.map._getLayers();\n  };\n  _proto.clearCanvas = function clearCanvas() {\n    if (!this.canvas) {\n      return;\n    }\n    Canvas.clearRect(this.context, 0, 0, this.canvas.width, this.canvas.height);\n  };\n  _proto._updateCanvasSize = function _updateCanvasSize() {\n    if (!this.canvas || this._containerIsCanvas) {\n      return false;\n    }\n    var map = this.map,\n      mapSize = map.getSize(),\n      canvas = this.canvas,\n      r = map.getDevicePixelRatio();\n    var _calCanvasSize = calCanvasSize(mapSize, r),\n      width = _calCanvasSize.width,\n      height = _calCanvasSize.height,\n      cssWidth = _calCanvasSize.cssWidth,\n      cssHeight = _calCanvasSize.cssHeight;\n    if (canvas.style && (canvas.style.width !== cssWidth || canvas.style.height !== cssHeight)) {\n      canvas.style.width = cssWidth;\n      canvas.style.height = cssHeight;\n    }\n    if (width === canvas.width && height === canvas.height) {\n      return false;\n    }\n    canvas.height = height;\n    canvas.width = width;\n    this.topLayer.width = canvas.width;\n    this.topLayer.height = canvas.height;\n    return true;\n  };\n  _proto.createCanvas = function createCanvas() {\n    this.topLayer = createEl('canvas');\n    this.topCtx = this.topLayer.getContext('2d');\n    if (this._containerIsCanvas) {\n      this.canvas = this.map._containerDOM;\n    } else {\n      this.canvas = createEl('canvas');\n      this._updateCanvasSize();\n      this.map._panels.canvasContainer.appendChild(this.canvas);\n    }\n    this.context = this.canvas.getContext('2d');\n  };\n  _proto._updateDomPosition = function _updateDomPosition(framestamp) {\n    if (this._checkPositionTime === undefined) {\n      this._checkPositionTime = -Infinity;\n    }\n    var dTime = Math.abs(framestamp - this._checkPositionTime);\n    if (dTime >= 500) {\n      computeDomPosition(this.map._containerDOM);\n      this._checkPositionTime = Math.min(framestamp, this._checkPositionTime);\n    }\n    return this;\n  };\n  _proto._handleResizeEventList = function _handleResizeEventList(time) {\n    if (!this._resizeEventList) {\n      return this;\n    }\n    var len = this._resizeEventList.length;\n    if (len === 0) {\n      return this;\n    }\n    if (this._resizeTime && time - this._resizeTime < 60) {\n      return this;\n    }\n    var contentRect = this._resizeEventList[len - 1].contentRect;\n    this.map._containerDomContentRect = contentRect;\n    this._resizeEventList = [];\n    this._checkSize(contentRect);\n    this._resizeCount = this._resizeCount || 0;\n    this.renderFrame((this._frameTimestamp || 0) + ++this._resizeCount / 100);\n    this._resizeTime = time;\n    return this;\n  };\n  _proto._checkSize = function _checkSize() {\n    if (!this.map) {\n      return;\n    }\n    this.map.checkSize();\n  };\n  _proto._setCheckSizeInterval = function _setCheckSizeInterval(interval) {\n    var _this3 = this;\n    if (Browser$1.resizeObserver) {\n      if (this._resizeObserver) {\n        this._resizeObserver.disconnect();\n      }\n      if (this.map) {\n        this._resizeObserver = new ResizeObserver(function (entries) {\n          if (!_this3.map || _this3.map.isRemoved()) {\n            _this3._resizeObserver.disconnect();\n          } else if (entries.length) {\n            _this3._resizeEventList = _this3._resizeEventList || [];\n            _this3._resizeEventList.push(entries[0]);\n          }\n        });\n        this._resizeObserver.observe(this.map._containerDOM);\n      }\n    } else {\n      clearInterval(this._resizeInterval);\n      this._checkSizeInterval = interval;\n      this._resizeInterval = setInterval(function () {\n        if (!_this3.map || _this3.map.isRemoved()) {\n          clearInterval(_this3._resizeInterval);\n        } else {\n          _this3._checkSize();\n        }\n      }, this._checkSizeInterval);\n    }\n  };\n  _proto._registerEvents = function _registerEvents() {\n    var _this4 = this;\n    var map = this.map;\n    if (map.options['checkSize'] && !IS_NODE && typeof window !== 'undefined') {\n      this._setCheckSizeInterval(map.options['checkSizeInterval']);\n    }\n    if (!Browser$1.mobile) {\n      map.on('_mousemove', this._onMapMouseMove, this);\n    }\n    map.on('_dragrotatestart _dragrotating _dragrotateend _movestart _moving _moveend _zoomstart', function (param) {\n      _this4._eventParam = param;\n    });\n    map.on('_zooming', function (param) {\n      if (!map.getPitch()) {\n        _this4._zoomMatrix = param['matrix']['container'];\n      }\n      _this4._eventParam = param;\n    });\n    map.on('_zoomend', function (param) {\n      _this4._eventParam = param;\n      delete _this4._zoomMatrix;\n    });\n    map.on('_spatialreferencechange', function () {\n      _this4._spatialRefChanged = true;\n    });\n    if (Browser$1.webgl && typeof document !== 'undefined') {\n      addDomEvent(document, 'visibilitychange', this._thisDocVisibilitychange, this);\n      addDomEvent(document, 'dragstart', this._thisDocDragStart, this);\n      addDomEvent(document, 'dragend', this._thisDocDragEnd, this);\n    }\n    if (Browser$1.addDPRListening) {\n      Browser$1.addDPRListening(this.map);\n    }\n  };\n  _proto._onMapMouseMove = function _onMapMouseMove(param) {\n    var _this5 = this;\n    var map = this.map;\n    if (map.isInteracting() || !map.options['hitDetect']) {\n      return;\n    }\n    if (this._hitDetectFrame) {\n      cancelAnimFrame(this._hitDetectFrame);\n    }\n    this._hitDetectFrame = requestAnimFrame(function () {\n      _this5.hitDetect(param['containerPoint']);\n    });\n  };\n  _proto._getCanvasLayers = function _getCanvasLayers() {\n    return this.map._getLayers(function (layer) {\n      return layer.isCanvasRender();\n    });\n  };\n  _proto.addTopElement = function addTopElement(e) {\n    if (!this._tops) {\n      this._tops = [];\n    }\n    this._tops.push(e);\n  };\n  _proto.removeTopElement = function removeTopElement(e) {\n    if (!this._tops) {\n      return;\n    }\n    var idx = this._tops.indexOf(e);\n    if (idx >= 0) {\n      this._tops.splice(idx, 1);\n    }\n  };\n  _proto.getTopElements = function getTopElements() {\n    return this._tops || [];\n  };\n  _proto.drawTops = function drawTops() {\n    this.topCtx.clearRect(0, 0, this.topLayer.width, this.topLayer.height);\n    this.map.fire('drawtopstart');\n    this.map.fire('drawtops');\n    var tops = this.getTopElements();\n    var updated = false;\n    for (var i = 0; i < tops.length; i++) {\n      if (tops[i].render(this.topCtx)) {\n        updated = true;\n      }\n    }\n    if (updated) {\n      this.context.drawImage(this.topLayer, 0, 0);\n    }\n    this.map.fire('drawtopsend');\n  };\n  return MapCanvasRenderer;\n}(MapRenderer);\nMap$1.registerRenderer('canvas', MapCanvasRenderer);\nMap$1.mergeOptions({\n  'fog': false,\n  'fogColor': [233, 233, 233]\n});\n\n\n\nvar index$6 = /*#__PURE__*/Object.freeze({\n  ResourceCache: ResourceCache,\n  CanvasRenderer: CanvasRenderer,\n  ImageGLRenderable: ImageGLRenderable,\n  MapRenderer: MapRenderer,\n  MapCanvasRenderer: MapCanvasRenderer,\n  Renderable: Renderable,\n  ImageLayerCanvasRenderer: ImageLayerCanvasRenderer,\n  ImageLayerGLRenderer: ImageLayerGLRenderer,\n  TileLayerCanvasRenderer: TileLayerCanvasRenderer,\n  TileLayerGLRenderer: TileLayerGLRenderer,\n  CanvasTileLayerCanvasRenderer: CanvasRenderer$1,\n  CanvasTileLayerGLRenderer: GLRenderer,\n  QuadStencil: QuadStencil,\n  OverlayLayerCanvasRenderer: OverlayLayerRenderer,\n  VectorLayerCanvasRenderer: VectorLayerRenderer,\n  CanvasLayerRenderer: CanvasLayerRenderer\n});\n\nvar CenterPointRenderer = {\n  _getRenderPoints: function _getRenderPoints() {\n    return [[this._getCenter2DPoint(this.getMap().getGLRes())], null];\n  }\n};\nMarker.include(CenterPointRenderer);\nEllipse.include(CenterPointRenderer);\nCircle.include(CenterPointRenderer);\nSector.include(CenterPointRenderer);\nRectangle.include({\n  _getRenderPoints: function _getRenderPoints(placement) {\n    var map = this.getMap();\n    var glRes = map.getGLRes();\n    if (placement === 'vertex') {\n      var shell = this._trimRing(this.getShell());\n      var points = [];\n      for (var i = 0, len = shell.length; i < len; i++) {\n        points.push(map.coordToPointAtRes(shell[i], glRes));\n      }\n      return [points, null];\n    } else {\n      var c = map.coordToPointAtRes(this.getCenter(), glRes);\n      return [[c], null];\n    }\n  }\n});\nvar PolyRenderer = {\n  _getRenderPoints: function _getRenderPoints(placement) {\n    var map = this.getMap();\n    var glRes = map.getGLRes();\n    var points,\n      rotations = null;\n    if (placement === 'point') {\n      points = this._getPath2DPoints(this._getPrjCoordinates(), false, glRes);\n      if (points && points.length > 0 && Array.isArray(points[0])) {\n        points = points[0].concat(points[1]);\n      }\n    } else if (placement === 'vertex') {\n      points = this._getPath2DPoints(this._getPrjCoordinates(), false, glRes);\n      rotations = [];\n      if (points && points.length > 0 && Array.isArray(points[0])) {\n        for (var i = 0, l = points.length; i < l; i++) {\n          for (var ii = 0, ll = points[i].length; ii < ll; ii++) {\n            if (ii === 0) {\n              rotations.push([points[i][ii], points[i][ii + 1]]);\n            } else {\n              rotations.push([points[i][ii - 1], points[i][ii]]);\n            }\n          }\n        }\n        points = points[0].concat(points[1]);\n      } else {\n        for (var _i = 0, _l = points.length; _i < _l; _i++) {\n          if (_i === 0) {\n            rotations.push([points[_i], points[_i + 1]]);\n          } else {\n            rotations.push([points[_i - 1], points[_i]]);\n          }\n        }\n      }\n    } else if (placement === 'line') {\n      points = [];\n      rotations = [];\n      var vertice = this._getPath2DPoints(this._getPrjCoordinates(), false, glRes),\n        isSplitted = vertice.length > 0 && Array.isArray(vertice[0]);\n      if (isSplitted) {\n        var ring;\n        for (var _i2 = 1, _l2 = vertice.length; _i2 < _l2; _i2++) {\n          ring = vertice[_i2];\n          if (this instanceof Polygon && ring.length > 0 && !ring[0].equals(ring[ring.length - 1])) {\n            ring.push(ring[0]);\n          }\n          for (var _ii = 1, _ll = ring.length; _ii < _ll; _ii++) {\n            points.push(ring[_ii].add(ring[_ii - 1])._multi(0.5));\n            rotations.push([ring[_ii - 1], ring[_ii]]);\n          }\n        }\n      } else {\n        if (this instanceof Polygon && vertice.length > 0 && !vertice[0].equals(vertice[vertice.length - 1])) {\n          vertice.push(vertice[0]);\n        }\n        for (var _i3 = 1, _l3 = vertice.length; _i3 < _l3; _i3++) {\n          points.push(vertice[_i3].add(vertice[_i3 - 1])._multi(0.5));\n          rotations.push([vertice[_i3 - 1], vertice[_i3]]);\n        }\n      }\n    } else if (placement === 'vertex-first') {\n      var coords = this._getPrjCoordinates();\n      var _l4 = coords.length;\n      var point0 = _l4 ? map._prjToPointAtRes(coords[0], glRes) : null;\n      points = _l4 ? [point0] : [];\n      rotations = _l4 ? [[point0, coords[1] ? map._prjToPointAtRes(coords[1], glRes) : point0]] : [];\n    } else if (placement === 'vertex-last') {\n      var _coords = this._getPrjCoordinates();\n      var _l5 = _coords.length;\n      var curretPoint = _l5 ? map._prjToPointAtRes(_coords[_l5 - 1], glRes) : null;\n      points = _l5 ? [curretPoint] : [];\n      var previous = _l5 > 1 ? _l5 - 2 : _l5 - 1;\n      rotations = _l5 ? [[_coords[previous] ? map._prjToPointAtRes(_coords[previous], glRes) : curretPoint, curretPoint]] : [];\n    } else {\n      var center = this.getCenter();\n      if (!center) {\n        points = [];\n      } else {\n        var pcenter = this._getProjection().project(center);\n        points = [map._prjToPointAtRes(pcenter, glRes)];\n      }\n    }\n    return [points, rotations];\n  }\n};\nLineString.include(PolyRenderer);\nPolygon.include(PolyRenderer);\n\nvar TEMP_WITHIN = {\n  within: false,\n  center: [0, 0]\n};\nfunction isWithinPixel(painter) {\n  if (!painter || !painter._containerBbox) {\n    TEMP_WITHIN.within = false;\n  } else {\n    TEMP_WITHIN.within = false;\n    var _painter$_containerBb = painter._containerBbox,\n      minx = _painter$_containerBb.minx,\n      miny = _painter$_containerBb.miny,\n      maxx = _painter$_containerBb.maxx,\n      maxy = _painter$_containerBb.maxy;\n    var offsetx = Math.abs(maxx - minx);\n    var offsety = Math.abs(maxy - miny);\n    if (offsetx <= 1 && offsety <= 1) {\n      TEMP_WITHIN.within = true;\n      TEMP_WITHIN.center[0] = (minx + maxx) / 2;\n      TEMP_WITHIN.center[1] = (miny + maxy) / 2;\n    }\n    delete painter._containerBbox;\n  }\n  return TEMP_WITHIN;\n}\nGeometry.include({\n  _redrawWhenPitch: function _redrawWhenPitch() {\n    return false;\n  },\n  _redrawWhenRotate: function _redrawWhenRotate() {\n    return false;\n  },\n  _getRenderBBOX: function _getRenderBBOX(ctx, points) {\n    if (!ctx.isHitTesting) {\n      resetBBOX(BBOX_TEMP);\n      pointsBBOX(points, BBOX_TEMP);\n      return BBOX_TEMP;\n    }\n    return null;\n  }\n});\nvar el = {\n  _redrawWhenPitch: function _redrawWhenPitch() {\n    return true;\n  },\n  _redrawWhenRotate: function _redrawWhenRotate() {\n    return this instanceof Ellipse || this instanceof Sector;\n  },\n  _paintAsPath: function _paintAsPath() {\n    var map = this.getMap();\n    var altitude = this._getAltitude();\n    return altitude > 0 || map.getPitch() || this instanceof Ellipse && map.getBearing();\n  },\n  _getPaintParams: function _getPaintParams() {\n    var map = this.getMap();\n    if (this._paintAsPath()) {\n      return Polygon.prototype._getPaintParams.call(this, true);\n    }\n    var pcenter = this._getPrjCoordinates();\n    var pt = map._prjToPointAtRes(pcenter, map.getGLRes());\n    var size = this._getRenderSize(pt);\n    return [pt].concat(size);\n  },\n  _paintOn: function _paintOn() {\n    if (this._paintAsPath()) {\n      return Canvas.polygon.apply(Canvas, arguments);\n    } else {\n      return Canvas.ellipse.apply(Canvas, arguments);\n    }\n  },\n  _getRenderSize: function _getRenderSize(pt) {\n    var map = this.getMap(),\n      glRes = map.getGLRes();\n    var prjExtent = this._getPrjExtent();\n    var pmin = map._prjToPointAtRes(prjExtent.getMin(), glRes),\n      pmax = map._prjToPointAtRes(prjExtent.getMax(), glRes);\n    return [Math.abs(pmax.x - pmin.x) / 2, Math.abs(pmax.y - pt.y), Math.abs(pt.y - pmin.y)];\n  }\n};\nEllipse.include(el);\nCircle.include(el);\nRectangle.include({\n  _getPaintParams: function _getPaintParams() {\n    var map = this.getMap();\n    var shell = this._getPrjShell();\n    var points = this._getPath2DPoints(shell, false, map.getGLRes());\n    return [points];\n  },\n  _paintOn: Canvas.polygon\n});\nSector.include(el, {\n  _redrawWhenPitch: function _redrawWhenPitch() {\n    return true;\n  },\n  _getPaintParams: function _getPaintParams() {\n    if (this._paintAsPath()) {\n      return Polygon.prototype._getPaintParams.call(this, true);\n    }\n    var map = this.getMap();\n    var pt = map._prjToPointAtRes(this._getPrjCoordinates(), map.getGLRes());\n    var size = this._getRenderSize(pt);\n    return [pt, size[0], [this.getStartAngle(), this.getEndAngle()]];\n  },\n  _paintOn: function _paintOn() {\n    if (this._paintAsPath()) {\n      return Canvas.polygon.apply(Canvas, arguments);\n    } else {\n      var r = this.getMap().getBearing();\n      var args = arguments;\n      if (r) {\n        args[3] = args[3].slice(0);\n        args[3][0] += r;\n        args[3][1] += r;\n      }\n      return Canvas.sector.apply(Canvas, args);\n    }\n  }\n});\nPath.include({\n  _paintAsPath: function _paintAsPath() {\n    return true;\n  }\n});\nLineString.include({\n  arrowStyles: {\n    'classic': [3, 4]\n  },\n  _getArrowShape: function _getArrowShape(prePoint, point, lineWidth, arrowStyle, tolerance) {\n    if (!prePoint || !point || prePoint.equals(point)) {\n      return null;\n    }\n    if (!tolerance) {\n      tolerance = 0;\n    }\n    var width = lineWidth * arrowStyle[0],\n      height = lineWidth * arrowStyle[1] + tolerance,\n      hw = width / 2 + tolerance;\n    var normal;\n    if (point.nextCtrlPoint || point.prevCtrlPoint) {\n      if (point.prevCtrlPoint) {\n        normal = point.sub(new Point(point.prevCtrlPoint));\n      } else {\n        normal = point.sub(new Point(point.nextCtrlPoint));\n      }\n    } else {\n      normal = point.sub(prePoint);\n    }\n    normal._unit();\n    var p1 = point.sub(normal.multi(height));\n    normal._perp();\n    var p0 = p1.add(normal.multi(hw));\n    normal._multi(-1);\n    var p2 = p1.add(normal.multi(hw));\n    return [p0, point, p2, p0];\n  },\n  _getPaintParams: function _getPaintParams() {\n    var prjVertexes = this._getPrjCoordinates();\n    var points = this._getPath2DPoints(prjVertexes, false, this.getMap().getGLRes());\n    return [points];\n  },\n  _paintOn: function _paintOn(ctx, points, lineOpacity, fillOpacity, dasharray) {\n    var r = isWithinPixel(this._painter);\n    if (r.within) {\n      Canvas.pixelRect(ctx, r.center, lineOpacity, fillOpacity);\n    } else if (this.options['smoothness']) {\n      Canvas.paintSmoothLine(ctx, points, lineOpacity, this.options['smoothness'], false, this._animIdx, this._animTailRatio);\n    } else {\n      Canvas.path(ctx, points, lineOpacity, null, dasharray);\n    }\n    this._paintArrow(ctx, points, lineOpacity);\n    return this._getRenderBBOX(ctx, points);\n  },\n  _getArrowPlacement: function _getArrowPlacement() {\n    return this.options['arrowPlacement'];\n  },\n  _getArrowStyle: function _getArrowStyle() {\n    var arrowStyle = this.options['arrowStyle'];\n    if (arrowStyle) {\n      return Array.isArray(arrowStyle) ? arrowStyle : this.arrowStyles[arrowStyle];\n    }\n    return null;\n  },\n  _getArrows: function _getArrows(points, lineWidth, tolerance) {\n    var arrowStyle = this._getArrowStyle();\n    if (!arrowStyle || points.length < 2) {\n      return [];\n    }\n    var isSplitted = points.length > 0 && Array.isArray(points[0]);\n    var segments = isSplitted ? points : [points];\n    var placement = this._getArrowPlacement();\n    var arrows = [];\n    var map = this.getMap(),\n      first = map.coordToContainerPoint(this.getFirstCoordinate()),\n      last = map.coordToContainerPoint(this.getLastCoordinate());\n    for (var i = segments.length - 1; i >= 0; i--) {\n      if (placement === 'vertex-first' || placement === 'vertex-firstlast' && segments[i][0].closeTo(first, 0.01)) {\n        var arrow = this._getArrowShape(segments[i][1], segments[i][0], lineWidth, arrowStyle, tolerance);\n        if (arrow) {\n          arrows.push(arrow);\n        }\n      }\n      if (placement === 'vertex-last' || placement === 'vertex-firstlast' && segments[i][segments[i].length - 1].closeTo(last, 0.01)) {\n        var _arrow = this._getArrowShape(segments[i][segments[i].length - 2], segments[i][segments[i].length - 1], lineWidth, arrowStyle, tolerance);\n        if (_arrow) {\n          arrows.push(_arrow);\n        }\n      } else if (placement === 'point') {\n        this._getArrowPoints(arrows, segments[i], lineWidth, arrowStyle, tolerance);\n      }\n    }\n    return arrows;\n  },\n  _getArrowPoints: function _getArrowPoints(arrows, segments, lineWidth, arrowStyle, tolerance) {\n    for (var ii = 0, ll = segments.length - 1; ii < ll; ii++) {\n      var arrow = this._getArrowShape(segments[ii], segments[ii + 1], lineWidth, arrowStyle, tolerance);\n      if (arrow) {\n        arrows.push(arrow);\n      }\n    }\n  },\n  _paintArrow: function _paintArrow(ctx, points, lineOpacity) {\n    var lineWidth = this._getInternalSymbol()['lineWidth'];\n    if (!isNumber(lineWidth) || lineWidth < 3) {\n      lineWidth = 3;\n    }\n    var arrows = this._getArrows(points, lineWidth);\n    if (!arrows.length) {\n      return;\n    }\n    if (ctx.setLineDash) {\n      ctx.setLineDash([]);\n    }\n    for (var i = arrows.length - 1; i >= 0; i--) {\n      ctx.fillStyle = ctx.strokeStyle;\n      Canvas.polygon(ctx, arrows[i], lineOpacity, lineOpacity);\n    }\n  }\n});\nPolygon.include({\n  _getPaintParams: function _getPaintParams(disableSimplify) {\n    var glRes = this.getMap().getGLRes();\n    var prjVertexes = this._getPrjShell();\n    var points = this._getPath2DPoints(prjVertexes, disableSimplify, glRes);\n    var isSplitted = points.length > 0 && Array.isArray(points[0]);\n    if (isSplitted) {\n      points = [[points[0]], [points[1]]];\n    }\n    var prjHoles = this._getPrjHoles();\n    var holePoints = [];\n    if (prjHoles && prjHoles.length > 0) {\n      var simplified = this._simplified;\n      for (var i = 0; i < prjHoles.length; i++) {\n        var hole = this._getPath2DPoints(prjHoles[i], disableSimplify, glRes);\n        if (Array.isArray(hole) && isSplitted) {\n          if (Array.isArray(hole[0])) {\n            points[0].push(hole[0]);\n            points[1].push(hole[1]);\n          } else {\n            points[0].push(hole);\n          }\n        } else {\n          holePoints.push(hole);\n        }\n      }\n      if (simplified) {\n        this._simplified = simplified;\n      }\n    }\n    if (!isSplitted) {\n      points = [points];\n      pushIn(points, holePoints);\n    }\n    return [points];\n  },\n  _paintOn: function _paintOn(ctx, points, lineOpacity, fillOpacity, dasharray) {\n    var r = isWithinPixel(this._painter);\n    if (r.within) {\n      Canvas.pixelRect(ctx, r.center, lineOpacity, fillOpacity);\n    } else {\n      Canvas.polygon(ctx, points, lineOpacity, fillOpacity, dasharray, this.options['smoothness']);\n    }\n    return this._getRenderBBOX(ctx, points);\n  }\n});\n\nMap$1.VERSION = version;\nvar worker = {\n  Actor: Actor\n};\n\nexport { index$1 as Util, dom as DomUtil, strings as StringUtil, index as MapboxUtil, Map$1 as Map, index$4 as ui, index$5 as control, index$6 as renderer, index$3 as symbolizer, Animation$1 as animation, worker, Browser$1 as Browser, LRUCache, Ajax, Canvas, Promise$1 as Promise, Class, Eventable, JSONAble, CollisionIndex, Handlerable, Handler$1 as Handler, DragHandler, MapTool, DrawTool, AreaTool, DistanceTool, SpatialReference, animate, registerWorkerAdapter, INTERNAL_LAYER_PREFIX, GEOMETRY_COLLECTION_TYPES, GEOJSON_TYPES, RESOURCE_PROPERTIES, RESOURCE_SIZE_PROPERTIES, NUMERICAL_PROPERTIES, COLOR_PROPERTIES, DEFAULT_TEXT_SIZE, projections as projection, index$2 as measurer, Coordinate, CRS, Extent, Point, PointExtent, Size, Transformation, Layer, TileLayer, GroupTileLayer, WMSTileLayer, CanvasTileLayer, ImageLayer, OverlayLayer, VectorLayer, CanvasLayer, ParticleLayer, TileSystem, TileConfig, ArcCurve, Circle, ConnectorLine, ArcConnectorLine, CubicBezierCurve, Curve, Ellipse, GeoJSON, Geometry, GeometryCollection, Label, LineString, Marker, MultiLineString, MultiPoint, MultiPolygon, Polygon, QuadBezierCurve, Rectangle, Sector, TextBox, TextMarker };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}