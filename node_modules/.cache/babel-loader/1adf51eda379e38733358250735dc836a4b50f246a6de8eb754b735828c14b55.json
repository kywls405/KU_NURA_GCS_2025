{"ast":null,"code":"import{useEffect,useRef}from\"react\";import*as maptalks from\"maptalks\";/**\r\n * 지도를 출력하는 아름다운 함수\r\n * @returns 지도가 있는 div\r\n */import{jsx as _jsx}from\"react/jsx-runtime\";function Map(props){var mapRef=useRef();var lineRef=useRef();var width=window.innerWidth>660?window.innerWidth-360:300;var height=window.innerHeight>700?window.innerHeight-80:620;// div가 생성된 후 한번 실행되는 함수\nuseEffect(function(){// 지도\nvar map=new maptalks.Map(\"map\",{center:[127.205438,34.609169],zoom:17,pitch:40,centerCross:true,baseLayer:new maptalks.TileLayer(\"tile\",{urlTemplate:\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",subdomains:[\"a\",\"b\",\"c\"]})});mapRef.current=map;// 지도 위 선\nvar line=new maptalks.LineString(undefined,{properties:{altitude:[]},symbol:{lineColor:\"rgb(255, 0, 55)\",lineWidth:3}});lineRef.current=line;// 지도에 선을 긋는 벡터 레이어\nnew maptalks.VectorLayer(\"vector\",line,{enableAltitude:true}).addTo(map);return function(){// 인스턴스 제거\nif(mapRef.current){mapRef.current.remove();}if(lineRef.current){lineRef.current.remove();}};},[]);useEffect(function(){if(Array.isArray(props.coord)&&Array.isArray(props.alt)&&props.coord.length>0&&props.alt.length==props.coord.length){var lastidx=props.coord.length-1;mapRef.current.setCenter(props.coord[lastidx]);lineRef.current.setCoordinates(props.coord);lineRef.current.setProperties({altitude:props.alt});}},[props.coord,props.alt]);return/*#__PURE__*/_jsx(\"div\",{id:\"map\",style:{width:width,height:height}});}export default Map;","map":{"version":3,"names":["useEffect","useRef","maptalks","jsx","_jsx","Map","props","mapRef","lineRef","width","window","innerWidth","height","innerHeight","map","center","zoom","pitch","centerCross","baseLayer","TileLayer","urlTemplate","subdomains","current","line","LineString","undefined","properties","altitude","symbol","lineColor","lineWidth","VectorLayer","enableAltitude","addTo","remove","Array","isArray","coord","alt","length","lastidx","setCenter","setCoordinates","setProperties","id","style"],"sources":["C:/Users/yati0/NURA_GCS/src/map3d.js"],"sourcesContent":["import { useEffect, useRef } from \"react\";\r\n\r\nimport * as maptalks from \"maptalks\";\r\n\r\n/**\r\n * 지도를 출력하는 아름다운 함수\r\n * @returns 지도가 있는 div\r\n */\r\nfunction Map(props) {\r\n  const mapRef = useRef();\r\n  const lineRef = useRef();\r\n\r\n  const width = window.innerWidth > 660 ? window.innerWidth - 360 : 300;\r\n  const height = window.innerHeight > 700 ? window.innerHeight - 80 : 620;\r\n\r\n  // div가 생성된 후 한번 실행되는 함수\r\n  useEffect(() => {\r\n    // 지도\r\n    const map = new maptalks.Map(\"map\", {\r\n      center: [127.205438, 34.609169],\r\n      zoom: 17,\r\n      pitch: 40,\r\n      centerCross: true,\r\n      baseLayer: new maptalks.TileLayer(\"tile\", {\r\n        urlTemplate: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",\r\n        subdomains: [\"a\", \"b\", \"c\"],\r\n      }),\r\n    });\r\n    mapRef.current = map;\r\n\r\n    // 지도 위 선\r\n    const line = new maptalks.LineString(undefined, {\r\n      properties: {\r\n        altitude: [],\r\n      },\r\n      symbol: {\r\n        lineColor: \"rgb(255, 0, 55)\",\r\n        lineWidth: 3,\r\n      },\r\n    });\r\n    lineRef.current = line;\r\n\r\n    // 지도에 선을 긋는 벡터 레이어\r\n    new maptalks.VectorLayer(\"vector\", line, { enableAltitude: true }).addTo(\r\n      map\r\n    );\r\n\r\n    return () => {\r\n      // 인스턴스 제거\r\n      if (mapRef.current) {\r\n        mapRef.current.remove();\r\n      }\r\n      if (lineRef.current) {\r\n        lineRef.current.remove();\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (\r\n      Array.isArray(props.coord) &&\r\n      Array.isArray(props.alt) &&\r\n      props.coord.length > 0 &&\r\n      props.alt.length == props.coord.length\r\n    ) {\r\n      const lastidx = props.coord.length - 1;\r\n      mapRef.current.setCenter(props.coord[lastidx]);\r\n      lineRef.current.setCoordinates(props.coord);\r\n      lineRef.current.setProperties({ altitude: props.alt });\r\n    }\r\n  }, [props.coord, props.alt]);\r\n\r\n  return <div id=\"map\" style={{ width: width, height: height }}></div>;\r\n}\r\n\r\nexport default Map;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}